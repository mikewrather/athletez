define(["vendor","views","facade","videopreview/models/videoup","text!videopreview/templates/upload.html","plupload"],function(e,t,n,r){var i=require("text!videopreview/templates/upload.html"),s,o=e.$,u=n._,a=t.SectionView,f=e.Mustache;return s=a.extend({name:"Video Preview Form View",id:"videoPreviewForm",template:i,data:i,events:{"change input:file":"play","click #uploadfiles":"uploadFiles"},initialize:function(e){a.prototype.initialize.call(this,e),u.bindAll(this,"beforeRender","render","afterRender");var t=this;this.render=u.wrap(this.render,function(e){return t.beforeRender(),e(),t}),o("#imgUploadModal").modal("show")},beforeRender:function(){console.log("beforeRender")},afterRender:function(){},uploadFiles:function(e){this.uploader=this.model.uploader,console.log(this.uploader,"up");if(o("input#title").val()==""){alert("Please enter a title for this video.");return}this.uploader.settings.multipart_params.name=o("input#title").val(),this.uploader.settings.multipart_params.mm=o("input#mm").is(":checked"),this.uploader.settings.multipart_params.sports_id=o("select#sports_id").val(),o("#uploadfiles").addClass("isUploading"),this.uploader.start(),e.preventDefault()},plupInit:function(){},play:function(e){var t=window.fileURL;Channel("select-video-preview-change").publish(t)},videoUploadClick:function(e){console.log("called",this.file),e.preventDefault(),o("#errormsg").hide(),o("#imageup").attr("disabled","disabled"),Channel("mediaup-add-video").publish(this.file)}}),s});