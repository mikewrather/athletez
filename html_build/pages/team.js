/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!team/templates/layout.html",[],function(){return'<div class="template-container team-template-outer">\r\n<div id="main-header"></div>\r\n\r\n<div id="menu-container"></div>\r\n\r\n<div class="green-left-heading">MESSAGE BOARD</div>\r\n<div  class="clearfix clear commentson-outer-box-h profile-comment-list-box"></div>\r\n<div id="comment_div" class="clearfix"></div>\r\n\r\n\r\n<div class="green-left-heading">PHOTO/VIDEO</div>\r\n	<div class="row-fluid" id="main-content">\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<div id="add-media" class="clearfix">add media</div>\r\n	</div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="green-left-heading">GAMES</div>\r\n	<div id="games_div" class="clearfix">\r\n	</div>\r\n	\r\n	<div class="green-left-heading">FANS</div>\r\n	<div id="fans-div" class="clearfix clear">&nbsp;</div>\r\n\r\n	<div id="roster-wrap" class="clearfix clear"></div>\r\n\r\n<div id="votes-area-h"></div>\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        Upcoming<br/>\r\n        <div id="upcoming-schedule" class="clearfix">\r\n        </div>\r\n        \r\n        Recent<br/>\r\n        <div id="recent-schedule" class="clearfix">        \r\n        </div>\r\n        \r\n        <a href="#">Missing a Game?</a>\r\n        \r\n        <div id="competitor-teams" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n    	\r\n    	\r\n    	\r\n        Roster\r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Videos\r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Photos\r\n        <div id="image-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        FanBoard\r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>\r\n'}),define("text!votes/templates/vote.html",[],function(){return'<a href="javascript:void(0);" class="team-action-h">Vote</a>\r\n<a href="javascript:void(0);" class="follow-action-h">Follow</a>'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("votes/models/vote",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/vote/add?subject_type_id="+this.entity_id+"&subject_id="+this.userId},setData:function(){this.set({subject_type_id:this.entity_id,subject_id:this.userId})}}),n}),define("votes/models/follow",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/ent/follow/"+this.entity_id+"/"+this.userId}}),n}),define("votes/views/vote",["require","text!votes/templates/vote.html","views","vendor","facade","utils","jqueryui","controller","votes/models/vote","votes/models/follow"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("votes/models/vote"),d=e("votes/models/follow");return n=o.extend({template:t,events:{"click .team-action-h":"vote","click .follow-action-h":"follow"},vote:function(){this.voteModelOb.save()},follow:function(){this.followModelOb.save(),h("new-fan").publish()},initialize:function(e){var t=this;console.log(e),a.bindAll(this),o.prototype.initialize.call(this,e);var n=this.model.get("payload");console.log(n),this.voteModelOb=new p,this.voteModelOb.userId=e.userId,this.voteModelOb.entity_id=n.enttypes_id,this.voteModelOb.setData(),this.followModelOb=new d,this.followModelOb.userId=e.userId,this.followModelOb.entity_id=n.enttypes_id},render:function(e,t,n){o.prototype.render.call(this,e,t,n)}}),n}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("team/models/basics",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/team/basics/"+this.id:"/api/team/basics/"+this.id}}),n}),define("team/models/addmedia",["models/base"],function(e){var t;return t=e.extend({id:undefined,defaults:{links:[{label:"Photo",link:"javascript: void(0);",id:"addPhoto"},{label:"Video",link:"javascript: void(0);",id:"addVideo"}]}}),t}),define("sportorg/models/game",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,game_name:null,game_day:null,game_time:null,game_picture:null,teams:[{team_name:null,team_location:null,points_scored:0,points_against:0,is_winner:null}],game_location:null},desc:"Game information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/games",["facade","collections","sportorg/models/game","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload;t.payload.custom_name=n.game_name}}),t}}),s}),define("team/collections/upcoming_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/upcoming_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/upcoming_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/recent_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/recent_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/recent_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("sportorg/collections/teams",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}}),i}),define("team/collections/competitor_teams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/competitor_teams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/competitor_teams/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("sportorg/models/roster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,user_picture:null,grad_year:0,sport_name:null,position:null,num_votes:0,num_followers:0},desc:"Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/rosters",["facade","collections","sportorg/models/roster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/rosters",["facade","sportorg/collections/rosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/rosters/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/rosters/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("media/models/video",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{video_id:0,video_title:null,video_quality:0,video_thumb:null,video_src:null,org_name:null,teams:[{complevel:null,season:null,grad_year:0,team_name:null,schedule:{schedule_date:null,other_team:null,schedule_summary:null}}],games:[{team1_name:null,team2_name:null}],video_desc:null,user_name:null,post_date:null,tags_count:0,tags:[],num_votes:0,num_views:0,num_comments:0,social_links:[{"class":null,title:null,link:null}]},desc:"Video information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("media/collections/videos",["facade","collections","media/models/video","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("team/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/videos/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/videos/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("media/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),t!=undefined?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},selectImageType:function(e){return r.each(this.get("payload").types,function(t,n){n==e&&(this.get("payload").image_path=t.url)},this),this}}),n}),define("media/collections/images",["facade","collections","media/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.processItemFromPayload(t,i),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("team/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/media/"+this.team_id+"/"+this.sport_id:"/api/team/media/"+this.team_id+"?sport_id="+this.sport_id}}),r}),define("site/models/comment",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("site/collections/comments",["facade","collections","site/models/comment","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("team/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("profile/collections/commentsof",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/commentsof/"+this.id:"/api/user/commentsof/"+this.id}}),r}),define("team/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id:"/api/team/comments/"+this.id}}),r}),define("sportorg/models/org",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/orgs",["facade","collections","sportorg/models/org","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i],u=o.teams,a=[];for(var f in u){var l=u[f];a.push(l)}o.teams=a,s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),i}),define("team/collections/orgs",["facade","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/games/"+this.id:"/api/team/games/"+this.id}}),r}),define("team/collections/fans",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/followers/"+this.id+"/"+this.sport_id:"/api/team/followers/"+this.id+"?sport_id="+this.sport_id}}),r}),define("text!team/templates/header.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n	\r\n	<div class="profile-heading">\r\n            <h3 class="username">{{org_sport_link_obj.org.org_name	}}</h3>\r\n            <h4>{{org_sport_link_obj.sport.sport_name}} | {{complevels_obj.complevel_name}} | {{seasons_obj.season_name}} \'{{year}}</h4>\r\n            <a href="javascript: void(0);" title="Edit Team">Edit Team</a>\r\n    </div>\r\n	\r\n    <!--div class="span4 textcenter">\r\n        {{#picture}}\r\n        <img src="{{picture}}" alt="{{name}}" />\r\n        {{/picture}}\r\n    </div>\r\n    <div class="span8">\r\n        <div>\r\n            <h3 class="teamname">{{name}}</h3>\r\n            <div class="teamloaction">{{location}}</div>\r\n            <div class="votes">Votes: {{num_votes}}</div>\r\n            <div class="followers">Followers: {{num_followers}}</div>\r\n        </div>\r\n        <div id="sports-info"></div>\r\n    </div-->\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/sport-select.html",[],function(){return'<select name="sport" id="select-sport">\r\n{{#payload}}\r\n    <option value="{{sport_id}}">{{sport_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports",["facade","collections","sportorg/models/sport","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){return testpath?testpath+"/sport_search":(this.state_name==undefined,"/api/sport/search/?sport_name="+this.sport_name+"&gender="+this.gender)},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){}}),i}),define("team/collections/sports",["facade","sportorg/collections/sports","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/sports/"+this.id:"/api/org/sports/"+this.id}}),r}),define("text!team/templates/sport-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="sport-info sport-info-{{sport_id}}" style="display:none">\r\n    <div class="complevels"></div>     \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/complevel-select.html",[],function(){return'<select name="complevel" class="select-complevel">\r\n{{#payload}}\r\n    <option value="{{complevel_id}}">{{complevel_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/complevel",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel information",exec_data:{exec_time:0,exec_error:!1}}),fetchSuccess:function(e,t){}}),n}),define("sportorg/collections/complevels",["facade","collections","sportorg/models/complevel","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload||[];for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/complevels",["facade","sportorg/collections/complevels","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/complevels/"+this.id+"/"+this.sport_id:"/api/org/complevels/"+this.id+"?sports_id="+this.sport_id}}),r}),define("text!team/templates/complevel-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="complevel-info complevel-info-{{sport_id}}-{{complevel_id}}" style="display:none">\r\n    <div class="seasons"></div>     \r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/seasonteam-select.html",[],function(){return'<select name="season" id="select-season">\r\n{{#payload}}\r\n    <option value="{{seasons_id}}">{{seasons_obj.season_name}} {{year}}</option>\r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/season",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,season_name:null},desc:"Season information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/seasons",["facade","collections","sportorg/models/season","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/seasons",["facade","sportorg/collections/seasons","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasons/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasons/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("team/collections/seasonteams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasonteams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasonteams/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("text!team/templates/season-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="season-info season-info-{{sport_id}}-{{complevel_id}}-{{season_id}}" style="display:none">\r\n    \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("team/views/season-item",["vendor","views","utils","text!team/templates/season-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=n.lib.Channel,i=o.extend({tagName:"li",className:"complevel",initialize:function(e){function o(){a("refresh-teampage").publish(n,i,s)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.collection.sport_id,i=this.model.collection.complevel_id,s=this.model.get("payload").season_id;a("teamseasons:select"+n+"-"+i+"-"+s).subscribe(o)},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}});return i}),define("team/views/season-list",["facade","views","utils","team/views/season-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"season-list",name:"Season List",tagName:"ul",_tagName:"li",_className:"season",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SeasonListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/complevel-item",["vendor","views","utils","text!team/templates/complevel-item.html","text!team/templates/seasonteam-select.html","team/collections/seasons","team/collections/seasonteams","team/views/season-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/season-list"),h=require("team/collections/seasons");return SeasonTeamList=require("team/collections/seasonteams"),o=a.extend({tagName:"li",className:"complevel",rendered:!1,events:{"change #select-season":"selectSeason"},initialize:function(e){function n(){if(t.rendered){t.selectSeason();return}t.rendered=!0,t.initList()}this.template=r,this.selectSeasonTemplate=s;var t=this;this.id=e.model.collection.id;var i=this.model.collection.sport_id;l("teamcomplevels:select"+i+"-"+this.model.get("payload").complevel_id).subscribe(n)},initList:function(){var e=this;this.seasons=new SeasonTeamList,this.seasons.id=this.id,this.seasons.sport_id=this.model.collection.sport_id,this.seasons.complevel_id=this.model.get("payload").complevel_id,this.seasons.fetch();var t=this.seasons.sport_id,n=this.seasons.complevel_id;u.when(this.seasons.request).done(function(){e.setupSeasonListView(t,n),l("teamseasons"+t+"-"+n+":fetch").publish(),e.select_season=e.$("#select-season"),e.selectSeason()})},setupSeasonListView:function(e,t){function s(){r.render(),n.$el.find(".seasons").html(r.el);var e={payload:[]},t=r.collection;if(t.length){for(i=0;i<t.length;i++)e.payload[i]=t.at(i).get("payload");var s=f.to_html(n.selectSeasonTemplate,e);n.$el.find(".seasons").prepend(s)}else n.$el.find(".seasons").html("")}var n=this,r=new c({collection:this.seasons});l("teamseasons"+e+"-"+t+":fetch").subscribe(s)},render:function(){var e=this.model.collection.sport_id,t=this.model.get("payload");t.sport_id=e,this.model.set("payload",t);var n=f.to_html(this.template,this.model.toJSON());return this.$el.html(n),this},selectSeason:function(){var e=this.select_season.val(),t=this.model.collection.sport_id,n=this.model.get("payload").complevel_id;this.$(".season-info").stop().slideUp(),this.$(".season-info-"+t+"-"+n+"-"+e).stop().slideDown(),l("teamseasons:select"+t+"-"+n+"-"+e).publish()}}),o}),define("team/views/complevel-list",["facade","views","utils","team/views/complevel-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return TeamComplevelListAbstract=f.extend(l.prototype),i=TeamComplevelListAbstract.extend({__super__:f.prototype,id:"complevel-list",name:"Complevel List",tagName:"ul",_tagName:"li",_className:"complevel",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ComplevelListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/sport-item",["vendor","views","utils","text!team/templates/sport-item.html","text!team/templates/complevel-select.html","team/collections/complevels","team/views/complevel-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/complevel-list"),h=require("team/collections/complevels");return o=a.extend({tagName:"li",className:"sport",rendered:!1,events:{"change #select-complevel":"selectComplevel"},initialize:function(e){function n(){if(t.rendered){t.selectComplevel();return}t.rendered=!0,t.initList()}this.template=r,this.selectComplevelTemplate=s;var t=this;this.id=e.model.collection.id,l("teamsports:select"+this.model.get("payload").sport_id).subscribe(n)},initList:function(){var e=this;this.complevels=new h,this.complevels.id=this.id,this.complevels.sport_id=this.model.get("payload").sport_id,this.complevels.fetch();var t=this.complevels.sport_id;u.when(this.complevels.request).done(function(){e.setupComplevelListView(t),l("teamcomplevels"+t+":fetch").publish(),e.select_complevel=e.$("#select-complevel"),e.selectComplevel()})},setupComplevelListView:function(e){function r(){n.render(),t.$el.find(".complevels").html(n.el);var e={payload:[]},r=n.collection;if(r.length){for(i=0;i<r.length;i++)e.payload[i]=r.at(i).get("payload");var s=f.to_html(t.selectComplevelTemplate,e);t.$el.find(".complevels").prepend(s)}else t.$el.find(".complevels").html("")}var t=this,n=new c({collection:this.complevels});l("teamcomplevels"+e+":fetch").subscribe(r)},render:function(){var e=f.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},selectComplevel:function(){var e=this.select_complevel.val(),t=this.model.get("payload").sport_id;this.$(".complevel-info").stop().slideUp(),this.$(".complevel-info-"+t+"-"+e).stop().slideDown(),l("teamcomplevels:select"+t+"-"+e).publish()}}),o}),define("team/views/sport-list",["facade","views","utils","team/views/sport-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!usercontrol/dropdown/template/layout.html",[],function(){return'<div class="dropdown-container">\r\n	<input type="hidden" class="hidden-input-dropdown-h" value="" />\r\n	<div class="drop-down-outer">\r\n		<div class="region-dark dropdown-header-box">\r\n			{{dropView.title}}\r\n		</div>\r\n		<div class="down-arrow-outer">\r\n			<a href="javascript: void(0);" class="down-arrow up-down-arrow-h">\r\n				<span class="icon-white icon-chevron-down"></span>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<ul class="common-dropdown">\r\n		{{#records}}\r\n			<li class="{{#dropView.defaultSelected}}{{dropView.defaultSelected}}{{/dropView.defaultSelected}}">\r\n				<a data-id="{{#dropView.getRecordId}}{{dropView.getRecordId}}{{/dropView.getRecordId}}" href="javascript: void(0);">{{#dropView.getRecordValue}}{{dropView.getRecordValue}}{{/dropView.getRecordValue}}</a>\r\n			</li>\r\n		{{/records}}\r\n	</ul>\r\n</div>\r\n'}),define("usercontrol/dropdown/view/dropdown",["require","text!usercontrol/dropdown/template/layout.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p,d;return p=h.View.extend({template:t,multiple:!1,selectedOptions:[],className:"dropdown-wrapper",events:{"click .up-down-arrow-h":"showDropdown","click li a":"selectOptions"},selectOptions:function(e){var t=l(e.target).data("id");this.multiple?this.setMultipleOptions(t,e):this.setSingleOption(t,e),this.showSelectedValue(),this.callback&&this.callback(this.selectedOptions)},showSelectedValue:function(){var e=this.$el.find(".common-dropdown li.selected").text()||this.title;this.$el.find(".dropdown-header-box").html(e)},setMultipleOptions:function(e,t){var n=this.checkifExists(e);n==-1?(l(t.target).parent().addClass("selected"),this.selectedOptions.push(e)):(l(t.target).parent().removeClass("selected"),this.selectedOptions.splice(n,1))},setSingleOption:function(e,t){var n=this.checkifExists(e);n==-1&&(this.selectedOptions=[],console.log(this.$el.find(".common-dropdown li")),this.$el.find(".common-dropdown li").removeClass("selected"),l(t.target).parent().addClass("selected"),this.selectedOptions.push(e),this.$el.find(".hidden-input-dropdown-h").val(e),this.hideDropdown())},checkifExists:function(e){var t=-1;for(var n in this.selectedOptions)if(this.selectedOptions[n]==e){t=n;break}return t},initialize:function(e){d=this,n=this,this.selectedOptions=[],n.setOptions(e),this.render(),this.$el.find(".hidden-input-dropdown-h").attr("id",this.elementId)},hideDropdown:function(e){if(!e||!this.$el.find(l(e.target)).parents(".dropdown-container").length)this.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),this.$el.find(".up-down-arrow-h span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),this.$el.find(".common-dropdown").slideUp()},showDropdown:function(e){e.preventDefault();var t=this;l(e.currentTarget).find("span").hasClass("icon-chevron-down")?(l(e.currentTarget).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up"),l(".dropdown-container").removeClass("increase-dropown-zindex"),t.$el.find(".dropdown-container").addClass("increase-dropown-zindex"),l("html").bind("click",function(e){t.hideDropdown(e)})):(t.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),l(e.currentTarget).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down")),l(e.currentTarget).parents(".dropdown-container").find(".common-dropdown").slideToggle()},getRecordId:function(){return this.payload[d.data.recordId]},defaultSelected:function(e){if(d.multiple){if(_.isArray(d.selectedValue))for(var t in d.selectedValue)if(d.selectedValue[t]==this.payload[d.data.recordId])return"selected"}else if(d.selectedValue&&d.selectedValue==this.payload[d.data.recordId])return"selected"},getRecordValue:function(){return this.payload[d.data.recordValue]},render:function(){this.data.dropView=this;if(!this.selectedValue){if(this.data.records.length)var e=this.data.records[0].payload[this.data.recordId];this.multiple?(this.selectedValue=[],this.selectedValue.push(e)):this.selectedValue=e}var t=this,n=f.to_html(t.template,this.data);return l(t.el).html(n),this.targetView.$el.find(this.destination).html(this.el),this.$el.find(".hidden-input-dropdown-h").val(this.selectedValue),this.selectedOptions.push(this.selectedValue),this.showSelectedValue(),l("#"+this.elementId).length?t.callback&&t.callback(this.selectedOptions):setTimeout(function(){if(!t.$el.find("li.selected").length){var e=t.$el.find(".common-dropdown li:first-child");e.addClass("selected"),t.$el.find("#"+t.elementId).val(e.find("a").data("id")),t.showSelectedValue()}t.callback&&t.callback(t.selectedOptions)},200),!0},setOptions:function(e){for(var t in e)this[t]=e[t]}}),p}),define("team/views/header",["require","text!team/templates/header.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","team/collections/complevels"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("team/models/basics"),a=o.SectionView,f=e("team/views/sport-list"),l=e("team/collections/sports"),c=e("usercontrol/dropdown/view/dropdown"),h=e("team/collections/seasonteams"),p=e("team/collections/complevels"),d=e("utils"),v=d.lib.Channel,m=e("vendor"),g=m.Mustache,y=s.$,b=s._;return r=a.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){this.controllerObject=e.controllerObject,a.prototype.initialize.call(this,e),b.bindAll(this)},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){var t=this;t.model.id!=e&&(t.model.id=e,t.model.fetch(),y.when(t.model.request).done(function(){t.render();var e=t.model.get("payload"),n=e.id,r=e.org_sport_link_obj.org.name;t.controllerObject.setupRosterView(n,r)}))},showAllTeamData:function(){routing.trigger("refresh-teampage",y("#sports-h").val(),y("#team-h").val(),this.season.id)},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=g.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),v("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},getName:function(){var e=this.model.get("payload").org_name;return this.model.get("payload").complevels_obj.complevel_name&&(e+=" | "+this.model.get("payload").complevels_obj.complevel_name),this.model.get("payload").org_sport_link_obj.sport.sport_name&&(e+=" | "+this.model.get("payload").org_sport_link_obj.sport.sport_name),this.model.get("payload").seasons_obj.season_name&&(e+=" | "+this.model.get("payload").seasons_obj.season_name),this.model.get("payload").year&&(e+=" | "+this.model.get("payload").year),e},childViews:{},render:function(e,t,n){document.title=this.getName(),a.prototype.render.call(this,e,t,n)}}),r}),define("text!media/templates/add-media.html",[],function(){return'{{#links}}<a href="{{link}}" title="{{label}}" id="{{id}}">{{label}}</a>{{/links}}\r\n'}),define("profile/models/addmedia",["models/base"],function(e){var t;return t=e.extend({defaults:{links:[{label:"",link:"javascript:void(0);",id:"addPhoto"},{label:"",link:"javascript:void(0);",id:"addVideo"}],userid:null}}),t}),define("team/views/add-media",["require","text!media/templates/add-media.html","profile/models/addmedia","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=r._;return n=s.extend({template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","click #addGame":"openAddGamePopup"},setOptions:function(e){if(!this.model)throw new Error("ProfileAddMediaView expects option with model property.");this.model.userid=e.userid},openAddGamePopup:function(){routing.trigger("add-game",this.model.userid)},openAddImagePopup:function(e){var t=$("#sports-h").val(),n=$("#team-h").val(),r="/api/team/addimage/"+n,r="/api/team/addimage/"+n,i={sports_id:t};routing.trigger("add-image",r,i)},openAddvideoPopup:function(e){var t="/api/user/addvideo/"+this.model.id;Channel("add-video").publish(t)}}),n}),define("text!sportorg/templates/competitorteam-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n    <img src="{{picture}}" alt="{{name}}"/><br/>\r\n    {{sport}}<br/>\r\n    {{complevel}}<br/>\r\n    {{season}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/competitorteam-item",["vendor","views","utils","text!sportorg/templates/competitorteam-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"team",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/competitorteam-list",["facade","views","utils","sportorg/views/competitorteam-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"team-list",name:"Team List",tagName:"ul",_tagName:"li",_className:"team",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CompetitorTeamListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!site/templates/comment-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid" data-id="bbbbbbbb">\r\n    <div class="user-photo">\r\n    	<a href="#profile/{{user.id}}" title="{{user.name}}">\r\n    		<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n    	</a>\r\n    </div>\r\n    \r\n    <div>\r\n	    <div class="bubble">  \r\n		<div class="pointer"></div>\r\n	        <div class="content">\r\n	        	\r\n	        	<span class="comment-date"><a href="#profile/{{user.id}}" title="{{user.name}}">{{user.name}}</a>  {{poster}} {{comment_date}}</span>\r\n	        	<p class="comment-text">{{comment}}</p>\r\n	        </div>\r\n	    </div>\r\n	</div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("site/views/comment-item",["vendor","views","utils","text!site/templates/comment-item.html"],function(e,t,n,r){var i,s=t.BaseView,o=e.Mustache;return i=s.extend({tagName:"li",className:"comment",initialize:function(e){e.template?this.template=e.template:this.template=r},render:function(){var e=o.to_html(this.template,this.model.toJSON());this.$el.html(e),console.log("--------render------------");var t=this.model.get("payload");console.log("profile payload = ",t);var n=this;if(t)try{var r=t.user.user_picture_obj.types.small_thumb.url;n.$(".user-photo img").attr("src",r)}catch(i){console.log(i)}return this}}),i}),define("text!site/templates/comment-form.html",[],function(){return'<a href="javascript: void(0);" class="add-comment-h">Comment</a>\r\n{{#payload}}\r\n\r\n<form class="add-comment-form-h hide" method="post" action="#">\r\n<div class="row-fluid">\r\n    <div class="field-message submit-result"></div>\r\n    <textarea style="width:85%;-webkit-border-radius: 15px; border-radius: 15px; height: 65px;" id="new-comment" placeholder="{{comment_placeholder}}" ></textarea>\r\n    <br/><input type="button" id="comment-submit" value="Submit"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("site/views/comment-form",["require","text!site/templates/comment-form.html","facade","views","site/models/comment"],function(e){var t,n=e("text!site/templates/comment-form.html"),r=e("facade"),i=e("views"),s=e("site/models/comment"),o=i.BaseView;return t=o.extend({tagName:"li",template:n,events:{"click #comment-submit":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");!this.model},render:function(){console.log("RENDER CALLED!!!!"),o.prototype.render.call(this),this.input=this.$("#new-comment");var e=this.model.get("payload");console.log("return payloady",e);var t=this;if(e)var n=e.user_picture,r=e.email;return this},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();t!=""&&this.input.val("")}}),t}),define("text!site/templates/comment-list.html",[],function(){return'<div class="comment-outer-h">\r\n<ul id="comment-list"></ul>\r\n</div>\r\n<div class="clear">\r\n	<a href="javascript: void(0);" class="see-more-h">See More</a>\r\n</div>'}),define("site/views/comment-list",["facade","views","utils","site/views/comment-item","site/views/comment-form","text!site/templates/comment-list.html"],function(e,t,n,r,i,s){var o,u,a=n.lib.Channel,f=require("vendor"),l=t.CollectionView,c=t.SectionView,h=f.Mustache;return u=l.extend(c.prototype),o=u.extend({__super__:l.prototype,listView:"#comment-list",_tagName:"li",_className:"comment",page:1,page_limit:5,prepend:!1,_view:r,template:s,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=h.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate();var t=this;this.collection=e.collection,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.seeMore(),l.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");_.bindAll(this),this.addSubscribers(),this.setupFormView(),console.log(this.collection.toJSON())},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupFormView:function(){function r(n){t.model=n,t.render(),$(e.listView).prepend(t.el)}var e=this,t=new i({collection:this.collection}),n=this.addChildView(t);console.log("Form:",t),this.childViews.form=t,this.callbacks.add(function(){n()}),a("commentform:fetch").subscribe(r)}}),o}),define("team/views/commentof-list",["facade","utils","site/views/comment-list"],function(e,t,n){var r;return r=n.extend({name:"team Commentof List",setupFormView:function(){}}),r}),define("profile/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("team/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){console.error(e),this.$el.unbind(),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:"#comment_div",template:t,name:"Comment Form",events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},submitHandler:function(e){e.preventDefault();if(!this.checkForUser()){$(".signup-email").trigger("click");return}this.createOnEnter(e)},showCommentBox:function(){var e=this.$el.find(".add-comment-form-h");console.log(e),e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")},refreshComments:function(e){this.$("#new-comment").val("")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.trigger("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("team/views/commenton-list",["facade","utils","site/views/comment-list","team/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),e.name&&(this.name=e.name),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){s(e)})}}),s}),define("text!sportorg/templates/roster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n    {{name}} \'{{grad_year}}<br/>\r\n    {{sport_name}}<br/>\r\n    {{position}}<br/>\r\n    {{team_name}}<br/>\r\n    {{num_votes}} Votes<br/>\r\n    {{num_followers}} Followers<br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/roster-item",["vendor","views","utils","text!sportorg/templates/roster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"roster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/roster-list",["facade","views","utils","sportorg/views/roster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"roster-list",name:"Roster List",tagName:"ul",_tagName:"li",_className:"roster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("RosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!media/templates/video-item.html",[],function(){return'<input type="hidden" class="id" value="{{id}}"/>\r\n{{#payload}}    \r\n    <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n<div class="row-fluid" style="display:none;">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        {{video_title}}<br/>\r\n        Teams: \r\n        {{#teams}}\r\n            {{.}}&nbsp;\r\n        {{/teams}}\r\n        <br/>\r\n        Games: \r\n        {{#games}}\r\n            {{.}}&nbsp; \r\n        {{/games}}\r\n        <br/>\r\n        Posted by {{user_name}}, {{post_date}}<br/>\r\n        {{num_votes}} Votes, {{num_views}} Views, {{num_comments}} Comments<br/>\r\n        <p>{{video_desc}}</p>\r\n        {{#tags_count}}\r\n            {{tags_count}} Tagged<br/>\r\n            {{#tags}}\r\n                <img src="{{base_url}}{{.}}"/>\r\n            {{/tags}}\r\n        {{/tags_count}}\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-item",["vendor","views","utils","text!media/templates/video-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"video",events:{click:"changeVideo"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeVideo:function(){Channel("changevideo"+this.model.collection.id).publish(this.model)}}),i}),define("text!media/templates/video-player.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{video_src}}" alt="{{video_title}}"/></div>\r\n    <h3>{{video_title}}</h3>\r\n    {{#games}} \r\n        {{team1_name}} vs {{team2_name}}\r\n    {{/games}}    \r\n    Votes: {{num_votes}}, Views: {{num_views}}, Comments: {{num_comments}}<br/>\r\n    <br>\r\n\r\n		{{#video_type}}\r\n				{{video_type_name}}\r\n				{{meta_details.url}}\r\n				<br>\r\n		{{/video_type}}\r\n    <div class="social-links">\r\n    {{#social_links}}\r\n        <a class="{{class}}" href="{{link}}" title="{{title}}">{{title}}</a>\r\n    {{/social_links}}\r\n    </div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-player",["require","text!media/templates/video-player.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"video-player",template:t,setOptions:function(e){if(!this.model)throw new Error("VideoPlayerView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-video.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Video Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addvideo" value="Add Video"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-video",["require","text!media/templates/add-video.html","facade","views","media/models/video"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/video"),o=i.BaseView,u=r._;return n=o.extend({tagName:"li",template:t,events:{"click #addvideo":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddVideoView expected options.collection.");this.model||(this.model=new s({id:this.collection.id}),this.model.fetch())},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){alert("AddVideoView"),e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.video_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("media/views/video-list",["facade","views","utils","media/views/video-item","media/views/video-player","media/views/add-video"],function(e,t,n,r,i,s){var o,u,a=e.$,f=e._,l=n.lib.Channel,c=t.CollectionView,h=t.SectionView;return u=c.extend(h.prototype),o=u.extend({__super__:c.prototype,id:"video-list",name:"Video List",tagName:"ul",_tagName:"li",_className:"video",_view:r,initialize:function(e){c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("VideoListView expected options.collection.");f.bindAll(this),this.addSubscribers(),this.setupPlayerView(),this.setupAddView()},childViews:{},setupAddView:function(){function r(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addvideo:fetch").subscribe(r)},setupPlayerView:function(){function r(e){t.model=e,t.render()}if(this.collection.size()==0)return;var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.player=t,this.callbacks.add(function(){n(),t.render(),e.$el.prepend(t.el)}),l("changevideo"+this.collection.id).subscribe(r)}}),o}),define("team/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addvideo/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addvideo?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddvideo:fetch").publish(e)}}),r}),define("team/views/add-video",["require","team/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("TeamAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/video-list",["facade","utils","media/views/video-list","team/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("teamaddvideo:fetch").subscribe(i)}}),i}),define("text!media/templates/image-item.html",[],function(){return'<a href="{{_link}}" data-index="{{index}}" class="image-outer-h {{^_has_link}}open-photo-player-h{{/_has_link}}">\r\n	<div class="image-item-container">\r\n	<img class="list-thumbnail" src="{{_thumbnail}}" alt=""/>\r\n		<div class="action-section">\r\n			{{#show_edit}}\r\n				<div class="action-block left-block edit edit-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>E</span></div>\r\n				<div class="action-block right-block delete delete-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>D</span></div>\r\n			{{/show_edit}}\r\n			{{^show_edit}}\r\n				<div class="action-block left-block vote vote-h {{#_has_voted}} link-disabled {{/_has_voted}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}">\r\n					<span>V</span>\r\n				</div>\r\n				{{#_can_follow}}\r\n				<div class="action-block right-block follow follow-h {{#_is_following}} link-disabled {{/_is_following}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>F</span></div>\r\n				{{/_can_follow}}\r\n			{{/show_edit}}\r\n		</div>\r\n		<div class="detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n			<h6>{{_label}}</h6>\r\n			<span>{{& _sublabel}}</span>\r\n		</div>\r\n	</div>\r\n</a>'}),define("media/views/image-item",["vendor","views","utils","text!media/templates/image-item.html","votes/models/vote","votes/models/follow","utils/storage"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=require("votes/models/vote"),f=require("utils/storage"),l=require("votes/models/follow");return i=o.extend({tagName:"li",className:"image",events:{"click .vote-h":"vote","click .follow-h":"follow","click .edit-h":"edit","click .delete-h":"delete"},initialize:function(e){this.template=r},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},render:function(){function b(e){console.log(s(this),e)}var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id,_has_voted:t.has_voted,_is_following:t.is_following,_can_follow:t.can_follow},r=!1,i=null,o=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},a=!1;switch(t.enttypes_id){case"23":typeof t.standard_thumb=="object"?(i=t.standard_thumb,n._thumbnail=i.url):n._thumbnail=t.thumbs,a=!0,n._label=t.media.name,n._link="javascript: void(0);",n._has_link=!1,t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"&&(typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url)),n._label=_.isUndefined(t.media_obj.users_obj.label)?"":t.media_obj.users_obj.label,typeof t.media_obj.sports_obj=="object"&&(n._sublabel=o(t.media_obj.sports_obj.sport_name)),n._link="javascript: void(0);",n._has_link=!1,t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.user_picture_obj=="object"&&typeof t.user_picture_obj.types=="object"&&(typeof t.user_picture_obj.types.standard_thumb=="object"?(i=t.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.large_thumb=="object"?(i=t.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.original=="object"&&(i=t.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.label,n._sublabel="Votes: "+t.num_votes+", Followers: "+t.num_followers,n._link="/#profile/"+t.id,n._has_link=!0,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.game_picture!==null?t.game_picture.types.standard_thumb:{height:440,width:440,url:"http://cdn.athletez.com/resources/icons/game/square_game.png"},n._thumbnail=i.url,n._label=t.game_day,n._link="/#game/"+t.id,n._has_link=!0;var f="",l=t.teams;if(l!=null)var c=l.length;for(var h=0;h<c;h++)f+="<span>",f+=o(t.teams[h].team_name),f+="</span>",h+1<t.teams.length&&(f+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._sublabel=f}n.show_edit=r==1?!0:undefined;var p=u.to_html(this.template,n);this.$el.html(p);var d="120px",v="92px";this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+v}),s(this).find(".detail-view.game").css({bottom:"-"+d})});if(i!="undefined"&&i!=null){var m=i.width/220,g=i.height/220;i.width=parseInt(i.width),i.height=parseInt(i.height);var y=i.width>i.height?-(i.width/g-220)/2:-(i.height/m-220)/2;y>0&&(y=0),i.width>i.height?this.$el.find("img.list-thumbnail").css({"max-width":i.width/g,left:y}):this.$el.find("img.list-thumbnail").css({"max-height":i.height/m,top:y})}return a&&this.$el.append('<div class="circle open-photo-player-h"><div class="play"></div></div>'),this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this.$el.find(".circle").mouseover(function(){s(this).parent().find(".detail-view").css({bottom:"0px"}),s(this).parent().find(".action-block").css({opacity:90})}),this.$el.find(".vote-h").click(function(t){e.vote(t)}),this.$el.find(".follow-h").click(function(t){e.follow(t)}),this.$el.find(".edit-h").click(function(t){e.edit(t)}),this.$el.find(".delete-h").click(function(t){e["delete"](t)}),this},vote:function(e){e.preventDefault(),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new a;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save(),s.when(t.request).done(function(){s(e.currentTarget).addClass("link-disabled")})},follow:function(e){e.preventDefault(),console.log(e.target),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new l;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.save(),s.when(t.request).done(function(){typeof t.get("payload").follower=="object"&&typeof t.get("payload").subject=="object"&&t.get("payload").id>0?s(e.currentTarget).addClass("link-disabled"):console.log("FAIL")})},edit:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=this.model.get("payload");switch(n.enttypes_id){case"23":break;case"21":break;case"1":window.location.hash="profile/"+n.id;break;case"8":window.location.hash="game/"+n.id}console.log(this.model)},"delete":function(e){e.stopPropagation(),e.preventDefault(),console.log("delete")}}),i}),define("text!media/templates/image-board.html",[],function(){return'<!--{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{image_path}}" alt="{{image_title}}"/></div>\r\n    {{#image_title}}<h3>{{image_title}}</h3>{{/image_title}}\r\n    {{#num_votes}}Votes: {{num_votes}} <br/>{{/num_votes}}\r\n{{/payload}}-->'}),define("media/views/image-board",["require","text!media/templates/image-board.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-image.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Image Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addimage" value="Add Image"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-image",["require","text!media/templates/add-image.html","facade","views","media/models/image"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/image"),o=i.BaseView;return n=o.extend({tagName:"li",template:t,events:{"click #addimage":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");!this.model},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.image_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("text!media/templates/image-list.html",[],function(){return'<ul class="image-list">\r\n</ul>\r\n<!--{{#target}}\r\n<div class="image-drop-area-outer">\r\n	<div class="image-drop-area" id="image-place-holder">\r\n		<div class="drop-text">DROP PHOTOS HERE</div>\r\n		<div>OR CLICK TO UPLOAD</div>\r\n		\r\n	</div>\r\n</div>\r\n{{/target}}-->\r\n<div class="clear"><a href="javascript: void(0);" class="see-more-h">More</a></div>\r\n'}),define("media/views/image-list",["facade","views","utils","media/views/image-item","media/views/image-board","media/views/add-image","text!media/templates/image-list.html"],function(e,t,n,r,i,s,o){var u,a,f=e.$,l=e._,c=require("vendor"),h=n.lib.Channel,p=t.CollectionView,d=t.SectionView,v=c.Mustache;return a=p.extend(d.prototype),u=a.extend({__super__:p.prototype,template:o,_tagName:"li",_className:"image",page:0,page_limit:8,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore","click .open-photo-player-h":"initPhotoPlayer","dragover #image-place-holder":"drag","drop #image-place-holder":"drop"},renderTemplate:function(){var e=v.to_html(this.template,{target:this.target_id});return this.$el.html(e),this},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault();var n=e.originalEvent.dataTransfer.files;this.files_drag=e.originalEvent.dataTransfer.files;var r=[],i=[],s=0;for(var o=0,u;u=n[o];o++){if(!u.type.match("image.*"))continue;var a=new FileReader;a.onload=function(e){return function(r){var o="preview_"+s;s++,i.push({preview_id:o,drag_info:t.files_drag,width:"150",height:"150",filesrc:r.target.result,title:escape(e.name)}),s==n.length&&(data={data:i},t.openImageUploader(data))}}(u),a.readAsDataURL(u)}},openImageUploader:function(e){console.error(this.collection);var t=this.sport_id,n=this.target_url+this.target_id,r={sports_id:t},i=e;routing.trigger("add-image",n,r,i)},initialize:function(e){e.name?this.name=e.name:this.name="image list",e.collecton&&(this.collection=e.collection),this.target_id=e.target_id,this.target_url=e.target_url,this.sport_id=e.sport_id,this.renderTemplate();var t=this;t.allData=this.collection.toArray(),t.seeMore(),p.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");l.bindAll(this),this.addSubscribers(),this.setupBoardView(),this.setupAddView()},initPhotoPlayer:function(e){var t=f(e.target).parents("li").index();t<0&&(t=0),routing.trigger("photo-player-init",t,this.allData,this.collection.id,!0)},seeMore:function(e){var t=this.allData.length,n=this.page*this.page_limit,r=n+this.page_limit;t<=r&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(n,r)):this.collection.reset(this.allData.slice(n,r)),this.page++,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupAddView:function(){function r(e){t.model=e,t.render(),f(this.listView).append(t.el)}var e,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),h("addimage:fetch").subscribe(r)},filterWithImageType:function(e){var t=this.collection;return f.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t},setupBoardView:function(){function s(e){n.model=e,n.render()}if(this.collection.size()==0)return;var e=this.filterWithImageType(this.imagetype),t,n=new i({collection:e,model:e.at(0)}),r=this.addChildView(n);this.childViews.board=n,this.callbacks.add(function(){r(),n.render(),f(this.listView).prepend(n.el)}),h("changeimage"+this.collection.id).subscribe(s)}}),u}),define("team/models/addimage",["facade","media/models/image","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addimage/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addimage?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddimage:fetch").publish(e)}}),r}),define("team/views/add-image",["require","team/models/addimage","media/views/add-image"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/image-list",["facade","utils","media/views/image-list","team/views/add-image"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("teamaddimage:fetch").subscribe(i)}}),i}),define("team/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?id1="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamcommentform:fetch").publish(e)}}),r}),define("team/views/comment-form",["require","team/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/comment-list",["facade","utils","site/views/comment-list","team/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),s("teamcommentform:fetch").subscribe(i)}}),i}),define("text!team/templates/menu.html",[],function(){return'<div id="sports-info">\r\n	<div class="sports-h drop-down-main-outer"></div>\r\n	<div class="season-h drop-down-main-outer"></div>\r\n	<div class="team-h drop-down-main-outer"></div>\r\n</div>\r\n'}),define("team/views/menu",["require","text!team/templates/menu.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","team/collections/complevels"],function(e,t,n){var r=e("facade"),s=e("views"),o=e("team/models/basics"),u=s.SectionView,a=e("team/views/sport-list"),f=e("team/collections/sports"),l=e("usercontrol/dropdown/view/dropdown"),c=e("team/collections/seasonteams"),h=e("team/collections/complevels"),p=e("utils"),d=p.lib.Channel,v=e("vendor"),m=v.Mustache,g=r.$,y=r._;return u.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){this.headerView=e.headerView,u.prototype.initialize.call(this,e),this.initSportList()},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){this.model.id!=e&&this.headerView.updateHeaderData(e)},getTeam:function(){var e=this;this.season=new c,this.season.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.season.sport_id=g("#sports-h").val(),this.season.complevel_id=g("#season-h").val(),this.season.fetch(),g.when(this.season.request).done(function(){var t={};t.records=e.season.toJSON(),t.recordId="id",t.recordValue="season_label";var n=new l({data:t,title:"Team",elementId:"team-h",destination:".team-h",selectedValue:e.model.id,targetView:e,callback:function(t){e.updateHeaderData(g("#team-h").val()),e.showAllTeamData()}})})},showAllTeamData:function(){routing.trigger("refresh-teampage",g("#sports-h").val(),g("#team-h").val(),this.season.id)},getComplevels:function(){var e=this;this.complevel=new h,this.complevel.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.complevel.sport_id=g("#sports-h").val(),this.complevel.fetch(),g.when(this.complevel.request).done(function(){var t={};t.records=e.complevel.toJSON(),t.recordId="complevel_id",t.recordValue="complevel_name";var n=new l({data:t,title:"Season",elementId:"season-h",destination:".season-h",selectedValue:e.model.get("payload").complevels_obj.complevel_profiles_id,targetView:e,callback:function(t){console.error("comp level call"),e.getTeam()}})})},initSportList:function(){console.error(this.model.toJSON());var e=this;this.sports=new f,this.sports.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.sports.fetch(),g.when(this.sports.request).done(function(){var t={};t.records=e.sports.toJSON(),t.recordId="sport_id",t.recordValue="sport_name";var n=new l({data:t,elementId:"sports-h",title:"Sport",selectedValue:e.model.get("payload").org_sport_link_obj.sports_id,destination:".sports-h",targetView:e,callback:function(t){e.getComplevels()}})})},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=m.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new a({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),d("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){u.prototype.render.call(this,e,t,n)}})}),define("text!schedules/templates/schedule-item.html",[],function(){return'{{#payload}}\r\n\r\n\r\n<div class="select-team">\r\n	\r\n			{{#teams}}\r\n			\r\n		<div class="org-name">\r\n			<span class="team-label">{{org_name}} | {{complevel}} | {{season}} {{year}}</span>\r\n			{{^schedules}}\r\n				<span>&nbsp;(No games on the docket)</span>\r\n			{{/schedules}}\r\n			<a href="javascript: void(0);" data-team-id="{{team_id}}" data-sport-id="0" title="add game" class="add-game-h">Add Game</a>\r\n		</div>\r\n			<div class="game-box-outer">\r\n		<ul>\r\n				{{#schedules}}\r\n				<li>\r\n				<a href="#game/{{id}}" class="background-blue team-info-h">\r\n					\r\n						<div class="game-info hide">\r\n							{{#teams}}\r\n								{{gameDay}} | VS. {{team_name}}\r\n							{{/teams}}\r\n						</div>\r\n				</a>\r\n				</li>\r\n				{{/schedules}}\r\n				\r\n			\r\n			</ul>\r\n	</div>\r\n			{{/teams}}\r\n\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n	<!--a href="/#game/{{id}}" class="background-blue team-info-h" tooltip="test">\r\n	<div class="game-info hide">\r\n							{{#teams}}\r\n								{{gameDay}} | VS. {{team_name}}\r\n							{{/teams}}\r\n						</div> </a-->\r\n\r\n{{/payload}}'}),define("text!schedules/templates/schedule-single-item.html",[],function(){return'\r\n	<a href="/#game/{{id}}" class="background-blue team-info-h" tooltip="test">\r\n	<div class="game-info hide">\r\n		{{summary}}\r\n	</div> </a>\r\n'}),define("schedules/views/schedule-item",["vendor","views","utils","text!schedules/templates/schedule-item.html","text!schedules/templates/schedule-single-item.html"],function(e,t,n,r,i){var s=e.$,o=t.BaseView,u=e.Mustache;return o.extend({tagName:"li",className:"org",events:{"change #select-team":"selectTeam"},initialize:function(e){e.teamView&&(this.teamView=e.teamView)},render:function(){if(this.teamView){this.mpay=this.model.get("payload"),this.template=i;var e=this.createOpponentString(),t=u.to_html(this.template,{id:this.mpay.id,summary:e})}else{this.template=r;var t=u.to_html(this.template,this.model.toJSON())}return this.$el.html(t),this.select_team=this.$("#select-team"),this.selectTeam(),this},createOpponentString:function(){var e=this.mpay.game_day+" | ";return console.log("Game info",this.mpay),s.each(this.mpay.teams,function(){this.id>0&&this.id!=this.teams_id&&(e+=" VS. "+this.org_name)}),e},selectTeam:function(e){var t=this.select_team.val();this.$(".team-info").stop().slideUp(),this.$(".team-info-"+t).stop().slideDown()}})}),define("text!schedules/templates/schedule-list.html",[],function(){return'{{#data}}\r\n<a href="javascript: void(0);" title="add game" class="add-game-h">Click here to Add Game.</a>\r\n<div class="select-team">\r\n	<div class="game-box-outer">\r\n		<ul class="schedule-list-h">\r\n			\r\n		</ul>\r\n	</div>\r\n</div>\r\n</div>\r\n{{/data}}\r\n{{^data}}\r\n<div class="info">	\r\n	No games on the docket.  <a href="javascript: void(0);" title="add game" class="add-game-h">Click here to Add Game.</a>\r\n</div>\r\n{{/data}}\r\n'}),define("schedules/views/schedule-list",["vendor","facade","views","utils","schedules/views/schedule-item","utils/storage","text!schedules/templates/schedule-list.html"],function(e,t,n,r,i,s,o){var u,a,f=t.$,l=t._,c=r.lib.Channel,h=n.CollectionView,p=e.Mustache,d=n.SectionView;return a=h.extend(d.prototype),u=a.extend({__super__:h.prototype,id:"schedule-list",name:"schedule List",tagName:"ul",_tagName:"li",_className:"org",_view:i,events:{"click .add-game-h":"addGame","mouseover .team-info-h":"showinfo","mouseout .team-info-h":"showinfo"},showinfo:function(e){e.preventDefault(),f(e.target).parents(".game-info").length||(f(e.target).find(".game-info").hasClass("hide")?f(e.target).find(".game-info").removeClass("hide"):f(".game-info").addClass("hide"))},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},addGame:function(e){if(!this.checkForUser()){f(".signup-email").trigger("click");return}!l.isUndefined(this.teamRecords)&&this.teamRecords?routing.trigger("add-game",0,f("#team-h").val(),f("#sports-h").val()):routing.trigger("add-game",0,f(e.currentTarget).data("team-id"),f(e.currentTarget).data("sport-id"))},initialize:function(e){this.teamRecords=e.teamRecords;if(!l.isUndefined(e.teamRecords)&&e.teamRecords){var t=e.collection.toJSON();this.renderTemplate(),this.listView=".schedule-list-h",this.singleView=!0}h.prototype.initialize.call(this,e);if(!this.collection)throw new Error("Schedulr expected options.collection.");l.bindAll(this),this.addSubscribers()},renderTemplate:function(){var e=p.to_html(o,{data:this.collection.length});return console.error(e),this.$el.html(e),this}}),u}),define("text!roster/templates/roster.html",[],function(){return'<div class="green-left-heading heading-h"></div>\r\n<div  class="clearfix clear roster-images-h"></div>'}),define("roster/models/roster",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({}),n}),define("sportorg/models/teamroster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{team_id:0,team_name:null,rosters:[{name:null,user_picture:null,grad_year:0,sport_name:null,position:null}]},desc:"Team Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/teamrosters",["facade","collections","sportorg/models/teamroster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(!u.isUndefined(r)&&r!=null&&r){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}e.deferred.resolve(t)}}),s}),define("roster/collections/roster",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("roster/views/image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",tagName:"ul",setupAddView:function(){}}),r}),define("roster/views/roster",["require","text!roster/templates/roster.html","views","vendor","facade","utils","jqueryui","controller","roster/models/roster","roster/collections/roster","roster/views/image-list"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("roster/models/roster"),d=e("roster/views/image-list"),v=e("roster/collections/roster");return n=o.extend({template:t,events:{},initialize:function(e){var t=this;o.prototype.initialize.call(this,e),t.team_id=e.team_id,t.team_name=e.team_name,t.viewName=e.viewName||"Image List"+Math.random(),a.bindAll(this),t.team_id&&(t.collection1=new v,t.collection1.id=t.team_id,t.collection1.fetch(),u.when(t.collection1.request).done(function(){t.setupTeamRosterListView()}))},setupTeamRosterListView:function(){var e;e=new d({collection:this.collection1,name:this.viewName,model:new p}),this.$el.find(".roster-images-h").html(e.$el)},render:function(e,t,n){o.prototype.render.call(this,e,t,n),this.$el.find(".heading-h").html(this.team_name)}}),n}),define("profile/views/fans-image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",setupAddView:function(){}}),r}),define("team",["require","text!team/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","team/models/basics","team/models/addmedia","team/collections/upcoming_schedules","team/collections/recent_schedules","team/collections/competitor_teams","team/collections/rosters","team/collections/videos","team/collections/images","team/collections/comments","profile/collections/commentsof","team/collections/commentson","team/collections/orgs","team/collections/fans","team/views/header","team/views/add-media","sportorg/views/competitorteam-list","team/views/commentof-list","team/views/commenton-list","sportorg/views/roster-list","team/views/video-list","team/views/image-list","team/views/comment-list","team/views/menu","media/models/image","schedules/views/schedule-list","roster/views/roster","profile/views/fans-image-list"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("team/models/basics"),l=e("team/models/addmedia"),c=e("team/collections/upcoming_schedules"),h=e("team/collections/recent_schedules"),p=e("team/collections/competitor_teams"),d=e("team/collections/orgs"),v=e("team/collections/videos"),m=e("team/collections/images"),g=e("team/collections/fans"),y=e("team/collections/comments"),b=e("profile/collections/commentsof"),w=e("team/collections/commentson"),E=e("team/views/header"),S=e("team/views/add-media"),x=e("schedules/views/schedule-list"),T=e("sportorg/views/competitorteam-list"),N=e("team/views/video-list"),C=e("team/views/image-list"),k=e("sportorg/views/teamroster-list"),L=e("team/views/comment-list"),A=e("team/views/commentof-list"),O=e("team/views/commenton-list"),M=e("profile/views/fans-image-list"),_=e("team/views/menu"),D=e("roster/views/roster"),P=e("media/models/image"),H=u.LayoutView,B=i.$,j=i._,F=a.debug,I=a.lib.Channel,q=["/pages/team/team.css"];return r=s.extend({initialize:function(e){return I("load:css").publish(q),j.bindAll(this),this.scheme=[],this.handleOptions(e),this.init(),this},handleOptions:function(e){this.id=e.teamId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds()},createData:function(){function t(t,n,r){e.refreshPage(),e.games=new d,e.games.id=n,e.games.sport_id=t,e.games.fetch(),e.images=new m,e.images.team_id=n,e.images.sport_id=t,e.images.fetch(),e.fans=new g,e.fans.id=n,e.fans.sport_id=t,e.fans.fetch();var i=e.basics.get("payload").enttypes_id;e.commentson=new w,e.commentson.subject_entity_type=i,e.commentson.savePath="/team/addcomment/"+n,e.commentson.id=n,e.commentson.fetch(),e.handleDeferredsDynamic()}this.basics=new f({id:this.id}),this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id;var e=this;routing.on("refresh-teampage",function(e,n,r){t(e,n,r)})},handleDeferreds:function(){var e=this;B.when(this.basics.request).done(function(){e.setupHeaderView(),e.setupRosterView(),e.setupAddMediaView()})},setupCommentOfListView:function(){var e;e=new A({collection:this.commentsof,destination:".commentsoff-outer-box-h",name:"team comments off view"})},deleteOldView:function(e){var t=this.scheme.length;for(var n=0;n<t;n++)this.scheme[n].name==e&&this.scheme[n].remove()},setupRosterView:function(e,t){if(!e&&!t)var n=this.basics.get("payload"),e=n.id,t=n.org_sport_link_obj.org.name;this.oldRosterViewName&&this.deleteOldView(this.oldRosterViewName),this.oldRosterViewName="roster images"+Math.random();var r,s=i.Backbone.Collection.extend({});r=new D({model:new s,team_id:e,team_name:t,name:this.oldRosterViewName,destination:"#roster-wrap"}),this.scheme.push(r),this.layout.render()},setupCommentOnListView:function(){this.commentOnListView=new O({collection:this.commentson,destination:".commentson-outer-box-h",name:"team comments on view "}),this.scheme.push(this.commentOnListView),this.layout.render()},refreshPage:function(){var e;this.commentOnListView&&(this.commentOnListView.unbind().remove(),B(this.commentOnListView.destination).unbind().html(""),e=B.inArray(this.commentOnListView,this.scheme),~e&&this.scheme.splice(e,1)),this.gamesView&&(B(this.gamesView.destination).html(""),e=B.inArray(this.gamesView,this.scheme),~e&&this.scheme.splice(e,1)),this.fansListView&&(B(this.fansListView.destination).html(""),e=B.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1)),this.imageListView&&(B(this.imageListView.destination).html(""),e=B.inArray(this.imageListView,this.scheme),~e&&this.scheme.splice(e,1))},handleDeferredsDynamic:function(){var e=this;B.when(e.commentson.request).done(function(){e.setupCommentOnListView()}),B.when(e.games.request).done(function(){e.setupGameView()}),B.when(e.fans.request).done(function(t){e.setupFansListView()}),B.when(this.images.request).done(function(){e.setupImages()})},setupFansListView:function(){this.fansListView=new M({collection:this.fans,destination:"#fans-div",name:"fansView"}),this.scheme.push(this.fansListView),this.layout.render()},setupHeaderView:function(){var e,t=this;e=new E({model:this.basics,name:"Header",controllerObject:t,destination:"#main-header"});var n=new _({model:this.basics,name:"Menu View",headerView:e,controllerObject:t,destination:"#menu-container"});this.scheme.push(n),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(){var e;console.error("add media model"),console.error(this.addmedia.toJSON()),e=new S({model:this.addmedia,team_id:this.basics.id,name:"Add_Media",destination:"#add-media"}),this.scheme.push(e),this.layout.render()},setupUpcomingSchedules:function(){var e;e=TeamScheduleListView.extend({name:"Upcoming_Schedule_List"}),this.upcomingScheduleListView=new e({collection:this.upcoming_schedules,destination:"#upcoming-schedule",name:"upcoming_schedule"}),this.scheme.push(this.upcomingScheduleListView),this.layout.render()},setupRecentSchedules:function(){var e;e=TeamScheduleListView.extend({name:"Recent_Schedule_List"}),this.recentScheduleListView=new e({collection:this.recent_schedules,destination:"#recent-schedule",name:"recent_schedule"}),this.scheme.push(this.recentScheduleListView),this.layout.render()},setupGameView:function(){var e=x.extend({tagName:"div"});this.gamesView=new e({teams_id:this.id,collection:this.games,destination:"#games_div",teamRecords:!0,name:"games view"}),this.scheme.push(this.gamesView),this.layout.render()},setupCompetitorTeams:function(){this.competitorTeamListView=new T({collection:this.competitor_teams,destination:"#competitor-teams",name:"competitor_teams"}),this.scheme.push(this.competitorTeamListView),this.layout.render()},setupRosters:function(){this.rosterListView=new k({collection:this.rosters,destination:"#roster-wrap",name:"roster_wrap"}),this.scheme.push(this.rosterListView),this.layout.render()},setupVideos:function(){this.videoListView=new N({collection:this.videos,destination:"#video-wrap",name:"video_wrap"}),this.scheme.push(this.videoListView),this.layout.render()},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupImages:function(e){var t=this;routing.off("image-upload-success"),routing.on("image-upload-success",function(e){t.updateImages(e)}),this.imageListView=new C({collection:this.images,destination:"#image-wrap",target_id:this.id,target_url:"/api/team/addimage/",sport_id:B("#sports-h").val(),name:"image_wrap "}),this.scheme.push(this.imageListView),this.layout.render()},updateImages:function(e){var t=new P;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t)},setupComments:function(){this.commentListView=new L({collection:this.comments,destination:"#comment-wrap",name:"comment_wrap"}),this.scheme.push(this.commentListView),this.layout.render()},setupLayout:function(){var e;return e=new H({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r});