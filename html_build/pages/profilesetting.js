define(["require","text!profilesetting/templates/layout.html","facade","controller","models","views","utils","profilesetting/models/basic_info","profilesetting/views/basic_info","profilesetting/views/org","profilesetting/views/club","profilesetting/models/high_school","profilesetting/views/individuals"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("profilesetting/models/basic_info"),d=e("profilesetting/views/basic_info"),v=e("profilesetting/views/org"),m=e("profilesetting/views/club"),g=e("profilesetting/views/individuals"),y=e("profilesetting/models/high_school"),b=e("profilesetting/collections/individualsports");return n=i.extend({cssArr:[base_url+"pages/profilesetting/profilesettings.css"],initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),this.scheme=[],e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;return this.layout?this.layout:(e=new h({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout)},setupView:function(){var e=this;this.basicInfoModel=new p,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),a.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.addHighSchool(),e.SetUpClubView(),e.setUpIndividualView()})},setUpBasicView:function(){this.basicView=new d({id:self.id})},addHighSchool:function(){var e=this,t=new y;t.set("type","School"),this.schoolView=new v({model:t,name:"settings-high-school",destination:"#content-school-prof-setting",user_id:e.id,type:"school",gender:e.gender}),this.scheme.push(this.schoolView),this.layout.render()},setUpIndividualView:function(){var e=this;this.individualSportsView=new g({model:new b({user_id:e.id}),name:"settings-individual-sports",destination:"#section-individual-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.individualSportsView),this.layout.render()},SetUpClubView:function(){var e=this,t=new y;t.set("type","Club"),this.clubView=new v({model:t,name:"settings-club",type:"club",destination:"#content-club-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.clubView),this.layout.render()}}),n});