/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!profilesetting/templates/layout.html",[],function(){return'<div class="span12 main-container">\r\n	<div id="main-header-prof-setting" class="profile-header"></div>\r\n\r\n	<!-- Basic Info Section Starts-->\r\n	<div class="row-fluid" id="section-basics-prof-setting"></div>\r\n	<!-- Basic Info Section Ends-->\r\n\r\n	<!-- Team Info Section Starts-->\r\n	<div class="row-fluid section-teams-prof-setting">\r\n\r\n\r\n		<!--Club Info Section Starts-->\r\n		<div id="section-club-prof-setting" class="row-fluid sub-section-prof-setting">\r\n			<div id="content-club-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!--Club Info Section Ends-->\r\n\r\n\r\n		<!-- High School Section Starts-->\r\n		<div id="section-school-prof-setting" class="row-fluid sub-section-prof-setting">\r\n\r\n			<div id="content-school-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!-- High School Section Ends-->\r\n\r\n\r\n\r\n		<!--Individual Sports Section Starts-->\r\n		<div id="section-individual-prof-setting">\r\n\r\n		</div>\r\n		<!--Individual Sports Section Ends-->\r\n	</div>\r\n	<!-- Team Info Section Ends-->\r\n\r\n	<div id="main-footer-prof-setting">\r\n\r\n	</div>\r\n</div>\r\n'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},setParamsArray:function(e){if(e)for(var t in e)this[e[t].key]=e[t].value},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("user/models/basics",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"undefined"==typeof this.id?testpath?testpath+"/user/basics/":"/api/user/basics/":testpath?testpath+"/user/basics/"+this.id:"/api/user/basics/"+this.id},initialize:function(){n.__super__.initialize.apply(this,arguments)},user_pic_small:function(){return this.payload.user_picture.types.small_thumb.url}}),n}),define("profilesetting/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("text!profilesetting/templates/basic_info_header.html",[],function(){return'{{#payload}}\r\n<div class="span4 profile-image">\r\n	<img id="img-profile-prof-setting" src="{{user_picture_obj.types.large_thumb.url}}" />\r\n	<a href="javascript:void(0);" id="change_user_pic">Change User Picture</a>\r\n</div>\r\n<div class="two-column-form mt20" id="user_profile_data"></div>\r\n{{/payload}}\r\n\r\n	<!--div id="edit_profile_info_section">\r\n		<div>\r\n			<span>Name: </span>\r\n			<input type="text" id="txt_user_name" model-property="name" value="{{name}}" />\r\n		</div>\r\n		<div>\r\n			<span>Height (in):</span>\r\n			<input type="text" id="txt_user_height" model-property="height_in" value="{{height_in}}" />\r\n		</div>\r\n		<div>\r\n			<span>Weight (lbs)</span>\r\n			<input type="text" id="txt_user_weight" model-property="weight_lb" value="{{weight_lb}}" />\r\n		</div>\r\n		<div style="font-size: .8em; font-weight: bolder;">\r\n			Change Password\r\n		</div>\r\n		<div>\r\n			<span>New</span>\r\n			<input type="password" id="txt_new_password" model-property="password" placeholder="New Password" />\r\n		</div>\r\n		<div>\r\n			<span>Again</span>\r\n			<input type="password" id="txt_re_new_password" model-property="re_password" placeholder="New Password Again" />\r\n		</div>\r\n		<a href="javascript:void(0);" class="resume_button" id="save_user_data">Save</a>\r\n	</div-->'}),define("text!profilesetting/templates/basic_info_header_edit.html",[],function(){return'{{#payload}}\r\n		<div id="edit_profile_info_section">\r\n			<div><span>Name: </span><input type="text" id="txt_user_name" model-property="name" value="{{name}}" /></div>\r\n			<div><span>Height (in):</span><input type="text" id="txt_user_height" model-property="height_in" value="{{height_in}}" /></div>\r\n			<div><span>Weight (lbs)</span><input type="text" id="txt_user_weight" model-property="weight_lb" value="{{weight_lb}}" /></div>\r\n			<div style="font-size: .8em; font-weight: bolder;">Change Password</div>\r\n			<!--<div><span>Current</span><input type="password" id="txt_current_password" model-property="current_password"  placeholder="Current Password" /></div>-->\r\n\r\n			<div><span>New</span><input type="password" id="txt_new_password" model-property="password" placeholder="New Password" /></div>\r\n			<div><span>Again</span><input type="password" id="txt_re_new_password" model-property="re_password" placeholder="New Password Again" /></div>\r\n			<a href="javascript:void(0);" class="resume_button" id="save_user_data">Save</a>\r\n		</div>\r\n{{/payload}}'}),define("text!profilesetting/templates/basic_info_header_completed.html",[],function(){return'{{#payload}}\r\n	<h2 id="user_name">{{first_name}} {{last_name}}</h2>\r\n	<p id="user_height">\r\n		{{#height_in}} {{height_in}} INCHES{{/height_in}}\r\n	</p>\r\n	<p id="user_weight">\r\n		{{#weight_lb}}{{weight_lb}} LBS{{/weight_lb}}\r\n	</p>\r\n	<div class="resume_button" id="edit_profile_info">Edit Basic User Info</div>\r\n\r\n{{/payload}}'}),define("text!usercontrols/imagecropper/templates/layout.html",[],function(){return'<iframe id="cropper_iframe"></iframe>'}),define("usercontrols/imagecropper/imagecropper",["require","text!usercontrols/imagecropper/templates/layout.html","facade","controller","views"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("views"),o=e("utils"),u=r.$,a=r._,f=o.lib.Channel,l=s.LayoutView;return n=i.extend({cssArr:["/usercontrols/imagecropper/imagecropper.css"],events:{"click button.close":"alertsomething"},initialize:function(e){console.log("init");var t=this;f("load:css").publish(this.cssArr),a.bindAll(this),console.log(e),this.image_o=e.image_o?e.image_o:"",this.image_e=e.image_e?e.image_e:"",this.modelHTML='<div id="modalPopup" class="modal imagecropper hide fade model-popup-h"><div class="modal-header"><span>Athletez Profile Pic Editor</span><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"></div></div>',this.setupLayout().render(),this.handleDeferreds()},handleDeferreds:function(){},setupLayout:function(){var e=this;this.scheme=[];var t="/vendor/plugins/iedit2/index.html?vh=500&vw=500&sx=0&sy=0&sz=100&t=Profile%20Picture&edit=";this.image_e!=""&&(t+="&edit="+this.image_e),this.image_o!=""&&(t+="&o="+this.image_o);var n={};return n.width="100%",n.height="100%",n.title="Change your Athletez Photo",n.html='<iframe src="'+t+'" id="cropper_iframe" style="width:100%;height:100%;margin:0;"></iframe>',n.id="change-userpic-modal",n.addClass=["noBorder"],routing.trigger("common-popup-open",n),u("#"+n.id+" .close").bind("click",function(){e.notifyUpdate()}),this.layout},notifyUpdate:function(){f("userpic-changed").publish()}}),n}),define("component/forms",["require","facade","views","utils","vendor"],function(e){return function(t,n){var r={},s,o=e("facade"),u=e("views"),a=o.Backbone.Model.extend({schema:t}),f=new a,l=(new o.Backbone.Form({model:f,formValues:r})).render();n.append(l.el);if(t){var c=l.getValue();r.fields={};for(var h in c)r.fields[h]={currentValue:function(){return l.fields[h].editor.getValue()},form_field:l.fields[h].editor,deps:l.fields[h].editor.valueBindings?l.fields[h].editor.valueBindings:[],post_to_server:typeof l.fields[h].editor.post_to_server!="undefined"?l.fields[h].editor.post_to_server:!0};r.getFormValues=function(){var e={};if(r.fields)for(var t in r.fields)if(r.fields[t].post_to_server){var n=[];if(r.fields[t].deps&&r.fields[t].deps.length)for(var i in r.fields[t].deps)n.push(l.fields[r.fields[t].deps[i]].editor.getValue()||"");else n.push(l.fields[t].editor.getValue());var s=l.fields[t].editor.serverKey||t;e[s]=n.join(" ")}return e},r.updateUiAfterUpdatingObject=function(e,t){l.fields&&e&&l.fields[e]&&l.fields[e].editor.setValue(t)},r.getFieldValue=function(e){if(l.fields&&e&&l.fields[e]){var t=[];if(r.fields[e].deps&&r.fields[e].deps.length)for(var n in r.fields[e].deps)t.push(l.fields[r.fields[e].deps[n]].editor.getValue()||"");else t.push(l.fields[i].editor.getValue());return t.join(" ")}return undefined},r.updateFormValues=function(e){if(e&&e.objectValuesToUpdate)for(var t in e.objectValuesToUpdate){var n=l.fields[e.objectValuesToUpdate[t]].editor;n.setValue("","")}},r.showServersErrors=function(e){if(l.fields)for(var t in l.fields)if(l.fields[t].editor.serverDbField)for(var n in e)if(e[n].field==l.fields[t].editor.serverDbField){if(l.fields[t].editor.valueBindings&&l.fields[t].editor.valueBindings.length){var r=l.fields[l.fields[t].editor.valueBindings[0]].editor.id;$("#"+r).parents(".field-row").find("*[data-error='']").html(e[n].error).show()}else{var r=l.fields[t].editor.id;$("#"+r).parents(".field-row").find("*[data-error='']").html(e[n].error).show()}break}}}return{form:l,formValues:r}}}),define("profilesetting/views/basic_info",["require","text!profilesetting/templates/basic_info_header.html","text!profilesetting/templates/basic_info_header_edit.html","text!profilesetting/templates/basic_info_header_completed.html","profilesetting/models/basic_info","facade","views","utils","vendor","usercontrols/imagecropper/imagecropper","component/forms"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("profilesetting/models/basic_info"),a=o.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=s.$,d=e("usercontrols/imagecropper/imagecropper"),v=e("component/forms");return i=a.extend({id:"basic_info",template:t,events:{"click .btn-prof-setting-h":"initialize","click #edit_profile_info":"editProfile","click #change_user_pic":"changeUserpic","click #save_user_data":"saveProfileBasics"},initialize:function(e){e.name&&a.prototype.initialize.call(this,e),this.initBasicView()},render:function(){a.prototype.render.call(this)},generateForm:function(){var e=this,t=new v({name:{form_values:{post_to_server:!0,serverKey:"name",serverDbField:"name",value:e.basicInfoModel.get("payload").name},type:"Text",attr:{placeholder:"Name","class":""},label:"Name"},Height:{form_values:{post_to_server:!0,serverKey:"height_in",serverDbField:"height",value:e.basicInfoModel.get("payload").height_in},type:"Text",attr:{placeholder:"Height","class":""},label:"Height (in)"},Weight:{form_values:{post_to_server:!0,serverKey:"weight_lb",serverDbField:"weight",value:e.basicInfoModel.get("payload").weight_lb},type:"Text",attr:{placeholder:"Weight","class":""},label:"Weight (lbs)"},Password:{form_values:{post_to_server:!0,serverKey:"password",serverDbField:"password"},type:"Password",attr:{placeholder:"New Passord","class":""},label:"New"},Again:{form_values:{post_to_server:!0,serverKey:"re_password",serverDbField:"re_password"},type:"Password",attr:{placeholder:"New Password Again"},label:"Again"},submit:{type:"Submit",fieldClass:"button-field",form_values:{post_to_server:!1},attr:{value:"Save","class":"resume_button"},showLable:!1,onSubmit:function(t){var r=n.commit();if(r)for(var i in r);else{if(e.formValues)var s=e.formValues.getFormValues();else var s=n.getValue();var s=e.formValues.getFormValues();e.saveProfileBasics(s)}}}},p("#user_profile_data")),n=t.form;this.formValues=t.formValues},initBasicView:function(){var e=this;this.basicInfoModel=new u,this.basicInfoModel.fetch(),p.when(this.basicInfoModel.request).done(function(){e.basicInfoModel.set("id",e.basicInfoModel.get("payload").id),e.setupBasicView(),e.generateForm()})},setupBasicView:function(){console.log("called");var e=this,t=h.to_html(e.template,this.basicInfoModel.toJSON());p("#section-basics-prof-setting").html(t),p("#change_user_pic").bind("click",function(){e.changeUserpic()}),p("#edit_profile_info").bind("click",function(){e.editProfile()}),p("#save_user_data").bind("click",function(){e.saveProfileBasics()})},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},editProfile:function(){p("#user_profile_data").html(""),this.generateForm()},saveProfileBasics:function(e){var t=this,n={};e?n=e:p("div#user_profile_data").find("input").each(function(){n[p(this).attr("model-property")]=p(this).val()}),this.basicInfoModel.save(n,{success:function(){var e=h.to_html(r,t.basicInfoModel.toJSON());p("div#user_profile_data").html(e),p("#edit_profile_info").bind("click",function(){t.editProfile()})},error:function(e,n){var r=JSON.parse(n.responseText),i=r.exec_data.error_array;t.formValues.showServersErrors(i)}})},changeUserpic:function(){var e=this.basicInfoModel.get("payload");l("userpic-changed").subscribe(function(){t.initBasicView()});var t=this,n=new d({image_o:e.user_picture_obj.pre_crop_url,image_e:e.user_picture_obj.image_path})}}),i}),define("text!profilesetting/templates/highschool.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading">School Teams</span>\r\n</div>\r\n<div id="btn-Add-School" class="clearfix div-add-dotted">\r\n	+ Add a school\r\n</div>\r\n<div id="section-Add-Sports-school" class="displayNone add-org-fields">\r\n	<div>\r\n		<span class="span2">What State?</span>\r\n		<input type="text" id="txt-school-state" placeholder="Just Start Typing"/>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n\r\n	<div>\r\n		<span class="span2">What School?</span>\r\n		<input type="text" id="txt-school-school" placeholder="Just Start Typing" disabled="disabled"/>\r\n		<a class="add-school-h" href="javascript: void(0);">Couldn\'t Find your School?</a>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<div class="div-sports-wrapper displayNone">\r\n		<div id="def-school-sports-section" class="school-sports-section">\r\n\r\n		</div>\r\n		<!--<span class="floatLeft"><a href="javascript:void(0)" class=" well-small btn-add-sports" >Add Sports</a> </span>-->\r\n	</div>\r\n<!-- <span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary btn-finish-addsports" >Finish</a> </span> -->\r\n</div>\r\n<!--SCHOOL LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail">\r\n\r\n</div>\r\n\r\n<!--lIST-->\r\n'}),define("text!profilesetting/templates/club.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading">Club Teams and Affiliations</span>\r\n</div>\r\n<div id="btn-Add-club" class="div-add-dotted">\r\n	+ Add a Club\r\n</div>\r\n<div id="section-Add-Sports-club" class="displayNone add-org-fields">\r\n<div>\r\n	<span class="span2">What State?</span>\r\n	<input type="text" id="txt-club-state" placeholder="Just Start Typing" tabindex="0"/>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n\r\n<div>\r\n	<span class="span2">Club Name</span>\r\n	<input type="text" id="txt-club-club" placeholder="Just Start Typing" disabled="disabled"/>\r\n	<a class="add-club-h" href="javascript: void(0);">Couldn\'t Find your Club?</a>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n<div class="div-sports-wrapper displayNone">\r\n	<div id="def-club-sports-section" class="school-sports-section">\r\n\r\n	</div>\r\n	<!--<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-sports" >Add Sports</a> </span>-->\r\n</div>\r\n<!--<span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary" >Save</a> </span> -->\r\n</div>\r\n<!--CLUBs LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail-club">\r\n\r\n</div>\r\n'}),define("text!profilesetting/templates/sportslevel.html",[],function(){return'<div class="section-sportslevel">\r\n	<div class="select-sports-outer-h">\r\n		<span class="span2">What Sport?</span>\r\n		<!-- class="ddl-school-sports"-->\r\n		<select class="ddl-sports" orgsid="{{orgsId}}" tabindex="0">\r\n			<option value="">Select Sport</option>\r\n			{{#sports}}\r\n			<option value="{{sport_id}}">{{sport_name}}</option>\r\n			{{/sports}}\r\n		</select>\r\n\r\n		<p class="field-error"></p>\r\n\r\n		<p class="field-message"></p>\r\n\r\n		<span><a href="javascript:void(0)" class="btn-Remove-Sport" tabindex="0">Remove</a> </span>\r\n	</div>\r\n\r\n	<div class="clearfix inner-section">\r\n		<div class="sub-section-prof-setting">\r\n			<div>\r\n\r\n				<div class="spn-black-heading spn-sport-name">\r\n				</div>\r\n				<!--class="div-school-sports-level"-->\r\n				<div class="div-sports-level"></div>\r\n\r\n			</div>\r\n			<div class="">\r\n				<!--<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-level" orgsid="{{orgsId}}" tabindex="0">Add Level</a> </span>-->\r\n				<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Cancel</a> </span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/level.html",[],function(){return'<div class="div-levels seasons-records">\r\n	{{#sport}}\r\n		<div class="org-sport-list-header">\r\n			<div class="sport-name"><img src="{{icon}}" />{{sports_name}}</div>\r\n		</div>\r\n	{{/sport}}\r\n	<div class="well-small span12">\r\n		<!-- class="ddl-school-complevel"-->\r\n		<select class="ddl-complevel" orgsid="{{orgsId}}" sportsid="{{sportsId}}">\r\n			<option value="">Select Level</option>\r\n			{{#levels}}\r\n			<option value="{{complevel_id}}">{{complevel_name}}</option>\r\n			{{/levels}}\r\n		</select>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<!-- id="div-school-seasons"-->\r\n	<div class="div-seasons complevels-wrapper displayNone">\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow up-arrow-h" title="up">&uarr;</a>\r\n		</div>\r\n		<div class="complevels-container">		\r\n			<div class="complevels-inner">\r\n				{{#Data}}\r\n					<div class="season-array">\r\n						<div class="year-label">{{year}}</div>\r\n						{{#seasons}}\r\n							<span class="single-season">\r\n								<input type="checkbox" class="chkSeasons chkSeasons-{{season_id}}-{{year}}" seasonId = \'{{season_id}}\' year=\'{{year}}\' orgsid="{{orgsId}}" sportsid="{{sportsId}}"/>\r\n								<label>&nbsp;{{season_name}} </label>\r\n								<!--<a href="javascript:void(0)" class="btnOpenPositions displayNone" disabled="disabled" >Positions main</a>-->\r\n							</span>\r\n						{{/seasons}}\r\n					</div>\r\n				{{/Data}}\r\n			</div>\r\n		</div>\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow down-arrow-h" title="down">&darr;</a>\r\n		</div>\r\n\r\n	</div>\r\n	\r\n	<!--	Modal Section to display positions	-->\r\n	<!--modal-school-positions-->\r\n<div class="modal hide fade position-modal modal-positions" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-header">\r\n<button type="button" class="close btn-Close-Positions" data-dismiss="modal" aria-hidden="true">×</button>\r\n<h3 id="myModalLabel">Positions</h3>\r\n</div>\r\n<div class="modal-body modal-position-body">\r\n	\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn btn-Close-Positions" data-dismiss="modal" aria-hidden="true">Finish</button>\r\n<!--<button class="btn btn-primary btn-Save-Positions">Finish</button> -->\r\n</div>\r\n</div>\r\n</div>\r\n'}),define("location/models/state",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{location_id:0,location_name:null,location_country:null},desc:"State Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("location/collections/states",["facade","collections","location/models/state","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){return testpath?testpath+"/state_search":this.state_name==undefined?"/api/state/search":"/api/state/search/?state_name="+this.state_name},fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("profilesetting/collections/states",["facade","collections","location/collections/states","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("sportorg/models/org",["facade","models/base"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({initialize:function(e){e&&e.id&&(this.id=e.id)},methodToURL:{read:function(e){console.log(e);var t="/api/org/basics/"+e.id;return t},create:"/api/org/add/",update:function(e){var t="/api/org/basics/";return e.id&&(t+=e.id),t},"delete":function(e){return"/api/org/delete"+e.id}},sync:function(e,t,n){return n=n||{},n.url=typeof t.methodToURL[e.toLowerCase()]=="function"?t.methodToURL[e.toLowerCase()](t):t.methodToURL[e.toLowerCase()],i.sync.apply(this,arguments)}}),n}),define("sportorg/collections/orgs",["facade","collections","sportorg/models/org","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){var e=this,t="/api/org/search?sports_club="+encodeURIComponent(e.sports_club)+"&states_id="+encodeURIComponent(e.states_id)+"&org_name="+encodeURIComponent(e.org_name);return e.single_sport_id&&(t+="&single_sport_id="+e.single_sport_id),t},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i],u=o.teams,a=[];for(var f in u){var l=u[f];a.push(l)}o.teams=a,s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),i}),define("profilesetting/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("sportorg/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports",["facade","collections","sportorg/models/sport","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){return this.state_name==undefined,"/api/sport/search/?sport_name="+this.sport_name+"&gender="+this.gender},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){}}),i}),define("sportorg/collections/sports_listall",["facade","collections","sportorg/collections/sports"],function(e,t,n){var r;return r=n.extend({sport_type:null,sport_type_id:null,male:1,female:0,url:function(){return baseUrl="/api/sport/listall/?male="+this.male+"&female="+this.female+"&sport_type="+this.sport_type+"&sport_type_id="+this.sport_type_id},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload,r="";n.male=="1"&&n.female=="1"?r="":n.male=="1"?r="Men's ":n.female=="1"&&(r="Women's "),t.payload.custom_name=r+n.sport_name,t.payload.team_type=n.sport_type?n.sport_type.name||"":""}}),t}}),r}),define("profilesetting/collections/sports",["facade","sportorg/collections/sports_listall"],function(e,t){var n=t.extend({});return n}),define("text!profilesetting/templates/teamlist.html",[],function(){return'{{#orgs}}\r\n	<div class="div-sports-wrapper"  orgsId="{{org_id}}">\r\n		<div class="school-sports-section"></div>\r\n	</div>\r\n	<div class="org-sport-list">\r\n		<div class="org-sport-list-header">\r\n			<div class="org-name">{{org_name}}, {{city}}, {{state}}</div>\r\n			{{^single_sport_id}}\r\n			<div class="add-sport"><a class="btn-add-sports" href="javascript:void(0)" orgsId="{{org_id}}">Add Sport</a></div>\r\n			{{/single_sport_id}}\r\n		</div>\r\n		{{#sports}}\r\n\r\n			<div class="org-sport-list-header">\r\n				<div class="sport-name"><img src="{{icon}}" />{{sports_name}} - <a href="javascript:void(0)" class="edit-team"  orgsId="{{org_id}}" sportId="{{sports_id}}">Edit</a></div>\r\n			</div>\r\n\r\n			<div>\r\n				{{#complevels}}\r\n					{{#seasons}}\r\n				<a href="/#!team/{{team_id}}"><div class="season-list">\r\n						<span>{{complevel}}</span>\r\n						<span>{{season}} {{year}}</span>\r\n						<span>\r\n							{{#positions}}<span class="position-listing">{{name}}</span>{{/positions}}\r\n							{{^positions}}No Positions&nbsp;{{/positions}}\r\n						</span>\r\n				</div></a>\r\n					{{/seasons}}\r\n\r\n				{{/complevels}}\r\n			</div>\r\n\r\n\r\n		{{/sports}}</div>\r\n{{/orgs}}'}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("sportorg/collections/teams",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}}),i}),define("profilesetting/collections/teams",["facade","utils","sportorg/collections/teams","sportorg/models/team"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+" /api/user/orgs/"+e.user_id+"?groupby=complevel "+"&time="+(new Date).getTime():" /api/user/orgs/"+e.user_id+"?groupby=complevel&org_type="+e.org_type+"&time="+(new Date).getTime()},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},data:{user_id:self.user_id,sports_club:self.sports_club}}),i}),define("profilesetting/views/teams",["require","text!profilesetting/templates/teamlist.html","facade","views","utils","vendor","profilesetting/collections/teams"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("profilesetting/collections/teams"),p=o.extend({template:t,controls:{},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){var t=this;t.setOptions(e),t.render()},setOptions:function(e){var t=this;if(!e.user_id&&!e.destination)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.user_id=e.user_id,this.sports_club=e.sports_club,this.el=e.destination,this.org_type=e.org_type},bindEvents:function(){},GetData:function(){var e=this,t={user_id:e.user_id,sports_club:this.sports_club},n=new h(t);n.user_id=e.user_id,n.sports_club=this.sports_club,n.org_type=this.org_type,e.teamFetchRequest=e.abortRequest(e.teamFetchRequest);var r=n.fetch();e.teamFetchRequest.push(r),c.when(n.request).done(function(){if(n.isError())return;var t=n.toJSON();if(t.length){var r=[];for(var i=0;i<t.length;i++)r.push(t[i].payload);console.error(r),e.Teams=t;var s=l.to_html(e.template,{orgs:r});c(e.el).html(s)}else c(e.el).html(e.messages.dataNotExist)})},render:function(){var e=this;e.GetData()}});return p}),define("sportorg/models/complevel",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel information",exec_data:{exec_time:0,exec_error:!1}}),fetchSuccess:function(e,t){}}),n}),define("profilesetting/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("text!profilesetting/templates/season-item.html",[],function(){return'<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&uarr;</a>\r\n</div>\r\n{{#Data}}\r\n<div class="span12">\r\n	<span class="span3"><strong>{{year}}</strong></span>\r\n	{{#seasons}}\r\n	<span class="span3">\r\n		<input type="checkbox" class="chkSeasons" year=\'{{year}}\' seasonId = \'{{season_id}}\' />\r\n		<label>&nbsp;{{season_name}} </label>\r\n		<a href="javascript:void(0)" class="btnOpenPositions">Positions</a>\r\n		 </span>\r\n	{{/seasons}}\r\n</div>\r\n{{/Data}}\r\n<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&darr;</a>\r\n</div>'}),define("profilesetting/views/seasons",["require","text!profilesetting/templates/season-item.html","facade","views","utils","vendor","profilesetting/models/complevel"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,r=o.extend({template:t,events:{},controls:{chkSeasons:".chkSeasons"},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property."},properties:{show_prev_year:2},initialize:function(e){n=this,n.setOptions(e),n.render()},setOptions:function(e){if(!e.orgs_id||!e.user_id||!e.sport_id||!e.complevel_id)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.collection=e.collection,this.sport_id=e.sports_id,this.org_id=e.orgs_id,this.user_id=e.user_id,this.complevel_id=e.complevel_id,this.el=e.destination,this.properties.show_prev_year=e.show_prev_year||this.properties.show_prev_year},bindEvents:function(){},GetData:function(e){var t=[],r=(new Date).getFullYear();for(var i=n.properties.show_prev_year;i>=0;i--){var s={year:r,seasons:e};t.push(s),r--}return{Data:t}},render:function(){var e=l.to_html(n.template,n.GetData(this.collection));c(n.destination).html(e)}});return r}),define("text!profilesetting/templates/positions.html",[],function(){return'{{#Data}}\r\n<span id="pos-{{id}}" class="span3 spn-position-title_h" positionId=\'{{id}}\'>{{name}} </span>\r\n{{/Data}}\r\n'}),define("sportorg/models/position",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,sport_name:null,stattab_id:0,stattab_name:null,stattab_classname:null},desc:"Position information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/positions",["facade","collections","sportorg/models/position","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}}),s}),define("profilesetting/collections/positions",["facade","collections","sportorg/collections/positions","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/sport/positions/"+this.sport_id+"?id1="+this.sport_id)}}),i}),define("profilesetting/views/positions",["require","text!profilesetting/templates/positions.html","facade","views","utils","vendor","profilesetting/collections/positions"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=e("profilesetting/collections/positions"),c=f.Mustache,h=i.$,r=o.extend({template:t,events:{},controls:{spnPositionTitle:".spn-position-title_h",divLevels:".div-levels",btnPositions:".btnOpenPositions",btnClose:".btn-Close-Positions"},messages:{},properties:{},initialize:function(e){n=this,n.setOptions(e),n.BindPositions(),n.bindEvents()},bindEvents:function(){},MarkPosition:function(e){h(e).hasClass("active")?h(e).addClass("active"):h(e).removeClass("active")},setOptions:function(e){if(!e.sport_id)throw new Error("Sport_id is missing for Positions View",e);this.destination=e.destination,this.sport_id=e.sport_id,this.el=e.destination,this.target=e.target},BindPositions:function(){if(n.sport_id){var e=new l;e.sport_id=n.sport_id,e.fetch(),h.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();n.positions=[];if(t!=null&&t.length){n.positions=[];for(var r in t)n.positions.push(t[r].payload)}else n.positions=[];n.render()})}},render:function(){var e=c.to_html(n.template,{Data:n.positions||[]});h(n.destination).html(e),n.positions!=null&&n.positions.length>0?h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeIn():h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeOut()}});return r}),define("profilesetting/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"team_id",url:function(){this.orgs_id==undefined;if(this.type=="add")return"/api/user/addteam/"+this.user_id;if(this.type=="delete")return"/api/user/team/"+this.user_id}}),n}),define("profilesetting/models/position",["facade","sportorg/models/position"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"position_id",url:function(){return this.orgs_id==undefined,this.type=="save"?"/api/user/position/"+this.user_id+"?time="+(new Date).getTime():(+(new Date).getTime(),this.type=="delete"?"/api/user/position/"+this.user_id+"?user_id="+this.user_id+"?time="+(new Date).getTime():"/api/user/position/"+this.user_id+"?time="+(new Date).getTime())}}),n}),define("profilesetting/views/org",["require","text!profilesetting/templates/highschool.html","text!profilesetting/templates/club.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r,i){var s,o,u=e("facade"),a=e("views"),f=a.SectionView,l=e("utils"),c=l.lib.Channel,h=e("vendor"),p=h.Mustache,d=u.$,v=e("profilesetting/collections/states"),m=e("profilesetting/collections/schools"),g=e("profilesetting/collections/sports"),y=e("profilesetting/models/complevel"),b=e("profilesetting/views/seasons"),w=e("profilesetting/views/positions"),E=e("profilesetting/views/teams"),S=e("profilesetting/models/team"),x=e("profilesetting/models/position");return o=f.extend({events:{"keyup #txt-school-state":"keyupState","blur #txt-school-state":"changeState","keyup #txt-school-school":"keyupSchool","blur #txt-school-school":"changeSchool","keyup #txt-club-state":"keyupState","blur #txt-club-state":"changeState","keyup #txt-club-club":"keyupSchool","blur #txt-club-club":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-School":"SetUpAddSchool","click #btn-Add-club":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-school-h":"openAddHighSchoolPopup","click .add-club-h":"openAddClubPopup","click .up-arrow-h":"levelUpArrow","click .down-arrow-h":"levelDownArrow"},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert School",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:30},states:[],schools:[],initialize:function(e){e.type&&e.type=="school"?(this.type="school",this.controls={txtStates:"#txt-school-state",txtSchools:"#txt-school-school",content:"#content-school-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-school-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail",divAddSportSection:"#section-Add-Sports-school",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},this.template=t):(this.type="club",this.controls={txtStates:"#txt-club-state",txtSchools:"#txt-club-club",content:"#content-club-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-club-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail-club",divAddSportSection:"#section-Add-Sports-club",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},this.template=n),f.prototype.initialize.call(this,e),_self=this,_self.setOptions(e),this.init()},openAddHighSchoolPopup:function(){var e=this;routing.trigger("add-school-init","","","school",e,function(t){console.log(t),e.$el.find(e.controls.txtSchools).val(t.name),e.$el.find(e.controls.txtStates).val(t.locationState.name),e.states_id="",e.orgs_id="",e.states_id=t.locationState.id,e.$(e.controls.txtSchools).removeAttr("disabled"),e.orgs_id=t.org_id,e.$el.find(e.controls.divMainSportsSection).find(e.controls.ddlSports).length<1&&e.fillSports(e.orgs_id,e.controls.divMainSportsSection),e.$el.find(".add-school-h").hide()})},init:function(){var e=this;e.setupView(),e.SetUpTeamsView()},render:function(){var e=this;f.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=this,n=d(e.target).val(),r=[],i=t.isValidAutoCompleteKey(e);if(n!="")if(i==1){t.$(e.target).parents(t.controls.divAddSportSection).find(t.controls.txtSchools).attr("disabled","disabled").val(""),t.RemoveSportsSection();var s=new v;s.state_name=n,console.log("State Request Abort Request Function AddGame/Main.js"),t.stateFetchRequest=t.stateFetchRequest||[],t.stateFetchRequest.push(t.cityFetchRequest||[]),t.stateFetchRequest.push(t.schoolFetchRequest||[]),t.stateFetchRequest=t.abortRequest(t.stateFetchRequest),d(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();t.stateFetchRequest.push(o),d.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?t.$el.find(t.controls.txtStates).parent().find(t.controls.fieldMessage).html(t.messages.dataNotExist).stop().fadeIn():t.$el.find(t.controls.txtStates).parent().find(t.controls.fieldMessage).html("").fadeOut(),t.states=[];for(var n in e)t.states.push(e[n].payload);t.states.forEach(function(e,t){r.push(e.name)});try{t.$el.find(t.controls.txtStates).autocomplete("destroy")}catch(i){}t.$el.find(t.controls.txtStates).autocomplete({source:r}),t.$el.find(t.controls.txtStates).trigger("keydown")})}else t.changeState(e)},changeState:function(e){var t=this,n=d(e.target).val(),r=!1;t.states_id="",t.states.forEach(function(e,i){e["name"]==n&&(r=!0,t.states_id=e.id,t.$(t.controls.txtSchools).removeAttr("disabled"))}),r||(t.states_id=0,t.$(t.controls.txtSchools).attr("disabled","disabled"))},keyupSchool:function(e){var t=this,n=d(e.target).val(),r=[],i=t.isValidAutoCompleteKey(e);if(n!=""&&i==1){t.RemoveSportsSection();var s=new m;s.sports_club=t.type=="school"?0:1,s.states_id=t.states_id,s.org_name=n,console.log("School Request Abort Request Function"),t.schoolFetchRequest=t.abortRequest(t.schoolFetchRequest),d(e.target).addClass("ui-autocomplete-loading"),d(e.target).removeAttr("data-id");var o=s.fetch();t.schoolFetchRequest.push(o),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();n==null||n.length<1?t.$el.find(t.controls.txtSchools).parent().find(t.controls.fieldMessage).html(t.messages.dataNotExist).stop().fadeIn():t.$el.find(t.controls.txtSchools).parent().find(t.controls.fieldMessage).html("").stop().fadeOut(),t.schools=[];for(var i in n)t.schools.push(n[i].payload);t.schools.forEach(function(e,t){r.push({id:e.id,value:e.org_name,city:e.city})});try{t.$el.find(t.controls.txtSchools).autocomplete("destroy")}catch(o){}d(e.target).autocomplete({source:r,select:function(t,n){console.error(t),setTimeout(function(){d(e.target).val(n.item.value),d(e.target).attr("data-id",n.item.id),d(e.target).trigger("blur")},100)}}).data("ui-autocomplete")._renderItem=function(e,t){return d("<li>").append("<a>"+t.value+"<br><span class='sub-label'>"+t.city+"</span></a>").appendTo(e)},d(e.target).trigger("keydown")})}else t.RemoveSportsSection(),t.changeSchool(e)},changeSchool:function(e){var t=this,n,r=t.schools.length,i=t.$(e.target).attr("data-id");t.orgs_id=0;for(n=0;n<r;n++)if(t.schools[n]["id"]==i){t.orgs_id=t.schools[n].org_id;var s=t.schools[n].single_sport_id;t.$el.find(t.controls.divMainSportsSection).find(t.controls.ddlSports).length<1&&t.fillSports(t.orgs_id,t.controls.divMainSportsSection,s);break}},openAddClubPopup:function(e){var t=d(e.target).parent().find("input#txt-club-club").val(),n=this;routing.trigger("add-school-init","","","club",n,function(e){console.log("RESULT",e),n.$el.find(n.controls.txtSchools).val(e.name),n.$el.find(n.controls.txtSchools).attr("data-id",e.org_id),n.$el.find(n.controls.txtStates).val(e.locationState.name),n.$el.find(n.controls.divSportsWrapper).css({"background-color":"rgb(255, 223, 223)"}),n.states_id="",n.orgs_id="",n.states_id=e.locationState.id,n.$(n.controls.txtSchools).removeAttr("disabled"),n.orgs_id=e.org_id,n.$el.find(n.controls.divMainSportsSection).find(n.controls.ddlSports).length<1&&n.fillSports(n.orgs_id,n.controls.divMainSportsSection,e.single_sport_id);var t=n.$el.parents().find(d("#btn-Add-club")),r=t.position();t.parents(document).animate({scrollTop:r.top},"1000"),n.$el.find(".add-club-h").hide()},t)},RemoveSportsSection:function(){var e=this;e.$el.find(e.controls.divMainSportsSection).html("")},fillSports:function(e,t,n){var r=this;if(r.sports&&r.sports.length>0)r.SetupSportsView(e,t,n);else{var i=new g;i.sport_type=this.type=="club"?0:1,i.sport_type_id=i.sport_type,i.male=1,i.female=0,r.gender=="male"?i.male=1:r.gender=="famale"&&(i.female=0),i.fetch(),d.when(i.request).done(function(){if(i.isError())return;var s=i.toJSON();(s==null||s.length<1)&&r.$el.find(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var o in s)r.sports.push(s[o].payload);r.sort(r.sports,"sport_name",!1),r.SetupSportsView(e,t,n)})}},changeSports:function(e){var t=this;console.log("SPORTS",t.sports);var n=d(e.target).val(),r=d(e.target).attr("orgsid");console.log("Event Target Sports List",d(e.target),n,r);if(n!=0&&n!=null&&n!=""&&r&&r!=0&&r!=null&&r!=""){t.sport_id=n;var i=t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.divLevels);console.log("CALLED",i),i.html(""),t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.btnAddLevel).attr("sportid",n),t.fillCompLevel(r,i,n)}else t.sport_id=0},SetupSportsView:function(e,t,n){var i=this,s=p.to_html(r,{sports:i.sports,orgsId:e});i.$(t).append(s),n&&i.$(t).find(".section-sportslevel .select-sports-outer-h").hide(),d(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),n&&i.$(t).find(".ddl-sports").val(n).trigger("change"),d(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){var t=this;if(!(t.sports&&t.sports.length<1))return 0;for(var n=0;n<t.sports.length;n++)if(t.sports[n].id==e)return t.sports[n]},fillCompLevel:function(e,t,n){var r=this;r.compLevel_id=undefined;if(e&&e>0){var i=new y;i.orgs_id=e,r.compFetchRequest=r.abortRequest(r.compFetchRequest);var s=i.fetch();r.compFetchRequest.push(s),d.when(i.request).done(function(){if(i.isError())return;var s=i.toJSON();r.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){r.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)r.compLevel.push(s.payload.complevels[o]);var u=r.findSportById(n);u||(u=n),r.SetUpCompLevelView(e,t,u)}})}else d(t).html("")},changeCompLevel:function(e){var t=this,n=d(e.target).val();t.compLevel_id=0;for(var r in t.compLevel)if(t.compLevel[r].complevel_id==n){t.compLevel_id=n,t.$(e.target).attr("disabled","disabled"),t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.divSeasons).fadeIn();return}t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var r=this,s=n.sports_id;s||(s=n);var o=r.GetSeasonsData(r.seasons,e,s);console.log(o);var u=p.to_html(i,{levels:r.compLevel,Data:o,sport:n});r.$(t).append(u);var a=r.$(t).find(r.controls.modalPositionBody);r.fillPositions(s,a)},levelUpArrow:function(e){var t=this,n=d(e.currentTarget).parents(".complevels-wrapper"),r=n.find(".complevels-container").scrollTop(),i=n.find(".complevels-container").height();if(r>i)var s=r-i;else var s=0;n.find(".complevels-container").animate({scrollTop:s})},levelDownArrow:function(e){var t=this,n=d(e.currentTarget).parents(".complevels-wrapper"),r=n.find(".complevels-container").scrollTop(),i=r+n.find(".complevels-container").height();n.find(".complevels-container").animate({scrollTop:i})},GetSeasonsData:function(e,t,n){var r=this,i=[],s=(new Date).getFullYear();for(var o=r.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};i.push(u),s--}return i},fillPositions:function(e,t){var n=this;console.log("fillpositions",e,t),e?(console.log("sport_id",e,"destination",t),this.positionView=new w({name:"settings-high-school-positions",destination:t,sport_id:e}),n.$el.find(n.controls.ddlSports).parent().find(n.controls.fieldError).html("").fadeOut()):n.$el.find(n.controls.ddlSports).parent().find(n.controls.fieldError).html(n.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){var t=this;t.clickedPositionTarget=d(e.target);if(d(e.target).parent().find(t.controls.chkSeasons).is(":checked")){var n=d(e.target).attr("teamid");console.log(d(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle));if(d(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle).length>0){t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle).attr("teamid",n).removeClass("active");var r=d(e.target).attr("positions");console.log("ids",r);if(r){var i=r.split(",");d.each(i,function(n,r){t.$(e.target).parents(t.controls.divSubLevels).find("#pos-"+r).addClass("active")})}t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport")}else alert("Select Season")},MarkPosition:function(e){var t=this,n=t.$(e.target),r=d(e.target).attr("teamid"),i=d(e.target).attr("positionId"),s={id1:t.user_id,user_id:t.user_id,positions_id:i,teams_id:r};if(n.hasClass("active")){s.position_id=i;var o=new x(s);o.user_id=t.user_id,o.type="delete",o.destroy({data:s}),d.when(o.request).done(function(){n.removeClass("active"),t.updatePositionButtonNumber(r,!1)})}else{var o=new x(s);o.user_id=t.user_id,o.type="save",o.save(),d.when(o.request).done(function(){n.addClass("active"),t.updatePositionButtonNumber(r,!0)})}},AddLevel:function(e){var t=this,n=t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.divLevels),r=d(e.target).attr("orgsid"),i=d(e.target).attr("sportid");r&&r!=0&&r!=null&&r!=""?(console.log("destination add level function",n),t.fillCompLevel(r,n,i)):console.error("Orgs Id is ",r)},AddSports:function(e){var t=this,n=t.$(e.target).attr("orgsid"),r=d(t.controls.divSportsWrapper+'[orgsId="'+n+'"] '+t.controls.divSchoolSportsSection);n&&n!=0&&n!=null&&n!=""&&(t.fillSports(n,r),d(r).parents(t.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){var t=this;t.$(e.target).parents(t.controls.divsportsLevel).remove()},SetUpTeamsView:function(){var e=this;console.log("Highschool teams view Set Up Teams View",e.type),this.teamsView=new E({user_id:e.user_id,destination:e.controls.divTeamListDetail,sports_club:e.type=="school"?0:1,org_type:e.type})},SetUpAddSchool:function(){var e=this;e.$el.find(e.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){var t=this;t.$el.find(t.controls.btnFinishSports).html("Finish");if(d(e.target).is(":checked")&&d(e.target).attr("seasonid")&&d(e.target).attr("year")){var n=d(e.target).attr("orgsid"),r=d(e.target).parents(t.controls.divSubLevels).find(t.controls.ddlComplevel).val();if(n&&n!=0&&n!=null&&n!=""&&r&&r!=0&&r!=null&&r!=""){var i={orgs_id:n,teams_id:0,id1:t.user_id,user_id:t.user_id,sports_id:d(e.target).attr("sportsid"),complevels_id:r,seasons_id:d(e.target).attr("seasonid"),year:d(e.target).attr("year")},s=new S(i);s.type="add",s.user_id=t.user_id,s.save(),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();if(n!=null&&n.payload!=null||n.payload.id!=null)d(e.target).attr("teamid",n.payload.id),console.log(n.payload.seasons_obj),t.insertPositionsButton(d(e.target),n.payload.seasons_obj,n.payload.year,n.payload.id)})}else{var o=d(e.target).parents(t.controls.divLevels).find(t.controls.ddlComplevel);d(o).parent().find(t.controls.fieldError).html(t.messages.SelectLevel).stop().fadeIn(),d(e.target).parent().find(t.controls.btnOpenPositions).attr("disabled","disabled")}}else!d(e.target).is(":checked")&&d(e.target).attr("teamid")&&t.DeleteTeam(e)},DeleteTeam:function(e){var t=this,n=d(e.target).attr("teamid");if(n){var r={};r.user_id=t.user_id,r.team_id=n;var i=new S(r);i.user_id=t.user_id,i.team_id=n,i.type="delete",i.destroy({data:{user_id:t.user_id,teams_id:n},processData:!0,success:function(){d(e.target).removeAttr("teamid"),d(e.target).parent().find(t.controls.btnOpenPositions).attr("disabled","disabled")}})}},FinishSports:function(){console.log("Current state of view",this);var e=this;e.ClearAddNewForm(),e.init()},ClearAddNewForm:function(){var e=this;e.RemoveSportsSection(),e.$(e.controls.txtStates).val(""),e.states_id=undefined,e.$(e.controls.txtSchools).attr("disabled","disabled").val(""),e.orgs_id=undefined,e.type=="club"?e.$el.find(".add-club-h").show():e.$el.find(".add-school-h").show(),e.$el.find(e.controls.divAddSportSection).fadeOut()},EditTeam:function(e){var t=this;console.log("Event",e.target);var n=d(e.target).attr("orgsId"),r=d(e.target).attr("sportId"),i=d(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+n+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",d(i).html(s);var o=d(i).find(t.controls.divLevels);d.each(t.teamsView.Teams,function(e,i){n==i.payload.org_id&&d.each(i.payload.sports,function(e,i){if(i.sports_id==r){t.SetUpEditTeamView(n,o,r,i);return}})})},SetUpEditTeamView:function(e,t,n,r){var i=this;i.compLevel_id=undefined;if(e&&e>0){var s=new y;s.orgs_id=e,s.fetch(),console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);d.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);d(u).val(s.complevels_id).attr("disabled","disabled"),d(o[n]).find(i.controls.divSeasons).fadeIn(),d.each(s.seasons,function(e,t){d(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),i.insertPositionsButton(d(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year),t)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},insertPositionsButton:function(e,t,n,r){console.log(t),t.positions||(t.positions=[]),t.seasons_id||(t.seasons_id=t.season_id),t.year&&(n=t.year),t.team_id&&(r=t.team_id),console.log(_self.controls.btnOpenPositions+'[teamid="'+r+'"]',d(_self.controls.btnOpenPositions+'[teamid="'+r+'"]')),d(e).parent().find(_self.controls.btnOpenPositions+'[teamid="'+r+'"]').length?d(e).parent().find(_self.controls.btnOpenPositions+'[teamid="'+r+'"]').removeAttr("disabled","disabled"):d(e).parent().append('<a href="javascript:void(0)" id="season-positions-'+t.seasons_id+"-"+n+'" class="btnOpenPositions btn" >Positions ('+t.positions.length+")</a>"),d(e).parent().find(_self.controls.btnOpenPositions).attr("teamid",r),d(e).parent().find(_self.controls.btnOpenPositions).attr("data-number-positions",t.positions.length);var i="";t.positions&&d.each(t.positions,function(e,t){t&&(i+=t.id+",")}),d(e).parent().find(_self.controls.btnOpenPositions).attr("positions",i)},updatePositionButtonNumber:function(e,t){var n=d(_self.controls.btnOpenPositions+'[teamid="'+e+'"]'),r=n.data("number-positions"),i=t?r+1:r-1;n.data("number-positions",i).html("Positions ("+i+")")},ClosePositions:function(e){var t=this;if(t.clickedPositionTarget){var n=d(e.target).parents(t.controls.modalPosition).find(t.controls.modalPositionsTitle),r="";n.each(function(){d(this).hasClass("active")&&(r+=d(this).attr("positionid")+",")}),d(t.clickedPositionTarget).attr("positions",r),t.clickedPositionTarget=undefined}}}),o}),define("profilesetting/views/club",["require","text!profilesetting/templates/club.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/states"),v=e("profilesetting/collections/schools"),m=e("profilesetting/collections/sports"),g=e("profilesetting/models/complevel"),y=e("profilesetting/views/seasons"),b=e("profilesetting/views/positions"),w=e("profilesetting/views/teams"),E=e("profilesetting/models/team"),S=e("profilesetting/models/position"),s=a.extend({template:t,events:{"keyup #txt-club-state":"keyupState","blur #txt-club-state":"changeState","keyup #txt-club-club":"keyupSchool","blur #txt-club-club":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-club":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-club-h":"openAddClubPopup","click .up-arrow-h":"levelUpArrow","click .down-arrow-h":"levelDownArrow"},controls:{txtStates:"#txt-club-state",txtSchools:"#txt-club-club",content:"#content-club-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-club-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail-club",divAddSportSection:"#section-Add-Sports-club",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},messages:{dataNotExist:'No teams set up yet.  Click "Add a Club" to link up with your club teams.',optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert Club",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:30},states:[],schools:[],initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},levelUpArrow:function(e){var t=p(e.currentTarget).parents(".complevels-wrapper"),n=t.find(".complevels-container").scrollTop(),r=t.find(".complevels-container").height();if(n>r)var i=n-r;else var i=0;t.find(".complevels-container").animate({scrollTop:i})},levelDownArrow:function(e){var t=p(e.currentTarget).parents(".complevels-wrapper"),n=t.find(".complevels-container").scrollTop(),r=n+t.find(".complevels-container").height();t.find(".complevels-container").animate({scrollTop:r})},openAddClubPopup:function(){var e=this;routing.trigger("add-school-init","","","club",e,function(t){e.$el.find(e.controls.txtSchools).val(t.name),e.$el.find(e.controls.txtStates).val(t.locationState.name),e.states_id="",e.orgs_id="",e.states_id=t.locationState.id,e.$(i.controls.txtSchools).removeAttr("disabled"),e.orgs_id=t.org_id,e.$el.find(e.controls.divMainSportsSection).find(e.controls.ddlSports).length<1&&i.fillSports(e.orgs_id,e.controls.divMainSportsSection),e.$el.find(".add-club-h").hide()})},init:function(){i.setupView(),i.SetUpTeamsView()},render:function(){var e=this;a.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=p(i.controls.txtStates).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!="")if(r==1){i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.RemoveSportsSection();var s=new d;s.state_name=t,console.log("State Request Abort Request Function AddGame/Main.js"),i.stateFetchRequest=i.stateFetchRequest||[],i.stateFetchRequest.push(i.cityFetchRequest||[]),i.stateFetchRequest.push(i.schoolFetchRequest||[]),i.stateFetchRequest=i.abortRequest(i.stateFetchRequest),p(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();i.stateFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html("").fadeOut(),i.states=[];for(var t in e)i.states.push(e[t].payload);i.states.forEach(function(e,t){n.push(e.name)});try{i.$el.find(i.controls.txtStates).autocomplete("destroy")}catch(r){}i.$el.find(i.controls.txtStates).autocomplete({source:n}),i.$el.find(i.controls.txtStates).trigger("keydown")})}else i.changeState(e)},changeState:function(e){var t=p(e.target).val(),n=!1;i.states_id="",i.states.forEach(function(e,r){e["name"]==t&&(n=!0,i.states_id=e.id,i.$el.find(i.controls.txtSchools).removeAttr("disabled"))}),n||(i.states_id=0,i.$el.find(i.controls.txtSchools).attr("disabled","disabled").val(""))},keyupSchool:function(e){var t=p(e.target).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!=""&&r==1){i.RemoveSportsSection();var s=new v;s.sports_club=1,s.states_id=i.states_id,s.org_name=t,console.log("School Request Abort Request Function"),i.schoolFetchRequest=i.abortRequest(i.schoolFetchRequest),p(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();i.schoolFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html("").stop().fadeOut(),i.schools=[];for(var r in t)i.schools.push(t[r].payload);i.schools.forEach(function(e,t){n.push(e.org_name)});try{i.$el.find(i.controls.txtSchools).autocomplete("destroy")}catch(o){}p(e.target).autocomplete({source:n}),i.$el.find(i.controls.txtSchools).trigger("keydown")})}else i.RemoveSportsSection(),i.changeSchool(e)},changeSchool:function(e){var t=this.$(e.target).val();i.orgs_id=0,i.schools.forEach(function(e,n){e["org_name"]==t&&(i.orgs_id=e.org_id,i.$el.find(i.controls.divMainSportsSection).find(i.controls.ddlSports).length<1&&i.fillSports(i.orgs_id,i.controls.divMainSportsSection))})},RemoveSportsSection:function(){i.$el.find(i.controls.divMainSportsSection).html("")},fillSports:function(e,t){if(i.sports&&i.sports.length>0)i.SetupSportsView(e,t);else{var n=new m;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,i.gender=="male"?n.male=1:i.gender=="famale"&&(n.female=0),n.fetch(),p.when(n.request).done(function(){if(n.isError())return;var r=n.toJSON();(r==null||r.length<1)&&i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn(),i.sports=[];for(var s in r)i.sports.push(r[s].payload);i.sort(i.sports,"sport_name",!1),i.SetupSportsView(e,t)})}},changeSports:function(e){console.log("SPORTS",i.sports);var t=p(e.target).val(),n=p(e.target).attr("orgsid");console.log("Event Target Sports List",p(e.target),t,n);if(t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){i.sport_id=t;var r=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels);console.log("CALLED",r),r.html(""),i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",t),i.fillCompLevel(n,r,t)}else i.sport_id=0},SetupSportsView:function(e,t){var r=h.to_html(n,{sports:i.sports,orgsId:e});i.$(t).append(r),p(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),p(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){if(i.sports.length<1)return 0;for(var t=0;t<i.sports.length;t++)if(i.sports[t].id==e)return i.sports[t]},fillCompLevel:function(e,t,n){i.compLevel_id=undefined;if(e&&e>0){var r=new g;r.orgs_id=e,console.log("Complevels Request Abort Request Function"),i.compFetchRequest=i.abortRequest(i.compFetchRequest);var s=r.fetch();i.compFetchRequest.push(s),p.when(r.request).done(function(){if(r.isError())return;var s=r.toJSON();i.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){i.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)i.compLevel.push(s.payload.complevels[o]);var u=i.findSportById(n);i.SetUpCompLevelView(e,t,u)}})}else p(t).html("")},changeCompLevel:function(e){var t=p(e.target).val();i.compLevel_id=0;for(var n in i.compLevel)if(i.compLevel[n].complevel_id==t){i.compLevel_id=t,i.$(e.target).attr("disabled","disabled"),i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeIn();return}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var s=n.sports_id,o=i.GetSeasonsData(i.seasons,e,s),u=h.to_html(r,{levels:i.compLevel,Data:o,sport:n});i.$(t).append(u);var a=i.$(t).find(i.controls.modalPositionBody);i.fillPositions(s,a)},GetSeasonsData:function(e,t,n){var r=[],s=(new Date).getFullYear();for(var o=i.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};r.push(u),s--}return r},fillPositions:function(e,t){e?(this.positionView=new b({name:"settings-club-positions",destination:t,sport_id:e}),i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html("").fadeOut()):i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html(i.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){alert("test"),i.clickedPositionTarget=p(e.target);var t=p(e.target).attr("teamid");if(p(e.target).parent().find(i.controls.chkSeasons).is(":checked"))if(p(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).length>0){i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).attr("teamid",t).removeClass("active");var n=p(e.target).attr("positions");if(n){var r=n.split(",");p.each(r,function(t,n){i.$(e.target).parents(i.controls.divSubLevels).find("#pos-"+n).addClass("active")})}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport");else alert("Select Season")},MarkPosition:function(e){var t=i.$(e.target),n=p(e.target).attr("teamid"),r=p(e.target).attr("positionId"),s={id1:i.user_id,user_id:i.user_id,positions_id:r,teams_id:n};if(t.hasClass("active")){s.position_id=r;var o=new S(s);o.user_id=i.user_id,o.type="delete",o.destroy({data:s}),p.when(o.request).done(function(){t.removeClass("active")})}else{var o=new S(s);o.user_id=i.user_id,t.addClass("active"),o.type="save",o.save()}},AddLevel:function(e){var t=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels),n=p(e.target).attr("orgsid"),r=p(e.target).attr("sportid");n&&n!=0&&n!=null&&n!=""?i.fillCompLevel(n,t,r):console.error("Orgs Id is ",n)},AddSports:function(e){var t=i.$(e.target).attr("orgsid"),n=p(i.controls.divSportsWrapper+'[orgsId="'+t+'"] '+i.controls.divSchoolSportsSection);t&&t!=0&&t!=null&&t!=""&&(i.fillSports(t,n),p(n).parents(i.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){i.$(e.target).parents(i.controls.divsportsLevel).remove()},SetUpTeamsView:function(){this.teamsView=new w({user_id:i.user_id,destination:i.controls.divTeamListDetail,sports_club:1,org_type:"club"})},SetUpAddSchool:function(){i.$el.find(i.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){if(p(e.target).is(":checked")&&p(e.target).attr("seasonid")&&p(e.target).attr("year")){var t=p(e.target).attr("orgsid"),n=p(e.target).parents(i.controls.divSubLevels).find(i.controls.ddlComplevel).val();if(t&&t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){var r={orgs_id:t,teams_id:0,id1:i.user_id,user_id:i.user_id,sports_id:p(e.target).attr("sportsid"),complevels_id:n,seasons_id:p(e.target).attr("seasonid"),year:p(e.target).attr("year")},s=new E(r);s.type="add",s.user_id=i.user_id,s.save(),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();if(t!=null&&t.payload!=null||t.payload.id!=null)p(e.target).attr("teamid",t.payload.team_id),p(e.target).parent().find(i.controls.btnOpenPositions).attr("teamid",t.payload.id).removeAttr("disabled")})}else{console.error("OrgsId & ComplevelIds are",t,n);var o=p(e.target).parents(i.controls.divLevels).find(i.controls.ddlComplevel);p(o).parent().find(i.controls.fieldError).html(i.messages.SelectLevel).stop().fadeIn(),p(e.target).parent().find(i.controls.btnOpenPositions).attr("disabled","disabled")}}else!p(e.target).is(":checked")&&p(e.target).attr("teamid")&&i.DeleteTeam(e)},DeleteTeam:function(e){var t=p(e.target).attr("teamid");if(t){var n={};n.user_id=i.user_id,n.team_id=t;var r=new E(n);r.user_id=i.user_id,r.team_id=t,r.type="delete",r.destroy({data:{user_id:i.user_id,teams_id:t},processData:!0,success:function(){p(e.target).removeAttr("teamid"),p(e.target).parent().find(i.controls.btnOpenPositions).removeAttr("teamid").removeAttr("positions").attr("disabled","disabled")}})}},FinishSports:function(){i.ClearAddNewForm(),i.init()},ClearAddNewForm:function(){i.RemoveSportsSection(),i.$(i.controls.txtStates).val(""),i.states_id=undefined,i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.orgs_id=undefined,i.$el.find(i.controls.divAddSportSection).fadeOut(),i.$el.find(".add-club-h").show()},EditTeam:function(e){console.log("self.teamsView.Teams",i.teamsView.Teams);var t=p(e.target).attr("orgsId"),n=p(e.target).attr("sportId"),r=p(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+t+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",p(r).html(s);var o=p(r).find(i.controls.divLevels);p.each(i.teamsView.Teams,function(e,s){console.log("team",s),t==s.payload.org_id&&p.each(s.payload.sports,function(e,s){console.log("sport",s);if(s.sports_id==n){i.SetUpEditTeamView(t,r,n,s);return}})})},SetUpEditTeamView:function(e,t,n,r){i.compLevel_id=undefined;if(e&&e>0){var s=new g;s.orgs_id=e,console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),p.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);p.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);p(u).val(s.complevels_id).attr("disabled","disabled"),p(o[n]).find(i.controls.divSeasons).fadeIn(),p.each(s.seasons,function(e,t){p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("teamid",t.team_id);var r="";t.positions&&p.each(t.positions,function(e,t){t&&(r+=t.id+",")}),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("positions",r)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},ClosePositions:function(e){if(i.clickedPositionTarget){var t=p(e.target).parents(i.controls.modalPosition).find(i.controls.modalPositionsTitle),n="";t.each(function(){p(this).hasClass("active")&&(n+=p(this).attr("positionid")+",")}),p(i.clickedPositionTarget).attr("positions",n),i.clickedPositionTarget=undefined}}});return s}),define("profilesetting/models/high_school",["user/models/basics"],function(e){var t;return t=e.extend({fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n);var r=new Date(t.get("payload").dob),i=new Date,s=i.getFullYear()-r.getFullYear();s>18?t.set("show_highschool",!1):t.set("show_highschool",!0)}}),t}),define("text!profilesetting/templates/individualsports.html",[],function(){return'<div class="sub-section-prof-setting">\r\n\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Individual Sports</span>\r\n	</div>\r\n	<span style="padding:10px 50px 10px 50px; font-weight: bold; font-size:.9em; display: block;">Individual sports are sports that you participate in without a team.&nbsp;&nbsp;An easy way to understand it is when you go to a Meet / Event and dominate, did YOU win, or did your TEAM win?  If you won, chances are you want to choose your sport below.\r\n		Another question you can ask, is "Can you compete in an event for this sport without a team?".<br/><br/>\r\n		There are gray areas like boxing gyms or MMA gyms where you belong to and compete for a gym, but it\'s you that wins the fight and it\'s two people competing, not two teams.&nbsp;&nbsp;We\'re working on building support for that, but now, use the individual sport section to add the sport to your profile.<br/><br/>\r\n	If you are dealing with a team sport, go to the sections above to select your team.&nbsp;&nbsp;There is a section for school-based teams and one for club-based teams.&nbsp;&nbsp;If you can\'t find it in the auto-complete search, you can add a new one.&nbsp;&nbsp;If you find this confusing, please don\'t hesitate to send an email to weare@athletez.com</span>\r\n	<div class="section-individual-sports">\r\n		<div class="org-sport-list">\r\n			<div class="org-sport-list-header">\r\n				<div class="org-name">Select The Sports you Participate in</div>\r\n			</div>\r\n			<div class="sports-list-individial-sports"></div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/sportscheckbox.html",[],function(){return'{{#sports}}\r\n<div>\r\n	<div class="org-sport-list-header">\r\n		<div class="sport-name">\r\n			<input type="checkbox" id="chk-ind-{{sport_id}}" class="chk-single" sportid="{{sport_id}}" />\r\n			<img src="{{icon}}" alt="{{sports_name}}" />\r\n			{{sports_name}}\r\n			<span class="alert alert-danger displayNone error_h"></span>\r\n			<span class="alert alert-success displayNone success_h"></span>\r\n		</div>\r\n	</div>\r\n</div>\r\n{{/sports}}'}),define("text!profilesetting/templates/sportitem.html",[],function(){return'<div class="span12">\r\n	Users Sports\r\n</div>\r\n{{#sports}}\r\n<div class="span12">\r\n<span class="span3">\r\n			<label>{{sport_name}}</label></span>\r\n			<span class="span3">\r\n				\r\n				<a href="javascript:void(0)" class="delete-individualsport" sportid="{{sport_id}}">Delete</a>\r\n				</span>\r\n</div>\r\n{{/sports}}'}),define("profilesetting/collections/individualsports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){if(testpath)return testpath+"/api/user/sports";if(this.type=="get")return"/api/user/sports/"+this.user_id+"?team_type=individual"},data:{sports_id:this.sports_id}}),i}),define("profilesetting/models/sport",["facade","sportorg/models/sport"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"user_id",url:function(){this.orgs_id==undefined;if(this.type=="save")return"/api/user/addsport/"+this.user_id;if(this.type=="delete")return"/api/user/sport/"+this.user_id}}),n}),define("profilesetting/views/individuals",["require","text!profilesetting/templates/individualsports.html","text!profilesetting/templates/sportscheckbox.html","text!profilesetting/templates/sportitem.html","facade","views","utils","vendor","profilesetting/collections/individualsports","sportorg/collections/sports_listall","profilesetting/models/sport"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/individualsports"),v=e("profilesetting/models/sport"),m=e("sportorg/collections/sports_listall"),s=a.extend({template:t,events:{"change .select-all":"CheckAll","change .chk-single":"CheckSingle","click .delete-individualsport":"DeleteSport"},controls:{content:"#section-individual-prof-setting",sportslist:".sports-list-individial-sports",btnSave:".btn-Save-Individual-Sports",chkAll:".select-all",chkSingle:".chk-single",userSportsList:".sports-list-user-individual-sports"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},init:function(){i.setupSportsView()},render:function(){a.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender,this.destination=e.destination},setUpUsersSports:function(){console.log("setUpSportsView Individual View");var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(r,{sports:i.sports});console.log("Users Own Sports",i.sports),i.$(i.controls.userSportsList).html(s)})},setUpUsersSportsCheck:function(){var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1),p.each(i.sports,function(e,t){i.$el.find("#chk-ind-"+t.sport_id).attr("checked","checked")})})},setupSportsView:function(){console.log("setUpSportsView Individual View");var e=new m;console.log(e),e.user_id=i.user_id,e.sport_type_id=2,i.gender=="male"?e.male=1:i.gender=="famale"&&(e.female=0),e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var r in t)i.sports.push(t[r].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(n,{sports:i.sports});i.$(i.controls.sportslist).html(s),i.setUpUsersSportsCheck()})},SaveSport:function(e){console.log("Save Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n=new v;n.user_id=i.user_id,n.sports_id=t,n.type="save",console.log("Save Model Request Abort Request Function"),i.sportsModelFetchRequest=i.abortRequest(i.sportsModelFetchRequest),i.compLevelFetchRequest=n.save({sports_id:t}),p.when(n.request).done(function(){var t=p(e.currentTarget).parent().find(".success_h");t.removeClass("displayNone").html("Sport Added Successfully."),setTimeout(function(){t.addClass("displayNone").html("")},3e3),i.setUpUsersSportsCheck()})}},DeleteSport:function(e){console.log("Delete Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n={user_id:i.user_id,sports_id:t},r=new v(n);r.user_id=i.user_id,r.type="delete",r.destroy({data:n,processData:!0,success:function(){var t=p(e.currentTarget).parent().find(".success_h");t.removeClass("displayNone").html("Sport Removed Successfully."),setTimeout(function(){t.addClass("displayNone").html("")},3e3),i.setUpUsersSportsCheck()}})}},CheckAll:function(e){p(e.target).is(":checked")?i.$(i.controls.chkSingle).attr("checked","checked"):i.$(i.controls.chkSingle).removeAttr("checked","checked")},CheckSingle:function(e){p(e.target).is(":checked")?i.SaveSport(e):i.DeleteSport(e)}});return s}),define("profilesetting",["require","text!profilesetting/templates/layout.html","facade","controller","models","views","utils","profilesetting/models/basic_info","profilesetting/views/basic_info","profilesetting/views/org","profilesetting/views/club","profilesetting/models/high_school","profilesetting/views/individuals"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("profilesetting/models/basic_info"),d=e("profilesetting/views/basic_info"),v=e("profilesetting/views/org"),m=e("profilesetting/views/club"),g=e("profilesetting/views/individuals"),y=e("profilesetting/models/high_school"),b=e("profilesetting/collections/individualsports");return n=i.extend({cssArr:["/pages/profilesetting/profilesettings.css"],initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),this.scheme=[],e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;return this.layout?this.layout:(e=new h({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout)},setupView:function(){var e=this;this.basicInfoModel=new p,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),a.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.addHighSchool(),e.SetUpClubView(),e.setUpIndividualView()})},setUpBasicView:function(){this.basicView=new d({id:self.id})},addHighSchool:function(){var e=this,t=new y;t.set("type","School"),this.schoolView=new v({model:t,name:"settings-high-school",destination:"#content-school-prof-setting",user_id:e.id,type:"school",gender:e.gender}),this.scheme.push(this.schoolView),this.layout.render()},setUpIndividualView:function(){var e=this;this.individualSportsView=new g({model:new b({user_id:e.id}),name:"settings-individual-sports",destination:"#section-individual-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.individualSportsView),this.layout.render()},SetUpClubView:function(){var e=this,t=new y;t.set("type","Club"),this.clubView=new v({model:t,name:"settings-club",type:"club",destination:"#content-club-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.clubView),this.layout.render()}}),n});