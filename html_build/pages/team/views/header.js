define(["require","text!team/templates/header.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","team/collections/complevels"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("team/models/basics"),a=o.SectionView,f=e("team/views/sport-list"),l=e("team/collections/sports"),c=e("usercontrol/dropdown/view/dropdown"),h=e("team/collections/seasonteams"),p=e("team/collections/complevels"),d=e("utils"),v=d.lib.Channel,m=e("vendor"),g=m.Mustache,y=s.$,b=s._;return r=a.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){this.controllerObject=e.controllerObject,a.prototype.initialize.call(this,e),b.bindAll(this)},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){var t=this;t.model.id!=e&&(t.model.id=e,t.model.fetch(),y.when(t.model.request).done(function(){t.render();var e=t.model.get("payload"),n=e.id,r=e.org_sport_link_obj.org.name;t.controllerObject.setupRosterView(n,r)}))},showAllTeamData:function(){routing.trigger("refresh-teampage",y("#sports-h").val(),y("#team-h").val(),this.season.id)},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=g.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),v("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},getName:function(){var e=this.model.get("payload").org_name;return this.model.get("payload").complevels_obj.complevel_name&&(e+=" | "+this.model.get("payload").complevels_obj.complevel_name),this.model.get("payload").org_sport_link_obj.sport.sport_name&&(e+=" | "+this.model.get("payload").org_sport_link_obj.sport.sport_name),this.model.get("payload").seasons_obj.season_name&&(e+=" | "+this.model.get("payload").seasons_obj.season_name),this.model.get("payload").year&&(e+=" | "+this.model.get("payload").year),e},childViews:{},render:function(e,t,n){document.title=this.getName(),a.prototype.render.call(this,e,t,n)}}),r});