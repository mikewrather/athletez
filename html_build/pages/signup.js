define(["require","text!signup/templates/layout.html","facade","controller","models","views","utils","signup/models/registerbasic","signup/models/registration-basics-final","signup/views/registerbasic","signup/views/registration-basics-final","signup/models/image-upload","signup/views/image-upload"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("signup/models/registerbasic"),f=e("signup/models/registration-basics-final"),l=e("signup/models/image-upload"),c=e("signup/views/registerbasic"),h=e("signup/views/registration-basics-final"),p=e("signup/views/image-upload"),d=o.LayoutView,v=r.$,m=r._,g=u.debug,y=u.lib.Channel,b=[base_url+"pages/signup/css/signupstyle.css",base_url+"css/style.jrac.css",base_url+"pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return y("load:css").publish(b),m.bindAll(this),this.handleOptions(e),this.init(),this},init:function(){ga("send","event","Signup","Open","User opened registration box"),this.refreshPage(),this.setupLayout(),this.createData(),this.handleDeferreds()},setupLayout:function(){return this.scheme=[],pageLayout=new d({scheme:this.scheme,destination:"#modalBody",template:t,displayWhen:"ready"}),this.layout=pageLayout,this.layout},createData:function(){this.select_type=new a},refreshPage:function(){this.selectTypeView&&(v(this.selectTypeView.destination).html(""),position=v.inArray(this.selectTypeView,this.scheme),~position&&this.scheme.splice(position,1))},showPopup:function(){v("#imgUploadModal").modal("show"),v("#imgUploadModal").on("hidden",function(){}),v("#imgUploadModal").on("hide",function(){})},handleDeferreds:function(){function t(t,n){e.initRegisterFinal({attr:t},n)}function n(t){e.uploadUserImage({attr:t})}var e=this;routing.off("register-basic"),routing.on("register-basic",function(t){e.setupSelectTypeView(t)}),routing.off("register-basic-final"),routing.on("register-basic-final",function(e,n){t(e,n)}),routing.off("upload-user-image"),routing.on("upload-user-image",function(e){n(e)})},initRegisterFinal:function(e,t){this.basic_type=new f,this.selectRegisterBasicFinalView=new h({model:this.basic_type,name:"Final registration",destination:"#modalBody",attr:e,callback:t}),this.layout.render()},uploadUserImage:function(e){this.basic_type=new l,this.selectRegisterBasicFinalView=new p({model:this.basic_type,name:"Final registration",destination:"#modalBody",attr:e}),this.layout.render();var t={};t.height="500px",t.width="500px",t.title="Register",routing.trigger("common-popup-open",t)},setupSelectTypeView:function(e){var t="modal-popup-signup",n="#"+t+" #modalBody",r={};r.height="500px",r.width="600px",r.title="Get Started on Athletez",r.id=t,routing.trigger("common-popup-open",r),this.selectTypeView=new c({model:this.select_type,name:"Select Registration Type",destination:n,showOnLanding:!0,callback:e})}}),n});