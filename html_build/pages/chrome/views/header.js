define(["vendor","views","text!chrome/templates/header.html","chrome/models/header","registration","login","signup","signup/views/shopopup","utils/storage","signup/views/facebooksignup"],function(e,t,n,r,i,s,o,u,a){var f,l=require("signup/views/facebooksignup"),c=t.BaseView,h=e.$,p=e._,d=e.Mustache;return f=c.extend({tagName:"header",className:"container-fluid clearfix",initialize:function(e){this.template=n},model:new r,events:{"click .signup-facebook":"signupFacebook","click .signup-email":"signupUser","click .account clearfix a":"login","click #userlogin":"userLogin","click #logoutId":"LogoutUser"},render:function(){var e=this;return this.model.fetchSuccess=this.model.fetchError=function(t,n){var r=d.to_html(e.template,t.toJSON());e.$el.html(r);if(typeof t.get("user_photo")=="object"&&typeof t.get("user_photo").types=="object")if(typeof t.get("user_photo").types.small_thumb=="object")var i=t.get("user_photo").types.small_thumb.url;else if(typeof t.get("user_photo").types.large_thumb=="object")var i=t.get("user_photo").types.large_thumb.url;else if(typeof t.get("user_photo").types.original=="object")var i=t.get("user_photo").types.original.url;else var i="";e.$(".photo img").attr("src",i);var s=t.get("authorized");if(s){var o=t.get("id");e.model.saveCookie(),routing.userLoggedIn=!0,routing.trigger("app-inited",o)}else routing.userLoggedIn=!1,routing.trigger("app-inited")},this.model.fetch(),this},userLogin:function(e){e.preventDefault(),this.logincontroller||(this.logincontroller=new LoginController),routing.trigger("Login")},signupFBTest:function(e){},signupFacebook:function(e){e.preventDefault(),headView=new l,headView.signupFacebook()},signupUser:function(e){e.preventDefault(),this.signupc=new o({route:""}),routing.trigger("register-basic"),this.pop=new u},LogoutUser:function(e){e.preventDefault(),this.logincontroller||(this.logincontroller=new LoginController),routing.trigger("Logout",this.model)}}),f});