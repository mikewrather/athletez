/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!game/templates/layout.html",[],function(){return'<div class="template-container">\r\n	<div id="main-header" class="profile-header"></div>\r\n	\r\n	<div class="green-left-heading">MESSAGE BOARD</div>\r\n	<div id="commenton-wrap" class="clearfix clear commentson-outer-box-h"></div>\r\n	<div id="comment_div" class="clearfix"></div>\r\n	\r\n	\r\n	<div class="green-left-heading">PHOTO/VIDEO</div>\r\n	<div class="row-fluid" id="main-content">\r\n	<!-- <div id="video-wrap" class="clearfix"></div> -->\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<div id="add-media" class="clearfix">add media</div>\r\n	</div>\r\n	\r\n	<div id="roster-wrap" class="clearfix clear"></div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="org-wrap" class="clearfix hide"></div>\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	\r\n	\r\n	\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        <div>MESSAGE BOARD</div>\r\n    	<div class="commentson-outer-box-h clear"></div>\r\n    	<div id="comment_div" class="clearfix"></div>\r\n        \r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n        \r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n       \r\n        \r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>\r\n'}),define("text!votes/templates/vote.html",[],function(){return'<a href="javascript:void(0);" class="team-action-h">Vote</a>\r\n<a href="javascript:void(0);" class="follow-action-h">Follow</a>'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("votes/models/vote",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/vote/add?subject_type_id="+this.entity_id+"&subject_id="+this.userId},setData:function(){this.set({subject_type_id:this.entity_id,subject_id:this.userId})}}),n}),define("votes/models/follow",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/ent/follow/"+this.entity_id+"/"+this.userId}}),n}),define("votes/views/vote",["require","text!votes/templates/vote.html","views","vendor","facade","utils","jqueryui","controller","votes/models/vote","votes/models/follow"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("votes/models/vote"),d=e("votes/models/follow");return n=o.extend({template:t,events:{"click .team-action-h":"vote","click .follow-action-h":"follow"},vote:function(){this.voteModelOb.save()},follow:function(){this.followModelOb.save(),h("new-fan").publish()},initialize:function(e){var t=this;console.log(e),a.bindAll(this),o.prototype.initialize.call(this,e);var n=this.model.get("payload");console.log(n),this.voteModelOb=new p,this.voteModelOb.userId=e.userId,this.voteModelOb.entity_id=n.enttypes_id,this.voteModelOb.setData(),this.followModelOb=new d,this.followModelOb.userId=e.userId,this.followModelOb.entity_id=n.enttypes_id},render:function(e,t,n){o.prototype.render.call(this,e,t,n)}}),n}),define("sportorg/models/game",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,game_name:null,game_day:null,game_time:null,game_picture:null,teams:[{team_name:null,team_location:null,points_scored:0,points_against:0,is_winner:null}],game_location:null},desc:"Game information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("game/models/basics",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/game/basics/"+this.id:"/api/game/basics/"+this.id}}),n}),define("game/models/addmedia",["models/base"],function(e){var t;return t=e.extend({defaults:{links:[{label:"Photo",link:"javascript:void(0);",id:"addPhoto"},{label:"Video",link:"javascript:void(0);",id:"addVideo"}]}}),t}),define("sportorg/models/teamroster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{team_id:0,team_name:null,rosters:[{name:null,user_picture:null,grad_year:0,sport_name:null,position:null}]},desc:"Team Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/teamrosters",["facade","collections","sportorg/models/teamroster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(!u.isUndefined(r)&&r!=null&&r){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}e.deferred.resolve(t)}}),s}),define("game/collections/teamrosters",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("media/models/video",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{video_id:0,video_title:null,video_quality:0,video_thumb:null,video_src:null,org_name:null,teams:[{complevel:null,season:null,grad_year:0,team_name:null,schedule:{schedule_date:null,other_team:null,schedule_summary:null}}],games:[{team1_name:null,team2_name:null}],video_desc:null,user_name:null,post_date:null,tags_count:0,tags:[],num_votes:0,num_views:0,num_comments:0,social_links:[{"class":null,title:null,link:null}]},desc:"Video information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("media/collections/videos",["facade","collections","media/models/video","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("game/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/videos/"+this.id:"/api/game/videos/"+this.id}}),r}),define("media/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),t!=undefined?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},selectImageType:function(e){return r.each(this.get("payload").types,function(t,n){n==e&&(this.get("payload").image_path=t.url)},this),this}}),n}),define("media/collections/images",["facade","collections","media/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.processItemFromPayload(t,i),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("game/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/images/"+this.id:"/api/game/images/"+this.id}}),r}),define("site/models/comment",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("site/collections/comments",["facade","collections","site/models/comment","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("game/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("game/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("text!game/templates/header.html",[],function(){return'{{#payload}}\r\n<div class="row-fluid">\r\n\r\n	<div class="game-heading">\r\n		<!--div class="sports-h"></div-->\r\n		<div class="game-general">\r\n			<div class="stretch"></div>\r\n			{{#shared.sport}}<span class="sport-h" data-id="{{sports_id}}">{{shared.sport}}</span>{{/shared.sport}}\r\n			{{#shared.complevel}}<span>{{shared.complevel}}</span>{{/shared.complevel}}\r\n			{{#shared.season}}<span>{{shared.season}}</span>{{/shared.season}}\r\n		</div>\r\n\r\n		<h3>{{game_day}} {{gameTime}}</h3>\r\n		<p>\r\n			{{game_location}}\r\n		</p>\r\n		<a href="javascript: void(0);" class="common-btn game-edit-btn-h common-default-sky-dark pull-right">Edit Game</a>\r\n	</div>\r\n\r\n	{{#game_picture}}\r\n	<a href="javascript: void(0);" class="header-image-container image-outer-h">\r\n	<div class="image-item-container">\r\n		<img src="{{game_picture.types.standard_thumb.url}}" alt="{{game_name}}" />\r\n		<div class="action-section">\r\n			{{#game_picture.is_owner}}\r\n			<div class="action-block left-block edit object-edit-h" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>E</span>\r\n			</div>\r\n			<div class="action-block right-block delete object-delete-h" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>D</span>\r\n			</div>\r\n			{{/game_picture.is_owner}}\r\n			{{^game_picture.is_owner}}\r\n			<div class="action-block left-block vote" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>V</span>\r\n			</div>\r\n			<div class="action-block right-block follow" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>F</span>\r\n			</div>\r\n			{{/game_picture.is_owner}}\r\n		</div>\r\n\r\n	</div> </a>\r\n	{{/game_picture}}\r\n\r\n	<ul class="teams-list">\r\n		{{#teams}}\r\n		<li class="team-item">\r\n			<div class=\'score-box score-box-h {{#isWinner}}win{{/isWinner}}\'>\r\n				<a href="javascript: void(0);" title="edit score" class="edit-score-h"> <span>{{points_scored}}</span> </a>\r\n				<input type="hidden" value="{{points_scored}}" data-id="{{games_teams_link_id}}" class="edit-score-input-h input-mini" />\r\n			</div>\r\n			<div class="org-info">\r\n				<span class="org-name"> {{org_sport_link_obj.org.org_name}}, {{complevels_obj.complevel_name}}, {{seasons_obj.season_name}} {{year}} </span>\r\n				<span class="org-location"> {{team_location}} </span>\r\n			</div>\r\n		</li>\r\n		{{/teams}}\r\n	</ul>\r\n	<div id="votes-area-h"></div>\r\n</div>\r\n\r\n<div id="modalPopupGameEdit" class="modal photo-frame-model hide fade">\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\r\n			&times;\r\n		</button>\r\n	</div>\r\n	<div class="modal-body page-content-h">\r\n		<form action="#" class="update-date-time-h" name="update-date-time">\r\n			<label>Date &amp; Time</label>\r\n			<input type="text" class="date-time-h" value="{{gameDay}} {{gameTime}}" readonly="readonly" />\r\n			<label>Location</label>\r\n			\r\n			<textarea placeholder="Address" class="location-h address-h" rows="3" cols="25">{{game_location}}</textarea>\r\n			<a href="javascript: void(0);" title="Verify Address" class="verify-address-h">Verify Address</a>\r\n			<span class="address-error hide address-error-status-h"></span>\r\n			<div class="view-map-h"></div>\r\n			<input type="submit" class="common-btn common-btn-validation" name="submit_edit-form" value="Update" />		\r\n		</form>\r\n	</div>\r\n</div>\r\n{{/payload}}\r\n'}),define("game/models/score",["models/base"],function(e){return e.extend({url:function(){return testpath?testpath+"/game/score/":"/api/game/score/"+this.gameId+"/?games_teams_link_id="+this.teams_id+"&score="+this.score}})}),define("text!usercontrols/location/templates/layout.html",[],function(){return'<div>\r\n	Location: <textarea placeholder="Address" class="location-h address-h" rows="3" cols="25"></textarea>\r\n	<span class="address-error hide address-error-status-h"></span>\r\n	<a href="javascript: void(0);" class="common-btn common-btn-validation verify-address-h">Verify Address</a>\r\n	<a href="javascript: void(0);" class="common-btn common-btn-direction link-disabled set-address-h">Set Address</a>\r\n	 <div id="map-canvas" style="width: 90%; height: 300px; margin-top: 40px;"></div>\r\n</div>'}),define("usercontrols/location/models/verify-adress",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/location/add?address="+this.address:"/api/location/add?address="+this.address}})}),define("usercontrols/location/models/save",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/game/basics/"+this.id:"/api/game/basics/"+this.id}})}),define("usercontrols/location/views/location",["require","text!usercontrols/location/templates/layout.html","facade","views","utils","vendor","usercontrols/location/models/verify-adress","usercontrols/location/models/save"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=e("usercontrols/location/models/verify-adress"),l=e("usercontrols/location/models/save"),c=a.Mustache,h=r.$,p=i.BaseView,d=r.Backbone,v;return d.View.extend({template:t,events:{"click .verify-address-h":"verifyAddress","click .set-address-h":"setLocation"},initialize:function(e){v=this,v.game_id=e.game_id||undefined,v.location=e,v.selectedOptions=[],v.setOptions(e),v.render()},setLocation:function(e){var t=confirm("Are you sure want to set new address?");if(t&&this.locationId){var n=new l;n.id=this.game_id,n.set({locations_id:this.locationId,id:this.game_id}),n.save(),h.when(n.request).done(function(){routing.trigger("popup-close")})}},verifyAddress:function(){var e=this,t=e.$el.find(".address-h").val();e.adressModel=new f,e.adressModel.address=t,e.adressModel.url(),e.adressModel.set({address:t}),e.adressModel.showError=function(t,n){try{e.$el.find(".set-address-h").addClass("link-disabled"),e.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}e.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},e.adressModel.save({dataType:"json"}),e.$el.find(".address-h").removeClass("address-verified"),h.when(e.adressModel.request).done(function(){console.log(e.adressModel.toJSON()),e.locationId=e.adressModel.get("payload").id;if(e.locationId){e.$el.find(".address-error-status-h").addClass("hide"),e.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),e.location.latitude=e.adressModel.get("payload").lat,e.location.latitude=e.adressModel.get("payload").lon,e.$el.find(".set-address-h").removeClass("link-disabled");var t=new google.maps.LatLng(e.adressModel.get("payload").lat,e.adressModel.get("payload").lon);e.marker.setPosition(t),e.map.panTo(t)}})},intializeMap:function(){console.log(v.location);var e=new google.maps.LatLng(v.location.latitude,v.location.longitude),t={zoom:8,center:e,scaleControl:!0,zoomControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.$el.find("#map-canvas")[0],t),this.marker=new google.maps.Marker({position:e,map:this.map}),this.marker.setMap(this.map)},render:function(){var e=this,t=c.to_html(e.template,{location:e.locaion});return h(e.el).html(t),setTimeout(function(){e.intializeMap()},1e3),this},setOptions:function(e){for(var t in e)this[t]=e[t]}})}),define("game/views/header",["require","text!game/templates/header.html","facade","views","game/models/score","game/models/basics","votes/models/vote","votes/models/follow","usercontrols/location/views/location","usercontrols/location/models/verify-adress","usercontrols/location/models/save"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("game/models/score"),o=e("game/models/basics"),u=e("votes/models/vote"),a=e("votes/models/follow"),f=e("usercontrols/location/views/location"),l=e("usercontrols/location/models/verify-adress"),c=e("usercontrols/location/models/save"),h=i.SectionView;return n=h.extend({id:"main-header",template:t,events:{"click .edit-score-h":"editScore","blur .edit-score-input-h":"resumeEditScore","click .vote":"vote","click .follow":"follow","click .object-edit-h":"editObject","click .object-delete-h":"deleteObject","submit .update-date-time-h":"updateDateTime","click .game-edit-btn-h":"openEditPopup","click .verify-address-h":"verifyAddress","blur .address-h":"verifyAddress"},location:{lat:undefined,lon:undefined},initialize:function(e){h.prototype.initialize.call(this,e);var t=this.model.get("payload"),n;t.teams.length?(n=t.teams[0].org_name+" VS "+t.teams[1].org_name,n+=" "+t.shared.complevel):n=t.event_name,n+=" | "+t.shared.sport+" | "+t.game_day,document.title=n},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},openEditPopup:function(){if(!this.checkForUser()){$(".signup-email").trigger("click");return}$("#modalPopupGameEdit").modal(),this.location.lon=this.model.get("payload").location.lon,this.location.lat=this.model.get("payload").location.lat,this.showLocation()},showLocation:function(){routing.trigger("show_location",this.location.lat,this.location.lon,".view-map-h",function(){})},setLocation:function(e){var t=confirm("Are you sure want to set new address?");if(t&&this.locationId){var n=new c;n.id=this.game_id,n.set({locations_id:this.locationId,id:this.game_id}),n.save(),$.when(n.request).done(function(){routing.trigger("popup-close")})}},verifyAddress:function(){var e=this,t=e.$el.find(".address-h").val();e.adressModel=new l,e.adressModel.address=t,e.adressModel.url(),e.adressModel.set({address:t}),e.adressModel.showError=function(t,n){try{e.$el.find(".set-address-h").addClass("link-disabled"),e.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}e.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},e.adressModel.save({dataType:"json"}),e.$el.find(".address-h").removeClass("address-verified"),$.when(e.adressModel.request).done(function(){console.log(e.adressModel.toJSON()),e.locationId=e.adressModel.get("payload").id,e.locationId&&(e.$el.find(".address-error-status-h").addClass("hide"),e.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),e.location.lon=e.adressModel.get("payload").lon,e.location.lat=e.adressModel.get("payload").lat,e.showLocation(),e.$el.find(".set-address-h").removeClass("link-disabled"))})},editObject:function(){alert("Coming soon")},deleteObject:function(){alert("Coming soon")},gameEditBtn:function(){this.$el.find(".update-date-time-h").removeClass("hide")},updateDateTime:function(e){e.preventDefault();var t=this,n=this.$el.find(".date-time-h").val(),r=new c;r.id=this.model.id,r.set({game_datetime:n,locations_id:this.locationId,id:this.model.id}),r.save(),$.when(r.request).done(function(){t.updateHeaderData(r.id)})},updateHeaderData:function(e){var t=this;t.model.id=e,t.model.fetch(),$.when(t.model.request).done(function(){console.error(t.model.toJSON()),$("#modalPopupGameEdit").modal("hide"),t.render()})},cancelDateTimeBtn:function(){this.$el.find(".update-date-time-h").addClass("hide")},afterRender:function(){this.$el.find(".image-outer-h").mouseover(function(){$(this).find(".action-block").css({opacity:90})}).mouseout(function(){$(this).find(".action-block").css({opacity:0})}),this.$el.find(".date-time-h").datetimepicker({timeFormat:"hh:mm:ss",dateFormat:"yy-mm-dd",showTimezone:!0,changeMonth:!0,changeYear:!0})},vote:function(e){e.preventDefault(),console.log(this.model);var t=new u;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save()},follow:function(e){e.preventDefault(),console.log(e.target);var t=new a;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.save()},editScore:function(e){$(e.currentTarget).hide(),$(e.currentTarget).parents(".score-box-h").find(".edit-score-input-h").attr("type","text").focus()},resumeEditScore:function(e){var t=new s;t.teams_id=$(e.currentTarget).data("id"),t.score=$(e.target).val(),t.gameId=this.model.id,t.set({id:$(e.target).data("id"),games_teams_link_id:$(e.target).data("id"),score:$(e.target).val()}),t.save(),this.$el.find(".edit-score-input-h").attr("type","hidden"),this.$el.find(".edit-score-h").show(),$.when(t.request).done(function(){$(e.currentTarget).parents(".score-box-h").find(".edit-score-h span").html(t.get("score"))})},childViews:{},render:function(e,t,n){h.prototype.render.call(this,e,t,n)}}),n}),define("text!media/templates/add-media.html",[],function(){return'{{#links}}<a href="{{link}}" title="{{label}}" id="{{id}}">{{label}}</a>{{/links}}\r\n'}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("game/views/add-media",["require","text!media/templates/add-media.html","game/models/addmedia","facade","views","sportorg/models/team"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("sportorg/models/team"),u=r._;return GameAddMediaView=s.extend({id:"add-media",template:t,events:{"click #addPhoto":"openAddImagePopup"},game_model:{},initialize:function(e){s.prototype.initialize.call(this,e)},setOptions:function(e){if(!this.model)throw new Error("AddMediaView expects option with model property.")},childViews:{},render:function(e,t,n){s.prototype.render.call(this,e,t,n)},openAddImagePopup:function(e){var t=new o({id:this.game_model.attributes.payload.teams[0].id});t.fetch();var n=this;$.when(t.request).done(function(){var e="/api/game/addimage/"+n.game_model.attributes.id,r={sports_id:t.attributes.payload.org_sport_link_obj.sports_id};routing.trigger("add-image",e,r)})}}),GameAddMediaView}),define("text!site/templates/comment-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid" data-id="bbbbbbbb">\r\n    <div class="user-photo">\r\n    	<a href="#profile/{{user.id}}" title="{{user.name}}">\r\n    		<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n    	</a>\r\n    </div>\r\n    \r\n    <div>\r\n	    <div class="bubble">  \r\n		<div class="pointer"></div>\r\n	        <div class="content">\r\n	        	\r\n	        	<span class="comment-date"><a href="#profile/{{user.id}}" title="{{user.name}}">{{user.name}}</a>  {{poster}} {{comment_date}}</span>\r\n	        	<p class="comment-text">{{comment}}</p>\r\n	        </div>\r\n	    </div>\r\n	</div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("site/views/comment-item",["vendor","views","utils","text!site/templates/comment-item.html"],function(e,t,n,r){var i,s=t.BaseView,o=e.Mustache;return i=s.extend({tagName:"li",className:"comment",initialize:function(e){e.template?this.template=e.template:this.template=r},render:function(){var e=o.to_html(this.template,this.model.toJSON());this.$el.html(e),console.log("--------render------------");var t=this.model.get("payload");console.log("profile payload = ",t);var n=this;if(t)try{var r=t.user.user_picture_obj.types.small_thumb.url;n.$(".user-photo img").attr("src",r)}catch(i){console.log(i)}return this}}),i}),define("text!site/templates/comment-form.html",[],function(){return'<a href="javascript: void(0);" class="add-comment-h">Comment</a>\r\n{{#payload}}\r\n\r\n<form class="add-comment-form-h hide" method="post" action="#">\r\n<div class="row-fluid">\r\n    <div class="field-message submit-result"></div>\r\n    <textarea style="width:85%;-webkit-border-radius: 15px; border-radius: 15px; height: 65px;" id="new-comment" placeholder="{{comment_placeholder}}" ></textarea>\r\n    <br/><input type="button" id="comment-submit" value="Submit"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("site/views/comment-form",["require","text!site/templates/comment-form.html","facade","views","site/models/comment"],function(e){var t,n=e("text!site/templates/comment-form.html"),r=e("facade"),i=e("views"),s=e("site/models/comment"),o=i.BaseView;return t=o.extend({tagName:"li",template:n,events:{"click #comment-submit":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");!this.model},render:function(){console.log("RENDER CALLED!!!!"),o.prototype.render.call(this),this.input=this.$("#new-comment");var e=this.model.get("payload");console.log("return payloady",e);var t=this;if(e)var n=e.user_picture,r=e.email;return this},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();t!=""&&this.input.val("")}}),t}),define("text!site/templates/comment-list.html",[],function(){return'<div class="comment-outer-h">\r\n<ul id="comment-list"></ul>\r\n</div>\r\n<div class="clear">\r\n	<a href="javascript: void(0);" class="see-more-h">See More</a>\r\n</div>'}),define("site/views/comment-list",["facade","views","utils","site/views/comment-item","site/views/comment-form","text!site/templates/comment-list.html"],function(e,t,n,r,i,s){var o,u,a=n.lib.Channel,f=require("vendor"),l=t.CollectionView,c=t.SectionView,h=f.Mustache;return u=l.extend(c.prototype),o=u.extend({__super__:l.prototype,listView:"#comment-list",_tagName:"li",_className:"comment",page:1,page_limit:5,prepend:!1,_view:r,template:s,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=h.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate();var t=this;this.collection=e.collection,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.seeMore(),l.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");_.bindAll(this),this.addSubscribers(),this.setupFormView(),console.log(this.collection.toJSON())},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupFormView:function(){function r(n){t.model=n,t.render(),$(e.listView).prepend(t.el)}var e=this,t=new i({collection:this.collection}),n=this.addChildView(t);console.log("Form:",t),this.childViews.form=t,this.callbacks.add(function(){n()}),a("commentform:fetch").subscribe(r)}}),o}),define("profile/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("profile/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){console.error(e),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:"#comment_div",template:t,events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},submitHandler:function(e){e.preventDefault();if(!this.checkForUser()){$(".signup-email").trigger("click");return}this.createOnEnter(e)},showCommentBox:function(e){var t=this.$el.find(".add-comment-form-h");t.hasClass("hide")?($(e.target).html("Hide"),t.removeClass("hide")):($(e.target).html("Comment"),t.addClass("hide"))},refreshComments:function(e){this.$("#new-comment").val("")},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.on("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("game/views/commenton-list",["facade","utils","site/views/comment-list","profile/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({name:"games comments on view",initialize:function(e){o.bindAll(this),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){alert("refresh"),s(e)})}}),s}),define("text!sportorg/templates/teamroster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n        <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n        {{name}} \'{{grad_year}}<br/>\r\n        {{sport_name}}<br/>\r\n        {{position}}<br/>\r\n        {{team_name}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/teamroster-item",["vendor","views","utils","text!sportorg/templates/teamroster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"teamroster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/teamroster-list",["facade","views","utils","sportorg/views/teamroster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"teamroster-list",name:"Team Roster List",tagName:"ul",_tagName:"li",_className:"teamroster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("TeamRosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!media/templates/video-item.html",[],function(){return'<input type="hidden" class="id" value="{{id}}"/>\r\n{{#payload}}    \r\n    <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n<div class="row-fluid" style="display:none;">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        {{video_title}}<br/>\r\n        Teams: \r\n        {{#teams}}\r\n            {{.}}&nbsp;\r\n        {{/teams}}\r\n        <br/>\r\n        Games: \r\n        {{#games}}\r\n            {{.}}&nbsp; \r\n        {{/games}}\r\n        <br/>\r\n        Posted by {{user_name}}, {{post_date}}<br/>\r\n        {{num_votes}} Votes, {{num_views}} Views, {{num_comments}} Comments<br/>\r\n        <p>{{video_desc}}</p>\r\n        {{#tags_count}}\r\n            {{tags_count}} Tagged<br/>\r\n            {{#tags}}\r\n                <img src="{{base_url}}{{.}}"/>\r\n            {{/tags}}\r\n        {{/tags_count}}\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-item",["vendor","views","utils","text!media/templates/video-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"video",events:{click:"changeVideo"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeVideo:function(){Channel("changevideo"+this.model.collection.id).publish(this.model)}}),i}),define("text!media/templates/video-player.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{video_src}}" alt="{{video_title}}"/></div>\r\n    <h3>{{video_title}}</h3>\r\n    {{#games}} \r\n        {{team1_name}} vs {{team2_name}}\r\n    {{/games}}    \r\n    Votes: {{num_votes}}, Views: {{num_views}}, Comments: {{num_comments}}<br/>\r\n    <br>\r\n\r\n		{{#video_type}}\r\n				{{video_type_name}}\r\n				{{meta_details.url}}\r\n				<br>\r\n		{{/video_type}}\r\n    <div class="social-links">\r\n    {{#social_links}}\r\n        <a class="{{class}}" href="{{link}}" title="{{title}}">{{title}}</a>\r\n    {{/social_links}}\r\n    </div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-player",["require","text!media/templates/video-player.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"video-player",template:t,setOptions:function(e){if(!this.model)throw new Error("VideoPlayerView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-video.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Video Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addvideo" value="Add Video"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-video",["require","text!media/templates/add-video.html","facade","views","media/models/video"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/video"),o=i.BaseView,u=r._;return n=o.extend({tagName:"li",template:t,events:{"click #addvideo":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddVideoView expected options.collection.");this.model||(this.model=new s({id:this.collection.id}),this.model.fetch())},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){alert("AddVideoView"),e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.video_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("media/views/video-list",["facade","views","utils","media/views/video-item","media/views/video-player","media/views/add-video"],function(e,t,n,r,i,s){var o,u,a=e.$,f=e._,l=n.lib.Channel,c=t.CollectionView,h=t.SectionView;return u=c.extend(h.prototype),o=u.extend({__super__:c.prototype,id:"video-list",name:"Video List",tagName:"ul",_tagName:"li",_className:"video",_view:r,initialize:function(e){c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("VideoListView expected options.collection.");f.bindAll(this),this.addSubscribers(),this.setupPlayerView(),this.setupAddView()},childViews:{},setupAddView:function(){function r(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addvideo:fetch").subscribe(r)},setupPlayerView:function(){function r(e){t.model=e,t.render()}if(this.collection.size()==0)return;var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.player=t,this.callbacks.add(function(){n(),t.render(),e.$el.prepend(t.el)}),l("changevideo"+this.collection.id).subscribe(r)}}),o}),define("game/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/addvideo/"+this.id:"/api/game/addvideo?game_id="+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gameaddvideo:fetch").publish(e)}}),r}),define("game/views/add-video",["require","game/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/video-list",["facade","utils","media/views/video-list","game/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gameaddvideo:fetch").subscribe(i)}}),i}),define("text!media/templates/image-item.html",[],function(){return'<a href="{{_link}}" data-index="{{index}}" class="image-outer-h {{^_has_link}}open-photo-player-h{{/_has_link}}">\r\n	<div class="image-item-container">\r\n	<img class="list-thumbnail" src="{{_thumbnail}}" alt=""/>\r\n		<div class="action-section">\r\n			{{#show_edit}}\r\n				<div class="action-block left-block edit edit-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>E</span></div>\r\n				<div class="action-block right-block delete delete-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>D</span></div>\r\n			{{/show_edit}}\r\n			{{^show_edit}}\r\n				<div class="action-block left-block vote vote-h {{#_has_voted}} link-disabled {{/_has_voted}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}">\r\n					<span>V</span>\r\n				</div>\r\n				{{#_can_follow}}\r\n				<div class="action-block right-block follow follow-h {{#_is_following}} link-disabled {{/_is_following}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>F</span></div>\r\n				{{/_can_follow}}\r\n			{{/show_edit}}\r\n		</div>\r\n		<div class="detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n			<h6>{{_label}}</h6>\r\n			<span>{{& _sublabel}}</span>\r\n		</div>\r\n	</div>\r\n</a>'}),define("media/views/image-item",["vendor","views","utils","text!media/templates/image-item.html","votes/models/vote","votes/models/follow","utils/storage"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=require("votes/models/vote"),f=require("utils/storage"),l=require("votes/models/follow");return i=o.extend({tagName:"li",className:"image",events:{"click .vote-h":"vote","click .follow-h":"follow","click .edit-h":"edit","click .delete-h":"delete"},initialize:function(e){this.template=r},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},render:function(){function b(e){console.log(s(this),e)}var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id,_has_voted:t.has_voted,_is_following:t.is_following,_can_follow:t.can_follow},r=!1,i=null,o=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},a=!1;switch(t.enttypes_id){case"23":typeof t.standard_thumb=="object"?(i=t.standard_thumb,n._thumbnail=i.url):n._thumbnail=t.thumbs,a=!0,n._label=t.media.name,n._link="javascript: void(0);",n._has_link=!1,t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"&&(typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url)),n._label=_.isUndefined(t.media_obj.users_obj.label)?"":t.media_obj.users_obj.label,typeof t.media_obj.sports_obj=="object"&&(n._sublabel=o(t.media_obj.sports_obj.sport_name)),n._link="javascript: void(0);",n._has_link=!1,t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.user_picture_obj=="object"&&typeof t.user_picture_obj.types=="object"&&(typeof t.user_picture_obj.types.standard_thumb=="object"?(i=t.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.large_thumb=="object"?(i=t.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.original=="object"&&(i=t.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.label,n._sublabel="Votes: "+t.num_votes+", Followers: "+t.num_followers,n._link="/#profile/"+t.id,n._has_link=!0,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.game_picture!==null?t.game_picture.types.standard_thumb:{height:440,width:440,url:"http://cdn.athletez.com/resources/icons/game/square_game.png"},n._thumbnail=i.url,n._label=t.game_day,n._link="/#game/"+t.id,n._has_link=!0;var f="",l=t.teams;if(l!=null)var c=l.length;for(var h=0;h<c;h++)f+="<span>",f+=o(t.teams[h].team_name),f+="</span>",h+1<t.teams.length&&(f+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._sublabel=f}n.show_edit=r==1?!0:undefined;var p=u.to_html(this.template,n);this.$el.html(p);var d="120px",v="92px";this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+v}),s(this).find(".detail-view.game").css({bottom:"-"+d})});if(i!="undefined"&&i!=null){var m=i.width/220,g=i.height/220;i.width=parseInt(i.width),i.height=parseInt(i.height);var y=i.width>i.height?-(i.width/g-220)/2:-(i.height/m-220)/2;y>0&&(y=0),i.width>i.height?this.$el.find("img.list-thumbnail").css({"max-width":i.width/g,left:y}):this.$el.find("img.list-thumbnail").css({"max-height":i.height/m,top:y})}return a&&this.$el.append('<div class="circle open-photo-player-h"><div class="play"></div></div>'),this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this.$el.find(".circle").mouseover(function(){s(this).parent().find(".detail-view").css({bottom:"0px"}),s(this).parent().find(".action-block").css({opacity:90})}),this.$el.find(".vote-h").click(function(t){e.vote(t)}),this.$el.find(".follow-h").click(function(t){e.follow(t)}),this.$el.find(".edit-h").click(function(t){e.edit(t)}),this.$el.find(".delete-h").click(function(t){e["delete"](t)}),this},vote:function(e){e.preventDefault(),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new a;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save(),s.when(t.request).done(function(){s(e.currentTarget).addClass("link-disabled")})},follow:function(e){e.preventDefault(),console.log(e.target),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new l;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.save(),s.when(t.request).done(function(){typeof t.get("payload").follower=="object"&&typeof t.get("payload").subject=="object"&&t.get("payload").id>0?s(e.currentTarget).addClass("link-disabled"):console.log("FAIL")})},edit:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=this.model.get("payload");switch(n.enttypes_id){case"23":break;case"21":break;case"1":window.location.hash="profile/"+n.id;break;case"8":window.location.hash="game/"+n.id}console.log(this.model)},"delete":function(e){e.stopPropagation(),e.preventDefault(),console.log("delete")}}),i}),define("text!media/templates/image-board.html",[],function(){return'<!--{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{image_path}}" alt="{{image_title}}"/></div>\r\n    {{#image_title}}<h3>{{image_title}}</h3>{{/image_title}}\r\n    {{#num_votes}}Votes: {{num_votes}} <br/>{{/num_votes}}\r\n{{/payload}}-->'}),define("media/views/image-board",["require","text!media/templates/image-board.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-image.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Image Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addimage" value="Add Image"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-image",["require","text!media/templates/add-image.html","facade","views","media/models/image"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/image"),o=i.BaseView;return n=o.extend({tagName:"li",template:t,events:{"click #addimage":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");!this.model},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.image_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("text!media/templates/image-list.html",[],function(){return'<ul class="image-list">\r\n</ul>\r\n<!--{{#target}}\r\n<div class="image-drop-area-outer">\r\n	<div class="image-drop-area" id="image-place-holder">\r\n		<div class="drop-text">DROP PHOTOS HERE</div>\r\n		<div>OR CLICK TO UPLOAD</div>\r\n		\r\n	</div>\r\n</div>\r\n{{/target}}-->\r\n<div class="clear"><a href="javascript: void(0);" class="see-more-h">More</a></div>\r\n'}),define("media/views/image-list",["facade","views","utils","media/views/image-item","media/views/image-board","media/views/add-image","text!media/templates/image-list.html"],function(e,t,n,r,i,s,o){var u,a,f=e.$,l=e._,c=require("vendor"),h=n.lib.Channel,p=t.CollectionView,d=t.SectionView,v=c.Mustache;return a=p.extend(d.prototype),u=a.extend({__super__:p.prototype,template:o,_tagName:"li",_className:"image",page:0,page_limit:8,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore","click .open-photo-player-h":"initPhotoPlayer","dragover #image-place-holder":"drag","drop #image-place-holder":"drop"},renderTemplate:function(){var e=v.to_html(this.template,{target:this.target_id});return this.$el.html(e),this},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault();var n=e.originalEvent.dataTransfer.files;this.files_drag=e.originalEvent.dataTransfer.files;var r=[],i=[],s=0;for(var o=0,u;u=n[o];o++){if(!u.type.match("image.*"))continue;var a=new FileReader;a.onload=function(e){return function(r){var o="preview_"+s;s++,i.push({preview_id:o,drag_info:t.files_drag,width:"150",height:"150",filesrc:r.target.result,title:escape(e.name)}),s==n.length&&(data={data:i},t.openImageUploader(data))}}(u),a.readAsDataURL(u)}},openImageUploader:function(e){console.error(this.collection);var t=this.sport_id,n=this.target_url+this.target_id,r={sports_id:t},i=e;routing.trigger("add-image",n,r,i)},initialize:function(e){e.name?this.name=e.name:this.name="image list",e.collecton&&(this.collection=e.collection),this.target_id=e.target_id,this.target_url=e.target_url,this.sport_id=e.sport_id,this.renderTemplate();var t=this;t.allData=this.collection.toArray(),t.seeMore(),p.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");l.bindAll(this),this.addSubscribers(),this.setupBoardView(),this.setupAddView()},initPhotoPlayer:function(e){var t=f(e.target).parents("li").index();t<0&&(t=0),routing.trigger("photo-player-init",t,this.allData,this.collection.id,!0)},seeMore:function(e){var t=this.allData.length,n=this.page*this.page_limit,r=n+this.page_limit;t<=r&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(n,r)):this.collection.reset(this.allData.slice(n,r)),this.page++,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupAddView:function(){function r(e){t.model=e,t.render(),f(this.listView).append(t.el)}var e,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),h("addimage:fetch").subscribe(r)},filterWithImageType:function(e){var t=this.collection;return f.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t},setupBoardView:function(){function s(e){n.model=e,n.render()}if(this.collection.size()==0)return;var e=this.filterWithImageType(this.imagetype),t,n=new i({collection:e,model:e.at(0)}),r=this.addChildView(n);this.childViews.board=n,this.callbacks.add(function(){r(),n.render(),f(this.listView).prepend(n.el)}),h("changeimage"+this.collection.id).subscribe(s)}}),u}),define("profile/views/image-video-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",name:"Image List",setupAddView:function(){}}),r}),define("game/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({defaults:{payload:{}},url:function(){return testpath?testpath+"/game/commentform/"+this.id:"/api/game/commentform/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gamecommentform:fetch").publish(e)}}),r}),define("game/views/comment-form",["require","game/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameCommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/comment-list",["facade","utils","site/views/comment-list","game/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gamecommentform:fetch").subscribe(i)}}),i}),define("text!roster/templates/roster.html",[],function(){return'<div class="green-left-heading heading-h"></div>\r\n<div  class="clearfix clear roster-images-h"></div>'}),define("roster/models/roster",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({}),n}),define("roster/collections/roster",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("roster/views/image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",tagName:"ul",setupAddView:function(){}}),r}),define("roster/views/roster",["require","text!roster/templates/roster.html","views","vendor","facade","utils","jqueryui","controller","roster/models/roster","roster/collections/roster","roster/views/image-list"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("roster/models/roster"),d=e("roster/views/image-list"),v=e("roster/collections/roster");return n=o.extend({template:t,events:{},initialize:function(e){var t=this;o.prototype.initialize.call(this,e),t.team_id=e.team_id,t.team_name=e.team_name,t.viewName=e.viewName||"Image List"+Math.random(),a.bindAll(this),t.team_id&&(t.collection1=new v,t.collection1.id=t.team_id,t.collection1.fetch(),u.when(t.collection1.request).done(function(){t.setupTeamRosterListView()}))},setupTeamRosterListView:function(){var e;e=new d({collection:this.collection1,name:this.viewName,model:new p}),this.$el.find(".roster-images-h").html(e.$el)},render:function(e,t,n){o.prototype.render.call(this,e,t,n),this.$el.find(".heading-h").html(this.team_name)}}),n}),define("game",["require","text!game/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","game/models/basics","game/models/addmedia","game/collections/teamrosters","game/collections/videos","game/collections/images","game/collections/comments","game/collections/commentson","game/views/header","game/views/add-media","game/views/commenton-list","sportorg/views/teamroster-list","game/views/video-list","profile/views/image-video-list","game/views/comment-list","game/views/commenton-list","roster/views/roster"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("game/models/basics"),l=e("game/models/addmedia"),c=e("game/collections/teamrosters"),h=e("game/collections/videos"),p=e("game/collections/images"),d=e("game/collections/comments"),v=e("game/collections/commentson"),m=e("game/views/header"),g=e("game/views/add-media"),y=e("sportorg/views/teamroster-list"),b=e("game/views/video-list"),w=e("profile/views/image-video-list"),E=e("game/views/comment-list"),S=e("game/views/commenton-list"),x=e("media/models/image"),T=e("roster/views/roster"),N=u.LayoutView,C=i.$,k=i._,L=a.debug,A=a.lib.Channel,O=["/pages/game/game.css"];return r=s.extend({rosterViewsCount:0,initialize:function(e){return A("load:css").publish(O),k.bindAll(this),this.scheme=[],this.handleOptions(e),this.init(),this},handleOptions:function(e){this.id=e.gameId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds()},createData:function(){this.basics=new f({id:this.id}),this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id},handleDeferreds:function(){var e=this;C.when(this.basics.request).done(function(){e.setupHeaderView(),e.setupAddMediaView();var t=e.basics.get("payload"),n=t.enttypes_id;e.images=new p,e.images.id=e.id,e.images.fetch();var r=t.teams,i=r?r.length:0;for(var s=0;s<i;s++)e.setupRosterView(r[s].id,r[s].org_sport_link_obj.org.name);e.commentson=new v,e.commentson.subject_entity_type=n,e.commentson.id=e.id,e.commentson.fetch(),C.when(e.commentson.request).done(function(){e.setupCommentsOnListView()}),C.when(e.images.request).done(function(){e.setupImageListView()})})},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupRosterView:function(e,t){C("#roster_wrap_"+this.rosterViewsCount).length||C("#roster-wrap").append('<div id="roster_wrap_'+this.rosterViewsCount+'" class="clear"></div>');var n,r=i.Backbone.Collection.extend({});n=new T({model:new r,team_id:e,team_name:t,name:"roster images"+Math.random()*Math.random(),destination:"#roster_wrap_"+this.rosterViewsCount}),this.scheme.push(n),this.layout.render(),this.rosterViewsCount++},setupHeaderView:function(){var e;e=new m({model:this.basics,name:"Header",destination:"#main-header"}),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(){var e;e=new g({model:this.addmedia,name:"Add Media",destination:"#add-media"}),e.game_model=this.basics,this.scheme.push(e),this.layout.render()},setupTeamRosterListView:function(){alert(C("#roster_wrap_"+this.rosterViewsCount).length),C("#roster_wrap_"+this.rosterViewsCount).length||C("#roster-wrap").append('<div id="#roster_wrap_'+this.rosterViewsCount+'" class="clear"></div>');var e;e=new w({collection:this.teamrosters,name:"roster images",destination:"#roster_wrap_"+this.rosterViewsCount}),this.scheme.push(e),this.layout.render(),this.rosterViewsCount++},setupTeamRosterSecondListView:function(){var e;e=new w({collection:this.teamrostersSecond,name:"roster roster second images",destination:"#roster-second-wrap"}),this.scheme.push(e),this.layout.render()},setupVideoListView:function(){var e;e=new b({collection:this.videos,destination:"#video-wrap"}),this.scheme.push(e),this.layout.render()},setupImageListView:function(){var e=this,t;t=new w({collection:this.images,name:"image list",target_id:this.id,target_url:"/api/game/addimage/",sport_id:C(".sport-h").data("id"),destination:"#image-wrap"}),this.imageListView=t,routing.on("image-upload-success",function(t){e.updateImages(t)}),this.scheme.push(t),this.layout.render()},updateImages:function(e){var t=new x;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t)},setupCommentListView:function(){},setupCommentsOnListView:function(){var e;e=new S({collection:this.commentson,destination:".commentson-outer-box-h",name:"games comment on view"}),this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return e=new N({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r});