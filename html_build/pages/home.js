/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.1.0
 *
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!pages/home/templates/layout.html",[],function(){return'<div class="template-container">\r\n	<div id="main-header"></div>\r\n\r\n	<div id="main-content" class="row-fluid">\r\n		<div class="green-left-heading">\r\n			Top Rated\r\n		</div>\r\n		<div id="top-rated" class="p-l-20 clearfix clear"></div>\r\n\r\n		<div id="menu" class="p-l-20 clear"></div>\r\n		<div class="search-result-outer">\r\n			<div id="search-result" class="p-l-20 clear"></div>\r\n			<a href="javascript: void(0);" class="left-arrow-page home-page-arrow left-arrow-page-h">\r\n				<img src="http://cdn.athletez.com/resources/img/left_arrow.png">\r\n			</a>\r\n			<a href="javascript: void(0);" class="right-arrow-page home-page-arrow right-arrow-page-h">\r\n				<img src="http://cdn.athletez.com/resources/img/right_arrow.png">\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<div id="main-footer"></div>\r\n</div>'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("pages/home/models/menu",["models"],function(e){var t,n=e.BaseModel;return t=n.extend({defaults:{name:null,views:{browse:[{name:"VOTES",value:"votes"},{name:"RECENT",value:"newest"},{name:"FANS",value:"followers"}],time:[{name:"TODAY",value:"DAY"},{name:"THIS WEEK",value:"WEEK"},{name:"THIS MONTH",value:"MONTH"},{name:"ALL TIME",value:"YEAR"}]}}}),t}),define("packages/location/models/city",["models","facade"],function(e,t){var n,r=e.BaseModel,s=t.$,o=t._;return n=r.extend({defaults:{name:null},initialize:function(e,t){this.id=this.id||o.uniqueId("m"),this.addSubscribers(),o.bindAll(this)},search:function(e){this.request&&this.request.abort(),this.request=s.ajax({url:"/api/location/search/?search_text="+e}).done(function(t,n,r){var s=[],u=t.payload;console.log(u);if(u!=null)for(i=0;i<(u.length>10?10:u.length);i++){var a={};a.label=u[i].str,a.id=u[i].id;var f=o.isUndefined(u[i].obj.states_obj)?!o.isUndefined(u[i].obj.city)&&!o.isUndefined(u[i].obj.city.states_obj)?u[i].obj.city.states_obj:{}:u[i].obj.states_obj;a.state_id=f.id,a.country_id=o.isUndefined(f.country)?"":f.country.id,s.push(a)}Channel("response :"+e).publish(s)})},addSubscribers:function(){var e=this;Channel("changeInput"+this.id).subscribe(e.search)}}),n}),define("sport/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{sport_id:0,sport_name:null,sport_type:null},desc:"Sport Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("packages/sport/collections/sports",["require","sport/models/sport","facade","collections","utils"],function(e,t){var n,r=e("utils"),s=e("facade"),o=e("collections"),u=r.debug,a=o.BaseCollection,f=s._;return n=a.extend({model:t,url:function(){var e="/api/sport/listall?",t=this.name||"boys",n="";switch(t){case"boys":n="male=1";break;case"both":n="male=1&";case"girls":n+="female=1"}return e+n},initialize:function(e,t){this.url=t.url||this.url,this.name=t.name,a.prototype.initialize.call(this,e,t)},fetchSuccess:function(e,n){e.reset();var r=n.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new t;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",n.desc),s.set("exec_data",n.exec_data),e.push(s)}e.deferred.resolve(n)}}),n}),define("pages/home/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("pages/home/collections/image",["facade","collections","pages/home/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,initialize:function(e,t){debug.log("HomeImageList initialize..."),this.cid=this.cid||o.uniqueId("c"),this.deferred=new $.Deferred,this.num=t.num},fetchSuccess:function(e,t){var r=o.first(t.payload,e.num);e.reset();for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("location/models/state",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{location_id:0,location_name:null,location_country:null},desc:"State Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("location/collections/states",["facade","collections","location/models/state","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){return testpath?testpath+"/state_search":this.state_name==undefined?"/api/state/search":"/api/state/search/?state_name="+this.state_name},fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("text!pages/home/templates/menu.html",[],function(){return'<div class="demo-select">\r\n\r\n</div>\r\n<div class="menu-outer-h">\r\n\r\n	<div id="sport" class="menu span3">\r\n		<a href="javascript:void(0)" class="menu-link-h sport-link-h">\r\n			<span class="option-heading-h">ALL SPORTS</span>\r\n\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-sport-area-h sports-option-h">\r\n			<a href="javascript: void(0);" class="btn sport-reset-btn-h">Reset</a>\r\n\r\n			<div class="left text-center">\r\n				<strong>Guys</strong>\r\n\r\n				<div id=\'boys\' class="text-left sport-list"></div>\r\n			</div>\r\n			<div class="left text-center">\r\n				<strong>Girls</strong>\r\n\r\n				<div id=\'girls\' class="text-left sport-list"></div>\r\n			</div>\r\n			<div class="left text-center">\r\n				<strong>Both</strong>\r\n\r\n				<div id=\'both\' class="text-left sport-list"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div id="location" class="menu span3">\r\n		<a href="javascript:void(0)" class="menu-link-h location-link-h"> <span class="option-heading-h">ANYWHERE</span>\r\n\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-location-area-h">\r\n			<a href="javascript: void(0);" class="btn location-reset-btn-h">Reset</a>\r\n			<!--div class="state"></div-->\r\n			<div class="city"></div>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="views" class="menu span2">\r\n		<a href="javascript:void(0)" class="menu-link-h view-link-h"><span class="option-heading-h">ORDER</span>\r\n\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-view-area-h view-options-h">\r\n			<a href="javascript: void(0);" class="btn views-reset-btn-h">Reset</a>\r\n\r\n			<div class="dropdown">\r\n				<span> SORT BY</span>\r\n\r\n				<div class="clearfix"></div>\r\n				<ul class="dropdown-menu" style="display: block; position: relative; margin-bottom:15px;">\r\n					{{#views.browse}}\r\n					<li><a class="browse" data-id="{{value}}" href="javascript:void(0);">{{name}}</a></li>\r\n					{{/views.browse}}\r\n				</ul>\r\n			</div>\r\n			<br/>\r\n\r\n			<div class="clearfix">\r\n				<span>TIME FRAME</span>\r\n\r\n				<div class="clearfix"></div>\r\n				<ul class="dropdown-menu" style="display: block; position: relative;">\r\n					{{#views.time}}\r\n					<li><a class="time" data-id="{{value}}" href="javascript: void(0)">{{name}}</a></li>\r\n					{{/views.time}}\r\n				</ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="pull-right search-box">\r\n		<input type="text" id="search" placeholder="SEARCH"/>\r\n	</div>\r\n\r\n\r\n\r\n</div>\r\n<div class="pull-left type-icons">\r\n	<a id="video" class="searchBtn" data-number="0" href="javascript:void(0)"><i class="icon-facetime-video"></i>Videos</a>\r\n	<a id="image" class="searchBtn" data-number="1" href="javascript:void(0)"><i class="icon-picture"></i>Images</a>\r\n	<a id="user" class="searchBtn" data-number="2" href="javascript:void(0)"><i class="icon-user"></i>Athletes</a>\r\n	<a id="game" class="searchBtn" data-number="3" href="javascript:void(0)"><i class="icon-user"></i>Games</a>\r\n</div>'}),define("pages/home/views/menu",["require","text!pages/home/templates/menu.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView;return n=s.extend({id:"menu",events:{"blur #search":"updateSearch","focus #search":"hideDropdown","click .searchBtn":"changeBaseUrl","click .dropdown-menu > li > a":"select","click .dd":"doNothing","click .menu-link-h":"showMenuDropdown","click .views-reset-btn-h":"resetView","click .sport-reset-btn-h":"resetSport","click .location-reset-btn-h":"resetLocation"},demoSelect:function(){},resetView:function(){var e="view";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-view-area-h ul li a.select, .reset-view-area-h ul li.select").removeClass("select")},resetSport:function(){var e="sports";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-sport-area-h ul li a.select, .reset-sport-area-h ul li.select").removeClass("select")},resetLocation:function(){var e="location";Channel("resetFilter").publish(e),this.$el.find("#city").val(""),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-location-area-h ul li a.select, .reset-location-area-h ul li.select").removeClass("select")},template:t,intialize:function(e){s.prototype.initialize.call(this,e),console.log("intializwe menu view ----------->>>")},updateSearch:function(e){Channel("textChanged").publish($(e.target).val())},changeBaseUrl:function(e){var t=$(e.currentTarget),n=t.data("number");Channel("baseUrlChanged").publish(n)},stateListChange:function(e){var t=$(e.currentTarget).val();console.log(t);var n=t.data("id");routing.trigger("stateChanged",n)},doNothing:function(e){e.preventDefault(),e.stopPropagation()},hideDropdown:function(){this.$el.find(".menu-detail-h").hide()},hideAllDropdowns:function(){var e=this;$("html, #search").click(function(t){console.log($(t.target).parents("#views").length),$(t.target).parents(".menu").length||e.hideDropdown()})},showMenuDropdown:function(e){var t=$(e.currentTarget).next();t.css("display")=="none"?(this.$el.find(".menu-detail-h").hide(),t.show()):t.hide()},select:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),n=t.attr("class");$(".dropdown-menu > li > a."+n).removeClass("select"),n=t.attr("class").split(" ")[0],$(t).addClass("select");var r={submenu:n,value:$(t).data("id")||$(t).text()};Channel("viewFilterChanged").publish(r),debug.log(r)},toggle:function(e){e.preventDefault();var t=$(e.currentTarget),n=$(t).offset(),r=n.top+40,i=n.left+10,s=t.attr("id");s="#"+s+" .dd",$(s).attr("class")==="dd open"?$(s).hide().removeClass("open"):($(".open").hide().removeClass("open"),$(s).css("top",r).css("left",i),$(s).show(),$(s).addClass("open"))},afterRender:function(){this.hideAllDropdowns()}}),n}),define("text!media/templates/image-item.html",[],function(){return'<a href="{{_link}}" data-index="{{index}}" class="image-outer-h {{^_has_link}}open-photo-player-h{{/_has_link}}">\r\n	<div class="image-item-container">\r\n	<img class="list-thumbnail" src="{{_thumbnail}}" alt=""/>\r\n		<div class="action-section">\r\n			{{#show_edit}}\r\n				<div class="action-block left-block edit edit-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>E</span></div>\r\n				<div class="action-block right-block delete delete-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>D</span></div>\r\n			{{/show_edit}}\r\n			{{^show_edit}}\r\n				<div class="action-block left-block vote vote-h {{#_has_voted}} link-disabled {{/_has_voted}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}">\r\n					<span>V</span>\r\n				</div>\r\n				{{#_can_follow}}\r\n				<div class="action-block right-block follow follow-h {{#_is_following}} link-disabled {{/_is_following}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>F</span></div>\r\n				{{/_can_follow}}\r\n			{{/show_edit}}\r\n		</div>\r\n		<div class="detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n			<h6>{{_label}}</h6>\r\n			<span>{{& _sublabel}}</span>\r\n		</div>\r\n	</div>\r\n</a>'}),define("votes/models/vote",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/vote/add?subject_type_id="+this.entity_id+"&subject_id="+this.userId},setData:function(){this.set({subject_type_id:this.entity_id,subject_id:this.userId})}}),n}),define("votes/models/follow",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/ent/follow/"+this.entity_id+"/"+this.userId}}),n}),define("media/views/image-item",["vendor","views","utils","text!media/templates/image-item.html","votes/models/vote","votes/models/follow","utils/storage"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=require("votes/models/vote"),f=require("utils/storage"),l=require("votes/models/follow");return i=o.extend({tagName:"li",className:"image",events:{"click .vote-h":"vote","click .follow-h":"follow","click .edit-h":"edit","click .delete-h":"delete"},initialize:function(e){this.template=r},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},render:function(){function b(e){console.log(s(this),e)}var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id,_has_voted:t.has_voted,_is_following:t.is_following,_can_follow:t.can_follow},r=!1,i=null,o=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},a=!1;switch(t.enttypes_id){case"23":typeof t.standard_thumb=="object"?(i=t.standard_thumb,n._thumbnail=i.url):n._thumbnail=t.thumbs,a=!0,n._label=t.media.name,n._link="javascript: void(0);",n._has_link=!1,t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"&&(typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url)),n._label=_.isUndefined(t.media_obj.users_obj.label)?"":t.media_obj.users_obj.label,typeof t.media_obj.sports_obj=="object"&&(n._sublabel=o(t.media_obj.sports_obj.sport_name)),n._link="javascript: void(0);",n._has_link=!1,t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.user_picture_obj=="object"&&typeof t.user_picture_obj.types=="object"&&(typeof t.user_picture_obj.types.standard_thumb=="object"?(i=t.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.large_thumb=="object"?(i=t.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.original=="object"&&(i=t.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.label,n._sublabel="Votes: "+t.num_votes+", Followers: "+t.num_followers,n._link="/#profile/"+t.id,n._has_link=!0,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.game_picture!==null?t.game_picture.types.standard_thumb:{height:440,width:440,url:"http://cdn.athletez.com/resources/icons/game/square_game.png"},n._thumbnail=i.url,n._label=t.game_day,n._link="/#game/"+t.id,n._has_link=!0;var f="",l=t.teams;if(l!=null)var c=l.length;for(var h=0;h<c;h++)f+="<span>",f+=o(t.teams[h].team_name),f+="</span>",h+1<t.teams.length&&(f+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._sublabel=f}n.show_edit=r==1?!0:undefined;var p=u.to_html(this.template,n);this.$el.html(p);var d="120px",v="92px";this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+v}),s(this).find(".detail-view.game").css({bottom:"-"+d})});if(i!="undefined"&&i!=null){var m=i.width/220,g=i.height/220;i.width=parseInt(i.width),i.height=parseInt(i.height);var y=i.width>i.height?-(i.width/g-220)/2:-(i.height/m-220)/2;y>0&&(y=0),i.width>i.height?this.$el.find("img.list-thumbnail").css({"max-width":i.width/g,left:y}):this.$el.find("img.list-thumbnail").css({"max-height":i.height/m,top:y})}return a&&this.$el.append('<div class="circle open-photo-player-h"><div class="play"></div></div>'),this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this.$el.find(".circle").mouseover(function(){s(this).parent().find(".detail-view").css({bottom:"0px"}),s(this).parent().find(".action-block").css({opacity:90})}),this.$el.find(".vote-h").click(function(t){e.vote(t)}),this.$el.find(".follow-h").click(function(t){e.follow(t)}),this.$el.find(".edit-h").click(function(t){e.edit(t)}),this.$el.find(".delete-h").click(function(t){e["delete"](t)}),this},vote:function(e){e.preventDefault(),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new a;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save(),s.when(t.request).done(function(){s(e.currentTarget).addClass("link-disabled")})},follow:function(e){e.preventDefault(),console.log(e.target),e.stopPropagation();if(!this.checkForUser()){s(".signup-email").trigger("click");return}var t=new l;t.userId=this.model.get("payload").id,t.entity_id=this.model.get("payload").enttypes_id,t.save(),s.when(t.request).done(function(){typeof t.get("payload").follower=="object"&&typeof t.get("payload").subject=="object"&&t.get("payload").id>0?s(e.currentTarget).addClass("link-disabled"):console.log("FAIL")})},edit:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=this.model.get("payload");switch(n.enttypes_id){case"23":break;case"21":break;case"1":window.location.hash="profile/"+n.id;break;case"8":window.location.hash="game/"+n.id}console.log(this.model)},"delete":function(e){e.stopPropagation(),e.preventDefault(),console.log("delete")}}),i}),define("pages/home/views/image-list",["facade","views","utils","media/views/image-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"image-list",name:"Image List",tagName:"ul",_tagName:"li",_className:"image",events:{"click .open-photo-player-h":"initPhotoPlayer"},_view:r,initialize:function(e){var t=this;console.log(e),console.log(this),this.name=e.name||this.name,f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");u.bindAll(this),this.addSubscribers()},initPhotoPlayer:function(e){e.preventDefault(),console.log(this.collection);var t=o(e.target).parents("li").index();routing.trigger("photo-player-init",t,this.collection,this.collection.id)},childViews:{}}),i}),define("text!packages/location/templates/state-item.html",[],function(){return'{{#payload}}\r\n<div data-id="{{id}}" class="state-{{id}}">{{name}}</div>\r\n{{/payload}}\r\n\r\n'}),define("packages/location/views/state-item",["vendor","views","utils","text!packages/location/templates/state-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"state",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeState:function(){console.log(this.model),Channel("stateChanged:"+this.model.collection.cid).publish(this.model)}}),i}),define("packages/location/views/state-list",["facade","views","utils","packages/location/views/state-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"state-list",name:"State List",tagName:"ul",_tagName:"li",_className:"state",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("StateListView expected options.collection.");u.bindAll(this),this.addSubscribers()},childViews:{}}),i}),define("pages/home/views/state-list",["facade","views","utils","packages/location/views/state-list"],function(e,t,n,r){var i,s=e.$,o=e._,u=n.lib.Channel,a=t.SectionView;return i=r.extend({tagName:"select",_tagName:"option",events:{change:"changeState"},initialize:function(e){r.prototype.initialize.call(this,e),this.id=e.id||this.id||o.uniqueId("v")},changeState:function(e){console.log(this.collection);var t=s(e.target).val(),n="";this.collection.each(function(e){e.get("payload").name==t&&(n=e.get("payload").id)}),n!=""&&(console.log("sdsd"),routing.trigger("stateChanged",n))}}),i}),define("text!sport/templates/sport-item.html",[],function(){return'{{#payload}}\r\n<a href="javascript: void(0);">\r\n<img src="{{small_icon}}" class="tiny-sport-icon"/>{{sport_name}}</a>\r\n{{/payload}}'}),define("sport/views/sport-item",["vendor","views","utils","text!sport/templates/sport-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"sport",events:{},initialize:function(e){this.template=r},render:function(){var e=this,t=u.to_html(this.template,this.model.toJSON());return this.$el.html(t),this.$el.find("a").click(function(){e.selectSport()}),this},selectSport:function(){debug.log(this.model),s("li.sport").removeClass("select"),this.$el.addClass("select"),Channel("sportChanged:"+this.model.collection.cid).publish(this.model)}}),i}),function(e){jQuery.fn.extend({slimScroll:function(t){var n=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},t);return this.each(function(){function r(t){if(h){t=t||window.event;var r=0;t.wheelDelta&&(r=-t.wheelDelta/120),t.detail&&(r=t.detail/3),e(t.target||t.srcTarget).closest("."+n.wrapperClass).is(S.parent())&&i(r,!0),t.preventDefault&&!E&&t.preventDefault(),E||(t.returnValue=!1)}}function i(e,t,r){var i=e,s=S.outerHeight()-T.outerHeight();t&&(i=parseInt(T.css("top"))+e*parseInt(n.wheelStep)/100*T.outerHeight(),i=Math.min(Math.max(i,0),s),i=0<e?Math.ceil(i):Math.floor(i),T.css({top:i+"px"})),y=parseInt(T.css("top"))/(S.outerHeight()-T.outerHeight()),i=y*(S[0].scrollHeight-S.outerHeight()),r&&(i=e,e=i/S[0].scrollHeight*S.outerHeight(),e=Math.min(Math.max(e,0),s),T.css({top:e+"px"})),S.scrollTop(i),S.trigger("slimscrolling",~~i),u(),c()}function s(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1)):document.attachEvent("onmousewheel",r)}function o(){g=Math.max(S.outerHeight()/S[0].scrollHeight*S.outerHeight(),w),T.css({height:g+"px"});var e=g==S.outerHeight()?"none":"block";T.css({display:e})}function u(){o(),clearTimeout(v),y==~~y&&(E=n.allowPageScroll,b!=y&&S.trigger("slimscroll",0==~~y?"top":"bottom")),b=y,g>=S.outerHeight()?E=!0:(T.stop(!0,!0).fadeIn("fast"),n.railVisible&&N.stop(!0,!0).fadeIn("fast"))}function c(){n.alwaysVisible||(v=setTimeout(function(){(!n.disableFadeOut||!h)&&!p&&!d&&(T.fadeOut("slow"),N.fadeOut("slow"))},1e3))}var h,p,d,v,m,g,y,b,w=30,E=!1,S=e(this);if(S.parent().hasClass(n.wrapperClass)){var x=S.scrollTop(),T=S.parent().find("."+n.barClass),N=S.parent().find("."+n.railClass);o();if(e.isPlainObject(t)){if("scrollTo"in t)x=parseInt(n.scrollTo);else if("scrollBy"in t)x+=parseInt(n.scrollBy);else if("destroy"in t){T.remove(),N.remove(),S.unwrap();return}i(x,!1,!0)}}else{n.height="auto"==n.height?S.parent().innerHeight():n.height,x=e("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),S.css({overflow:"hidden",width:n.width,height:n.height});var N=e("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.size,background:n.railColor,opacity:n.railOpacity,zIndex:90}),T=e("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.size,BorderRadius:n.size,MozBorderRadius:n.size,WebkitBorderRadius:n.size,zIndex:99}),C="right"==n.position?{right:n.distance}:{left:n.distance};N.css(C),T.css(C),S.wrap(x),S.parent().append(T),S.parent().append(N),n.railDraggable&&T.draggable({axis:"y",containment:"parent",start:function(){d=!0},stop:function(){d=!1,c()},drag:function(){i(0,e(this).position().top,!1)}}),N.hover(function(){u()},function(){c()}),T.hover(function(){p=!0},function(){p=!1}),S.hover(function(){h=!0,u(),c()},function(){h=!1,c()}),S.bind("touchstart",function(e){e.originalEvent.touches.length&&(m=e.originalEvent.touches[0].pageY)}),S.bind("touchmove",function(e){e.originalEvent.preventDefault(),e.originalEvent.touches.length&&i((m-e.originalEvent.touches[0].pageY)/n.touchScrollStep,!0)}),"bottom"===n.start?(T.css({top:S.outerHeight()-T.outerHeight()}),i(0,!0)):"top"!==n.start&&(i(e(n.start).position().top,null,!0),n.alwaysVisible||T.hide()),s(),o()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define("jquery.slimscroll",function(){}),define("packages/sport/views/sport-list",["facade","views","utils","sport/views/sport-item","jqueryui","jquery.slimscroll"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=n.debug;return CollectionView=t.CollectionView,SectionView=t.SectionView,s=CollectionView.extend(SectionView.prototype),i=s.extend({__super__:CollectionView.prototype,className:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){s.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.name=e.name||this.name,this._tagName=e._tagName||this._tagName,this.tagName=e.tagName||this.tagName,this._className=e._className||this._className,this._view=e._view||this._view,this.addSubscribers()},initScroll:function(){o("."+this.className).slimScroll({height:"200px"})},addSubscribers:function(){var e=this;a("layout:ready").subscribe(e.initScroll)},childViews:{}}),i}),define("text!location/templates/city.html",[],function(){return'<input id="city" type="text" placeholder="cities"/>'}),define("packages/location/views/city",["require","text!location/templates/city.html","views","facade","utils","jqueryui","controller"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("controller");return n=o.extend({template:t,className:"ui-front",initialize:function(e){o.prototype.initialize.call(this,e),this.id=e.id||this.id||a.unique("v"),this.addSubscribers()},initPlugin:function(){var e=this,t=this.model.id;u("#city").autocomplete({minLength:2,source:function(e,n){console.log(e),console.log(n);var r=e.term,i=l.prototype.appStates;if(i){var s=i.findByNameInStorage(r);if(s){n(s.data);return}}var o=function(e){var t=l.prototype.appStates;t&&(t.add({name:r,data:e,storage:"localStorage",expires:new Date(Date.now()+3154e5)}),t.save(r)),n(e),console.log(t.findByNameInStorage(r))};Channel("response :"+r).subscribe(o),Channel("changeInput"+t).publish(r)},select:function(t,n){Channel("cityChanged:"+e.id).publish(n.item),f.log(n.item)}})},addSubscribers:function(){var e=this;console.log("Subscriber added"),Channel("layout:ready").subscribe(e.initPlugin)}}),n}),define("home",["require","text!pages/home/templates/layout.html","facade","controller","models","views","utils","pages/home/models/menu","packages/location/models/city","packages/sport/collections/sports","pages/home/collections/image","location/collections/states","pages/home/views/menu","pages/home/views/image-list","pages/home/views/state-list","packages/sport/views/sport-list","packages/location/views/city"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("packages/sport/collections/sports"),f=e("location/collections/states"),l=e("pages/home/collections/image"),c=e("pages/home/models/menu"),h=e("packages/location/models/city"),p=e("pages/home/views/menu"),d=e("pages/home/views/image-list"),v=e("pages/home/views/state-list"),m=e("packages/sport/views/sport-list"),g=e("packages/location/views/city"),y=o.LayoutView,b=r.$,w=r._,E=u.lib.Channel,S=[base_url+"pages/home/home.css"];return n=i.extend({searchPage:0,initialize:function(e){return E("load:css").publish(S),w.bindAll(this),this.handleOptions(e),this.scheme=[],this.genderTypes=["boys","girls","both"],this.init(),this},init:function(){this.initUrlOptions(),this.createData(),this.handleDeferreds()},initUrlOptions:function(){this.searchUrls=["/api/video/search","/api/image/search","/api/user/search","/api/game/search"],this.baseUrl=this.searchUrls[1],this.urlOptions={sports_id:"0",cities_id:"0",orderby:"random",time:"DAY",states_id:"0",searchtext:"",country_id:"0"},this.menuValues=[{src:".view-options-h .browse.select",target:".view-link-h .option-heading-h",input:!1,defaultValue:"ORDER"},{src:".sports-option-h .sport.select",target:".sport-link-h .option-heading-h",input:!1,defaultValue:"ALL SPORTS"},{src:"#city",target:".location-link-h .option-heading-h",input:!0,defaultValue:"ANYWHERE"}],this.viewOptions=["orderby","time"],this.sportsOptions=["sports_id"],this.locationOptions=["cities_id","states_id","country_id"]},addSubscribers:function(){var e=this;w.each(this.genderTypes,function(e){E("sportChanged:"+this.collections[e].cid).subscribe(this.changeSportFilter)},this),E("cityChanged:"+this.sections.city.id).subscribe(this.changeCityFilter),routing.on("stateChanged",function(t){e.changeStateFilter(t)}),E("textChanged").subscribe(this.updateText),E("viewFilterChanged").subscribe(this.changeViewFilter),E("baseUrlChanged").subscribe(this.updateBaseUrl),E("resetFilter").subscribe(this.resetFilter)},setupScheme:function(){var e,t=this.params;for(e=0;e<this.meta.activeViews.length;e++)this.scheme.push(this.sections[this.meta.activeViews[e]])},initSections:function(){this.setupMenuView(),w.each(this.genderTypes,this.setupSportListView),w.each(["top-rated","search-result"],this.setupImageListView),this.setupLocationDDView(),this.setupScheme(),this.setupLayout().render(),this.cityView&&this.cityView.initPlugin()},updateBaseUrl:function(e){this.baseUrl=this.searchUrls[e],this.transitionView()},updateText:function(e){this.urlOptions.searchtext=e,this.transitionView()},changeViewFilter:function(e){e.submenu==="browse"?options={orderby:e.value}:options={time:e.value},this.transitionView(options)},changeSportFilter:function(e){console.log(e);var t={sports_id:e.attributes.payload.sport_id};this.transitionView(t)},changeStateFilter:function(e){var t={states_id:e};this.transitionView(t)},changeCityFilter:function(e){e.label&&b("#city").val(e.label);var t={cities_id:e.id,states_id:e.state_id,country_id:e.country_id};this.transitionView(t)},resetFilter:function(e){for(var t in this.menuValues)this.menuValues[t].input?b(this.menuValues[t].src).val(""):b(this.menuValues[t].src).removeClass("select");switch(e){case"view":for(var t in this.viewOptions)this.viewOptions[t]=="orderby"?(b(".dropdown-menu .browse").removeClass("select"),this.urlOptions[this.viewOptions[t]]="random"):t=="time"&&(this.urlOptions[this.viewOptions[t]]="today");break;case"sports":for(var t in this.sportsOptions)this.urlOptions[this.sportsOptions[t]]="0";break;case"location":for(var t in this.locationOptions)this.urlOptions[this.locationOptions[t]]="0"}this.transitionView()},transitionView:function(e){this.searchPage=0,this.searchView(e)},searchView:function(e){var t=this,n="search-result",r=this.collections[n];controller=this,r.url=this.url(e),r.fetch(),b.when(r.request).done(function(){r.length<12?b(".right-arrow-page-h").addClass("disable-arrow-link"):b(".right-arrow-page-h").removeClass("disable-arrow-link"),t.searchPage==0?b(".left-arrow-page-h").addClass("disable-arrow-link"):b(".left-arrow-page-h").removeClass("disable-arrow-link");var e=new d({collection:r,name:n,destination:"#"+n});controller.layout.transition(n,e)});for(var i in this.menuValues){if(this.menuValues[i].input)var s=b(this.menuValues[i].src).val();else var s=b(this.menuValues[i].src).text();s!=""?b(this.menuValues[i].target).html(s):b(this.menuValues[i].target).html(this.menuValues[i].defaultValue)}},bindCickEvents:function(){var e=this;b(document).on("click",".left-arrow-page-h",function(){e.searchPage--,e.searchView()}),b(document).on("click",".right-arrow-page-h",function(){e.searchPage++,e.searchView()}),e.searchPage==0?b(".left-arrow-page-h").addClass("disable-arrow-link"):b(".left-arrow-page-h").removeClass("disable-arrow-link")},url:function(e){var t=this.baseUrl+"?offset="+this.searchPage+"&";w.extend(this.urlOptions,e);var n=[];return b.each(this.urlOptions,function(e,t){n.push(e+"="+encodeURIComponent(t))}),t+n.join("&")},createData:function(){var e=this.collections={};e["search-result"]=new l([],{url:this.url(),num:"12"}),e.state=new f,e["top-rated"]=new l([],{url:"/api/user/search",num:"4"}),w.each(this.genderTypes,function(t){e[t]=new a([],{name:t})})},handleDeferreds:function(){var e=this,t=[];w.each(this.collections,function(e,n,r){t.push(e.fetch())}),b.when.apply(b,t).done(e.initSections,e.addSubscribers)},setupImageListView:function(e){var t;t=new d({collection:this.collections[e],name:e,destination:"#"+e}),t.render(),this.sections[e]=t,this.meta.activeViews.push(e)},setupSportListView:function(e){var t;t=new m({collection:this.collections[e],name:e,id:e,destination:"#sport #"+e}),t.render(),this.sections[e]=t,this.meta.activeViews.push(e)},setupMenuView:function(){var e=new c,t,n="menu";t=new p({model:e,name:n,destination:"#"+n}),t.render(),this.sections[n]=t,this.meta.activeViews.push(n)},setupLocationDDView:function(){var e,t="state",n=new h,r="city";this.cityView=new g({model:n,name:r,destination:"#location .city"}),this.cityView.render(),this.sections[r]=this.cityView,this.meta.activeViews.push(r)},setupLayout:function(){var e;return e=new y({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.bindCickEvents(),this.layout}}),n});