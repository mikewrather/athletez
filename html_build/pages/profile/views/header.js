define(["require","text!profile/templates/header.html","text!profile/templates/sports.html","profile/models/basics","facade","views","utils","vendor","profile/collections/sports","profile/views/sport-list"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("profile/models/basics"),a=o.SectionView,f=e("profile/views/sport-list"),l=e("profile/collections/sports"),c=e("utils"),h=c.lib.Channel,p=e("vendor"),d=p.Mustache,v=s.$;return r=a.extend({id:"main-header",template:t,selectSportTemplate:n,events:{"click .sports-icon-h":"selectSport"},initialize:function(e){a.prototype.initialize.call(this,e),this.initSportList()},initSportList:function(){var e=this;this.sports=new l,this.sports.id=this.model.id,this.sports.fetch(),v.when(this.sports.request).done(function(){e.setupSportListView(),e.selectSport()})},setupSportListView:function(){console.log(this.sports);var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);console.log("SPORTS LIST VIEW",t.el),this.childViews.sportListView=t,this.callbacks.add(function(){n()}),e.$el.find("#sports-info").html(t.el);var r={payload:[]},s=t.collection;if(s.length){for(i=0;i<s.length;i++)r.payload[i]=s.at(i).get("payload");var o=d.to_html(e.selectSportTemplate,r);e.$el.find(".sports-h").html(o)}else e.$el.find("#sports-info").html("");t.render()},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){a.prototype.render.call(this,e,t,n)},selectSport:function(e){var t=e?v(e.target).data("id"):v(".sports-h img:first-child").data("id");v(".sports-icon-h").removeClass("selected-sport-h"),v(".sports-icon-h[data-id="+t+"]").addClass("selected-sport-h"),t&&(this.$(".sport-info").stop().slideUp(),this.$(".sport-info-"+t).stop().slideDown(),routing.trigger("showTwmList",t))}}),r});