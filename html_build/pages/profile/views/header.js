define(["require","text!profile/templates/header.html","text!profile/templates/sports.html","profile/models/basics","facade","views","utils","vendor","profile/collections/sports","profile/views/sport-list","utils/storage"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("profile/models/basics"),a=o.SectionView,f=e("profile/views/sport-list"),l=e("profile/collections/sports"),c=e("utils"),h=c.lib.Channel,p=e("vendor"),d=p.Mustache,v=e("utils/storage"),m=s.$;return r=a.extend({id:"main-header",template:t,selectSportTemplate:n,events:{"click .sports-icon-h":"selectSport"},initialize:function(e){a.prototype.initialize.call(this,e),this.sports_id=e.sports_id,this.initSportList()},initSportList:function(){var e=this;this.sports=new l,this.sports.id=this.model.id,this.sports.fetch(),m.when(this.sports.request).done(function(){e.setupSportListView(),console.log(e.sports),e.sports_id||e.selectSport()})},setupSportListView:function(){console.log(this.sports);var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);console.log("SPORTS LIST VIEW",t.el),this.childViews.sportListView=t,this.callbacks.add(function(){n()}),e.$el.find("#sports-info").html(t.el);var r={payload:[]},s=t.collection;if(s.length){for(i=0;i<s.length;i++)r.payload[i]=s.at(i).get("payload");var o=d.to_html(e.selectSportTemplate,r);e.$el.find(".sports-h").html(o)}else e.$el.find("#sports-info").html("");t.render()},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){a.prototype.render.call(this,e,t,n)},getUserName:function(){return this.model.get("payload").label},selectSport:function(e){var t=e?m(e.target).data("id"):m(".sports-h img:first-child").data("id"),n=e?m(e.target).data("name"):m(".sports-h img:first-child").data("name");m(".sports-icon-h.selected-sport-h").each(function(){console.log(this);var e=String(m(this).attr("src")).split("_selected.png")[0];e=e.split(".png")[0]+".png",m(this).attr("src",e).removeClass("selected-sport-h")}),m(".sports-icon-h[data-id="+t+"]").addClass("selected-sport-h");var r=String(m(".sports-icon-h[data-id="+t+"]").attr("src")).split(".png")[0]+"_selected.png";m(".sports-icon-h[data-id="+t+"]").attr("src",r);var i=this.getUserName();t&&(i+=" | "+n,this.$(".sport-info").stop().slideUp(),this.$(".sport-info-"+t).stop().slideDown(),routing.trigger("showTwmList",t)),document.title=i}}),r});