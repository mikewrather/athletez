define(["vendor","views","utils","text!profile/templates/sport-team.html","profile/collections/teams","sportorg/views/team-list"],function(e,t,n,r){var i,s=e.$,o=t.SectionView,u=e.Mustache,a=n.lib.Channel,f=require("sportorg/views/team-list"),l=require("profile/collections/teams");return i=o.extend({tagName:"li",className:"sport",initialize:function(e){function i(e){t.initTeamList(),console.log("CALLED REFRESH PROFILE CHANNEL"),a("refresh-profilepage").publish(e)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.get("payload").sport_id;routing.off("showTwmList"),routing.on("showTwmList",function(e){i(e)})},initTeamList:function(){var e=this,t=s(".sports-h img.selected-sport-h").data("id");this.teams=new l,this.teams.id=this.id,this.teams.sports_id=t,this.teams.fetch(),s.when(this.teams.request).done(function(){console.log("TEAMS:",e.teams),e.setupTeamListView()})},setupTeamListView:function(){var e=this;if(this.teams.length>2){s(".see-more-teams-h").html("Show All "+this.teams.length),s(".see-more-teams-h").removeClass("hide"),this.allSportsRecords=this.teams.toArray();var t=this.allSportsRecords.slice(0,2);this.teams.reset(t),s(".see-more-teams-h").click(function(){s(this).addClass("hide"),e.teams.reset(e.allSportsRecords),e.showTeamView()})}else s(".see-more-teams-h").addClass("hide");this.showTeamView()},showTeamView:function(){var e={};e.records=this.teams.toJSON();var t=u.to_html(this.template,e);this.$el.html(t)},render:function(){var e=this,t=u.to_html(this.template,this.model.toJSON());return this.$el.html(t),this}}),i});