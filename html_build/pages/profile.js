/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/* jQuery Resize And Crop (jrac)
 * A jQuery 1.4+ and jQueryUi 1.8+ plugin under GNU GENERAL PUBLIC LICENSE version 2 lisense.
 * Copyright (c) 2011 Cedric Gampert - cgampert@gmail.com
 */

/*! jQuery UI - v1.10.2 - 2013-04-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.1.0
 *
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!profile/templates/layout.html",[],function(){return'<div class="template-container">\r\n	<div id="main-header" class="profile-header"></div>\r\n	<div id="votes-area-h"></div>\r\n	<div class="green-left-heading">MESSAGE BOARD</div>\r\n	<div id="commenton-wrap" class="clearfix clear profile-comment-list-box"></div>\r\n	<div id="comment_div" class="clearfix"></div>\r\n	\r\n	<div class="green-left-heading">PHOTO/VIDEO</div>\r\n	<div class="row-fluid" id="main-content">\r\n	<!-- <div id="video-wrap" class="clearfix"></div> -->\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<div id="add-media" class="clearfix">add media</div>\r\n	</div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="org-wrap" class="clearfix hide"></div>\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="green-left-heading">GAMES</div>\r\n	<div id="games_div" class="clearfix">\r\n		<!--div class="game-box-outer">\r\n			<ul>\r\n				<li><a href="javascript: void(0);" class="background-blue">a</a></li>\r\n				<li><a href="javascript: void(0);" class="background-orange">b</a></li>\r\n				<li><a href="javascript: void(0);" class="background-orange">c</a></li>\r\n				<li><a href="javascript: void(0);" class="background-orange">d</a></li>\r\n			</ul>\r\n		</div-->\r\n		\r\n	</div>\r\n	<div class="green-left-heading">FANS</div>\r\n	<div id="fans-div" class="clearfix clear">&nbsp;</div>\r\n	\r\n	<div id="main-footer">\r\n	</div>\r\n</div>\r\n'}),define("text!chrome/templates/header.html",[],function(){return'\r\n<div class="row-fluid">\r\n    <div class="logo">\r\n    {{#branding}}\r\n    <a class="brand" href="/#home">\r\n        <img src="{{base_url}}{{src}}" alt="{{alt}}" />\r\n    </a>\r\n    {{/branding}}\r\n    </div>\r\n\r\n    <div class="searchform">\r\n    {{#search}}\r\n    <form action="/" method="post" class="form-inline">\r\n        <input class="input-search" name="s" placeholder="{{placeholder}}"/>    \r\n    </form>\r\n    {{/search}}\r\n    </div>\r\n\r\n    <div class="account clearfix">\r\n        {{#authorized}}\r\n            <div class="photo"><img src="" alt="{{user_name}}"/></div>\r\n            <div class="userlinks dropdown">\r\n                <a class="dropdown-toggle" data-toggle="dropdown">{{user_name}} <b class="caret"></b></a>\r\n                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\r\n                    {{#nav}}\r\n                        <li><a href="{{link}}">{{page}}</a></li>\r\n                    {{/nav}}\r\n                    <li><a href="{{logout_url}}">{{logout_label}}</a></li>\r\n                </ul>\r\n            </div>\r\n        {{/authorized}}    \r\n        {{^authorized}}\r\n            <a href="{{login_url}}">{{login_label}}</a>\r\n        {{/authorized}}    \r\n    </div>\r\n</div>\r\n\r\n{{^authorized}}\r\n<div class="row-fluid textright">\r\n    {{signup_social_label}} <a href="{{signup_facebook_link}}" class="signup-facebook">{{signup_facebook_label}}</a>\r\n	<a href="{{signup_email_link}}" class="signup-email">{{signup_email_label}}</a>\r\n</div>\r\n{{/authorized}}\r\n<!--\r\n <div class="alert global-alert"></div>\r\n<div class="alert alert-info global-messages"></div>\r\n<div class="alert alert-error global-errors"></div>\r\n-->'}),define("chrome/models/header",["models/base","utils/storage"],function(e,t){var n;return n=e.extend({defaults:{branding:{alt:"athletez",src:"http://cdn.athletez.com/resources/img/athletez_logo_small.png"},search:{placeholder:"Search"},login_url:"#user/login",login_label:"Log In",logout_url:"/user/logout",logout_label:"Log Out",signup_social_label:"Sign up for Free",signup_facebook_label:"Facebook",signup_email_label:"Email",signup_facebook_link:"/",signup_email_link:"/"},url:function(){return testpath?testpath+"/authcheck":"/authcheck"},saveCookie:function(){var e=new t("user","localStorage");e.create(this)}}),n}),define("text!registration/templates/layout.html",[],function(){return'\r\n<div id="main-header">\r\n\r\n</div>\r\n\r\n<div id="main-content">\r\n    \r\n    \r\n    \r\n</div>\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("user/models/basics",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"undefined"==typeof this.id?testpath?testpath+"/user/basics/425983":"/api/user/basics/":testpath?testpath+"/user/basics/"+this.id:"/api/user/basics/"+this.id},initialize:function(){n.__super__.initialize.apply(this,arguments)},user_pic_small:function(){return this.payload.user_picture.types.small_thumb.url}}),n}),define("registration/models/select_type",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return"/api/user/basics/"+this.id},fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n)}}),t}),define("user/models/fbreg",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,birth_day:null,high_school:null,email:null,user_picture:null},desc:"Facebook Registration Information",exec_data:{exec_time:0,exec_error:!1},id:1})}),n}),define("registration/models/register_facebook",["facade","user/models/fbreg","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/fbreg":"/api/user/fbreg"}}),r}),define("registration/models/register_email",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/basics":"/api/user/basics/"+this.id}}),t}),define("registration/models/upload_image",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/uploadimage":"/api/user/uploadimage"}}),t}),define("registration/models/select_org",["user/models/basics"],function(e){var t;return t=e.extend({fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n);var r=new Date(t.get("payload").dob),i=new Date,s=i.getFullYear()-r.getFullYear();s>18?t.set("show_highschool",!1):t.set("show_highschool",!0)}}),t}),define("text!registration/templates/select_type.html",[],function(){return'\r\n<h1>Register with AthletesUp</h1>\r\n<a href="#" class="register_facebook">Sign up through Facebook</a>\r\n<br/><br/> OR <br/><br/>\r\n<a href="#" class="register_email">Register With Email Address</a>\r\n\r\n<a href="#" class="go_club">go club directly</a>\r\n<div id="fb-root"></div>'}),define("registration/views/select_type",["require","registration/models/select_type","text!registration/templates/select_type.html","facade","views","utils"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=e("utils"),u=o.lib.Channel,a=s.SectionView;return r=a.extend({id:"main-content",events:{"click .register_facebook":"registerWithFacebook","click .register_email":"registerWithEmail","click .go_club":"selectOrg"},template:n,initialize:function(e){a.prototype.initialize.call(this,e),this.initModel()},registerWithFacebook:function(e){function t(){FB.login(function(e){e.authResponse?u("registration-with-facebook").publish():alert("Cancelled")},{scope:"email, user_birthday, user_photos"})}function n(){var e,n="facebook-jssdk",r=document.getElementsByTagName("script")[0];if(document.getElementById(n)){t();return}e=document.createElement("script"),e.id=n,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(e,r)}e.preventDefault(),window.fbAsyncInit=function(){FB.init({appId:"239430712864961",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.getLoginStatus(function(e){e.status==="connected"?FB.api("/me",function(e){u("registration-with-facebook").publish()}):e.status==="not_authorized"?t():t()},{scope:"email, user_birthday, user_photos"})},n()},registerWithEmail:function(e){e.preventDefault(),u("registration-with-email").publish()},initModel:function(){function n(n){e.select_type=new t,e.select_type.id=n,e.select_type.fetch(),$.when(e.select_type.request).done(function(){e.model=e.select_type})}var e=this;u("app-inited").subscribe(n)},selectOrg:function(e){e.preventDefault();var t=this,n=t.model.get("payload");u("registration-select-org").publish(n)}}),r}),define("text!registration/templates/register_facebook.html",[],function(){return'{{#payload}}\r\n<h1>Register with Facebook</h1>\r\n<div class="row-fluid">\r\n	<div class="span4">\r\n		<img class="picture" src="{{profile_picture}}" alt="{{name}}"/><br/>\r\n		<a href="#" class="diff_fb_pic">Different Facebook Pic</a><br/>\r\n		<a href="#" class="upload_new_image">Upload a New Image</a><br/>\r\n	</div>\r\n	<div class="span8">\r\n		<h3>{{name}}</h3>\r\n\r\n		<div class="field">\r\n			Born:\r\n			<span class="value" data-name="birthday" data-value="{{birthday}}">\r\n				<input type="hidden" name="birthday" value="{{birthday}}"/>\r\n				{{birthday}} <a href="#" class="change-field">change</a>\r\n			</span>\r\n		</div>\r\n		<div class="field">\r\n			High School:\r\n			<span class="value" data-name="high_school" data-value="{{high_school}}">\r\n				{{#hs_exists}}\r\n					<input type="hidden" name="high_school" value="{{high_school}}"/>\r\n					{{high_school}} <a href="#" class="change-field">change</a>\r\n				{{/hs_exists}}\r\n				{{^hs_exists}}\r\n					<input type="text" id="high_school" name="high_school" value=""/>\r\n				{{/hs_exists}}\r\n\r\n			</span>\r\n		</div>\r\n		<div class="field">\r\n			Email:\r\n			<span class="value" data-name="email" data-value="{{email}}">\r\n				<input type="hidden" name="email" value="{{email}}"/>\r\n				{{email}} <a href="#" class="change-field">change</a>\r\n			</span>\r\n		</div>\r\n		<div class="field">\r\n			Password: <input type="password" class="password" name="password"/>\r\n		</div>\r\n		<div class="field">\r\n			Again: <input type="password" name="password-again"/>\r\n		</div>\r\n		<div class="password-error"></div>\r\n	</div>\r\n</div>\r\n<div class="row-fluid">\r\n	<label for="agree"><input type="checkbox" id="agree" name="agree"/>I have read and agree to the <a href="#">Terms of Service</a></label>\r\n	<a href="#" class="next">What\'s Next</a>\r\n</div>\r\n{{/payload}}'}),function(e){e.extend(e.fn,{pstrength:function(t){var t=e.extend({verdects:["Very weak","Weak","Medium","Strong","Very strong"],colors:["#f00","#c06","#f60","#3c0","#3f0"],scores:[10,15,30,40],common:["password","sex","god","123456","123","liverpool","letmein","qwerty","monkey"],minchar:6},t);return this.each(function(){var n=e(this).attr("id");e(this).after('<div class="pstrength-minchar" id="'+n+'_minchar">Minimum number of characters is '+t.minchar+"</div>"),e(this).after('<div class="pstrength-info" id="'+n+'_text"></div>'),e(this).after('<div class="pstrength-bar" id="'+n+'_bar" style="border: 1px solid white; font-size: 1px; height: 5px; width: 0px;"></div>'),e(this).keyup(function(){e.fn.runPassword(e(this).val(),n,t)})})},runPassword:function(t,n,r){nPerc=e.fn.checkPassword(t,r);var i="#"+n+"_bar",s="#"+n+"_text";nPerc==-200?(strColor="#f00",strText="Unsafe password word!",e(i).css({width:"0%"})):nPerc<0&&nPerc>-199?(strColor="#ccc",strText="Too short",e(i).css({width:"5%"})):nPerc<=r.scores[0]?(strColor=r.colors[0],strText=r.verdects[0],e(i).css({width:"10%"})):nPerc>r.scores[0]&&nPerc<=r.scores[1]?(strColor=r.colors[1],strText=r.verdects[1],e(i).css({width:"25%"})):nPerc>r.scores[1]&&nPerc<=r.scores[2]?(strColor=r.colors[2],strText=r.verdects[2],e(i).css({width:"50%"})):nPerc>r.scores[2]&&nPerc<=r.scores[3]?(strColor=r.colors[3],strText=r.verdects[3],e(i).css({width:"75%"})):(strColor=r.colors[4],strText=r.verdects[4],e(i).css({width:"92%"})),e(i).css({backgroundColor:strColor}),e(s).html("<span style='color: "+strColor+";'>"+strText+"</span>")},checkPassword:function(e,t){var n=0,r=t.verdects[0];e.length<t.minchar?n-=100:e.length>=t.minchar&&e.length<=t.minchar+2?n+=6:e.length>=t.minchar+3&&e.length<=t.minchar+4?n+=12:e.length>=t.minchar+5&&(n+=18),e.match(/[a-z]/)&&(n+=1),e.match(/[A-Z]/)&&(n+=5),e.match(/\d+/)&&(n+=5),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(n+=7),e.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)&&(n+=5),e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(n+=7),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(n+=2),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(n+=3),e.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)&&(n+=3);for(var i=0;i<t.common.length;i++)e.toLowerCase()==t.common[i]&&(n=-200);return n}})}(jQuery),define("jquery.pstrength",function(){}),define("media/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),t!=undefined?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},selectImageType:function(e){return r.each(this.get("payload").types,function(t,n){n==e&&(this.get("payload").image_path=t.url)},this),this}}),n}),define("media/collections/images",["facade","collections","media/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.processItemFromPayload(t,i),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("registration/collections/fbimages",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/fbpics":"/api/user/fbpics"}}),r}),define("text!registration/templates/fbimage-item.html",[],function(){return'\r\n{{#payload}}\r\n<img src="{{thumbnail}}" alt="Thumb"/>\r\n{{#num_votes}}{{num_votes}} Votes{{/num_votes}}\r\n{{/payload}}\r\n\r\n'}),define("registration/views/fbimage-item",["vendor","views","utils","text!registration/templates/fbimage-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{click:"changeImage"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeImage:function(){Channel("changeimage"+this.model.collection.id).publish(this.model)}}),i}),define("text!media/templates/image-item.html",[],function(){return'	<a href="{{_link}}" data-index="{{index}}" class="image-outer-h">\r\n		<div class="image-item-container">\r\n		<img src="{{_thumbnail}}" alt=""/>\r\n\r\n			<div class="action-section">\r\n				{{#show_edit}}\r\n					<div class="action-block left-block edit" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>E</span></div>\r\n					<div class="action-block right-block delete" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>D</span></div>\r\n				{{/show_edit}}\r\n				{{^show_edit}}\r\n					<div class="action-block left-block vote" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>V</span></div>\r\n					<div class="action-block right-block follow" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>F</span></div>\r\n				{{/show_edit}}\r\n			</div>\r\n			<div class="detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n				<h6>{{_label}}</h6>\r\n				<span>{{& _sublabel}}</span>\r\n			</div>\r\n		</div>\r\n\r\n	</a>\r\n'}),define("media/views/image-item",["vendor","views","utils","text!media/templates/image-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{click:"changeImage","click .vote":"vote","click .follow":"follow","click .edit":"edit","click .delete":"delete","click .image-outer-h":"initPhotoPlayer"},initialize:function(e){this.template=r},render:function(){var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id},r=!1,i=null;console.log(t);switch(t.enttypes_id){case"23":n._thumbnail=t.thumbs,n._label=t.media.name,n._link="javascript: void(0);",t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"?typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url):n._label=t.media_obj.name,n._link="javascript: void(0);",t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.user_picture_obj=="object"&&typeof t.user_picture_obj.types=="object"&&(typeof t.user_picture_obj.types.standard_thumb=="object"?(i=t.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.large_thumb=="object"?(i=t.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.original=="object"&&(i=t.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.label,n._sublabel="Coming Soon",n._link="/#profile/"+t.id,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.game_picture!==null?t.game_picture.types.standard_thumb:{height:440,width:440,url:"http://lorempixel.com/output/sports-q-g-440-440-3.jpg"},n._thumbnail=i.url,n._label=t.game_day,n._link="/#game/"+t.id;var o="",a=t.teams.length,f=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var l=0;l<a;l++)o+="<span>",o+=f(t.teams[l].team_name),o+="</span>",l+1<t.teams.length&&(o+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._sublabel=o}n.show_edit=r==1?!0:undefined;var c=u.to_html(this.template,n);this.$el.html(c);var h="120px",p="92px";this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+p}),s(this).find(".detail-view.game").css({bottom:"-"+h})});if(i!="undefined"&&i!=null){var d=i.width/220,v=i.height/220;i.width=parseInt(i.width),i.height=parseInt(i.height);var m=i.width>i.height?-(i.width/v-220)/2:-(i.height/d-220)/2;m>0&&(m=0),i.width>i.height?this.$el.find("img").css({"max-width":i.width/v,left:m}):this.$el.find("img").css({"max-height":i.height/d,top:m})}return this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this},vote:function(e){e.preventDefault(),console.log(this.model)},follow:function(e){e.preventDefault(),console.log(e.target)},edit:function(e){e.preventDefault()},"delete":function(e){e.preventDefault()}}),i}),define("text!media/templates/image-board.html",[],function(){return'<!--{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{image_path}}" alt="{{image_title}}"/></div>\r\n    {{#image_title}}<h3>{{image_title}}</h3>{{/image_title}}\r\n    {{#num_votes}}Votes: {{num_votes}} <br/>{{/num_votes}}\r\n{{/payload}}-->'}),define("media/views/image-board",["require","text!media/templates/image-board.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-image.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Image Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addimage" value="Add Image"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-image",["require","text!media/templates/add-image.html","facade","views","media/models/image"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/image"),o=i.BaseView;return n=o.extend({tagName:"li",template:t,events:{"click #addimage":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");!this.model},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.image_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("text!media/templates/image-list.html",[],function(){return'<ul class="image-list"></ul>\r\n<div class="clear"><a href="javascript: void(0);" class="see-more-h">See more</a></div>\r\n'}),define("media/views/image-list",["facade","views","utils","media/views/image-item","media/views/image-board","media/views/add-image","text!media/templates/image-list.html"],function(e,t,n,r,i,s,o){var u,a,f=e.$,l=e._,c=require("vendor"),h=n.lib.Channel,p=t.CollectionView,d=t.SectionView,v=c.Mustache;return a=p.extend(d.prototype),u=a.extend({__super__:p.prototype,template:o,_tagName:"li",_className:"image",page:0,page_limit:8,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore","click .image-outer-h":"initPhotoPlayer"},renderTemplate:function(){var e=v.to_html(this.template);return this.$el.html(e),this},initialize:function(e){e.name?this.name=e.name:this.name="image list",e.collecton&&(this.collection=e.collection),this.renderTemplate();var t=this;t.allData=this.collection.toArray(),t.seeMore(),p.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");l.bindAll(this),this.addSubscribers(),this.setupBoardView(),this.setupAddView()},initPhotoPlayer:function(e){console.log(this.collection);var t=f(e.target).parents("li").index()-1;routing.trigger("photo-player-init",t,this.allData,this.collection.id)},seeMore:function(e){var t=this.allData.length,n=this.page*this.page_limit,r=n+this.page_limit;t<=r&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(n,r)):this.collection.reset(this.allData.slice(n,r)),this.page++,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupAddView:function(){function r(e){t.model=e,t.render(),f(this.listView).append(t.el)}var e,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),h("addimage:fetch").subscribe(r)},filterWithImageType:function(e){var t=this.collection;return f.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t},setupBoardView:function(){function s(e){n.model=e,n.render()}if(this.collection.size()==0)return;var e=this.filterWithImageType(this.imagetype),t,n=new i({collection:e,model:e.at(0)}),r=this.addChildView(n);this.childViews.board=n,this.callbacks.add(function(){r(),n.render(),f(this.listView).prepend(n.el)}),h("changeimage"+this.collection.id).subscribe(s)}}),u}),define("text!registration/templates/fbimage-board.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter fbimagecontainer pane">\r\n        <img id="image-select" src="{{original}}" alt="{{image_title}}"/>\r\n        <div class="coords" style="display:none;">\r\n            <div>crop x <input name="crop-x" type="hidden" /></div>\r\n            <div>crop y <input name="crop-y" type="hidden" /></div>\r\n            <div>crop width <input name="crop-width" type="hidden" /></div>\r\n            <div>crop height <input name="crop-height" type="hidden" /></div>\r\n            <div>image width <input name="image-width" type="hidden" /></div>\r\n            <div>image height <input name="image-height" type="hidden" /></div>            \r\n        </div>\r\n    </div>\r\n{{/payload}}\r\n'}),function(e){e.fn.jrac=function(t){var n={crop_width:200,crop_height:100,crop_x:0,crop_y:0,crop_resize:!0,crop_aspect_ratio:null,image_width:null,image_height:null,zoom_min:100,zoom_max:3e3,viewport_image_surrounding:!1,viewport_width:null,viewport_height:null,viewport_resize:!0,viewport_content_left:0,viewport_content_top:0,viewport_onload:null};return this.each(function(){if(!e(this).is("img"))return;var r=!1;typeof t=="object"?e.extend(n,t):t=="destroy"&&(r=!0);var i=e(this),s=!1;i.parent().hasClass("jrac_viewport")&&(s=!0),s&&r?(i.draggable("destroy"),i.parent().find(".jrac_crop").remove(),i.parent().parent().find(".jrac_zoom_slider").remove(),i.parent().append(i.data("original")),i.parent().unwrap(),i.unwrap(),i.remove()):i.data("original",i.clone());if(r)return;s||i.hide().css("position","absolute").wrap('<div class="jrac_container"><div class="jrac_viewport"></div></div>');var o=i.parent(),u=o.parent(),a=e('<div class="jrac_loading" />');o.append(a);var f=function(){e.extend(i,{scale_proportion_locked:!0,originalWidth:i.width(),originalHeight:i.height()}),i.width(n.image_width).height(n.image_height),n.viewport_image_surrounding?o.width(i.width()).height(i.height()):o.width(n.viewport_width).height(n.viewport_height),i.css({left:n.viewport_content_left,top:n.viewport_content_top});if(!s){var t=e('<div class="jrac_zoom_slider"><div class="ui-slider-handle"></div></div>').width(o.width()).slider({value:i.width(),min:n.zoom_min,max:n.zoom_max,start:function(n,r){e.extend(t,{on_start_width_value:r.value,on_start_height_value:i.height()})},slide:function(e,n){var r=Math.round(t.on_start_height_value*n.value/t.on_start_width_value);i.height(r),i.width(n.value),o.observator.notify("jrac_image_height",r),o.observator.notify("jrac_image_width",n.value)}});u.append(t),n.viewport_resize&&o.resizable({resize:function(e,n){t.width(n.size.width)}}),i.draggable({drag:function(e,t){t.position.left!=t.originalPosition.left&&o.observator.notify("jrac_crop_x",o.observator.crop_position_x()),t.position.top!=t.originalPosition.top&&o.observator.notify("jrac_crop_y",o.observator.crop_position_y())}});var r=e('<div class="jrac_crop"><div class="jrac_crop_drag_handler"></div></div>').css({width:n.crop_width,height:n.crop_height,left:n.crop_x+n.viewport_content_left,top:n.crop_y+n.viewport_content_top}).draggable({containment:o,handle:"div.jrac_crop_drag_handler",drag:function(e,t){t.position.left!=t.originalPosition.left&&o.observator.notify("jrac_crop_x",o.observator.crop_position_x()),t.position.top!=t.originalPosition.top&&o.observator.notify("jrac_crop_y",o.observator.crop_position_y())}});n.crop_resize&&r.resizable({containment:o,aspectRatio:n.crop_aspect_ratio,resize:function(e,t){t.size.width!=t.originalSize.width&&o.observator.notify("jrac_crop_width",r.width()),t.size.height!=t.originalSize.height&&o.observator.notify("jrac_crop_height",r.height())}}),o.append(r)}e.extend(o,{$container:u,$image:i,$crop:r,$zoom_widget:t,observator:{items:{},register:function(e,t,n){e&&t&&(this.items[e]={element:t,callback:n})},unregister:function(e){delete this.items[e]},notify:function(t,n){if(this.items[t]){var r=this.items[t].element,s=this.items[t].callback;r.trigger(t,[o,n]),e.isFunction(s)&&s.call(o,t,r,n)}i.trigger("jrac_events",[o])},notify_all:function(){this.notify("jrac_crop_x",this.crop_position_x()),this.notify("jrac_crop_y",this.crop_position_y()),this.notify("jrac_crop_width",r.width()),this.notify("jrac_crop_height",r.height()),this.notify("jrac_image_width",i.width()),this.notify("jrac_image_height",i.height())},crop_position_x:function(){return r.position().left-i.position().left},crop_position_y:function(){return r.position().top-i.position().top},crop_consistent:function(){return this.crop_position_x()>=0&&this.crop_position_y()>=0&&this.crop_position_x()+r.width()<=i.width()&&this.crop_position_y()+r.height()<=i.height()},set_property:function(e,n){n=parseInt(n);if(isNaN(n))return;switch(e){case"jrac_crop_x":r.css("left",n+i.position().left);break;case"jrac_crop_y":r.css("top",n+i.position().top);break;case"jrac_crop_width":r.width(n);break;case"jrac_crop_height":r.height(n);break;case"jrac_image_width":if(i.scale_proportion_locked){var s=Math.round(i.height()*n/i.width());i.height(s),this.notify("jrac_image_height",s)}i.width(n),t.slider("value",n);break;case"jrac_image_height":if(i.scale_proportion_locked){var o=Math.round(i.width()*n/i.height());i.width(o),this.notify("jrac_image_width",o),t.slider("value",o)}i.height(n)}this.notify(e,n)}}}),a.hide(),a.remove(),i.show(),e.isFunction(n.viewport_onload)&&(n.viewport_onload.call(o),o.observator.notify_all())},l=i.attr("src");/^data:image/.test(l)?f():(l=l+(l.search(/\?/)<0?"?":"&")+"jracrandom="+(new Date).getTime(),e("<img>").attr("src",l).load(f()))})}}(jQuery),define("jquery.jrac",function(){}),define("registration/views/fbimage-board",["require","text!registration/templates/fbimage-board.html","facade","views","utils","jquery.jrac"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=i.BaseView,u=r._,a=r.$,f=s.lib.Channel;return n=o.extend({tagName:"div",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){console.log("fb image board render"),console.log("fb image board collection"),console.log(this.collection);var e=this;o.prototype.render.call(this)},selectArea:function(e,t){a("#x1").val(t.x1),a("#y1").val(t.y1),a("#x2").val(t.x2),a("#y2").val(t.y2),a("#w").val(t.width),a("#h").val(t.height)},initCropView:function(){a("#image-select").jrac({crop_width:150,crop_height:150,crop_aspect_ratio:"1:1",crop_x:100,crop_y:100,image_width:400,viewport_onload:function(){var e=this,t=e.$container.parent(".pane").find(".coords input:hidden"),n=["jrac_crop_x","jrac_crop_y","jrac_crop_width","jrac_crop_height","jrac_image_width","jrac_image_height"];for(var r=0;r<n.length;r++){var i=n[r];e.observator.register(i,t.eq(r)),t.eq(r).bind(i,function(e,t,n){a(this).val(n)}).change(i,function(t){var n=t.data;e.$image.scale_proportion_locked=e.$container.parent(".pane").find(".coords input:checkbox").is(":checked"),e.observator.set_property(n,a(this).val())})}e.$container.append('<div class="natual-size">Image natual size: '+e.$image.originalWidth+" x "+e.$image.originalHeight+"</div>")}}).bind("jrac_events",function(e,t){var n=a(this).parents(".pane").find(".coords input");n.css("background-color",t.observator.crop_consistent()?"chartreuse":"salmon")})},removeCropView:function(){a("#image-select").jrac("destroy"),a("#image-select").parent().find(".natual-size").remove()},getImageInfo:function(){var e=this.$(".coords :input").serializeArray(),t=this.model.get("payload");a.each(e,function(e,n){t[n.name]=n.value}),this.model.set("payload",t)}}),n}),define("text!registration/templates/picture_buttons.html",[],function(){return'\r\n<div id="picture-buttons">\r\n    <a href="#" class="use_image">Use This Image</a>\r\n    <a href="#" class="upload_image">Upload a New Image</a>\r\n</div>\r\n'}),define("registration/views/picture_buttons",["require","text!registration/templates/picture_buttons.html","vendor","facade","views","utils"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=i.BaseView,u=s.lib.Channel,a=e("vendor"),f=a.Mustache;return n=o.extend({tagName:"div",className:"picture-buttons clearfix",template:t,events:{"click .use_image":"clickUseImage","click .upload_image":"clickUploadImage"},render:function(){var e=f.to_html(this.template);return this.$el.html(e),this},clickUseImage:function(e){e.preventDefault(),u("registration-use-image").publish()},clickUploadImage:function(e){e.preventDefault(),u("registration-upload-image").publish()}}),n}),define("registration/views/fbimage-list",["facade","utils","registration/views/fbimage-item","media/views/image-list","registration/views/fbimage-board","registration/views/picture_buttons","models/base"],function(e,t,n,r,i,s,o){var u,a=e._;return u=r.extend({id:"fbimage-list",name:"Facebook Image List",tagName:"div",_tagName:"div",_className:"fbimage",_view:n,setupAddView:function(){console.log("setup Addview");var e=this,t=new s,n=this.addChildView(t);this.childViews.buttons=t,this.callbacks.add(function(){n(),t.render(),e.$el.append(t.el)})},setupBoardView:function(){function r(){var t=e.childViews.board;t.getImageInfo();var n=t.model.get("payload"),r=new o(n);r.url=function(){return testpath?testpath+"/user/savecrop":"/api/user/savecrop"},r.saveSuccess=function(t,n){o.prototype.saveSuccess.call(this,t,n);var r=t.get("exec_data"),i=t.get("payload");!r.exec_error&&i&&Channel("registration-change-picture").publish(i.image_path),$("#"+e.id).dialog("close")},r.saveError=function(t,n){o.prototype.saveError.call(this,t,n),$("#"+e.id).dialog("close")},r.save()}function s(){$("#"+e.id).dialog("close")}console.log("setup Board View"),console.log(this.collection),console.log(this.collection.at(0));var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.board=t,this.callbacks.add(function(){t.render(),e.$el.prepend(t.el),a.delay(t.initCropView,400)}),Channel("changeimage"+this.collection.id).subscribe(this.changeBoard),Channel("registration-use-image").subscribe(r),Channel("registration-upload-image").subscribe(s)},changeBoard:function(e){console.log("changeBoard"),console.log(e),this.removeCropView(),this.childViews.board.model=e,this.childViews.board.render(),this.childViews.board.initCropView()},initCropView:function(){this.childViews.board.initCropView()},removeCropView:function(){this.childViews.board.removeCropView()}}),u}),define("registration/views/register_facebook",["require","text!registration/templates/register_facebook.html","facade","views","utils","jquery.pstrength","registration/collections/fbimages","registration/views/fbimage-list"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=i.SectionView,a=e("registration/collections/fbimages"),f=e("registration/views/fbimage-list");return n=u.extend({id:"main-content",events:{keypress:"stopSubmit","click .change-field":"changeField","click .diff_fb_pic":"diffFBPicture","click .upload_new_image":"uploadNewImage","click .next":"nextStep"},template:t,initialize:function(e){function n(e){t.$(".picture").attr("src",e)}function r(){t.initFBPictures()}function i(){t.initUploadImage()}var t=this;if(!this.model)throw new Error("RegistrationFacebookView expected options.model.");t.parseFBData(this.model.get("payload")),u.prototype.initialize.call(this,e),o("registration-change-picture").subscribe(n),o("registration-diff-fbpicture").subscribe(r),o("registration-upload-image").subscribe(i)},childViews:{},render:function(e,t,n){u.prototype.render.call(this,e,t,n),this.$(".password").pstrength()},stopSubmit:function(e){var t=e.keyCode?e.keyCode:e.which;t==13&&e.preventDefault()},diffFBPicture:function(e){e.preventDefault(),this.initFBPictures()},uploadNewImage:function(e){e.preventDefault(),this.initUploadImage()},parseFBData:function(e){e.hs_exists=e.high_school?!0:!1,e.dob_exists=e.birthday?!0:!1,e.email_exists=e.email?!0:!1,this.model.set("payload",e)},initFBPictures:function(){var e=this;this.fbimages?($("#"+this.fbImageListView.id).dialog({width:"80%",close:e.removeListView}),this.fbImageListView.initCropView()):(this.fbimages=new a,this.fbimages.fetch(),$.when(this.fbimages.request).done(function(){debug.log("this.fbimages are as follows"),debug.log(e.fbimages.toJSON()),e.setupFBPictures()}))},setupFBPictures:function(){var e=this;this.fbImageListView=new f({collection:this.fbimages});var t=this.addChildView(this.fbImageListView);this.childViews.fbImageListView=this.fbImageListView,this.callbacks.add(function(){t()}),this.fbImageListView.render(),this.$el.append(e.fbImageListView.el),$("#"+this.fbImageListView.id).dialog({width:"80%",close:e.removeListView})},removeListView:function(){this.childViews.fbImageListView.removeCropView()},initUploadImage:function(){alert("Upload Image")},changeField:function(e){e.preventDefault(),$parent=this.$(e.target).parent(),id=$parent.attr("data-name"),value=$parent.attr("data-value"),$parent.html('<input type="text" id="'+id+'" name="'+id+'" value="'+value+'"/>')},nextStep:function(e){e.preventDefault();var t=this.$(":input").serializeArray(),n=this.model.get("payload");$.each(t,function(e,t){n[t.name]=t.value});if(n["password"]==""||n["password-again"]==""){alert("Please input a password");return}if(n["password"]!=n["password-again"]){alert("Please input a password correctly");return}if(n["agree"]==null){alert("Please agree to the Terms of Service");return}this.model.attributes.id=!1,this.model.set({payload:n,id:1}),this.model.url=function(){return testpath?testpath+"/user/basics":"/api/user/basics/"+n.users_id},this.model.save(),o("registration-select-org").publish()}}),n}),define("text!registration/templates/register_email.html",[],function(){return'\r\n<h1>The Basics</h1>\r\n<div class="row-fluid">\r\n    <form class="form-horizontal">\r\n        <div class="control-group">\r\n            <label class="control-label" for="first_name">First Name: </label>\r\n            <div class="controls">\r\n                <input type="text" name="firstname" id="first_name" placeholder="First Name">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="last_name">Last Name: </label>\r\n            <div class="controls">\r\n                <input type="text" name="lastname" id="last_name" placeholder="Last Name">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="dob">DOB: </label>\r\n            <div class="controls">\r\n                <input type="text" name="dob" id="dob" placeholder="Birthday">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="email">Email: </label>\r\n            <div class="controls">\r\n                <input type="text" name="email" id="email" placeholder="Email">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label">Gender: </label>\r\n            <div class="controls" id="gender">\r\n                <label for="male"><input type="radio" id="male" name="gender" value="M"> Male</label>\r\n                <label for="female"><input type="radio" id="female" name="gender" value="F"> Female</label>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="password">Password: </label>\r\n            <div class="controls">\r\n                <input type="password" id="password" name="password" placeholder="Password"/>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="re_password">Again: </label>\r\n            <div class="controls">\r\n                <input type="password" id="re_password" name="re_password" placeholder="Password Again"/>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <p class="agree-error text-error"></p>\r\n            <label for="accept_terms">\r\n                <input type="checkbox" id="accept_terms" name="accept_terms"/>I have read and agree to the <a href="#">Terms of Service</a>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </label>            \r\n            <a href="#" class="next">What\'s Next</a>\r\n        </div>\r\n    </form>\r\n</div>'}),define("registration/views/register_email",["require","text!registration/templates/register_email.html","facade","views","utils","jquery.pstrength","models/base"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=i.SectionView,a=e("models/base");return n=u.extend({id:"main-content",events:{keypress:"stopSubmit","click .next":"nextStep"},template:t,initialize:function(e){if(!this.model)throw new Error("RegistrationEmailView expected options.model.");u.prototype.initialize.call(this,e)},render:function(e,t,n){u.prototype.render.call(this,e,t,n),this.$("#password").pstrength()},stopSubmit:function(e){var t=e.keyCode?e.keyCode:e.which;t==13&&e.preventDefault()},nextStep:function(e){e.preventDefault();var t=this.$(":input").serializeArray(),n={};$.each(t,function(e,t){n[t.name]=t.value});var r=new a(n);r.url=function(){return"/api/user/register"},r.saveSuccess=function(e,t){a.prototype.saveSuccess.call(this,e,t);var n=t.exec_data,r=t.payload;n.exec_error||o("registration-select-org").publish(r)},r.save()}}),n}),define("text!registration/templates/upload_image.html",[],function(){return'\r\nUpload Image\r\n\r\n<a href="#" class="next">What\'s Next</a>'}),define("registration/views/upload_image",["require","text!registration/templates/upload_image.html","facade","views","utils"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=i.SectionView;return n=u.extend({id:"main-content",events:{"click .next":"nextStep"},template:t,initialize:function(e){u.prototype.initialize.call(this,e)},nextStep:function(e){e.preventDefault(),o("registration-select-org").publish()}}),n}),define("text!registration/templates/select_org.html",[],function(){return'\r\n<h1>Athletic Organizations</h1>\r\n<div class="step-club">\r\n<div>Link Up With Your Teams</div>\r\n<a href="#" class="find_club">\r\n    <h3>Find My Club</h3>\r\n    <p>Use our club locator to find your sports club and link up with your team.</p>\r\n</a>\r\n</div>\r\n{{#show_highschool}}\r\n<div class="step-highschool" style="display:none;">\r\n<div class="text-error">Only display high school chooser if age <= 18</div>\r\n<a href="#" class="high_school">\r\n    <h3>High School Locator</h3>\r\n    <p>If you play for your high school, click here to find your school and link up with your team.</p>\r\n</a>\r\n</div>\r\n{{/show_highschool}}\r\n<div class="step-sport" style="display:none;">\r\n<a href="#" class="indiv_sports">\r\n    <h3>Individual Sports</h3>\r\n    <p>If you are an athlete who competes without a team, this is where you\'ll find your sport.</p>\r\n</a>\r\n</div>\r\n<div class="step-next" style="display:none;">\r\n<a href="#" class="next">What\'s Next</a>\r\n</div>\r\n'}),define("registration/models/my_club",["models/base"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/myclub":"/api/user/basics/"+this.id}}),t}),define("text!registration/templates/find_my_club.html",[],function(){return'\r\n<h2>Find My Sports Club</h2>\r\n<form id="findClubFrm" class="form-horizontal">\r\n    <div class="control-group">\r\n        <label class="control-label" for="states_id">What State?</label>\r\n        <div class="controls">\r\n            <input id="states_id" name="state_name" placeholder="Just Start Typing" value="{{state}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label class="control-label" for="sports_id">What Sport?</label>\r\n        <div class="controls">\r\n            <input id="sports_id" name="sport_name" placeholder="Just Start Typing" value="{{sport}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label class="control-label" for="orgs_id">Club Name</label>\r\n        <div class="controls">\r\n            <input id="orgs_id" name="org_name" placeholder="Just Start Typing" value="{{club}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="complevels"></div>\r\n    <div class="seasons"></div>\r\n    <a href="#" class="back">Go Back</a>    \r\n    <a href="#" class="not_find">Can\'t Find Your Club?</a>\r\n    <a href="#" class="continue">Continue</a>\r\n</form>\r\n'}),function(e,t){function n(t,n){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var i=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var r,i,s=e(this[0]);s.length&&s[0]!==document;){if(r=s.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(i=parseInt(s.css("zIndex"),10),!isNaN(i)&&0!==i))return i;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;i.length>r;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)try{e(n).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(n,r,i){var s,o,u,a,f={},l=n.split(".")[0];n=n.split(".")[1],s=l+"-"+n,i||(i=r,r=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},o=e[l][n],u=e[l][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new u(e,n)},e.extend(u,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new r,a.options=e.widget.extend({},a.options),e.each(i,function(n,i){return e.isFunction(i)?(f[n]=function(){var e=function(){return r.prototype[n].apply(this,arguments)},t=function(e){return r.prototype[n].apply(this,e)};return function(){var n,r=this._super,s=this._superApply;return this._super=e,this._superApply=t,n=i.apply(this,arguments),this._super=r,this._superApply=s,n}}(),t):(f[n]=i,t)}),u.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:n},f,{constructor:u,namespace:l,widgetName:n,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,u,n._proto)}),delete o._childConstructors):r._childConstructors.push(u),e.widget.bridge(n,u)},e.widget.extend=function(n){for(var i,o,u=r.call(arguments,1),a=0,f=u.length;f>a;a++)for(i in u[a])o=u[a][i],u[a].hasOwnProperty(i)&&o!==t&&(n[i]=e.isPlainObject(o)?e.isPlainObject(n[i])?e.widget.extend({},n[i],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,i){var o=i.prototype.widgetFullName||n;e.fn[n]=function(u){var f="string"==typeof u,l=r.call(arguments,1),c=this;return u=!f&&l.length?e.widget.extend.apply(null,[u].concat(l)):u,f?this.each(function(){var r,i=e.data(this,o);return i?e.isFunction(i[u])&&"_"!==u.charAt(0)?(r=i[u].apply(i,l),r!==i&&r!==t?(c=r&&r.jquery?c.pushStack(r.get()):r,!1):t):e.error("no such method '"+u+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+u+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(u||{})._init():e.data(this,o,new i(u,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i,s,o,u=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(u={},i=n.split("."),n=i.shift(),i.length){for(s=u[n]=e.widget.extend({},this.options[n]),o=0;i.length-1>o;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];if(n=i.pop(),r===t)return s[n]===t?null:s[n];s[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];u[n]=r}return this._setOptions(u),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,r,i){var s,o=this;"boolean"!=typeof n&&(i=r,r=n,n=!1),i?(r=s=e(r),this.bindings=this.bindings.add(r)):(i=r,r=this.element,s=this.widget()),e.each(i,function(i,u){function f(){return n||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof u?o[u]:u).apply(o,arguments):t}"string"!=typeof u&&(f.guid=u.guid=u.guid||f.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,h=l[2];h?s.delegate(h,c,f):r.bind(c,f)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function r(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var n,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),r=o.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),s=n-r},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var s,p,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=i(b),b[0].preventDefault&&(t.at="left top"),p=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e,n,r=(t[this]||"").split(" ");1===r.length&&(r=f.test(r[0])?r.concat(["center"]):l.test(r[0])?["center"].concat(r):["center","center"]),r[0]=f.test(r[0])?r[0]:"center",r[1]=l.test(r[1])?r[1]:"center",e=c.exec(r[0]),n=c.exec(r[1]),x[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(r[0])[0],h.exec(r[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=v:"center"===t.at[1]&&(g.top+=v/2),s=n(x.at,p,v),g.left+=s[0],g.top+=s[1],this.each(function(){var i,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=r(this,"marginLeft"),y=r(this,"marginTop"),T=c+d+r(this,"marginRight")+E.width,N=h+y+r(this,"marginBottom")+E.height,C=e.extend({},g),L=n(x.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?C.left-=c:"center"===t.my[0]&&(C.left-=c/2),"bottom"===t.my[1]?C.top-=h:"center"===t.my[1]&&(C.top-=h/2),C.left+=L[0],C.top+=L[1],e.support.offsetFractions||(C.left=a(C.left),C.top=a(C.top)),i={marginLeft:d,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:p,targetHeight:v,elemWidth:c,elemHeight:h,collisionPosition:i,collisionWidth:T,collisionHeight:N,offset:[s[0]+L[0],s[1]+L[1]],my:t.my,at:t.at,within:w,elem:l})}),t.using&&(f=function(e){var n=m.left-C.left,r=n+p-c,i=m.top-C.top,s=i+v-h,a={target:{element:b,left:m.left,top:m.top,width:p,height:v},element:{element:l,left:C.left,top:C.top,width:c,height:h},horizontal:0>r?"left":n>0?"right":"center",vertical:0>s?"top":i>0?"bottom":"middle"};c>p&&p>u(n+r)&&(a.horizontal="center"),h>v&&v>u(i+s)&&(a.vertical="middle"),a.important=o(u(n),u(r))>o(u(i),u(s))?"horizontal":"vertical",t.using.call(this,e,a)}),l.offset(e.extend(C,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,u=e.left-t.collisionPosition.marginLeft,a=i-u,f=u+t.collisionWidth-s-i;t.collisionWidth>s?a>0&&0>=f?(n=e.left+a+t.collisionWidth-s-i,e.left+=a-n):e.left=f>0&&0>=a?i:a>f?i+s-t.collisionWidth:i:a>0?e.left+=a:f>0?e.left-=f:e.left=o(e.left-u,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,u=e.top-t.collisionPosition.marginTop,a=i-u,f=u+t.collisionHeight-s-i;t.collisionHeight>s?a>0&&0>=f?(n=e.top+a+t.collisionHeight-s-i,e.top+=a-n):e.top=f>0&&0>=a?i:a>f?i+s-t.collisionHeight:i:a>0?e.top+=a:f>0?e.top-=f:e.top=o(e.top-u,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,f=e.left-t.collisionPosition.marginLeft,l=f-a,c=f+t.collisionWidth-o-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>l?(n=e.left+h+p+d+t.collisionWidth-o-s,(0>n||u(l)>n)&&(e.left+=h+p+d)):c>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+d-a,(r>0||c>u(r))&&(e.left+=h+p+d))},top:function(e,t){var n,r,i=t.within,s=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,f=e.top-t.collisionPosition.marginTop,l=f-a,c=f+t.collisionHeight-o-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>l?(r=e.top+p+d+v+t.collisionHeight-o-s,e.top+p+d+v>l&&(0>r||u(l)>r)&&(e.top+=p+d+v)):c>0&&(n=e.top-t.collisionPosition.marginTop+p+d+v-a,e.top+p+d+v>c&&(n>0||c>u(n))&&(e.top+=p+d+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(i=!0);return i||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if("parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=["document"===i.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===i.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===i.containment?0:e(window).scrollLeft())+e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===i.containment?0:e(window).scrollTop())+(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor===Array)i.containment.constructor===Array&&(this.containment=i.containment);else{if(n=e(i.containment),r=n[0],!r)return;t="hidden"!==e(r).css("overflow"),this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderRightWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderBottomWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==u&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height,m>u-v&&a+v>m&&y>f-v&&l+v>y||m>u-v&&a+v>m&&b>f-v&&l+v>b||g>u-v&&a+v>g&&y>f-v&&l+v>y||g>u-v&&a+v>g&&b>f-v&&l+v>b?("inner"!==d.snapMode&&(r=v>=Math.abs(f-b),i=v>=Math.abs(l-y),s=v>=Math.abs(u-g),o=v>=Math.abs(a-m),r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,"outer"!==d.snapMode&&(r=v>=Math.abs(f-y),i=v>=Math.abs(l-b),s=v>=Math.abs(u-m),o=v>=Math.abs(a-g),r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});r.length&&(t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];n.length>t;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(i=!0,!1):undefined}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,n,r){if(!n.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,h=n.offset.top,p=h+n.proportions.height;switch(r){case"fit":return o>=l&&c>=u&&a>=h&&p>=f;case"intersect":return o+e.helperProportions.width/2>l&&c>u-e.helperProportions.width/2&&a+e.helperProportions.height/2>h&&p>f-e.helperProportions.height/2;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,h,n.proportions.height)&&t(i,l,n.proportions.width);case"touch":return(a>=h&&p>=a||f>=h&&p>=f||h>a&&f>p)&&(o>=l&&c>=o||u>=l&&c>=u||l>o&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;s.length>r;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;u.length>i;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,s,o,u=e.ui.intersect(t,this,this.options.tolerance),a=!u&&this.isover?"isout":u&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s}),o.length&&(r=e.data(o[0],"ui-droppable"),r.greedyChild="isover"===a)),r&&"isover"===a&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),r&&"isout"===a&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(n){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=t(this.helper.css("left")),i=t(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];return p?(n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,r,s,o,u,a=this.options;u={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,r=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,t>u.minWidth&&(u.minWidth=t),s>u.minHeight&&(u.minHeight=s),u.maxWidth>r&&(u.maxWidth=r),u.maxHeight>o&&(u.maxHeight=o)),this._vBoundaries=u},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,r=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(r.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(r.height-e.height),e.left=t.left+(r.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,r=this.axis,s=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,u=n(e.width)&&t.minWidth&&t.minWidth>e.width,a=n(e.height)&&t.minHeight&&t.minHeight>e.height,f=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(r),h=/nw|ne|n/.test(r);return u&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),u&&c&&(e.left=f-t.minWidth),s&&c&&(e.left=f-t.maxWidth),a&&h&&(e.top=l-t.minHeight),o&&h&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,r,i,s=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(i=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")],t=0;n.length>t;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0);i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;p&&(f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=t(n.css("padding"+i))}),f.containerOffset=n.offset(),f.containerPosition=n.position(),f.containerSize={height:n.innerHeight()-r[3],width:n.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a}))},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?r(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)})},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?a(i.alsoResize):e.each(i.alsoResize,function(e,t){a(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u="number"==typeof n.grid?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&h>n.maxWidth,v=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,s=e.data(this,"selectable-item");return s?(r=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),s.unselecting=!r,s.selecting=r,s.selected=r,r?n._trigger("selecting",t,{selecting:s.element}):n._trigger("unselecting",t,{unselecting:s.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||s>n.right||n.top>a||o>n.bottom):"fit"===i.tolerance&&(f=n.left>s&&u>n.right&&n.top>o&&a>n.bottom),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):undefined}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r?!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&a>r+f&&t+l>s&&o>t+l;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>u&&a>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&r||"left"===s&&!r:i&&("down"===i&&n||"up"===i&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--)for(i=e(a[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),s=e(t.document[0].createElement(r)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?s.append("<td colspan='99'>&#160;</td>"):"img"===r&&s.attr("src",t.currentItem.attr("src")),n||s.css("visibility","hidden"),s},update:function(e,o){(!n||r.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(r){var s,o,u,a,f,l,c,h,p,d,v=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(v&&e.contains(this.containers[s].element[0],v.element[0]))continue;v=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",r,this._uiHash(this)),this.containers[s].containerCache.over=0);if(v)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",r,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(u=1e4,a=null,d=v.floating||n(this.currentItem),f=d?"left":"top",l=d?"width":"height",c=this.positionAbs[f]+this.offset.click[f],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!d||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(h=this.items[o].item.offset()[f],p=!1,Math.abs(h-c)>Math.abs(h+this.items[o][l]-c)&&(p=!0,h+=this.items[o][l]),u>Math.abs(h-c)&&(u=Math.abs(h-c),a=this.items[o],this.direction=p?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(r,a,null,!0):this._rearrange(r,null,this.containers[m].element,!0),this._trigger("change",r,this._uiHash()),this.containers[m]._trigger("change",r,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",r,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;r.length>n;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;r.length>n;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var t=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(t.active===!1&&t.collapsible===!0||!this.headers.length)&&(t.active=!1,this.active=e()),t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),"fill"===i?(n=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1||(n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,o){var u,a,f,l=this,c=0,h=e.length&&(!t.length||e.index()<t.index()),p=this.options.animate||{},d=h&&p.down||p,v=function(){l._toggleComplete(o)};return"number"==typeof d&&(f=d),"string"==typeof d&&(a=d),a=a||d.easing||p.easing,f=f||d.duration||p.duration,t.length?e.length?(u=e.show().outerHeight(),t.animate(n,{duration:f,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(r,{duration:f,easing:a,complete:v,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(u-t.outerHeight()-c),c=0)}}),undefined):t.animate(n,f,a,v):e.animate(r,f,a,v)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s="textarea"===i,o="input"===i;this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,n=!0,undefined;t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,r.preventDefault(),undefined;if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){return r?(r=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===n||e.contains(n,r.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(r){n===t&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,r,i,s="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",u="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},f=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?e(r).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,u=this.options,c="checkbox"===this.type||"radio"===this.type,p=c?"":"ui-state-active",d="ui-state-focus";null===u.label&&(u.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){u.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){u.disabled||e(this).removeClass(p)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){i||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){u.disabled||(i=!1,n=e.pageX,r=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){u.disabled||(n!==e.pageX||r!==e.pageY)&&(i=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return u.disabled||i?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||i)return!1;e(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var t=o.element[0];f(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return u.disabled?!1:(e(this).addClass("ui-state-active"),t=this,o.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return u.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return u.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+o+" "+u).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?f(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(u),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function i(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.2"}});var s,o="datepicker",u=(new Date).getTime();e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return i(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,o,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),("focus"===r||"both"===r)&&t.focus(this._showDatepicker),("button"===r||"both"===r)&&(i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,o,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,r,s,u){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),i(p.settings,s||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=u?u.length?u:[u.pageX,u.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,o);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,o);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,o);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,s){var o,u,a,f,l=this._getInst(n);return 2===arguments.length&&"string"==typeof r?"defaults"===r?e.extend({},e.datepicker._defaults):l?"all"===r?e.extend({},l.settings):this._get(l,r):null:(o=r||{},"string"==typeof r&&(o={},o[r]=s),l&&(this._curInst===l&&this._hideDatepicker(),u=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),i(l.settings,o),null!==a&&o.dateFormat!==t&&o.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),null!==f&&o.dateFormat!==t&&o.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in o&&(o.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,u),this._updateAlternate(l),this._updateDatepicker(l)),t)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(n){var r,i,s=e.datepicker._getInst(n.target);return e.datepicker._get(s,"constrainInput")?(r=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),i=String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),n.ctrlKey||n.metaKey||" ">i||!r||r.indexOf(i)>-1):t},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,r,s,o,u,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),s=r?r.apply(t,[t,n]):{},s!==!1&&(i(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),i=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",o*i+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,u=this._curInst;!u||t&&u!==e.data(t,o)||this._datepickerShowing&&(n=this._get(u,"showAnim"),r=this._get(u,"duration"),i=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[n]||e.effects[n])?u.dpDiv.hide(n,e.datepicker._get(u,"showOptions"),r,i):u.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(u,"onClose"),s&&s.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,n+("M"===r?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+("M"===r?"Month":"Year")]=s["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,r,i){if(null==n||null==r)throw"Invalid arguments";if(r="object"==typeof r?""+r:r+"",""===r)return null;var s,o,u,a,f=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,p=(i?i.dayNames:null)||this._defaults.dayNames,d=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,v=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,y=-1,b=-1,w=!1,E=function(e){var t=n.length>s+1&&n.charAt(s+1)===e;return t&&s++,t},S=function(e){var t=E(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=RegExp("^\\d{1,"+n+"}"),s=r.substring(f).match(i);if(!s)throw"Missing number at position "+f;return f+=s[0].length,parseInt(s[0],10)},x=function(n,i,s){var o=-1,u=e.map(E(n)?s:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(u,function(e,n){var i=n[1];return r.substr(f,i.length).toLowerCase()===i.toLowerCase()?(o=n[0],f+=i.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+f},T=function(){if(r.charAt(f)!==n.charAt(s))throw"Unexpected literal at position "+f;f++};for(s=0;n.length>s;s++)if(w)"'"!==n.charAt(s)||E("'")?T():w=!1;else switch(n.charAt(s)){case"d":y=S("d");break;case"D":x("D",h,p);break;case"o":b=S("o");break;case"m":g=S("m");break;case"M":g=x("M",d,v);break;case"y":m=S("y");break;case"@":a=new Date(S("@")),m=a.getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"!":a=new Date((S("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"'":E("'")?T():w=!0;break;default:T()}if(r.length>f&&(u=r.substr(f),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),b>-1)for(g=1,y=b;;){if(o=this._getDaysInMonth(m,g-1),o>=y)break;g++,y-=o}if(a=this._daylightSavingAdjust(new Date(m,g-1,y)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==y)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=e.length>r+1&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))for(;n>r.length;)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;e.length>r;r++)if(h)"'"!==e.charAt(r)||a("'")?c+=e.charAt(r):h=!1;else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=e.length>t+1&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;e.length>t;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);f;){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=7*parseInt(f[1],10);break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=null==n||""===n?r:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"==""+o?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),i===e.selectedMonth&&s===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+u].datepicker._adjustDate(r,-n,"M")},next:function(){window["DP_jQuery_"+u].datepicker._adjustDate(r,+n,"M")},hide:function(){window["DP_jQuery_"+u].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+u].datepicker._gotoToday(r)},selectDay:function(){return window["DP_jQuery_"+u].datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+u].datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+u].datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;if(0>Z&&(Z+=12,et--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",S=0;V[0]>S;S++){for(x="",this.maxRows=4,T=0;V[1]>T;T++){if(N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?U?s:r:"")+(/all|right/.test(C)&&0===S?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;7>E;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";for(k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M)),H=0;D>H;H++){for(k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",E=0;7>E;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&G>P||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!g||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!a||l>=r.getMonth())&&(!f||i.getMonth()>=l)&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}if(y||(b+=w+(!s&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&m&&g?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.2",window["DP_jQuery_"+u]=e}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,s){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(s))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(o,u){r.position=[u.position.left-n.document.scrollLeft(),u.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,t(u))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,s=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,s){r.height=e(this).height(),r.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(r){var s=this,o=!1,u={};e.each(r,function(e,r){s._setOption(e,r),e in t&&(o=!0),e in n&&(u[e]=r)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,r=[],i=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(r=n.split?n.split(" "):[n[0],n[1]],1===r.length&&(r[1]=r[0]),e.each(["left","top"],function(e,t){+r[e]===r[e]&&(i[e]=r[e],r[e]=t)}),n={my:r[0]+(0>i[0]?i[0]:"+"+i[0])+" "+r[1]+(0>i[1]?i[1]:"+"+i[1]),at:r.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(n){var r=e(n.target).closest(".ui-menu-item");!this.mouseHandled&&r.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(n),r.has(".ui-menu").length?this.expand(n):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(n){var r=e(n.currentTarget);r.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(n,r)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(n){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(n)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(n){e(n.target).closest(".ui-menu").length||this.collapseAll(n),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var n=e(this);n.data("ui-menu-submenu-carat")&&n.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(n){function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,s,o,u,a,f=!0;switch(n.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(n);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(n);break;case e.ui.keyCode.HOME:this._move("first","first",n);break;case e.ui.keyCode.END:this._move("last","last",n);break;case e.ui.keyCode.UP:this.previous(n);break;case e.ui.keyCode.DOWN:this.next(n);break;case e.ui.keyCode.LEFT:this.collapse(n);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(n);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(n);break;case e.ui.keyCode.ESCAPE:this.collapse(n);break;default:f=!1,s=this.previousFilter||"",o=String.fromCharCode(n.keyCode),u=!1,clearTimeout(this.filterTimer),o===s?u=!0:o=s+o,a=RegExp("^"+r(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),i=u&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(n.keyCode),a=RegExp("^"+r(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),i.length?(this.focus(n,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}f&&n.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var n,r=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var n=e(this),i=n.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),n.attr("aria-labelledby",i.attr("id"))}),n=i.add(this.element),n.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),n.children(":not(.ui-menu-item)").each(function(){var n=e(this);/[^\-\u2014\u2013\s]/.test(n.text())||n.addClass("ui-widget-content ui-menu-divider")}),n.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(n){var r,i,s,o,u,a;this._hasScroll()&&(r=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=n.offset().top-this.activeMenu.offset().top-r-i,o=this.activeMenu.scrollTop(),u=this.activeMenu.height(),a=n.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>u&&this.activeMenu.scrollTop(o+s-u+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(n){var r=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(n.parents(".ui-menu")).hide().attr("aria-hidden","true"),n.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(r)},collapseAll:function(n,r){clearTimeout(this.timer),this.timer=this._delay(function(){var s=r?this.element:e(n&&n.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(n),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,r)},nextPage:function(n){var r,i,s;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return r=e(this),0>r.offset().top-i-s}),this.focus(n,r)):this.focus(n,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(n),undefined)},previousPage:function(n){var r,i,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return r=e(this),r.offset().top-i+s>0}),this.focus(n,r)):this.focus(n,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(n),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(n){this.active=this.active||e(n.target).closest(".ui-menu-item");var r={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(n,!0),this._trigger("select",n,r)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;n>t;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))&&(i=n,s=e(this),o=t)}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>r||1===t&&r>n)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,n){var r,i,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,i=arguments[0],s=0;r.length>s;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=100*((a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())),l["horizontal"===a.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&("horizontal"===a.orientation?(0===r&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(0===r&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?100*((r-i)/(s-i)):0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),"max"===o&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),"max"===o&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(n){var r,i,s,o,u=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),r=this._start(n,u),r===!1))return}switch(o=this.options.step,i=s=this.options.values&&this.options.values.length?this.values(u):this.value(),n.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(n,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var s=n.attr(r);void 0!==s&&s.length&&(t[r]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&r.min>e?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++i}function r(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var i=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var n=this.options.active,r=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(r,s){return e(s).attr("aria-controls")===i?(n=r,!1):t}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=this.tabs.length?0:!1)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=r?!1:0)),!r&&n===!1&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(n){var r=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(r),s=!0;if(!this._handlePageNav(n)){switch(n.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return n.preventDefault(),clearTimeout(this.activating),this._activate(i),t;case e.ui.keyCode.ENTER:return n.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),t;default:return}n.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,s),n.ctrlKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(n){return n.altKey&&n.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):n.altKey&&n.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,n){function r(){return t>i&&(t=0),0>t&&(t=i),t}for(var i=this.tabs.length-1;-1!==e.inArray(r(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,n){return"active"===e?(this._activate(n),t):"disabled"===e?(this._setupDisabled(n),t):(this._super(e,n),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",n),n||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(n),"heightStyle"===e&&this._setupHeightStyle(n),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var s,o,u,a=e(i).uniqueId().attr("id"),f=e(i).closest("li"),l=f.attr("aria-controls");r(i)?(s=i.hash,o=t.element.find(t._sanitizeSelector(s))):(u=t._tabId(f),s="#"+u,o=t.element.find(s),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":s.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,r=0;n=this.tabs[r];r++)t===!0||-1!==e.inArray(r,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();"fill"===t?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1||(n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),f.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l))},_toggle:function(t,n){function r(){s.running=!1,s._trigger("activate",t,n)}function i(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,r):(o.show(),r())}var s=this,o=n.newPanel,u=n.oldPanel;this.running=!0,u.length&&this.options.hide?this._hide(u,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u.hide(),i()),u.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),o.length&&u.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;r!==!1&&(n===t?r=!1:(n=this._getIndex(n),r=e.isArray(r)?e.map(r,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r))},disable:function(n){var r=this.options.disabled;if(r!==!0){if(n===t)r=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,r))return;r=e.isArray(r)?e.merge([n],r).sort():[n]}this._setupDisabled(r)}},load:function(t,n){t=this._getIndex(t);var i=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),u=this._getPanelForTab(s),a={tab:s,panel:u};r(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),i._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&i.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr},1)})))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function t(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);-1!==i&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var r=0;e.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var t,r=e(this);r.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;return"string"==typeof r?this._open(t,e,r):(n=r.call(e[0],function(n){e.data("ui-tooltip-open")&&i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,r,i){function s(e){f.of=e,o.is(":hidden")||o.position(f)}var o,u,a,f=e.extend({},this.options.position);if(i){if(o=this._find(r),o.length)return o.find(".ui-tooltip-content").html(i),void 0;r.is("[title]")&&(n&&"mouseover"===n.type?r.attr("title",""):r.removeAttr("title")),o=this._tooltip(r),t(r,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:s}),s(n)):o.position(e.extend({of:r},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(f.of),clearInterval(a))},e.fx.interval)),this._trigger("open",n,{tooltip:o}),u={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(o)}},n&&"mouseover"!==n.type||(u.mouseleave="close"),n&&"focusin"!==n.type||(u.focusout="close"),this._on(!0,r,u)}},close:function(t){var r=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),n(s),o.stop(!0),this._hide(o,this.options.hide,function(){r._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+r++,i=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[n]=t,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function r(t,n){var r,i,o={};for(r in n)i=n[r],t[r]!==i&&(s[r]||(e.fx.step[r]||!isNaN(parseFloat(i)))&&(o[r]=i));return o}var i=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var t=e(this);return{el:t,start:n(this)}}),s=function(){e.each(i,function(e,n){t[n]&&o[n+"Class"](t[n])})},s(),f=f.map(function(){return this.end=n(this.el[0]),this.diff=r(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return"boolean"==typeof i||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.2",save:function(e,t){for(var r=0;t.length>r;r++)null!==t[r]&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var s,o;for(o=0;r.length>o;o++)null!==r[o]&&(s=e.data(n+r[o]),s===t&&(s=""),e.css(r[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function t(t){function r(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=n.complete,u=n.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),r()):o.call(i[0],n,r)}var n=r.apply(this,arguments),i=n.mode,s=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?i?this[i](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(r,s){var o,u,a,f=e(this),l=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(f,r.mode||"hide"),h=r.direction||"up",p=t.test(h),d=p?"height":"width",v=p?"top":"left",m=n.test(h),g={},y="show"===c;f.parent().is(".ui-effects-wrapper")?e.effects.save(f.parent(),l):e.effects.save(f,l),f.show(),o=e.effects.createWrapper(f).css({overflow:"hidden"}),u=o[d](),a=parseFloat(o.css(v))||0,g[d]=y?u:0,m||(f.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[v]=y?a:u+a),y&&(o.css(d,0),m||o.css(v,a+u)),o.animate(g,{duration:r.duration,easing:r.easing,queue:!1,complete:function(){"hide"===c&&f.hide(),e.effects.restore(f,l),e.effects.removeWrapper(f),s()}})}}(jQuery),function(e){e.effects.effect.bounce=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","height","width"],f=e.effects.setMode(u,n.mode||"effect"),l="hide"===f,c="show"===f,h=n.direction||"up",p=n.distance,d=n.times||5,v=2*d+(c||l?1:0),m=n.duration/v,g=n.easing,y="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,w=u.queue(),E=w.length;for((c||l)&&a.push("opacity"),e.effects.save(u,a),u.show(),e.effects.createWrapper(u),p||(p=u["top"===y?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[y]=0,u.css("opacity",0).css(y,b?2*-p:2*p).animate(o,m,g)),l&&(p/=Math.pow(2,d-1)),o={},o[y]=0,i=0;d>i;i++)s={},s[y]=(b?"-=":"+=")+p,u.animate(s,m,g).animate(o,m,g),p=l?2*p:p/2;l&&(s={opacity:0},s[y]=(b?"-=":"+=")+p,u.animate(s,m,g)),u.queue(function(){l&&u.hide(),e.effects.restore(u,a),e.effects.removeWrapper(u),r()}),E>1&&w.splice.apply(w,[1,0].concat(w.splice(E,v+1))),u.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","height","width"],f=e.effects.setMode(u,n.mode||"hide"),l="show"===f,c=n.direction||"vertical",h="vertical"===c,p=h?"height":"width",d=h?"top":"left",v={};e.effects.save(u,a),u.show(),i=e.effects.createWrapper(u).css({overflow:"hidden"}),s="IMG"===u[0].tagName?i:u,o=s[p](),l&&(s.css(p,0),s.css(d,o/2)),v[p]=l?o:0,v[d]=l?0:o/2,s.animate(v,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){l||u.hide(),e.effects.restore(u,a),e.effects.removeWrapper(u),r()}})}}(jQuery),function(e){e.effects.effect.drop=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],u=e.effects.setMode(s,n.mode||"hide"),a="show"===u,f=n.direction||"left",l="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f?"pos":"neg",h={opacity:a?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),i=n.distance||s["top"===l?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(l,"pos"===c?-i:i),h[l]=(a?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,s.animate(h,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}})}}(jQuery),function(e){e.effects.effect.explode=function(n,r){function i(){w.push(this),w.length===h*p&&s()}function s(){d.css({visibility:"visible"}),e(w).remove(),m||d.hide(),r()}var o,u,a,f,l,c,h=n.pieces?Math.round(Math.sqrt(n.pieces)):3,p=h,d=e(this),v=e.effects.setMode(d,n.mode||"hide"),m="show"===v,g=d.show().css("visibility","hidden").offset(),y=Math.ceil(d.outerWidth()/p),b=Math.ceil(d.outerHeight()/h),w=[];for(o=0;h>o;o++)for(f=g.top+o*b,c=o-(h-1)/2,u=0;p>u;u++)a=g.left+u*y,l=u-(p-1)/2,d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-u*y,top:-o*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:y,height:b,left:a+(m?l*y:0),top:f+(m?c*b:0),opacity:m?0:1}).animate({left:a+(m?0:l*y),top:f+(m?0:c*b),opacity:m?1:0},n.duration||500,n.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(n,r){var i=e(this),s=e.effects.setMode(i,n.mode||"toggle");i.animate({opacity:s},{queue:!1,duration:n.duration,easing:n.easing,complete:r})}}(jQuery),function(e){e.effects.effect.fold=function(n,r){var i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,n.mode||"hide"),f="show"===a,l="hide"===a,c=n.size||15,h=/([0-9]+)%/.exec(c),p=!!n.horizFirst,d=f!==p,v=d?["width","height"]:["height","width"],m=n.duration/2,g={},y={};e.effects.save(o,u),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),s=d?[i.width(),i.height()]:[i.height(),i.width()],h&&(c=parseInt(h[1],10)/100*s[l?0:1]),f&&i.css(p?{height:0,width:c}:{height:c,width:0}),g[v[0]]=f?s[0]:c,y[v[1]]=f?s[1]:0,i.animate(g,m,n.easing).animate(y,m,n.easing,function(){l&&o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),r()})}}(jQuery),function(e){e.effects.effect.highlight=function(n,r){var i=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,n.mode||"show"),u={backgroundColor:i.css("backgroundColor")};"hide"===o&&(u.opacity=0),e.effects.save(i,s),i.show().css({backgroundImage:"none",backgroundColor:n.color||"#ffff99"}).animate(u,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),r()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(n,r){var i,s=e(this),o=e.effects.setMode(s,n.mode||"show"),u="show"===o,a="hide"===o,f=u||"hide"===o,l=2*(n.times||5)+(f?1:0),c=n.duration/l,h=0,p=s.queue(),d=p.length;for((u||!s.is(":visible"))&&(s.css("opacity",0).show(),h=1),i=1;l>i;i++)s.animate({opacity:h},c,n.easing),h=1-h;s.animate({opacity:h},c,n.easing),s.queue(function(){a&&s.hide(),r()}),d>1&&p.splice.apply(p,[1,0].concat(p.splice(d,l+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(n,r){var i=e(this),s=e.effects.setMode(i,n.mode||"hide"),o="hide"===s,u=parseInt(n.percent,10)||150,a=u/100,f={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(n,{effect:"scale",queue:!1,fade:!0,mode:s,complete:r,percent:o?u:100,from:o?f:{height:f.height*a,width:f.width*a,outerHeight:f.outerHeight*a,outerWidth:f.outerWidth*a}}),i.effect(n)},e.effects.effect.scale=function(n,r){var i=e(this),s=e.extend(!0,{},n),o=e.effects.setMode(i,n.mode||"effect"),u=parseInt(n.percent,10)||(0===parseInt(n.percent,10)?0:"hide"===o?0:100),a=n.direction||"both",f=n.origin,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==a?u/100:1,x:"vertical"!==a?u/100:1};s.effect="size",s.queue=!1,s.complete=r,"effect"!==o&&(s.origin=f||["middle","center"],s.restore=!0),s.from=n.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),s.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),i.effect(s)},e.effects.effect.size=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],f=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.effects.setMode(u,n.mode||"effect"),v=n.restore||"effect"!==d,m=n.scale||"both",g=n.origin||["middle","center"],y=u.css("position"),b=v?a:f,w={height:0,width:0,outerHeight:0,outerWidth:0};"show"===d&&u.show(),i={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},"toggle"===n.mode&&"show"===d?(u.from=n.to||w,u.to=n.from||i):(u.from=n.from||("show"===d?w:i),u.to=n.to||("hide"===d?w:i)),o={from:{y:u.from.height/i.height,x:u.from.width/i.width},to:{y:u.to.height/i.height,x:u.to.width/i.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(b=b.concat(h),u.from=e.effects.setTransition(u,h,o.from.y,u.from),u.to=e.effects.setTransition(u,h,o.to.y,u.to)),o.from.x!==o.to.x&&(b=b.concat(p),u.from=e.effects.setTransition(u,p,o.from.x,u.from),u.to=e.effects.setTransition(u,p,o.to.x,u.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(b=b.concat(c).concat(l),u.from=e.effects.setTransition(u,c,o.from.y,u.from),u.to=e.effects.setTransition(u,c,o.to.y,u.to)),e.effects.save(u,b),u.show(),e.effects.createWrapper(u),u.css("overflow","hidden").css(u.from),g&&(s=e.effects.getBaseline(g,i),u.from.top=(i.outerHeight-u.outerHeight())*s.y,u.from.left=(i.outerWidth-u.outerWidth())*s.x,u.to.top=(i.outerHeight-u.to.outerHeight)*s.y,u.to.left=(i.outerWidth-u.to.outerWidth)*s.x),u.css(u.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(c),p=p.concat(["marginLeft","marginRight"]),l=a.concat(h).concat(p),u.find("*[width]").each(function(){var r=e(this),i={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};v&&e.effects.save(r,l),r.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},r.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(r.from=e.effects.setTransition(r,h,o.from.y,r.from),r.to=e.effects.setTransition(r,h,o.to.y,r.to)),o.from.x!==o.to.x&&(r.from=e.effects.setTransition(r,p,o.from.x,r.from),r.to=e.effects.setTransition(r,p,o.to.x,r.to)),r.css(r.from),r.animate(r.to,n.duration,n.easing,function(){v&&e.effects.restore(r,l)})})),u.animate(u.to,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){0===u.to.opacity&&u.css("opacity",u.from.opacity),"hide"===d&&u.hide(),e.effects.restore(u,b),v||("static"===y?u.css({position:"relative",top:u.to.top,left:u.to.left}):e.each(["top","left"],function(e,t){u.css(t,function(t,n){var r=parseInt(n,10),i=e?u.to.left:u.to.top;return"auto"===n?i+"px":r+i+"px"})})),e.effects.removeWrapper(u),r()}})}}(jQuery),function(e){e.effects.effect.shake=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,n.mode||"effect"),a=n.direction||"left",f=n.distance||20,l=n.times||3,c=2*l+1,h=Math.round(n.duration/c),p="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a,v={},m={},g={},y=s.queue(),b=y.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),v[p]=(d?"-=":"+=")+f,m[p]=(d?"+=":"-=")+2*f,g[p]=(d?"-=":"+=")+2*f,s.animate(v,h,n.easing),i=1;l>i;i++)s.animate(m,h,n.easing).animate(g,h,n.easing);s.animate(m,h,n.easing).animate(v,h/2,n.easing).queue(function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,c+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","width","height"],u=e.effects.setMode(s,n.mode||"show"),a="show"===u,f=n.direction||"left",l="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f,h={};e.effects.save(s,o),s.show(),i=n.distance||s["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(l,c?isNaN(i)?"-"+i:-i:i),h[l]=(a?c?"+=":"-=":c?"-=":"+=")+i,s.animate(h,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}})}}(jQuery),function(e){e.effects.effect.transfer=function(n,r){var i=e(this),s=e(n.to),o="fixed"===s.css("position"),u=e("body"),a=o?u.scrollTop():0,f=o?u.scrollLeft():0,l=s.offset(),c={top:l.top-a,left:l.left-f,height:s.innerHeight(),width:s.innerWidth()},h=i.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(n.className).css({top:h.top-a,left:h.left-f,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,n.duration,n.easing,function(){p.remove(),r()})}}(jQuery),define("jqueryui",function(){}),define("location/models/state",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{location_id:0,location_name:null,location_country:null},desc:"State Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("location/collections/states",["facade","collections","location/models/state","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){return testpath?testpath+"/state_search":this.state_name==undefined?"/api/state/search":"/api/state/search/?state_name="+this.state_name},fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("registration/collections/states",["facade","collections","location/collections/states","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("sportorg/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports",["facade","collections","sportorg/models/sport","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){return testpath?testpath+"/sport_search":(this.state_name==undefined,"/api/sport/search/?sport_name="+this.sport_name+"&gender="+this.gender)},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){}}),i}),define("registration/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("sportorg/models/club",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/clubs",["facade","collections","sportorg/models/club","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){var e=this;return testpath?testpath+"/club_search":(e.states_id==undefined||e.sports_id==undefined||e.club_name==undefined,"/api/org/search/?sports_club=1&states_id="+e.states_id+"&sports_id="+e.sports_id+"&org_name="+e.club_name)},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var r in n){var i=new SportorgSportModel;i.id=Math.ceil(Math.random()*1e5),i.set("payload",n[r]),i.set("desc",t.desc),i.set("exec_data",t.exec_data),e.push(i)}e.deferred.resolve(t)}}),i}),define("registration/collections/clubs",["facade","collections","sportorg/collections/clubs","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("registration/views/find_my_club",["require","text!registration/templates/find_my_club.html","facade","views","utils","models/base","jqueryui","registration/collections/states","registration/collections/sports","registration/collections/clubs"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=e("models/base");return BaseView=i.BaseView,_=r._,$=r.$,Channel=s.lib.Channel,RegistrationStatesCollection=e("registration/collections/states"),RegistrationSportsCollection=e("registration/collections/sports"),RegistrationClubsCollection=e("registration/collections/clubs"),n=BaseView.extend({id:"find-my-club",tagName:"div",className:"find-my-club",template:t,events:{"click .back":"closeView","click .not-find":"notFind","click .continue":"highSchoolView","keyup #states_id":"keyupState","keyup #sports_id":"keyupSport","keyup #orgs_id":"keyupClub","blur #states_id":"changeState","blur #sports_id":"changeSport","change #orgs_id":"changeClub"},states:[],states_id:"",sports:[],sports_id:"",clubs:[],clubs_id:"",setOptions:function(e){if(!this.model)throw new Error("RegistrationFindMyClubView expected options.model.")},initialize:function(e){BaseView.prototype.initialize.call(this,e)},render:function(){var e=this;BaseView.prototype.render.call(this)},closeView:function(e){e.preventDefault(),Channel("registration-close-clubview").publish()},notFind:function(e){e.preventDefault()},highSchoolView:function(e){e.preventDefault()},keyUp:function(e){switch(this.$(e.target).attr("id")){case"state":this.keyupState(e);break;case"sport":this.keyupSport(e);break;case"club":this.keyupClub(e)}},keyupState:function(e){var t=this,n=this.$("#states_id").val(),r=[];if(n!=""){var i=new RegistrationStatesCollection;i.state_name=n,i.fetch(),$.when(i.request).done(function(){if(i.isError())return;var e=i.toJSON();(e==null||e.length<1)&&t.$("#states_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.states=[];for(var n in e)t.states.push(e[n].payload);debug.log("self.states",t.states),t.states.forEach(function(e,t){r.push(e.name)}),debug.log("stateArr",r),t.$("#states_id").autocomplete({source:r})})}},changeState:function(e){var t=this.$("#states_id").val(),n=this;n.states_id="",n.states.forEach(function(e,r){e["name"]==t&&(n.states_id=e.id)}),this.keyupClub()},keyupSport:function(e){var t=this,n=t.model,r="all";n.get("payload").gender&&(r=n.get("payload").gender);var i=this.$("#sports_id").val(),s=[];if(i!=""){var o=new RegistrationSportsCollection;o.sport_name=i,o.gender=r,o.fetch(),$.when(o.request).done(function(){if(o.isError())return;var e=o.toJSON();console.log("Sports Model",e),(e==null||e.length<1)&&t.$("#sports_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.sports=[];for(var n in e)t.sports.push(e[n].payload);console.log("sports",t.sports),t.sports.forEach(function(e,t){s.push(e.sport_name)}),console.log("sportArr",s),t.$("#sports_id").autocomplete({source:s})})}},changeSport:function(e){var t=this.$("#sports_id").val(),n=this;n.sports_id="",n.sports.forEach(function(e,r){e["sport_name"]==t&&(n.sports_id=e.sport_id)}),this.keyupClub()},keyupClub:function(e){var t=this,n=this.$("#orgs_id").val(),r=[];if(n!=""){var i=new RegistrationClubsCollection;console.log(t.states_id,t.sports_id,n),i.states_id=t.states_id,i.sports_id=t.sports_id,i.club_name=n,i.fetch(),$.when(i.request).done(function(){if(i.isError())return;var e=i.toJSON();console.log("models",e),(e==null||e.length<1)&&t.$("#orgs_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.clubs=[];for(var n in e)t.clubs.push(e[n].payload);t.clubs.forEach(function(e,t){r.push(e.org_name)}),console.log("clubArr",r),t.$("#orgs_id").autocomplete({source:r})})}},changeClub:function(e){var t=this.$("#orgs_id").val(),n=this;n.clubs_id=0,n.clubs.forEach(function(e,r){e["name"]==t&&(n.clubs_id=e.id)})}}),n}),define("registration/views/select_org",["require","text!registration/templates/select_org.html","facade","views","utils","registration/models/my_club","registration/views/find_my_club"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=r.$,u=s.lib.Channel,a=i.SectionView,f=e("registration/models/my_club"),l=e("registration/views/find_my_club");return n=a.extend({id:"main-content",step:1,events:{"click .find_club":"findMyClub","click .high_school":"highSchoolLocator","click .indiv_sports":"individualSports","click .next":"nextStep"},template:t,initialize:function(e){a.prototype.initialize.call(this,e)},childViews:[],findMyClub:function(e){e.preventDefault();if(this.step!=1)return;var t=this;this.myclub?(this.myclub.fetch(),this.findMyClubView.render(),o("#"+this.findMyClubView.id).dialog({width:"80%",close:t.removeMyClubView})):(this.myclub=new f,this.myclub.id=t.model.get("payload").id,this.myclub.fetch(),o.when(this.myclub.request).done(function(){t.setupFindMyClub()}))},setupFindMyClub:function(){function n(){o("#"+e.findMyClubView.id).dialog("close")}var e=this;this.findMyClubView=new l({model:this.myclub});var t=this.addChildView(this.findMyClubView);this.childViews.findMyClubView=this.findMyClubView,this.callbacks.add(function(){t()}),this.findMyClubView.render(),this.$el.append(e.findMyClubView.el),o("#"+e.findMyClubView.id).dialog({width:"80%",close:e.removeMyClubView}),u("registration-close-clubview").subscribe(n)},removeMyClubView:function(){},highSchoolLocator:function(e){e.preventDefault();if(this.step!=2)return},individualSports:function(e){e.preventDefault();if(this.step!=3)return},nextStep:function(e){e.preventDefault();if(this.step!=4)return}}),n}),define("registration",["require","text!registration/templates/layout.html","facade","controller","models","views","utils","registration/models/select_type","registration/models/register_facebook","registration/models/register_email","registration/models/upload_image","registration/models/select_org","registration/views/select_type","registration/views/register_facebook","registration/views/register_email","registration/views/upload_image","registration/views/select_org"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("registration/models/select_type"),f=e("registration/models/register_facebook"),l=e("registration/models/register_email"),c=e("registration/models/upload_image"),h=e("registration/models/select_org"),p=e("registration/views/select_type"),d=e("registration/views/register_facebook"),v=e("registration/views/register_email"),m=e("registration/views/upload_image"),g=e("registration/views/select_org"),y=o.LayoutView,b=r.$,w=r._,E=u.debug,S=u.lib.Channel,x=["/pages/registration/registration.css","/css/style.jrac.css"];return n=i.extend({initialize:function(e){return S("load:css").publish(x),w.bindAll(this),this.handleOptions(e),this.init(),this},init:function(){this.setupLayout().render(),this.refreshPage(),this.createData(),this.handleDeferreds()},createData:function(){this.select_type=new a},handleDeferreds:function(){function t(){e.initRegisterFacebook()}function n(){e.initRegisterEmail()}function r(){e.uploadImage()}function i(t){e.selectOrg(t)}var e=this;e.setupSelectTypeView(),S("registration-with-facebook").subscribe(t),S("registration-with-email").subscribe(n),S("registration-uploadimage-email").subscribe(r),S("registration-select-org").subscribe(i)},refreshPage:function(){var e;this.selectTypeView&&(b(this.selectTypeView.destination).html(""),e=b.inArray(this.selectTypeView,this.scheme),~e&&this.scheme.splice(e,1)),this.registerFacebookView&&(b(this.registerFacebookView.destination).html(""),e=b.inArray(this.registerFacebookView,this.scheme),~e&&this.scheme.splice(e,1)),this.registerEmailView&&(b(this.registerEmailView.destination).html(""),e=b.inArray(this.registerEmailView,this.scheme),~e&&this.scheme.splice(e,1)),this.selectOrgView&&(b(this.selectOrgView.destination).html(""),e=b.inArray(this.selectOrgView,this.scheme),~e&&this.scheme.splice(e,1))},setupSelectTypeView:function(){this.selectTypeView=new p({model:this.select_type,name:"Select Registration Type",destination:"#main-content"}),this.scheme.push(this.selectTypeView),this.layout.render()},initRegisterFacebook:function(){var e=this;this.refreshPage(),this.register_facebook=new f,this.register_facebook.fetch(),b.when(this.register_facebook.request).done(function(){e.setupRegisterFacebookView()})},setupRegisterFacebookView:function(){this.registerFacebookView=new d({model:this.register_facebook,name:"Registration with Facebook",destination:"#main-content"}),this.scheme.push(this.registerFacebookView),this.layout.render()},initRegisterEmail:function(){var e=this;this.refreshPage(),this.register_email=new l,e.setupRegisterEmailView()},setupRegisterEmailView:function(){this.registerEmailView=new v({model:this.register_email,name:"Registration with Email Address",destination:"#main-content"}),this.scheme.push(this.registerEmailView),this.layout.render()},uploadImage:function(){var e=this;this.refreshPage(),this.upload_image=new c,this.setupUploadImageView()},setupUploadImageView:function(){this.uploadImageView=new m({model:this.upload_image,name:"Registration Upload Image",destination:"#main-content"}),this.scheme.push(this.uploadImageView),this.layout.render()},selectOrg:function(e){var t=this;this.refreshPage(),this.select_org=new h,this.select_org.id=e.id,this.select_org.fetch(),b.when(this.select_org.request).done(function(){t.setupSelectOrgView()})},setupSelectOrgView:function(){this.selectOrgView=new g({model:this.select_org,name:"Registration Select Org",destination:"#main-content"}),this.scheme.push(this.selectOrgView),this.layout.render()},setupLayout:function(){var e;return this.layout?this.layout:(e=new y({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout)}}),n}),define("chrome/views/header",["vendor","views","text!chrome/templates/header.html","chrome/models/header","registration","utils/storage"],function(e,t,n,r,i,s){var o,u=t.BaseView,a=e.$,f=e._,l=e.Mustache;return o=u.extend({tagName:"header",className:"container-fluid clearfix",initialize:function(e){this.template=n},model:new r,events:{"click .signup-facebook":"signupFacebook","click .signup-email":"signupUser","click .account clearfix a":"login"},render:function(){var e=this;return this.model.fetchSuccess=this.model.fetchError=function(t,n){var r=l.to_html(e.template,t.toJSON());e.$el.html(r),console.log(t.toJSON());var i=t.get("user_photo").types.small_thumb.url,s=t.get("user_email");e.$(".photo img").attr("src",i);var o=t.get("authorized");if(o){var u=t.get("id");e.model.saveCookie(),routing.trigger("app-inited",u)}},this.model.fetch(),this},signupFacebook:function(e){function t(){FB.login(function(e){e.authResponse?Channel("registration-with-facebook").publish():alert("Cancelled")},{scope:"email, user_birthday, user_photos"})}function n(){this.registrationController||(this.registrationController=new i({route:""})),this.registrationController.refreshPage();var e,n="facebook-jssdk",r=document.getElementsByTagName("script")[0];if(document.getElementById(n)){t();return}e=document.createElement("script"),e.id=n,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(e,r)}e.preventDefault(),window.fbAsyncInit=function(){FB.init({appId:"239430712864961",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.getLoginStatus(function(e){e.status==="connected"?FB.api("/me",function(e){console.log(e),Channel("registration-with-facebook").publish()}):e.status==="not_authorized"?(console.log("not_authorized"),t()):t()},{scope:"email, user_birthday, user_photos"})},n()},signupUser:function(e){e.preventDefault(),routing.trigger("add-user")}}),o}),define("text!chrome/templates/main.html",[],function(){return"\r\n\r\n"}),define("chrome/models/main",["models/base"],function(e){var t;return t=e.extend({defaults:{}}),t}),define("chrome/views/main",["vendor","views","text!chrome/templates/main.html","chrome/models/main"],function(e,t,n,r){var i,s=t.BaseView,o=e.$,u=e._,a=e.Mustache;return i=s.extend({id:"main",className:"clear clearfix",initialize:function(e){this.template=n},model:new r,render:function(){var e=a.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("text!chrome/templates/footer.html",[],function(){return"\r\n\r\n"}),define("chrome/models/footer",["models/base"],function(e){var t;return t=e.extend({defaults:{}}),t}),define("chrome/views/footer",["vendor","views","text!chrome/templates/footer.html","chrome/models/footer"],function(e,t,n,r){var i,s=t.BaseView,o=e.$,u=e._,a=e.Mustache;return i=s.extend({tagName:"footer",className:"container-fluid clearfix",initialize:function(e){this.template=n},model:new r,render:function(){var e=a.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("chrome",["chrome/views/header","chrome/views/main","chrome/views/footer"],function(e,t,n){var r;return r=function(){var r=new e;r.render().$el.prependTo("body");var i=new t;i.render().$el.appendTo("body");var s=new n;s.render().$el.appendTo("body")},r}),define("text!imageup/templates/basic.html",[],function(){return'<!--<div id="url" class="url">URL\r\n	<select id="url_tag">\r\n		<option value="user">Users</option>\r\n		<option value="game">Games</option>\r\n		<option value="team">Teams</option>\r\n	</select>\r\n	<input type="text" name="id_tag" id="id_tag" placeholder="ID"/>\r\n</div>\r\n<a href="#imgUploadModal" role="button" class="btn" data-toggle="modal">Upload Image</a>\r\n--><div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã</button>\r\n		<h3 id="label">Image Uploader</h3>\r\n	</div>\r\n\r\n	<div class="side-panel">\r\n		<div id="main-content-img"></div>\r\n		<div id="image-tagging"></div>\r\n	</div>\r\n\r\n	<div class="main-body">\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n\r\n</div>'}),define("text!imageup/templates/uploader.html",[],function(){return'\r\n	<div id="imageholder" class="imageholder">Drag & Drop</div>\r\n	<div align="center"><input type="file" id="image_file" class="files" name="image_file[]" multiple=""></div>\r\n	<div class="modal-footer">\r\n		<button class="btn fileuploader btn-primary" id="imageup" type="button">Upload and Finish</button>\r\n	</div>\r\n	\r\n'}),define("imageup/models/basic",["facade","media/models/image"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("imageup/models/imageupload",["facade","media/models/image"],function(e,t){var n,r=e._;return ImageUploadModel=t.extend({initialize:function(e,n){t.prototype.initialize.call(e,n)}}),n}),define("imageup/models/errorshow",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{msg:null,color:null}),initialize:function(e,t){}}),n}),console.log("Called"),define("imageup/collections/basics",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/"+this.id+"/images/":"/api/user/images/"}}),r}),define("imageup/models/preview",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({initialize:function(e,t){}}),n}),define("text!imageup/templates/error_template.html",[],function(){return'<div class="alert {{color}}" align="center">\r\n	<button type="button" class="close" data-dismiss="alert">&times;</button>\r\n	{{msg}}\r\n</div>'}),define("imageup/views/errors",["require","text!imageup/templates/error_template.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=i.SectionView,f=r.$,l=r._,c=s.debug;return n=a.extend({id:"main-content",template:t,initialize:function(e){a.prototype.initialize.call(this,e),c.log("error view")}}),n}),define("imageup/views/basic",["require","text!imageup/templates/uploader.html","facade","views","utils","vendor","imageup/models/basic","imageup/views/errors"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=i.SectionView,f=e("imageup/models/basic"),l=e("imageup/views/errors"),c=r.$,h=r._,p=s.debug;return p.log("SectionView: ",a),n=a.extend({id:"imageuploadForm",events:{"click #imageup":"imageUploadClick","change #image_file":"imagePreview","dragover #imageholder":"drag","drop #imageholder":"drop"},template:t,data:t,initialize:function(e,t){c("#errormsg, #preview").html(""),a.prototype.initialize.call(this,e),p.log("Image upload basic view"),this.attr=t,this.files_drag=[],c("#imgUploadModal").modal("show"),c("#imgUploadModal").on("hidden",function(){routing.trigger("refresh-onImageUpload")}),c("#imgUploadModal").on("hide",function(){routing.trigger("refresh-onImageUpload")}),console.log(c(".modal-body").html())},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault(),c("#errormsg").hide();var n=e.originalEvent.dataTransfer.files;this.files_drag=e.originalEvent.dataTransfer.files,n.length>0&&t.showLoader(t);var r=[],i=[],s=0;for(var o=0,u;u=n[o];o++){if(!u.type.match("image.*"))continue;var a=new FileReader;a.onload=function(e){return function(r){var o="preview_"+s;s++,i.push({preview_id:o,width:"150",height:"150",filesrc:r.target.result,title:escape(e.name)}),s==n.length&&(data={data:i},c("#image_file").attr("disabled","disabled"),routing.trigger("imageup-preview",data)),t.hideLoader()}}(u),a.readAsDataURL(u)}},imagePreview:function(e){var t=this;p.log("Image preview view"),c("#preview").hide(),c("#errormsg").hide();var n=c("#image_file")[0].files;console.log(n.length),n.length>0&&t.showLoader(t);var r=[],i=0,s,o=0;for(;s=n[i];i++){if(!s.type.match("image.*"))continue;var u=new FileReader;u.onload=function(e){return function(i){var s="preview_"+o;o++,r.push({preview_id:s,width:"150",height:"150",filesrc:i.target.result,title:escape(e.name)}),o==n.length&&(data={data:r},routing.trigger("imageup-preview",data),t.hideLoader())}}(s),u.readAsDataURL(s)}},imageUploadClick:function(e){e.preventDefault();var t=this;c("#errormsg").hide(),c("#imageup").attr("disabled","disabled"),c(".closepreview").attr("disabled","disabled"),c(".rotate").attr("disabled","disabled"),console.log(c("#image_file")[0].files.length),console.log(this.files_drag.length),console.log(c(".previewimg").length);if(c(".previewimg").length==0){var n={msg:"Image Field Empty",color:"alert-error"};routing.trigger("imageup-msg",n),c("#imageup").removeAttr("disabled")}else if(this.files_drag.length>=1){var r=this.files_drag.length;jQuery.each(this.files_drag,function(e,n){var i=new FormData;if(c("#preview_"+e+"group").length>0){i.append("image_file",n),c("#preview_"+e+"rotang").val()>0?i.append("rotate",c("#preview_"+e+"rotang").val()):i.append("rotate","false");for(var s in t.attr)i.append(s,t.attr[s]);var o={dataum:i,id:e,len:r};routing.trigger("imageup-add-image",o)}}),this.files_drag=[],c("#imageup").removeAttr("disabled")}else console.log(c("#image_file")[0].files.length+"=file prasobh"),jQuery.each(c("#image_file")[0].files,function(e,n){var r=new FormData;if(c("#preview_"+e+"group").length>0){r.append("image_file",n),c("#preview_"+e+"rotang").val()>0?r.append("rotate",c("#preview_"+e+"rotang").val()):r.append("rotate","false");for(var i in t.attr)r.append(i,t.attr[i]);var s={dataum:r,id:e,len:c("#image_file")[0].files.length};routing.trigger("imageup-add-image",s)}}),c("#imageup").removeAttr("disabled")}}),n}),define("text!imageup/templates/preview_template.html",[],function(){return'{{#data}} \r\n	<div class="previewimg" id="{{preview_id}}group"align="center">\r\n		<div id="{{preview_id}}rot" class="previewrotate"><button id="{{preview_id}}pre img" value="{{preview_id}}" class="btn rotate">Rotate</button></div>\r\n		<div class="previewimgsrc" id="{{preview_id}}pre" align="center">\r\n			<img src="{{filesrc}}" class="img-polaroid" width="{{width}}" height="{{height}}" title="{{title}}" draggable="false">\r\n			<button type="button" class="close closepreview" value ="{{preview_id}}"data-dismiss="{{preview_id}}">&times;</button>\r\n			<input type="hidden" id="{{preview_id}}rotang" value="0">\r\n		</div>\r\n		<div id="{{preview_id}}" class="previewprogress"></div>\r\n	</div>\r\n{{/data}} '}),define("imageup/views/preview",["require","text!imageup/templates/preview_template.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=i.SectionView,f=r.$,l=r._,c=s.debug;return n=a.extend({id:"imgpreview",template:t,events:{"click .rotate":"imageRotate","click .close":"closePreview"},initialize:function(e){a.prototype.initialize.call(this,e),c.log("preview view"),this.degree=0},imageRotate:function(e){id=e.currentTarget.id,val=e.currentTarget.value,this.degree=f("#"+val+"rotang").val(),this.degree=parseInt(this.degree)+90,this.degree>=360&&(this.degree=0),f("#"+id).css({"-webkit-transform":"rotate("+this.degree+"deg)","-moz-transform":"rotate("+this.degree+"deg)","-ms-transform":"rotate("+this.degree+"deg)","-o-transform":"rotate("+this.degree+"deg)",transform:"rotate("+this.degree+"deg)",zoom:1}),f("#"+val+"rotang").val(this.degree)},closePreview:function(e){id=e.currentTarget.value+"group";var t=document.getElementById(id);t.parentNode.removeChild(t)}}),n}),define("imageup",["require","text!imageup/templates/basic.html","text!imageup/templates/uploader.html","facade","controller","models","views","utils","imageup/models/basic","imageup/models/imageupload","imageup/models/errorshow","imageup/collections/basics","imageup/models/preview","imageup/views/basic","imageup/views/errors","imageup/views/preview"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("imageup/models/basic"),f=e("imageup/models/imageupload"),l=e("imageup/models/errorshow"),c=e("imageup/collections/basics"),h=e("imageup/models/preview"),p=e("imageup/views/basic"),d=e("imageup/views/errors"),v=e("imageup/views/preview"),m=o.LayoutView,g=r.$,y=r._,b=u.debug,w=u.lib.Channel,E=["/pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return w("load:css").publish(E),y.bindAll(this),this.handleOptions(e),this.init(e),this},init:function(e){this.url=e.url,this.attr=e.attr,this.count=0,b.log("Imagecontroller Init"),this.setupLayout(),this.handleDeferreds(),this.showuploader()},handleDeferreds:function(){function t(t){e.imageUpload(t)}function n(t){e.msgShowup(t)}function r(t){e.previewShowup(t)}function i(){e.rerender()}var e=this;routing.off("imageup-add-image"),routing.on("imageup-add-image",function(e){t(e)}),routing.off("imageup-msg"),routing.on("imageup-msg",function(e){n(e)}),routing.off("imageup-preview"),routing.on("imageup-preview",function(e){r(e)}),routing.off("imageup-rerender"),routing.on("imageup-rerender",function(e){i(e)})},showuploader:function(){var e=new p({name:"Add Media",model:new a,destination:"#main-content-img"},this.attr);b.log("Imagecontroller Show"),console.log(this.scheme),this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return b.log("Imagecontroller Layout"),this.scheme=[],g(".model-popup-h").remove(),g("body").append('<div id="modalPopup" class="model-popup-h"></div>'),e=new m({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=e,this.layout},previewShowup:function(e){var t=new h(e);for(var n in this.scheme)this.scheme[n].id=="imgpreview"&&delete this.scheme[n];previewShowView=new v({name:"Preview Show View",model:t,destination:"#preview",displayWhen:"ready"}),b.log("Preview View Show"),this.scheme.push(previewShowView),g("#preview").show(),routing.trigger("imageup-rerender")},rerender:function(){this.showuploader()},imageUpload:function(e){console.log(e),b.log("image uploading starts");var t=e.id,n=e.len,r=[],i="",s=this,r=e.dataum;g("#preview_"+t).html('<div class="loader image-loading-div"></div>'),g(".previewimgsrc").addClass("fade-out"),g.ajax({url:this.url,data:r,cache:!1,processData:!1,contentType:!1,type:"POST",success:function(e){g("#preview_"+t).fadeOut("slow"),g("#preview_"+t+"rot").fadeOut("slow"),routing.trigger("image-upload-success",e),b.log(e),g("imageup").attr("disabled","disabled"),s.count++,s.count==n&&(i={msg:" File Uploaded Succesfully",color:"alert-success"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled"),g(".previewimgsrc").fadeOut("slow").removeClass("fade-out"))},error:function(e){g("#preview_"+t).fadeOut("slow"),g(".previewimgsrc").removeClass("fade-out"),g("#preview_"+t).fadeIn("slow").html("<b>Upload Error!</b>"),b.log(e),i={msg:e.statusText,color:"alert-error"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled");return}})},msgShowup:function(e){for(var t in this.scheme)this.scheme[t].destination=="#errormsg"&&delete this.scheme[t];errorShowModel=new l(e),addErrorView=new d({name:"File Upload Msg",model:errorShowModel,destination:"#errormsg",displayWhen:"ready"}),b.log("Error View Show"),this.scheme.push(addErrorView),g("#errormsg").show(),routing.trigger("imageup-rerender")}}),n}),define("text!pages/home/templates/layout.html",[],function(){return'<div class="template-container">\r\n\r\n	<div>\r\n		Space for register ppage\r\n	</div>\r\n\r\n\r\n\r\n	<div id="main-header"></div>\r\n	<div>\r\n		\r\n\r\n	</div>\r\n	<div id="main-content" class="row-fluid">\r\n		<div class="green-left-heading">\r\n			Top Rated\r\n		</div>\r\n		<div id="top-rated" class="p-l-20 clearfix clear"></div>\r\n\r\n		<div id="menu" class="p-l-20 clear"></div>\r\n		<div id="search-result" class="p-l-20 clear"></div>\r\n	</div>\r\n	<div id="main-footer"></div>\r\n</div>'}),define("pages/home/models/menu",["models"],function(e){var t,n=e.BaseModel;return t=n.extend({defaults:{name:null,views:{browse:[{name:"Up Votes",value:"votes"},{name:"Newest",value:"newest"},{name:"Fans",value:"followers"}],time:[{name:"Today",value:"DAY"},{name:"Week",value:"WEEK"},{name:"Month",value:"MONTH"},{name:"Year",value:"YEAR"}]}}}),t}),define("packages/location/models/city",["models","facade"],function(e,t){var n,r=e.BaseModel,s=t.$,o=t._;return n=r.extend({defaults:{name:null},initialize:function(e,t){this.id=this.id||o.uniqueId("m"),this.addSubscribers(),o.bindAll(this)},search:function(e){this.request&&this.request.abort(),this.request=s.ajax({url:"/api/location/search/?search_text="+e}).done(function(t,n,r){console.log(t);var s=[],u=t.payload;if(u!=null)for(i=0;i<(u.length>10?10:u.length);i++){var a={};a.label=u[i].str,a.id=u[i].id;var f=o.isUndefined(u[i].obj.city)?u[i].obj.states_obj:o.isUndefined(u[i].obj.city.states_obj)?{}:u[i].obj.city.states_obj;a.state_id=f.id,a.country_id=f.country.id,s.push(a)}Channel("response :"+e).publish(s)})},addSubscribers:function(){var e=this;Channel("changeInput"+this.id).subscribe(e.search)}}),n}),define("sport/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{sport_id:0,sport_name:null,sport_type:null},desc:"Sport Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("packages/sport/collections/sports",["require","sport/models/sport","facade","collections","utils"],function(e,t){var n,r=e("utils"),s=e("facade"),o=e("collections"),u=r.debug,a=o.BaseCollection,f=s._;return n=a.extend({model:t,url:function(){var e="/api/sport/listall?",t=this.name||"boys",n="";switch(t){case"boys":n="male=1";break;case"both":n="male=1&";case"girls":n+="female=1"}return e+n},initialize:function(e,t){this.url=t.url||this.url,this.name=t.name,a.prototype.initialize.call(this,e,t)},fetchSuccess:function(e,n){e.reset();var r=n.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new t;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",n.desc),s.set("exec_data",n.exec_data),e.push(s)}e.deferred.resolve(n)}}),n}),define("pages/home/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("pages/home/collections/image",["facade","collections","pages/home/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,initialize:function(e,t){debug.log("HomeImageList initialize..."),this.cid=this.cid||o.uniqueId("c"),this.deferred=new $.Deferred,this.num=t.num},fetchSuccess:function(e,t){var r=o.first(t.payload,e.num);e.reset();for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("text!pages/home/templates/menu.html",[],function(){return'<div class="demo-select">\r\n\r\n	</div>	\r\n<div class="menu-outer-h">\r\n<div id="views" class="menu span2">\r\n	<a href="javascript:void(0)" class="menu-link-h"> VIEWS <span class="caret"></span></a>\r\n	<div class="dd menu-detail-h reset-view-area-h">\r\n		<a href="javascript: void(0);" class="btn views-reset-btn-h">Reset</a>\r\n		\r\n		<div class="dropdown">\r\n			<a href="javascript:void(0)"> Browse <span class="caret"></span></a>\r\n			<div class="clearfix"></div>\r\n			<ul class="dropdown-menu" style="display: block; position: relative; margin-bottom:15px;">\r\n				{{#views.browse}}\r\n				<li><a class="browse" data-id="{{value}}" href="javascript:void(0);">{{name}}</a></li>\r\n				{{/views.browse}}\r\n			</ul>\r\n		</div>\r\n		<br />\r\n		<div class="clearfix">\r\n			<a href="javascript:void(0)"> Time <span class="caret"></span></a>\r\n			<div class="clearfix"></div>\r\n			<ul class="dropdown-menu" style="display: block; position: relative;">\r\n				{{#views.time}}\r\n				<li><a class="time" data-id="{{value}}" href="javascript: void(0)">{{name}}</a></li>\r\n				{{/views.time}}\r\n			</ul>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="sport" class="menu span2">\r\n	<a href="javascript:void(0)" class="menu-link-h"> SPORT <span class="caret"></span>\r\n	</a>\r\n	<div class="dd menu-detail-h reset-sport-area-h">\r\n		<a href="javascript: void(0);" class="btn sport-reset-btn-h">Reset</a>\r\n		<div class="left text-center">\r\n			<strong>Guys</strong>\r\n			<div id=\'boys\' class="text-left sport-list"></div>\r\n		</div>\r\n		<div class="left text-center">\r\n			<strong>Girls</strong>\r\n			<div id=\'girls\' class="text-left sport-list"></div>\r\n		</div>\r\n		<div class="left text-center">\r\n			<strong>Both</strong>\r\n			<div id=\'both\' class="text-left sport-list"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div id="location" class="menu span2">\r\n	<a href="javascript:void(0)"  class="menu-link-h"> LOCATION <span class="caret"></span></a>\r\n	<div class="dd menu-detail-h reset-location-area-h">\r\n		<a href="javascript: void(0);" class="btn location-reset-btn-h">Reset</a>\r\n		<!--div class="state"></div-->\r\n		<div class="city"></div>\r\n	</div>\r\n</div>\r\n<div class="span5">\r\n	<div class="pull-left m-r-10">SEARCH</div>\r\n	<div class="pull-left">\r\n		<input type="text" id="search"></input>\r\n	</div>\r\n	<div class="pull-left">\r\n		<a id="video" class="searchBtn" data-number="0" href="javascript:void(0)"><i class="icon-facetime-video"></i></a>\r\n		<a id="image" class="searchBtn" data-number="1" href="javascript:void(0)"><i class="icon-picture"></i></a>\r\n		<a id="user" class="searchBtn" data-number="2" href="javascript:void(0)"><i class="icon-user"></i></a>\r\n		<a id="game" class="searchBtn" data-number="3" href="javascript:void(0)"><i class="icon-user"></i></a>\r\n	</div>\r\n</div>\r\n</div>'}),define("text!usercontrol/dropdown/template/layout.html",[],function(){return'<div class="dropdown-container">\r\n	<input type="hidden" class="hidden-input-dropdown-h" value="" />\r\n	<div class="drop-down-outer">\r\n		<div class="region-dark dropdown-header-box">\r\n			{{dropView.title}}\r\n		</div>\r\n		<div class="down-arrow-outer">\r\n			<a href="javascript: void(0);" class="down-arrow up-down-arrow-h">\r\n				<span class="icon-white icon-chevron-down"></span>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<ul class="common-dropdown">\r\n		{{#records}}\r\n			<li class="{{#dropView.defaultSelected}}{{dropView.defaultSelected}}{{/dropView.defaultSelected}}">\r\n				<a data-id="{{#dropView.getRecordId}}{{dropView.getRecordId}}{{/dropView.getRecordId}}" href="javascript: void(0);">{{#dropView.getRecordValue}}{{dropView.getRecordValue}}{{/dropView.getRecordValue}}</a>\r\n			</li>\r\n		{{/records}}\r\n	</ul>\r\n</div>\r\n'}),define("usercontrol/dropdown/view/dropdown",["require","text!usercontrol/dropdown/template/layout.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p,d;return p=h.View.extend({template:t,multiple:!1,selectedOptions:[],className:"dropdown-wrapper",events:{"click .up-down-arrow-h":"showDropdown","click li a":"selectOptions"},selectOptions:function(e){var t=l(e.target).data("id");this.multiple?this.setMultipleOptions(t,e):this.setSingleOption(t,e),this.showSelectedValue(),this.callback&&this.callback(this.selectedOptions)},showSelectedValue:function(){var e=this.$el.find(".common-dropdown li.selected").text()||this.title;this.$el.find(".dropdown-header-box").html(e)},setMultipleOptions:function(e,t){var n=this.checkifExists(e);n==-1?(l(t.target).parent().addClass("selected"),this.selectedOptions.push(e)):(l(t.target).parent().removeClass("selected"),this.selectedOptions.splice(n,1))},setSingleOption:function(e,t){var n=this.checkifExists(e);n==-1&&(this.selectedOptions=[],console.log(this.$el.find(".common-dropdown li")),this.$el.find(".common-dropdown li").removeClass("selected"),l(t.target).parent().addClass("selected"),this.selectedOptions.push(e),this.$el.find(".hidden-input-dropdown-h").val(e),this.hideDropdown())},checkifExists:function(e){var t=-1;for(var n in this.selectedOptions)if(this.selectedOptions[n]==e){t=n;break}return t},initialize:function(e){d=this,n=this,this.selectedOptions=[],n.setOptions(e),this.render(),this.$el.find(".hidden-input-dropdown-h").attr("id",this.elementId)},hideDropdown:function(e){if(!e||!this.$el.find(l(e.target)).parents(".dropdown-container").length)this.$el.find(".up-down-arrow-h span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),this.$el.find(".common-dropdown").slideUp()},showDropdown:function(e){e.preventDefault();var t=this;l(e.currentTarget).find("span").hasClass("icon-chevron-down")?(l(e.currentTarget).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up"),l(".dropdown-container").removeClass("increase-dropown-zindex"),t.$el.find(".dropdown-container").addClass("increase-dropown-zindex"),l("html").bind("click",function(e){t.hideDropdown(e)})):l(e.currentTarget).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),l(e.currentTarget).parents(".dropdown-container").find(".common-dropdown").slideToggle()},getRecordId:function(){return this.payload[d.data.recordId]},defaultSelected:function(e){console.error(this);if(d.multiple){if(_.isArray(d.selectedValue))for(var t in d.selectedValue)if(d.selectedValue[t]==this.payload[d.data.recordId])return"selected"}else if(d.selectedValue&&d.selectedValue==this.payload[d.data.recordId])return"selected"},getRecordValue:function(){return this.payload[d.data.recordValue]},render:function(){this.data.dropView=this;if(!this.selectedValue){if(this.data.records.length)var e=this.data.records[0].payload[this.data.recordId];this.multiple?(this.selectedValue=[],this.selectedValue.push(e)):this.selectedValue=e}var t=this,n=f.to_html(t.template,this.data);return l(t.el).html(n),this.targetView.$el.find(this.destination).html(this.el),this.$el.find(".hidden-input-dropdown-h").val(this.selectedValue),this.selectedOptions.push(this.selectedValue),this.showSelectedValue(),l("#"+this.elementId).length?t.callback&&t.callback(this.selectedOptions):setTimeout(function(){t.callback&&t.callback(this.selectedOptions)},200),!0},setOptions:function(e){for(var t in e)this[t]=e[t]}}),p}),define("pages/home/views/menu",["require","text!pages/home/templates/menu.html","usercontrol/dropdown/view/dropdown","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("usercontrol/dropdown/view/dropdown");return n=s.extend({id:"menu",events:{"blur #search":"updateSearch","focus #search":"hideDropdown","click .searchBtn":"changeBaseUrl","click .dropdown-menu > li > a":"select","click .dd":"doNothing","click .menu-link-h":"showMenuDropdown","click .views-reset-btn-h":"resetView","click .sport-reset-btn-h":"resetSport","click .location-reset-btn-h":"resetLocation"},demoSelect:function(){},resetView:function(){var e="view";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-view-area-h ul li a.select, .reset-view-area-h ul li.select").removeClass("select")},resetSport:function(){var e="sports";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-sport-area-h ul li a.select, .reset-sport-area-h ul li.select").removeClass("select")},resetLocation:function(){var e="location";Channel("resetFilter").publish(e),this.$el.find("#city").val(""),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-location-area-h ul li a.select, .reset-location-area-h ul li.select").removeClass("select")},template:t,intialize:function(e){s.prototype.initialize.call(this,e),console.log("intializwe menu view ----------->>>")},updateSearch:function(e){Channel("textChanged").publish($(e.target).val())},changeBaseUrl:function(e){var t=$(e.currentTarget),n=t.data("number");Channel("baseUrlChanged").publish(n)},stateListChange:function(e){var t=$(e.currentTarget).val();console.log(t);var n=t.data("id");routing.trigger("stateChanged",n)},doNothing:function(e){e.preventDefault(),e.stopPropagation()},hideDropdown:function(){this.$el.find(".menu-detail-h").hide()},hideAllDropdowns:function(){var e=this;$("html, #search").click(function(t){console.log($(t.target).parents("#views").length),$(t.target).parents(".menu").length||e.hideDropdown()})},showMenuDropdown:function(e){var t=$(e.target).next();t.css("display")=="none"?(this.$el.find(".menu-detail-h").hide(),t.show()):t.hide()},select:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),n=t.attr("class");$(".dropdown-menu > li > a."+n).removeClass("select"),n=t.attr("class").split(" ")[0],$(t).addClass("select");var r={submenu:n,value:$(t).data("id")||$(t).text()};Channel("viewFilterChanged").publish(r),debug.log(r)},toggle:function(e){e.preventDefault();var t=$(e.currentTarget),n=$(t).offset(),r=n.top+40,i=n.left+10,s=t.attr("id");s="#"+s+" .dd",$(s).attr("class")==="dd open"?$(s).hide().removeClass("open"):($(".open").hide().removeClass("open"),$(s).css("top",r).css("left",i),$(s).show(),$(s).addClass("open"))},afterRender:function(){this.hideAllDropdowns();var e=this.model.toJSON();console.error(e.views)}}),n}),define("pages/home/views/image-list",["facade","views","utils","media/views/image-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"image-list",name:"Image List",tagName:"ul",_tagName:"li",_className:"image",_view:r,initialize:function(e){var t=this;console.log(e),console.log(this),this.name=e.name||this.name,f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");u.bindAll(this),this.addSubscribers(),o(document).off("click",".image-outer-h"),o(document).on("click",".image-outer-h",function(){t.initPhotoPlayer()})},initPhotoPlayer:function(){console.log(this.collection),routing.trigger("photo-player-init",1,this.collection)},childViews:{}}),i}),define("text!packages/location/templates/state-item.html",[],function(){return'{{#payload}}\r\n<div data-id="{{id}}" class="state-{{id}}">{{name}}</div>\r\n{{/payload}}\r\n\r\n'}),define("packages/location/views/state-item",["vendor","views","utils","text!packages/location/templates/state-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"state",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeState:function(){console.log(this.model),Channel("stateChanged:"+this.model.collection.cid).publish(this.model)}}),i}),define("packages/location/views/state-list",["facade","views","utils","packages/location/views/state-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"state-list",name:"State List",tagName:"ul",_tagName:"li",_className:"state",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("StateListView expected options.collection.");u.bindAll(this),this.addSubscribers()},childViews:{}}),i}),define("pages/home/views/state-list",["facade","views","utils","packages/location/views/state-list"],function(e,t,n,r){var i,s=e.$,o=e._,u=n.lib.Channel,a=t.SectionView;return i=r.extend({tagName:"select",_tagName:"option",events:{change:"changeState"},initialize:function(e){r.prototype.initialize.call(this,e),this.id=e.id||this.id||o.uniqueId("v")},changeState:function(e){console.log(this.collection);var t=s(e.target).val(),n="";this.collection.each(function(e){e.get("payload").name==t&&(n=e.get("payload").id)}),n!=""&&(console.log("sdsd"),routing.trigger("stateChanged",n))}}),i}),define("text!sport/templates/sport-item.html",[],function(){return'{{#payload}}\r\n<img src="{{small_icon}}" class="tiny-sport-icon"/>{{sport_name}}\r\n{{/payload}}'}),define("sport/views/sport-item",["vendor","views","utils","text!sport/templates/sport-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"sport",events:{click:"selectSport"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},selectSport:function(){debug.log(this.model),s("li.sport").removeClass("select"),this.$el.addClass("select"),Channel("sportChanged:"+this.model.collection.cid).publish(this.model)}}),i}),function(e){jQuery.fn.extend({slimScroll:function(t){var n=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},t);return this.each(function(){function r(t){if(h){t=t||window.event;var r=0;t.wheelDelta&&(r=-t.wheelDelta/120),t.detail&&(r=t.detail/3),e(t.target||t.srcTarget).closest("."+n.wrapperClass).is(S.parent())&&i(r,!0),t.preventDefault&&!E&&t.preventDefault(),E||(t.returnValue=!1)}}function i(e,t,r){var i=e,s=S.outerHeight()-T.outerHeight();t&&(i=parseInt(T.css("top"))+e*parseInt(n.wheelStep)/100*T.outerHeight(),i=Math.min(Math.max(i,0),s),i=0<e?Math.ceil(i):Math.floor(i),T.css({top:i+"px"})),y=parseInt(T.css("top"))/(S.outerHeight()-T.outerHeight()),i=y*(S[0].scrollHeight-S.outerHeight()),r&&(i=e,e=i/S[0].scrollHeight*S.outerHeight(),e=Math.min(Math.max(e,0),s),T.css({top:e+"px"})),S.scrollTop(i),S.trigger("slimscrolling",~~i),u(),c()}function s(){window.addEventListener?(this.addEventListener("DOMMouseScroll",r,!1),this.addEventListener("mousewheel",r,!1)):document.attachEvent("onmousewheel",r)}function o(){g=Math.max(S.outerHeight()/S[0].scrollHeight*S.outerHeight(),w),T.css({height:g+"px"});var e=g==S.outerHeight()?"none":"block";T.css({display:e})}function u(){o(),clearTimeout(v),y==~~y&&(E=n.allowPageScroll,b!=y&&S.trigger("slimscroll",0==~~y?"top":"bottom")),b=y,g>=S.outerHeight()?E=!0:(T.stop(!0,!0).fadeIn("fast"),n.railVisible&&N.stop(!0,!0).fadeIn("fast"))}function c(){n.alwaysVisible||(v=setTimeout(function(){(!n.disableFadeOut||!h)&&!p&&!d&&(T.fadeOut("slow"),N.fadeOut("slow"))},1e3))}var h,p,d,v,m,g,y,b,w=30,E=!1,S=e(this);if(S.parent().hasClass(n.wrapperClass)){var x=S.scrollTop(),T=S.parent().find("."+n.barClass),N=S.parent().find("."+n.railClass);o();if(e.isPlainObject(t)){if("scrollTo"in t)x=parseInt(n.scrollTo);else if("scrollBy"in t)x+=parseInt(n.scrollBy);else if("destroy"in t){T.remove(),N.remove(),S.unwrap();return}i(x,!1,!0)}}else{n.height="auto"==n.height?S.parent().innerHeight():n.height,x=e("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),S.css({overflow:"hidden",width:n.width,height:n.height});var N=e("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.size,background:n.railColor,opacity:n.railOpacity,zIndex:90}),T=e("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.size,BorderRadius:n.size,MozBorderRadius:n.size,WebkitBorderRadius:n.size,zIndex:99}),C="right"==n.position?{right:n.distance}:{left:n.distance};N.css(C),T.css(C),S.wrap(x),S.parent().append(T),S.parent().append(N),n.railDraggable&&T.draggable({axis:"y",containment:"parent",start:function(){d=!0},stop:function(){d=!1,c()},drag:function(){i(0,e(this).position().top,!1)}}),N.hover(function(){u()},function(){c()}),T.hover(function(){p=!0},function(){p=!1}),S.hover(function(){h=!0,u(),c()},function(){h=!1,c()}),S.bind("touchstart",function(e){e.originalEvent.touches.length&&(m=e.originalEvent.touches[0].pageY)}),S.bind("touchmove",function(e){e.originalEvent.preventDefault(),e.originalEvent.touches.length&&i((m-e.originalEvent.touches[0].pageY)/n.touchScrollStep,!0)}),"bottom"===n.start?(T.css({top:S.outerHeight()-T.outerHeight()}),i(0,!0)):"top"!==n.start&&(i(e(n.start).position().top,null,!0),n.alwaysVisible||T.hide()),s(),o()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define("jquery.slimscroll",function(){}),define("packages/sport/views/sport-list",["facade","views","utils","sport/views/sport-item","jqueryui","jquery.slimscroll"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=n.debug;return CollectionView=t.CollectionView,SectionView=t.SectionView,s=CollectionView.extend(SectionView.prototype),i=s.extend({__super__:CollectionView.prototype,className:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){s.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.name=e.name||this.name,this._tagName=e._tagName||this._tagName,this.tagName=e.tagName||this.tagName,this._className=e._className||this._className,this._view=e._view||this._view,this.addSubscribers()},initScroll:function(){o("."+this.className).slimScroll({height:"200px"})},addSubscribers:function(){var e=this;a("layout:ready").subscribe(e.initScroll)},childViews:{}}),i}),define("text!location/templates/city.html",[],function(){return'<input id="city" type="text" placeholder="cities"/>'}),define("packages/location/views/city",["require","text!location/templates/city.html","views","facade","utils","jqueryui","controller"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("controller");return n=o.extend({template:t,className:"ui-front",initialize:function(e){o.prototype.initialize.call(this,e),this.id=e.id||this.id||a.unique("v"),this.addSubscribers()},initPlugin:function(){var e=this,t=this.model.id;u("#city").autocomplete({minLength:2,source:function(e,n){console.log(e),console.log(n);var r=e.term,i=l.prototype.appStates;console.log(i);if(i){var s=i.findByNameInStorage(r);if(s){n(s.data);return}}var o=function(e){var t=l.prototype.appStates;t&&(t.add({name:r,data:e,storage:"localStorage",expires:new Date(Date.now()+3154e5)}),t.save(r)),n(e),console.log(t.findByNameInStorage(r))};Channel("response :"+r).subscribe(o),Channel("changeInput"+t).publish(r)},select:function(t,n){Channel("cityChanged:"+e.id).publish(n.item),f.log(n.item)}})},addSubscribers:function(){var e=this;console.log("Subscriber added"),Channel("layout:ready").subscribe(e.initPlugin)}}),n}),define("home",["require","text!pages/home/templates/layout.html","facade","controller","models","views","utils","pages/home/models/menu","packages/location/models/city","packages/sport/collections/sports","pages/home/collections/image","location/collections/states","pages/home/views/menu","pages/home/views/image-list","pages/home/views/state-list","packages/sport/views/sport-list","packages/location/views/city"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("packages/sport/collections/sports"),f=e("location/collections/states"),l=e("pages/home/collections/image"),c=e("pages/home/models/menu"),h=e("packages/location/models/city"),p=e("pages/home/views/menu"),d=e("pages/home/views/image-list"),v=e("pages/home/views/state-list"),m=e("packages/sport/views/sport-list"),g=e("packages/location/views/city"),y=o.LayoutView,b=r.$,w=r._,E=u.lib.Channel,S=[base_url+"pages/home/home.css"];return n=i.extend({initialize:function(e){return E("load:css").publish(S),w.bindAll(this),this.handleOptions(e),this.genderTypes=["boys","girls","both"],this.init(),this},init:function(){this.initUrlOptions(),this.createData(),this.handleDeferreds()},initUrlOptions:function(){this.searchUrls=["/api/video/search","/api/image/search","/api/user/search","/api/game/search"],this.baseUrl=this.searchUrls[1],this.urlOptions={sports_id:"0",cities_id:"0",orderby:"votes",time:"DAY",states_id:"0",searchtext:"",country_id:"0"},this.viewOptions=["orderby","time"],this.sportsOptions=["sports_id"],this.locationOptions=["cities_id","states_id","country_id"]},addSubscribers:function(){var e=this;w.each(this.genderTypes,function(e){E("sportChanged:"+this.collections[e].cid).subscribe(this.changeSportFilter)},this),E("cityChanged:"+this.sections.city.id).subscribe(this.changeCityFilter),routing.on("stateChanged",function(t){e.changeStateFilter(t)}),E("textChanged").subscribe(this.updateText),E("viewFilterChanged").subscribe(this.changeViewFilter),E("baseUrlChanged").subscribe(this.updateBaseUrl),E("resetFilter").subscribe(this.resetFilter)},setupScheme:function(){var e,t=this.params;for(e=0;e<this.meta.activeViews.length;e++)this.scheme.push(this.sections[this.meta.activeViews[e]])},initSections:function(){this.setupMenuView(),this.setupLocationDDView(),w.each(this.genderTypes,this.setupSportListView),w.each(["top-rated","search-result"],this.setupImageListView),this.setupScheme(),this.setupLayout().render()},updateBaseUrl:function(e){this.baseUrl=this.searchUrls[e],this.transitionView()},updateText:function(e){this.urlOptions.searchtext=e,this.transitionView()},changeViewFilter:function(e){e.submenu==="browse"?options={order_by:e.value}:options={time:e.value},this.transitionView(options)},changeSportFilter:function(e){console.log(e);var t={sports_id:e.attributes.payload.sport_id};this.transitionView(t)},changeStateFilter:function(e){var t={states_id:e};this.transitionView(t)},changeCityFilter:function(e){var t={cities_id:e.id,states_id:e.state_id,country_id:e.country_id};console.log(t),this.transitionView(t)},resetFilter:function(e){switch(e){case"view":for(var t in this.viewOptions)t=="order_by"?this.urlOptions[this.viewOptions[t]]="voter":t=="time"&&(this.urlOptions[this.viewOptions[t]]="today");break;case"sports":for(var t in this.sportsOptions)console.log(this.sportsOptions[t]),console.log(this.urlOptions),this.urlOptions[this.sportsOptions[t]]="0";break;case"location":for(var t in this.locationOptions)this.urlOptions[this.locationOptions[t]]="0"}this.transitionView()},transitionView:function(e){var t="search-result",n=this.collections[t];controller=this,console.log("CALLED",this.collections[t]),n.url=this.url(e),n.fetch(),b.when(n.request).done(function(){console.log("Fetch Complete");var e=new d({collection:n,name:t,destination:"#"+t});console.log(e),controller.layout.transition(t,e)})},url:function(e){var t=this.baseUrl+"?";w.extend(this.urlOptions,e);var n=[];return b.each(this.urlOptions,function(e,t){n.push(e+"="+encodeURIComponent(t))}),t+n.join("&")},createData:function(){var e=this.collections={};e["search-result"]=new l([],{url:this.url(),num:"12"}),e.state=new f,e["top-rated"]=new l([],{url:"/api/user/search",num:"3"}),w.each(this.genderTypes,function(t){e[t]=new a([],{name:t})})},handleDeferreds:function(){var e=this,t=[];w.each(this.collections,function(e,n,r){t.push(e.fetch())}),b.when.apply(b,t).done(e.initSections,e.addSubscribers)},setupImageListView:function(e){var t;console.log(this.collections[e]),t=new d({collection:this.collections[e],name:e,destination:"#"+e}),t.render(),this.sections[e]=t,this.meta.activeViews.push(e)},setupSportListView:function(e){var t;t=new m({collection:this.collections[e],name:e,id:e,destination:"#sport #"+e}),t.render(),this.sections[e]=t,this.meta.activeViews.push(e)},setupMenuView:function(){var e=new c,t,n="menu";t=new p({model:e,name:n,destination:"#"+n}),t.render(),this.sections[n]=t,this.meta.activeViews.push(n)},setupLocationDDView:function(){var e,t,n="state",r=new h,i="city";t=new g({model:r,name:i,destination:"#location .city"}),t.render(),this.sections[i]=t,this.meta.activeViews.push(i)},setupLayout:function(){var e;return e=new y({scheme:this.scheme,destination:"#main",template:t}),this.layout=e,this.layout}}),n}),define("text!videopreview/templates/basic.html",[],function(){return'<div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã</button>\r\n		<h3 id="label">Video Uploader</h3>\r\n	</div>\r\n\r\n	<div id="main-content-img"></div>\r\n\r\n	<div class="modal-body">\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n\r\n</div>'}),define("videopreview/models/base",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{URL:window.URL||window.webkitURL}),files:[],initialize:function(){!this.URL},playSelectedFile:function(e){var t=this.files[0],n=t.type,r=document.querySelector("video"),i=r.canPlayType(n);i=i===""?"no":i;var s='Can play type "'+n+'": '+i,o=i==="no";this.displayMessage(s,o);if(o)return;var u=this.URL.createObjectURL(t);r.src=u}}),n}),define("videopreview/models/videoup",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({initialize:function(e){},doUpload:function(e){return new plupload.Uploader({runtimes:"html5,gears,flash,silverlight,browserplus",browse_button:"pickfiles",container:"container_plupload",max_file_size:"500mb",max_file_count:1,chunk_size:"5mb",url:e,unique_names:!0,flash_swf_url:"/plupload/js/plupload.flash.swf",silverlight_xap_url:"/plupload/js/plupload.silverlight.xap",filters:[{title:"Video files",extensions:"mov,mp4,mpeg4,avi,mkv,webm,ogg"}],multipart_params:{title:""},init:{ChunkUploaded:function(e,t,n){console.log(t,n)},FileUploaded:function(e,t,n){$("#"+t.id+" b").html("100%"),$("#uploadfiles").removeClass("isUploading"),e.refresh(),$("form.form input").val("");var r=$.parseJSON(n.response);console.log(r),r.result=="success"&&$("#resultdiv").html("SUCCESS! Your video has been uploaded and is now being encoded.  This may take a few minutes.  You will receive an email when the video is ready to view.  If anything goes wrong you can refer to the encode job ID: "+r.jobID).show(),console.log(t,n)}}})}}),n}),define("text!videopreview/templates/upload.html",[],function(){return'<!--<input type="file" id="chooseVideoFile" accept="video/*"/>\r\n<form>\r\n	<div id="container">\r\n		<div id="pickfiles">Find a Video</div>\r\n		<div class="modal-footer">\r\n			<button class="btn fileuploader btn-primary" id="videoup" type="button">Upload</button>\r\n			<button class="btn" data-dismiss="modal"  aria-hidden="true">Close</button>\r\n		</div>\r\n	</div>\r\n</form>-->\r\n\r\n<div id="file_upload"></div>\r\n<form class="form" id="upload_form" method="post">\r\n	<div id="container_plupload">\r\n	<div id="filelist"></div>\r\n\r\n	<span class="file-wrapper">\r\n				<div class="qq-upload-button" id="pickfiles" style="float:left; width:95%;">\r\n					<span>Select a Video File</span>\r\n					<span style="font-size:11px; display:block; color:#880000;" id="fileVal"></span>\r\n				</div></span><br/>\r\n		<label>Title:</label>\r\n		<input type="text" id="title" name="title" style="width:95%" placeholder="Enter a Title"/>\r\n		<label style="margin-bottom: 2px;">Sport</label>\r\n		<select name="sports_id" id="sports_id" style="width:95%;" class="">\r\n			<option value="46">Baseball</option>\r\n			<option value="47">Basketball</option>	\r\n			<option value="48">Cross Country</option>\r\n			<option value="49">Football</option>\r\n			<option value="50">Rugby</option>	\r\n			<option value="51">Golf</option>\r\n			<option value="52">Hockey</option>\r\n			<option value="53">Lacrosse</option>\r\n			<option value="54">Soccer</option>	\r\n			<option value="55">Swimming</option>\r\n			<option value="56">Tennis</option>\r\n\r\n									<option value="57">Track and Field</option>				<option value="58">Volleyball</option>				<option value="59">Water Polo</option>				<option value="60">Wrestling</option>				<option value="61">Crew</option>					<option value="62">Basketball</option>				<option value="63">Cross Country</option>			<option value="64">Cheerleading</option>			<option value="65">Golf</option>					<option value="66">Hockey</option>					<option value="67">Lacrosse</option>				<option value="68">Softball</option>				<option value="69">Soccer</option>					<option value="70">Swimming</option>				<option value="71">Rifle</option>					<option value="72">Tennis</option>					<option value="73">Track and Field</option>			<option value="74">Volleyball</option>				<option value="75">Water Polo</option>				<option value="76">Field Hockey</option>			<option value="77">Crew</option>					<option value="78">Gymnastics</option>				<option value="79">Rifle</option>					<option value="80">Skiing</option>					<option value="81">Diving</option>					<option value="82">Indoor Track</option>			<option value="83">Fencing</option>					<option value="84">Fencing</option>					<option value="85">Gymnastics</option>				<option value="86">Skiing</option>					<option value="87">Indoor Track</option>			<option value="88">Diving</option>					<option value="89">Squash</option>					<option value="90">Squash</option>					<option value="91">Marathon</option>				<option value="92">Triathalon</option></select>\r\n		\r\n		<div id="uploadfiles" class="qq-upload-button" style="width:70px;">Upload</div>\r\n\r\n	</div>\r\n</form>\r\n\r\n<div id="resultdiv" style="display: none; padding-left: 10px;"></div></div>'}),function(){function l(){this.returnValue=!1}function c(){this.cancelBubble=!0}var e=0,t=[],n={},r={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},s=/[<>&\"\']/g,o,u=window.setTimeout,a={},f;(function(e){var t=e.split(/,/),n,i,s;for(n=0;n<t.length;n+=2){s=t[n+1].split(/ /);for(i=0;i<s.length;i++)r[s[i]]=t[n]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var h={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,ua:function(){var e=navigator,t=e.userAgent,n=e.vendor,r,i,s;return r=/WebKit/.test(t),s=r&&n.indexOf("Apple")!==-1,i=window.opera&&window.opera.buildNumber,{windows:navigator.platform.indexOf("Win")!==-1,ie:!r&&!i&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),webkit:r,gecko:!r&&/Gecko/.test(t),safari:s,opera:!!i}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return h.each(arguments,function(t,n){n>0&&h.each(t,function(t,n){e[n]=t})}),e},cleanName:function(e){var t,n;n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,""),e},addRuntime:function(e,n){return n.name=e,t[e]=n,t.push(n),n},guid:function(){var t=(new Date).getTime().toString(32),n;for(n=0;n<5;n++)t+=Math.floor(Math.random()*65535).toString(32);return(h.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var n="";return h.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},each:function(e,t){var n,r,i;if(e){n=e.length;if(n===o){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(i=0;i<n;i++)if(t(e[i],i)===!1)return}},formatSize:function(e){return e===o||/\D/.test(e)?h.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function a(e){var t,n,r=0,i=0;return e&&(n=e.getBoundingClientRect(),t=s.compatMode==="CSS1Compat"?s.documentElement:s.body,r=n.left+t.scrollLeft,i=n.top+t.scrollTop),{x:r,y:i}}var n=0,r=0,i,s=document,o,u;e=e,t=t||s.body;if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&s.documentMode<8)return o=a(e),u=a(t),{x:o.x-u.x,y:o.y-u.y};i=e;while(i&&i!=t&&i.nodeType)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;i=e.parentNode;while(i&&i!=t&&i.nodeType)n-=i.scrollLeft||0,r-=i.scrollTop||0,i=i.parentNode;return{x:n,y:r}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return typeof e=="string"&&(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],t=="g"&&(e*=1073741824),t=="m"&&(e*=1048576),t=="k"&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(s,function(e){return i[e]?"&"+i[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},addI18n:function(e){return h.extend(n,e)},translate:function(e){return n[e]||e},isEmptyObj:function(e){if(e===o)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var n;return e.className==""?!1:(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),n.test(e.className))},addClass:function(e,t){h.hasClass(e,t)||(e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return t===" "&&n===" "?" ":""})},getStyle:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle)return window.getComputedStyle(e,null)[t]},addEvent:function(e,t,n){var r,i,s,u;u=arguments[3],t=t.toLowerCase(),f===o&&(f="Plupload_"+h.guid()),e.addEventListener?(r=n,e.addEventListener(t,r,!1)):e.attachEvent&&(r=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=l,e.stopPropagation=c,n(e)},e.attachEvent("on"+t,r)),e[f]===o&&(e[f]=h.guid()),a.hasOwnProperty(e[f])||(a[e[f]]={}),i=a[e[f]],i.hasOwnProperty(t)||(i[t]=[]),i[t].push({func:r,orig:n,key:u})},removeEvent:function(e,t){var n,r,i;typeof arguments[2]=="function"?r=arguments[2]:i=arguments[2],t=t.toLowerCase();if(!(e[f]&&a[e[f]]&&a[e[f]][t]))return;n=a[e[f]][t];for(var s=n.length-1;s>=0;s--)if(n[s].key===i||n[s].orig===r){e.removeEventListener?e.removeEventListener(t,n[s].func,!1):e.detachEvent&&e.detachEvent("on"+t,n[s].func),n[s].orig=null,n[s].func=null,n.splice(s,1);if(r!==o)break}n.length||delete a[e[f]][t];if(h.isEmptyObj(a[e[f]])){delete a[e[f]];try{delete e[f]}catch(u){e[f]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[f]===o||!e[f])return;h.each(a[e[f]],function(n,r){h.removeEvent(e,r,t)})}};h.Uploader=function(e){function f(){var e,t=0,n;if(this.state==h.STARTED){for(n=0;n<i.length;n++)!e&&i[n].status==h.QUEUED?(e=i[n],e.status=h.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e)):t++;t==i.length&&(this.stop(),this.trigger("UploadComplete",i))}}function l(){var e,t;r.reset();for(e=0;e<i.length;e++)t=i[e],t.size!==o?(r.size+=t.size,r.loaded+=t.loaded):r.size=o,t.status==h.DONE?r.uploaded++:t.status==h.FAILED?r.failed++:r.queued++;r.size===o?r.percent=i.length>0?Math.ceil(r.uploaded/i.length*100):0:(r.bytesPerSec=Math.ceil(r.loaded/((+(new Date)-s||1)/1e3)),r.percent=r.size>0?Math.ceil(r.loaded/r.size*100):0)}var n={},r,i=[],s,a=!1;r=new h.QueueProgress,e=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e),h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:i,settings:e,total:r,id:h.guid(),init:function(){function v(){var e=a[p++],t,r,i;if(e){t=e.getFeatures(),r=n.settings.required_features;if(r){r=r.split(",");for(i=0;i<r.length;i++)if(!t[r[i]]){v();return}}e.init(n,function(r){r&&r.success?(n.features=t,n.runtime=e.name,n.trigger("Init",{runtime:e.name}),n.trigger("PostInit"),n.refresh()):v()})}else n.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var n=this,r,a,c,p=0,d;typeof e.preinit=="function"?e.preinit(n):h.each(e.preinit,function(e,t){n.bind(t,e)}),e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url),e.chunk_size=h.parseSize(e.chunk_size),e.max_file_size=h.parseSize(e.max_file_size),n.bind("FilesAdded",function(t,r){var s,a,f=0,l,c=e.filters;c&&c.length&&(l=[],h.each(c,function(e){h.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?l.push("\\.*"):l.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),l=new RegExp(l.join("|")+"$","i"));for(s=0;s<r.length;s++){a=r[s],a.loaded=0,a.percent=0,a.status=h.QUEUED;if(l&&!l.test(a.name)){t.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:a});continue}if(a.size!==o&&a.size>e.max_file_size){t.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:a});continue}i.push(a),f++}if(!f)return!1;u(function(){n.trigger("QueueChanged"),n.refresh()},1)}),e.unique_names&&n.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),r="tmp";n&&(r=n[1]),t.target_name=t.id+"."+r}),n.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,l()}),n.bind("StateChanged",function(e){if(e.state==h.STARTED)s=+(new Date);else if(e.state==h.STOPPED)for(r=e.files.length-1;r>=0;r--)e.files[r].status==h.UPLOADING&&(e.files[r].status=h.QUEUED,l())}),n.bind("QueueChanged",l),n.bind("Error",function(e,t){t.file&&(t.file.status=h.FAILED,l(),e.state==h.STARTED&&u(function(){f.call(n)},1))}),n.bind("FileUploaded",function(e,t){t.status=h.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),u(function(){f.call(n)},1)});if(e.runtimes){a=[],d=e.runtimes.split(/\s?,\s?/);for(r=0;r<d.length;r++)t[d[r]]&&a.push(t[d[r]])}else a=t;v(),typeof e.init=="function"?e.init(n):h.each(e.init,function(e,t){n.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){i.length&&this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),f.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){a=arguments[0]!==o?arguments[0]:!0,this.trigger("DisableBrowse",a)},getFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e)return i[t]},removeFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;return n=i.splice(e===o?0:e,t===o?i.length:t),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t=n[e.toLowerCase()],r,i;if(t){i=Array.prototype.slice.call(arguments),i[0]=this;for(r=0;r<t.length;r++)if(t[r].func.apply(t[r].scope,i)===!1)return!1}return!0},hasEventListener:function(e){return!!n[e.toLowerCase()]},bind:function(e,t,r){var i;e=e.toLowerCase(),i=n[e]||[],i.push({func:t,scope:r||this}),n[e]=i},unbind:function(e){e=e.toLowerCase();var t=n[e],r,i=arguments[1];if(t){if(i!==o){for(r=t.length-1;r>=0;r--)if(t[r].func===i){t.splice(r,1);break}}else t=[];t.length||delete n[e]}},unbindAll:function(){var e=this;h.each(n,function(t,n){e.unbind(n)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},h.File=function(e,t,n){var r=this;r.id=e,r.name=t,r.size=n,r.loaded=0,r.percent=0,r.status=0},h.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},h.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},h.runtimes={},window.plupload=h}(),function(){if(window.google&&google.gears)return;var e=null;if(typeof GearsFactory!="undefined")e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory"),e.getBuildInfo().indexOf("ie_mobile")!=-1&&e.privateSetGlobalObject(this)}catch(t){typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]&&(e=document.createElement("object"),e.style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}if(!e)return;window.google||(window.google={}),google.gears||(google.gears={factory:e})}(),function(e,t,n,r){function s(e,t,n){var r,i,s,o;i=google.gears.factory.create("beta.canvas");try{i.decode(e),t.width||(t.width=i.width),t.height||(t.height=i.height),o=Math.min(width/i.width,height/i.height);if(o<1||o===1&&n==="image/jpeg")return i.resize(Math.round(i.width*o),Math.round(i.height*o)),t.quality?i.encode(n,{quality:t.quality/100}):i.encode(n)}catch(u){}return e}var i={};n.runtimes.Gears=n.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,o){function d(e){var t,s,o=[],u;for(s=0;s<e.length;s++)t=e[s],u=n.guid(),i[u]=t.blob,o.push(new n.File(u,t.name,t.blob.length));r.trigger("FilesAdded",o)}var u,l,h=!1;if(!e.google||!google.gears)return o({success:!1});try{u=google.gears.factory.create("beta.desktop")}catch(p){return o({success:!1})}r.bind("PostInit",function(){var e=r.settings,i=t.getElementById(e.drop_element);i&&(n.addEvent(i,"dragover",function(e){u.setDropEffect(e,"copy"),e.preventDefault()},r.id),n.addEvent(i,"drop",function(e){var t=u.getDragData(e,"application/x-gears-files");t&&d(t.files),e.preventDefault()},r.id),i=0),n.addEvent(t.getElementById(e.browse_button),"click",function(t){var n=[],r,i,s;t.preventDefault();if(h)return;e:for(r=0;r<e.filters.length;r++){s=e.filters[r].extensions.split(",");for(i=0;i<s.length;i++){if(s[i]==="*"){n=[];break e}n.push("."+s[i])}}u.openFiles(d,{singleFile:!e.multi_selection,filter:n})},r.id)}),r.bind("CancelUpload",function(){l.abort&&l.abort()}),r.bind("UploadFile",function(e,t){function v(){function y(r){var i,s="----pluploadboundary"+n.guid(),o="--",u="\r\n",f,h;a&&(l.setRequestHeader("Content-Type","multipart/form-data; boundary="+s),i=google.gears.factory.create("beta.blobbuilder"),n.each(n.extend(m,e.settings.multipart_params),function(e,t){i.append(o+s+u+'Content-Disposition: form-data; name="'+t+'"'+u+u),i.append(e+u)}),h=n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",i.append(o+s+u+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"'+u+"Content-Type: "+h+u+u),i.append(r),i.append(u+o+s+o+u),f=i.getAsBlob(),p=f.length-r.length,r=f),l.send(r)}var s,a=e.settings.multipart,p=0,m={name:t.target_name||t.name},g=e.settings.url;if(t.status==n.DONE||t.status==n.FAILED||e.state==n.STOPPED)return;d&&(m.chunk=r,m.chunks=o),s=Math.min(u,t.size-r*u),a||(g=n.buildUrl(e.settings.url,m)),l=google.gears.factory.create("beta.httprequest"),l.open("POST",g),a||(l.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),l.setRequestHeader("Content-Type","application/octet-stream")),n.each(e.settings.headers,function(e,t){l.setRequestHeader(t,e)}),l.upload.onprogress=function(n){t.loaded=h+n.loaded-p,e.trigger("UploadProgress",t)},l.onreadystatechange=function(){var i;if(l.readyState==4&&e.state!==n.STOPPED)if(l.status==200){i={chunk:r,chunks:o,response:l.responseText,status:l.status},e.trigger("ChunkUploaded",t,i);if(i.cancelled){t.status=n.FAILED;return}h+=s,++r>=o?(t.status=n.DONE,e.trigger("FileUploaded",t,{response:l.responseText,status:l.status})):v()}else e.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:t,chunk:r,chunks:o,status:l.status})},r<o&&y(i[t.id].slice(r*u,s))}var r=0,o,u,h=0,p=e.settings.resize,d;p&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(i[t.id]=s(i[t.id],p,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=i[t.id].length,u=e.settings.chunk_size,d=u>0,o=Math.ceil(t.size/u),d||(u=t.size,o=1),v()}),r.bind("DisableBrowse",function(e,t){h=t}),r.bind("Destroy",function(e){var r,i,s={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in s)i=t.getElementById(s[r]),i&&n.removeAllEvents(i,e.id)}),o({success:!0})}})}(window,document,plupload),function(e,t,n,r){function o(e){var t,n=typeof e,i,s,u;if(e===r||e===null)return"null";if(n==="string")return t="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,n){var r=t.indexOf(n);return r+1?"\\"+t.charAt(r+1):(e=n.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if(n=="object"){i=e.length!==r,t="";if(i){for(s=0;s<e.length;s++)t&&(t+=","),t+=o(e[s]);t="["+t+"]"}else{for(u in e)e.hasOwnProperty(u)&&(t&&(t+=","),t+=o(u)+":"+o(e[u]));t="{"+t+"}"}return t}return""+e}function u(e){var t=!1,n=null,r=null,i,s,o,u,a,f=0;try{try{r=new ActiveXObject("AgControl.AgControl"),r.IsVersionSupported(e)&&(t=!0),r=null}catch(l){var c=navigator.plugins["Silverlight Plug-In"];if(c){i=c.description,i==="1.0.30226.2"&&(i="2.0.30226.2"),s=i.split(".");while(s.length>3)s.pop();while(s.length<4)s.push(0);o=e.split(".");while(o.length>4)o.pop();do u=parseInt(o[f],10),a=parseInt(s[f],10),f++;while(f<o.length&&u===a);u<=a&&!isNaN(u)&&(t=!0)}}}catch(h){t=!1}return t}var i={},s={};n.silverlight={trigger:function(e,t){var r=i[e],s,o;r&&(o=n.toArray(arguments).slice(1),o[0]="Silverlight:"+t,setTimeout(function(){r.trigger.apply(r,o)},0))}},n.runtimes.Silverlight=n.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,l){function E(){return t.getElementById(r.id+"_silverlight").content.Upload}var p,v="",m=r.settings.filters,y,w=t.body;if(!u("2.0.31005.0")||e.opera&&e.opera.buildNumber){l({success:!1});return}s[r.id]=!1,i[r.id]=r,p=t.createElement("div"),p.id=r.id+"_silverlight_container",n.extend(p.style,{position:"absolute",top:"80px",background:r.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:r.settings.shim_bgcolor||t.documentMode>8?"":.01}),p.className="plupload silverlight",r.settings.container&&(w=t.getElementById(r.settings.container),n.getStyle(w,"position")==="static"&&(w.style.position="relative")),w.appendChild(p);for(y=0;y<m.length;y++)v+=(v!=""?"|":"")+m[y].title+" | *."+m[y].extensions.replace(/,/g,";*.");p.innerHTML='<object id="'+r.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+r.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+r.id+",filter="+v+",multiselect="+r.settings.multi_selection+'"/></object>',r.bind("Silverlight:Init",function(){var e,u={};if(s[r.id])return;s[r.id]=!0,r.bind("Silverlight:StartSelectFiles",function(t){e=[]}),r.bind("Silverlight:SelectFile",function(t,r,i,s){var o;o=n.guid(),u[o]=r,u[r]=o,e.push(new n.File(o,i,s))}),r.bind("Silverlight:SelectSuccessful",function(){e.length&&r.trigger("FilesAdded",e)}),r.bind("Silverlight:UploadChunkError",function(e,t,i,s,o){r.trigger("Error",{code:n.IO_ERROR,message:"IO Error.",details:o,file:e.getFile(u[t])})}),r.bind("Silverlight:UploadFileProgress",function(e,t,r,i){var s=e.getFile(u[t]);s.status!=n.FAILED&&(s.size=i,s.loaded=r,e.trigger("UploadProgress",s))}),r.bind("Refresh",function(e){var r,i,s;r=t.getElementById(e.settings.browse_button),r&&(i=n.getPos(r,t.getElementById(e.settings.container)),s=n.getSize(r),n.extend(t.getElementById(e.id+"_silverlight_container").style,{top:i.y+"px",left:i.x+"px",width:s.w+"px",height:s.h+"px"}))}),r.bind("Silverlight:UploadChunkSuccessful",function(e,t,r,i,s){var o,a=e.getFile(u[t]);o={chunk:r,chunks:i,response:s},e.trigger("ChunkUploaded",a,o),a.status!=n.FAILED&&e.state!==n.STOPPED&&E().UploadNextChunk(),r==i-1&&(a.status=n.DONE,e.trigger("FileUploaded",a,{response:s}))}),r.bind("Silverlight:UploadSuccessful",function(e,t,r){var i=e.getFile(u[t]);i.status=n.DONE,e.trigger("FileUploaded",i,{response:r})}),r.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)E().RemoveFile(u[t[n].id])}),r.bind("UploadFile",function(e,t){var r=e.settings,i=r.resize||{};E().UploadFile(u[t.id],e.settings.url,o({name:t.target_name||t.name,mime:n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:r.chunk_size,image_width:i.width,image_height:i.height,image_quality:i.quality||90,multipart:!!r.multipart,multipart_params:r.multipart_params||{},file_data_name:r.file_data_name,headers:r.headers}))}),r.bind("CancelUpload",function(){E().CancelUpload()}),r.bind("Silverlight:MouseEnter",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_hover,i&&s&&n.addClass(i,s)}),r.bind("Silverlight:MouseLeave",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_hover,i&&s&&n.removeClass(i,s)}),r.bind("Silverlight:MouseLeftButtonDown",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_active,i&&s&&(n.addClass(i,s),n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)}))}),r.bind("Sliverlight:StartSelectFiles",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_active,i&&s&&n.removeClass(i,s)}),r.bind("DisableBrowse",function(e,t){E().DisableBrowse(t)}),r.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id),delete s[e.id],delete i[e.id],r=t.getElementById(e.id+"_silverlight_container"),r&&w.removeChild(r)}),l({success:!0})})}})}(window,document,plupload),function(e,t,n,r){function o(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}var i={},s={};n.flash={trigger:function(e,t,n){setTimeout(function(){var r=i[e],s,o;r&&r.trigger("Flash:"+t,n)},0)}},n.runtimes.Flash=n.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,r){function p(){return t.getElementById(e.id+"_flash")}function v(){if(l++>5e3){r({success:!1});return}s[e.id]===!1&&setTimeout(v,1)}var u,f,l=0,h=t.body;if(o()<10){r({success:!1});return}s[e.id]=!1,i[e.id]=e,u=t.getElementById(e.settings.browse_button),f=t.createElement("div"),f.id=e.id+"_flash_container",n.extend(f.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),f.className="plupload flash",e.settings.container&&(h=t.getElementById(e.settings.container),n.getStyle(h,"position")==="static"&&(h.style.position="relative")),h.appendChild(f),function(){var r,i;r='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',n.ua.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.ua.ie?(i=t.createElement("div"),f.appendChild(i),i.outerHTML=r,i=null):f.innerHTML=r}(),v(),u=f=null,e.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id),delete s[e.id],delete i[e.id],r=t.getElementById(e.id+"_flash_container"),r&&h.removeChild(r)}),e.bind("Flash:Init",function(){var i={},o;try{p().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(u){r({success:!1});return}if(s[e.id])return;s[e.id]=!0,e.bind("UploadFile",function(t,r){var s=t.settings,o=e.settings.resize||{};p().uploadFile(i[r.id],s.url,{name:r.target_name||r.name,mime:n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:s.chunk_size,width:o.width,height:o.height,quality:o.quality,multipart:s.multipart,multipart_params:s.multipart_params||{},file_data_name:s.file_data_name,format:/\.(jpg|jpeg)$/i.test(r.name)?"jpg":"png",headers:s.headers,urlstream_upload:s.urlstream_upload})}),e.bind("CancelUpload",function(){p().cancelUpload()}),e.bind("Flash:UploadProcess",function(e,t){var r=e.getFile(i[t.id]);r.status!=n.FAILED&&(r.loaded=t.loaded,r.size=t.size,e.trigger("UploadProgress",r))}),e.bind("Flash:UploadChunkComplete",function(e,t){var r,s=e.getFile(i[t.id]);r={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",s,r),s.status!==n.FAILED&&e.state!==n.STOPPED&&p().uploadNextChunk(),t.chunk==t.chunks-1&&(s.status=n.DONE,e.trigger("FileUploaded",s,{response:t.text}))}),e.bind("Flash:SelectFiles",function(t,r){var s,o,u=[],a;for(o=0;o<r.length;o++)s=r[o],a=n.guid(),i[a]=s.id,i[s.id]=a,u.push(new n.File(a,s.name,s.size));u.length&&e.trigger("FilesAdded",u)}),e.bind("Flash:SecurityError",function(t,r){e.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:GenericError",function(t,r){e.trigger("Error",{code:n.GENERIC_ERROR,message:n.translate("Generic error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:IOError",function(t,r){e.trigger("Error",{code:n.IO_ERROR,message:n.translate("IO error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:ImageError",function(t,r){e.trigger("Error",{code:parseInt(r.code,10),message:n.translate("Image error."),file:e.getFile(i[r.id])})}),e.bind("Flash:StageEvent:rollOver",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_hover,i&&s&&n.addClass(i,s)}),e.bind("Flash:StageEvent:rollOut",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_hover,i&&s&&n.removeClass(i,s)}),e.bind("Flash:StageEvent:mouseDown",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_active,i&&s&&(n.addClass(i,s),n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)},r.id))}),e.bind("Flash:StageEvent:mouseUp",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_active,i&&s&&n.removeClass(i,s)}),e.bind("Flash:ExifData",function(t,n){e.trigger("ExifData",e.getFile(i[n.id]),n.data)}),e.bind("Flash:GpsData",function(t,n){e.trigger("GpsData",e.getFile(i[n.id]),n.data)}),e.bind("QueueChanged",function(t){e.refresh()}),e.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)p().removeFile(i[t[n].id])}),e.bind("StateChanged",function(t){e.refresh()}),e.bind("Refresh",function(r){var i,s,o;p().setFileFilters(e.settings.filters,e.settings.multi_selection),i=t.getElementById(r.settings.browse_button),i&&(s=n.getPos(i,t.getElementById(r.settings.container)),o=n.getSize(i),n.extend(t.getElementById(r.id+"_flash_container").style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"}))}),e.bind("DisableBrowse",function(e,t){p().disableBrowse(t)}),r({success:!0})})}})}(window,document,plupload),function(e){e.runtimes.BrowserPlus=e.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,n){function u(n){var r,s,o=[],u,f;for(s=0;s<n.length;s++)u=n[s],f=e.guid(),i[f]=u,o.push(new e.File(f,u.name,u.size));s&&t.trigger("FilesAdded",o)}function f(){var f=!1;t.bind("PostInit",function(){function h(e,t){r.DragAndDrop.AddDropTarget({id:e},function(n){r.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),u(e)}},function(){})})}function p(){document.getElementById(o).style.top="-1000px"}var n,i=s.drop_element,o=t.id+"_droptarget",l=document.getElementById(i),c;l&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?(n=document.createElement("div"),n.setAttribute("id",o),e.extend(n.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(n),e.addEvent(l,"dragenter",function(t){var n,r;n=document.getElementById(i),r=e.getPos(n),e.extend(document.getElementById(o).style,{top:r.y+"px",left:r.x+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})}),h(o,p)):h(i)),e.addEvent(document.getElementById(s.browse_button),"click",function(t){var n=[],i,o,l=s.filters,c,h;t.preventDefault();if(f)return;e:for(i=0;i<l.length;i++){c=l[i].extensions.split(",");for(o=0;o<c.length;o++){if(c[o]==="*"){n=[];break e}h=e.mimeTypes[c[o]],h&&e.inArray(h,n)===-1&&n.push(e.mimeTypes[c[o]])}}r.FileBrowse.OpenBrowseDialog({mimeTypes:n},function(e){e.success&&u(e.value)})}),l=n=null}),t.bind("CancelUpload",function(){r.Uploader.cancel({},function(){})}),t.bind("DisableBrowse",function(e,t){f=t}),t.bind("UploadFile",function(t,n){function d(i,s){var o;if(n.status==e.FAILED)return;u.name=n.target_name||n.name,f&&(u.chunk=""+i,u.chunks=""+s),o=p.shift(),r.Uploader.upload({url:t.settings.url,files:{file:o},cookies:document.cookies,postvars:e.extend(u,t.settings.multipart_params),progressCallback:function(e){var r,s=0;l[i]=parseInt(e.filePercent*o.size/100,10);for(r=0;r<l.length;r++)s+=l[r];n.loaded=s,t.trigger("UploadProgress",n)}},function(r){var o,u;r.success?(o=r.value.statusCode,f&&t.trigger("ChunkUploaded",n,{chunk:i,chunks:s,response:r.value.body,status:o}),p.length>0?d(++i,s):(n.status=e.DONE,t.trigger("FileUploaded",n,{response:r.value.body,status:o}),o>=400&&t.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:n,status:o}))):t.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic Error."),file:n,details:r.error})})}function v(e){n.size=e.size,f?r.FileAccess.chunk({file:e,chunkSize:f},function(e){if(e.success){var t=e.value,n=t.length;l=Array(n);for(var r=0;r<n;r++)l[r]=0,p.push(t[r]);d(0,n)}}):(l=Array(1),p.push(e),d(0,1))}var s=i[n.id],u={},f=t.settings.chunk_size,l,p=[];o&&/\.(png|jpg|jpeg)$/i.test(n.name)?BrowserPlus.ImageAlter.transform({file:s,quality:o.quality||90,actions:[{scale:{maxwidth:o.width,maxheight:o.height}}]},function(e){e.success&&v(e.value.file)}):v(s)}),n({success:!0})}var r=window.BrowserPlus,i={},s=t.settings,o=s.resize;r?r.init(function(e){var t=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];o&&t.push({service:"ImageAlter",version:"4"}),e.success?r.require({services:t},function(e){e.success?f():n()}):n()}):n()}})}(plupload),function(e,t,n,r){function u(t,n){var r;if(!("FileReader"in e))return n(t.getAsDataURL());r=new FileReader,r.readAsDataURL(t),r.onload=function(){n(r.result)}}function a(t,n){var r;if(!("FileReader"in e))return n(t.getAsBinary());r=new FileReader,r.readAsBinaryString(t),r.onload=function(){n(r.result)}}function f(e,n,r,i){var o,a,f,l,p=this;u(s[e.id],function(s){o=t.createElement("canvas"),o.style.display="none",t.body.appendChild(o),a=o.getContext("2d"),f=new Image,f.onerror=f.onabort=function(){i({success:!1})},f.onload=function(){var t,u,d,m,g;n.width||(n.width=f.width),n.height||(n.height=f.height),l=Math.min(n.width/f.width,n.height/f.height);if(l<1||l===1&&r==="image/jpeg"){t=Math.round(f.width*l),u=Math.round(f.height*l),o.width=t,o.height=u,a.drawImage(f,0,0,t,u);if(r==="image/jpeg"){m=new c(atob(s.substring(s.indexOf("base64,")+7))),m.headers&&m.headers.length&&(g=new h,g.init(m.get("exif")[0])&&(g.setExif("PixelXDimension",t),g.setExif("PixelYDimension",u),m.set("exif",g.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",e,g.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",e,g.GPS())));if(n.quality)try{s=o.toDataURL(r,n.quality/100)}catch(y){s=o.toDataURL(r)}}else s=o.toDataURL(r);s=s.substring(s.indexOf("base64,")+7),s=atob(s),m&&m.headers&&m.headers.length&&(s=m.restore(s),m.purge()),o.parentNode.removeChild(o),i({success:!0,data:s})}else i({success:!1})},f.src=s})}function l(){function n(n,r){var i=e?0:-8*(r-1),s=0,o;for(o=0;o<r;o++)s|=t.charCodeAt(n+o)<<Math.abs(i+o*8);return s}function i(e,n,r){var r=arguments.length===3?r:t.length-n-1;t=t.substr(0,n)+e+t.substr(r+n)}function s(t,n,r){var s="",o=e?0:-8*(r-1),u;for(u=0;u<r;u++)s+=String.fromCharCode(n>>Math.abs(o+u*8)&255);i(s,t,r)}var e=!1,t;return{II:function(t){if(t===r)return e;e=t},init:function(n){e=!1,t=n},SEGMENT:function(e,n,r){switch(arguments.length){case 1:return t.substr(e,t.length-e-1);case 2:return t.substr(e,n);case 3:i(r,e,n);break;default:return t}},BYTE:function(e){return n(e,1)},SHORT:function(e){return n(e,2)},LONG:function(e,t){if(t===r)return n(e,4);s(e,t,4)},SLONG:function(e){var t=n(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var r="";for(t+=e;e<t;e++)r+=String.fromCharCode(n(e,1));return r}}}function c(e){var t={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},n=[],i,s,o=r,u=0,a;i=new l,i.init(e);if(i.SHORT(0)!==65496)return;s=2,a=Math.min(1048576,e.length);while(s<=a){o=i.SHORT(s);if(o>=65488&&o<=65495){s+=2;continue}if(o===65498||o===65497)break;u=i.SHORT(s+2)+2,t[o]&&i.STRING(s+4,t[o].signature.length)===t[o].signature&&n.push({hex:o,app:t[o].app.toUpperCase(),name:t[o].name.toUpperCase(),start:s,length:u,segment:i.SEGMENT(s,u)}),s+=u}return i.init(null),{headers:n,restore:function(e){i.init(e);var t=new c(e);if(!t.headers)return!1;for(var r=t.headers.length;r>0;r--){var o=t.headers[r-1];i.SEGMENT(o.start,o.length,"")}t.purge(),s=i.SHORT(2)==65504?4+i.SHORT(4):2;for(var r=0,u=n.length;r<u;r++)i.SEGMENT(s,0,n[r].segment),s+=n[r].length;return i.SEGMENT()},get:function(e){var t=[];for(var r=0,i=n.length;r<i;r++)n[r].app===e.toUpperCase()&&t.push(n[r].segment);return t},set:function(e,t){var r=[];typeof t=="string"?r.push(t):r=t;for(var i=ii=0,s=n.length;i<s;i++){n[i].app===e.toUpperCase()&&(n[i].segment=r[ii],n[i].length=r[ii].length,ii++);if(ii>=r.length)break}},purge:function(){n=[],i.init(null)}}}function h(){function u(t,n){var i=e.SHORT(t),u,a,f,l,c,h,p,d,v=[],m={};for(u=0;u<i;u++){p=h=t+12*u+2,f=n[e.SHORT(p)];if(f===r)continue;l=e.SHORT(p+=2),c=e.LONG(p+=2),p+=4,v=[];switch(l){case 1:case 7:c>4&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.BYTE(p+a);break;case 2:c>4&&(p=e.LONG(p)+s.tiffHeader),m[f]=e.STRING(p,c-1);continue;case 3:c>2&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.SHORT(p+a*2);break;case 4:c>1&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.LONG(p+a*4);break;case 5:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.LONG(p+a*4)/e.LONG(p+a*4+4);break;case 9:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4);break;case 10:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4)/e.SLONG(p+a*4+4);break;default:continue}d=c==1?v[0]:v,o.hasOwnProperty(f)&&typeof d!="object"?m[f]=o[f][d]:m[f]=d}return m}function a(){var n=r,i=s.tiffHeader;return e.II(e.SHORT(i)==18761),e.SHORT(i+=2)!==42?!1:(s.IFD0=s.tiffHeader+e.LONG(i+=2),n=u(s.IFD0,t.tiff),s.exifIFD="ExifIFDPointer"in n?s.tiffHeader+n.ExifIFDPointer:r,s.gpsIFD="GPSInfoIFDPointer"in n?s.tiffHeader+n.GPSInfoIFDPointer:r,!0)}function f(n,r,o){var u,a,f,l=0;if(typeof r=="string"){var c=t[n.toLowerCase()];for(hex in c)if(c[hex]===r){r=hex;break}}u=s[n.toLowerCase()+"IFD"],a=e.SHORT(u);for(i=0;i<a;i++){f=u+12*i+2;if(e.SHORT(f)==r){l=f+8;break}}return l?(e.LONG(l,o),!0):!1}var e,t,s={},o;return e=new l,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},o={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return s={tiffHeader:10},t===r||!t.length?!1:(e.init(t),e.SHORT(0)===65505&&e.STRING(4,5).toUpperCase()==="EXIF\0"?a():!1)},EXIF:function(){var e;e=u(s.exifIFD,t.exif);if(e.ExifVersion&&n.typeOf(e.ExifVersion)==="array"){for(var r=0,i="";r<e.ExifVersion.length;r++)i+=String.fromCharCode(e.ExifVersion[r]);e.ExifVersion=i}return e},GPS:function(){var e;return e=u(s.gpsIFD,t.gps),e.GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(e,t){return e!=="PixelXDimension"&&e!=="PixelYDimension"?!1:f("exif",e,t)},getBinary:function(){return e.SEGMENT()}}}var s={},o;n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var r,i,s,u,a,f;return i=s=a=f=!1,e.XMLHttpRequest&&(r=new XMLHttpRequest,s=!!r.upload,i=!!r.sendAsBinary||!!r.upload),i&&(u=!!(r.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),a=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!u),f=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),o=n.ua.safari&&n.ua.windows,{html5:i,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:a,pngresize:a,multipart:a||!!e.FileReader||!!e.FormData,canSendBinary:u,cantSendBlobInFormData:!!(n.ua.gecko&&e.FormData&&e.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:s,chunks:f,multi_selection:!n.ua.safari||!n.ua.windows,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,i){function c(e){var t,i,o=[],u,a={};for(i=0;i<e.length;i++){t=e[i];if(a[t.name])continue;a[t.name]=!0,u=n.guid(),s[u]=t,o.push(new n.File(u,t.fileName||t.name,t.fileSize||t.size))}o.length&&r.trigger("FilesAdded",o)}var u,l;u=this.getFeatures();if(!u.html5){i({success:!1});return}r.bind("Init",function(e){var i,s,o=[],u,a,f=e.settings.filters,l,h,d=t.body,v;i=t.createElement("div"),i.id=e.id+"_html5_container",n.extend(i.style,{position:"absolute",background:r.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:r.settings.shim_bgcolor?"":0}),i.className="plupload html5",r.settings.container&&(d=t.getElementById(r.settings.container),n.getStyle(d,"position")==="static"&&(d.style.position="relative")),d.appendChild(i);e:for(u=0;u<f.length;u++){l=f[u].extensions.split(/,/);for(a=0;a<l.length;a++){if(l[a]==="*"){o=[];break e}h=n.mimeTypes[l[a]],h&&n.inArray(h,o)===-1&&o.push(h)}}i.innerHTML='<input id="'+r.id+'_html5"  style="font-size:999px" type="file" accept="'+o.join(",")+'" '+(r.settings.multi_selection&&r.features.multi_selection?'multiple="multiple"':"")+" />",i.scrollTop=100,v=t.getElementById(r.id+"_html5"),e.features.triggerDialog?n.extend(v.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(v.style,{cssFloat:"right",styleFloat:"right"}),v.onchange=function(){var e=window.URL||window.webkitURL;window.fileURL=e.createObjectURL(this.files[0]),c(this.files),this.value=""},s=t.getElementById(e.settings.browse_button);if(s){var m=e.settings.browse_button_hover,g=e.settings.browse_button_active,y=e.features.triggerDialog?s:i;m&&(n.addEvent(y,"mouseover",function(){n.addClass(s,m)},e.id),n.addEvent(y,"mouseout",function(){n.removeClass(s,m)},e.id)),g&&(n.addEvent(y,"mousedown",function(){n.addClass(s,g)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(s,g)},e.id)),e.features.triggerDialog&&n.addEvent(s,"click",function(n){var r=t.getElementById(e.id+"_html5");r&&!r.disabled&&r.click(),n.preventDefault()},e.id)}}),r.bind("PostInit",function(){var e=t.getElementById(r.settings.drop_element);if(e){if(o){n.addEvent(e,"dragenter",function(i){var s,o,u;s=t.getElementById(r.id+"_drop"),s||(s=t.createElement("input"),s.setAttribute("type","file"),s.setAttribute("id",r.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",function(){c(this.files),n.removeEvent(s,"change",r.id),s.parentNode.removeChild(s)},r.id),e.appendChild(s)),o=n.getPos(e,t.getElementById(r.settings.container)),u=n.getSize(e),n.getStyle(e,"position")==="static"&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:u.w+"px",height:u.h+"px",opacity:0})},r.id);return}n.addEvent(e,"dragover",function(e){e.preventDefault()},r.id),n.addEvent(e,"drop",function(e){var t=e.dataTransfer;t&&t.files&&c(t.files),e.preventDefault()},r.id)}}),r.bind("Refresh",function(e){var i,s,o,u,a;i=t.getElementById(r.settings.browse_button),i&&(s=n.getPos(i,t.getElementById(e.settings.container)),o=n.getSize(i),u=t.getElementById(r.id+"_html5_container"),n.extend(u.style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"}),r.features.triggerDialog&&(n.getStyle(i,"position")==="static"&&n.extend(i.style,{position:"relative"}),a=parseInt(n.getStyle(i,"z-index"),10),isNaN(a)&&(a=0),n.extend(i.style,{zIndex:a}),n.extend(u.style,{zIndex:a-1})))}),r.bind("DisableBrowse",function(e,n){var r=t.getElementById(e.id+"_html5");r&&(r.disabled=n)}),r.bind("CancelUpload",function(){l&&l.abort&&l.abort()}),r.bind("UploadFile",function(t,r){function h(e,t,n){var r;if(!File.prototype.slice)return(r=File.prototype.webkitSlice||File.prototype.mozSlice)?r.call(e,t,n):null;try{return e.slice(),e.slice(t,n)}catch(i){return e.slice(t,n-t)}}function p(s){function c(){function S(i){var s=0,f="----pluploadboundary"+n.guid(),h,d="--",v="\r\n",S="";l=new XMLHttpRequest,l.upload&&(l.upload.onprogress=function(e){r.loaded=Math.min(r.size,a+e.loaded-s),t.trigger("UploadProgress",r)}),l.onreadystatechange=function(){var e,s;if(l.readyState==4&&t.state!==n.STOPPED){try{e=l.status}catch(u){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:r,status:e});else{if(m){s={chunk:o,chunks:m,response:l.responseText,status:e},t.trigger("ChunkUploaded",r,s),a+=b;if(s.cancelled){r.status=n.FAILED;return}r.loaded=Math.min(r.size,(o+1)*y)}else r.loaded=r.size;t.trigger("UploadProgress",r),i=p=h=S=null,!m||++o>=m?(r.status=n.DONE,t.trigger("FileUploaded",r,{response:l.responseText,status:e})):c()}}};if(t.settings.multipart&&u.multipart){g.name=r.target_name||r.name,l.open("post",E,!0),n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)});if(typeof i!="string"&&!!e.FormData){h=new FormData,n.each(n.extend(g,t.settings.multipart_params),function(e,t){h.append(t,e)}),h.append(t.settings.file_data_name,i),l.send(h);return}if(typeof i=="string"){l.setRequestHeader("Content-Type","multipart/form-data; boundary="+f),n.each(n.extend(g,t.settings.multipart_params),function(e,t){S+=d+f+v+'Content-Disposition: form-data; name="'+t+'"'+v+v,S+=unescape(encodeURIComponent(e))+v}),w=n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",S+=d+f+v+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(r.name))+'"'+v+"Content-Type: "+w+v+v+i+v+d+f+d+v,s=S.length-i.length,i=S;if(l.sendAsBinary)l.sendAsBinary(i);else if(u.canSendBinary){var x=new Uint8Array(i.length);for(var T=0;T<i.length;T++)x[T]=i.charCodeAt(T)&255;l.send(x.buffer)}return}}E=n.buildUrl(t.settings.url,n.extend(g,t.settings.multipart_params)),l.open("post",E,!0),l.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)}),l.send(i)}var p,d,m,g,y,b,w,E=t.settings.url;if(r.status==n.DONE||r.status==n.FAILED||t.state==n.STOPPED)return;g={name:r.target_name||r.name},i.chunk_size&&r.size>i.chunk_size&&(u.chunks||typeof s=="string")?(y=i.chunk_size,m=Math.ceil(r.size/y),b=Math.min(y,r.size-o*y),typeof s=="string"?p=s.substring(o*y,o*y+b):p=h(s,o*y,o*y+b),g.chunk=o,g.chunks=m):(b=r.size,p=s),t.settings.multipart&&u.multipart&&typeof p!="string"&&f&&u.cantSendBlobInFormData&&u.chunks&&t.settings.chunk_size?(f.onload=function(){S(f.result)},f.readAsBinaryString(p)):S(p)}var o=0,a=0,f="FileReader"in e?new FileReader:null;c()}var i=t.settings,o,c;o=s[r.id],u.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(r.name)?f.call(t,r,t.settings.resize,/\.png$/i.test(r.name)?"image/png":"image/jpeg",function(e){e.success?(r.size=e.data.length,p(e.data)):u.chunks?p(o):a(o,p)}):!u.chunks&&u.jpgresize?a(o,p):p(o)}),r.bind("Destroy",function(e){var r,i,s=t.body,o={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in o)i=t.getElementById(o[r]),i&&n.removeAllEvents(i,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(s=t.getElementById(e.settings.container)),s.removeChild(t.getElementById(o.inputContainer))}),i({success:!0})}})}(window,document,plupload),function(e,t,n,r){function i(e){return t.getElementById(e)}n.runtimes.Html4=n.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,s){r.bind("Init",function(s){function T(){var e,u,l,c;p=n.guid(),v.push(p),e=t.createElement("form"),e.setAttribute("id","form_"+p),e.setAttribute("method","post"),e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"),e.setAttribute("target",s.id+"_iframe"),e.style.position="absolute",u=t.createElement("input"),u.setAttribute("id","input_"+p),u.setAttribute("type","file"),u.setAttribute("accept",g),u.setAttribute("size",1),c=i(s.settings.browse_button),s.features.triggerDialog&&c&&n.addEvent(i(s.settings.browse_button),"click",function(e){u.disabled||u.click(),e.preventDefault()},s.id),n.extend(u.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),n.extend(e.style,{overflow:"hidden"}),l=s.settings.shim_bgcolor,l&&(e.style.background=l),m&&n.extend(u.style,{filter:"alpha(opacity=0)"}),n.addEvent(u,"change",function(t){var o=t.target,a,l=[],h;o.value&&(i("form_"+p).style.top="-1048575px",a=o.value.replace(/\\/g,"/"),a=a.substring(a.length,a.lastIndexOf("/")+1),l.push(new n.File(p,a)),s.features.triggerDialog?n.removeEvent(c,"click",s.id):n.removeAllEvents(e,s.id),n.removeEvent(u,"change",s.id),T(),l.length&&r.trigger("FilesAdded",l))},s.id),e.appendChild(u),o.appendChild(e),s.refresh()}function N(){var r=t.createElement("div");r.innerHTML='<iframe id="'+s.id+'_iframe" name="'+s.id+'_iframe" src="'+l+':&quot;&quot;" style="display:none"></iframe>',u=r.firstChild,o.appendChild(u),n.addEvent(u,"load",function(t){var r=t.target,i,o;if(!c)return;try{i=r.contentWindow.document||r.contentDocument||e.frames[r.id].document}catch(u){s.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),file:c});return}o=i.body.innerHTML,o&&(c.status=n.DONE,c.loaded=1025,c.percent=100,s.trigger("UploadProgress",c),s.trigger("FileUploaded",c,{response:o}))},s.id)}var o=t.body,u,l="javascript",c,h,p,v=[],m=/MSIE/.test(navigator.userAgent),g=[],y=s.settings.filters,w,E,S,x;e:for(w=0;w<y.length;w++){E=y[w].extensions.split(/,/);for(x=0;x<E.length;x++){if(E[x]==="*"){g=[];break e}S=n.mimeTypes[E[x]],S&&n.inArray(S,g)===-1&&g.push(S)}}g=g.join(","),s.settings.container&&(o=i(s.settings.container),n.getStyle(o,"position")==="static"&&(o.style.position="relative")),s.bind("UploadFile",function(e,r){var s,o;if(r.status==n.DONE||r.status==n.FAILED||e.state==n.STOPPED)return;s=i("form_"+r.id),o=i("input_"+r.id),o.setAttribute("name",e.settings.file_data_name),s.setAttribute("action",e.settings.url),n.each(n.extend({name:r.target_name||r.name},e.settings.multipart_params),function(e,r){var i=t.createElement("input");n.extend(i,{type:"hidden",name:r,value:e}),s.insertBefore(i,s.firstChild)}),c=r,i("form_"+p).style.top="-1048575px",s.submit()}),s.bind("FileUploaded",function(e){e.refresh()}),s.bind("StateChanged",function(t){t.state==n.STARTED?N():t.state==n.STOPPED&&e.setTimeout(function(){n.removeEvent(u,"load",t.id),u.parentNode&&u.parentNode.removeChild(u)},0),n.each(t.files,function(e,t){if(e.status===n.DONE||e.status===n.FAILED){var r=i("form_"+e.id);r&&r.parentNode.removeChild(r)}})}),s.bind("Refresh",function(e){var r,s,o,u,f,l,c,h,d;r=i(e.settings.browse_button),r&&(f=n.getPos(r,i(e.settings.container)),l=n.getSize(r),c=i("form_"+p),h=i("input_"+p),n.extend(c.style,{top:f.y+"px",left:f.x+"px",width:l.w+"px",height:l.h+"px"}),e.features.triggerDialog&&(n.getStyle(r,"position")==="static"&&n.extend(r.style,{position:"relative"}),d=parseInt(r.style.zIndex,10),isNaN(d)&&(d=0),n.extend(r.style,{zIndex:d}),n.extend(c.style,{zIndex:d-1})),o=e.settings.browse_button_hover,u=e.settings.browse_button_active,s=e.features.triggerDialog?r:c,o&&(n.addEvent(s,"mouseover",function(){n.addClass(r,o)},e.id),n.addEvent(s,"mouseout",function(){n.removeClass(r,o)},e.id)),u&&(n.addEvent(s,"mousedown",function(){n.addClass(r,u)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(r,u)},e.id)))}),r.bind("FilesRemoved",function(e,t){var n,r;for(n=0;n<t.length;n++)r=i("form_"+t[n].id),r&&r.parentNode.removeChild(r)}),r.bind("DisableBrowse",function(e,n){var r=t.getElementById("input_"+p);r&&(r.disabled=n)}),r.bind("Destroy",function(e){var r,s,u,f={inputContainer:"form_"+p,inputFile:"input_"+p,browseButton:e.settings.browse_button};for(r in f)s=i(f[r]),s&&n.removeAllEvents(s,e.id);n.removeAllEvents(t.body,e.id),n.each(v,function(e,t){u=i("form_"+e),u&&o.removeChild(u)})}),T()}),s({success:!0})}})}(window,document,plupload),define("plupload",function(){}),define("videopreview/views/uploader",["vendor","views","facade","videopreview/models/videoup","text!videopreview/templates/upload.html","plupload"],function(e,t,n,r){var i=require("text!videopreview/templates/upload.html"),s,o=e.$,u=n._,a=t.SectionView,f=e.Mustache;return s=a.extend({name:"Video Preview Form View",id:"videoPreviewForm",template:i,data:i,events:{"change input:file":"play","click #uploadfiles":"uploadFiles"},initialize:function(e){a.prototype.initialize.call(this,e),u.bindAll(this,"beforeRender","render","afterRender");var t=this;this.render=u.wrap(this.render,function(e){return t.beforeRender(),e(),t}),o("#imgUploadModal").modal("show")},beforeRender:function(){console.log("beforeRender")},afterRender:function(){},uploadFiles:function(e){this.uploader=this.model.uploader,console.log(this.uploader,"up");if(o("input#title").val()==""){alert("Please enter a title for this video.");return}this.uploader.settings.multipart_params.name=o("input#title").val(),this.uploader.settings.multipart_params.mm=o("input#mm").is(":checked"),this.uploader.settings.multipart_params.sports_id=o("select#sports_id").val(),o("#uploadfiles").addClass("isUploading"),this.uploader.start(),e.preventDefault()},plupInit:function(){},play:function(e){var t=window.fileURL;Channel("select-video-preview-change").publish(t)},videoUploadClick:function(e){console.log("called",this.file),e.preventDefault(),o("#errormsg").hide(),o("#imageup").attr("disabled","disabled"),Channel("mediaup-add-video").publish(this.file)}}),s}),define("text!videopreview/templates/preview.html",[],function(){return'<video  width="320" height="240" controls autoplay></video>'}),define("videopreview/views/preview",["vendor","views","utils","text!videopreview/templates/preview.html"],function(e,t,n){var r=require("text!videopreview/templates/preview.html"),i,s=e.$,o=t.SectionView;return console.log(o),i=o.extend({name:"Video Preview View",id:"videoPreviewWindow",template:r,data:r,initialize:function(e){o.prototype.initialize.call(this,e),Channel("select-video-preview-change").subscribe(this.changeVideo)},changeVideo:function(e){document.querySelector(this.$el.selector+" video").src=e},displayMessage:function(e,t){var n=this.$el.find(".message");n.html(e),n.className=t?"error":"info"}}),i}),define("videopreview",["require","text!videopreview/templates/basic.html","facade","controller","models","views","utils","videopreview/models/base","videopreview/models/videoup","videopreview/views/uploader","videopreview/views/preview"],function(e,t,n,r,i,s,o,u,a,f,l){var c,h=s.LayoutView,p=n.$,d=n._,v=o.debug,m=o.lib.Channel,g=["/pages/imageup/imageup.css"];return c=r.extend({initialize:function(e){return m("load:css").publish(g),d.bindAll(this),this.handleOptions(e),this.init(e),this},init:function(e){this.url=e.url,this.attr=e.attr,v.log("VideoPreview Init"),this.setupLayout(),this.showVideoPreview()},setupLayout:function(){return this.scheme=[],p("div#modalPopup").remove(),p("body").append('<div id="modalPopup"></div>'),pageLayout=new h({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=pageLayout,console.log(this.layout),this.layout},showVideoPreview:function(e){var t=new a,n=this,r=new l({name:"Video Preview View",model:t,destination:".modal-body #preview"},this.attr);this.scheme.push(r);var i=new f({name:"Video Upload View",model:t,destination:"#main-content-img"},this.attr);this.scheme.push(i),this.layout.render(),this.afterRender(t)},afterRender:function(e){e.uploader=e.doUpload(this.url),e.uploader.bind("Init",function(e,t){p("#filelist").html("<div></div>")});try{e.uploader.init()}catch(t){alert(t)}e.uploader.bind("FilesAdded",function(t,n){maxCountError=!1,p.each(n,function(n,r){e.uploader.settings.max_file_count&&n>=e.uploader.settings.max_file_count?(maxCountError=!0,setTimeout(function(){t.removeFile(r)},50)):p("#filelist").append('<div id="'+r.id+'">'+r.name+" ("+plupload.formatSize(r.size)+") <b></b>"+"</div>"),maxCountError&&p("#resultdiv").html("You can only select one video at a time.").show()}),t.refresh()}),e.uploader.bind("UploadProgress",function(e,t){p("#"+t.id+" b").html(t.percent+"%")}),e.uploader.bind("Error",function(e,t){p("#filelist").append("<div>Error: "+t.code+", Message: "+t.message+(t.file?", File: "+t.file.name:"")+"</div>"),e.refresh()})},uploadVideo:function(e){alert("inside uploadvideo"),console.log("Called",e);var t=new a({file:e})}}),c}),define("text!game/templates/layout.html",[],function(){return'<div class="template-container">\r\n	<div id="main-header" class="profile-header"></div>\r\n	<div id="votes-area-h"></div>\r\n	<div class="green-left-heading">MESSAGE BOARD</div>\r\n	<div id="commenton-wrap" class="clearfix clear commentson-outer-box-h"></div>\r\n	<div id="comment_div" class="clearfix"></div>\r\n	\r\n	\r\n		<div class="green-left-heading">PHOTO/VIDEO</div>\r\n	<div class="row-fluid" id="main-content">\r\n	<!-- <div id="video-wrap" class="clearfix"></div> -->\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<div id="add-media" class="clearfix">add media</div>\r\n	</div>\r\n	\r\n	<div class="green-left-heading team-one-h hide"></div>\r\n	<div id="roster-wrap" class="clearfix clear"></div>\r\n	\r\n	<div class="green-left-heading team-second-h hide"></div>\r\n	<div id="roster-second-wrap" class="clearfix clear"></div>	\r\n	\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="org-wrap" class="clearfix hide"></div>\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	\r\n	\r\n	\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        <div>MESSAGE BOARD</div>\r\n    	<div class="commentson-outer-box-h clear"></div>\r\n    	<div id="comment_div" class="clearfix"></div>\r\n        \r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n        \r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n       \r\n        \r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>\r\n'}),define("text!votes/templates/vote.html",[],function(){return'<a href="javascript:void(0);" class="team-action-h">Vote</a>\r\n<a href="javascript:void(0);" class="follow-action-h">Follow</a>'}),define("votes/models/vote",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/vote/add?subject_type_id="+this.entity_id+"&subject_id="+this.userId},setData:function(){this.set({subject_type_id:this.entity_id,subject_id:this.userId})}}),n}),define("votes/models/follow",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return base_url+"api/ent/follow/"+this.entity_id+"/"+this.userId}}),n}),define("votes/views/vote",["require","text!votes/templates/vote.html","views","vendor","facade","utils","jqueryui","controller","votes/models/vote","votes/models/follow"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("votes/models/vote"),d=e("votes/models/follow");return n=o.extend({template:t,events:{"click .team-action-h":"vote","click .follow-action-h":"follow"},vote:function(){this.voteModelOb.save()},follow:function(){this.followModelOb.save()},initialize:function(e){var t=this;console.log(e),a.bindAll(this),o.prototype.initialize.call(this,e);var n=this.model.get("payload");console.log(n),this.voteModelOb=new p,this.voteModelOb.userId=e.userId,this.voteModelOb.entity_id=n.enttypes_id,this.voteModelOb.setData(),this.followModelOb=new d,this.followModelOb.userId=e.userId,this.followModelOb.entity_id=n.enttypes_id},render:function(e,t,n){o.prototype.render.call(this,e,t,n)}}),n}),define("sportorg/models/game",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,game_name:null,game_day:null,game_time:null,game_picture:null,teams:[{team_name:null,team_location:null,points_scored:0,points_against:0,is_winner:null}],game_location:null},desc:"Game information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("game/models/basics",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/game/basics/"+this.id:"/api/game/basics/"+this.id}}),n}),define("game/models/addmedia",["models/base"],function(e){var t;return t=e.extend({defaults:{links:[{label:"Photo",link:"javascript:void(0);",id:"addPhoto"},{label:"Video",link:"javascript:void(0);",id:"addVideo"}]}}),t}),define("sportorg/models/teamroster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{team_id:0,team_name:null,rosters:[{name:null,user_picture:null,grad_year:0,sport_name:null,position:null}]},desc:"Team Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/teamrosters",["facade","collections","sportorg/models/teamroster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("game/collections/teamrosters",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("media/models/video",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{video_id:0,video_title:null,video_quality:0,video_thumb:null,video_src:null,org_name:null,teams:[{complevel:null,season:null,grad_year:0,team_name:null,schedule:{schedule_date:null,other_team:null,schedule_summary:null}}],games:[{team1_name:null,team2_name:null}],video_desc:null,user_name:null,post_date:null,tags_count:0,tags:[],num_votes:0,num_views:0,num_comments:0,social_links:[{"class":null,title:null,link:null}]},desc:"Video information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("media/collections/videos",["facade","collections","media/models/video","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("game/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/videos/"+this.id:"/api/game/videos/"+this.id}}),r}),define("game/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/images/"+this.id:"/api/game/images/"+this.id}}),r}),define("site/models/comment",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("site/collections/comments",["facade","collections","site/models/comment","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("game/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("game/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("text!game/templates/header.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n\r\n	<div class="game-heading">\r\n		<!--div class="sports-h"></div-->\r\n		<div class="game-general">\r\n			<div class="stretch"></div>\r\n			{{#shared.sport}}<span>{{shared.sport}}</span>{{/shared.sport}}\r\n			{{#shared.complevel}}<span>{{shared.complevel}}</span>{{/shared.complevel}}\r\n			{{#shared.season}}<span>{{shared.season}}</span>{{/shared.season}}\r\n\r\n		</div>\r\n        <h3>{{game_day}} {{gameTime}}</h3>\r\n		<a href="javascript: void(0);" class="common-btn common-default-sky-dark pull-right">Edit Game</a>\r\n    </div>\r\n\r\n	{{#game_picture}}\r\n		<div class="header-image-container image-outer-h">\r\n			<div class="image-item-container">\r\n				<img src="{{game_picture.types.standard_thumb.url}}" alt="{{game_name}}" />\r\n			</div>\r\n		</div>\r\n	{{/game_picture}}\r\n\r\n	<ul class="teams-list">\r\n		{{#teams}}\r\n		<li class="team-item">\r\n			<div class=\'score-box {{#isWinner}}win{{/isWinner}}\'>\r\n				<span>{{points_scored}}</span>\r\n			</div>\r\n			<div class="org-info">\r\n				<span class="org-name">\r\n					{{org_sport_link_obj.org.org_name}}\r\n				</span>\r\n				<span class="org-location">\r\n					{{team_location}}\r\n				</span>\r\n			</div>\r\n		</li>\r\n		{{/teams}}\r\n	</ul>\r\n\r\n\r\n</div>\r\n\r\n{{/payload}}\r\n'}),define("game/views/header",["require","text!game/templates/header.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView;return n=s.extend({id:"main-header",template:t,initialize:function(e){s.prototype.initialize.call(this,e)}}),n}),define("text!media/templates/add-media.html",[],function(){return'\r\nAdd \r\n{{#links}}\r\n<a href="{{link}}" title="{{label}}" id="{{id}}">{{label}}</a>\r\n{{/links}}\r\n'}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("game/views/add-media",["require","text!media/templates/add-media.html","game/models/addmedia","facade","views","sportorg/models/team"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("sportorg/models/team"),u=r._;return GameAddMediaView=s.extend({id:"add-media",template:t,events:{"click #addPhoto":"openAddImagePopup"},game_model:{},initialize:function(e){s.prototype.initialize.call(this,e)},setOptions:function(e){if(!this.model)throw new Error("AddMediaView expects option with model property.")},childViews:{},render:function(e,t,n){s.prototype.render.call(this,e,t,n)},openAddImagePopup:function(e){var t=new o({id:this.game_model.attributes.payload.teams[0].id});t.fetch();var n=this;$.when(t.request).done(function(){var e="/api/game/addimage/"+n.game_model.attributes.id,r={sports_id:t.attributes.payload.org_sport_link_obj.sports_id};routing.trigger("add-image",e,r)})}}),GameAddMediaView}),define("text!site/templates/comment-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid" data-id="bbbbbbbb">\r\n    <div class="user-photo">\r\n    	<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n    </div>\r\n    \r\n    <div>\r\n	    <div class="bubble">  \r\n		<div class="pointer"></div>\r\n	        <div class="content">\r\n	        	<span class="comment-date">{{poster}} {{comment_date}}</span>\r\n	        	<p class="comment-text">{{comment}}</p>\r\n	        </div>\r\n	    </div>\r\n	</div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("site/views/comment-item",["vendor","views","utils","text!site/templates/comment-item.html"],function(e,t,n,r){var i,s=t.BaseView,o=e.Mustache;return i=s.extend({tagName:"li",className:"comment",initialize:function(e){e.template?this.template=e.template:this.template=r},render:function(){var e=o.to_html(this.template,this.model.toJSON());this.$el.html(e),console.log("--------render------------");var t=this.model.get("payload");console.log("profile payload = ",t);var n=this;if(t)try{var r=t.user.user_picture_obj.types.small_thumb.url;n.$(".user-photo img").attr("src",r)}catch(i){console.log(i)}return this}}),i}),define("text!site/templates/comment-form.html",[],function(){return'<a href="javascript: void(0);" class="add-comment-h">Comment</a>\r\n{{#payload}}\r\n\r\n<form class="add-comment-form-h hide" method="post" action="#">\r\n<div class="row-fluid">\r\n    <div class="field-message submit-result"></div>\r\n    <textarea style="width:85%;-webkit-border-radius: 15px; border-radius: 15px; height: 65px;" id="new-comment" placeholder="{{comment_placeholder}}" ></textarea>\r\n    <br/><input type="button" id="comment-submit" value="Submit"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("site/views/comment-form",["require","text!site/templates/comment-form.html","facade","views","site/models/comment"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("site/models/comment"),o=i.BaseView;return n=o.extend({tagName:"li",template:t,events:{"click #comment-submit":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");!this.model},render:function(){console.log("RENDER CALLED!!!!"),o.prototype.render.call(this),this.input=this.$("#new-comment");var e=this.model.get("payload");console.log("return payloady",e);var t=this;if(e)var n=e.user_picture,r=e.email;return this},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();t!=""&&this.input.val("")}}),n}),define("text!site/templates/comment-list.html",[],function(){return'<div class="comment-outer-h">\r\n<ul id="comment-list"></ul>\r\n</div>\r\n<div class="clear">\r\n	<a href="javascript: void(0);" class="see-more-h">See More</a>\r\n</div>'}),define("site/views/comment-list",["facade","views","utils","site/views/comment-item","site/views/comment-form","text!site/templates/comment-list.html"],function(e,t,n,r,i,s){var o,u,a=n.lib.Channel,f=require("vendor"),l=t.CollectionView,c=t.SectionView,h=f.Mustache;return u=l.extend(c.prototype),o=u.extend({__super__:l.prototype,listView:"#comment-list",_tagName:"li",_className:"comment",page:1,page_limit:5,prepend:!1,_view:r,template:s,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=h.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate();var t=this;this.collection=e.collection,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.seeMore(),l.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");_.bindAll(this),this.addSubscribers(),this.setupFormView(),console.log(this.collection.toJSON())},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupFormView:function(){function r(n){t.model=n,t.render(),$(e.listView).prepend(t.el)}var e=this,t=new i({collection:this.collection}),n=this.addChildView(t);console.log("Form:",t),this.childViews.form=t,this.callbacks.add(function(){n()}),a("commentform:fetch").subscribe(r)}}),o}),define("profile/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("profile/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){console.error(e),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:"#comment_div",template:t,events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},showCommentBox:function(e){var t=this.$el.find(".add-comment-form-h");t.hasClass("hide")?($(e.target).html("Hide"),t.removeClass("hide")):($(e.target).html("Comment"),t.addClass("hide"))},refreshComments:function(e){this.$("#new-comment").val("")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.on("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("game/views/commenton-list",["facade","utils","site/views/comment-list","profile/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({name:"games comments on view",initialize:function(e){o.bindAll(this),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){alert("refresh"),s(e)})}}),s}),define("text!sportorg/templates/teamroster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n        <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n        {{name}} \'{{grad_year}}<br/>\r\n        {{sport_name}}<br/>\r\n        {{position}}<br/>\r\n        {{team_name}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/teamroster-item",["vendor","views","utils","text!sportorg/templates/teamroster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"teamroster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/teamroster-list",["facade","views","utils","sportorg/views/teamroster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"teamroster-list",name:"Team Roster List",tagName:"ul",_tagName:"li",_className:"teamroster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("TeamRosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!media/templates/video-item.html",[],function(){return'<input type="hidden" class="id" value="{{id}}"/>\r\n{{#payload}}    \r\n    <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n<div class="row-fluid" style="display:none;">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        {{video_title}}<br/>\r\n        Teams: \r\n        {{#teams}}\r\n            {{.}}&nbsp;\r\n        {{/teams}}\r\n        <br/>\r\n        Games: \r\n        {{#games}}\r\n            {{.}}&nbsp; \r\n        {{/games}}\r\n        <br/>\r\n        Posted by {{user_name}}, {{post_date}}<br/>\r\n        {{num_votes}} Votes, {{num_views}} Views, {{num_comments}} Comments<br/>\r\n        <p>{{video_desc}}</p>\r\n        {{#tags_count}}\r\n            {{tags_count}} Tagged<br/>\r\n            {{#tags}}\r\n                <img src="{{base_url}}{{.}}"/>\r\n            {{/tags}}\r\n        {{/tags_count}}\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-item",["vendor","views","utils","text!media/templates/video-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"video",events:{click:"changeVideo"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeVideo:function(){Channel("changevideo"+this.model.collection.id).publish(this.model)}}),i}),define("text!media/templates/video-player.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{video_src}}" alt="{{video_title}}"/></div>\r\n    <h3>{{video_title}}</h3>\r\n    {{#games}} \r\n        {{team1_name}} vs {{team2_name}}\r\n    {{/games}}    \r\n    Votes: {{num_votes}}, Views: {{num_views}}, Comments: {{num_comments}}<br/>\r\n    <br>\r\n\r\n		{{#video_type}}\r\n				{{video_type_name}}\r\n				{{meta_details.url}}\r\n				<br>\r\n		{{/video_type}}\r\n    <div class="social-links">\r\n    {{#social_links}}\r\n        <a class="{{class}}" href="{{link}}" title="{{title}}">{{title}}</a>\r\n    {{/social_links}}\r\n    </div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-player",["require","text!media/templates/video-player.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"video-player",template:t,setOptions:function(e){if(!this.model)throw new Error("VideoPlayerView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-video.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Video Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addvideo" value="Add Video"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-video",["require","text!media/templates/add-video.html","facade","views","media/models/video"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/video"),o=i.BaseView,u=r._;return n=o.extend({tagName:"li",template:t,events:{"click #addvideo":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddVideoView expected options.collection.");this.model||(this.model=new s({id:this.collection.id}),this.model.fetch())},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){alert("AddVideoView"),e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.video_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("media/views/video-list",["facade","views","utils","media/views/video-item","media/views/video-player","media/views/add-video"],function(e,t,n,r,i,s){var o,u,a=e.$,f=e._,l=n.lib.Channel,c=t.CollectionView,h=t.SectionView;return u=c.extend(h.prototype),o=u.extend({__super__:c.prototype,id:"video-list",name:"Video List",tagName:"ul",_tagName:"li",_className:"video",_view:r,initialize:function(e){c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("VideoListView expected options.collection.");f.bindAll(this),this.addSubscribers(),this.setupPlayerView(),this.setupAddView()},childViews:{},setupAddView:function(){function r(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addvideo:fetch").subscribe(r)},setupPlayerView:function(){function r(e){t.model=e,t.render()}if(this.collection.size()==0)return;var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.player=t,this.callbacks.add(function(){n(),t.render(),e.$el.prepend(t.el)}),l("changevideo"+this.collection.id).subscribe(r)}}),o}),define("game/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/addvideo/"+this.id:"/api/game/addvideo?game_id="+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gameaddvideo:fetch").publish(e)}}),r}),define("game/views/add-video",["require","game/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/video-list",["facade","utils","media/views/video-list","game/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gameaddvideo:fetch").subscribe(i)}}),i}),define("profile/views/image-video-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",name:"Image List",setupAddView:function(){}}),r}),define("game/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({defaults:{payload:{}},url:function(){return testpath?testpath+"/game/commentform/"+this.id:"/api/game/commentform/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gamecommentform:fetch").publish(e)}}),r}),define("game/views/comment-form",["require","game/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameCommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/comment-list",["facade","utils","site/views/comment-list","game/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gamecommentform:fetch").subscribe(i)}}),i}),define("text!roster/templates/roster.html",[],function(){return'<div class="green-left-heading heading-h"></div>\r\n<div  class="clearfix clear roster-images-h"></div>'}),define("roster/models/roster",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({}),n}),define("roster/collections/roster",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("roster/views/image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",setupAddView:function(){}}),r}),define("packages/roster/views/roster",["require","text!roster/templates/roster.html","views","vendor","facade","utils","jqueryui","controller","roster/models/roster","roster/collections/roster","roster/views/image-list"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("roster/models/roster"),d=e("roster/views/image-list"),v=e("roster/collections/roster");return n=o.extend({template:t,events:{},initialize:function(e){var t=this;o.prototype.initialize.call(this,e),t.team_id=e.team_id,t.team_name=e.team_name,t.viewName=e.viewName||"Image List"+Math.random(),a.bindAll(this),t.team_id&&(t.collection1=new v,t.collection1.id=t.team_id,t.collection1.fetch(),u.when(t.collection1.request).done(function(){t.setupTeamRosterListView()}))},setupTeamRosterListView:function(){var e;e=new d({collection:this.collection1,name:this.viewName,model:new p}),this.$el.find(".roster-images-h").html(e.$el)},render:function(e,t,n){o.prototype.render.call(this,e,t,n),this.$el.find(".heading-h").html(this.team_name)}}),n}),define("game",["require","text!game/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","game/models/basics","game/models/addmedia","game/collections/teamrosters","game/collections/videos","game/collections/images","game/collections/comments","game/collections/commentson","game/views/header","game/views/add-media","game/views/commenton-list","sportorg/views/teamroster-list","game/views/video-list","profile/views/image-video-list","game/views/comment-list","game/views/commenton-list","packages/roster/views/roster"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("game/models/basics"),l=e("game/models/addmedia"),c=e("game/collections/teamrosters"),h=e("game/collections/videos"),p=e("game/collections/images"),d=e("game/collections/comments"),v=e("game/collections/commentson"),m=e("game/views/header"),g=e("game/views/add-media"),y=e("sportorg/views/teamroster-list"),b=e("game/views/video-list"),w=e("profile/views/image-video-list"),E=e("game/views/comment-list"),S=e("game/views/commenton-list"),x=e("media/models/image"),T=e("packages/roster/views/roster"),N=u.LayoutView,C=i.$,k=i._,L=a.debug,A=a.lib.Channel,O=["/pages/game/game.css"];return r=s.extend({initialize:function(e){return A("load:css").publish(O),k.bindAll(this),this.handleOptions(e),this.init(),this},handleOptions:function(e){this.id=e.gameId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds()},createData:function(){this.basics=new f({id:this.id}),this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id},handleDeferreds:function(){var e=this;C.when(this.basics.request).done(function(){e.setupHeaderView(),e.initVoteView(),e.setupAddMediaView();var t=e.basics.get("payload"),n=t.enttypes_id;e.images=new p,e.images.id=e.id,e.images.fetch();var r=t.teams,i=r?r.length:0;for(var s=0;s<i;s++)e.setupRosterView(r[s].id,r[s].org_sport_link_obj.org.name);e.commentson=new v,e.commentson.subject_entity_type=n,e.commentson.id=e.id,e.commentson.fetch(),C.when(e.commentson.request).done(function(){e.setupCommentsOnListView()}),C.when(e.images.request).done(function(){e.setupImageListView()})})},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupRosterView:function(e,t){var n;n=new T({model:this.images,team_id:e,team_name:t,name:"roster images"+Math.random(),destination:"#roster-wrap"}),this.scheme.push(n),this.layout.render()},setupHeaderView:function(){var e;e=new m({model:this.basics,name:"Header",destination:"#main-header"}),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(){var e;e=new g({model:this.addmedia,name:"Add Media",destination:"#add-media"}),e.game_model=this.basics,this.scheme.push(e),this.layout.render()},setupTeamRosterListView:function(){var e;e=new w({collection:this.teamrosters,name:"roster images",destination:"#roster-wrap"}),this.scheme.push(e),this.layout.render()},setupTeamRosterSecondListView:function(){var e;e=new w({collection:this.teamrostersSecond,name:"roster roster second images",destination:"#roster-second-wrap"}),this.scheme.push(e),this.layout.render()},setupVideoListView:function(){var e;e=new b({collection:this.videos,destination:"#video-wrap"}),this.scheme.push(e),this.layout.render()},setupImageListView:function(){var e;e=new w({collection:this.images,name:"image list",destination:"#image-wrap"}),this.imageListView=e,A("image-upload-success").subscribe(this.updateImages),this.scheme.push(e),this.layout.render()},updateImages:function(e){var t=new x;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t)},setupCommentListView:function(){},setupCommentsOnListView:function(){var e;e=new S({collection:this.commentson,destination:".commentson-outer-box-h",name:"games comment on view"}),this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return e=new N({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r}),define("text!team/templates/layout.html",[],function(){return'<div class="template-container team-template-outer">\r\n<div id="main-header"></div>\r\n\r\n<div id="menu-container"></div>\r\n\r\n<div class="green-left-heading">MESSAGE BOARD</div>\r\n<div  class="clearfix clear commentson-outer-box-h profile-comment-list-box"></div>\r\n<div id="comment_div" class="clearfix"></div>\r\n\r\n\r\n<div class="green-left-heading">PHOTO/VIDEO</div>\r\n	<div class="row-fluid" id="main-content">\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<div id="add-media" class="clearfix">add media</div>\r\n	</div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="green-left-heading">GAMES</div>\r\n	<div id="games_div" class="clearfix">\r\n	</div>\r\n	\r\n	<div class="green-left-heading">FANS</div>\r\n	<div id="fans-div" class="clearfix clear">&nbsp;</div>\r\n\r\n\r\n\r\n<div id="votes-area-h"></div>\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        Upcoming<br/>\r\n        <div id="upcoming-schedule" class="clearfix">\r\n        </div>\r\n        \r\n        Recent<br/>\r\n        <div id="recent-schedule" class="clearfix">        \r\n        </div>\r\n        \r\n        <a href="#">Missing a Game?</a>\r\n        \r\n        <div id="competitor-teams" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n    	\r\n    	\r\n    	\r\n        Roster\r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Videos\r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Photos\r\n        <div id="image-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        FanBoard\r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>\r\n'}),define("team/models/basics",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/team/basics/"+this.id:"/api/team/basics/"+this.id}}),n}),define("team/models/addmedia",["models/base"],function(e){var t;return t=e.extend({id:undefined,defaults:{links:[{label:"Photo",link:"javascript: void(0);",id:"addPhoto"},{label:"Video",link:"javascript: void(0);",id:"addVideo"},{label:"Game",link:"javascript: void(0);",id:"addGame"}]}}),t}),define("sportorg/collections/games",["facade","collections","sportorg/models/game","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){}}),s}),define("team/collections/upcoming_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/upcoming_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/upcoming_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/recent_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/recent_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/recent_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("sportorg/collections/teams",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}}),i}),define("team/collections/competitor_teams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/competitor_teams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/competitor_teams/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("sportorg/models/roster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,user_picture:null,grad_year:0,sport_name:null,position:null,num_votes:0,num_followers:0},desc:"Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/rosters",["facade","collections","sportorg/models/roster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/rosters",["facade","sportorg/collections/rosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/rosters/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/rosters/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/videos/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/videos/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/media/"+this.team_id+"/"+this.sport_id:"/api/team/media/"+this.team_id+"?sport_id="+this.sport_id}}),r}),define("team/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("profile/collections/commentsof",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/commentsof/"+this.id:"/api/user/commentsof/"+this.id}}),r}),define("team/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id:"/api/team/comments/"+this.id}}),r}),define("sportorg/models/org",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/orgs",["facade","collections","sportorg/models/org","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i],u=o.teams,a=[];for(var f in u){var l=u[f];a.push(l)}o.teams=a,s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),i}),define("team/collections/orgs",["facade","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/games/"+this.id:"/api/team/games/"+this.id}}),r}),define("team/collections/fans",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/followers/"+this.id+"/"+this.sport_id:"/api/team/followers/"+this.id+"?sport_id="+this.sport_id}}),r}),define("text!team/templates/header.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n	\r\n	<div class="profile-heading">\r\n            <h3 class="username">{{org_sport_link_obj.org.org_name	}}</h3>\r\n            <h4>{{org_sport_link_obj.sport.sport_name}} | {{complevels_obj.complevel_name}} | {{seasons_obj.season_name}} \'{{year}}</h4>\r\n            <a href="javascript: void(0);" title="Edit Team">Edit Team</a>\r\n    </div>\r\n	\r\n    <!--div class="span4 textcenter">\r\n        {{#picture}}\r\n        <img src="{{picture}}" alt="{{name}}" />\r\n        {{/picture}}\r\n    </div>\r\n    <div class="span8">\r\n        <div>\r\n            <h3 class="teamname">{{name}}</h3>\r\n            <div class="teamloaction">{{location}}</div>\r\n            <div class="votes">Votes: {{num_votes}}</div>\r\n            <div class="followers">Followers: {{num_followers}}</div>\r\n        </div>\r\n        <div id="sports-info"></div>\r\n    </div-->\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/sport-select.html",[],function(){return'<select name="sport" id="select-sport">\r\n{{#payload}}\r\n    <option value="{{sport_id}}">{{sport_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("team/collections/sports",["facade","sportorg/collections/sports","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/sports/"+this.id:"/api/org/sports/"+this.id}}),r}),define("text!team/templates/sport-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="sport-info sport-info-{{sport_id}}" style="display:none">\r\n    <div class="complevels"></div>     \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/complevel-select.html",[],function(){return'<select name="complevel" class="select-complevel">\r\n{{#payload}}\r\n    <option value="{{complevel_id}}">{{complevel_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/complevel",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel information",exec_data:{exec_time:0,exec_error:!1}}),fetchSuccess:function(e,t){}}),n}),define("sportorg/collections/complevels",["facade","collections","sportorg/models/complevel","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload||[];for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/complevels",["facade","sportorg/collections/complevels","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/complevels/"+this.id+"/"+this.sport_id:"/api/org/complevels/"+this.id+"?sports_id="+this.sport_id}}),r}),define("text!team/templates/complevel-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="complevel-info complevel-info-{{sport_id}}-{{complevel_id}}" style="display:none">\r\n    <div class="seasons"></div>     \r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/seasonteam-select.html",[],function(){return'<select name="season" id="select-season">\r\n{{#payload}}\r\n    <option value="{{seasons_id}}">{{team_name}}</option>\r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/season",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,season_name:null},desc:"Season information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/seasons",["facade","collections","sportorg/models/season","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/seasons",["facade","sportorg/collections/seasons","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasons/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasons/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("team/collections/seasonteams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasonteams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasonteams/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("text!team/templates/season-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="season-info season-info-{{sport_id}}-{{complevel_id}}-{{season_id}}" style="display:none">\r\n    \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("team/views/season-item",["vendor","views","utils","text!team/templates/season-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=n.lib.Channel,i=o.extend({tagName:"li",className:"complevel",initialize:function(e){function o(){a("refresh-teampage").publish(n,i,s)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.collection.sport_id,i=this.model.collection.complevel_id,s=this.model.get("payload").season_id;a("teamseasons:select"+n+"-"+i+"-"+s).subscribe(o)},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}});return i}),define("team/views/season-list",["facade","views","utils","team/views/season-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"season-list",name:"Season List",tagName:"ul",_tagName:"li",_className:"season",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SeasonListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/complevel-item",["vendor","views","utils","text!team/templates/complevel-item.html","text!team/templates/seasonteam-select.html","team/collections/seasons","team/collections/seasonteams","team/views/season-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/season-list"),h=require("team/collections/seasons");return SeasonTeamList=require("team/collections/seasonteams"),o=a.extend({tagName:"li",className:"complevel",rendered:!1,events:{"change #select-season":"selectSeason"},initialize:function(e){function n(){if(t.rendered){t.selectSeason();return}t.rendered=!0,t.initList()}this.template=r,this.selectSeasonTemplate=s;var t=this;this.id=e.model.collection.id;var i=this.model.collection.sport_id;l("teamcomplevels:select"+i+"-"+this.model.get("payload").complevel_id).subscribe(n)},initList:function(){var e=this;this.seasons=new SeasonTeamList,this.seasons.id=this.id,this.seasons.sport_id=this.model.collection.sport_id,this.seasons.complevel_id=this.model.get("payload").complevel_id,this.seasons.fetch();var t=this.seasons.sport_id,n=this.seasons.complevel_id;u.when(this.seasons.request).done(function(){e.setupSeasonListView(t,n),l("teamseasons"+t+"-"+n+":fetch").publish(),e.select_season=e.$("#select-season"),e.selectSeason()})},setupSeasonListView:function(e,t){function s(){r.render(),n.$el.find(".seasons").html(r.el);var e={payload:[]},t=r.collection;if(t.length){for(i=0;i<t.length;i++)e.payload[i]=t.at(i).get("payload");var s=f.to_html(n.selectSeasonTemplate,e);n.$el.find(".seasons").prepend(s)}else n.$el.find(".seasons").html("")}var n=this,r=new c({collection:this.seasons});l("teamseasons"+e+"-"+t+":fetch").subscribe(s)},render:function(){var e=this.model.collection.sport_id,t=this.model.get("payload");t.sport_id=e,this.model.set("payload",t);var n=f.to_html(this.template,this.model.toJSON());return this.$el.html(n),this},selectSeason:function(){var e=this.select_season.val(),t=this.model.collection.sport_id,n=this.model.get("payload").complevel_id;this.$(".season-info").stop().slideUp(),this.$(".season-info-"+t+"-"+n+"-"+e).stop().slideDown(),l("teamseasons:select"+t+"-"+n+"-"+e).publish()}}),o}),define("team/views/complevel-list",["facade","views","utils","team/views/complevel-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return TeamComplevelListAbstract=f.extend(l.prototype),i=TeamComplevelListAbstract.extend({__super__:f.prototype,id:"complevel-list",name:"Complevel List",tagName:"ul",_tagName:"li",_className:"complevel",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ComplevelListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/sport-item",["vendor","views","utils","text!team/templates/sport-item.html","text!team/templates/complevel-select.html","team/collections/complevels","team/views/complevel-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/complevel-list"),h=require("team/collections/complevels");return o=a.extend({tagName:"li",className:"sport",rendered:!1,events:{"change #select-complevel":"selectComplevel"},initialize:function(e){function n(){if(t.rendered){t.selectComplevel();return}t.rendered=!0,t.initList()}this.template=r,this.selectComplevelTemplate=s;var t=this;this.id=e.model.collection.id,l("teamsports:select"+this.model.get("payload").sport_id).subscribe(n)},initList:function(){var e=this;this.complevels=new h,this.complevels.id=this.id,this.complevels.sport_id=this.model.get("payload").sport_id,this.complevels.fetch();var t=this.complevels.sport_id;u.when(this.complevels.request).done(function(){e.setupComplevelListView(t),l("teamcomplevels"+t+":fetch").publish(),e.select_complevel=e.$("#select-complevel"),e.selectComplevel()})},setupComplevelListView:function(e){function r(){n.render(),t.$el.find(".complevels").html(n.el);var e={payload:[]},r=n.collection;if(r.length){for(i=0;i<r.length;i++)e.payload[i]=r.at(i).get("payload");var s=f.to_html(t.selectComplevelTemplate,e);t.$el.find(".complevels").prepend(s)}else t.$el.find(".complevels").html("")}var t=this,n=new c({collection:this.complevels});l("teamcomplevels"+e+":fetch").subscribe(r)},render:function(){var e=f.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},selectComplevel:function(){var e=this.select_complevel.val(),t=this.model.get("payload").sport_id;this.$(".complevel-info").stop().slideUp(),this.$(".complevel-info-"+t+"-"+e).stop().slideDown(),l("teamcomplevels:select"+t+"-"+e).publish()}}),o}),define("team/views/sport-list",["facade","views","utils","team/views/sport-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/header",["require","text!team/templates/header.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","team/collections/complevels"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("team/models/basics"),a=o.SectionView,f=e("team/views/sport-list"),l=e("team/collections/sports"),c=e("usercontrol/dropdown/view/dropdown"),h=e("team/collections/seasonteams"),p=e("team/collections/complevels"),d=e("utils"),v=d.lib.Channel,m=e("vendor"),g=m.Mustache,y=s.$,b=s._;return r=a.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){console.error(e),a.prototype.initialize.call(this,e)},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){var t=this;t.model.id!=e&&(t.model.id=e,t.model.fetch(),y.when(t.model.request).done(function(){t.render()}))},showAllTeamData:function(){routing.trigger("refresh-teampage",y("#sports-h").val(),y("#team-h").val(),this.season.id)},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=g.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),v("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){a.prototype.render.call(this,e,t,n)}}),r}),define("profile/models/addmedia",["models/base"],function(e){var t;return t=e.extend({defaults:{links:[{label:"Photo",link:"javascript:void(0);",id:"addPhoto"},{label:"Video",link:"javascript:void(0);",id:"addVideo"},{label:"Game",link:"javascript: void(0);",id:"addGame"}],userid:null}}),t}),define("team/views/add-media",["require","text!media/templates/add-media.html","profile/models/addmedia","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=r._;return n=s.extend({template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","click #addGame":"openAddGamePopup"},setOptions:function(e){if(!this.model)throw new Error("ProfileAddMediaView expects option with model property.");this.model.userid=e.userid},openAddGamePopup:function(){routing.trigger("add-game",this.model.userid)},openAddImagePopup:function(e){var t=$("#sports-h").val(),n=$("#team-h").val(),r="/api/team/addimage/"+n,r="/api/team/addimage/"+n,i={sports_id:t};routing.trigger("add-image",r,i)},openAddvideoPopup:function(e){var t="/api/user/addvideo/"+this.model.id;Channel("add-video").publish(t)}}),n}),define("text!sportorg/templates/schedule-item.html",[],function(){return"\r\n{{#payload}}\r\n    {{game_day}} {{game_time}}\r\n    {{#teams}}\r\n        {{team_name}} {{is_winner}} \r\n        {{#points_scored}}\r\n            {{points_scored}}- {{points_against}}\r\n        {{/points_scored}}\r\n    {{/teams}}\r\n{{/payload}}"}),define("sportorg/views/schedule-item",["vendor","views","utils","text!sportorg/templates/schedule-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"schedule",initialize:function(e){this.template=r},render:function(){console.log("SCHEDULE ITEM MODEL",this.model.toJSON());var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/schedule-list",["facade","views","utils","sportorg/views/schedule-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"schedule-list",name:"Schedule List",tagName:"ul",_tagName:"li",_className:"schedule",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ScheduleListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!sportorg/templates/competitorteam-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n    <img src="{{picture}}" alt="{{name}}"/><br/>\r\n    {{sport}}<br/>\r\n    {{complevel}}<br/>\r\n    {{season}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/competitorteam-item",["vendor","views","utils","text!sportorg/templates/competitorteam-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"team",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/competitorteam-list",["facade","views","utils","sportorg/views/competitorteam-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"team-list",name:"Team List",tagName:"ul",_tagName:"li",_className:"team",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CompetitorTeamListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/commentof-list",["facade","utils","site/views/comment-list"],function(e,t,n){var r;return r=n.extend({name:"team Commentof List",setupFormView:function(){}}),r}),define("team/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){console.error(e),this.$el.unbind(),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:"#comment_div",template:t,name:"Comment Form",events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},showCommentBox:function(){var e=this.$el.find(".add-comment-form-h");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")},refreshComments:function(e){this.$("#new-comment").val("")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.trigger("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("team/views/commenton-list",["facade","utils","site/views/comment-list","team/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),e.name&&(this.name=e.name),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){s(e)})}}),s}),define("text!sportorg/templates/roster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n    {{name}} \'{{grad_year}}<br/>\r\n    {{sport_name}}<br/>\r\n    {{position}}<br/>\r\n    {{team_name}}<br/>\r\n    {{num_votes}} Votes<br/>\r\n    {{num_followers}} Followers<br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/roster-item",["vendor","views","utils","text!sportorg/templates/roster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"roster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/roster-list",["facade","views","utils","sportorg/views/roster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"roster-list",name:"Roster List",tagName:"ul",_tagName:"li",_className:"roster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("RosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addvideo/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addvideo?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddvideo:fetch").publish(e)}}),r}),define("team/views/add-video",["require","team/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("TeamAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/video-list",["facade","utils","media/views/video-list","team/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("teamaddvideo:fetch").subscribe(i)}}),i}),define("team/models/addimage",["facade","media/models/image","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addimage/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addimage?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddimage:fetch").publish(e)}}),r}),define("team/views/add-image",["require","team/models/addimage","media/views/add-image"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/image-list",["facade","utils","media/views/image-list","team/views/add-image"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("teamaddimage:fetch").subscribe(i)}}),i}),define("team/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?id1="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamcommentform:fetch").publish(e)}}),r}),define("team/views/comment-form",["require","team/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/comment-list",["facade","utils","site/views/comment-list","team/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),s("teamcommentform:fetch").subscribe(i)}}),i}),define("text!team/templates/menu.html",[],function(){return'<div id="sports-info">\r\n	<div class="sports-h drop-down-main-outer"></div>\r\n	<div class="season-h drop-down-main-outer"></div>\r\n	<div class="team-h drop-down-main-outer"></div>\r\n</div>\r\n'}),define("team/views/menu",["require","text!team/templates/menu.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","team/collections/complevels"],function(e,t,n){var r=e("facade"),s=e("views"),o=e("team/models/basics"),u=s.SectionView,a=e("team/views/sport-list"),f=e("team/collections/sports"),l=e("usercontrol/dropdown/view/dropdown"),c=e("team/collections/seasonteams"),h=e("team/collections/complevels"),p=e("utils"),d=p.lib.Channel,v=e("vendor"),m=v.Mustache,g=r.$,y=r._;return u.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){this.headerView=e.headerView,u.prototype.initialize.call(this,e),this.initSportList()},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){this.model.id!=e&&this.headerView.updateHeaderData(e)},getTeam:function(){var e=this;this.season=new c,this.season.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.season.sport_id=g("#sports-h").val(),this.season.complevel_id=g("#season-h").val(),this.season.fetch(),g.when(this.season.request).done(function(){var t={};t.records=e.season.toJSON(),t.recordId="id",t.recordValue="team_name";var n=new l({data:t,title:"Team",elementId:"team-h",destination:".team-h",targetView:e,callback:function(t){e.updateHeaderData(g("#team-h").val()),e.showAllTeamData()}})})},showAllTeamData:function(){routing.trigger("refresh-teampage",g("#sports-h").val(),g("#team-h").val(),this.season.id)},getComplevels:function(){var e=this;this.complevel=new h,this.complevel.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.complevel.sport_id=g("#sports-h").val(),this.complevel.fetch(),g.when(this.complevel.request).done(function(){var t={};t.records=e.complevel.toJSON(),t.recordId="complevel_id",t.recordValue="complevel_name";var n=new l({data:t,title:"Season",elementId:"season-h",destination:".season-h",selectedValue:e.model.get("payload").complevels_obj.complevel_profiles_id,targetView:e,callback:function(t){console.error("comp level call"),e.getTeam()}})})},initSportList:function(){console.error(this.model.toJSON());var e=this;this.sports=new f,this.sports.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.sports.fetch(),g.when(this.sports.request).done(function(){var t={};t.records=e.sports.toJSON(),t.recordId="sport_id",t.recordValue="sport_name";var n=new l({data:t,elementId:"sports-h",title:"Sport",selectedValue:e.model.get("payload").org_sport_link_obj.sports_id,destination:".sports-h",targetView:e,callback:function(t){e.getComplevels()}})})},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=m.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new a({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),d("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){u.prototype.render.call(this,e,t,n)}})}),define("text!sportorg/templates/team-item.html",[],function(){return'\r\n	<a href="/#game/{{id}}" class="background-blue team-info-h" tooltip="test">\r\n	<div class="game-info hide">\r\n		{{summary}}\r\n	</div> </a>\r\n'}),define("sportorg/views/team-item",["vendor","views","utils","text!sportorg/templates/team-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"team",events:{"mouseover .team-info-h":"showinfo","mouseout .team-info-h":"showinfo"},showinfo:function(e){e.preventDefault(),s(e.target).parents(".game-info").length||(s(e.target).find(".game-info").hasClass("hide")?s(e.target).find(".game-info").removeClass("hide"):s(".game-info").addClass("hide"))},initialize:function(e){this.teams_id=e.teams_id||null,console.log("Teams_id:",e),this.mpay=this.model.get("payload"),console.log("Team Item View",this.mpay),this.template=r},render:function(){var e=this.createOpponentString(),t=u.to_html(this.template,{id:this.mpay.id,summary:e});return this.$el.html(t),this},createOpponentString:function(){var e=this.mpay.game_day+" | ";return console.log("Game info",this.mpay),s.each(this.mpay.teams,function(){this.id>0&&this.id!=this.teams_id&&(e+=" VS. "+this.org_name)}),e}}),i}),define("text!sportorg/templates/team-list.html",[],function(){return'{{#data}}\r\n<div class="select-team">\r\n	<div class="game-box-outer">\r\n		<ul class="team-list-h">\r\n			\r\n		</ul>\r\n	</div>\r\n</div>\r\n</div>\r\n{{/data}}\r\n{{^data}}\r\n<div class="info">	\r\n	No games on the docket.  <a href="#addgame" title="add game">Click here to Add Game.</a>\r\n</div>\r\n{{/data}}\r\n'}),define("sportorg/views/team-list",["vendor","facade","views","utils","sportorg/views/team-item","text!sportorg/templates/team-list.html"],function(e,t,n,r,i,s){var o,u,a=t.$,f=t._,l=r.lib.Channel,c=n.CollectionView,h=e.Mustache;return SectionView=n.SectionView,u=c.extend(SectionView.prototype),o=u.extend({__super__:c.prototype,name:"Team List",_tagName:"li",_className:"team",template:s,_view:i,listView:".team-list-h",initialize:function(e){this.renderTemplate(),c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("TeamListView expected options.collection.");f.bindAll(this),this.addSubscribers()},renderTemplate:function(){var e={};e.data=this.collection.toJSON(),console.log("Schedule Data",e.data);var t=h.to_html(this.template,e);return this.$el.html(t),this}}),o}),define("profile/views/fans-image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",name:"fans List",setupAddView:function(){}}),r}),define("team",["require","text!team/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","team/models/basics","team/models/addmedia","team/collections/upcoming_schedules","team/collections/recent_schedules","team/collections/competitor_teams","team/collections/rosters","team/collections/videos","team/collections/images","team/collections/comments","profile/collections/commentsof","team/collections/commentson","team/collections/orgs","team/collections/fans","team/views/header","team/views/add-media","sportorg/views/schedule-list","sportorg/views/competitorteam-list","team/views/commentof-list","team/views/commenton-list","sportorg/views/roster-list","team/views/video-list","team/views/image-list","team/views/comment-list","team/views/menu","media/models/image","sportorg/views/team-list","profile/views/fans-image-list"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("team/models/basics"),l=e("team/models/addmedia"),c=e("team/collections/upcoming_schedules"),h=e("team/collections/recent_schedules"),p=e("team/collections/competitor_teams"),d=e("team/collections/orgs"),v=e("team/collections/rosters"),m=e("team/collections/videos"),g=e("team/collections/images"),y=e("team/collections/fans"),b=e("team/collections/comments"),w=e("profile/collections/commentsof"),E=e("team/collections/commentson"),S=e("team/views/header"),x=e("team/views/add-media"),T=e("sportorg/views/team-list"),N=e("sportorg/views/schedule-list"),C=e("sportorg/views/competitorteam-list"),k=e("sportorg/views/roster-list"),L=e("team/views/video-list"),A=e("team/views/image-list"),O=e("team/views/comment-list"),M=e("team/views/commentof-list"),D=e("team/views/commenton-list"),P=e("profile/views/fans-image-list"),H=e("team/views/menu"),B=e("media/models/image");return LayoutView=u.LayoutView,$=i.$,_=i._,debug=a.debug,Channel=a.lib.Channel,cssArr=["/pages/team/team.css"],r=s.extend({initialize:function(e){return Channel("load:css").publish(cssArr),_.bindAll(this),this.handleOptions(e),this.init(),this},handleOptions:function(e){this.id=e.teamId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds()},createData:function(){function t(t,n,r){e.refreshPage(),e.games=new d,e.games.id=n,e.games.sport_id=t,e.games.fetch(),e.images=new g,e.images.team_id=n,e.images.sport_id=t,e.images.fetch(),e.fans=new y,e.fans.id=n,e.fans.sport_id=t,e.fans.fetch();var i=e.basics.get("payload").enttypes_id;e.commentson=new E,e.commentson.subject_entity_type=i,e.commentson.savePath="/team/addcomment/"+n,e.commentson.id=n,e.commentson.fetch(),e.handleDeferredsDynamic()}this.basics=new f({id:this.id}),this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id;var e=this;routing.on("refresh-teampage",function(e,n,r){t(e,n,r)})},handleDeferreds:function(){var e=this;$.when(this.basics.request).done(function(){e.setupHeaderView(),e.initVoteView(),e.setupAddMediaView(),console.log(e.basics)})},setupCommentOfListView:function(){var e;e=new M({collection:this.commentsof,destination:".commentsoff-outer-box-h",name:"team comments off view"})},setupCommentOnListView:function(){this.commentOnListView=new D({collection:this.commentson,destination:".commentson-outer-box-h",name:"team comments on view "}),this.scheme.push(this.commentOnListView),this.layout.render()},refreshPage:function(){var e;this.commentOnListView&&(this.commentOnListView.unbind().remove(),$(this.commentOnListView.destination).unbind().html(""),e=$.inArray(this.commentOnListView,this.scheme),~e&&this.scheme.splice(e,1)),this.gamesView&&($(this.gamesView.destination).html(""),e=$.inArray(this.gamesView,this.scheme),~e&&this.scheme.splice(e,1)),this.fansListView&&($(this.fansListView.destination).html(""),e=$.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1)),this.imageListView&&($(this.imageListView.destination).html(""),e=$.inArray(this.imageListView,this.scheme),~e&&this.scheme.splice(e,1))},handleDeferredsDynamic:function(){var e=this;$.when(e.commentson.request).done(function(){e.setupCommentOnListView()}),$.when(e.games.request).done(function(){e.setupGameView()}),$.when(e.fans.request).done(function(t){e.setupFansListView()}),$.when(this.images.request).done(function(){e.setupImages()})},setupFansListView:function(){this.fansListView=new P({collection:this.fans,destination:"#fans-div",name:"fans View"}),this.scheme.push(this.fansListView),this.layout.render()},setupHeaderView:function(){var e;e=new S({model:this.basics,name:"Header",destination:"#main-header"});var t=new H({model:this.basics,name:"Menu View",headerView:e,destination:"#menu-container"});this.scheme.push(t),this.scheme.push(e),this.layout.render(),this.initVoteView()},setupAddMediaView:function(){var e;console.error("add media model"),console.error(this.addmedia.toJSON()),e=new x({model:this.addmedia,team_id:this.basics.id,name:"Add_Media",destination:"#add-media"}),this.scheme.push(e),this.layout.render()},setupUpcomingSchedules:function(){var e;e=N.extend({name:"Upcoming_Schedule_List"}),this.upcomingScheduleListView=new e({collection:this.upcoming_schedules,destination:"#upcoming-schedule",name:"upcoming_schedule"}),this.scheme.push(this.upcomingScheduleListView),this.layout.render()},setupRecentSchedules:function(){var e;e=N.extend({name:"Recent_Schedule_List"}),this.recentScheduleListView=new e({collection:this.recent_schedules,destination:"#recent-schedule",name:"recent_schedule"}),this.scheme.push(this.recentScheduleListView),this.layout.render()},setupGameView:function(){console.log("Setting up game view",this.games,this.id),this.gamesView=new T({teams_id:this.id,collection:this.games,destination:"#games_div",name:"games view"}),this.scheme.push(this.gamesView),this.layout.render()},setupCompetitorTeams:function(){this.competitorTeamListView=new C({collection:this.competitor_teams,destination:"#competitor-teams",name:"competitor_teams"}),this.scheme.push(this.competitorTeamListView),this.layout.render()},setupRosters:function(){this.rosterListView=new k({collection:this.rosters,destination:"#roster-wrap",name:"roster_wrap"}),this.scheme.push(this.rosterListView),this.layout.render()},setupVideos:function(){this.videoListView=new L({collection:this.videos,destination:"#video-wrap",name:"video_wrap"}),this.scheme.push(this.videoListView),this.layout.render()},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupImages:function(e){var t=this;routing.on("image-upload-success",function(e){t.updateImages(e)}),this.imageListView=new A({collection:this.images,destination:"#image-wrap",name:"image_wrap "}),this.scheme.push(this.imageListView),this.layout.render()},updateImages:function(e){var t=new B;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t)},setupComments:function(){this.commentListView=new O({collection:this.comments,destination:"#comment-wrap",name:"comment_wrap"}),this.scheme.push(this.commentListView),this.layout.render()},setupLayout:function(){var e;return e=new LayoutView({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r}),define("text!profilesetting/templates/layout.html",[],function(){return'<div class="span12 main-container">\r\n	<div id="main-header-prof-setting" class="profile-header"></div>\r\n\r\n	<!-- Basic Info Section Starts-->\r\n	<div class="row-fluid" id="section-basics-prof-setting"></div>\r\n	<!-- Basic Info Section Ends-->\r\n\r\n	<!-- Team Info Section Starts-->\r\n	<div class="row-fluid section-teams-prof-setting">\r\n		<!-- High School Section Starts-->\r\n		<div id="section-school-prof-setting" class="row-fluid sub-section-prof-setting">\r\n\r\n			<div id="content-school-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!-- High School Section Ends-->\r\n\r\n		<!--Club Info Section Starts-->\r\n<div id="section-club-prof-setting" class="row-fluid sub-section-prof-setting">\r\n			\r\n			<div id="content-club-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!--Club Info Section Ends-->\r\n\r\n		<!--Individual Sports Section Starts-->\r\n		<div id="section-individual-prof-setting">\r\n\r\n		</div>\r\n		<!--Individual Sports Section Ends-->\r\n	</div>\r\n	<!-- Team Info Section Ends-->\r\n\r\n	<div id="main-footer-prof-setting">\r\n\r\n	</div>\r\n</div>\r\n'}),define("profilesetting/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("text!profilesetting/templates/basic_info_header.html",[],function(){return'{{#payload}}\r\n<div class="span3 profile-image">\r\n	<img id="img-profile-prof-setting" src="{{user_picture_obj.types.large_thumb.url}}" />\r\n	<a href="javascript:void(0);" id="change_user_pic">Change User Picture</a>\r\n</div>\r\n<div class="span6" id="user_profile_data">\r\n	<h2 id="user_name">{{first_name}} {{last_name}}</h2>\r\n	<p id="user_height">\r\n		{{#height_in}} {{height_in}} INCHES{{/height_in}}\r\n	</p>\r\n	<p id="user_weight">\r\n		{{#weight_lb}}{{weight_lb}} LBS{{/weight_lb}}\r\n	</p>\r\n	<div class="resume_button" id="edit_profile_info">Edit</div>\r\n</div>\r\n{{/payload}}'}),define("text!profilesetting/templates/basic_info_header_edit.html",[],function(){return'{{#payload}}\r\n		<div id="edit_profile_info_section">\r\n			<div><span>First Name: </span><input type="text" id="txt_user_first_name" model-property="firstname" value="{{first_name}}" /></div>\r\n			<div><span>Last Name: </span><input type="text" id="txt_user_last_name" model-property="lastname" value="{{last_name}}" /></div>\r\n			<div><span>Height (in):</span><input type="text" id="txt_user_height" model-property="height_in" value="{{height_in}}" /></div>\r\n			<div><span>Weight (lbs)</span><input type="text" id="txt_user_weight" model-property="weight_lb" value="{{weight_lb}}" /></div>\r\n			<a href="javascript:void(0);" class="resume_button" id="save_user_data">Save</a>\r\n		</div>\r\n{{/payload}}'}),define("text!usercontrols/imagecropper/templates/layout.html",[],function(){return'<iframe id="cropper_iframe"></iframe>'}),define("usercontrols/imagecropper/imagecropper",["require","text!usercontrols/imagecropper/templates/layout.html","facade","controller","models","views"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=r.Backbone,d=e("user/models/basic_info");return n=i.extend({cssArr:["/usercontrols/imagecropper/imagecropper.css"],events:{"click button.close":"alertsomething"},initialize:function(e){console.log("init");var t=this;c("load:css").publish(this.cssArr),f.bindAll(this),console.log(e),this.image_o=e.image_o?e.image_o:"",this.image_e=e.image_e?e.image_e:"",this.modelHTML='<div id="modalPopup" class="modal imagecropper hide fade model-popup-h"><div class="modal-header"><span>Userpic Editor</span><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"></div></div>',this.setupLayout().render(),this.handleDeferreds()},handleDeferreds:function(){},setupLayout:function(){var e=this;this.scheme=[],a(".model-popup-h").remove(),a("body").append(this.modelHTML);var n=new h({scheme:this.scheme,destination:".modal-body",template:t,displayWhen:"ready"});this.layout=n,a("#modalPopup button.close").bind("click",function(){e.notifyUpdate()});var r="/vendor/plugins/iedit2/index.html?vh=500&vw=500&sx=0&sy=0&sz=100&t=Profile%20Picture&edit=";return this.image_e!=""&&(r+="&edit="+this.image_e),this.image_o!=""&&(r+="&o="+this.image_o),a("#modalPopup iframe#cropper_iframe").attr("src",r),a("#modalPopup").modal(),this.layout},notifyUpdate:function(){c("userpic-changed").publish()}}),n}),define("profilesetting/views/basic_info",["require","text!profilesetting/templates/basic_info_header.html","text!profilesetting/templates/basic_info_header_edit.html","profilesetting/models/basic_info","facade","views","utils","vendor","usercontrols/imagecropper/imagecropper"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=e("profilesetting/models/basic_info"),u=s.SectionView,a=e("utils"),f=a.lib.Channel,l=e("vendor"),c=l.Mustache,h=i.$,p=e("usercontrols/imagecropper/imagecropper");return r=u.extend({id:"basic_info",template:t,events:{"click .btn-prof-setting-h":"initialize","click #edit_profile_info":"editProfile","click #change_user_pic":"changeUserpic"},initialize:function(e){this.initBasicView(),e.length>0&&u.prototype.initialize.call(this,e)},initBasicView:function(){var e=this;this.basicInfoModel=new o,this.basicInfoModel.fetch(),h.when(this.basicInfoModel.request).done(function(){e.basicInfoModel.set("id",e.basicInfoModel.get("payload").id),e.setupBasicView()})},setupBasicView:function(){var e=this,t=c.to_html(e.template,this.basicInfoModel.toJSON());console.log(t),h("#section-basics-prof-setting").html(t),h("#change_user_pic").bind("click",function(){e.changeUserpic()}),h("#edit_profile_info").bind("click",function(){e.editProfile()})},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},editProfile:function(){var e=this,t=c.to_html(n,this.basicInfoModel.toJSON());h("div#user_profile_data").html(t),h("#save_user_data").bind("click",function(){e.saveProfileBasics()})},saveProfileBasics:function(){var e=this,t={};h("div#user_profile_data").find("input").each(function(){t[h(this).attr("model-property")]=h(this).val()}),this.basicInfoModel.save(t,{success:function(){e.initBasicView()}})},changeUserpic:function(){var e=this.basicInfoModel.get("payload");console.log(e);var t=this,n=new p({image_o:e.user_picture_obj.pre_crop_url,image_e:e.user_picture_obj.image_path});f("userpic-changed").subscribe(function(){t.initBasicView()})}}),r}),define("text!profilesetting/templates/highschool.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading">High School</span>\r\n</div>\r\n<div><a class="add-school-h" href="javascript: void(0);">Add a New School</a></div>\r\n<div id="btn-Add-School" class="clearfix div-add-dotted">\r\n	+ ADD SCHOOL\r\n</div>\r\n<div id="section-Add-Sports-school" class="displayNone add-org-fields">\r\n	<div>\r\n		<span class="span2">What State?</span>\r\n		<input type="text" id="txt-school-state" placeholder="Just Start Typing" tabindex="0"/>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n\r\n	<div>\r\n		<span class="span2">What School?</span>\r\n		<input type="text" id="txt-school-school" placeholder="Just Start Typing" disabled="disabled" tabindex="0"/>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<div class="div-sports-wrapper displayNone">\r\n		<div id="def-school-sports-section" class="school-sports-section">\r\n\r\n		</div>\r\n		<span class="floatLeft"><a href="javascript:void(0)" class=" well-small btn-add-sports" >Add Sports</a> </span>\r\n	</div>\r\n<!-- <span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary btn-finish-addsports" >Finish</a> </span> -->\r\n</div>\r\n<!--SCHOOL LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail">\r\n\r\n</div>\r\n\r\n<!--lIST-->\r\n'}),define("text!profilesetting/templates/sportslevel.html",[],function(){return'<div class="section-sportslevel">\r\n	<div>\r\n		<span class="span2">Choose Sport</span>\r\n		<!-- class="ddl-school-sports"-->\r\n		<select class="ddl-sports" orgsid="{{orgsId}}" tabindex="0">\r\n			<option value="">Select Sport</option>\r\n			{{#sports}}\r\n			<option value="{{sport_id}}">{{sport_name}}</option>\r\n			{{/sports}}\r\n		</select>\r\n\r\n		<p class="field-error"></p>\r\n\r\n		<p class="field-message"></p>\r\n\r\n		<span><a href="javascript:void(0)" class="btn-Remove-Sport" tabindex="0">Remove</a> </span>\r\n	</div>\r\n\r\n	<div class="clearfix inner-section">\r\n		<div class="sub-section-prof-setting">\r\n			<div>\r\n\r\n				<div class="spn-black-heading spn-sport-name">\r\n				</div>\r\n				<!--class="div-school-sports-level"-->\r\n				<div class="div-sports-level"></div>\r\n\r\n			</div>\r\n			<div class="">\r\n				<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-level" orgsid="{{orgsId}}" tabindex="0">Add Level</a> </span>\r\n				<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/level.html",[],function(){return'<div class="div-levels">\r\n	{{#sport}}\r\n		<div class="org-sport-list-header">\r\n			<div class="sport-name"><img src="{{icon}}" />{{sports_name}}</div>\r\n		</div>\r\n	{{/sport}}\r\n	<div class="well-small span12">\r\n		<!-- class="ddl-school-complevel"-->\r\n		<select class="ddl-complevel" orgsid="{{orgsId}}" sportsid="{{sportsId}}">\r\n			<option value="">Select Level</option>\r\n			{{#levels}}\r\n			<option value="{{complevel_id}}">{{complevel_name}}</option>\r\n			{{/levels}}\r\n		</select>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<!-- id="div-school-seasons"-->\r\n	<div class="div-seasons displayNone">\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow">&uarr;</a>\r\n		</div>\r\n		{{#Data}}\r\n		<div class="season-array">\r\n			<div class="year-label">{{year}}</div>\r\n\r\n			{{#seasons}}\r\n\r\n				<span class="single-season">\r\n					<input type="checkbox" class="chkSeasons chkSeasons-{{season_id}}-{{year}}" seasonId = \'{{season_id}}\' year=\'{{year}}\' orgsid="{{orgsId}}" sportsid="{{sportsId}}"/>\r\n					<label>&nbsp;{{season_name}} </label>\r\n					<a href="javascript:void(0)" class="btnOpenPositions displayNone" disabled="disabled" >Positions</a>\r\n				</span>\r\n\r\n			{{/seasons}}\r\n\r\n		</div>\r\n		{{/Data}}\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow">&darr;</a>\r\n		</div>\r\n\r\n	</div>\r\n	\r\n	<!--	Modal Section to display positions	-->\r\n	<!--modal-school-positions-->\r\n<div class="modal hide fade position-modal modal-positions" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-header">\r\n<button type="button" class="close btn-Close-Positions" data-dismiss="modal" aria-hidden="true">Ã</button>\r\n<h3 id="myModalLabel">Positions</h3>\r\n</div>\r\n<div class="modal-body modal-position-body">\r\n	\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn btn-Close-Positions" data-dismiss="modal" aria-hidden="true">Finish</button>\r\n<!--<button class="btn btn-primary btn-Save-Positions">Finish</button> -->\r\n</div>\r\n</div>\r\n</div>\r\n\r\n'}),define("profilesetting/collections/states",["facade","collections","location/collections/states","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("profilesetting/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+"/api/org/search/"+this.sport_id:"/api/org/search?sports_club="+e.sports_club+"&states_id="+e.states_id+"&org_name="+e.org_name},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profilesetting/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){return testpath?testpath+"/api/sport/listall":(this.gender==undefined,"/api/sport/listall/?sport_type="+this.sport_type+"&male="+this.male+"&female="+this.female+"&sport_type_id="+this.sport_type_id)}}),i}),define("text!profilesetting/templates/teamlist.html",[],function(){return'{{#orgs}}\r\n	<div class="div-sports-wrapper"  orgsId="{{org_id}}">\r\n		<div class="school-sports-section"></div>\r\n	</div>\r\n	<div class="org-sport-list">\r\n		<div class="org-sport-list-header">\r\n			<div class="org-name">{{org_name}}, {{city}}, {{state}}</div>\r\n			<div class="add-sport"><a class="btn-add-sports" href="javascript:void(0)" orgsId="{{org_id}}">Add Sport</a></div>\r\n		</div>\r\n		{{#sports}}\r\n\r\n			<div class="org-sport-list-header">\r\n				<div class="sport-name"><img src="{{icon}}" />{{sports_name}} - <a href="javascript:void(0)" class="edit-team"  orgsId="{{org_id}}" sportId="{{sports_id}}">Edit</a></div>\r\n			</div>\r\n\r\n			<div>\r\n				{{#complevels}}\r\n\r\n					{{#seasons}}\r\n				<div class="season-list">\r\n						<span>{{complevel}}</span>\r\n						<span>{{season}} {{year}}</span>\r\n						<span>\r\n							{{#positions}}<span class="position-listing">{{name}}</span>{{/positions}}\r\n							{{^positions}}No Positions&nbsp;{{/positions}}\r\n						</span>\r\n				</div>\r\n					{{/seasons}}\r\n\r\n				{{/complevels}}\r\n			</div>\r\n\r\n\r\n		{{/sports}}</div>\r\n{{/orgs}}'}),define("profilesetting/collections/teams",["facade","utils","sportorg/collections/teams","sportorg/models/team"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+" /api/user/orgs/"+e.user_id+"?groupby=complevel ":" /api/user/orgs/"+e.user_id+"?groupby=complevel&org_type="+e.org_type},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},data:{user_id:self.user_id,sports_club:self.sports_club}}),i}),define("profilesetting/views/teams",["require","text!profilesetting/templates/teamlist.html","facade","views","utils","vendor","profilesetting/collections/teams"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("profilesetting/collections/teams"),p=o.extend({template:t,controls:{},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){var t=this;t.setOptions(e),t.render()},setOptions:function(e){var t=this;if(!e.user_id&&!e.destination)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.user_id=e.user_id,this.sports_club=e.sports_club,this.el=e.destination,this.org_type=e.org_type},bindEvents:function(){},GetData:function(){var e=this,t={user_id:e.user_id,sports_club:this.sports_club},n=new h(t);n.user_id=e.user_id,n.sports_club=this.sports_club,n.org_type=this.org_type,console.log("Team Request Abort Request Function"),e.teamFetchRequest=e.abortRequest(e.teamFetchRequest);var r=n.fetch();e.teamFetchRequest.push(r),c.when(n.request).done(function(){if(n.isError())return;var t=n.toJSON();if(t.length){var r=[];for(var i=0;i<t.length;i++)r.push(t[i].payload);e.Teams=t;var s=l.to_html(e.template,{orgs:r});c(e.el).html(s)}else c(e.el).html(e.messages.dataNotExist)})},render:function(){var e=this;e.GetData()}});return p}),define("profilesetting/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("text!profilesetting/templates/season-item.html",[],function(){return'<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&uarr;</a>\r\n</div>\r\n{{#Data}}\r\n<div class="span12">\r\n	<span class="span3"><strong>{{year}}</strong></span>\r\n	{{#seasons}}\r\n	<span class="span3">\r\n		<input type="checkbox" class="chkSeasons" year=\'{{year}}\' seasonId = \'{{season_id}}\' />\r\n		<label>&nbsp;{{season_name}} </label>\r\n		<a href="javascript:void(0)" class="btnOpenPositions">Positions</a>\r\n		 </span>\r\n	{{/seasons}}\r\n</div>\r\n{{/Data}}\r\n<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&darr;</a>\r\n</div>'}),define("profilesetting/views/seasons",["require","text!profilesetting/templates/season-item.html","facade","views","utils","vendor","profilesetting/models/complevel"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,r=o.extend({template:t,events:{},controls:{chkSeasons:".chkSeasons"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property."},properties:{show_prev_year:2},initialize:function(e){n=this,n.setOptions(e),n.render()},setOptions:function(e){if(!e.orgs_id||!e.user_id||!e.sport_id||!e.complevel_id)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.collection=e.collection,this.sport_id=e.sports_id,this.org_id=e.orgs_id,this.user_id=e.user_id,this.complevel_id=e.complevel_id,this.el=e.destination,this.properties.show_prev_year=e.show_prev_year||this.properties.show_prev_year},bindEvents:function(){},GetData:function(e){var t=[],r=(new Date).getFullYear();for(var i=n.properties.show_prev_year;i>=0;i--){var s={year:r,seasons:e};t.push(s),r--}return{Data:t}},render:function(){var e=l.to_html(n.template,n.GetData(this.collection));c(n.destination).html(e)}});return r}),define("text!profilesetting/templates/positions.html",[],function(){return'{{#Data}}\r\n<span id="pos-{{id}}" class="span3 spn-position-title_h" positionId=\'{{id}}\'>{{name}} </span>\r\n{{/Data}}\r\n'}),define("sportorg/models/position",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,sport_name:null,stattab_id:0,stattab_name:null,stattab_classname:null},desc:"Position information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/positions",["facade","collections","sportorg/models/position","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}}),s}),define("profilesetting/collections/positions",["facade","collections","sportorg/collections/positions","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/sport/positions/"+this.sport_id+"?id1="+this.sport_id)}}),i}),define("profilesetting/views/positions",["require","text!profilesetting/templates/positions.html","facade","views","utils","vendor","profilesetting/collections/positions"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=e("profilesetting/collections/positions"),c=f.Mustache,h=i.$,r=o.extend({template:t,events:{},controls:{spnPositionTitle:".spn-position-title_h",divLevels:".div-levels",btnPositions:".btnOpenPositions",btnClose:".btn-Close-Positions"},messages:{},properties:{},initialize:function(e){n=this,n.setOptions(e),n.BindPositions(),n.bindEvents()},bindEvents:function(){},MarkPosition:function(e){h(e).hasClass("active")?h(e).addClass("active"):h(e).removeClass("active")},setOptions:function(e){if(!e.sport_id)throw new Error("Sport_id is missing for Positions View",e);this.destination=e.destination,this.sport_id=e.sport_id,this.el=e.destination,this.target=e.target},BindPositions:function(){if(n.sport_id){var e=new l;e.sport_id=n.sport_id,e.fetch(),h.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();n.positions=[];if(t!=null&&t.length){n.positions=[];for(var r in t)n.positions.push(t[r].payload)}else n.positions=[];n.render()})}},render:function(){var e=c.to_html(n.template,{Data:n.positions||[]});h(n.destination).html(e),n.positions!=null&&n.positions.length>0?h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeIn():h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeOut()}});return r}),define("profilesetting/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"team_id",url:function(){this.orgs_id==undefined;if(this.type=="add")return"/api/user/addteam/"+this.user_id;if(this.type=="delete")return"/api/user/team/"+this.user_id}}),n}),define("profilesetting/models/position",["facade","sportorg/models/position"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"position_id",url:function(){return this.orgs_id==undefined,this.type=="save"?"/api/user/position/"+this.user_id:this.type=="delete"?"/api/user/position/"+this.user_id+"?user_id="+this.user_id:"/api/user/position/"+this.user_id}}),n}),define("profilesetting/views/highschool",["require","text!profilesetting/templates/highschool.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/states"),v=e("profilesetting/collections/schools"),m=e("profilesetting/collections/sports"),g=e("profilesetting/models/complevel"),y=e("profilesetting/views/seasons"),b=e("profilesetting/views/positions"),w=e("profilesetting/views/teams"),E=e("profilesetting/models/team"),S=e("profilesetting/models/position"),s=a.extend({template:t,events:{"keyup #txt-school-state":"keyupState","blur #txt-school-state":"changeState","keyup #txt-school-school":"keyupSchool","blur #txt-school-school":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-School":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-school-h":"openAddHighSchoolPopup"},controls:{txtStates:"#txt-school-state",txtSchools:"#txt-school-school",content:"#content-school-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-school-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail",divAddSportSection:"#section-Add-Sports-school",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert School",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:2},states:[],schools:[],initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},openAddHighSchoolPopup:function(){routing.trigger("add-school-init","","","school")},init:function(){i.setupView(),i.SetUpTeamsView()},render:function(){var e=this;a.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=p(e.target).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!="")if(r==1){i.$(e.target).parents(i.controls.divAddSportSection).find(i.controls.txtSchools).attr("disabled","disabled").val(""),i.RemoveSportsSection();var s=new d;s.state_name=t,console.log("State Request Abort Request Function AddGame/Main.js"),i.stateFetchRequest=i.stateFetchRequest||[],i.stateFetchRequest.push(i.cityFetchRequest||[]),i.stateFetchRequest.push(i.schoolFetchRequest||[]),i.stateFetchRequest=i.abortRequest(i.stateFetchRequest);var o=s.fetch();i.stateFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html("").fadeOut(),i.states=[];for(var t in e)i.states.push(e[t].payload);i.states.forEach(function(e,t){n.push(e.name)});try{i.$el.find(i.controls.txtStates).autocomplete("destroy")}catch(r){}i.$el.find(i.controls.txtStates).autocomplete({source:n}),i.$el.find(i.controls.txtStates).trigger("keydown")})}else i.changeState(e)},changeState:function(e){var t=p(e.target).val(),n=!1;i.states_id="",i.states.forEach(function(e,r){e["name"]==t&&(n=!0,i.states_id=e.id,i.$(i.controls.txtSchools).removeAttr("disabled"))}),n||(i.states_id=0,i.$(i.controls.txtSchools).attr("disabled","disabled"))},keyupSchool:function(e){var t=p(e.target).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!=""&&r==1){i.RemoveSportsSection();var s=new v;s.sports_club=0,s.states_id=i.states_id,s.org_name=t,console.log("School Request Abort Request Function"),i.schoolFetchRequest=i.abortRequest(i.schoolFetchRequest);var o=s.fetch();i.schoolFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html("").stop().fadeOut(),i.schools=[];for(var r in t)i.schools.push(t[r].payload);i.schools.forEach(function(e,t){n.push(e.org_name)});try{i.$el.find(i.controls.txtSchools).autocomplete("destroy")}catch(o){}p(e.target).autocomplete({source:n}),p(e.target).trigger("keydown")})}else i.RemoveSportsSection(),i.changeSchool(e)},changeSchool:function(e){var t=i.$(e.target).val();i.orgs_id=0,i.schools.forEach(function(e,n){e["org_name"]==t&&(i.orgs_id=e.org_id,i.$el.find(i.controls.divMainSportsSection).find(i.controls.ddlSports).length<1&&i.fillSports(i.orgs_id,i.controls.divMainSportsSection))})},RemoveSportsSection:function(){i.$el.find(i.controls.divMainSportsSection).html("")},fillSports:function(e,t){console.log("Fill Sports",e);if(i.sports&&i.sports.length>0)i.SetupSportsView(e,t);else{var n=new m;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,i.gender=="male"?n.male=1:i.gender=="famale"&&(n.female=0),n.fetch(),p.when(n.request).done(function(){if(n.isError())return;console.log("Sports List",n);var r=n.toJSON();(r==null||r.length<1)&&i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn(),i.sports=[];for(var s in r)i.sports.push(r[s].payload);i.sort(i.sports,"sport_name",!1),i.SetupSportsView(e,t)})}},changeSports:function(e){console.log("SPORTS",i.sports);var t=p(e.target).val(),n=p(e.target).attr("orgsid");console.log("Event Target Sports List",p(e.target),t,n);if(t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){i.sport_id=t;var r=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels);console.log("CALLED",r),r.html(""),i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",t),i.fillCompLevel(n,r,t)}else i.sport_id=0},SetupSportsView:function(e,t){console.log("Setup Sports View",i.sports);var r=h.to_html(n,{sports:i.sports,orgsId:e});i.$(t).append(r),p(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),p(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){if(i.sports.length<1)return 0;for(var t=0;t<i.sports.length;t++)if(i.sports[t].id==e)return i.sports[t]},fillCompLevel:function(e,t,n){i.compLevel_id=undefined;if(e&&e>0){var r=new g;console.log("List",r),r.orgs_id=e,console.log("Complevels Request Abort Request Function"),i.compFetchRequest=i.abortRequest(i.compFetchRequest);var s=r.fetch();i.compFetchRequest.push(s),p.when(r.request).done(function(){if(r.isError())return;var s=r.toJSON();i.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){i.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)i.compLevel.push(s.payload.complevels[o]);var u=i.findSportById(n);i.SetUpCompLevelView(e,t,u)}})}else p(t).html("")},changeCompLevel:function(e){var t=p(e.target).val();i.compLevel_id=0;for(var n in i.compLevel)if(i.compLevel[n].complevel_id==t){i.compLevel_id=t,console.log("if"),i.$(e.target).attr("disabled","disabled"),i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeIn();return}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var s=n.sports_id,o=i.GetSeasonsData(i.seasons,e,s);console.log("Data",o),console.log(t);var u=h.to_html(r,{levels:i.compLevel,Data:o,sport:n});i.$(t).append(u);var a=i.$(t).find(i.controls.modalPositionBody);i.fillPositions(s,a)},GetSeasonsData:function(e,t,n){var r=[],s=(new Date).getFullYear();for(var o=i.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};r.push(u),s--}return r},fillPositions:function(e,t){console.log("fillpositions",e,t),e?(console.log("sport_id",e,"destination",t),this.positionView=new b({name:"settings-high-school-positions",destination:t,sport_id:e}),i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html("").fadeOut()):i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html(i.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){i.clickedPositionTarget=p(e.target);if(p(e.target).parent().find(i.controls.chkSeasons).is(":checked")){var t=p(e.target).attr("teamid");console.log(p(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle));if(p(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).length>0){i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).attr("teamid",t).removeClass("active");var n=p(e.target).attr("positions");console.log("ids",n);if(n){var r=n.split(",");p.each(r,function(t,n){i.$(e.target).parents(i.controls.divSubLevels).find("#pos-"+n).addClass("active")})}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport")}else alert("Select Season")},MarkPosition:function(e){var t=i.$(e.target),n=p(e.target).attr("teamid"),r=p(e.target).attr("positionId"),s={id1:i.user_id,user_id:i.user_id,positions_id:r,teams_id:n};if(t.hasClass("active")){s.position_id=r;var o=new S(s);o.user_id=i.user_id,o.type="delete",o.destroy({data:s}),p.when(o.request).done(function(){t.removeClass("active")})}else{var o=new S(s);o.user_id=i.user_id,t.addClass("active"),o.type="save",o.save()}},AddLevel:function(e){var t=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels),n=p(e.target).attr("orgsid"),r=p(e.target).attr("sportid");n&&n!=0&&n!=null&&n!=""?(console.log("destination add level function",t),i.fillCompLevel(n,t,r)):console.error("Orgs Id is ",n)},AddSports:function(e){var t=i.$(e.target).attr("orgsid"),n=p(i.controls.divSportsWrapper+'[orgsId="'+t+'"] '+i.controls.divSchoolSportsSection);t&&t!=0&&t!=null&&t!=""&&(i.fillSports(t,n),p(n).parents(i.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){i.$(e.target).parents(i.controls.divsportsLevel).remove()},SetUpTeamsView:function(){console.log("Highschool teams view Set Up Teams View"),this.teamsView=new w({user_id:i.user_id,destination:i.controls.divTeamListDetail,sports_club:0,org_type:"school"})},SetUpAddSchool:function(){i.$el.find(i.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){if(p(e.target).is(":checked")&&p(e.target).attr("seasonid")&&p(e.target).attr("year")){var t=p(e.target).attr("orgsid"),n=p(e.target).parents(i.controls.divSubLevels).find(i.controls.ddlComplevel).val();if(t&&t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){var r={orgs_id:t,teams_id:0,id1:i.user_id,user_id:i.user_id,sports_id:p(e.target).attr("sportsid"),complevels_id:n,seasons_id:p(e.target).attr("seasonid"),year:p(e.target).attr("year")},s=new E(r);s.type="add",s.user_id=i.user_id,s.save(),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();if(t!=null&&t.payload!=null||t.payload.id!=null)p(e.target).attr("teamid",t.payload.team_id),p(e.target).parent().find(i.controls.btnOpenPositions).attr("teamid",t.payload.id).removeAttr("disabled")})}else{var o=p(e.target).parents(i.controls.divLevels).find(i.controls.ddlComplevel);p(o).parent().find(i.controls.fieldError).html(i.messages.SelectLevel).stop().fadeIn(),p(e.target).parent().find(i.controls.btnOpenPositions).attr("disabled","disabled")}}else!p(e.target).is(":checked")&&p(e.target).attr("teamid")&&i.DeleteTeam(e)},DeleteTeam:function(e){var t=p(e.target).attr("teamid");if(t){var n={};n.user_id=i.user_id,n.team_id=t;var r=new E(n);r.user_id=i.user_id,r.team_id=t,r.type="delete",r.destroy({data:{user_id:i.user_id,teams_id:t},processData:!0,success:function(){p(e.target).removeAttr("teamid"),p(e.target).parent().find(i.controls.btnOpenPositions).removeAttr("teamid").attr("disabled","disabled")}})}},FinishSports:function(){i.ClearAddNewForm(),i.init()},ClearAddNewForm:function(){i.RemoveSportsSection(),i.$(i.controls.txtStates).val(""),i.states_id=undefined,i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.orgs_id=undefined,i.$el.find(i.controls.divAddSportSection).fadeOut()},EditTeam:function(e){console.log("Event",e.target);var t=p(e.target).attr("orgsId"),n=p(e.target).attr("sportId"),r=p(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+t+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",p(r).html(s);var o=p(r).find(i.controls.divLevels);p.each(i.teamsView.Teams,function(e,r){console.log("team",r),t==r.payload.org_id&&p.each(r.payload.sports,function(e,r){console.log("sport",r);if(r.sports_id==n){i.SetUpEditTeamView(t,o,n,r);return}})})},SetUpEditTeamView:function(e,t,n,r){i.compLevel_id=undefined;if(e&&e>0){var s=new g;s.orgs_id=e,s.fetch(),console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),p.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);p.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);p(u).val(s.complevels_id).attr("disabled","disabled"),p(o[n]).find(i.controls.divSeasons).fadeIn(),p.each(s.seasons,function(e,t){p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("teamid",t.team_id);var r="";t.positions&&p.each(t.positions,function(e,t){t&&(r+=t.id+",")}),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("positions",r)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},ClosePositions:function(e){if(i.clickedPositionTarget){var t=p(e.target).parents(i.controls.modalPosition).find(i.controls.modalPositionsTitle),n="";t.each(function(){p(this).hasClass("active")&&(n+=p(this).attr("positionid")+",")}),p(i.clickedPositionTarget).attr("positions",n),i.clickedPositionTarget=undefined}}});return s}),define("text!profilesetting/templates/club.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading">Clubs</span>\r\n</div>\r\n<div><a class="add-club-h" href="javascript: void(0);">Add a New Club</a></div>\r\n<div id="btn-Add-club" class="div-add-dotted">\r\n	+ Add a Club\r\n</div>\r\n<div id="section-Add-Sports-club" class="displayNone add-org-fields">\r\n<div>\r\n	<span class="span2">What State?</span>\r\n	<input type="text" id="txt-club-state" placeholder="Just Start Typing" tabindex="0"/>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n\r\n<div>\r\n	<span class="span2">What Club?</span>\r\n	<input type="text" id="txt-club-club" placeholder="Just Start Typing" disabled="disabled" tabindex="1"/>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n<div class="div-sports-wrapper displayNone">\r\n	<div id="def-club-sports-section" class="school-sports-section">\r\n\r\n	</div>\r\n	<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-sports" >Add Sports</a> </span>\r\n</div>\r\n<!--<span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary" >Save</a> </span> -->\r\n</div>\r\n<!--CLUBs LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail-club">\r\n\r\n</div>\r\n'}),define("profilesetting/views/club",["require","text!profilesetting/templates/club.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/states"),v=e("profilesetting/collections/schools"),m=e("profilesetting/collections/sports"),g=e("profilesetting/models/complevel"),y=e("profilesetting/views/seasons"),b=e("profilesetting/views/positions"),w=e("profilesetting/views/teams"),E=e("profilesetting/models/team"),S=e("profilesetting/models/position"),s=a.extend({template:t,events:{"keyup #txt-club-state":"keyupState","blur #txt-club-state":"changeState","keyup #txt-club-club":"keyupSchool","blur #txt-club-club":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-club":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-club-h":"openAddClubPopup"},controls:{txtStates:"#txt-club-state",txtSchools:"#txt-club-club",content:"#content-club-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-club-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail-club",divAddSportSection:"#section-Add-Sports-club",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert Club",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:2},states:[],schools:[],initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},openAddClubPopup:function(){routing.trigger("add-school-init","","","club")},init:function(){i.setupView(),i.SetUpTeamsView()},render:function(){var e=this;a.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=p(i.controls.txtStates).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!="")if(r==1){i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.RemoveSportsSection();var s=new d;s.state_name=t,console.log("State Request Abort Request Function AddGame/Main.js"),i.stateFetchRequest=i.stateFetchRequest||[],i.stateFetchRequest.push(i.cityFetchRequest||[]),i.stateFetchRequest.push(i.schoolFetchRequest||[]),i.stateFetchRequest=i.abortRequest(i.stateFetchRequest);var o=s.fetch();i.stateFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html("").fadeOut(),i.states=[];for(var t in e)i.states.push(e[t].payload);i.states.forEach(function(e,t){n.push(e.name)});try{i.$el.find(i.controls.txtStates).autocomplete("destroy")}catch(r){}i.$el.find(i.controls.txtStates).autocomplete({source:n}),i.$el.find(i.controls.txtStates).trigger("keydown")})}else i.changeState(e)},changeState:function(e){var t=p(e.target).val(),n=!1;i.states_id="",i.states.forEach(function(e,r){e["name"]==t&&(n=!0,i.states_id=e.id,i.$el.find(i.controls.txtSchools).removeAttr("disabled"))}),n||(i.states_id=0,i.$el.find(i.controls.txtSchools).attr("disabled","disabled").val(""))},keyupSchool:function(e){var t=p(e.target).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!=""&&r==1){i.RemoveSportsSection();var s=new v;s.sports_club=1,s.states_id=i.states_id,s.org_name=t,console.log("School Request Abort Request Function"),i.schoolFetchRequest=i.abortRequest(i.schoolFetchRequest);var o=s.fetch();i.schoolFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html("").stop().fadeOut(),i.schools=[];for(var r in t)i.schools.push(t[r].payload);i.schools.forEach(function(e,t){n.push(e.org_name)});try{i.$el.find(i.controls.txtSchools).autocomplete("destroy")}catch(o){}p(e.target).autocomplete({source:n}),i.$el.find(i.controls.txtSchools).trigger("keydown")})}else i.RemoveSportsSection(),i.changeSchool(e)},changeSchool:function(e){var t=this.$(e.target).val();i.orgs_id=0,i.schools.forEach(function(e,n){e["org_name"]==t&&(i.orgs_id=e.org_id,i.$el.find(i.controls.divMainSportsSection).find(i.controls.ddlSports).length<1&&i.fillSports(i.orgs_id,i.controls.divMainSportsSection))})},RemoveSportsSection:function(){i.$el.find(i.controls.divMainSportsSection).html("")},fillSports:function(e,t){if(i.sports&&i.sports.length>0)i.SetupSportsView(e,t);else{var n=new m;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,i.gender=="male"?n.male=1:i.gender=="famale"&&(n.female=0),n.fetch(),p.when(n.request).done(function(){if(n.isError())return;var r=n.toJSON();(r==null||r.length<1)&&i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn(),i.sports=[];for(var s in r)i.sports.push(r[s].payload);i.sort(i.sports,"sport_name",!1),i.SetupSportsView(e,t)})}},changeSports:function(e){console.log("SPORTS",i.sports);var t=p(e.target).val(),n=p(e.target).attr("orgsid");console.log("Event Target Sports List",p(e.target),t,n);if(t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){i.sport_id=t;var r=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels);console.log("CALLED",r),r.html(""),i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",t),i.fillCompLevel(n,r,t)}else i.sport_id=0},SetupSportsView:function(e,t){var r=h.to_html(n,{sports:i.sports,orgsId:e});i.$(t).append(r),p(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),p(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){if(i.sports.length<1)return 0;for(var t=0;t<i.sports.length;t++)if(i.sports[t].id==e)return i.sports[t]},fillCompLevel:function(e,t,n){i.compLevel_id=undefined;if(e&&e>0){var r=new g;r.orgs_id=e,console.log("Complevels Request Abort Request Function"),i.compFetchRequest=i.abortRequest(i.compFetchRequest);var s=r.fetch();i.compFetchRequest.push(s),p.when(r.request).done(function(){if(r.isError())return;var s=r.toJSON();i.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){i.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)i.compLevel.push(s.payload.complevels[o]);var u=i.findSportById(n);i.SetUpCompLevelView(e,t,u)}})}else p(t).html("")},changeCompLevel:function(e){var t=p(e.target).val();i.compLevel_id=0;for(var n in i.compLevel)if(i.compLevel[n].complevel_id==t){i.compLevel_id=t,i.$(e.target).attr("disabled","disabled"),i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeIn();return}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var s=n.sports_id,o=i.GetSeasonsData(i.seasons,e,s),u=h.to_html(r,{levels:i.compLevel,Data:o,sport:n});i.$(t).append(u);var a=i.$(t).find(i.controls.modalPositionBody);i.fillPositions(s,a)},GetSeasonsData:function(e,t,n){var r=[],s=(new Date).getFullYear();for(var o=i.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};r.push(u),s--}return r},fillPositions:function(e,t){e?(this.positionView=new b({name:"settings-club-positions",destination:t,sport_id:e}),i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html("").fadeOut()):i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html(i.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){i.clickedPositionTarget=p(e.target);var t=p(e.target).attr("teamid");if(p(e.target).parent().find(i.controls.chkSeasons).is(":checked"))if(p(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).length>0){i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).attr("teamid",t).removeClass("active");var n=p(e.target).attr("positions");if(n){var r=n.split(",");p.each(r,function(t,n){i.$(e.target).parents(i.controls.divSubLevels).find("#pos-"+n).addClass("active")})}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport");else alert("Select Season")},MarkPosition:function(e){var t=i.$(e.target),n=p(e.target).attr("teamid"),r=p(e.target).attr("positionId"),s={id1:i.user_id,user_id:i.user_id,positions_id:r,teams_id:n};if(t.hasClass("active")){s.position_id=r;var o=new S(s);o.user_id=i.user_id,o.type="delete",o.destroy({data:s}),p.when(o.request).done(function(){t.removeClass("active")})}else{var o=new S(s);o.user_id=i.user_id,t.addClass("active"),o.type="save",o.save()}},AddLevel:function(e){var t=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels),n=p(e.target).attr("orgsid"),r=p(e.target).attr("sportid");n&&n!=0&&n!=null&&n!=""?i.fillCompLevel(n,t,r):console.error("Orgs Id is ",n)},AddSports:function(e){var t=i.$(e.target).attr("orgsid"),n=p(i.controls.divSportsWrapper+'[orgsId="'+t+'"] '+i.controls.divSchoolSportsSection);t&&t!=0&&t!=null&&t!=""&&(i.fillSports(t,n),p(n).parents(i.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){i.$(e.target).parents(i.controls.divsportsLevel).remove()},SetUpTeamsView:function(){this.teamsView=new w({user_id:i.user_id,destination:i.controls.divTeamListDetail,sports_club:1,org_type:"club"})},SetUpAddSchool:function(){i.$el.find(i.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){if(p(e.target).is(":checked")&&p(e.target).attr("seasonid")&&p(e.target).attr("year")){var t=p(e.target).attr("orgsid"),n=p(e.target).parents(i.controls.divSubLevels).find(i.controls.ddlComplevel).val();if(t&&t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){var r={orgs_id:t,teams_id:0,id1:i.user_id,user_id:i.user_id,sports_id:p(e.target).attr("sportsid"),complevels_id:n,seasons_id:p(e.target).attr("seasonid"),year:p(e.target).attr("year")},s=new E(r);s.type="add",s.user_id=i.user_id,s.save(),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();if(t!=null&&t.payload!=null||t.payload.id!=null)p(e.target).attr("teamid",t.payload.team_id),p(e.target).parent().find(i.controls.btnOpenPositions).attr("teamid",t.payload.id).removeAttr("disabled")})}else{console.error("OrgsId & ComplevelIds are",t,n);var o=p(e.target).parents(i.controls.divLevels).find(i.controls.ddlComplevel);p(o).parent().find(i.controls.fieldError).html(i.messages.SelectLevel).stop().fadeIn(),p(e.target).parent().find(i.controls.btnOpenPositions).attr("disabled","disabled")}}else!p(e.target).is(":checked")&&p(e.target).attr("teamid")&&i.DeleteTeam(e)},DeleteTeam:function(e){var t=p(e.target).attr("teamid");if(t){var n={};n.user_id=i.user_id,n.team_id=t;var r=new E(n);r.user_id=i.user_id,r.team_id=t,r.type="delete",r.destroy({data:{user_id:i.user_id,teams_id:t},processData:!0,success:function(){p(e.target).removeAttr("teamid"),p(e.target).parent().find(i.controls.btnOpenPositions).removeAttr("teamid").removeAttr("positions").attr("disabled","disabled")}})}},FinishSports:function(){i.ClearAddNewForm(),i.init()},ClearAddNewForm:function(){i.RemoveSportsSection(),i.$(i.controls.txtStates).val(""),i.states_id=undefined,i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.orgs_id=undefined,i.$el.find(i.controls.divAddSportSection).fadeOut()},EditTeam:function(e){console.log("self.teamsView.Teams",i.teamsView.Teams);var t=p(e.target).attr("orgsId"),n=p(e.target).attr("sportId"),r=p(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+t+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",p(r).html(s);var o=p(r).find(i.controls.divLevels);p.each(i.teamsView.Teams,function(e,s){console.log("team",s),t==s.payload.org_id&&p.each(s.payload.sports,function(e,s){console.log("sport",s);if(s.sports_id==n){i.SetUpEditTeamView(t,r,n,s);return}})})},SetUpEditTeamView:function(e,t,n,r){i.compLevel_id=undefined;if(e&&e>0){var s=new g;s.orgs_id=e,console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),p.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);p.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);p(u).val(s.complevels_id).attr("disabled","disabled"),p(o[n]).find(i.controls.divSeasons).fadeIn(),p.each(s.seasons,function(e,t){p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("teamid",t.team_id);var r="";t.positions&&p.each(t.positions,function(e,t){t&&(r+=t.id+",")}),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("positions",r)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},ClosePositions:function(e){if(i.clickedPositionTarget){var t=p(e.target).parents(i.controls.modalPosition).find(i.controls.modalPositionsTitle),n="";t.each(function(){p(this).hasClass("active")&&(n+=p(this).attr("positionid")+",")}),p(i.clickedPositionTarget).attr("positions",n),i.clickedPositionTarget=undefined}}});return s}),define("profilesetting/models/high_school",["user/models/basics"],function(e){var t;return t=e.extend({fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n);var r=new Date(t.get("payload").dob),i=new Date,s=i.getFullYear()-r.getFullYear();s>18?t.set("show_highschool",!1):t.set("show_highschool",!0)}}),t}),define("text!profilesetting/templates/individualsports.html",[],function(){return'<div class="sub-section-prof-setting">\r\n\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Individual Sports</span>\r\n	</div>\r\n	<div class="section-individual-sports">\r\n		<div class="org-sport-list">\r\n			<div class="org-sport-list-header">\r\n				<div class="org-name">Select The Sports you Participate in</div>\r\n			</div>\r\n			<div class="sports-list-individial-sports"></div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/sportscheckbox.html",[],function(){return'{{#sports}}\r\n	<div>\r\n		<div class="org-sport-list-header">\r\n			<div class="sport-name">\r\n				<input type="checkbox" id="chk-ind-{{sport_id}}" class="chk-single" sportid="{{sport_id}}" />\r\n\r\n				<img src="{{icon}}" />\r\n\r\n				{{sports_name}}\r\n			</div>\r\n		</div>\r\n	</div>\r\n{{/sports}}'}),define("text!profilesetting/templates/sportitem.html",[],function(){return'<div class="span12">\r\n	Users Sports\r\n</div>\r\n{{#sports}}\r\n<div class="span12">\r\n<span class="span3">\r\n			<label>{{sport_name}}</label></span>\r\n			<span class="span3">\r\n				\r\n				<a href="javascript:void(0)" class="delete-individualsport" sportid="{{sport_id}}">Delete</a>\r\n				</span>\r\n</div>\r\n{{/sports}}'}),define("profilesetting/collections/individualsports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){if(testpath)return testpath+"/api/user/sports";if(this.type=="get")return"/api/user/sports/"+this.user_id+"?team_type=individual"},data:{sports_id:this.sports_id}}),i}),define("profilesetting/models/sport",["facade","sportorg/models/sport"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"user_id",url:function(){this.orgs_id==undefined;if(this.type=="save")return"/api/user/addsport/"+this.user_id;if(this.type=="delete")return"/api/user/sport/"+this.user_id}}),n}),define("profilesetting/views/individuals",["require","text!profilesetting/templates/individualsports.html","text!profilesetting/templates/sportscheckbox.html","text!profilesetting/templates/sportitem.html","facade","views","utils","vendor","profilesetting/collections/individualsports","profilesetting/collections/sports","profilesetting/models/sport"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/individualsports"),v=e("profilesetting/models/sport"),m=e("profilesetting/collections/sports"),s=a.extend({template:t,events:{"change .select-all":"CheckAll","change .chk-single":"CheckSingle","click .delete-individualsport":"DeleteSport"},controls:{content:"#section-individual-prof-setting",sportslist:".sports-list-individial-sports",btnSave:".btn-Save-Individual-Sports",chkAll:".select-all",chkSingle:".chk-single",userSportsList:".sports-list-user-individual-sports"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},init:function(){i.setupSportsView()},render:function(){a.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender,this.destination=e.destination},setUpUsersSports:function(){console.log("setUpSportsView Individual View");var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(r,{sports:i.sports});console.log("Users Own Sports",i.sports),i.$(i.controls.userSportsList).html(s)})},setUpUsersSportsCheck:function(){console.log("setUpSportsView Individual View Check");var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1),p.each(i.sports,function(e,t){i.$el.find("#chk-ind-"+t.sport_id).attr("checked","checked")})})},setupSportsView:function(){console.log("setUpSportsView Individual View");var e=new m;e.user_id=i.user_id,e.sport_type_id=2,e.male=1,e.female=0,i.gender=="male"?e.male=1:i.gender=="famale"&&(e.female=0),e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var r in t)i.sports.push(t[r].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(n,{sports:i.sports});i.$(i.controls.sportslist).html(s),i.setUpUsersSportsCheck()})},SaveSport:function(e){console.log("Save Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n=new v;n.user_id=i.user_id,n.sports_id=t,n.type="save",console.log("Save Model Request Abort Request Function"),i.sportsModelFetchRequest=i.abortRequest(i.sportsModelFetchRequest),i.compLevelFetchRequest=n.save({sports_id:t}),p.when(n.request).done(function(){i.setUpUsersSportsCheck()})}},DeleteSport:function(e){console.log("Delete Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n={user_id:i.user_id,sports_id:t},r=new v(n);r.user_id=i.user_id,r.type="delete",r.destroy({data:n,processData:!0,success:function(){i.setUpUsersSportsCheck()}})}},CheckAll:function(e){p(e.target).is(":checked")?i.$(i.controls.chkSingle).attr("checked","checked"):i.$(i.controls.chkSingle).removeAttr("checked","checked")},CheckSingle:function(e){p(e.target).is(":checked")?i.SaveSport(e):i.DeleteSport(e)}});return s}),define("profilesetting",["require","text!profilesetting/templates/layout.html","facade","controller","models","views","utils","profilesetting/models/basic_info","profilesetting/views/basic_info","profilesetting/views/highschool","profilesetting/views/club","profilesetting/models/high_school","profilesetting/views/individuals"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("profilesetting/models/basic_info"),d=e("profilesetting/views/basic_info"),v=e("profilesetting/views/highschool");ClubView=e("profilesetting/views/club"),IndividualSportsView=e("profilesetting/views/individuals");var m=e("profilesetting/models/high_school"),g=e("profilesetting/collections/individualsports");return n=i.extend({cssArr:["/pages/profilesetting/profilesettings.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;return this.layout?this.layout:(e=new h({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout)},setupView:function(){var e=this;this.basicInfoModel=new p,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),a.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.addHighSchool(),e.SetUpClubView(),e.setUpIndividualView()})},setUpBasicView:function(){this.basicView=new d({id:self.id})},addHighSchool:function(){var e=this;this.schoolView=new v({model:new m,name:"settings-high-school",destination:"#content-school-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.schoolView),this.layout.render()},setUpIndividualView:function(){var e=this;this.individualSportsView=new IndividualSportsView({model:new g({user_id:e.id}),name:"settings-individual-sports",destination:"#section-individual-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.individualSportsView),this.layout.render()},SetUpClubView:function(){var e=this;this.clubView=new ClubView({model:new m,name:"settings-club",destination:"#content-club-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.clubView),this.layout.render()}}),n}),define("text!userresume/templates/layout.html",[],function(){return'<div class="main-container" style="margin : auto">\r\n	<!-- Basic Info Section Starts-->\r\n	<div id="section-basics-prof-setting" style=""></div>\r\n	<!-- Basic Info Section Ends-->\r\n\r\n<!-- Sent Resume Section Starts\r\n	<div id="section-sent-resume">\r\n\r\n	</div>-->\r\n<!-- Sent Resume Section Ends -->\r\n\r\n<!-- Rd Tree Section Starts -->\r\n	<div id="section-RD-Tree">\r\n		\r\n	</div>\r\n<!-- Rd Tree Section Ends -->\r\n\r\n<!-- Academic Gpa Section Starts -->\r\n	<div id="section-academic">\r\n		\r\n	</div>\r\n<!-- Academic Gpa Section Ends -->\r\n\r\n<!-- User Awards Section Starts -->\r\n	<div id="section-awards">\r\n		\r\n	</div>\r\n<!-- User Awards Section Ends -->\r\n\r\n<!-- User References Section Starts -->\r\n	<div id="section-references">\r\n		\r\n	</div>\r\n<!-- User Reference Section Ends -->\r\n\r\n<!-- User Contacts Section Starts\r\n	<div id="section-contacts">\r\n		\r\n	</div>\r\n<!-- User Contacts Section Ends -->\r\n\r\n\r\n	<div id="main-footer-prof-setting">\r\n	</div>\r\n</div>\r\n'}),define("text!userresume/templates/sentresume.html",[],function(){return'<div class="row-fluid sub-section-prof-setting well well-large">\r\n<div class="row-fluid">\r\n	<span class="spn-black-heading  well-small">Sent Resumes</span>\r\n</div>\r\n<div id="btn-Add-Resume" class="clearfix div-add-dotted well-small">\r\n	+ Send Resume\r\n</div>\r\n<table class="row-fluid">\r\n	<tr>\r\n		<th>Id</th>\r\n		<th>Sports Id</th>\r\n		<th>Users Id</th>\r\n		<th>College Coach Id</th>\r\n	</tr>\r\n	{{#resumes}}\r\n	<tr>\r\n		<td>{{id}}</td>\r\n		<td>{{sports_id}}</td>\r\n		<td>{{users_id}}</td>\r\n		<td>{{college_coach_id}}</td>\r\n	</tr>\r\n	{{/resumes}}\r\n</table>\r\n</div>'}),define("text!userresume/templates/basic_info_header.html",[],function(){return'{{#payload}}\r\n<div class="span3">\r\n	<img id="img-profile-prof-setting" src="{{user_picture}}" />\r\n</div>\r\n<div class="span6">\r\n	<h2>{{name}}</h2>\r\n	<p>\r\n		{{user_height}} INCHES\r\n	</p>\r\n	<p>\r\n		{{user_weight}} LBS\r\n	</p>\r\n</div>\r\n{{/payload}}'}),define("text!userresume/templates/rdtree.html",[],function(){return'<div class="sub-section-prof-setting">\r\n<div class="row-fluid">\r\n	<span class="green-left-heading">Work Outs</span>\r\n</div>\r\n<div id="container-rdtree" class="row-fluid inset-data-entry">\r\n	{{#rdtrees}}\r\n	<div class="section-rdtree-items_h">\r\n		<div><span class="standard-subsection-header" style="margin-top:15px;">{{title}}</span>\r\n\r\n			<a href="javascript:void(0)" class="edit btn-edit-rdtree_h">&nbsp;</a>\r\n		</div>\r\n		{{#data}}\r\n			<div class="rd-entry">\r\n				<span>{{#icon}}<img src="{{icon}}" />{{/icon}}{{name}}</span>\r\n				<span>\r\n					<input type="text" class="txtRdTrees_h" treeId="{{id}}" value="{{val}}" resumeDataId="{{resumeDataId}}" disabled="disabled"/>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					\r\n				</span>\r\n			</div>\r\n		{{/data}}\r\n		<a href="javascript:void(0)" class="resume_button btn-Finish-RdTree_h displayNone">FINISH</a>\r\n	</div>\r\n	{{/rdtrees}}\r\n</div>\r\n</div>'}),define("text!userresume/templates/academic.html",[],function(){return'<div class="sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Academic</span>\r\n	</div>\r\n	<div class="inset-data-entry">\r\n		<div id="container-academic-gpa"></div>\r\n		<div id="container-StandardizedTest"></div>\r\n		<div id="container-ApTest"></div>\r\n	</div>\r\n</div>'}),define("text!userresume/templates/awards.html",[],function(){return'<div class="row-fluid sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Awards</span>\r\n	</div>\r\n\r\n	<div class="inset-data-entry section-new-award">\r\n		<div class="div-add-dotted well-small btn-Add-award_h" testids="{{TestIds}}">\r\n			+ Add an Award\r\n		</div>\r\n		<div class="section-new-controls displayNone">\r\n			<div class="clearfix row-fluid">\r\n				<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span>\r\n					<select class="ddl-sports-awards_h"></select>\r\n				</span>\r\n				<span>\r\n					<input type="text" class="txtAwards_h txt_name_h" placeholder="Award Name" value="{{name}}"/>\r\n				</span>\r\n				<span>\r\n					<input type="text" class="txtAwards_h txt_year_h" placeholder="Year Awarded" value="{{year}}"/>\r\n				</span>\r\n				</div>\r\n				<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span>\r\n					<textarea class="txtAwards_h txt_description_h" placeholder="Description">{{description}}</textarea>\r\n				</span>\r\n				</div>\r\n			</div>\r\n			<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span class=""><a href="javascript:void(0)" class="resume_button btn-Save_award_h" >Save</a> <a href="javascript:void(0)" class="resume_button btn-Cancel-New">Cancel</a> <span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n			</div>\r\n		</div>\r\n		<br/>\r\n	</div>\r\n	<div id="section-list-awards" class="row-fluid">\r\n\r\n	</div>\r\n</div>'}),define("text!userresume/templates/contact.html",[],function(){return"<div>Contact</div>"}),define("text!userresume/templates/references.html",[],function(){return'<div class="row-fluid sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">References</span>\r\n	</div>\r\n\r\n	<div class="inset-data-entry section-new-reference">\r\n		<div class="div-add-dotted well-small btn-Add-reference_h" testids="{{TestIds}}">\r\n			+ Add an Reference\r\n		</div>\r\n		<div class="well section-new-controls displayNone">\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Sport:</span>\r\n				<span class=""> <select class="ddl-sports-references_h"></select> </span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Name:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_name_h" value="{{name}}"/>\r\n				</span>\r\n			</div>\r\n\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Description:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_description_h" value="{{description}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Email:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_email_h" value="{{year}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Relationship:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_relation_h" value="{{year}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Phone:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_phone_h" value="{{description}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="span12"> <a href="javascript:void(0)" class="resume_button btn-Save_reference_h" >Save</a> <a href="javascript:void(0)" class="resume_button btn-Cancel-New">Cancel</a> <span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n			</div>\r\n		</div>\r\n		<br/>\r\n	</div>\r\n	<div id="section-list-references" class="row-fluid">\r\n\r\n	</div>\r\n</div>'}),define("user/models/resume",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/resume",["facade","user/models/resume"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("user/models/rdtree",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/rdtree",["facade","user/models/rdtree"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,resume_data_id:this.resume_data_id,user_value:this.user_value},processData:!0,url:function(){return this.action=="save"?"api/resumedataval/add/"+this.treeId+"?id1="+this.treeId:this.action=="update"?"api/resumedataval/basics/"+this.treeId+"?id1="+this.treeId:this.action=="delete"?"api/user/gpa/"+this.user_id+"?id1="+this.user_id:"api/user/addgpa/"+this.user_id+"?id1="+this.user_id},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){console.log("Show Error Message Rdtree.js Model",e),$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("user/models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/gpa",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="delete"?"api/user/gpa/"+this.user_id+"?id1="+this.user_id:"api/user/addgpa/"+this.user_id+"?id1="+this.user_id},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/models/award",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="update"?"api/awards/basics/"+this.award_id+"?id1="+this.award_id:this.action=="save"?"api/awards/add/":(this.action=="delete","api/awards/base/"+this.award_id+"?id1="+this.award_id)},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/models/contact",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/reference",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",processData:!0,url:function(){return this.action=="update"?"api/references/basics/"+this.reference_id+"?id1="+this.reference_id:this.action=="save"?"api/references/add/":(this.action=="delete","api/references/base/"+this.reference_id+"?id1="+this.reference_id)},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("user/collections/resumes",["facade","collections","user/models/resume","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/sentresumes",["facade","collections","user/collections/resumes","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/sent_resume/"+this.user_id:(this.user_id==undefined,"api/user/sent_resumes/"+this.user_id+"?id1="+this.user_id)}});return i}),define("userresume/views/sentresumeview",["require","text!userresume/templates/sentresume.html","facade","views","utils","vendor","userresume/collections/sentresumes"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/sentresumes"),h=s.extend({template:t,events:{},controls:{},messages:{dataNotExist:"Data Not Exists For Resumes."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},render:function(){var e=this;s.prototype.render.call(this)},setupView:function(){var e=this,t={user_id:e.user_id},n=new c(t);n.user_id=e.user_id,n.fetch(),l.when(n.request).done(function(){if(n.isError())return;var t=n.toJSON();if(t.length){var r=[];l.each(t,function(e,t){r.push(t.payload)}),e.Resumes=t;var i=f.to_html(e.template,{resumes:r});l(e.el).html(i)}else l(e.el).html(e.messages.dataNotExist)})}});return h}),define("user/collections/rdtree",["facade","collections","user/models/rdtree","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/rdtree",["facade","collections","user/collections/rdtree","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/rdtree/"+this.user_id:(this.user_id==undefined,"api/user/rdtree/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){var r={title:t.payload.name},i=[];for(var s in t.payload.data){var o=t.payload.data[s],u={name:o.name,id:o.id,type:o.type,val:o.val||"",resumeDataId:o.resume_data_id,icon:o.icon||null};i.push(u)}r.data=i,n.push(r)}),n}});return i}),define("userresume/views/rdtree",["require","text!userresume/templates/rdtree.html","facade","views","utils","vendor","userresume/collections/rdtree","userresume/models/rdtree"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/rdtree"),h=e("userresume/models/rdtree"),p=s.extend({template:t,events:{"click .btn-edit-rdtree_h":"MarkEdit","click .btn-Finish-RdTree_h":"FinishEdit","blur .txtRdTrees_h":"SaveResumeData"},controls:{btnEditRdTree:".btn-edit-rdtree_h",btnFinishRdTree:".btn-Finish-RdTree_h",sectionRdTreeItems:".section-rdtree-items_h",txtRdTree:".txtRdTrees_h"},messages:{dataNotExist:"Data Not Exists For RD Trees."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},setupView:function(){var e=this,t={user_id:e.user_id},n=new c(t);n.user_id=e.user_id,n.fetch(),l.when(n.request).done(function(){if(n.isError())return;e.Tree=n.parseAsRequired(),console.log("d",e.Tree);var t=f.to_html(e.template,{rdtrees:e.Tree});l(e.el).html(t)})},MarkEdit:function(e){l(e.target).fadeOut(),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.txtRdTree).removeAttr("disabled"),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.btnFinishRdTree).fadeIn()},FinishEdit:function(e){l(e.target).fadeOut(),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.txtRdTree).attr("disabled","disabled"),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.btnEditRdTree).fadeIn()},SaveResumeData:function(e){var t=l(e.target).attr("treeId"),r=l(e.target).attr("resumeDataId"),i=l(e.target).val(),s={treeId:t,user_id:n.user_id,resume_data_id:r,user_value:i},o=new h(s);o.treeId=t,o.user_id=n.user_id,o.target=l(e.target),t>0?(o.action="update",o.save({id1:t})):(o.action="save",o.save()),l.when(o.request).done(function(t){console.log("response",t),t.payload!=null&&t.payload.id>0&&l(e.target).attr("treeId",t.payload.id),l(e.target).parent().find(".error_h").html("").fadeOut(),l(e.target).parent().find(".success_h").html("").fadeOut()})}});return p}),define("text!userresume/templates/gpa.html",[],function(){return'<span class="standard-subsection-header">GPA</span>\r\n<div class="div-add-dotted well-small btn-Add-gpa" testids="{{TestIds}}">\r\n	+ Add a Gpa\r\n</div>\r\n<div class="section-Add-Gpa displayNone">\r\n	<div class="alert alert-danger displayNone error_h"></div>\r\n	<span class="span5">Year : \r\n		<select class="txtGpaYear_h">\r\n			<option value="">Select</option>\r\n			<option value="Senior">Senior</option>\r\n			<option value="Junior">Junior</option>\r\n			<option value="">Sophomore</option>\r\n			<option value="Freshman">Freshman</option>\r\n		</select>\r\n		</span>\r\n	<span class="span5">Score : <input type="text" class="txtGpaScore_h"/></span>\r\n	<p ><button class="resume_button btn-Save-Gpa">Save</button></p>\r\n</div>\r\n<a href="javascript:void(0)" id="edit-gpa-btn" class="edit edit-gpa displayNone"></a>\r\n{{#data}}\r\n			<div class="row-fluid">\r\n				<span class="span3">{{year}}</span>\r\n				<span class="span9">\r\n					<input type="text" class="txtGpa_h" year="{{year}}" gpaId="{{id}}" value="{{gpa}}" disabled="disabled"/>\r\n					<a href="javascript:void(0)" class="remove btn-delete-gpa" year="{{year}}"></a>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					</span>\r\n					\r\n			</div>\r\n		{{/data}}\r\n		<button class="resume_button btn-finish-gpa_h displayNone">Finish</button>'}),define("text!userresume/templates/test.html",[],function(){return'<span class="standard-subsection-header">{{Test_Type}} Tests</span>\r\n<div class="clearfix ">\r\n<div class="div-add-dotted well-small btn-Add-test" testids="{{TestIds}}">\r\n	+ Add a Test\r\n</div>\r\n<div class="section-modal-academic-tests_h"> </div>\r\n</div>\r\n\r\n<div class="section-test-topics_h">\r\n	\r\n</div>'}),define("text!userresume/templates/testtopics.html",[],function(){return'\r\n{{#data}}\r\n			<div class="row-fluid item-test-topic_h item-test-{{id}}">\r\n				<div>\r\n				<span class="span3"><h4>{{testname}} :</h4></span> <span class="span3"><a href="javascript:void(0)" class="edit edit-test"></a></span>\r\n				<span class="span9">\r\n					{{#topics}}\r\n					<div class="row-fluid">\r\n						<span class="span3">{{name}}</span>\r\n						<span class="span9"><input type="text" class="txtTestScore_h" testId="{{id}}" topicId="{{topicid}}" initial="{{score}}" value="{{score}}" disabled="disabled"/>\r\n<a href="javascript:void(0)" class="remove btn-delete-test_h" testId="{{id}}" topicId="{{topicid}}"></a>\r\n							<span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n						</span>\r\n					</div>\r\n					 {{/topics}}\r\n				</span>\r\n				</div>\r\n				<div>\r\n					</div>\r\n					<a href="javascript:void(0)" class="btn btn-primary btn-finish-test-topic_h displayNone" >Finish</a>\r\n				</div>\r\n			</div>\r\n		 {{/data}}'}),define("text!userresume/templates/testlist.html",[],function(){return'<div class="modal hide fade tests-modal_h" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-header">\r\n<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã</button>\r\n<h3 id="myModalLabel">Add a Test ({{Test_Type}})</h3>\r\n</div>\r\n<div class="modal-body  well">\r\n	{{#data}}\r\n	<div class="row-fluid">\r\n		<span class="span3">\r\n		<input type="checkbox" class="chk-test-{{type}}_h chk-{{id}}" testid="{{id}}" /> </span> &nbsp;\r\n		<span class="span3"> {{testname}} </span>\r\n	</div>\r\n		{{/data}}\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn" data-dismiss="modal" aria-hidden="true">Finish</button>\r\n<!--<button class="btn btn-primary btn-Save-Positions">Finish</button> -->\r\n</div>\r\n</div>'}),define("user/collections/gpa",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/gpa",["facade","collections","user/collections/gpa","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/gpa/"+this.user_id:(this.user_id==undefined,"api/user/gpa/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload;n.push({gpa:r.gpa,year:r.year})}}),n}});return i}),define("user/collections/tests",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/tests",["facade","collections","user/collections/tests","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/tests/"+this.user_id:(this.user_id==undefined,"api/user/tests/"+this.user_id+"?id1="+this.user_id+"&standardized="+(this.includeStandard||0)+"&ap="+(this.includeAp||0))},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:r.id,testname:r.name,type:r.test_type,topics:[]};for(var s in r.topics)i.topics.push({topicid:s,name:r.topics[s].name,score:r.topics[s].score==0?"":r.topics[s].score});n.push(i)}}),n}});return i}),define("userresume/collections/academictests",["facade","collections","user/collections/tests","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/academictest/listall/"+this.user_id:(this.user_id==undefined,"api/academictest/listall/0?id1="+this.user_id+"&standardized="+(this.includeStandard||0)+"&ap="+(this.includeAp||0))},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:r.id,testname:r.name,type:r.test_type,topics:[]};if(r.topics!=null)for(var s in r.topics)i.topics.push({topicid:s,name:r.topics[s].name,score:r.topics[s].score||""});n.push(i)}}),n}});return i}),define("userresume/models/test",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"academics_tests_topics_id",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="update"?"api/user/testscore/"+this.users_id+"?id1="+this.users_id:this.action=="save"?"api/user/addtestscore/"+this.users_id+"?id1="+this.users_id:this.action=="delete"?"api/user/testscore/"+this.users_id+"?id1="+this.users_id:"api/user/addtestscore/"},showSuccessMessage:function(e){console.log("showSuccessMessage test"),$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/views/academic",["require","text!userresume/templates/academic.html","text!userresume/templates/gpa.html","text!userresume/templates/test.html","text!userresume/templates/testtopics.html","text!userresume/templates/testlist.html","facade","views","utils","vendor","userresume/collections/gpa","userresume/collections/tests","userresume/collections/academictests","userresume/models/gpa","userresume/models/test"],function(e,t,n,r,i,s){var o,u=e("facade"),a=e("views"),f=a.SectionView,l=e("utils"),c=l.lib.Channel,h=e("vendor"),p=h.Mustache,d=u.$,v=e("userresume/collections/gpa"),m=e("userresume/collections/tests"),g=e("userresume/collections/academictests"),y=e("userresume/models/gpa"),b=e("userresume/models/test"),w=f.extend({events:{"click .edit-gpa":"EditGpa","click .edit-test":"EditTest","click .btn-Add-test":"OpenTestPopUp","change .chk-test-Standardized_h":"AddStandardTest","change .chk-test-AP_h":"AddAPTest","click .btn-finish-test-topic_h":"FinishTest","click .btn-finish-gpa_h":"FinishGpa","blur .txtGpa_h":"SaveGpa","click .btn-delete-gpa":"DeleteGpa","click .btn-Add-gpa":"AddGpa","click .btn-Save-Gpa":"SaveNewGpa","blur .txtTestScore_h":"SaveTestScore","click .btn-delete-test_h":"DeleteTestScore"},controls:{BtnFinishTestTopics:".btn-finish-test-topic_h",BtnEditTest:".edit-test",BtnFinishGpa:".btn-finish-gpa_h",BtnEditGpa:".edit-gpa",BtnSaveGpa:".btn-Save-Gpa",ContainerGpa:"#container-academic-gpa",ContainerStandard:"#container-StandardizedTest",ContainerAP:"#container-ApTest",SectionModalTests:".section-modal-academic-tests_h",SectionTestTopics:".section-test-topics_h",ItemTestTopic:".item-test-topic_h",SectionAddGpa:".section-Add-Gpa",TxtScore:".txtTestScore_h",ModalBox:".tests-modal_h",TxtGpa:".txtGpa_h",TxtGpaYear:".txtGpaYear_h",TxtGpaScore:".txtGpaScore_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistGPA:"No GPAs entered yet.",dataNotExistTests:"No Tests entered yet.",YearScoreIsRequired:"Year And Score Are Required.",MandatoryFieldsTest:"Please enter a score."},initialize:function(e){f.prototype.initialize.call(this,e),o=this,o.setOptions(e),this.init()},render:function(){f.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){o.setupView()},setupView:function(){o.setUpMainView(),o.setUpGpaView(),o.setUpStandardTestView(),o.setUpAPTestView()},setUpMainView:function(){d(o.el).html(o.template)},setUpGpaView:function(){var e={user_id:o.user_id},t=new v(e);t.user_id=o.user_id,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.gpa=t.parseAsRequired();var e=p.to_html(n,{data:o.gpa}),r=d(o.el).find(o.controls.ContainerGpa);r.html(e),parseInt(t.models.length)>0?r.find("a#edit-gpa-btn").css("visibility","visible"):r.find("a#edit-gpa-btn").css("visibility","hidden")})},EditGpa:function(e){d(e.target).parent().find(o.controls.TxtGpa).removeAttr("disabled"),d(e.target).parent().find(o.controls.BtnFinishGpa).fadeIn(),d(e.target).fadeOut()},SaveGpa:function(e){var t=d(e.target).attr("year"),n=d(e.target).val(),r={user_id:o.user_id,gpa:n,year:t},i=new y(r);i.user_id=o.user_id,i.target=d(e.target),i.save()},DeleteGpa:function(e){var t=d(e.target).attr("year"),n={user_id:o.user_id,year:t,id1:1},r=new y(n);r.user_id=o.user_id,r.id1=1,r.action="delete",r.target=d(e.target),r.idAttribute="year",r.destroy({data:{user_id:o.user_id,year:t},success:function(){o.setUpGpaView()}}),d.when(r.request).done(function(){d(e.target).parent().find(o.controls.TxtGpa).val("")})},FinishGpa:function(e){d(e.target).parent().find(o.controls.TxtGpa).attr("disabled","disabled"),d(e.target).parent().find(o.controls.BtnEditGpa).fadeIn(),d(e.target).fadeOut()},AddGpa:function(e){o.$(o.controls.SectionAddGpa).fadeIn().css("display","inline-block")},SaveNewGpa:function(e){var t=o.$(o.controls.SectionAddGpa).find(o.controls.TxtGpaYear).val(),n=o.$(o.controls.SectionAddGpa).find(o.controls.TxtGpaScore).val();if(t==""||n=="")o.$(o.controls.SectionAddGpa).find(o.controls.lblError).html(o.messages.YearScoreIsRequired).fadeIn();else{o.$(o.controls.SectionAddGpa).find(o.controls.lblError).html("").fadeOut();var r={user_id:o.user_id,gpa:n,year:t},i=new y(r);i.user_id=o.user_id,i.target=d(e.target).parent(),i.save(),d.when(i.request).done(function(){o.setUpGpaView()})}},setUpStandardTestView:function(){var e={user_id:o.user_id},t=new m(e);t.user_id=o.user_id,t.includeStandard=1,t.includeAp=0,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.standardTests=t.parseAsRequired();var e="";d.each(o.standardTests,function(t,n){e+=n.id+","});var n=p.to_html(r,{Test_Type:"Standardized",TestIds:e});d(o.el).find(o.controls.ContainerStandard).html(n);var s=p.to_html(i,{Test_Type:"Standardized",data:o.standardTests});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionTestTopics).html(s),o.setUpStandardTestListAllView()})},setUpStandardTestListAllView:function(){var e={user_id:o.user_id},t=new g(e);t.user_id=o.user_id,t.includeStandard=1,t.includeAp=0,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.standardTestsListAll=t.parseAsRequired();if(o.standardTestsListAll.length>0){var e=p.to_html(s,{Test_Type:"Standardized",data:o.standardTestsListAll});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionModalTests).html(e)}else o.$el(o.controls.ContainerStandard).find(o.controls.SectionModalTests).html(o.messages.dataNotExistTests)})},AddStandardTest:function(e){var t=d(e.target).attr("testid");if(d(e.target).is(":checked")){var n=[];d.each(o.standardTestsListAll,function(e,r){r.id==t&&n.push(r)});var r=p.to_html(i,{Test_Type:"Standardized",data:n});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionTestTopics).append(r)}else d(o.el).find(o.controls.ContainerStandard).find(".item-test-"+t).remove()},setUpAPTestView:function(){var e={user_id:o.user_id},t=new m(e);t.user_id=o.user_id,t.includeStandard=0,t.includeAp=1,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.apTests=t.parseAsRequired();var e="";d.each(o.apTests,function(t,n){e+=n.id+","});var n=p.to_html(r,{Test_Type:"AP",TestIds:e});d(o.el).find(o.controls.ContainerAP).html(n);var s=p.to_html(i,{Test_Type:"AP",data:o.apTests});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionTestTopics).html(s),o.setUpAPTestListAllView()})},setUpAPTestListAllView:function(){var e={user_id:o.user_id},t=new g(e);t.user_id=o.user_id,t.includeStandard=0,t.includeAp=1,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.apTestsListAll=t.parseAsRequired();if(o.apTestsListAll.length>0){var e=p.to_html(s,{Test_Type:"AP",data:o.apTestsListAll});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionModalTests).html(e)}else d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionModalTests).html(o.messages.dataNotExistTests)})},AddAPTest:function(e){var t=d(e.target).attr("testid");if(d(e.target).is(":checked")){var n=[];d.each(o.apTestsListAll,function(e,r){r.id==t&&n.push(r)});var r=p.to_html(i,{Test_Type:"Standardized",data:n});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionTestTopics).append(r)}else d(o.el).find(o.controls.ContainerAP).find(".item-test-"+t).remove()},EditTest:function(e){d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.TxtScore).removeAttr("disabled"),d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.BtnFinishTestTopics).fadeIn(),d(e.target).fadeOut()},FinishTest:function(e){d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.TxtScore).attr("disabled","disabled"),d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.BtnEditTest).fadeIn(),d(e.target).fadeOut()},OpenTestPopUp:function(e){var t=d(e.target).attr("testids"),n=t.split(",");d.each(n,function(t,n){o.$(e.target).parent().find(o.controls.ModalBox).find(".chk-"+n).attr("checked","checked")}),o.$(e.target).parent().find(o.controls.ModalBox).modal("show")},SaveTestScore:function(e){var t=d(e.target).attr("topicId"),n=d(e.target).val(),r=d(e.target).attr("initial"),i="save";if(d.trim(n)==""){d(e.target).parent().find(o.controls.lblError).html(o.messages.MandatoryFieldsTest).fadeIn();return}d(e.target).parent().find(o.controls.lblError).html("").fadeOut();var s={id1:o.user_id,academics_topics_id:t,score:n,users_id:o.user_id};r!=""&&(i="update",s.academics_tests_topics_id=t);var u=d(e.target).attr("testscoreid"),a=new b(s);a.users_id=o.user_id,a.action=i,a.target=d(e.target),a.save({success:function(){}}),d.when(a.request).done(function(){d(e.target).attr("initial",n)})},DeleteTestScore:function(e){var t=d(e.target).attr("topicid"),n={users_id:o.user_id,id1:1,academics_tests_topics_id:t},r=new b(n);r.users_id=o.user_id,r.id1=o.user_id,r.academics_tests_topics_id=t,r.action="delete",r.target=d(e.target),r.destroy({data:{users_id:o.user_id,academics_tests_topics_id:t},success:function(){d(e.target).val("").attr("initial","")}}),d.when(r.request).done(function(){d(e.target).parent().find(o.controls.TxtScore).val("")})}});return w}),define("text!userresume/templates/listAwards.html",[],function(){return'{{#data}}\r\n	<div class="section-rdtree-items_h inset-data-entry">\r\n		<div class="row-fluid awards-sports-header"><span class="standard-subsection-header">{{#icon}}<img src="{{icon}}" />{{/icon}}{{sports_name}}</span></div>\r\n		{{#awards}}\r\n		<div class="section-new-award" style="background-color: #eeeeee; border-bottom: 1px solid #ccc;">\r\n			<div class="row-fluid section-new-controls">\r\n				<span class=""><span class="award-labels">Award Name:</span> <input type="text" class="txtAwards_h txt_name_h" value="{{name}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Year Awarded:</span> <input type="text" class="year txtAwards_h txt_year_h" value="{{year}}" disabled="disabled"/></span>\r\n				<span>\r\n					<a href="javascript:void(0)" class="edit edit_award_h"></a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Update_award_h displayNone" sportid="{{sports_id}}" awardid="{{id}}">Save</a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Cancel-Existing_award_h displayNone">Cancel</a>\r\n					<a href="javascript:void(0)" class="remove btn-remove_award_h" awardid="{{id}}"></a>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n\r\n				</span>\r\n\r\n				<span><textarea style="width:90%;" type="text" class="txtAwards_h txt_description_h" disabled="disabled">{{description}}</textarea></span>\r\n\r\n			</div>\r\n		</div>	\r\n		{{/awards}}\r\n	</div>\r\n	{{/data}}'}),define("user/collections/awards",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("userresume/collections/awards",["facade","collections","user/collections/awards","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/awards/"+this.user_id:(this.user_id==undefined,"api/user/awards/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={sports_id:r.id,sports_name:r.name,icon:r.icon,awards:[]};$.each(r.awards,function(e,t){i.awards.push({id:t.id,name:t.name,description:t.description,year:t.year})}),n.push(i)}}),n}});return i}),define("userresume/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){return testpath?testpath+"/api/sport/listall":(this.gender==undefined,"/api/sport/listall/?sport_type="+this.sport_type+"&male="+this.male+"&female="+this.female+"&sport_type_id="+this.sport_type_id)}}),i}),define("userresume/views/awards",["require","text!userresume/templates/awards.html","text!userresume/templates/listAwards.html","facade","views","utils","vendor","userresume/collections/awards","userresume/collections/sports","userresume/models/award"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("userresume/collections/awards"),p=e("userresume/collections/sports"),d=e("userresume/models/award"),v=o.extend({template:t,events:{"click .btn-Add-award_h":"AddNewAward","click .btn-Save_award_h":"SaveNewAward","click .btn-Update_award_h":"UpdateAward","click .btn-Cancel-New":"CancelNew","click .btn-Cancel-Existing_award_h":"CancelExisting","click .btn-remove_award_h":"RemoveAward","click .edit_award_h":"EditAward"},controls:{listContainer:"#section-list-awards",newAwardContainer:".section-new-award",newAwardControls:".section-new-controls",btnAddAwardsExisting:".btn-Add-Existing",btnAddNew:".btn-Add",btnCancelExisting:".btn-Cancel-Existing_award_h",btnRemoveExisting:".btn-remove_award_h",btnUpdateAwardExisting:".btn-Update_award_h",btnEditAward:".edit_award_h",ddlSports:".ddl-sports-awards_h",newControls:".txtAwards_h",txtName:".txt_name_h",txtDescription:".txt_description_h",txtYear:".txt_year_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistAwards:"No Awards Entered Yet.",MandatoryFields:"All fields are mandatory."},initialize:function(e){o.prototype.initialize.call(this,e),r=this,r.setOptions(e),this.init()},render:function(){o.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){r.setupView()},setupView:function(){r.setUpMainView(),r.setUpListView()},setUpMainView:function(){var e=l.to_html(r.template,{});c(r.el).html(e)},setUpListView:function(){var e={user_id:r.user_id},t=new h(e);t.user_id=r.user_id,t.fetch(),c.when(t.request).done(function(){if(t.isError())return;r.awards=t.parseAsRequired();if(r.awards.length>0){var e=l.to_html(n,{data:r.awards});c(r.el).find(r.controls.listContainer).html(e)}else c(r.el).find(r.controls.listContainer).html(r.messages.dataNotExistAwards)})},ClearControls:function(e){console.log(c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls)),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newControls).val(""),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls).fadeOut()},AddNewAward:function(e){r.ClearControls(e);var t=c(e.target).parents(r.controls.newAwardContainer).find(r.controls.ddlSports);c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls).fadeIn();if(r.sports&&r.sports.length>0){r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport");return}var n=new p;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,r.gender=="male"?n.male=1:r.gender=="famale"&&(n.female=0),n.fetch(),c.when(n.request).done(function(){if(n.isError())return;var e=n.toJSON();(e==null||e.length<1)&&r.$(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var i in e)r.sports.push(e[i].payload);r.sort(r.sports,"sport_name",!1),r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport")})},AddExistingAward:function(){console.log("Add Existing")},SaveAward:function(e,t){var n=c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls),i=c(e.target).attr("sportid")||n.find(r.controls.ddlSports).val(),s=n.find(r.controls.txtName).val(),o=n.find(r.controls.txtYear).val(),u=n.find(r.controls.txtDescription).val();if(i==""||i<1||c.trim(s)==""||c.trim(u)==""||c.trim(o)==""){n.find(r.controls.lblError).html(r.messages.MandatoryFields).fadeIn();return}n.find(r.controls.lblError).html("").fadeOut();var a={description:u,name:s,sports_id:i,year:o,users_id:r.user_id},f=0;t=="update"&&(f=c(e.target).attr("awardid"),a.id1=c(e.target).attr("awardid"));var l=new d(a);l.users_id=r.user_id,l.award_id=f,l.action=t,l.target=c(e.target),l.save(),c.when(l.request).done(function(){r.ClearControls(e),r.setUpListView()})},SaveNewAward:function(e){r.SaveAward(e,"save")},EditAward:function(e){c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newControls).removeAttr("disabled"),c(e.target).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnUpdateAwardExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnCancelExisting).fadeIn()},UpdateAward:function(e){r.SaveAward(e,"update")},CancelNew:function(e){r.ClearControls(e)},CancelExisting:function(e){c(e.target).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnUpdateAwardExisting).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnEditAward).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find("textarea, input").attr("disabled","disabled")},RemoveAward:function(e){var t=c(e.target).attr("awardid"),n={id1:t,award_id:t,users_id:r.user_id},i=new d(n);i.id1=t,i.users_id=r.user_id,i.award_id=t,i.action="delete",i.target=c(e.target),i.destroy({success:function(){r.setUpListView()}})}});return v}),define("user/collections/contacts",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}});return i}),define("userresume/collections/contacts",["facade","collections","user/collections/contacts","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/contact/"+this.user_id:(this.user_id==undefined,"api/user/contact/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload;n.push({gpa:r.gpa,year:r.year})}}),n}});return i}),define("userresume/views/contacts",["require","text!userresume/templates/contact.html","facade","views","utils","vendor","userresume/collections/contacts"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/contacts"),h=s.extend({template:t,events:{},controls:{},messages:{dataNotExistContacts:"No Contacts."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.setUpListView()},setUpMainView:function(){},setUpListView:function(){var e={user_id:n.user_id},r=new c(e);r.user_id=n.user_id,r.fetch(),l.when(r.request).done(function(){if(r.isError())return;n.contacts=r.parseAsRequired();if(n.contacts.length>0){var e=f.to_html(t,{data:n.contacts});l(n.el).find(n.el).html(e)}else n.$el(n.controls.ContainerGpa).html(n.messages.dataNotExistContacts)})}});return h}),define("text!userresume/templates/listReferences.html",[],function(){return'\r\n{{#data}}\r\n<div class="section-rdtree-items_h inset-data-entry">\r\n	<div class="row-fluid awards-sports-header"><span class="standard-subsection-header">{{#icon}}<img src="{{icon}}" />{{/icon}}{{sports_name}}</span></div>\r\n\r\n		{{#references}}\r\n		<div class="section-new-reference"  style="background-color: #eeeeee; border-bottom: 1px solid #ccc; padding-bottom: 10px;">\r\n			<div class="row-fluid section-new-controls">\r\n\r\n				<span class=""><span class="award-labels">Reference Name:</span> <input type="text" class="txtReferences_h txt_name_h" value="{{name}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Relationship:</span> <input type="text" class="txtReferences_h txt_relation_h" value="{{relation}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Phone:</span> <input type="text" class="txtReferences_h txt_phone_h" value="{{phone}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Email:</span> <input type="text" class="txtReferences_h txt_email_h" value="{{email}}" disabled="disabled"/></span>\r\n				<span><textarea style="width:90%;" type="text" class="txtReferences_h txt_description_h" disabled="disabled">{{description}}</textarea></span>\r\n				<br />\r\n				<span class="">\r\n					<a href="javascript:void(0)" class="edit edit_reference_h"></a><a href="javascript:void(0)" class="remove btn-remove_reference_h" referenceid="{{id}}"></a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Update_reference_h displayNone" sportid="{{sports_id}}" referenceid="{{id}}">Save</a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Cancel-Existing_reference_h displayNone">Cancel</a>\r\n\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					\r\n				</span>\r\n				</div>\r\n		</div>	\r\n		{{/references}}\r\n	</div>\r\n	{{/data}}'}),define("user/collections/references",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("userresume/collections/references",["facade","collections","user/collections/references","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/references/"+this.user_id:"api/user/references/"+this.user_id+"?id1="+this.user_id},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return console.log("models References",t),t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={sports_id:r.id,sports_name:r.name,icon:r.icon,references:[]};$.each(r.references,function(e,t){i.references.push({id:t.id,name:t.name,description:t.long_description,relation:t.relation,email:t.email,phone:t.phone})}),n.push(i)}}),console.log("del",n),n}});return i}),define("userresume/views/references",["require","text!userresume/templates/references.html","text!userresume/templates/listReferences.html","facade","views","utils","vendor","userresume/collections/references","userresume/collections/sports","userresume/models/reference"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("userresume/collections/references"),p=e("userresume/collections/sports"),d=e("userresume/models/reference"),v=o.extend({template:t,events:{"click .btn-Add-reference_h":"AddNewReference","click .btn-Save_reference_h":"SaveNewReference","click .btn-Update_reference_h":"UpdateReference","click .btn-Cancel-New":"CancelNew","click .btn-Cancel-Existing_reference_h":"CancelExisting","click .btn-remove_reference_h":"RemoveReference","click .edit_reference_h":"EditReference"},controls:{listContainer:"#section-list-references",newReferenceContainer:".section-new-reference",newReferenceControls:".section-new-controls",btnAddReferencesExisting:".btn-Add-Existing",btnAddNew:".btn-Add",btnCancelExisting:".btn-Cancel-Existing_reference_h",btnRemoveExisting:".btn-remove_reference_h",btnUpdateReferenceExisting:".btn-Update_reference_h",btnEditReference:".edit_reference_h",ddlSports:".ddl-sports-references_h",newControls:".txtReferences_h",txtName:".txt_name_h",txtDescription:".txt_description_h",txtYear:".txt_year_h",txtEmail:".txt_email_h",txtPhone:".txt_phone_h",txtRelation:".txt_relation_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistReferences:"No References entered yet.",MandatoryFields:"All Fields are Mandatory."},initialize:function(e){o.prototype.initialize.call(this,e),r=this,r.setOptions(e),this.init()},render:function(){o.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){r.setupView()},setupView:function(){r.setUpMainView(),r.setUpListView()},setUpMainView:function(){var e=l.to_html(r.template,{});c(r.el).html(e)},setUpListView:function(){var e={user_id:r.user_id},t=new h(e);t.user_id=r.user_id,t.fetch(),c.when(t.request).done(function(){if(t.isError())return;r.references=t.parseAsRequired();if(r.references.length>0){var e=l.to_html(n,{data:r.references});c(r.el).find(r.controls.listContainer).html(e)}else c(r.el).find(r.controls.listContainer).html(r.messages.dataNotExistReferences)})},ClearControls:function(e){c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newControls).val(""),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls).fadeOut()},AddNewReference:function(e){r.ClearControls(e);var t=c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.ddlSports);c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls).fadeIn();if(r.sports&&r.sports.length>0){r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport");return}var n=new p;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,r.gender=="male"?n.male=1:r.gender=="famale"&&(n.female=0),n.fetch(),c.when(n.request).done(function(){if(n.isError())return;var e=n.toJSON();(e==null||e.length<1)&&r.$(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var i in e)r.sports.push(e[i].payload);r.sort(r.sports,"sport_name",!1),r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport")})},AddExistingReference:function(){console.log("Add Existing")},SaveReference:function(e,t){var n=c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls),i=c(e.target).attr("sportid")||n.find(r.controls.ddlSports).val(),s=n.find(r.controls.txtName).val(),o=n.find(r.controls.txtDescription).val(),u=n.find(r.controls.txtRelation).val(),a=n.find(r.controls.txtEmail).val(),f=n.find(r.controls.txtPhone).val();if(i==""||i<1||c.trim(s)==""||c.trim(f)==""){n.find(r.controls.lblError).html(r.messages.MandatoryFields).fadeIn();return}n.find(r.controls.lblError).html("").fadeOut();var l={users_id:r.user_id,sports_id:i,name:s,relation:u,email:a,phone:f,long_description:o},h=0;t=="update"&&(h=c(e.target).attr("referenceid"),l.id1=c(e.target).attr("referenceid"));var p=new d(l);p.users_id=r.user_id,p.reference_id=h,p.action=t,p.target=c(e.target),p.save(),c.when(p.request).done(function(){r.ClearControls(e),r.setUpListView()})},SaveNewReference:function(e){r.SaveReference(e,"save")},EditReference:function(e){c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newControls).removeAttr("disabled"),c(e.target).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnUpdateReferenceExisting).fadeIn(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnCancelExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeOut()},UpdateReference:function(e){r.SaveReference(e,"update")},CancelNew:function(e){r.ClearControls(e)},CancelExisting:function(e){c(e.target).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnUpdateReferenceExisting).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnEditReference).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeIn()},RemoveReference:function(e){var t=c(e.target).attr("referenceid"),n={id1:t,reference_id:t,users_id:r.user_id},i=new d(n);i.id1=t,i.users_id=r.user_id,i.reference_id=t,i.action="delete",i.target=c(e.target),i.destroy({success:function(){r.setUpListView()}})}});return v}),define("userresume",["require","text!userresume/templates/layout.html","text!userresume/templates/sentresume.html","text!userresume/templates/basic_info_header.html","text!userresume/templates/rdtree.html","text!userresume/templates/academic.html","text!userresume/templates/awards.html","text!userresume/templates/contact.html","text!userresume/templates/references.html","facade","controller","models","views","utils","profilesetting/models/basic_info","userresume/models/resume","userresume/models/rdtree","userresume/models/gpa","userresume/models/award","userresume/models/contact","userresume/models/reference","profilesetting/views/basic_info","userresume/views/sentresumeview","userresume/views/rdtree","userresume/views/academic","userresume/views/awards","userresume/views/contacts","userresume/views/references"],function(e,t,n,r,i,s,o,u,a){var f,l=e("facade"),c=e("controller"),h=e("models"),p=e("views"),d=e("utils"),v=l.$,m=l._,g=d.debug,y=d.lib.Channel,b=p.LayoutView,w=e("profilesetting/models/basic_info"),E=e("userresume/models/resume"),S=e("userresume/models/rdtree"),x=e("userresume/models/gpa"),T=e("userresume/models/award"),N=e("userresume/models/contact"),C=e("userresume/models/reference"),k=e("profilesetting/views/basic_info"),L=e("userresume/views/sentresumeview"),A=e("userresume/views/rdtree"),O=e("userresume/views/academic"),M=e("userresume/views/awards"),_=e("userresume/views/contacts"),D=e("userresume/views/references"),f=c.extend({cssArr:["/pages/profilesetting/profilesettings.css"],events:{},initialize:function(e){return y("load:css").publish(this.cssArr),m.bindAll(this),e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;if(this.layout)return this.layout;var e=new b({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"});return this.layout=e,this.layout},setupView:function(){var e=this;this.basicInfoModel=new w,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),v.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.setUpSentResumeView(),e.setUpRdTreeView(),e.setUpAcademicView(),e.setUpAwardsView(),e.setUpContactsView(),e.setUpReferenceView()})},setUpBasicView:function(){var e=this;this.basicView=new k({model:new w,template:r,name:"basic-info",destination:"#section-basics-prof-setting",user_id:e.id,id:e.id})},setUpSentResumeView:function(){var e=this;this.sentResumeView=new L({model:new E,template:n,name:"sent-resume",destination:"#section-sent-resume",user_id:e.id,id:e.id}),this.scheme.push(this.sentResumeView),this.layout.render()},setUpRdTreeView:function(){var e=this;this.rdTreeView=new A({model:new S,template:i,name:"rd-tree",destination:"#section-RD-Tree",user_id:e.id}),this.scheme.push(this.rdTreeView),this.layout.render()},setUpAcademicView:function(){var e=this;this.academicView=new O({model:new x,template:s,name:"resume-academic",destination:"#section-academic",user_id:e.id}),this.scheme.push(this.academicView),this.layout.render()},setUpAwardsView:function(){var e=this;this.awardsView=new M({model:new T,template:o,name:"resume-awards",destination:"#section-awards",user_id:e.id}),this.scheme.push(this.awardsView),this.layout.render()},setUpContactsView:function(){var e=this;this.contactsView=new _({model:new N,template:u,name:"resume-contacts",destination:"#section-contacts",user_id:e.id}),this.scheme.push(this.contactsView),this.layout.render()},setUpReferenceView:function(){var e=this;this.referenceView=new D({model:new C,template:a,name:"resume-references",destination:"#section-references",user_id:e.id}),this.scheme.push(this.referenceView),this.layout.render()}});return f}),define("site/models/phrase",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("packages/site/collections/phrases",["facade","collections","site/models/phrase","utils","controller"],function(e,t,n,r,i){var s,o=t.BaseCollection,u=t.ApplicationStates;return _=e._,Channel=r.lib.Channel,s=o.extend({model:n,url:function(){return base_url+"api/phrase/listall"},saveToLocalStorage:function(e){var t=i.prototype.appStates;t&&(t.add({name:"phrases",data:this.toJSON(),storage:"localStorage",expires:new Date(Date.now()+3154e5)}),t.save("phrases")),console.log(t.findByNameInStorage("phrases"))},fetchSuccess:function(e,t){console.log("fetchsuccess"),e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.saveToLocalStorage(e)}}),s}),define("text!usercontrols/tag/templates/layout.html",[],function(){return'<div class="well-large well span3">\r\n	<h4>Batch Tag</h4>\r\n	<div class="section-Add-Sports_h">\r\n	<div class="row-fluid">\r\n		Select Sport:\r\n	</div>\r\n	<div class="row-fluid">\r\n		\r\n		<select class="ddl-tag-sports_h"></select>\r\n		<span class="alert alert-danger displayNone field-message"></span> \r\n	<br/>\r\n	<button class="btn btn-primary btn-tag-sport_h displayNone">Done</button>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="div-tag-list_h">		\r\n	<div class="section-sports_h displayNone">\r\n		<label class="lbl-tag-sport-name_h"></label><span>\r\n			<button class="btn btn-tag-edit-sport_h">Edit</button></span>\r\n	</div>\r\n	\r\n	<div class="section-team_h displayNone">\r\n		<strong>Teams :</strong> <br/>\r\n		<label class="lbl-tag-team-name_h"></label><span><button class="btn btn-tag-edit-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="section-tag-team_h displayNone">\r\n		Tag a Team : \r\n		<br/>\r\n		<input type="text" class="txt-tag-team-state_h" placeholder="Enter State" />\r\n		<input type="text" class="txt-tag-team-city_h displayNone" placeholder="Enter City" />\r\n		<input type="text"class="txt-tag-team-school_h displayNone" placeholder="Enter Team" />\r\n	<!--	<select class="ddl-tag-team-level_h displayNone"></select>\r\n		<select class="ddl-tag-team-season_h displayNone"></select> -->\r\n	 	<span class="alert alert-danger displayNone field-message"></span> \r\n		<button class="btn btn-primary btn-tag-team-Done_h displayNone">Done</button>\r\n		\r\n	</div>\r\n	\r\n	<div class="section-tag-player_h displayNone">\r\n		Tag a Player : \r\n		<br/>\r\n		<div class="section-tag-player-input_h">\r\n		<input type="text" class="txt-tag-player-name_h" placeholder="Enter Name" />\r\n		</div>\r\n		<span class="btn-tag-add-player_h strong">\r\n			+\r\n		</span>\r\n		<br/>\r\n		<button class="btn btn-primary btn-tag-player-Done_h">Done</button>\r\n	</div>\r\n	\r\n	<div class="section-team-players_h displayNone">\r\n		<strong>Players :</strong> <br/>\r\n		<label class="lbl-tag-players-name_h"></label><span class="displayNone"><button class="btn btn-tag-edit-players-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	\r\n	<div class="section-tag-game_h displayNone">\r\n		<strong>Tag a Game : </strong>\r\n		<select class="ddl-tag-game_h"></select>\r\n		<br/>\r\n		<span class="alert alert-danger displayNone field-message"></span>\r\n		<br/>\r\n		<button class="btn btn-primary btn-tag-game-Done_h displayNone">Done</button>\r\n	</div>\r\n	<div class="section-team-games_h displayNone">\r\n		<strong>Games :</strong> <br/>\r\n		<label class="lbl-tag-games-name_h"></label><span class="displayNone"><button class="btn btn-tag-edit-games-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	\r\n	<div class="section-link_h displayNone">\r\n		Tag:\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-team_h">Team</a>\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-player_h displayNone">Player</a>\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-Game_h displayNone">Game</a>\r\n		<br/>\r\n		<span class="alert alert-danger displayNone field-message"></span>\r\n	</div>\r\n	\r\n	<button class="btn btn-primary btn-tag-Finish_h">Finish</button>\r\n</div>'}),define("usercontrols/tag/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("usercontrols/tag/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/sport/listall/"}}),i}),define("sportorg/collections/sports_listall",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/sport/listall/"}}),i}),define("usercontrols/tag/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+"/api/org/search/"+this.sport_id:"/api/org/search?states_id="+e.states_id+"&org_name="+e.org_name},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("usercontrols/tag/collections/teams",["facade","collections","sportorg/collections/teams","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.team_name&&(e+="team_name="+this.team_name),this.team_name&&(e+="&searchtext="+this.team_name),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.sports_id&&(e+="&sports_id="+this.sports_id),"/api/team/search?"+e}}),i}),define("models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("location/collections/cities",["facade","collections","models/common","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){if(this.city_name==undefined)return"/api/city/search";var e="?city_name="+this.city_name;return this.states_id&&(e+="&states_id="+this.states_id),"/api/city/search/"+e},fetchSuccess:function(e,t){e.reset();var n=t.payload;if(n!=null)for(i=0;i<(n.length>10?10:n.length);i++){var r={};r.city=n[i].name,r.county=n[i].county.name,r.state=n[i].county.state.name,r.id=n[i].id,e.push(r)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("user/collections/users",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,url:function(){var e="";return this.user_name&&(e+="searchtext="+this.user_name),this.sports_id&&(e+="&sports_id="+this.sports_id),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.team_id&&(e+="&team_id="+this.cities_id),"/api/user/search?"+e},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("usercontrols/tag/collections/games",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.sports_id&&(e+="sports_id="+this.sports_id+"&"),this.teams_id&&(e+="teams_id="+this.teams_id+"&"),this.states_id&&(e+="states_id="+this.states_id+"&"),this.cities_id&&(e+="cities_id="+this.cities_id+"&"),"/api/game/search/0?"+e}}),i}),define("usercontrols/tag/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("usercontrols/tag/views/main",["require","text!usercontrols/tag/templates/layout.html","facade","views","utils","vendor","usercontrols/tag/models/basic_info","sportorg/collections/sports_listall","location/collections/states","usercontrols/tag/collections/schools","usercontrols/tag/collections/teams","location/collections/cities","user/collections/users","usercontrols/tag/collections/games","usercontrols/tag/models/complevel"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrols/tag/models/basic_info"),h=e("sportorg/collections/sports_listall"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrols/tag/collections/schools"),m=e("user/collections/users"),g=e("usercontrols/tag/collections/games"),y=e("usercontrols/tag/collections/teams"),b=e("usercontrols/tag/models/complevel"),w=s.extend({template:t,tagData:{Game:{},Player:{},Team:{}},events:{"change .ddl-tag-sports_h":"changeSport","click .btn-tag-sport_h":"sportsDone","click .btn-tag-edit-sport_h":"editSport","click .link-tag-team_h":"showTeamSection","keyup .txt-tag-team-state_h":"keyupState","blur .txt-tag-team-state_h":"changeState","keyup .txt-tag-team-city_h":"keyupCity","blur .txt-tag-team-city_h":"changeCity","keyup .txt-tag-team-school_h":"keyupSchool","blur .txt-tag-team-school_h":"changeSchool","change .ddl-tag-team-level_h":"changeCompLevel","change .ddl-tag-team-season_h":"changeSeason","click .btn-tag-team-Done_h":"doneTagTeamTagging","click .link-tag-player_h":"showPlayer","click .btn-tag-add-player_h":"addPlayer","keyup .txt-tag-player-name_h":"keyUpPlayer","change .txt-tag-player-name_h":"setPlayerId","click .btn-tag-player-Done_h":"donePlayerTagging","click .link-tag-Game_h":"showGameSection","click .btn-tag-game-Done_h":"doneGameTagging","change .ddl-tag-game_h":"changeGame","click .btn-tag-Finish_h":"finishTagging"},controls:{secAddSports:".section-Add-Sports_h",divTagList:".div-tag-list_h",secSports:".section-sports_h",lblSportName:".lbl-tag-sport-name_h",btnEditSport:".btn-tag-edit-sport_h",btnSportsDone:".btn-tag-sport_h",ddlSports:".ddl-tag-sports_h",secTeam:".section-team_h",lblTeamName:".lbl-tag-team-name_h",secTagTeam:".section-tag-team_h",txtTeamState:".txt-tag-team-state_h",txtTeamCity:".txt-tag-team-city_h",txtTeamSchool:".txt-tag-team-school_h",ddlTeamLevel:".ddl-tag-team-level_h",ddlTeamSeason:".ddl-tag-team-season_h",btnTeamDone:".btn-tag-team-Done_h",secPlayer:".section-tag-player_h",secPlayerInput:".section-tag-player-input_h",txtPlayerName:".txt-tag-player-name_h",additionalPlayer:".additional_h",btnAddPlayer:".btn-tag-add-player_h",btnPlayerDone:".btn-tag-player-Done_h",sectionSelectedPlayers:".section-team-players_h",lblPlayerNames:".lbl-tag-players-name_h",secGame:".section-tag-game_h",ddlGame:".ddl-tag-game_h",btnGameDone:".btn-tag-game-Done_h",secFooterLinks:".section-link_h",lnkTeam:".link-tag-team_h",lnkPlayer:".link-tag-player_h",lnkGame:".link-tag-Game_h",sectionSelectedGames:".section-team-games_h",lblGameNames:".lbl-tag-games-name_h",btnTeamFinish:".btn-tag-Finish_h",fieldMessage:".field-message",fieldError:".field-error"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid"},inlineTemplates:{sportOption:'{{#sports}}<option value="{{sport_id}}">{{sport_name}}</option>{{/sports}}',compLevelOption:'{{#levels}}<option value="{{complevel_id}}">{{complevel_name}}</option>{{/levels}}',seasonOption:'{{#seasons}}<option value="{{season_id}}">{{season_name}}</option>{{/seasons}}',addPlayerText:'</br><input type="text" class="txt-tag-player-name_h additional_h" placeholder="Enter Name" value="" />'},messages:{dataNotExist:"Data Does Not Exist . ",dataNotExistAwards:"Data Does Not Exists For Awards.",MandatoryFields:"Sports Id, Name , Year are mandatory.",selectOrganization:"Please Select High School Or Club & Season . ",selectTeamAndSports:"Please Select Both Sports And A Team . "},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.fillSports()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e)},fillSports:function(){if(!(n.sports&&n.sports.length>0)){var e=new h;e.processResult=function(e){n.SetupSportsView(e)},e.fetch()}},SetupSportsView:function(e){var t=e.toJSON();if(t==null||t.length<1){l(n.destination).find(n.controls.ddlSports).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.sports=[];for(var r in t)n.sports.push(t[r].payload);n.sort(n.sports,"sport_name",!1),n.setDropdownOptions(n.sports,"sport_name","sport_id",l(n.destination).find(n.controls.ddlSports),"Select Sport")},changeSport:function(e){l(e.target).val()&&l(e.target).val()!=0?l(e.target).parent().find(n.controls.btnSportsDone).fadeIn():l(e.target).parent().find(n.controls.btnSportsDone).fadeOut()},sportsDone:function(e){n.sportsId=l(n.destination).find(n.controls.ddlSports).val(),l(n.destination).find(n.controls.lblSportName).html(l(n.destination).find(n.controls.ddlSports+" option:selected").text()),l(e.target).parents(n.controls.secAddSports).fadeOut(),l(n.destination).find(n.controls.secSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()},editSport:function(){l(n.destination).find(n.controls.secSports).fadeOut(),l(n.destination).find(n.controls.secAddSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeOut(),l(n.destination).find("*").show(),l(n.destination).find(".displayNone").hide(),l(n.destination).find("input").val(""),l(n.destination).find(n.controls.additionalPlayer).remove()},showTeamSection:function(e){l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secTagTeam).fadeIn(),l(e.target).hide()},keyupState:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.stateId),n.CheckTeamControlsVisibility();var i=new p;i.state_name=l(e.target).val(),n.stateFetchRequest=n.stateFetchRequest||[],n.stateFetchRequest.push(n.cityFetchRequest||[]),n.stateFetchRequest.push(n.teamFetchRequest||[]),n.stateFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.stateFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.states=[];for(var s in t)n.states.push(t[s].payload);n.states.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeState(e)},changeState:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.stateId);var r=!1;n.states_id="",n.states&&n.states.forEach(function(i,s){i["name"]==t&&(r=!0,n.states_id=i.id,l(e.target).attr(n.attributes.stateId,n.states_id),l(e.target).parent().find(n.controls.txtTeamCity).removeAttr("disabled").attr(n.attributes.stateId,n.states_id).fadeIn(),l(e.target).parent().find(n.controls.txtTeamSchool).removeAttr("disabled").attr(n.attributes.stateId,n.states_id))}),r||(n.states_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.stateId).fadeOut(),l(n.destination).find(n.controls.txtTeamCity).attr("disabled","disabled").removeAttr(n.attributes.stateId).fadeOut()),n.CheckTeamControlsVisibility()},keyupCity:function(e){var t=l(e.target).val(),r=[];if(t.length>2)if(n.isValidAutoCompleteKey(e)==1){try{n.$(e.target).autocomplete("destroy")}catch(i){}l(e.target).removeAttr(n.attributes.cityId),n.CheckTeamControlsVisibility();var s=new d;s.states_id=n.states_id,s.city_name=l(e.target).val(),console.log("City Request Abort Request Function AddGame/Main.js"),n.cityFetchRequest=n.cityFetchRequest||[],n.cityFetchRequest.push(n.teamFetchRequest||[]),n.cityFetchRequest=n.abortRequest(n.cityFetchRequest);var o=s.fetch();n.cityFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.cities=[];for(var i in t)n.cities.push(t[i]);n.cities.forEach(function(e,t){r.push(e.city)}),n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeCity(e)},changeCity:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.cityId);var r=!1;n.city_id="",n.cities&&n.cities.forEach(function(i,s){i["city"]==t&&(r=!0,n.city_id=i.id,l(e.target).attr(n.attributes.cityId,n.city_id))}),r?l(n.destination).find(n.controls.txtTeamSchool).removeAttr("disabled"):(n.city_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.cityId).fadeOut()),n.CheckTeamControlsVisibility()},keyupSchool:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility();var s=new y;s.states_id=l(e.target).attr(n.attributes.stateId),s.sports_id=l(n.destination).find(n.controls.ddlSports).val(),s.team_name=t,console.log("Team Request Abort Request Function"),n.TeamFetchRequest=n.abortRequest(n.TeamFetchRequest);var o=s.fetch();n.TeamFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.teams=[];for(var i in t)n.teams.push(t[i].payload);n.teams.forEach(function(e,t){r.push(e.team_name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeSchool(e)},changeSchool:function(e){var t=l(e.target).val(),r=!1;n.team_id=0,n.teams&&n.teams.forEach(function(i,s){var o=i.team_name;o==t&&(r=!0,n.team_id=i.id,l(e.target).attr(n.attributes.teamId,n.team_id))}),r||l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility()},CheckTeamControlsVisibility:function(){var e=l(n.destination).find(n.controls.txtTeamState).attr(n.attributes.stateId);e&&e!=""&&e!=0?l(n.destination).find(n.controls.txtTeamCity).show():l(n.destination).find(n.controls.txtTeamCity).val("").removeAttr(n.attributes.cityId).hide(),e=l(n.destination).find(n.controls.txtTeamCity).attr(n.attributes.cityId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.txtTeamSchool).show():l(n.destination).find(n.controls.txtTeamSchool).val("").removeAttr(n.attributes.teamId).hide(),e=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnTeamDone).show():l(n.destination).find(n.controls.btnTeamDone).hide()},doneTagTeamTagging:function(e){var t=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId);n.team_id=t;var r=l(n.destination).find(n.controls.ddlTeamSeason).val(),i={};if(t&&t!=""&&t!=0&&t&&t!=""&&t!=0){var s=l(n.destination).find(n.controls.txtTeamSchool).val();i.teamName=s,i.teamId=t,l(n.destination).find(n.controls.lblTeamName).html(s),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secTeam).fadeIn(),l(n.destination).find(n.controls.lnkPlayer).fadeIn(),l(n.destination).find(n.controls.lnkGame).fadeIn()}else n.$(e.target).parents(n.controls.secTagTeam).find(n.controls.fieldMessage).html(n.messages.selectOrganization).stop().fadeIn();n.tagData.Team=i},showPlayer:function(e){l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeIn()},addPlayer:function(e){l(n.destination).find(n.controls.secPlayerInput).append(n.inlineTemplates.addPlayerText)},keyUpPlayer:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.playersId);var i=new m;i.user_name=t,i.states_id=n.states_id,i.sports_id=l(n.destination).find(n.controls.ddlSports).val(),console.log("Player Request Abort Request Function"),n.PlayerFetchRequest=n.abortRequest(n.PlayerFetchRequest);var s=i.fetch();n.PlayerFetchRequest.push(s),l.when(i.request).done(function(){var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.users=[];for(var s in t)n.users.push(t[s].payload);n.users.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.setPlayerId(e),n.isEnterKey(e)&&n.addPlayer(e);else l(e.target).removeAttr(n.attributes.playersId)},setPlayerId:function(e){if(n.users){var t=l(e.target).val().toLowerCase();for(var r in n.users)if(n.users[r].name.toLowerCase()==t){l(e.target).attr(n.attributes.playersId,n.users[r].id);return}}},donePlayerTagging:function(e){var t=[],r="";l(n.destination).find(n.controls.txtPlayerName).each(function(){l(this).attr(n.attributes.playersId)>0&&(t.push({name:l(this).val(),user_id:l(this).attr(n.attributes.playersId)}),r+=","+l(this).val())});if(t.length>0){var i={players:t};n.tagData.Player=i;var s=l(n.destination).find(n.controls.sectionSelectedPlayers);l(s).find(n.controls.lblPlayerNames).html(r),l(s).fadeIn(),l(n.destination).find(n.controls.secPlayer).fadeOut()}else{l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectPlayer).fadeIn();var s=l(n.destination).find(n.controls.sectionSelectedPlayers);l(s).find(n.controls.lblPlayerNames).html(""),l(s).fadeOut()}},showGameSection:function(e){n.bindGamesData(e),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.secGame).fadeIn()},bindGamesData:function(e){var t=l(n.destination).find(n.controls.ddlSports).val();if(n.sportsId){var r=new g;r.states_id=n.states_id,r.cities_id=n.city_id,r.sports_id=n.sportsId,r.teams_id=n.team_id,l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html("").fadeOut(),r.processResult=function(e){n.SetupGamesView(e)},console.log("Team Request Abort Request Function"),n.GameFetchRequest=n.abortRequest(n.GameFetchRequest);var i=r.fetch();n.GameFetchRequest.push(i)}else l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectTeamAndSports).fadeIn()},SetupGamesView:function(e){var t=e.toJSON();if(t==null||t.length<1){l(n.destination).find(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.games=[];for(var r in t)n.games.push(t[r].payload);n.sort(n.games,"game_name",!1),n.setDropdownOptions(n.games,"game_name","id",l(n.destination).find(n.controls.ddlGame),"Select Game")},changeGame:function(e){var t=l(e.target).val();t&&t!=""&&t!=0?l(e.target).parents(n.controls.secGame).find(n.controls.btnGameDone).fadeIn():l(e.target).parents(n.controls.secGame).find(n.controls.btnGameDone).fadeOut()},doneGameTagging:function(e){var t=this,n=l(e.target).parents(t.controls.secGame).find(t.controls.ddlGame).val(),r="";if(n&&n!=""&&n!=0){r=l(e.target).parents(t.controls.secGame).find(t.controls.ddlGame+" option:selected").text();var i={game:{game_id:n,game_name:r}};t.tagData.Game=i;var s=l(t.destination).find(t.controls.sectionSelectedGames);l(s).find(t.controls.lblGameNames).html(r),l(s).fadeIn(),l(t.destination).find(t.controls.secGame).fadeOut()}else{var s=l(t.destination).find(t.controls.sectionSelectedGames);l(s).find(t.controls.lblGameNames).html(""),l(s).fadeIn()}},finishTagging:function(){u(n.channel).publish(this.tagData)}});return w}),define("usercontrols/tag/tag",["require","text!usercontrols/tag/templates/layout.html","facade","controller","models","views","usercontrols/tag/models/basic_info","usercontrols/tag/collections/sports","usercontrols/tag/views/main"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("usercontrols/tag/models/basic_info"),d=e("usercontrols/tag/views/main"),n=i.extend({cssArr:["/usercontrols/tag/tag.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.gender&&(this.gender=e.gender),this.init(),this},init:function(){this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},setupLayout:function(){console.log("Set Up Layout Tag");if(this.layout)return this.layout;var e=new h({scheme:this.scheme,destination:"#main",template:"",displayWhen:"ready"});return this.layout=e,this.layout},setUpMainView:function(){console.log("Set Up Main View Tag"),c("tag-team-success").subscribe(this.tagFunction);var e=this;this.tagView=new d({model:new p,template:t,name:"tag-main",destination:"#main",user_id:e.id,channel:"tag-team-success"}),this.scheme.push(this.tagView),this.layout.render()},tagFunction:function(e){alert(JSON.stringify(e))}});return n}),define("text!usercontrols/addgame/templates/layout.html",[],function(){return'<div class="well-large well span6">\r\n	<h4>Add Game</h4>\r\n	<div class="section-Add-Sports_h">\r\n		<div class="section-game-date_h">\r\n			<input type="text" class="txt-game-date_h" placeholder="Enter Date" readonly="readonly" />\r\n			<!-- <input type="text" class="txt-game-time_h hasDatepicker"  placeholder="Enter Time" readonly="readonly"  /> -->\r\n			<!-- <select class="ddl-time-period_h">\r\n			<option value="AM">AM</option>\r\n			<option value="PM">PM</option>\r\n			</select>	 -->\r\n			<span class="alert alert-danger displayNone field-message"></span>\r\n		</div>\r\n\r\n		<div class="row-fluid">\r\n			Select Sport:\r\n		</div>\r\n		<div class="row-fluid section-game-sports_h">\r\n\r\n			<select class="ddl-game-sports_h"></select>\r\n			<span class="alert alert-danger displayNone field-message"></span>\r\n			<br/>\r\n		</div>\r\n\r\n	</div>\r\n	<div class="section-game-teams_h team-one_h displayNone">\r\n		Select Team 1 :\r\n		<select class="ddl-game-userteams_h"></select>\r\n\r\n		<a href="javascript:void(0)" class="btn-new-team-game_h">Team not listed ?</a>\r\n		<div class="section-new-team_h">\r\n			<!-- <input type="text" class="txt-game-state_h" placeholder="Enter State" />\r\n			<input type="text" class="txt-game-city_h displayNone" placeholder="Enter City" /> -->\r\n			<input type="text"class="txt-game-team_h displayNone" placeholder="Enter Team" />\r\n		</div>\r\n		<div class="section-score_h">\r\n			Score :\r\n			<input type="text" class="txt-score-team_h" placeholder="Enter Score" />\r\n		</div>\r\n		<div class="section-game-radio_h">\r\n			<span class="alert alert-danger displayNone field-message"></span>\r\n			<input type="radio" name="rdo-team1_h" value="home" class="rdo-game-location_h rdo-game-location-one-home_h" team="one">\r\n			home &nbsp; &nbsp;\r\n			<input type="radio" name="rdo-team1_h" value="away" class="rdo-game-location_h" team="one">\r\n			away\r\n		</div>\r\n	</div>\r\n\r\n	<div class="secction-individual-game_h displayNone">\r\n		<input type="text"class="txt-individual-game_h" placeholder="Enter Game" />\r\n		<input type="text"class="txt-individual-location_h displayNone" placeholder="Enter Location Id"  />\r\n		<br/>\r\n		<span class="alert alert-warning displayNone field-message"></span>\r\n		<br/>\r\n		<button class="btn btn-primary btn-game-individual-Finish_h floatRight displayNone">\r\n			Go There !\r\n		</button>\r\n		<button class="btn btn-primary btn-game-individual-Create_h floatRight displayNone">\r\n			Create !\r\n		</button>\r\n	</div>\r\n\r\n	<div class="section-game-teams_h team-two_h displayNone">\r\n		Select Team 2 :\r\n		<select class="ddl-game-userteams_h"></select>\r\n\r\n		<a href="javascript:void(0)" class="btn-new-team-game_h">Team not listed ?</a>\r\n		<div class="section-new-team_h">\r\n			<!-- <input type="text" class="txt-game-state_h" placeholder="Enter State" />\r\n			<input type="text" class="txt-game-city_h displayNone" placeholder="Enter City" /> -->\r\n			<input type="text"class="txt-game-team_h displayNone" placeholder="Enter Team" />\r\n		</div>\r\n		<div class="section-score_h">\r\n			Score :\r\n			<input type="text" class="txt-score-team_h" placeholder="Enter Score" />\r\n		</div>\r\n		<div class="section-game-radio_h">\r\n			<span class="alert alert-danger displayNone field-message"></span>\r\n			<input type="radio" name="rdo-team2_h" value="home" class="rdo-game-location_h rdo-game-location-two-home_h"  team="two">\r\n			\r\n			home &nbsp; &nbsp;\r\n			<input type="radio" name="rdo-team2_h" value="away" class="rdo-game-location_h"   team="two">\r\n			away\r\n		</div>\r\n	</div>\r\n\r\n	<div class="section-main-location_h displayNone">\r\n		<h4>Location : </h4>\r\n		<span class="alert alert-danger displayNone field-message"></span>\r\n		<input type="text" class="txt-game-location-id_h displayNone" >\r\n		<div class="div-game-location_h">\r\n\r\n		</div>\r\n	</div>\r\n	<button class="btn btn-primary btn-game-Finish_h floatRight displayNone">\r\n		Create\r\n	</button>\r\n</div>'}),define("user/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports_users",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/user/sports/"+this.user_id},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:r.id,sport_id:r.sport_id,sport_name:r.sport_name,team_type:r.team_type};n.push(i)}}),n}}),i}),define("usercontrols/addgame/collections/teams",["facade","collections","sportorg/collections/teams","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.team_name&&(e+="searchtext="+this.team_name),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.sports_id&&(e+="&sports_id="+this.sports_id),"/api/team/search?"+e}}),i}),define("usercontrols/addgame/collections/teams_user",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/user/teams/"+this.user_id+"?sport_id="+this.sports_id},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:null,fulladdress:""};r&&r.org_sport_link_obj&&r.org_sport_link_obj.org&&r.org_sport_link_obj.org.locations&&(i=r.org_sport_link_obj.org.locations);var s={team_id:r.id,team_name:r.team_name,location_id:i.id,location_name:i.full_address};n.push(s)}}),n}}),i}),define("usercontrols/addgame/collections/games_search",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.game_name&&(e+="searchtext="+this.game_name),this.sports_id&&(e+="&sports_id="+this.sports_id),"/api/game/search?"+e}}),i}),define("usercontrols/addgame/models/team",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({parseAsRequired:function(e){var t=this,n={};if(e!=null&&e.payload!=null){var r=e.payload,i={id:null,fulladdress:""};r&&r.org_sport_link_obj&&r.org_sport_link_obj.org&&r.org_sport_link_obj.org.locations&&(i=r.org_sport_link_obj.org.locations),n={team_id:r.id,team_name:r.team_name,location_id:i.id,location_name:i.full_address}}return n}}),n}),define("usercontrols/addgame/models/team_add",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"/api/team/game/"+this.teams_id+"?games_id="+this.games_id}}),n}),define("usercontrols/addgame/models/game",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"game_id",url:function(){return"/api/game/add/"+this.game_id}}),n}),define("usercontrols/addgame/views/main",["require","text!usercontrols/addgame/templates/layout.html","facade","views","utils","vendor","user/models/basic_info","sportorg/collections/sports_users","location/collections/states","usercontrols/addgame/collections/teams","location/collections/cities","usercontrols/addgame/collections/teams_user","usercontrols/addgame/collections/teams","usercontrols/addgame/collections/games_search","usercontrols/addgame/models/team","usercontrols/addgame/models/team_add","usercontrols/addgame/models/game"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrols/tag/models/basic_info"),h=e("sportorg/collections/sports_users"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrols/addgame/collections/teams_user"),m=e("usercontrols/addgame/collections/teams"),g=e("usercontrols/addgame/models/team"),y=e("usercontrols/addgame/models/team_add"),b=e("usercontrols/addgame/models/game"),w=e("usercontrols/addgame/collections/games_search"),E=s.extend({template:t,gameData:{},teams:[],events:{"change .ddl-game-sports_h":"changeSport","keyup .txt-game-state_h":"keyupState","blur .txt-game-state_h":"changeState","keyup .txt-game-city_h":"keyupCity","blur .txt-game-city_h":"changeCity","keyup .txt-game-team_h":"keyupTeam","blur .txt-game-team_h":"changeTeam","keyup .txt-individual-game_h":"keyupIndividualGame","blur .txt-individual-game_h":"changeindividualGame","change .ddl-game-userteams_h":"changeUserTeam","click .btn-new-team-game_h":"showAddTeam","click .rdo-game-location_h":"showLocation","click .btn-game-Finish_h":"finishGame","blur .txt-game-date_h":"CheckTeamControlsVisibility","click .btn-game-individual-Create_h":"createIndividualEvent"},controls:{sectionAddSports:".section-Add-Sports_h",sectionDate:".section-game-date_h",txtGameDate:".txt-game-date_h",txtGameTime:".txt-game-time_h",ddlTimePeriod:".ddl-time-period_h",ddlSports:".ddl-game-sports_h",sectionTeams:".section-game-teams_h",ddlUserTeams:".ddl-game-userteams_h",btnNewTeam:".btn-new-team-game_h",sectionNewTeam:".section-new-team_h",txtState:".txt-game-state_h",txtCity:".txt-game-city_h",txtTeam:".txt-game-team_h",txtScore:".txt-score-team_h",btnFinish:".btn-game-Finish_h",sectionTeamOne:".team-one_h",sectionTeamTwo:".team-two_h",sectionScore:".section-score_h",sectionRadio:".section-game-radio_h",rdoTeamOne:".rdo-game-location-one-home_h",rdoTeamTwo:".rdo-game-location-two-home_h",rdoLocation:".rdo-game-location_h",sectionMainLocation:".section-main-location_h",sectionLocation:".div-game-location_h",txtLocationId:".txt-game-location-id_h",sectionIndividual:".secction-individual-game_h",txtIndividualGame:".txt-individual-game_h",btnIndividualFinish:".btn-game-individual-Finish_h",txtIndividualLocation:".txt-individual-location_h",btnIndividualGameCreate:".btn-game-individual-Create_h",fieldMessage:".field-message",secSports:".section-game-sports_h"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid",sportId:"sportid",locationId:"locationid",gameId:"gameid"},inlineTemplates:{},messages:{dataNotExist:"Data Does Not Exist . ",selectDateAndTime:"Select Date And Time",selectTeam:"Select Team",selectScore:"Enter Score",selectLocation:"select location",selectLocationType:"select location type",gameFound:"Sweet ! This Event Already Exists ! ",enterEventName:"Enter event name",selectSport:"Select Sport"},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this),l(n.el).find(n.controls.txtGameDate).datetimepicker({timeFormat:"hh:mm tt",showTimezone:!0,changeMonth:!0,changeYear:!0})},setOptions:function(e){this.user_id=e.user_id;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel,this.sports_id=e.sports_id||null,this.team_id=e.teams_id||null},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.fillSports()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e)},fillSports:function(){if(n.sports&&n.sports.length>0)n.SetupSportsView(orgs_id,destination);else{var e=new h;e.user_id=n.user_id,e.processResult=function(t){var r=e.parseAsRequired();n.SetupSportsView(r)},e.fetch()}},SetupSportsView:function(e){if(e==null||e.length<1){l(n.destination).find(n.controls.ddlSports).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.sports=e,n.sort(n.sports,"sport_name",!1),n.setDropdownOptions(n.sports,"sport_name","sport_id",l(n.destination).find(n.controls.ddlSports),"Select Sport");if(n.sports_id)for(var t in n.sports)n.sports[t].sport_id==n.sports_id&&(l(n.destination).find(n.controls.ddlSports).val(n.sports_id),l(n.destination).find(n.controls.ddlSports).trigger("change"),n.CheckTeamControlsVisibility())},changeSport:function(e){l(e.target).val()&&l(e.target).val()!=0?(l(e.target).parents(n.destination).find(n.controls.sectionTeams).show(),l(e.target).parents(n.destination).find(n.controls.btnFinish).fadeIn(),l(n.destination).find("input").attr(n.attributes.sportId,l(e.target).val()),n.fillTeams(l(e.target).val())):(l(e.target).parents(n.destination).find(n.controls.btnFinish).fadeOut(),l(e.target).parents(n.destination).find(n.controls.sectionTeams).fadeOut(),l(n.destination).find("input").removeAttr(n.attributes.stateId)),n.CheckTeamControlsVisibility()},setFirstTeam:function(){var e=!1;if(n.team_id){for(var t in n.teams)n.teams[t].team_id==n.team_id&&(l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.ddlUserTeams).val(n.teams[t].team_id),e=!0);if(!e){var r=new g;r.id=n.team_id,r.fetchSuccess=function(e,t){var i=r.parseAsRequired(t);n.setSelectedTeam(i)},r.fetch()}n.CheckTeamControlsVisibility()}},setSelectedTeam:function(e){if(e){var t=e.team_name,r=e.id;l(n.destination).find(n.controls.sectionTeamOne).find("input").attr(n.attributes.teamId,r),l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtTeam).val(t).show()}},fillTeams:function(e){var t=new v;t.user_id=n.user_id,t.sports_id=e,t.processResult=function(e){var r=t.parseAsRequired();n.setUpUserTeams(r)};var r=t.fetch()},setUpUserTeams:function(e){if(e==null){l(n.destination).find(n.controls.ddlUserTeams).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.teams=e,n.sort(n.teams,"team_name",!1),n.setDropdownOptions(n.teams,"team_name","team_id",l(n.destination).find(n.controls.ddlUserTeams),"Select Team"),n.setFirstTeam()},changeUserTeam:function(e){l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).hide(),l(e.target).parents(n.controls.sectionTeams).find("input").attr(n.attributes.teamId,l(e.target).val()),l(e.target).parents(n.controls.sectionTeams).find("input:checked").removeAttr("checked"),n.showLocation()},showAddTeam:function(e){l(e.target).parents(n.controls.sectionTeams).find(n.controls.ddlUserTeams).val(""),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).show(),l(e.target).parents(n.controls.sectionTeams).find("input").removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find("input:checked").removeAttr("checked"),n.showLocation()},keyupState:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.stateId),n.CheckTeamControlsVisibility();var i=new p;i.state_name=l(e.target).val(),console.log("State Request Abort Request Function AddGame/Main.js"),n.stateFetchRequest=n.stateFetchRequest||[],n.stateFetchRequest.push(n.cityFetchRequest||[]),n.stateFetchRequest.push(n.teamFetchRequest||[]),n.stateFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.stateFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.states=[];for(var s in t)n.states.push(t[s].payload);n.states.forEach(function(e,t){r.push(e.name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else n.changeState(e)},changeState:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.stateId);var r=!1;n.states_id="",n.states&&n.states.forEach(function(i,s){i["name"]==t&&(r=!0,n.states_id=i.id,l(e.target).attr(n.attributes.stateId,n.states_id),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtCity).attr(n.attributes.stateId,n.states_id).fadeIn(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).attr(n.attributes.stateId,n.states_id).fadeOut())}),r||(n.states_id=0,l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).removeAttr(n.attributes.stateId).fadeOut(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtCity).removeAttr(n.attributes.stateId).fadeOut()),n.CheckTeamControlsVisibility()},keyupCity:function(e){var t=l(e.target).val(),r=[];if(t.length>2)if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.cityId),n.CheckTeamControlsVisibility();var i=new d;i.states_id=n.states_id,i.city_name=l(e.target).val(),n.cityFetchRequest=n.cityFetchRequest||[],n.cityFetchRequest.push(n.teamFetchRequest||[]),n.cityFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.cityFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.cities=[];for(var s in t)n.cities.push(t[s]);n.cities.forEach(function(e,t){r.push(e.city)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeCity(e)},changeCity:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.cityId);var r=!1;n.city_id="",n.cities&&n.cities.forEach(function(i,s){i["city"]==t&&(r=!0,n.city_id=i.id,l(e.target).attr(n.attributes.cityId,n.city_id))}),r||(n.city_id=0,l(n.destination).find(n.controls.txtTeam).removeAttr(n.attributes.cityId).fadeOut()),n.CheckTeamControlsVisibility()},keyupTeam:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility();var s=new m;s.states_id=l(e.target).attr(n.attributes.stateId),s.city_id=l(e.target).attr(n.attributes.cityId),s.sports_id=l(e.target).attr(n.attributes.sportId),s.team_name=t,n.TeamFetchRequest=n.abortRequest(n.TeamFetchRequest);var o=s.fetch();n.TeamFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.teams=[];for(var i in t)n.teams.push(t[i].payload);n.teams.forEach(function(e,t){r.push(e.team_name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeTeam(e)},changeTeam:function(e){var t=l(e.target).val(),r=!1;n.team_id=0,n.teams&&n.teams.forEach(function(i,s){var o=i.team_name;o==t&&(r=!0,n.team_id=i.id,l(e.target).parents(n.controls.sectionTeams).find("input").attr(n.attributes.teamId,n.team_id))}),r||l(e.target).parents(n.controls.sectionTeams).find("input").removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility()},keyupIndividualGame:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){l(e.target).removeAttr(n.attributes.gameId),n.CheckTeamControlsVisibility();var s=new w;s.game_name=t,n.individualGameFetchRequest=n.abortRequest(n.individualGameFetchRequest);var o=s.fetch();n.individualGameFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.eventNotFound(e):n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.individualGames=[];for(var i in t)n.individualGames.push(t[i].payload);n.individualGames.forEach(function(e,t){r.push(e.game_name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.gameId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeIndividualGame(e)},changeIndividualGame:function(e){var t=l(e.target).val(),r=!1;n.individual_game_id=0,n.individualGames&&n.individualGames.forEach(function(i,s){var o=i.game_name;o==t&&(r=!0,n.individual_game_id=i.id,l(e.target).attr(n.attributes.gameId,n.individual_game_id))}),r?n.eventFound(e):n.eventNotFound(e),n.CheckTeamControlsVisibility()},eventNotFound:function(e){l(n.destination).find(n.controls.txtIndividualLocation).show(),l(n.destination).find(n.controls.btnIndividualGameCreate).show(),l(n.destination).find(n.controls.btnIndividualFinish).hide(),l(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),l(e.target).removeAttr(n.attributes.gameId)},eventFound:function(e){l(n.destination).find(n.controls.txtIndividualLocation).hide(),l(n.destination).find(n.controls.btnIndividualGameCreate).hide(),l(n.destination).find(n.controls.btnIndividualFinish).show(),l(e.target).parent().find(n.controls.fieldMessage).html(n.messages.gameFound).fadeIn()},createIndividualEvent:function(e){var t=!0,r="",i=l(n.destination).find(n.controls.txtGameDate).datetimepicker("getDate"),s=n.location_id||l(n.controls.txtIndividualLocation).val()||0,o=l(n.destination).find(n.controls.txtIndividualGame).val(),a=l(n.destination).find(n.controls.ddlSports).val();a||(l(n.destination).find(n.controls.secSports).find(n.controls.fieldMessage).html(n.messages.selectSport).fadeIn(),t=!1),console.log("create"),i||(l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectDateAndTime).fadeIn(),t=!1),s||(r+=n.messages.selectLocation,t=!1),l.trim(o)==""&&(r+=n.messages.enterEventName,t=!1);if(t){l(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut();var f={game_datetime:i,locations_id:s,event_name:o,sports_id:a};console.log("payload",f);var c=new b(f);c.save({}),l.when(c.request).done(function(e){n.game_id=e.payload.id,n.gameData={game_datetime:i,games_id:n.game_id,event_name:o,locations_id:s,sports_id:a},u(n.channel).publish(n.gameData)})}else l(e.target).parent().find(n.controls.fieldMessage).html(r).fadeIn()},CheckTeamControlsVisibility:function(){var e=l(n.destination).find(n.controls.ddlSports).val();if(e&&e!=""&&e!=0){var t=n.getTeamType();if(!t)l(n.destination).find(n.controls.sectionTeams).hide(),l(n.destination).find(n.controls.sectionScore).html("").hide(),l(n.destination).find(n.controls.btnFinish).hide(),l(n.destination).find(n.controls.sectionMainLocation).hide(),l(n.destination).find(n.controls.sectionIndividual).show(),l(n.destination).find(n.controlsbtnIndividualFinish).show();else{var r=l(n.destination).find(n.controls.txtGameDate).datetimepicker("getDate"),i=new Date;r!=null&&i>=r?l(n.destination).find(n.controls.sectionScore).show():(l(n.destination).find(n.controls.sectionScore).hide(),l(n.destination).find(n.controls.txtScore).val("")),l(n.destination).find(n.controls.sectionIndividual).hide(),l(n.destination).find(n.controlsbtnIndividualFinish).hide(),l(n.destination).find(n.controls.sectionTeams).show(),l(n.destination).find(n.controls.btnFinish).show(),l(n.destination).find(n.controls.sectionMainLocation).show()}}else l(n.destination).find(n.controls.sectionIndividual).hide(),l(n.destination).find(n.controlsbtnIndividualFinish).hide(),l(n.destination).find(n.controls.sectionTeams).hide(),l(n.destination).find(n.controls.btnFinish).hide(),l(n.destination).find(n.controls.sectionMainLocation).hide();e=l(n.destination).find(n.controls.txtTeam).attr(n.attributes.teamId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnTeamDone).show():l(n.destination).find(n.controls.btnTeamDone).hide()},getTeamType:function(){var e=l(n.destination).find(n.controls.ddlSports).val();if(e&&e!=""&&e!=0){var t=!0;for(var r in n.sports)n.sports[r].sport_id==e&&n.sports[r].team_type=="individual"&&(t=!1);return t}return!1},showLocation:function(e){l(n.destination).find(n.controls.sectionMainLocation).show();var t=0,r=e?l(e.target).val():"away";if(r=="home")t=l(e.target).attr(n.attributes.teamId);else{var i=l(n.destination).find(n.controls.rdoLocation+":checked");i.each(function(){r=l(this).val(),r=="home"&&(t=l(this).attr(n.attributes.teamId))})}if(t){var s=new g;s.id=t,s.fetchSuccess=function(e,t){var r=s.parseAsRequired(t);n.setLocation(r)},s.fetch()}else l(n.destination).find(n.controls.txtLocationId).html("").fadeIn(),n.clearLocation()},setLocation:function(e){e.location_id?(n.location_id=e.location_id||0,l(n.destination).find(n.controls.txtLocationId).val("").fadeOut(),l(n.destination).find(n.controls.sectionLocation).html(e.location_name).attr(n.attributes.locationId,e.location_id)):l(n.destination).find(n.controls.txtLocationId).val("").fadeIn()},clearLocation:function(){l(n.destination).find(n.controls.sectionLocation).html("").removeAttr(n.attributes.locationId)},finishGame:function(){l(n.destination).find(n.controls.fieldMessage).html("").hide();var e=!0,t=l(n.destination).find(n.controls.txtGameDate).datetimepicker("getDate"),r=l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtTeam).attr(n.attributes.teamId),i=l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtScore).val(),s=l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.txtTeam).attr(n.attributes.teamId),o=l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.txtScore).val(),a=l(n.destination).find(n.controls.ddlSports).val(),f=n.location_id||l(n.controls.txtLocationId).val()||0;a||(l(n.destination).find(n.controls.secSports).find(n.controls.fieldMessage).html(n.messages.selectSport).fadeIn(),e=!1),t||(l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectDateAndTime).fadeIn(),e=!1),f||(l(n.destination).find(n.controls.sectionMainLocation).find(n.controls.fieldMessage).html(n.messages.selectLocation).fadeIn(),e=!1),r>0||(l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.fieldMessage).html(n.messages.selectTeam).fadeIn(),e=!1);var c=n.getTeamType();if(c){var h=new Date;s>0||(l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.fieldMessage).html(n.messages.selectTeam).fadeIn(),e=!1),i==""&&t!=null&&h>t&&(l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.fieldMessage).html(n.messages.selectScore).fadeIn(),e=!1),o==""&&t!=null&&h>t&&(l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.fieldMessage).html(n.messages.selectScore).fadeIn(),e=!1)}if(e){var p={game_datetime:t,locations_id:f,teamOneId:r,teamTwoId:s,sports_id:a},d=new b(p);d.save({}),l.when(d.request).done(function(e){if(e!=null&&e.payload!=null){n.game_id=e.payload.id;var f=l(n.destination).find(n.controls.rdoTeamOne).is(":checked"),c={game_datetime:t,games_id:n.game_id,home_team:f||!1,locations_id:n.location_id,score:i},h=new y(c);h.teams_id=r,h.save();var p={game_datetime:t,games_id:n.game_id,home_team:f||!1,locations_id:n.location_id,score:o};f=l(n.destination).find(n.controls.rdoTeamTwo).is(":checked");var d=new y(p);d.teams_id=s,d.save(),n.gameData={game_datetime:t,games_id:n.game_id,team_id_one:r,team_id_two:s,sports_id:a},u(n.channel).publish(n.gameData)}})}}});return E}),define("usercontrols/addgame/addgame",["require","text!usercontrols/addgame/templates/layout.html","facade","controller","models","views","user/models/basic_info","usercontrols/addgame/views/main"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("user/models/basic_info"),d=e("usercontrols/addgame/views/main"),n=i.extend({cssArr:["/usercontrols/addgame/addgame.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.popup&&(this.popup=!0,this.modelHTML='<div id="modalPopup" class="modal hide fade model-popup-h"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Add Game</h3></div><div class="modal-body page-content-h"></div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div></div>'),e.gender&&(this.gender=e.gender),this.init(),this},init:function(){this.popup?this.setupPopupLayout().render():this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},setupLayout:function(){if(this.layout)return this.layout;var e=new h({scheme:this.scheme,destination:"#main",template:"",displayWhen:"ready"});return this.layout=e,this.layout},setupPopupLayout:function(){var e;this.scheme=[],a(".model-popup-h").remove(),a("body").append(this.modelHTML);var e=new h({scheme:this.scheme,destination:"#modalPopup",template:"",displayWhen:"ready"});return this.layout=e,a("#modalPopup").modal(),this.layout},setUpMainView:function(){c("add-game-success").subscribe(this.addGameFunction);var e=this;this.addGameView=new d({model:new p,template:t,name:"add-game-main",destination:this.popup?".page-content-h":"#main",user_id:e.id,channel:"add-game-success",sports_id:"2",teams_id:"290"}),this.scheme.push(this.addGameView),this.layout.render()},addGameFunction:function(e){alert(JSON.stringify(e))}});return n}),define("login/model",["backbone","underscore"],function(e,t){return Backbone.Model.extend({})}),define("text!login/templates/logintemplate.html",[],function(){return'<div id="logincontainer">\r\n<form action="/user/login" method="post" accept-charset="utf-8">\r\n<label for="username">Username</label><input type="text" name="username" value="teset" />\r\n<label for="password">Password</label><input type="password" name="password" />\r\n<label for="remember">Remember Me</label><input type="checkbox" name="remember" />\r\n<p>(Remember Me keeps you logged in for 2 weeks)</p>\r\n\r\n<input type="submit" name="login" value="Login" /></form>\r\n<p>Or <a id= "signup" href="#">create a new account</a></p>\r\n</div>\r\n</div>'}),define("login/view",["require","text!login/templates/logintemplate.html","backbone","underscore","views","facade","utils"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=n.View;return SigninBasicView=f.extend({initialize:function(e){this.template=r.template(t),this.$el=$("#main"),this.render()},render:function(){this.$el.html(this.template)},events:{"click a#signup":"signupUser"},signupUser:function(e){e.preventDefault(),routing.trigger("add-user")}}),SigninBasicView}),define("text!signup/templates/layout.html",[],function(){return'\r\n<!--<div id="main-header">\r\n\r\n</div>\r\n\r\n<div id="main-content">\r\n    \r\n    \r\n    \r\n</div>\r\n\r\n<div id="main-footer">\r\n\r\n</div>-->\r\n<div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã</button>\r\n		<h3 id="label">Registration</h3>\r\n	</div>\r\n\r\n	<div id="main-content-reg"></div>\r\n\r\n	<div class="modal-body">\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n\r\n</div>\r\n'}),define("signup/models/registerbasic",["models/base"],function(e){var t;return t=e.extend({defaults:{},validate:function(e,t){if(e.priority<0)return"Priority cannot be negative."},validation:{email:{required:!0,pattern:"email",msg:"Please enter a valid email"}}}),t}),define("signup/models/registration-basics-final",["models/base"],function(e){var t;return t=e.extend({defaults:{},url:"api/user/register"}),t}),define("text!signup/templates/registration.html",[],function(){return'<style type="text/css">\r\n		\r\n		\r\n	</style>\r\n\r\n<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n\r\n<div id="regcontainer">\r\n	<div id="mainreg">\r\n		<div id="header">\r\n			<span class="regheader"> Show us what you got</span>\r\n		</div>\r\n\r\n		<div id="fbpane">\r\n			<div id="label">\r\n				Register with facebook\r\n			</div>\r\n			<div id="fblogo"><span></span></div>\r\n		</div>\r\n		<div id="regor">\r\n			or\r\n		</div>\r\n		<div id="regpane">\r\n			<form action="#/user/create" method="post" accept-charset="utf-8">\r\n				<div id="firstreg">\r\n				<input type="text" name="firstname" placeholder="First name" />\r\n				<div class="error">\r\n				</div>\r\n				<input type="text" name="lastname" placeholder="Last name" />\r\n				<input type="text" name="email" placeholder="Email" />\r\n				<div class="error">\r\n				</div>\r\n				</div>\r\n				<input type="submit" name="create" value="Create User" class="regsubmit" />\r\n			</form>\r\n			<div id="reglogin">\r\n		\r\n			<span>Been here before <a href="#">sign in</a></span>\r\n		\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'}),define("signup/views/registerbasic",["require","text!signup/templates/registration.html","backbone","underscore","registration","views","facade","utils"],function(e,t,n,r,i){var s,o=e("facade"),u=e("views"),a=e("utils"),f=a.lib.Channel,l=n.View;return s=l.extend({initialize:function(e){this.template=r.template(t),this.$el=$(e.destination),$("#errormsg, #preview").html(""),l.prototype.initialize.call(this,e),debug.log("Image upload basic view"),$("#imgUploadModal").modal("show"),$("#imgUploadModal").on("hidden",function(){}),$("#imgUploadModal").on("hide",function(){}),this.render()},render:function(){this.$el.html(this.template)},events:{"click .regsubmit":"next","click #fbpane":"signupFacebook"},next:function(e){e.preventDefault();var t=this.$(":input").serializeArray(),n=!0;$.each(t,function(e,t){if(!t.value)return alert(t.name+" is blank"),n=!1,!1}),n&&routing.trigger("register-basic-final",t)},signupFacebook:function(e){function t(){FB.login(function(e){e.authResponse?f("registration-with-facebook").publish():alert("Cancelled")},{scope:"email, user_birthday, user_photos"})}function n(){this.registrationController||(this.registrationController=new i({route:""})),this.registrationController.refreshPage();var e,n="facebook-jssdk",r=document.getElementsByTagName("script")[0];if(document.getElementById(n)){t();return}e=document.createElement("script"),e.id=n,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(e,r)}e.preventDefault(),$("#imgUploadModal").modal("hide"),window.fbAsyncInit=function(){FB.init({appId:"239430712864961",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.getLoginStatus(function(e){e.status==="connected"?FB.api("/me",function(e){console.log(e),f("registration-with-facebook").publish()}):e.status==="not_authorized"?(console.log("not_authorized"),t()):t()},{scope:"email, user_birthday, user_photos"})},n()},registerWithFacebook:function(e){function t(){FB.login(function(e){e.authResponse?f("registration-with-facebook").publish():alert("Cancelled")},{scope:"email, user_birthday, user_photos"})}function n(){var e,n="facebook-jssdk",r=document.getElementsByTagName("script")[0];if(document.getElementById(n)){t();return}e=document.createElement("script"),e.id=n,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(e,r)}e.preventDefault(),window.fbAsyncInit=function(){FB.init({appId:"239430712864961",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.getLoginStatus(function(e){e.status==="connected"?FB.api("/me",function(e){f("registration-with-facebook").publish()}):e.status==="not_authorized"?t():t()},{scope:"email, user_birthday, user_photos"})},n()}}),s}),define("text!signup/templates/basciFinal.html",[],function(){return'<style type="text/css">\r\n\r\n		\r\n	</style>\r\n\r\n<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n\r\n\r\n\r\n<div id="regcontainer">\r\n	<div id="mainregfinal">\r\n		<div id="header">\r\n			<span class="regheader"> The Basics </span>\r\n		</div>\r\n\r\n		\r\n		<div id="regpanefinal">\r\n			\r\n			<form action="#/user/create" method="post" accept-charset="utf-8">\r\n				<div id="finalreg">\r\n					<div class="firstdiv" id="firstname">\r\n						<div class="label">\r\n							<label for="Name">Name</label>\r\n						</div>\r\n						<input type="text" id="first_name" name="Name" placeholder="Name" />\r\n						<a id="editname">edit</a>\r\n					</div>\r\n					<div class="seconddiv" id="dob">\r\n						<div class="label">\r\n							<label for="born">Born</label>\r\n						</div>	\r\n						\r\n					</div>\r\n					<div class="thirddiv" id="email">\r\n						<div class="label">\r\n							<label for="Email">Email</label>\r\n						</div>	\r\n						<input type="text" name="email" id="emailInput" placeholder="Email" />\r\n					</div>\r\n					<div class="fourthdiv">\r\n						<div class="label">\r\n							<label for="Name">Gender</label>\r\n						</div>	\r\n						<div class="radioinput" id="radioinput">\r\n							<input type="radio" id="male" name="gender" value="M">\r\n						</div>\r\n						<div class="radio">\r\n							<label for="male">male</label>\r\n						</div>\r\n						<div class="radioinput" id="radioinput">\r\n							<input type="radio" id="Female" name="gender" value="F">\r\n						</div>\r\n						<div class="radio">\r\n							<label for="female">female</label>\r\n						</div>\r\n						\r\n					</div>\r\n					<div class="fifthdiv">\r\n						<div class="label">\r\n							<label for="Name">I am</label>\r\n						</div>\r\n						<div class="Role" id="Role">\r\n							<div class="radioinput"><input type="radio" id="athlet" name="athlet" value="A"></div>\r\n							<div class="radio"><label for="athlet">an athlet</label></div>\r\n							<div class="radioinput"><input type="radio" id="Fan" name="athlet" value="F"></div>\r\n							<div class="radio"><label for="fan">a fan</label></div>\r\n						</div>\r\n					\r\n					</div>\r\n					<div class="sixthdiv">\r\n						<div class="label">\r\n							<label for="Password">Password</label>\r\n						</div>	\r\n						<input type="password" name="password" id="password" placeholder="Password" />\r\n					</div>\r\n					<div class="seventhdiv">\r\n						<div class="label">\r\n							<label for="CPassword">Confirm</label>\r\n						</div>	\r\n						<input type="password" name="re_password" id="re_password" placeholder="Password" />\r\n					</div>\r\n					</div>\r\n					<div id="submitbutton">\r\n						<input type="submit" name="create" value="Create User" class="regsubmitfinal" />\r\n					</div>	\r\n				</form>\r\n				\r\n			<div id="reglogin">\r\n		\r\n			<span>Been here before <a href="#">sign in</a></span>\r\n		\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'}),define("signup/views/registration-basics-final",["require","text!signup/templates/basciFinal.html","backbone","underscore","views","facade","utils"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=n.View;return i=f.extend({initialize:function(e){this.template=r.template(t),this.$el=$(e.destination),this.render()},render:function(){this.$el.html(this.template),this.registrationElements(),this.payload=this.finalRegistrationPayload(this.options.attr),this.fetchpayload(this.payload)},events:{"click .regsubmitfinal":"next","click #editname":"editName"},editName:function(e){e.preventDefault(),$(".firstdiv").empty();var t=this.getnameElement("first_name","First Name","firstname"),n=this.getnameElement("last_name","Last Name","lastname"),r=this.getLabel("First Name"),i=this.getLabel("Second Name");$(".firstdiv").append(r),$(".firstdiv").append(t),$(".firstdiv").append(i),$(".firstdiv").append(n)},getLabel:function(e){var t=$("<div/>").attr({"class":"label"}),n=$("<lable/>").attr({For:e}).html(e);return t.append(n),t},getnameElement:function(e,t,n){var r=$("<input/>").attr({name:n,type:"text",id:e,placeholder:t});return r},finalRegistrationPayload:function(e){payload={};var t=e.attr;return $.each(t,function(e,t){payload[t.name]=t.value}),payload},registrationElements:function(){var e={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20",21:"21",22:"22",23:"23",24:"24",25:"25",26:"26",27:"27",28:"28",29:"29",30:"30",31:"31"},n={1920:"1920",1921:"1921",1922:"1922",1923:"1923",1924:"1924",1925:"1925",1926:"1926",1927:"1927",1928:"1928",1929:"1929",1930:"1930",1931:"1931",1932:"1932",1933:"1933",1934:"1934",1935:"1935",1936:"1936",1937:"1937",1938:"1938",1939:"1939",1940:"1940",1941:"1941",1942:"1942",1943:"1943",1944:"1944",1945:"1945",1946:"1946",1947:"1947",1948:"1948",1949:"1949",1950:"1950",1951:"1951",1952:"1952",1953:"1953",1954:"1954",1955:"1955",1956:"1956",1957:"1957",1958:"1958",1959:"1959",1960:"1960",1961:"1961",1962:"1962",1963:"1963",1964:"1964",1965:"1965",1966:"1966",1967:"1967",1968:"1968",1969:"1969",1970:"1970",1971:"1971",1972:"1972",1973:"1973",1974:"1974",1975:"1975",1976:"1976",1977:"1977",1978:"1978",1979:"1979",1980:"1980",1981:"1981",1982:"1982",1983:"1983",1984:"1984",1985:"1985",1986:"1986",1987:"1987",1988:"1988",1989:"1989",1990:"1990",1991:"1991",1992:"1992",1993:"1993",1994:"1994",1995:"1995",1996:"1996",1997:"1997",1998:"1998",1999:"1999",2e3:"2000",2001:"2001",2002:"2002",2003:"2003",2004:"2004",2005:"2005",2006:"2006",2007:"2007",2008:"2008",2009:"2009",2010:"2010",2011:"2011",2012:"2012",2013:"2013",2014:"2014",2015:"2015",2016:"2016",2017:"2017",2018:"2018"},r=this.option(e,"born");$(".seconddiv").append(r);var i=this.option(t,"borndate");$(".seconddiv").append(i);var s=this.option(n,"borndyear");$(".seconddiv").append(s)},option:function(e,t){var n=$("<select/>").attr({"class":t});return $.each(e,function(e,t){var r=$("<option/>").attr({value:e}).html(t).appendTo(n)}),n},fetchpayload:function(e){$("#first_name").val(e.firstname+" "+e.lastname),$("#emailInput").val(e.email)},next:function(e){var t=this;e.preventDefault(),console.log(this.payload);var n=this.$(":input").serializeArray();$.each(n,function(e,t){payload[t.name]=t.value}),console.log(payload,"new payload"),this.payload.gender=$("input:radio[name=gender]").val(),this.payload.password=$("#password").val(),this.payload.re_password=$("#re_password").val(),this.payload.dob=$(".borndate").val()+"-"+$(".born").val()+"-"+$(".borndyear").val(),this.payload.accept_terms=!0,this.model.save(this.payload,{success:function(e){routing.trigger("upload-user-image",e)},error:function(e){$(".errormsg").remove();var n=jQuery.parseJSON(e.request.responseText);errorArray=n.exec_data.error_array,$.each(errorArray,function(e,n){t.displayErrors(n)})}})},displayErrors:function(e){var t=$("#"+e.field),n=t.width();if(n){console.log(t.position(),"fieldName",n,"elemet width");var r=this.displayMesage(t.position(),e.error,n);$("#finalreg").append(r)}},displayMesage:function(e,t,n){console.log(n,"widthele");var r=e.left+15;r+=n,console.log(r,"posleft");var i=$("<div/>").attr({name:"error message","class":"errormsg"}).css({width:"200px",height:"50px",position:"absolute",top:e.top,left:r,color:"#CE0009"}).html(t);return i}}),i}),define("signup/models/image-upload",["models/base"],function(e){var t;return t=e.extend({defaults:{},url:"/api/user/savecrop/425983",payload:{}}),t}),define("text!signup/templates/imageupload.html",[],function(){return' <style type="text/css">\r\n\r\n </style>\r\n <div id="regcontainer">\r\n    <div id="mainregimg">\r\n      <div id="header">\r\n      <span class="regheader"> Upload a user pic</span>\r\n    </div>\r\n      <div id="imgcontainer" class="imgcontainer">\r\n       \r\n        <div class="textcenter pane" id="imgpreview" >\r\n          <img id="image-select" style="max-height: 245px; max-width: 320px;" />\r\n            <div class="coords" style="display:none;">\r\n                <div>crop x <input name="crop-x" type="hidden" /></div>\r\n                <div>crop y <input name="crop-y" type="hidden" /></div>\r\n                <div>crop width <input name="crop-width" type="hidden" /></div>\r\n                <div>crop height <input name="crop-height" type="hidden" /></div>\r\n                <div>image width <input name="image-width" type="hidden" /></div>\r\n                <div>image height <input name="image-height" type="hidden" /></div>            \r\n            </div>\r\n        </div>\r\n        <div id="imguploader" class="imguploader">\r\n          <input type="file" name= "preview" id="preview">\r\n        </div>\r\n        <div class="inputmask">\r\n          <div class="selectlabel">Select File</div>\r\n          <div class="showselected"></div>\r\n        </div>  \r\n         \r\n        <div id="imgupload"  class="imgupload">\r\n          <input type="submit" name="imgup" id="crpimgup" value="Crop and save" class="imgup" /> \r\n           <input type="submit" name="skip" id="skip" value="Skip" class="imgup" />   \r\n        </div>\r\n        \r\n      </div>\r\n    </div>  \r\n  </div>   '}),define("signup/views/image-upload",["require","text!signup/templates/imageupload.html","backbone","underscore","views","facade","utils","jquery.jrac"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=n.View;return i=f.extend({initialize:function(e){this.template=r.template(t),this.$el=$(e.destination),this.render()},render:function(){this.$el.html(this.template),this.userinfo(this.options.attr)},events:{"change input":"preview","click #crpimgup":"imageupload","click #skip":"skip"},skip:function(e){e.preventDefault(),window.location.href="#usersettings"},userinfo:function(e){},preview:function(e){this.removeCropView();var t=window.URL||window.webkitURL;window.fileURL=t.createObjectURL(e.target.files[0]),this.srcimg=window.fileURL,$("#image-select").attr({src:window.fileURL}),this.initCropView()},initCropView:function(){$("#image-select").jrac({crop_width:200,crop_height:240,crop_aspect_ratio:"1:1",crop_x:0,crop_y:0,crop_resize:!1,viewport_resize:!1,viewport_onload:function(){var e=this,t=e.$container.parent(".pane").find(".coords input:hidden"),n=["jrac_crop_x","jrac_crop_y","jrac_crop_width","jrac_crop_height","jrac_image_width","jrac_image_height"];for(var r=0;r<n.length;r++){var i=n[r];e.observator.register(i,t.eq(r)),t.eq(r).bind(i,function(e,t,n){$(this).val(n)}).change(i,function(t){var n=t.data;e.$image.scale_proportion_locked=e.$container.parent(".pane").find(".coords input:checkbox").is(":checked"),e.observator.set_property(n,$(this).val())})}e.$container.append('<div class="natual-size">Image natual size: '+e.$image.originalWidth+" x "+e.$image.originalHeight+"</div>")}}).bind("jrac_events",function(e,t){var n=$(this).parents(".pane").find(".coords input");n.css("background-color",t.observator.crop_consistent()?"chartreuse":"salmon")})},imageupload:function(e){e.preventDefault(),this.getImageInfo()},removeCropView:function(){$("#image-select").jrac("destroy"),$("#image-select").parent().find(".natual-size").remove()},getImageInfo:function(){var e=[],t=this.$(".coords :input").serializeArray();e.image_url=this.srcimg,$.each(t,function(t,n){e[n.name]=n.value}),console.log(e,"finalRegistrationPayload"),this.model.save(e,{success:function(e){a("upload-user-image").publish(e)},error:function(){}})}}),i}),define("signup",["require","text!signup/templates/layout.html","facade","controller","models","views","utils","signup/models/registerbasic","signup/models/registration-basics-final","signup/views/registerbasic","signup/views/registration-basics-final","signup/models/image-upload","signup/views/image-upload"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("signup/models/registerbasic"),f=e("signup/models/registration-basics-final"),l=e("signup/models/image-upload"),c=e("signup/views/registerbasic"),h=e("signup/views/registration-basics-final"),p=e("signup/views/image-upload"),d=o.LayoutView,v=r.$,m=r._,g=u.debug,y=u.lib.Channel,b=["/pages/signup/css/signupstyle.css","/css/style.jrac.css","/pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return y("load:css").publish(b),m.bindAll(this),this.handleOptions(e),this.init(),this},init:function(){this.refreshPage(),this.setupLayout(),this.createData(),this.handleDeferreds()},setupLayout:function(){return this.scheme=[],v("div#modalPopup").remove(),v("body").append('<div id="modalPopup"></div>'),pageLayout=new d({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=pageLayout,this.layout},createData:function(){this.select_type=new a},refreshPage:function(){this.selectTypeView&&(v(this.selectTypeView.destination).html(""),position=v.inArray(this.selectTypeView,this.scheme),~position&&this.scheme.splice(position,1))},handleDeferreds:function(){function t(t){e.initRegisterFinal({attr:t})}function n(t){e.uploadUserImage({attr:t})}var e=this;e.setupSelectTypeView(),routing.off("register-basic-final"),routing.on("register-basic-final",function(e){t(e)}),routing.off("upload-user-image"),routing.on("upload-user-image",function(e){n(e)})},initRegisterFinal:function(e){this.basic_type=new f,this.selectRegisterBasicFinalView=new h({model:this.basic_type,name:"Final registration",destination:"#main-content-reg",attr:e}),this.layout.render()},uploadUserImage:function(e){this.basic_type=new l,this.selectRegisterBasicFinalView=new p({model:this.basic_type,name:"Final registration",destination:"#main-content-reg",attr:e}),this.layout.render()},setupSelectTypeView:function(){this.selectTypeView=new c({model:this.select_type,name:"Select Registration Type",destination:"#main-content-reg"}),this.layout.render()}}),n}),define("text!usercontrols/photo-player/templates/comments.html",[],function(){return'\r\n{{#payload}}\r\n<div class="photo-player-coment"> \r\n	<div class="user-photo">\r\n		<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n	</div> \r\n    <div class="content">\r\n    	<!--span class="comment-date">{{poster}} {{comment_date}}</span-->\r\n    	<p class="comment-text">{{comment}}</p>\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("usercontrols/photo-player/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/media/comments/"+this.id:"/api/media/comments/"+this.id}}),r}),define("text!usercontrols/photo-player/templates/player.html",[],function(){return'<div class="image-bg">\r\n	<ul class="image-actions">\r\n		<li><a href="javascript: void(0);" class="photo-player-tag-photo-h" title="tag photo">Tag Photo</a></li>\r\n		<li><a href="javascript: void(0);" class="photo-player-vote-h" title="vote">Vote</a></li>\r\n	</ul>\r\n	\r\n	<a href="javascript: void(0);" class="photo-player-back pull-left player-move-options back-arrow-h">&lt;</a>\r\n	<a href="javascript: void(0);" class="photo-player-next pull-right player-move-options next-arrow-h">&gt;</a>\r\n	<img src="" class="photo-player-main-image large-image-h" />\r\n	\r\n	<div class="thumbs-outer">\r\n		<div class="thumbs-inner">\r\n			<ul class="images-list thumb-image-list-h"></ul>	\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n'}),define("usercontrols/photo-player/views/main",["require","text!usercontrols/photo-player/templates/player.html","facade","views","utils","vendor","votes/models/vote"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("votes/models/vote");return PhotoPlayerView=s.extend({template:t,thumbTemplate:'{{#data}}<li><a href="javascript: void(0);" class="thumb-link-h" data-index="{{_index}}" title="thumb"><img src="{{_thumbnail}}" alt="{{_thumbnail}}" /></a></li>{{/data}}',events:{"click .back-arrow-h":"backButton","click .next-arrow-h":"nextButton","click .thumb-link-h":"changeImage","click .photo-player-vote-h":"vote"},initialize:function(e){this.collection=e.collection,this.id=e.id,this.index=e.index,s.prototype.initialize.call(this,e),this.setUpMainView(),this.json=this.model.toJSON(),this.render(),this.initThumbsSection(),this.loadImage(!0)},vote:function(e){if(l(e.currentTarget).hasClass("voted"))return;var t=ths,n=new c;n.userId=this.json[this.index].payload.id,n.entity_id=this.json[this.index].payload.enttypes_id,n.set({subject_type_id:n.entity_id,subject_id:n.userId}),n.save(),l.when(n.request).done(function(){t.$el.find(".photo-player-vote-h").addClass("voted")})},changeImage:function(e){var t=l(e.currentTarget);this.index=t.attr("data-index"),this.loadImage()},backButton:function(e){this.index>0&&(this.index--,this.loadImage())},nextButton:function(e){this.index<this.json.length&&(this.index++,this.loadImage())},initThumbsSection:function(){var e=this,t=this.json.length,n={};n.data=[],console.error(this.json);for(var r=0;r<t;r++){var i=this.json[r].payload,s={_enttypes_id:i.enttypes_id,_id:i.id,_index:r};switch(i.enttypes_id){case"23":s._thumbnail=i.thumbs,s._label=i.media.name,s._link="javascript: void(0);",i.media.hasOwnProperty("is_owner")&&(show_edit=i.media.is_owner);break;case"21":typeof i.types=="object"&&i.types.small_thumb&&(s._thumbnail=i.types.standard_thumb.url),s._label=i.media_obj.name,s._link="javascript: void(0);",i.media_obj.hasOwnProperty("is_owner")&&(show_edit=i.media_obj.is_owner);break;case"1":typeof i.user_picture_obj=="object"&&(s._thumbnail=i.user_picture_obj.types.small_thumb.url),s._label=i.label,s._sublabel="Coming Soon",s._link="/#profile/"+i.id,i.hasOwnProperty("is_owner")&&(show_edit=i.is_owner);break;case"8":s._detailclass="game",s._thumbnail=i.game_picture!==null?i.game_picture.types.small_thumb.url:"http://lorempixel.com/output/sports-q-c-440-440-4.jpg",s._label=i.game_day,s._link="/#game/"+i.id;var o="",u=i.teams.length,a=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var r=0;r<u;r++)o+="<span>",o+=a(i.teams[r].team_name),o+="</span>",r+1<i.teams.length&&(o+=" VS. ");i.hasOwnProperty("is_owner")&&(show_edit=i.is_owner),s._sublabel=o}n.data.push(s)}this.id=s._id;var l=f.to_html(this.thumbTemplate,n);this.$el.find(".thumb-image-list-h").html(l)},loadImage:function(e){var t=this,n=this.json[t.index].payload,r={_enttypes_id:n.enttypes_id,_id:n.id,_currentIndex:t.index};switch(n.enttypes_id){case"23":r._thumbnail=n.thumbs,r._label=n.media.name,r._link="javascript: void(0);",n.media.hasOwnProperty("is_owner")&&(show_edit=n.media.is_owner);break;case"21":typeof n.types=="object"&&n.types.standard_thumb&&(r._thumbnail=n.types.large_thumb.url),r._label=n.media_obj.name,r._link="javascript: void(0);",n.media_obj.hasOwnProperty("is_owner")&&(show_edit=n.media_obj.is_owner);break;case"1":typeof n.user_picture_obj=="object"&&(r._thumbnail=n.user_picture_obj.types.large_thumb.url),r._label=n.label,r._sublabel="Coming Soon",r._link="/#profile/"+n.id,n.hasOwnProperty("is_owner")&&(show_edit=n.is_owner);break;case"8":r._detailclass="game",r._thumbnail=n.game_picture!==null?n.game_picture.types.large_thumb.url:"http://lorempixel.com/output/sports-q-c-440-440-4.jpg",r._label=n.game_day,r._link="/#game/"+n.id;var i="",s=n.teams.length,o=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var u=0;u<s;u++)i+="<span>",i+=o(n.teams[u].team_name),i+="</span>",u+1<n.teams.length&&(i+=" VS. ");n.hasOwnProperty("is_owner")&&(show_edit=n.is_owner),r._sublabel=i}this.$el.find(".large-image-h").attr("src",r._thumbnail),this.$el.find(".thumb-image-list-h li").removeClass("selected-photo-thumb"),this.$el.find(".thumb-link-h[data-index="+this.index+"]").parents("li").addClass("selected-photo-thumb"),routing.trigger("photo-player-section-reload",r._enttypes_id,r._id)},setOptions:function(e){},setUpMainView:function(){var e=this,t=f.to_html(e.template,{});l(e.$el).html(t)}}),PhotoPlayerView}),define("usercontrols/photo-player/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("usercontrols/photo-player/views/comment-form",["require","text!site/templates/comment-form.html","usercontrols/photo-player/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){console.error(e),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:".comment-input-outer-h",template:t,events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("comment form view expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},showCommentBox:function(){var e=this.$el.find(".add-comment-form-h");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")},refreshComments:function(e){this.$("#new-comment").val("")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/media/addcomment/"+r.subject_id+"?comment="+r.comment:"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.on("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("usercontrols/photo-player/views/comments",["facade","utils","site/views/comment-list","usercontrols/photo-player/views/comment-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),this.options.collection=this.collection,this.name=e.name,this._template=e.template,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function s(e){console.log("Comments callback",e.user_pic_small),n.model=e,n.render()}function o(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=this,n=new r({collection:this.collection}),i=this.addChildView(n);this.callbacks.add(function(){i()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){s(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){o(e)})}}),s}),define("usercontrol/photo-player/models/tags",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("usercontrols/photo-player/collections/tags",["facade","collections","utils","usercontrol/photo-player/models/tags"],function(e,t,n,r){var i,s=t.BaseCollection;return i=s.extend({model:r,url:function(){return testpath?testpath+"/media/tags/"+this.id:"/api/media/tags/"+this.id},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("text!usercontrol/photo-player/templates/tags.html",[],function(){return'<div class="tags-outer-h">\r\n	<ul id="tags-list"></ul>\r\n</div>\r\n<div class="clear">\r\n	<a href="javascript: void(0);" title="see more" class="see-more-h">See More</a>\r\n</div>'}),define("text!usercontrol/photo-player/templates/tag-item.html",[],function(){return'<div class="row-fluid">\r\n    <div class="tags-name">\r\n		<span><a href="{{_link}}"><img src="{{_thumbnail}}" width="20" height="20" /></a></span>\r\n		<span>{{{_label}}}</span>\r\n    </div>\r\n    <div class="tags-number">\r\n    	{{count}}\r\n    </div>\r\n</div>\r\n'}),define("usercontrol/photo-player/views/tags-item",["vendor","views","utils","text!usercontrol/photo-player/templates/tag-item.html"],function(e,t,n,r){var i,s=t.BaseView,o=e.Mustache;return i=s.extend({tagName:"li",template:r,className:"tag",initialize:function(e){},filterData:function(){console.log(this.model.get("payload"));var e=this,t=this.model.get("payload"),n={_enttypes_id:t.subject_enttypes_id,_id:t.id},r=!1,i=null;console.error(n._enttypes_id);switch(n._enttypes_id){case"23":n._thumbnail=t.thumbs,n._label=t.media.name,n._link="javascript: void(0);",t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"?typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url):n._label=t.media_obj.name,n._link="javascript: void(0);",t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.subject.user_picture_obj=="object"&&typeof t.subject.user_picture_obj.types=="object"&&(typeof t.subject.user_picture_obj.types.standard_thumb=="object"?(i=t.subject.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.subject.user_picture_obj.types.large_thumb=="object"?(i=t.subject.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.subject.user_picture_obj.types.original=="object"&&(i=t.subject.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.subject.label,n._sublabel="Coming Soon",n._link="/#profile/"+t.id,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.subject.game_picture!==null?t.subject.game_picture.types.standard_thumb:{height:440,width:440,url:"http://lorempixel.com/output/sports-q-g-440-440-3.jpg"},n._thumbnail=i.url,n._link="/#game/"+t.id;var s="",u=t.subject.teams.length,a=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var f=0;f<u;f++)s+='<span class="game-match-name">',s+=a(t.subject.teams[f].team_name),s+="</span>",s+='<span class="game-score">',s+=t.subject.teams[f].points_scored,s+="</span>",f+1<t.subject.teams.length&&(s+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._label=s}n.show_edit=r==1?!0:undefined,console.log(n);var l=o.to_html(this.template,n);this.$el.html(l)},render:function(){return console.error("-------<><><> tag item view"),this.filterData(),this}}),i}),define("usercontrols/photo-player/views/tags",["facade","vendor","utils","views","text!usercontrol/photo-player/templates/tags.html","usercontrol/photo-player/views/tags-item"],function(e,t,n,r,i,s){var o,u=e._,a=r.CollectionView,f=r.SectionView,l=t.Mustache;return Channel=n.lib.Channel,CommentListAbstract=a.extend(f.prototype),o=CommentListAbstract.extend({__super__:a.prototype,listView:"#tags-list",_tagName:"li",_className:"tags-li",page:1,page_limit:5,prepend:!1,_view:s,template:i,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=l.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate();var t=this;this.collection=e.collection,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.seeMore(),console.log(this.collection.toJSON()),a.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");u.bindAll(this),this.addSubscribers()},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{}}),o}),define("usercontrols/photo-player/photo-player",["require","text!usercontrols/photo-player/templates/comments.html","facade","controller","models","views","user/models/basic_info","usercontrols/photo-player/collections/comments","usercontrols/photo-player/views/main","usercontrols/photo-player/views/comments","usercontrols/photo-player/collections/tags","usercontrols/photo-player/views/tags"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=r.Backbone,d=e("user/models/basic_info"),v=e("usercontrols/photo-player/collections/comments"),m=e("usercontrols/photo-player/collections/tags"),g=e("usercontrols/photo-player/views/main"),y=e("usercontrols/photo-player/views/comments"),b=e("usercontrols/photo-player/views/tags"),n=i.extend({cssArr:["/usercontrols/photo-player/photoPlayer.css"],events:{},initialize:function(e){console.log("init");var t=this;c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.index&&(this.index=e.index),e.userId&&(this.userId=e.userId),e._collection&&(this._collection=e._collection),this.modelHTML='<div id="modalPopup" class="modal photo-frame-model hide fade model-popup-h"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"><div class="photo-player-area-h photo-player"></div><div class="photo-player-right-area"><div class="tags-area-h"></div><div class="comment-area coment-area-h"></div><div class="comment-input-outer-h comment-input-outer" class="clearfix"></div></div></div></div>',routing.off("photo-player-section-reload"),routing.on("photo-player-section-reload",function(e,n){t.id=n,t.setUpCommentView(e,n),t.setUpTagView(e,n)}),routing.off("comments-fetch-new-form-data"),routing.on("comments-fetch-new-form-data",function(e,n){t.setUpCommentView(e,n),t.setUpTagView(e,n)}),this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},handleDeferreds:function(){},setupLayout:function(){this.scheme=[],a(".model-popup-h").remove(),a("body").append(this.modelHTML);var e=new h({scheme:this.scheme,destination:"#modalPopup",template:"",displayWhen:"ready"});return this.layout=e,a("#modalPopup").modal(),this.layout},setUpMainView:function(){var e=this,t=p.Collection.extend(),n=new t;n.reset(e._collection);var r=new g({model:n,name:"photo player",destination:".photo-player-area-h",index:e.index});this.scheme.push(r),this.layout.render()},setUpTagView:function(e,t){var n=this.scheme.length;for(var r=0;r<n;r++)this.scheme[r].name==this.oldTagView&&this.scheme[r].remove();var i=this,s;i.oldTagView="tag section"+Math.random(),i.tags=new m,i.tags.id=t,i.tags.fetch(),a.when(i.tags.request).done(function(){console.error(i.tags.toJSON()),console.error(i.tags),s=new b({collection:i.tags,name:i.oldTagView,entity_type_id:e,destination:".tags-area-h"}),i.scheme.push(s),i.layout.render()})},setUpCommentView:function(e,n){var r=this.scheme.length;for(var i=0;i<r;i++)this.scheme[i].name==this.oldView&&this.scheme[i].remove(),console.error(this.scheme[i].name);var s=this,o;s.oldView="comment section"+Math.random(),a(".coment-area-h, .comment-input-outer-h").unbind().html(""),s.commentson=new v,s.commentson.subject_entity_type=e,s.commentson.id=n,s.commentson.fetch(),a.when(s.commentson.request).done(function(){console.error(s.commentson.toJSON()),o=new y({collection:s.commentson,userId:s.userId,name:s.oldView,_template:t,destination:".coment-area-h"}),s.scheme.push(o),s.layout.render()})},setUpOthersView:function(){}});return n}),define("usercontrols/add-club/collections/complevel",["facade","collections","utils","usercontrol/photo-player/models/tags"],function(e,t,n,r){var i,s=t.BaseCollection;return i=s.extend({model:r,url:function(){return testpath?testpath+"/media/tags/":"/api/complevelprofile/search/"}}),i}),define("usercontrols/add-club/collections/profile",["facade","collections","utils","models"],function(e,t,n,r){var i,s=r.BaseModel,o=t.BaseCollection;return o.extend({model:e.Backbone.Model.extend(),url:function(){return testpath?testpath+"/seasonprofile/search/":"/api/seasonprofile/search/"}})}),define("text!usercontrols/add-club/templates/layout.html",[],function(){return'<div>\r\n	<div class="name-outer">\r\n		<label>Name</label>\r\n		<input type="text" class="name-h" class="name" placeholder="Please enter name." />\r\n	</div>\r\n	<div class="club-season-profile">\r\n		<div class="profile-h"></div>\r\n	</div>\r\n	<div class="comptetion-level-type">\r\n		<div class="comp-levels-h"></div>\r\n	</div>\r\n	\r\n	<div class="address">\r\n		<label>Address</label>\r\n		<textarea placeholder="Address" max-length rows="3" class="address-h" cols="25"></textarea>\r\n		<span class="address-error hide address-error-status-h"></span>\r\n		<a href="javascript: void(0);" class="verify-address-h">VERIFY ADDRESS</a>		\r\n	</div>\r\n	\r\n	<div class="clear">\r\n		<a href="javascript: void(0);" class="common-btn common-btn-direction cancel-h" title="cancel">Cancel</a>\r\n		<a href="javascript: void(0);" class="common-btn common-btn-direction finish-h" title="finish">Finish</a>\r\n	</div>\r\n\r\n	\r\n	\r\n</div>'}),define("usercontrol/add-club/collections/complevel",["facade","collections","utils","usercontrol/photo-player/models/tags"],function(e,t,n,r){var i,s=t.BaseCollection;return i=s.extend({model:r,url:function(){return testpath?testpath+"/media/tags/":"/api/complevelprofile/search/"}}),i}),define("usercontrol/add-club/models/adress",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/location/add?address="+this.address:"/api/location/add?address="+this.address}})}),define("usercontrol/add-club/models/add",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/org/add":"/api/org/add"}})}),define("usercontrols/add-club/views/main",["require","text!usercontrols/add-club/templates/layout.html","facade","views","utils","vendor","usercontrol/add-club/collections/complevel","usercontrol/add-club/models/adress","usercontrol/add-club/models/add","usercontrol/dropdown/view/dropdown"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrol/add-club/collections/complevel"),h=e("usercontrol/add-club/models/adress"),p=e("usercontrol/add-club/models/add"),d=e("usercontrol/dropdown/view/dropdown");return PhotoPlayerView=s.extend({template:t,events:{"click .verify-address-h":"verifyAddress","click .finish-h":"addClub","blur .address-h":"verifyAddress"},initialize:function(e){this.model=e.model,this.id=e.id,this.addType=e.addType,this.addressValid=!1,s.prototype.initialize.call(this,e),this.setUpMainView(),this.render(),this.setProfiles()},addClub:function(){var e=this,t=!0;if(this.$el.find(".name-h").val()=="")return alert("Please enter name."),!1;if(!this.addressValid)return alert("Please choose valid address"),!1;this.verifyAddress(function(){t&&e.saveData()})},saveData:function(){var e=this,t=new p,n={};n.name=this.$el.find(".name-h").val(),n.complevel_profiles_id=this.$el.find("#comp-levels-h").val(),n.location_id=e.locationId,n.season_profiles_id=this.$el.find("#profile-h").val(),n.sports_club=e.addType=="school"?"0":"1",t.set(n),t.save(),l.when(t.request).done(function(){alert(e.addType+" added successfully")})},verifyAddress:function(e){var t=this,n=t.$el.find(".address-h").val(),r=new h;r.address=n,r.url(),r.set({address:n}),r.showError=function(e,n){try{t.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}t.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},r.save({dataType:"json"}),t.$el.find(".address-h").removeClass("address-verified"),l.when(r.request).done(function(){console.log(r.toJSON()),t.locationId=r.get("payload").id,t.locationId?(t.$el.find(".address-error-status-h").addClass("hide"),t.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),t.addressValid=!0,typeof e=="function"&&e()):t.addressValid=!1})},setProfiles:function(){var e=this,t=e.model.toJSON(),n=e.model.toJSON(),r={};r.records=[];for(var i in n[0].payload){var s={};s.name=[],s.id=[],r.records.push({payload:{id:n[0].payload[i].id,name:n[0].payload[i].name}})}r.recordId="id",r.recordValue="name";var o=new d({data:r,title:"Club's Season Profile",elementId:"profile-h",destination:".profile-h",targetView:e,callback:function(t){e.getCompLevels()}})},getCompLevels:function(){var e=this;e.compLevel=new c,e.compLevel.fetch(),l.when(e.compLevel.request).done(function(){console.error(e.compLevel);var t=e.compLevel.toJSON(),n={};n.records=[];for(var r in t[0].payload)n.records.push({payload:{id:t[0].payload[r].id,name:t[0].payload[r].name}});n.recordId="id",n.recordValue="name";var i=new d({data:n,title:"Team",elementId:"comp-levels-h",destination:".comp-levels-h",targetView:e,callback:function(e){}})})},setUpMainView:function(){var e=this,t={};t.type=e.addType;var n=f.to_html(e.template,t);l(e.$el).html(n)}}),PhotoPlayerView}),define("usercontrols/add-club/add-club",["require","text!usercontrols/photo-player/templates/comments.html","facade","controller","models","views","user/models/basic_info","usercontrols/add-club/collections/complevel","usercontrols/add-club/collections/profile","usercontrols/add-club/views/main"],function(e,t){var n=e("facade"),r=e("controller"),i=e("models"),s=e("views"),o=e("utils"),u=n.$,a=n._,f=o.debug,l=o.lib.Channel,c=s.LayoutView,h=n.Backbone,p=e("user/models/basic_info"),d=e("usercontrols/add-club/collections/complevel"),v=e("usercontrols/add-club/collections/profile"),m=e("usercontrols/add-club/views/main");return r.extend({cssArr:["/usercontrols/add-club/add-club.css"],events:{},initialize:function(e){console.log("init");var t=this;l("load:css").publish(this.cssArr),a.bindAll(this),e.id&&(this.id=e.id),e.index&&(this.index=e.index),e.userId&&(this.userId=e.userId),e.type&&(this.type=e.type),e._collection&&(this._collection=e._collection),this.modelHTML='<div id="modalPopup" class="modal add-club-model hide fade model-popup-h"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"><div class="add-club-area-h photo-player"></div></div></div>',this.setupLayout().render(),this.setUpMainView()},setupLayout:function(){this.scheme=[],u(".model-popup-h").remove(),u("body").append(this.modelHTML);var e=new c({scheme:this.scheme,destination:"#modalPopup",template:"",displayWhen:"ready"});return this.layout=e,u("#modalPopup").modal(),this.layout},setUpMainView:function(){var e=this;e.seasonProfile=new v,e.seasonProfile.fetch(),u.when(e.seasonProfile.request).done(function(){var t=new m({model:e.seasonProfile,name:"add club",destination:".add-club-area-h",addType:e.type});e.scheme.push(t),e.layout.render()})}})}),define("application",["facade","utils","collections","chrome","controller","profile","imageup","home","videopreview","game","team","registration","profilesetting","userresume","packages/site/collections/phrases","usercontrols/tag/tag","usercontrols/addgame/addgame","login/model","login/view","signup","usercontrols/photo-player/photo-player","usercontrols/add-club/add-club"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S,x=n.ApplicationStates,T=e.$,N=e._,C=e.Backbone,k=t.lib.Channel,L=t.debug;return S=C.Router.extend({routes:{"":"defaultRoute",home:"showHome","home/":"showHome","home/:action":"initApp",profile:"showProfile","profile/":"showProfile","profile/:userid":"showProfile",usersettings:"showProfileSetting","usersettings/":"showProfileSetting",resume:"ShowUserResume","resume/":"ShowUserResume",game:"showGame","game/":"showGame","game/:id":"showGame",team:"showTeam","team/":"showTeam","team/:id":"showTeam",registration:"showRegistration","registration/":"showRegistration","registration/:action":"showRegistration",tag:"showTag","user/login":"showLogin",addgame:"showAddGame"},initialize:function(e){N.bindAll(this),this.addSubscribers(),i.prototype.appStates=new x,this.getPhrases()},intializeImageAndVideo:function(){this.imageUpListeners(),this.videoPreview(),this.showUsercreate()},cancelAjaxRequests:function(){if(typeof routing!="undefined"&&typeof routing.ajaxRequests!="undefined"&&routing.ajaxRequests.length)for(var e in routing.ajaxRequests)routing.ajaxRequests[e].abort()},initTriggers:function(){routing.off("photo-player-init"),routing.on("photo-player-init",function(e,t,n){console.log(t);var r=new w({index:e,userId:n,_collection:t})}),routing.off("add-school-init"),routing.on("add-school-init",function(e,t,n){var r=new E({type:n})})},initialiRoutesInit:function(e){var t=this;routing.off("app-inited"),routing.on("app-inited",function(t){e(t)}),routing.off("add-game"),routing.on("add-game",function(e){var t=new m({id:e,popup:!0})})},defaultRoute:function(){this.initApp()},initApp:function(e){this.showHome(null)},getPhrases:function(){var e=new d;e.fetch()},showHome:function(e){function t(){var e=new u({route:"home"})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),t()},removeCurrent:function(){},showProfile:function(e){function n(n){t.currentController=new s({userId:typeof e!="undefined"?e:n})}var t=this;this.cancelAjaxRequests(),t.loadStyles(),T("body").empty(),r(),t.removeCurrent(),this.initialiRoutesInit(n)},notFound:function(e){alert("Page not found")},showTeam:function(e){function n(n){t.currentController=new l({route:"",teamId:e,userId:n})}var t=this;this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r();if(!e){this.notFound("team");return}t.removeCurrent(),this.initialiRoutesInit(n)},imageUpListeners:function(){function e(e,t){var n=new o({route:"",url:e,attr:t})}this.addImageTrigger(e)},addImageTrigger:function(e){routing.off("add-image"),routing.on("add-image",function(t,n){e(t,n)})},showProfileSetting:function(e){function t(t){self.currentController=new h({id:e==undefined?t:e})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},ShowUserResume:function(e){function t(t){self.currentController=new p({id:e==undefined?t:e})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},imageUp:function(){function e(e){var t=new o({route:"",url:this.posturl,attr:this.attribute})}this.cancelAjaxRequests(),this.loadStyles(),this.initialiRoutesInit(e)},videoPreview:function(){function e(e,t){var n=new a({url:e,attr:t})}this.cancelAjaxRequests(),this.loadStyles(),k("add-video").subscribe(e)},showGame:function(e){function t(t){self.currentController=new f({route:"",gameId:e,userId:t})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r();if(!e){this.notFound("team");return}this.removeCurrent(),this.initialiRoutesInit(t)},showRegistration:function(){function e(){self.currentController=new c({route:""})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.removeCurrent(),this.initialiRoutesInit(e)},showTag:function(e){function t(t){self.currentController=new v({id:e==undefined?t:e})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},showAddGame:function(e){function t(t){self.currentController=new m({id:e==undefined?t:e})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},showLogin:function(){T("body").empty(),r();var e=new g,t=new y({model:e})},showUsercreate:function(){function e(){var e=new b({route:""})}this.addUserTrigger(e)},addUserTrigger:function(e){routing.off("add-user"),routing.on("add-user",function(){e()})},showRegistration:function(){function e(){var e=new c({route:""})}this.cancelAjaxRequests(),this.loadStyles(),T("body").empty(),r(),this.initialiRoutesInit(e)},loadStyles:function(){k("load:css").publish([base_url+"css/bootstrap.css",base_url+"css/bootstrap-responsive.css",base_url+"css/app.css",base_url+"css/common.css",base_url+"css/jquery-ui-1.10.2.custom.css"])},addSubscribers:function(){k("load:css").subscribe(this.loadCss)},removeSubscribers:function(){k("load:css").unsubscribe(this.loadCss)},getStoredState:function(e,t){var n,r;return n=this.states.findByNameInStorage(e),N.isString(t)&&n&&n.data&&(r=n.data[t]),r||n},show:function(e){e=e||"body",T(e).removeClass("hide")},hide:function(e){e=e||"body",T(e).addClass("hide")},cssLoaded:[],loadCss:function(e){var n,r;if(!N.isArray(e))throw new Error("App method addCss expects an array");for(n=0;n<e.length;n++)r=e[n],N.isString(r)&&T.inArray(r,this.cssLoaded)<0&&(t.lib.loadCss(r),this.cssLoaded.push(r))}}),S}),define("profile/models/basics",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("profile/collections/orgs",["facade","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/orgs/"+this.id+"/"+this.sport_id:"/api/user/orgs/"+this.id+"?sport_id="+this.sport_id}}),r}),define("user/models/related",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{user_id:0,user_name:null,user_picture:null,teams:[{sport:null,position:null,org:null,season:null,year:null}],num_votes:0,num_followers:0},desc:"Related user information about the user",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("user/collections/relateds",["facade","collections","user/models/related","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("profile/collections/relateds",["facade","user/collections/relateds","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?"/test/user/related/"+this.id+"/"+this.sport_id:"/api/user/related/"+this.id+"?sport_id="+this.sport_id}}),r}),define("user/models/fitnessbasic",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,val:null,units:null},desc:"Fitness Basic information about the user",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("user/collections/fitnessbasics",["facade","collections","user/models/fitnessbasic","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;console.log("FITNESS BASICS:",r);for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),console.log(r[i]),console.log(r[i].data);var o=[];for(var u in r[i].data)console.log(r[i].data[u]),o.push(r[i].data[u]);o={data:o},console.log("GROUP:",o),s.set("payload",o),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profile/collections/fitnessbasics",["facade","user/collections/fitnessbasics","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/rdtree/"+this.id+"/?overview=1&sports_id="+this.sport_id:"/api/user/rdtree/"+this.id+"?overview=1&sports_id="+this.sport_id}}),r}),define("profile/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/videos/"+this.id+"/"+this.sport_id:"/api/user/videos/"+this.id+"?sport_id="+this.sport_id}}),r}),define("profile/collections/image-videos",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/media/"+this.id+"/"+this.sport_id:"/api/user/media/"+this.id+"?sport_id="+this.sport_id}}),r}),define("profile/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/comment/getall/"+this.id:"/api/comment/getall/?subject_enttypes_id="+this.subject_entity_type+"&subject_id="+this.id}}),r}),define("profile/collections/fans",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/followers/"+this.id+"/"+this.sport_id:"/api/user/followers/"+this.id+"?sport_id="+this.sport_id}}),r}),define("text!profile/templates/header.html",[],function(){return'{{#payload}}\r\n<div class="row-fluid">\r\n	\r\n	<div class="profile-heading">\r\n		<div class="sports-h"></div>\r\n            <h3 class="username">{{name}} \'{{grad_year}}</h3>\r\n            <h4>Position</h4>\r\n\r\n    </div>\r\n	\r\n	<div class="row-fluid profile-pic-outer">\r\n		<div class="span7 border-right">\r\n		    <div class="span6 textcenter">\r\n		        {{#user_picture_obj}}\r\n		        <img src="{{base_url}}{{image_path}}" alt="{{name}}" />\r\n		        {{/user_picture_obj}}\r\n		    </div>\r\n		    \r\n		    <div class="span6">\r\n			    	<div class="school-name">ORG NAME</div>\r\n			    	<div class="city">LOCATION</div>\r\n			    	<div class="teams">\r\n			    		 <div id="sports-info"></div>\r\n			    	</div>\r\n			    	<div class="height">{{#height_ft}}{{height_ft}}{{/height_ft}}</div>\r\n			    	<div class="weight">{{#weight_lb}}{{weight_lb}} lbs{{/weight_lb}}</div>\r\n	       </div>\r\n	    </div>\r\n	    \r\n	    <div class="stats-panel span5" style="width:35%;">\r\n	    	<div class="stats-header">Stats</div>\r\n	    	<div id="fitnessbasic-wrap"></div>\r\n	    </div>\r\n	</div>    \r\n    \r\n   </div>\r\n    \r\n</div>\r\n{{/payload}}\r\n'}),define("text!profile/templates/sports.html",[],function(){return'{{#payload}}\r\n    <img src="{{large_icon}}" class="sports-icon-h" data-id="{{id}}" />\r\n{{/payload}}\r\n'}),define("profile/collections/sports",["facade","sportorg/collections/sports","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/sports/"+this.id:"/api/user/sports/"+this.id}}),r}),define("text!profile/templates/sport-team.html",[],function(){return'{{#records}}\r\n    <a href="/#team/{{payload.id}}">{{#payload.team_name}}{{payload.team_name}}{{/payload.team_name}}</a><br />\r\n{{/records}}\r\n\r\n'}),define("profile/collections/teams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/teams/"+this.id+"/"+this.sport_id:"/api/user/teams/"+this.id+"?sports_id="+this.sports_id}}),r}),define("profile/views/sport-item",["vendor","views","utils","text!profile/templates/sport-team.html","profile/collections/teams","sportorg/views/team-list"],function(e,t,n,r){var i,s=e.$,o=t.SectionView,u=e.Mustache,a=n.lib.Channel,f=require("sportorg/views/team-list"),l=require("profile/collections/teams");return i=o.extend({tagName:"li",className:"sport",initialize:function(e){function i(e){t.initTeamList(),a("refresh-profilepage").publish(e)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.get("payload").sport_id;routing.off("showTwmList"),routing.on("showTwmList",function(e){i(e)})},initTeamList:function(){var e=this,t=s(".sports-h img.selected-sport-h").data("id");this.teams=new l,this.teams.id=this.id,this.teams.sports_id=t,this.teams.fetch(),s.when(this.teams.request).done(function(){console.log("TEAMS:",e.teams),e.setupTeamListView()})},setupTeamListView:function(){console.error(this.teams.toJSON());var e={};e.records=this.teams.toJSON();var t=u.to_html(this.template,e);this.$el.html(t)},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("profile/views/sport-list",["facade","views","utils","profile/views/sport-item"],function(e,t,n,r){var i,s,o=e._,u=t.CollectionView,a=t.SectionView;return s=u.extend(a.prototype),i=s.extend({__super__:u.prototype,id:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){u.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");o.bindAll(this),this.addSubscribers()}}),i}),define("profile/views/header",["require","text!profile/templates/header.html","text!profile/templates/sports.html","profile/models/basics","facade","views","utils","vendor","profile/collections/sports","profile/views/sport-list"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("profile/models/basics"),a=o.SectionView,f=e("profile/views/sport-list"),l=e("profile/collections/sports"),c=e("utils"),h=c.lib.Channel,p=e("vendor"),d=p.Mustache,v=s.$;return r=a.extend({id:"main-header",template:t,selectSportTemplate:n,events:{"click .sports-icon-h":"selectSport"},initialize:function(e){a.prototype.initialize.call(this,e),this.initSportList()},initSportList:function(){var e=this;this.sports=new l,this.sports.id=this.model.id,this.sports.fetch(),v.when(this.sports.request).done(function(){e.setupSportListView(),e.selectSport()})},setupSportListView:function(){console.log(this.sports);var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);console.log("SPORTS LIST VIEW",t.el),this.childViews.sportListView=t,this.callbacks.add(function(){n()}),e.$el.find("#sports-info").html(t.el);var r={payload:[]},s=t.collection;if(s.length){for(i=0;i<s.length;i++)r.payload[i]=s.at(i).get("payload");var o=d.to_html(e.selectSportTemplate,r);e.$el.find(".sports-h").html(o)}else e.$el.find("#sports-info").html("");t.render()},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){a.prototype.render.call(this,e,t,n)},selectSport:function(e){var t=e?v(e.target).data("id"):v(".sports-h img:first-child").data("id");v(".sports-icon-h").removeClass("selected-sport-h"),v(".sports-icon-h[data-id="+t+"]").addClass("selected-sport-h"),t&&(this.$(".sport-info").stop().slideUp(),this.$(".sport-info-"+t).stop().slideDown(),routing.trigger("showTwmList",t))}}),r}),define("profile/views/add-media",["require","text!media/templates/add-media.html","application","profile/models/addmedia","facade","views"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=i._;return r=o.extend({id:"add-media",template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","click #addGame":"openAddGamePopup"},setOptions:function(e){if(!this.model)throw new Error("ProfileAddMediaView expects option with model property.");this.model.userid=e.userid},openAddGamePopup:function(){routing.trigger("add-game",this.model.userid)},openAddImagePopup:function(e){var t=$(".selected-sport-h").data("id"),n="/api/user/addimage/"+this.model.userid,n="/api/user/addimage/"+this.model.userid,r={sports_id:t};routing.trigger("add-image",n,r)},openAddvideoPopup:function(e){var t="/api/user/addvideo/"+this.model.userid;Channel("add-video").publish(t)}}),r}),define("text!sportorg/templates/org-item.html",[],function(){return'{{#payload}}\r\n<div class="org-name">\r\n	{{org_name}}\r\n</div>\r\n\r\n<div class="select-team">\r\n	\r\n			{{#teams}}\r\n			<div class="game-box-outer">\r\n		<ul>\r\n			\r\n				{{#schedules}}\r\n				<li>\r\n				<a href="javascript: void(0);" class="win team-info-h">\r\n					\r\n						<div class="org-popup hide">\r\n							<ul>\r\n							{{#teams}}\r\n								<li>{{gameDay}} | VS. {{team_name}} | Home | W 2-1</li>\r\n							{{/teams}}\r\n							</ul>\r\n						</div>\r\n				</a>\r\n				</li>\r\n				{{/schedules}}\r\n			\r\n			</ul>\r\n	</div>\r\n			{{/teams}}\r\n			<!--li>\r\n				<a href="javascript: void(0);" class="background-orange">b</a>\r\n			</li-->\r\n		\r\n\r\n	<!--select name="team" id="select-team">\r\n	{{#teams}}\r\n	<option value="{{team_id}}">{{complevel}} - {{season}} {{year}}</option>\r\n	{{/teams}}\r\n	</select-->\r\n\r\n	<!--div class="teams-info">\r\n	{{#teams}}\r\n	<div class="team-info team-info-{{team_id}}" style="display:none">\r\n	<table class="table team-schedule">\r\n	{{#schedules}}\r\n	<tr><!--\r\n	<td>\r\n	{{#complevel}}\r\n	{{name}}\r\n	{{/complevel}}\r\n	</td>\r\n	<td>\r\n	{{#season}}\r\n	{{name}}\r\n	{{/season}}\r\n	</td>\r\n	<td>{{game_name}}</td>\r\n	<td>{{game_location}}</td>\r\n	<td>{{game_day}}</td>\r\n	<td>{{mascot}}</td>\r\n	<!--<td>{{num_votes}}</td>\r\n	<td>{{num_followers}}</td>\r\n	</tr>\r\n	{{/schedules}}\r\n	</table>\r\n	<a href="team/schedule/{{team_id}}">View full schedule</a>\r\n	<table class="table team-stats">\r\n	<tr>\r\n	<td></td>\r\n	{{#stats}}\r\n	<td>{{name}}</td>\r\n	{{/stats}}\r\n	</tr>\r\n	<tr>\r\n	<td>{{statval}}</td>\r\n	{{#stats}}\r\n	<td>{{value}}</td>\r\n	{{/stats}}\r\n	</tr>\r\n	</table>\r\n	<a href="team/stats/{{team_id}}">View complete stats</a>\r\n	</div>\r\n	{{/teams}}-->\r\n</div>\r\n</div>\r\n{{/payload}}'}),define("sportorg/views/org-item",["vendor","views","utils","text!sportorg/templates/org-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"org",events:{"change #select-team":"selectTeam","click .team-info-h":"showinfo"},showinfo:function(e){e.preventDefault(),s(e.target).parents(".org-popup").length||(s(e.target).find(".org-popup").hasClass("hide")?(s(".org-popup").addClass("hide"),s(e.target).find(".org-popup").removeClass("hide")):s(".org-popup").addClass("hide"))},initialize:function(e){s("body").click(function(e){!s(e.target).hasClass("team-info-h")&&!s(e.target).hasClass("org-popup")&&s(e.target).parents(".org-popup").length===0&&s(".org-popup").addClass("hide")}),this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this.select_team=this.$("#select-team"),this.selectTeam(),this},selectTeam:function(e){var t=this.select_team.val();this.$(".team-info").stop().slideUp(),this.$(".team-info-"+t).stop().slideDown()}}),i}),define("sportorg/views/org-list",["facade","views","utils","sportorg/views/org-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"org-list",name:"Org List",tagName:"ul",_tagName:"li",_className:"org",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("OrgListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!user/templates/related-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{user_picture}}" alt="{{user_name}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        <div class="username">{{user_name}}</div>\r\n        <div class="votes">Votes: {{num_votes}}</div>\r\n        <div class="fans">Followers: {{num_followers}}</div>\r\n    </div>\r\n</div>\r\n<table class="table">\r\n{{#teams}}\r\n    <tr>\r\n        <td>{{sport}}</td>\r\n        <td>{{position}}</td>\r\n        <td>{{org}}</td>\r\n        <td>{{season}}</td>\r\n        <td>{{year}}</td>\r\n    </tr>\r\n{{/teams}}\r\n</table>\r\n{{/payload}}\r\n\r\n'}),define("user/views/related-item",["vendor","views","utils","text!user/templates/related-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"related",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("user/views/related-list",["facade","views","utils","user/views/related-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"related-list",name:"Related List",tagName:"ul",_tagName:"li",_className:"related",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("RelatedListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!user/templates/fitnessbasic-item.html",[],function(){return'{{#payload}}\r\n	{{#data}}\r\n		<div class="fitness-overview-data-piece" style="">\r\n			<img title="{{name}}" src="{{icon}}" style=""/>\r\n			<span style="font-family: \'Avenir\';font-weight: bolder; font-size: 2em;">{{val}}</span>\r\n		</div>\r\n	{{/data}}\r\n{{/payload}}\r\n\r\n'}),define("user/views/fitnessbasic-item",["vendor","views","utils","text!user/templates/fitnessbasic-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"fitnessbasic",initialize:function(e){this.template=r},calculate:function(){if(this.unit_type=="time")var e="00:"+this.user_value+":00";else var e=this.user_value;return console.log(e),e},render:function(){var e={};e=this.model.toJSON(),e.view=this,console.log("Fitness Data getting passed to template",e);var t=u.to_html(this.template,e);return this.$el.html(t),this}}),i}),define("user/views/fitnessbasic-list",["facade","views","utils","user/views/fitnessbasic-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"fitnessbasic-list",name:"Fitness Basic List",tagName:"ul",_tagName:"li",_className:"fitnessbasic",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("FitnessBasicListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("profile/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/addvideo/"+this.id+"/"+this.sport_id:"/api/user/addvideo?team_id="+this.id+"&sport_id="+this.sport_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gameaddvideo:fetch").publish(e)}}),r}),define("profile/views/add-video",["require","profile/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("ProfileAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id}))}}),r}),define("profile/views/video-list",["facade","utils","media/views/video-list","profile/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gameaddvideo:fetch").subscribe(i)}}),i}),define("profile/views/commentof-list",["facade","utils","site/views/comment-list"],function(e,t,n){var r;return r=n.extend({setupFormView:function(){}}),r}),define("profile/views/commenton-list",["facade","utils","site/views/comment-list","profile/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){s(e)})}}),s}),define("profile",["require","text!profile/templates/layout.html","application","votes/views/vote","facade","controller","models","views","utils","profile/models/basics","profile/models/addmedia","profile/collections/orgs","profile/collections/relateds","profile/collections/fitnessbasics","profile/collections/videos","profile/collections/image-videos","profile/collections/commentsof","profile/collections/commentson","profile/collections/fans","profile/views/header","profile/views/add-media","sportorg/views/org-list","user/views/related-list","user/views/fitnessbasic-list","profile/views/video-list","profile/views/image-video-list","profile/views/commentof-list","profile/views/commenton-list","profile/views/fans-image-list","application"],function(e,t,n,r){console.log(n);var i,s=e("facade"),o=e("controller"),u=e("models"),a=e("views"),f=e("utils"),l=e("profile/models/basics"),c=e("profile/models/addmedia"),h=e("profile/collections/orgs"),p=e("profile/collections/relateds"),d=e("profile/collections/fitnessbasics"),v=e("profile/collections/image-videos"),m=e("profile/collections/commentsof"),g=e("profile/collections/commentson"),y=e("profile/collections/fans"),b=e("profile/views/header"),w=e("profile/views/add-media"),E=e("sportorg/views/org-list"),S=e("user/views/related-list"),x=e("user/views/fitnessbasic-list"),T=e("profile/views/image-video-list"),N=e("profile/views/commentof-list"),C=e("profile/views/commenton-list"),k=e("profile/views/fans-image-list"),L=e("media/models/image");return LayoutView=a.LayoutView,$=s.$,_=s._,debug=f.debug,Channel=f.lib.Channel,cssArr=["/pages/profile/profile.css"],i=o.extend({initialize:function(e){var t=this;return debug.log("start initialize"),Channel("load:css").publish(cssArr),_.bindAll(t),t.handleOptions(e),t.scheme=[],e.userId?(debug.log(e.userId),t.id=e.userId,t.init()):t.init(),t},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds()},createData:function(){function t(t){e.refreshPage(),e.orgs=new h,e.orgs.id=e.id,e.orgs.sport_id=t,e.orgs.fetch(),e.relateds=new p,e.relateds.id=e.id,e.relateds.sport_id=t,e.relateds.fetch(),e.fitnessbasics=new d,e.fitnessbasics.id=e.id,e.fitnessbasics.sport_id=t,e.fitnessbasics.fetch(),e.images=new v,e.images.id=e.id,e.images.sport_id=t,e.images.fetch(),e.fans=new y,e.fans.id=e.id,e.fans.sport_id=t,e.fans.fetch(),e.handleDeferredsDynamic()}this.basics=new l({id:this.id}),this.basics.id=this.id,this.basics.fetch(),this.addmedia=new c,this.addmedia.id=this.id,this.fans=new y,this.fans.id=this.id,this.fans.fetch(),this.images=new v,this.images.id=this.id,this.images.fetch();var e=this;Channel("refresh-profilepage").subscribe(t)},handleDeferreds:function(){var e=this;$.when(this.basics.request).done(function(){e.setupHeaderView(),e.initVoteView(),e.setupAddMediaView();var t=e.basics.get("payload").enttypes_id;e.commentson=new g,e.commentson.subject_entity_type=t,e.commentson.id=e.id,e.commentson.fetch(),$.when(e.commentson.request).done(function(){e.setupCommentOnListView()})})},initVoteView:function(){var e=new r({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},handleDeferredsDynamic:function(){var e=this;$.when(this.orgs.request).done(function(){e.setupOrgListView()}),$.when(this.relateds.request).done(function(){e.setupRelatedListView()}),$.when(this.fitnessbasics.request).done(function(){e.setupFitnessBasicListView()}),$.when(this.images.request).done(function(t){e.setupImageListView()}),$.when(this.fans.request).done(function(t){e.setupFansListView()})},refreshPage:function(){var e;this.orgListView&&($(this.orgListView.destination).html(""),e=$.inArray(this.orgListView,this.scheme),~e&&this.scheme.splice(e,1)),this.relatedListView&&($(this.relatedListView.destination).html(""),e=$.inArray(this.relatedListView,this.scheme),~e&&this.scheme.splice(e,1)),this.fitnessBasicListView&&($(this.fitnessBasicListView.destination).html(""),e=$.inArray(this.fitnessBasicListView,this.scheme),~e&&this.scheme.splice(e,1)),this.imageListView&&($(this.imageListView.destination).html(""),e=$.inArray(this.imageListView,this.scheme),~e&&this.scheme.splice(e,1)),this.fansListView&&($(this.fansListView.destination).html(""),e=$.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1))},setupHeaderView:function(){var e;e=new b({model:this.basics,name:"Header",destination:"#main-header"}),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(){var e;e=new w({model:this.addmedia,name:"Add Media",destination:"#add-media",userid:this.id});for(var t in this.scheme)this.scheme[t].id=="add-media"&&delete this.scheme[t];this.scheme.push(e),this.layout.render()},setupOrgListView:function(){var e;this.orgListView=new E({collection:this.orgs,destination:"#games_div"}),this.scheme.push(this.orgListView),this.layout.render()},setupRelatedListView:function(){var e;this.relatedListView=new S({collection:this.relateds,destination:"#related-wrap"}),this.scheme.push(this.relatedListView),this.layout.render()},setupFitnessBasicListView:function(){var e;this.fitnessBasicListView=new x({collection:this.fitnessbasics,destination:"#fitnessbasic-wrap"}),this.scheme.push(this.fitnessBasicListView),this.layout.render()},setupVideoListView:function(){var e;this.videoListView=new ProfileVideoListView({collection:this.videos,destination:"#video-wrap"}),this.scheme.push(this.videoListView),this.layout.render()},setupImageListView:function(){var e=this;routing.on("image-upload-success",function(t){e.updateImages(t)}),this.imageListView=new T({collection:this.images,destination:"#image-wrap",name:"imagesView"}),this.scheme.push(this.imageListView),this.layout.render()},setupFansListView:function(){this.fansListView=new k({collection:this.fans,destination:"#fans-div",name:"fansView"}),this.scheme.push(this.fansListView),this.layout.render()},updateImages:function(e){var t=new L;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t)},setupCommentOfListView:function(){var e;e=new N({collection:this.commentsof,destination:"#commentof-wrap"})},setupCommentOnListView:function(){var e;console.log(this.commentson),this.commentOnListView=new C({collection:this.commentson,destination:"#commenton-wrap"}),this.scheme.push(this.commentOnListView),this.layout.render()},setupLayout:function(){var e;return e=new LayoutView({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),i});