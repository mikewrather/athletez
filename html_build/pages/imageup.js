/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!imageup/templates/basic.html",[],function(){return'<!--<div id="url" class="url">URL\r\n	<select id="url_tag">\r\n		<option value="user">Users</option>\r\n		<option value="game">Games</option>\r\n		<option value="team">Teams</option>\r\n	</select>\r\n	<input type="text" name="id_tag" id="id_tag" placeholder="ID"/>\r\n</div>\r\n<a href="#imgUploadModal" role="button" class="btn" data-toggle="modal">Upload Image</a>\r\n--><div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n		<h3 id="label">Image Uploader</h3>\r\n	</div>\r\n\r\n	<div class="side-panel" id="left_upload">\r\n		\r\n	</div>\r\n\r\n	<div class="main-body">\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n<div class="clear"></div>\r\n</div>'}),define("text!imageup/templates/uploader.html",[],function(){return'<div id="main-content-img" class="imageholder">\r\n	<div id="imageholder" class="textcenter m_top_50 bigger">Drag & Drop Here</div>\r\n	<div class="textcenter m_top_50 bigger">OR</div>\r\n	<div align="center" class="m_top_50"><input type="file" id="image_file" class="files" name="image_file[]" multiple="">\r\n		<div class="clear"></div>\r\n		<div class="textcenter m_top_50 bigger">\r\n			<button class="btn fileuploader btn-primary" id="imageup" type="button">Upload and Finish</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div id="main-content-tag-section" class="imageholder floatLeft m_top_2 displayNone">\r\n		<div id="image-tagging" class="displayNone">\r\n			\r\n		</div>\r\n		<div id="select-allup" class="tag_select_all">\r\n			\r\n		</div>	\r\n</div>'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("media/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),t!=undefined?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},selectImageType:function(e){return r.each(this.get("payload").types,function(t,n){n==e&&(this.get("payload").image_path=t.url)},this),this}}),n}),define("imageup/models/basic",["facade","media/models/image"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("imageup/models/imageupload",["facade","media/models/image"],function(e,t){var n,r=e._;return ImageUploadModel=t.extend({initialize:function(e,n){t.prototype.initialize.call(e,n)}}),n}),define("imageup/models/errorshow",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{msg:null,color:null}),initialize:function(e,t){}}),n}),define("media/collections/images",["facade","collections","media/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.processItemFromPayload(t,i),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("imageup/collections/basics",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/"+this.id+"/images/":"/api/user/images/"}}),r}),define("imageup/models/preview",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({initialize:function(e,t){}}),n}),define("text!imageup/templates/select_all.html",[],function(){return'<div class="well-large div_select_all">\r\n	<div class="text-center m_top_20 bigger">SELECT IMAGES TO TAG A TEAM, PLAYER OR GAME</div>\r\n	<div class="clear"></div>\r\n	<div class="text-center m_top_20 bigger" >OR</div>\r\n	<div class="clear"></div>\r\n	<div class="text-center m_top_20 bigger"><a href="javascript:void(0)" id="btn_select_all_h">SELECT ALL</a></div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!usercontrols/tag/templates/layout.html",[],function(){return'<div class="well-large container_batch_tag">\r\n	<h4>Batch Tag</h4>\r\n	<div class="section-Add-Sports_h well-large">\r\n	<div class="m_bottom_10">\r\n		Select Sport:\r\n	</div>\r\n	<div class="row-fluid section_inner">\r\n		<span class="span-ddl-sports-tag_h dropdown"></span>\r\n		<div class="clear"></div>\r\n		<!-- <select class="ddl-tag-sports_h" style=></select> -->\r\n		<span class="displayNone field-message"></span> \r\n	<br/>\r\n	<button class="btn btn-primary btn-tag-sport_h displayNone">Done</button>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="div-tag-list_h section_outer">		\r\n	<div class="section-sports_h displayNone">\r\n		<label class="lbl-tag-sport-name_h bigger"></label>\r\n		<!-- <div class="clear"></div> -->\r\n		<span>\r\n			<a href="javascript:void(0)" class="btn-tag-edit-sport_h">Edit</a></span>\r\n	</div>\r\n	\r\n	<div class="section-team_h displayNone section_inner">\r\n		<strong>Teams :</strong> <br/>\r\n		<label class="lbl-tag-team-name_h"></label><span><button class="btn btn-tag-edit-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-team_h displayNone section_outer">\r\n		Tag a Team : \r\n		<br/>\r\n		<input type="text" class="txt-tag-team-state_h" placeholder="Enter State" />\r\n		<div class="clear"></div>\r\n		<input type="text" class="txt-tag-team-city_h displayNone" placeholder="Enter City" />\r\n		<div class="clear"></div>\r\n		<input type="text"class="txt-tag-team-school_h displayNone" placeholder="Enter Team" />\r\n	<!--	<select class="ddl-tag-team-level_h displayNone"></select>\r\n		<select class="ddl-tag-team-season_h displayNone"></select> -->\r\n	 	<div class="clear"></div>\r\n	 	<span class="displayNone field-message"></span> \r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-team-Done_h displayNone">Done</button>\r\n		\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-player_h displayNone section_outer">\r\n		Tag a Player : \r\n		<br/>\r\n		<div class="section-tag-player-input_h">\r\n		<input type="text" class="txt-tag-player-name_h" placeholder="Enter Name" />\r\n		</div>\r\n		<div class="clear"></div>\r\n		<span class="btn-tag-add-player_h strong">\r\n			+\r\n		</span>\r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-player-Done_h">Done</button>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-team-players_h displayNone section_inner">\r\n		<strong>Players :</strong> \r\n<div class="clear"></div>\r\n		<label class="lbl-tag-players-name_h"></label>\r\n		<span class="displayNone"><button class="btn btn-tag-edit-players-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-game_h displayNone section_outer">\r\n		<strong>Tag a Game : </strong>\r\n		<div class="clear"></div>\r\n		<span class="span-ddl-games-tag_h  dropdown"></span>\r\n		<!-- <select class="ddl-tag-game_h"></select> -->\r\n		<div class="clear"></div>\r\n		<span class="displayNone field-message"></span>\r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-game-Done_h displayNone">Done</button>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-team-games_h displayNone section_outer">\r\n		<strong>Games :</strong>\r\n		<div class="clear"></div>\r\n		<label class="lbl-tag-games-name_h"></label><span class="displayNone"><button class="btn btn-tag-edit-games-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-link_h displayNone section_outer">\r\n		Tag:\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-team_h">Team</a>\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-player_h displayNone">Player</a>\r\n		&nbsp;<a href="javascript:void(0)" class="link-tag-Game_h displayNone">Game</a>\r\n		<div class="clear"></div>\r\n		<span class="displayNone field-message"></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<!-- <div class="section_outer">\r\n		<button class="btn btn-primary btn-tag-Finish_h displayNone">Finish</button>\r\n	</div> -->\r\n</div>'}),define("text!imageup/templates/error_template.html",[],function(){return'<div class="alert {{color}}" align="center">\r\n	<button type="button" class="close" data-dismiss="alert">&times;</button>\r\n	{{msg}}\r\n</div>'}),define("imageup/views/errors",["require","text!imageup/templates/error_template.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=i.SectionView,f=r.$,l=r._,c=s.debug;return n=a.extend({id:"main-content",template:t,initialize:function(e){a.prototype.initialize.call(this,e),c.log("error view")}}),n}),define("user/models/basics",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"undefined"==typeof this.id?testpath?testpath+"/user/basics/":"/api/user/basics/":testpath?testpath+"/user/basics/"+this.id:"/api/user/basics/"+this.id},initialize:function(){n.__super__.initialize.apply(this,arguments)},user_pic_small:function(){return this.payload.user_picture.types.small_thumb.url}}),n}),define("usercontrols/tag/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports",["facade","collections","sportorg/models/sport","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){return testpath?testpath+"/sport_search":(this.state_name==undefined,"/api/sport/search/?sport_name="+this.sport_name+"&gender="+this.gender)},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){}}),i}),define("sportorg/collections/sports_listall",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/sport/listall/"},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload,r="";n.male=="1"&&n.female=="1"?r="":n.male=="1"?r="Men's ":n.female=="1"&&(r="Women's "),t.payload.custom_name=r+n.sport_name,t.payload.team_type=n.sport_type?n.sport_type.name||"":""}}),t}}),i}),define("location/models/state",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{location_id:0,location_name:null,location_country:null},desc:"State Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("location/collections/states",["facade","collections","location/models/state","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){return testpath?testpath+"/state_search":this.state_name==undefined?"/api/state/search":"/api/state/search/?state_name="+this.state_name},fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("sportorg/models/org",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/orgs",["facade","collections","sportorg/models/org","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i],u=o.teams,a=[];for(var f in u){var l=u[f];a.push(l)}o.teams=a,s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),i}),define("usercontrols/tag/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+"/api/org/search/"+this.sport_id:"/api/org/search?states_id="+e.states_id+"&org_name="+e.org_name},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("sportorg/collections/teams",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}}),i}),define("usercontrols/tag/collections/teams",["facade","collections","sportorg/collections/teams","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.team_name&&(e+="team_name="+this.team_name),this.team_name&&(e+="&searchtext="+this.team_name),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.sports_id&&(e+="&sports_id="+this.sports_id),"/api/team/search?"+e}}),i}),define("models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("location/collections/cities",["facade","collections","models/common","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){if(this.city_name==undefined)return"/api/city/search";var e="?city_name="+this.city_name;return this.states_id&&(e+="&states_id="+this.states_id),"/api/city/search/"+e},fetchSuccess:function(e,t){e.reset();var n=t.payload;if(n!=null)for(i=0;i<(n.length>10?10:n.length);i++){var r={};r.city=n[i].name,r.county=n[i].county.name,r.state=n[i].county.state.name,r.id=n[i].id,e.push(r)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("user/models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("user/collections/users",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,url:function(){var e="";return this.user_name&&(e+="searchtext="+this.user_name),this.sports_id&&(e+="&sports_id="+this.sports_id),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.team_id&&(e+="&team_id="+this.cities_id),"/api/user/search?"+e},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("sportorg/models/game",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,game_name:null,game_day:null,game_time:null,game_picture:null,teams:[{team_name:null,team_location:null,points_scored:0,points_against:0,is_winner:null}],game_location:null},desc:"Game information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/games",["facade","collections","sportorg/models/game","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload;t.payload.custom_name=n.game_name}}),t}}),s}),define("usercontrols/tag/collections/games",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.sports_id&&(e+="sports_id="+this.sports_id+"&"),this.teams_id&&(e+="teams_id="+this.teams_id+"&"),this.states_id&&(e+="states_id="+this.states_id+"&"),this.cities_id&&(e+="cities_id="+this.cities_id+"&"),"/api/game/search/0?"+e}}),i}),define("sportorg/models/complevel",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel information",exec_data:{exec_time:0,exec_error:!1}}),fetchSuccess:function(e,t){}}),n}),define("usercontrols/tag/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("text!usercontrol/dropdown/template/layout.html",[],function(){return'<div class="dropdown-container">\r\n	<input type="hidden" class="hidden-input-dropdown-h" value="" />\r\n	<div class="drop-down-outer">\r\n		<div class="region-dark dropdown-header-box">\r\n			{{dropView.title}}\r\n		</div>\r\n		<div class="down-arrow-outer">\r\n			<a href="javascript: void(0);" class="down-arrow up-down-arrow-h">\r\n				<span class="icon-white icon-chevron-down"></span>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<ul class="common-dropdown">\r\n		{{#records}}\r\n			<li class="{{#dropView.defaultSelected}}{{dropView.defaultSelected}}{{/dropView.defaultSelected}}">\r\n				<a data-id="{{#dropView.getRecordId}}{{dropView.getRecordId}}{{/dropView.getRecordId}}" href="javascript: void(0);">{{#dropView.getRecordValue}}{{dropView.getRecordValue}}{{/dropView.getRecordValue}}</a>\r\n			</li>\r\n		{{/records}}\r\n	</ul>\r\n</div>\r\n'}),define("usercontrol/dropdown/view/dropdown",["require","text!usercontrol/dropdown/template/layout.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p,d;return p=h.View.extend({template:t,multiple:!1,selectedOptions:[],className:"dropdown-wrapper",events:{"click .up-down-arrow-h":"showDropdown","click li a":"selectOptions"},selectOptions:function(e){var t=l(e.target).data("id");this.multiple?this.setMultipleOptions(t,e):this.setSingleOption(t,e),this.showSelectedValue(),this.callback&&this.callback(this.selectedOptions)},showSelectedValue:function(){var e=this.$el.find(".common-dropdown li.selected").text()||this.title;this.$el.find(".dropdown-header-box").html(e)},setMultipleOptions:function(e,t){var n=this.checkifExists(e);n==-1?(l(t.target).parent().addClass("selected"),this.selectedOptions.push(e)):(l(t.target).parent().removeClass("selected"),this.selectedOptions.splice(n,1))},setSingleOption:function(e,t){var n=this.checkifExists(e);n==-1&&(this.selectedOptions=[],console.log(this.$el.find(".common-dropdown li")),this.$el.find(".common-dropdown li").removeClass("selected"),l(t.target).parent().addClass("selected"),this.selectedOptions.push(e),this.$el.find(".hidden-input-dropdown-h").val(e),this.hideDropdown())},checkifExists:function(e){var t=-1;for(var n in this.selectedOptions)if(this.selectedOptions[n]==e){t=n;break}return t},initialize:function(e){d=this,n=this,this.selectedOptions=[],n.setOptions(e),this.render(),this.$el.find(".hidden-input-dropdown-h").attr("id",this.elementId)},hideDropdown:function(e){if(!e||!this.$el.find(l(e.target)).parents(".dropdown-container").length)this.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),this.$el.find(".up-down-arrow-h span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),this.$el.find(".common-dropdown").slideUp()},showDropdown:function(e){e.preventDefault();var t=this;l(e.currentTarget).find("span").hasClass("icon-chevron-down")?(l(e.currentTarget).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up"),l(".dropdown-container").removeClass("increase-dropown-zindex"),t.$el.find(".dropdown-container").addClass("increase-dropown-zindex"),l("html").bind("click",function(e){t.hideDropdown(e)})):(t.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),l(e.currentTarget).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down")),l(e.currentTarget).parents(".dropdown-container").find(".common-dropdown").slideToggle()},getRecordId:function(){return this.payload[d.data.recordId]},defaultSelected:function(e){if(d.multiple){if(_.isArray(d.selectedValue))for(var t in d.selectedValue)if(d.selectedValue[t]==this.payload[d.data.recordId])return"selected"}else if(d.selectedValue&&d.selectedValue==this.payload[d.data.recordId])return"selected"},getRecordValue:function(){return this.payload[d.data.recordValue]},render:function(){this.data.dropView=this;if(!this.selectedValue){if(this.data.records.length)var e=this.data.records[0].payload[this.data.recordId];this.multiple?(this.selectedValue=[],this.selectedValue.push(e)):this.selectedValue=e}var t=this,n=f.to_html(t.template,this.data);return l(t.el).html(n),this.targetView.$el.find(this.destination).html(this.el),this.$el.find(".hidden-input-dropdown-h").val(this.selectedValue),this.selectedOptions.push(this.selectedValue),this.showSelectedValue(),l("#"+this.elementId).length?t.callback&&t.callback(this.selectedOptions):setTimeout(function(){if(!t.$el.find("li.selected").length){var e=t.$el.find(".common-dropdown li:first-child");e.addClass("selected"),t.$el.find("#"+t.elementId).val(e.find("a").data("id")),t.showSelectedValue()}t.callback&&t.callback(t.selectedOptions)},200),!0},setOptions:function(e){for(var t in e)this[t]=e[t]}}),p}),define("usercontrols/tag/views/main",["require","text!usercontrols/tag/templates/layout.html","facade","views","utils","vendor","usercontrols/tag/models/basic_info","sportorg/collections/sports_listall","location/collections/states","usercontrols/tag/collections/schools","usercontrols/tag/collections/teams","location/collections/cities","user/collections/users","usercontrols/tag/collections/games","usercontrols/tag/models/complevel","usercontrol/dropdown/view/dropdown"],function(e){var t=e("text!usercontrols/tag/templates/layout.html"),n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrols/tag/models/basic_info"),h=e("sportorg/collections/sports_listall"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrols/tag/collections/schools"),m=e("user/collections/users"),g=e("usercontrols/tag/collections/games"),y=e("usercontrols/tag/collections/teams"),b=e("usercontrols/tag/models/complevel"),w=e("usercontrol/dropdown/view/dropdown"),E=s.extend({template:t,tagData:{Game:{},Player:{},Team:{}},events:{"change .ddl-tag-sports_h":"changeSport","click .btn-tag-sport_h":"sportsDone","click .btn-tag-edit-sport_h":"editSport","click .link-tag-team_h":"showTeamSection","keyup .txt-tag-team-state_h":"keyupState","blur .txt-tag-team-state_h":"changeState","keyup .txt-tag-team-city_h":"keyupCity","blur .txt-tag-team-city_h":"changeCity","keyup .txt-tag-team-school_h":"keyupSchool","blur .txt-tag-team-school_h":"changeSchool","change .ddl-tag-team-level_h":"changeCompLevel","change .ddl-tag-team-season_h":"changeSeason","click .btn-tag-team-Done_h":"doneTagTeamTagging","click .link-tag-player_h":"showPlayer","click .btn-tag-add-player_h":"addPlayer","keyup .txt-tag-player-name_h":"keyUpPlayer","change .txt-tag-player-name_h":"setPlayerId","click .btn-tag-player-Done_h":"donePlayerTagging","click .link-tag-Game_h":"showGameSection","click .btn-tag-game-Done_h":"doneGameTagging","change .ddl-tag-game_h":"changeGame","click .btn-tag-Finish_h":"finishTagging"},controls:{secAddSports:".section-Add-Sports_h",divTagList:".div-tag-list_h",secSports:".section-sports_h",lblSportName:".lbl-tag-sport-name_h",btnEditSport:".btn-tag-edit-sport_h",btnSportsDone:".btn-tag-sport_h",ddlSports:".ddl-tag-sports_h",spnSports:".span-ddl-sports-tag_h",dropdownHeader:".dropdown-header-box",secTeam:".section-team_h",lblTeamName:".lbl-tag-team-name_h",secTagTeam:".section-tag-team_h",txtTeamState:".txt-tag-team-state_h",txtTeamCity:".txt-tag-team-city_h",txtTeamSchool:".txt-tag-team-school_h",ddlTeamLevel:".ddl-tag-team-level_h",ddlTeamSeason:".ddl-tag-team-season_h",btnTeamDone:".btn-tag-team-Done_h",secPlayer:".section-tag-player_h",secPlayerInput:".section-tag-player-input_h",txtPlayerName:".txt-tag-player-name_h",additionalPlayer:".additional_h",btnAddPlayer:".btn-tag-add-player_h",btnPlayerDone:".btn-tag-player-Done_h",sectionSelectedPlayers:".section-team-players_h",lblPlayerNames:".lbl-tag-players-name_h",secGame:".section-tag-game_h",ddlGame:".ddl-tag-game_h",btnGameDone:".btn-tag-game-Done_h",secFooterLinks:".section-link_h",lnkTeam:".link-tag-team_h",lnkPlayer:".link-tag-player_h",lnkGame:".link-tag-Game_h",sectionSelectedGames:".section-team-games_h",lblGameNames:".lbl-tag-games-name_h",spnGames:".span-ddl-games-tag_h",btnTeamFinish:".btn-tag-Finish_h",fieldMessage:".field-message",fieldError:".field-error",hdnSportsIdData:"hdn_sport_id",hdnSportsId:"#hdn_sport_id",hdnGamesIdData:"hdn_game_id",hdnGamesId:"#hdn_game_id"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid"},inlineTemplates:{sportOption:'{{#sports}}<option value="{{sport_id}}">{{sport_name}}</option>{{/sports}}',compLevelOption:'{{#levels}}<option value="{{complevel_id}}">{{complevel_name}}</option>{{/levels}}',seasonOption:'{{#seasons}}<option value="{{season_id}}">{{season_name}}</option>{{/seasons}}',addPlayerText:'</br><input type="text" class="txt-tag-player-name_h additional_h" placeholder="Enter Name" value="" />'},messages:{dataNotExist:"Data Does Not Exist . ",dataNotExistAwards:"Data Does Not Exists For Awards.",MandatoryFields:"Sports Id, Name , Year are mandatory.",selectOrganization:"Please Select High School Or Club & Season . ",selectTeamAndSports:"Please Select Both Sports And A Team . "},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel,this.sports_id=e.sports_id||null},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.fillSports()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e)},fillSports:function(){if(!(n.sports&&n.sports.length>0)){var e=new h;e.processResult=function(t){var r=e.ParseForDropdown();n.SetupSportsView(r)},e.fetch()}},SetupSportsView:function(e){n.sports=e;var t={};t.records=n.sports,t.recordId="id",t.recordValue="custom_name";var r=new w({data:t,title:"Select Sport",elementId:n.controls.hdnSportsIdData,destination:n.controls.spnSports,targetView:n,selectedValue:n.sports_id||null,callback:function(e){n.changeSport(e)}});n.sports_id&&n.sportsDone()},changeSport:function(e){e&&e!=0?l(n.destination).find(n.controls.btnSportsDone).fadeIn():l(n.destination).find(n.controls.btnSportsDone).fadeOut()},sportsDone:function(e){n.sportsId=l(n.destination).find(n.controls.hdnSportsId).val(),l(n.destination).find(n.controls.lblSportName).html(l(n.destination).find(n.controls.spnSports).find(n.controls.dropdownHeader).text()),l(n.destination).find(n.controls.secAddSports).fadeOut(),l(n.destination).find(n.controls.secSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()},editSport:function(){this.tagData={Game:{},Player:{},Team:{}},l(n.destination).find(n.controls.secSports).fadeOut(),l(n.destination).find(n.controls.secAddSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeOut(),l(n.destination).find("*").show(),l(n.destination).find(".displayNone").hide(),l(n.destination).find("input").val(""),l(n.destination).find(n.controls.additionalPlayer).remove()},showTeamSection:function(e){l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secTagTeam).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeOut(),l(n.destination).find(n.controls.btnTeamFinish).fadeOut(),l(e.target).hide()},keyupState:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.stateId),n.CheckTeamControlsVisibility();var i=new p;i.state_name=l(e.target).val(),n.stateFetchRequest=n.stateFetchRequest||[],n.stateFetchRequest.push(n.cityFetchRequest||[]),n.stateFetchRequest.push(n.teamFetchRequest||[]),n.stateFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.stateFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.states=[];for(var s in t)n.states.push(t[s].payload);n.states.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeState(e)},changeState:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.stateId);var r=!1;n.states_id="",n.states&&n.states.forEach(function(i,s){i["name"]==t&&(r=!0,n.states_id=i.id,l(e.target).attr(n.attributes.stateId,n.states_id),l(e.target).parent().find(n.controls.txtTeamSchool).removeAttr("disabled").attr(n.attributes.stateId,n.states_id))}),r||(n.states_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.stateId).fadeOut()),n.CheckTeamControlsVisibility()},keyupCity:function(e){var t=l(e.target).val(),r=[];if(t.length>2)if(n.isValidAutoCompleteKey(e)==1){try{n.$(e.target).autocomplete("destroy")}catch(i){}l(e.target).removeAttr(n.attributes.cityId),n.CheckTeamControlsVisibility();var s=new d;s.states_id=n.states_id,s.city_name=l(e.target).val(),console.log("City Request Abort Request Function AddGame/Main.js"),n.cityFetchRequest=n.cityFetchRequest||[],n.cityFetchRequest.push(n.teamFetchRequest||[]),n.cityFetchRequest=n.abortRequest(n.cityFetchRequest);var o=s.fetch();n.cityFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.cities=[];for(var i in t)n.cities.push(t[i]);n.cities.forEach(function(e,t){r.push(e.city)}),n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeCity(e)},changeCity:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.cityId);var r=!1;n.city_id="",n.cities&&n.cities.forEach(function(i,s){i["city"]==t&&(r=!0,n.city_id=i.id,l(e.target).attr(n.attributes.cityId,n.city_id))}),r?l(n.destination).find(n.controls.txtTeamSchool).removeAttr("disabled"):(n.city_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.cityId).fadeOut()),n.CheckTeamControlsVisibility()},keyupSchool:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility();var s=new y;s.states_id=l(e.target).attr(n.attributes.stateId),s.sports_id=l(n.destination).find(n.controls.hdnSportsId).val(),s.team_name=t,console.log("Team Request Abort Request Function"),n.TeamFetchRequest=n.abortRequest(n.TeamFetchRequest);var o=s.fetch();n.TeamFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.teams=[];for(var i in t)n.teams.push(t[i].payload);n.teams.forEach(function(e,t){r.push(e.team_name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeSchool(e)},changeSchool:function(e){var t=l(e.target).val(),r=!1;n.team_id=0,n.teams&&n.teams.forEach(function(i,s){var o=i.team_name;o==t&&(r=!0,n.team_id=i.id,l(e.target).attr(n.attributes.teamId,n.team_id))}),r||l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility()},CheckTeamControlsVisibility:function(){var e=l(n.destination).find(n.controls.txtTeamState).attr(n.attributes.stateId);e&&e!=""&&e!=0?l(n.destination).find(n.controls.txtTeamSchool).show():l(n.destination).find(n.controls.txtTeamSchool).val("").removeAttr(n.attributes.teamId).hide(),e=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnTeamDone).show():l(n.destination).find(n.controls.btnTeamDone).hide()},doneTagTeamTagging:function(e){var t=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId);n.team_id=t;var r=l(n.destination).find(n.controls.ddlTeamSeason).val(),i=[];if(t&&t!=""&&t!=0&&t&&t!=""&&t!=0){var s=l(n.destination).find(n.controls.txtTeamSchool).val();i.push(t),l(n.destination).find(n.controls.lblTeamName).html(s),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secTeam).fadeIn(),l(n.destination).find(n.controls.lnkPlayer).fadeIn(),l(n.destination).find(n.controls.lnkGame).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()}else n.$(e.target).parents(n.controls.secTagTeam).find(n.controls.fieldMessage).html(n.messages.selectOrganization).stop().fadeIn();var o={5:i};u(n.channel).publish(o)},showPlayer:function(e){l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeIn(),l(n.destination).find(n.controls.btnTeamFinish).fadeOut()},addPlayer:function(e){l(n.destination).find(n.controls.secPlayerInput).append(n.inlineTemplates.addPlayerText)},keyUpPlayer:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.playersId);var i=new m;i.user_name=t,i.states_id=n.states_id,i.sports_id=l(n.destination).find(n.controls.hdnSportsId).val(),console.log("Player Request Abort Request Function"),n.PlayerFetchRequest=n.abortRequest(n.PlayerFetchRequest);var s=i.fetch();n.PlayerFetchRequest.push(s),l.when(i.request).done(function(){var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.users=[];for(var s in t)n.users.push(t[s].payload);n.users.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.setPlayerId(e),n.isEnterKey(e)&&n.addPlayer(e);else l(e.target).removeAttr(n.attributes.playersId)},setPlayerId:function(e){if(n.users){var t=l(e.target).val().toLowerCase();for(var r in n.users)if(n.users[r].name.toLowerCase()==t){l(e.target).attr(n.attributes.playersId,n.users[r].id);return}}},donePlayerTagging:function(e){var t=[],r="",i=[];l(n.destination).find(n.controls.txtPlayerName).each(function(){var e=l(this).attr(n.attributes.playersId);e>0&&(t.push({name:l(this).val(),id:e}),r+=","+l(this).val(),i.push(e))});if(t.length>0){var s={players:t},o=l(n.destination).find(n.controls.sectionSelectedPlayers);l(o).find(n.controls.lblPlayerNames).html(r),l(o).fadeIn(),l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.btnTeamFinish).fadeIn();var a={1:i};u(n.channel).publish(a)}else{l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectPlayer).fadeIn();var o=l(n.destination).find(n.controls.sectionSelectedPlayers);l(o).find(n.controls.lblPlayerNames).html(""),l(o).fadeOut()}},showGameSection:function(e){n.bindGamesData(e),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.secGame).fadeIn(),l(n.destination).find(n.controls.btnTeamFinish).fadeOut()},bindGamesData:function(e){var t=l(n.destination).find(n.controls.hdnSportsId).val();if(n.sportsId){var r=new g;r.states_id=n.states_id,r.sports_id=n.sportsId,r.teams_id=n.team_id,l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html("").fadeOut(),r.processResult=function(e){n.SetupGamesView(e)},console.log("Team Request Abort Request Function"),n.GameFetchRequest=n.abortRequest(n.GameFetchRequest);var i=r.fetch();n.GameFetchRequest.push(i)}else l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectTeamAndSports).fadeIn()},SetupGamesView:function(e){var t=e.toJSON();if(t==null||t.length<1){l(n.destination).find(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.games=t;var r={};r.records=n.games,r.recordId="id",r.recordValue="game_name";var i=new w({data:r,title:"Select Game",elementId:n.controls.hdnGamesIdData,destination:n.controls.spnGames,targetView:n,selectedValue:n.sports_id||null,callback:function(e){n.changeGame(e)}})},changeGame:function(e){var t=e;t&&t!=""&&t!=0?l(n.destination).find(n.controls.secGame).find(n.controls.btnGameDone).fadeIn():l(n.destination).find(n.controls.secGame).find(n.controls.btnGameDone).fadeOut()},doneGameTagging:function(e){var t=this,n=l(e.target).parents(t.controls.secGame).find(t.controls.hdnGamesId).val(),r="";if(n&&n!=""&&n!=0){r=l(e.target).parents(t.controls.secGame).find(t.controls.spnGames).find(t.controls.dropdownHeader).text();var i={game:{id:n,game_name:r}},s=[];s.push(n),t.tagData.Game=i;var o=l(t.destination).find(t.controls.sectionSelectedGames);l(o).find(t.controls.lblGameNames).html(r),l(o).fadeIn(),l(t.destination).find(t.controls.secGame).fadeOut(),l(t.destination).find(t.controls.btnTeamFinish).fadeIn();var a={8:s};u(t.channel).publish(a)}else{var o=l(t.destination).find(t.controls.sectionSelectedGames);l(o).find(t.controls.lblGameNames).html(""),l(o).fadeIn()}},finishTagging:function(){}});return E}),define("imageup/views/basic",["require","text!imageup/templates/uploader.html","text!imageup/templates/select_all.html","text!usercontrols/tag/templates/layout.html","facade","views","utils","vendor","imageup/models/basic","imageup/views/errors","usercontrols/tag/views/main"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=o.SectionView,c=e("imageup/models/basic"),h=e("imageup/views/errors"),p=s.$,d=s._,v=u.debug,m=e("usercontrols/tag/views/main");return v.log("SectionView: ",l),i=l.extend({id:"imageuploadForm",events:{"click #imageup":"imageUploadClick","change #image_file":"imagePreview","dragover #imageholder":"drag","drop #imageholder":"drop","click #btn_select_all_h":"selectAllImages"},template:t,data:t,tagCollection:[],tagData:{1:[],5:[],8:[]},"const":{User:1,Team:5,Game:8},initialize:function(e,t){p("#errormsg, #preview").html(""),l.prototype.initialize.call(this,e),v.log("Image upload basic view"),this.attr=t,this.files_drag=[],this.scheme=e.scheme,this.layout=e.layout,this.dropedImage=e.dropedImage,this.attr?this.sports_id=this.attr.sports_id||null:this.sports_id=null,a("tag-team-image-success").empty(),a("tag-team-image-success").subscribe(this.tagFunction),this.setUpBottomView(),p("#imgUploadModal").modal("show"),p("#imgUploadModal").on("hidden",function(){routing.trigger("refresh-onImageUpload")}),p("#imgUploadModal").on("hide",function(){routing.trigger("refresh-onImageUpload")})},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault(),p("#errormsg").hide();var n=e.originalEvent.dataTransfer.files;this.files_drag=e.originalEvent.dataTransfer.files,n.length>0&&t.showLoader(t);var r=[],i=[],s=0;for(var o=0,u;u=n[o];o++){if(!u.type.match("image.*"))continue;var a=new FileReader;a.onload=function(e){return function(r){var o="preview_"+s;s++,i.push({preview_id:o,width:"250",height:"250",filesrc:r.target.result,title:escape(e.name)}),s==n.length&&(data={data:i},p("#image_file").attr("disabled","disabled"),routing.trigger("imageup-preview",data)),t.hideLoader()}}(u),t.showSelectAllImages(),a.readAsDataURL(u)}},imagePreview:function(e){var t=this;v.log("Image preview view"),p("#preview").hide(),p("#errormsg").hide();var n=p("#image_file")[0].files;console.log(n.length),n.length>0&&t.showLoader(t);var r=[],i=0,s,o=0;for(;s=n[i];i++){if(!s.type.match("image.*"))continue;var u=new FileReader;u.onload=function(e){return function(i){var s="preview_"+o;o++,r.push({preview_id:s,width:"250",height:"250",filesrc:i.target.result,title:escape(e.name)}),o==n.length&&(data={data:r},routing.trigger("imageup-preview",data),t.hideLoader())}}(s),u.readAsDataURL(s)}t.showSelectAllImages()},imageUploadClick:function(e){e.preventDefault();var t=this;p("#errormsg").hide(),p("#imageup").attr("disabled","disabled"),p(".closepreview").attr("disabled","disabled"),p(".rotate").attr("disabled","disabled");if(p(".previewimg").length==0){var n={msg:"Image Field Empty",color:"alert-error"};routing.trigger("imageup-msg",n),p("#imageup").removeAttr("disabled")}else if(this.dropedImage){var r=this.files_drag.length;jQuery.each(this.dropedImage.data[0].drag_info,function(e,n){var i=new FormData;if(p("#preview_"+e+"group").length>0){i.append("image_file",n),p("#preview_"+e+"rotang").val()>0?i.append("rotate",p("#preview_"+e+"rotang").val()):i.append("rotate","false");for(var s in t.attr)console.error(s,t.attr[s]),i.append(s,t.attr[s]);var o={dataum:i,id:e,len:r};console.log(o),routing.trigger("imageup-add-image",o)}}),this.files_drag=[],p("#imageup").removeAttr("disabled")}else if(this.files_drag.length>=1){var r=this.files_drag.length;jQuery.each(this.files_drag,function(e,n){var i=new FormData;if(p("#preview_"+e+"group").length>0){i.append("image_file",n),p("#preview_"+e+"rotang").val()>0?i.append("rotate",p("#preview_"+e+"rotang").val()):i.append("rotate","false");for(var s in t.attr)console.error(s,t.attr[s]),i.append(s,t.attr[s]);var o=t.getTagData(p("#preview_"+e+"group"));i.append("tag",JSON.stringify(o));var u={dataum:i,id:e,len:r};console.log(u),routing.trigger("imageup-add-image",u)}}),this.files_drag=[],p("#imageup").removeAttr("disabled")}else jQuery.each(p("#image_file")[0].files,function(e,n){var r=new FormData;if(p("#preview_"+e+"group").length>0){r.append("image_file",n),p("#preview_"+e+"rotang").val()>0?r.append("rotate",p("#preview_"+e+"rotang").val()):r.append("rotate","false");for(var i in t.attr)r.append(i,t.attr[i]);var s=t.getTagData(p("#preview_"+e+"group"));r.append("tag",JSON.stringify(s));var o={dataum:r,id:e,len:p("#image_file")[0].files.length};routing.trigger("imageup-add-image",o)}}),p("#imageup").removeAttr("disabled")},getTagData:function(e){var t=p(e).attr("gameIndex"),n=p(e).attr("teamIndex"),r=p(e).attr("userIndex"),i={1:[],5:[],8:[]};if(t>-1){var s=this.tagData[this.const.Game][t];s&&(i[this.const.Game]=s)}if(n>-1){var s=this.tagData[this.const.Team][n];s&&(i[this.const.Team]=s)}if(r>-1){var s=this.tagData[this.const.User][r];s&&(i[this.const.User]=s)}return i},setUpBottomView:function(){p("#main-content-tag-section").fadeIn(),this.setUpSelectAllView(),this.setUpTagView()},setUpSelectAllView:function(){var e=this;p("#select-allup").html(n)},setUpTagView:function(){var e=this;this.tagView=new m({model:this.model,template:r,name:"tag-image "+(new Date).toString(),destination:"#image-tagging",user_id:e.user_id||null,sports_id:e.sports_id,channel:"tag-team-image-success"}),this.scheme.push(this.tagView),this.layout.render()},tagFunction:function(e){var t=this;this.tagCollection.push(e);var n=0,r=p(".previewimg.selected");console.log("selected",r);for(var i in e)t.tagData[i]=t.tagData[i]||[],t.tagData[i].push(e[i]),n=t.tagData[i].length-1,i==t.const.Game?r.attr("gameIndex",n):i==t.const.Team?r.attr("teamIndex",n):i==t.const.User&&r.attr("userIndex",n)},selectAllImages:function(e){p(".previewimg").addClass("selected"),p("#select-allup").hide(),p("#image-tagging").show()},showSelectAllImages:function(){p("#select-allup").show(),p("#image-tagging").hide()}}),i}),define("text!imageup/templates/preview_template.html",[],function(){return'{{#data}} \r\n	<div class="previewimg" id="{{preview_id}}group"align="center">\r\n		\r\n		<div class="previewimgsrc" id="{{preview_id}}pre" align="center">\r\n			<img src="{{filesrc}}" class="img-polaroid" width="{{width}}" height="{{height}}" title="{{title}}" draggable="false">\r\n			<!-- <button type="button" class="close closepreview" value ="{{preview_id}}"data-dismiss="{{preview_id}}">&times;</button> -->\r\n			<input type="hidden" id="{{preview_id}}rotang" value="0">\r\n		</div>\r\n		<div class="clear"></div>\r\n		<div id="{{preview_id}}rot" class="previewrotate lnkFooter">\r\n			<button id="{{preview_id}}pre img" value="{{preview_id}}" class="btn rotate">Rotate</button>\r\n			<button type="button" class="btn" value ="{{preview_id}}"data-dismiss="{{preview_id}}">Sport</button>\r\n			<button type="button" class="btn close closepreview" value ="{{preview_id}}"data-dismiss="{{preview_id}}">&times;</button>\r\n		</div>\r\n		<div class="clear"></div>\r\n		<div id="{{preview_id}}" class="previewprogress"></div>\r\n		<div class="clear"></div>\r\n	</div>\r\n{{/data}} '}),define("imageup/views/preview",["require","text!imageup/templates/preview_template.html","text!usercontrols/tag/templates/layout.html","text!imageup/templates/select_all.html","facade","views","utils","vendor","usercontrols/tag/views/main"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=o.SectionView,c=s.$,h=s._,p=e("usercontrols/tag/views/main"),d=u.debug;return i=l.extend({id:"imgpreview",template:t,events:{"click .rotate":"imageRotate","click .close":"closePreview","click .previewimgsrc":"selectImage","mouseover .previewimg":"showFooter","mouseout .previewimg":"hideFooter"},initialize:function(e){l.prototype.initialize.call(this,e),d.log("preview view"),this.degree=0,this.scheme=e.scheme,this.layout=e.layout},imageRotate:function(e){id=e.currentTarget.id,val=e.currentTarget.value,this.degree=c("#"+val+"rotang").val(),this.degree=parseInt(this.degree)+90,this.degree>=360&&(this.degree=0),c("#"+id).css({"-webkit-transform":"rotate("+this.degree+"deg)","-moz-transform":"rotate("+this.degree+"deg)","-ms-transform":"rotate("+this.degree+"deg)","-o-transform":"rotate("+this.degree+"deg)",transform:"rotate("+this.degree+"deg)",zoom:1}),c("#"+val+"rotang").val(this.degree)},closePreview:function(e){id=e.currentTarget.value+"group";var t=document.getElementById(id);t.parentNode.removeChild(t)},selectImage:function(e){var t=c(e.target).hasClass("previewimg"),n=t?c(e.target):c(e.target).parents(".previewimg");n.toggleClass("selected");var r=c(this.destination).find(".previewimg.selected");r.length<1?this.setUpSelectAllView():this.setUpTagView()},setUpSelectAllView:function(){c("#image-tagging").hide(),c("#select-allup").show()},setUpTagView:function(){c("#select-allup").hide(),c("#image-tagging").show()},showFooter:function(e){c(e.target).parents(".previewimg").find(".lnkFooter").show()},hideFooter:function(e){c(e.target).parents(".previewimg").find(".lnkFooter").hide()}}),i}),define("imageup",["require","text!imageup/templates/basic.html","text!imageup/templates/uploader.html","facade","controller","models","views","utils","imageup/models/basic","imageup/models/imageupload","imageup/models/errorshow","imageup/collections/basics","imageup/models/preview","imageup/views/basic","imageup/views/errors","imageup/views/preview"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("imageup/models/basic"),f=e("imageup/models/imageupload"),l=e("imageup/models/errorshow"),c=e("imageup/collections/basics"),h=e("imageup/models/preview"),p=e("imageup/views/basic"),d=e("imageup/views/errors"),v=e("imageup/views/preview"),m=o.LayoutView,g=r.$,y=r._,b=u.debug,w=u.lib.Channel,E=["/pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return w("load:css").publish(E),y.bindAll(this),this.scheme=[],this.handleOptions(e),this.init(e),this},init:function(e){this.url=e.url,this.attr=e.attr,this.data=e.data,this.count=0,this.setupLayout(),this.handleDeferreds(),this.showuploader(),this.data&&this.showPreviewDropImage()},handleDeferreds:function(){function t(t){e.imageUpload(t)}function n(t){e.msgShowup(t)}function r(t){e.previewShowup(t)}function i(){e.rerender()}var e=this;routing.off("imageup-add-image"),routing.on("imageup-add-image",function(e){t(e)}),routing.off("imageup-msg"),routing.on("imageup-msg",function(e){n(e)}),routing.off("imageup-preview"),routing.on("imageup-preview",function(e){console.log(e),r(e)}),routing.off("imageup-rerender"),routing.on("imageup-rerender",function(e){i(e)})},showuploader:function(){var e=new p({scheme:this.scheme,layout:this.layout,name:"Add Media",dropedImage:this.data,model:new a,destination:"#left_upload"},this.attr);b.log("Imagecontroller Show"),console.log(this.scheme),this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return b.log("Imagecontroller Layout"),this.scheme=[],g(".model-popup-h").remove(),g("body").append('<div id="modalPopup" class="model-popup-h"></div>'),e=new m({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=e,this.layout},previewShowup:function(e){var t=new h(e);for(var n in this.scheme)this.scheme[n].id=="imgpreview"&&delete this.scheme[n];previewShowView=new v({scheme:this.scheme,layout:this.layout,name:"Preview Show View",model:t,destination:"#preview",displayWhen:"ready"}),b.log("Preview View Show"),this.scheme.push(previewShowView),g("#preview").show(),routing.trigger("imageup-rerender")},rerender:function(){this.showuploader()},showPreviewDropImage:function(){var e=this;e.data&&routing.trigger("imageup-preview",e.data)},imageUpload:function(e){console.log(e),b.log("image uploading starts");var t=e.id,n=e.len,r=[],i="",s=this,r=e.dataum;g("#preview_"+t).addClass("image_upload_loader_new"),g(".previewimgsrc").addClass("fade-out"),g.ajax({url:this.url,data:r,cache:!1,processData:!1,contentType:!1,type:"POST",success:function(e){g("#preview_"+t).fadeOut("slow"),g("#preview_"+t+"rot").fadeOut("slow"),routing.trigger("image-upload-success",e),g("imageup").attr("disabled","disabled"),s.count++,s.count==n&&(i={msg:" File Uploaded Succesfully",color:"alert-success"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled")),g("#preview_"+t).unbind().removeClass("image_upload_loader_new").html("")},error:function(e){g("#preview_"+t).fadeOut("slow"),g(".previewimgsrc").removeClass("fade-out"),g("#preview_"+t).fadeIn("slow").html("<b>Upload Error!</b>"),b.log(e),i={msg:e.statusText,color:"alert-error"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled");return}})},msgShowup:function(e){for(var t in this.scheme)this.scheme[t].destination=="#errormsg"&&delete this.scheme[t];errorShowModel=new l(e),addErrorView=new d({name:"File Upload Msg",model:errorShowModel,destination:"#errormsg",displayWhen:"ready"}),b.log("Error View Show"),this.scheme.push(addErrorView),g("#errormsg").show(),routing.trigger("imageup-rerender")}}),n});