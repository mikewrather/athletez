define(["require","text!media/templates/add-media.html","game/models/addmedia","facade","views","sportorg/models/team"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("sportorg/models/team"),u=r._;return GameAddMediaView=s.extend({id:"add-media",template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup"},game_model:{},initialize:function(e){s.prototype.initialize.call(this,e)},setOptions:function(e){if(!this.model)throw new Error("AddMediaView expects option with model property.")},childViews:{},render:function(e,t,n){s.prototype.render.call(this,e,t,n)},openAddImagePopup:function(e){if(this.game_model.attributes.payload.sports_id>0){var t="/api/game/addimage/"+this.game_model.attributes.id,n={sports_id:this.game_model.attributes.payload.sports_id};routing.trigger("add-image",t,n)}else try{var r=new o({id:this.game_model.attributes.payload.teams[0].id});r.fetch();var i=this;$.when(r.request).done(function(){var e="/api/game/addimage/"+i.game_model.attributes.id,t={sports_id:r.attributes.payload.org_sport_link_obj.sports_id};routing.trigger("add-image",e,t)})}catch(s){alert("Whaaaa...?  It seems like the sport isn't set for this game (weird), which means we can't add the photo.  Shoot an email to support@athletez.com and we'll figure out what went wrong.")}}}),GameAddMediaView});