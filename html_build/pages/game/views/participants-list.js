define(["facade","views","utils","media/views/image-item","text!media/templates/image-list.html"],function(e,t,n,r,i){var s,o,u=e.$,a=e._,f=require("vendor"),l=n.lib.Channel,c=t.CollectionView,h=t.SectionView,p=f.Mustache;return ParticipantsView=c.extend(h.prototype),ParticipantsView.extend({__super__:c.prototype,template:i,_tagName:"li",_className:"image",page:0,page_limit:8,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=p.to_html(this.template,{target:this.target_id});return this.$el.html(e),this},initialize:function(e){u(".participants-heading-h").removeClass("hide"),e.name?this.name=e.name:this.name="image list",e.collecton&&(this.collection=e.collection);var t=this.collection.toArray(),n=t[0].get("payload"),r=[];for(var i in n)r.push({payload:n[i]});this.collection.reset(r),this.target_id=e.target_id,this.target_url=e.target_url,this.sport_id=e.sport_id,this.renderTemplate();var s=this;s.allData=this.collection.toArray(),s.seeMore(),c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");a.bindAll(this),this.addSubscribers()},seeMore:function(e){var t=this.allData.length,n=this.page*this.page_limit,r=n+this.page_limit;t<=r&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(n,r)):this.collection.reset(this.allData.slice(n,r)),this.page++,e&&this.addSubscribers&&this.addSubscribers()},childViews:{},setupAddView:function(){function r(e){t.model=e,t.render(),u(this.listView).append(t.el)}var e,t=new AddImageView({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addimage:fetch").subscribe(r)},filterWithImageType:function(e){var t=this.collection;return u.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t}})});