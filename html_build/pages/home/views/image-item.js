define(["vendor","views","utils","text!pages/home/templates/image-item.html","votes/models/vote","votes/models/follow"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=require("votes/models/vote"),a=require("votes/models/follow"),f=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{},initialize:function(e){this.template=r},render:function(){var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id};switch(t.enttypes_id){case"23":n._thumbnail=t.thumbs,n._label=t.media.name,n._link="";break;case"21":typeof t.types=="object"&&t.types.standard_thumb&&(n._thumbnail=t.types.standard_thumb.url),n._label=t.media_obj.name,n._link="";break;case"1":typeof t.user_picture_obj=="object"&&(n._thumbnail=t.user_picture_obj.types.standard_thumb.url),n._label=t.label,n._sublabel="Coming Soon",n._link="/#profile/"+t.id;break;case"8":n._detailclass="game",n._thumbnail=t.game_picture,n._label=t.game_day,n._link="/#game/"+t.id;var r="";for(var i=0;i<t.teams.length;i++)r+='<a href="/#team/'+t.id+'">',r+=t.teams[i].team_name,r+="</a>",i+1<t.teams.length&&(r+=" VS. ");n._sublabel=r}console.log("Called Image Render",n);var o=f.to_html(this.template,n);this.$el.html(o);var u="120px",a="92px";return this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block.vote, .action-block.follow").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+a}),s(this).find(".detail-view.game").css({bottom:"-"+u})}),this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block.vote, .action-block.follow").css({opacity:90})}),this.$el.find(".vote-h").click(function(){e.vote()}),this.$el.find(".follow-h").click(function(){e.follow()}),this.$el.find(".edit-h").click(function(){e.edit()}),this.$el.find(".delete-h").click(function(){e["delete"]()}),this},vote:function(e){e.preventDefault(),console.log(this.model);var t=new u;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save()},follow:function(e){e.preventDefault(),console.log(e.target);var t=new a;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.save()},changeImage:function(){Channel("changeimage"+this.model.collection.id).publish(this.model)},edit:function(e){alert("edit"),e.preventDefault(),console.log("edit")},"delete":function(e){alert("delete"),e.preventDefault(),console.log("delete")}}),i});