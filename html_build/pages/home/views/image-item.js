define(["vendor","views","utils","text!pages/home/templates/image-item.html","votes/models/vote","votes/models/follow"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=require("votes/models/vote"),a=require("votes/models/follow"),f=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{click:"changeImage","click .left-block vote":"vote","click .right-block follow":"follow"},initialize:function(e){this.template=r},render:function(){var e=this.model.attributes.payload,t={_enttypes_id:e.enttypes_id,_id:e.id};switch(e.enttypes_id){case"23":t._thumbnail=e.thumbs,t._label=e.media.name,t._link="";break;case"21":typeof e.types=="object"&&e.types.standard_thumb&&(t._thumbnail=e.types.standard_thumb.url),t._label=e.media_obj.name,t._link="";break;case"1":typeof e.user_picture_obj=="object"&&(t._thumbnail=e.user_picture_obj.types.standard_thumb.url),t._label=e.label,t._sublabel="Coming Soon",t._link="/#profile/"+e.id;break;case"8":t._detailclass="game",t._thumbnail=e.game_picture,t._label=e.game_day,t._link="/#game/"+e.id;var n="";for(var r=0;r<e.teams.length;r++)n+='<a href="/#team/'+e.id+'">',n+=e.teams[r].team_name,n+="</a>",r+1<e.teams.length&&(n+=" VS. ");t._sublabel=n}console.log("Called Image Render",t);var i=f.to_html(this.template,t);this.$el.html(i);var o="120px",u="92px";return this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block.vote, .action-block.follow").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+u}),s(this).find(".detail-view.game").css({bottom:"-"+o})}),this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block.vote, .action-block.follow").css({opacity:90})}),this},vote:function(e){e.preventDefault(),console.log(this.model);var t=new u;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save()},follow:function(e){e.preventDefault(),console.log(e.target);var t=new a;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.save()},changeImage:function(){Channel("changeimage"+this.model.collection.id).publish(this.model)}}),i});