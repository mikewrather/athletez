define(["require","text!login/templates/logintemplate.html","backbone","underscore","signup","views","facade","utils","login/models/Forgotmodel"],function(e,t,n,r,i){var s,o=e("facade"),u=e("views"),a=e("utils"),f=a.lib.Channel,l=e("login/models/Forgotmodel"),c=n.View;return SigninBasicView=c.extend({initialize:function(e){this.signcontroller=new i,this.template=r.template(t),this.$el=$(e.destination),this.render()},render:function(){this.$el.html(this.template),$("#errormsg, #preview").html(""),debug.log("Image upload basic view"),$("#Loginview").modal("show"),$("#Loginview").on("hide",function(){$("div#LoginPopup").empty()})},events:{"click a#signup":"signupUser","click .loginUser":"userLogin","click .forgot-password-h":"forgotPassword","submit .forgot-password-form-h":"forgotPasswordForm","click .log-in-link-h":"loginPageView"},forgotPasswordForm:function(e){e.preventDefault();var t=this,n=new l;n.email=$(e.target).find(".forgot-password-email-h").val(),n.save({email:n.email}),$.when(n.request).done(function(){t.$el.find(".success-message").removeClass("hide"),setTimeout(function(){t.loginPageView()},3e3)}),$.when(n.request).fail(function(){t.$el.find(".error-message").removeClass("hide")})},userLogin:function(e){e.preventDefault();var t=this.$(":input").serializeArray(),n=[];$.each(t,function(e,t){n[t.name]=t.value});var r=$.extend({},n);try{console.log(r,"new")}catch(i){console={},console.log=function(e){}}this.model.save(r,{success:function(e){location.href="#profile",$("#Loginview").modal("hide")},error:function(e){$(".errormsg").empty();var t=jQuery.parseJSON(e.request.responseText);$(".errormsg").html(t.exec_data.error_array[0].error)}})},forgotPassword:function(){this.$el.find(".success-message").addClass("hide"),this.$el.find(".error-message").addClass("hide"),$("#Loginview h3#label").html("Forgot Password"),$("#logincontainer").addClass("hide"),$(".forgot-password-container").removeClass("hide")},loginPageView:function(){this.$el.find(".success-message").addClass("hide"),this.$el.find(".error-message").addClass("hide"),$("#Loginview h3#label").html("Login"),$("#logincontainer").removeClass("hide"),$(".forgot-password-container").addClass("hide")},signupUser:function(e){e.preventDefault(),$("#Loginview").modal("hide"),routing.trigger("register-basic")}}),SigninBasicView});