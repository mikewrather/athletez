define(["require","collections/base","facade","utils"],function(e){var t,n=e("collections/base"),r=e("facade"),i=e("utils"),s=r.Backbone,o=r.$,u=r._,a=i.lib,f=i.debug;return t=n.extend({_activeModel:null,_setActive:function(e){var t=0,n;return e&&u.isNumber(e)&&(e!==t?(n=this._activeModel+e,n<0?t=this.length+n:n<this.length?t=n:t=n-this.length):t=this._activeModel),this._activeModel=t,t},initialize:function(e,t){this._activeModel=0,n.prototype.initialize.call(this,arguments)},previous:function(){this._activeModel=this._setActive(-1)},next:function(){this._activeModel=this._setActive(1)},selected:function(e){var t;return u.isNumber(e)&&(t=parseInt(e,10),t>=0&&t<this.length&&(this._activeModel=t)),this._activeModel},toJSON:function(){var e=n.prototype.toJSON.call(this);return e[this._activeModel].active=!0,u.each(e,function(e,t,n){n[t].idx=t}),e}}),t});