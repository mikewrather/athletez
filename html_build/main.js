/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/

//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Underscore may be freely distributed under the MIT license.

/*! jQuery UI - v1.10.2 - 2013-04-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */

/*! jQuery Timepicker Addon - v1.4 - 2013-08-11
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2013 Trent Richardson; Licensed MIT */

/*!
 * jQuery Browser Plugin v0.0.3
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2013 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 2013-07-29T17:23:27-07:00
 */

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.

//     Backbone may be freely distributed under the MIT license.

/**
 * Backbone Forms v0.12.0
 *
 * Copyright (c) 2013 Charles Davison, Pow Media Ltd
 *
 * License and more information at:
 * http://github.com/powmedia/backbone-forms
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/* ===================================================
 * bootstrap-transition.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ==========================================================
 * bootstrap-alert.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-carousel.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* =============================================================
 * bootstrap-collapse.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===========================================================
 * bootstrap-popover.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */

/* =============================================================
 * bootstrap-scrollspy.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */

/* ========================================================
 * bootstrap-tab.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */

/* =============================================================
 * bootstrap-typeahead.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-affix.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/**
 * @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/* jQuery Resize And Crop (jrac)
 * A jQuery 1.4+ and jQueryUi 1.8+ plugin under GNU GENERAL PUBLIC LICENSE version 2 lisense.
 * Copyright (c) 2011 Cedric Gampert - cgampert@gmail.com
 */

/**
 * Copyright Facebook Inc.
 *
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */

/**
		 * @providesModule JSON3
		 * @preserve-header
		 *
		 *! JSON v3.2.3 | http://bestiejs.github.com/json3 | Copyright 2012, Kit Cambridge | http://kit.mit-license.org
		 */

/*! UIkit 2.6.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.1
 *
 */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.6.5
 *
 */

/*
 CryptoJS v3.1.2
 code.google.com/p/crypto-js
 (c) 2009-2013 by Jeff Mott. All rights reserved.
 code.google.com/p/crypto-js/wiki/License
 */

/*! iScroll v5.1.1 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */

(function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(w.acceptData(e)){var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||r!==t||"string"!=typeof n)return l||(l=a?e[u]=c.pop()||w.guid++:u),f[l]||(f[l]=a?{}:{toJSON:w.noop}),("object"==typeof n||"function"==typeof n)&&(i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n)),o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),"string"==typeof n?(s=o[n],null==s&&(s=o[w.camelCase(n)])):s=o,s}}function R(e,t,n){if(w.acceptData(e)){var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}(n||(delete o[u].data,z(o[u])))&&(s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function U(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(I,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&w.hasData(e)){var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=w.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=w.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==w.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,w.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e)if(r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],$n.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(P(),w.ready())},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(s=o.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||w.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r));return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?!--w.readyWait:!w.isReady){if(!o.body)return setTimeout(w.ready);w.isReady=!0,e!==!0&&--w.readyWait>0||(n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=w.trim(n),n&&C.test(n.replace(L,"@").replace(A,"]").replace(k,"")))?Function("return "+n)():(w.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("﻿ ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(H(Object(e))?w.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===w.type(r)){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n)if(n=w.Deferred(),"complete"===o.readyState)setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;if((t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,w=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=x++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=null==x?1:Math.random()||.1;for(E&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:E,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(E,e)?-1:t===n||y(E,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e="string"==typeof e?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||i&&!f||(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=1!==r||e&&w.isFunction(e.promise)?r:0,s=1===i?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==p.className,t.leadingWhitespace=3===p.firstChild.nodeType,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip;for(h in w(t))break;return t.ownLast="0"!==h,w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===p.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null)}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length&&(s=w.data(u),1===u.nodeType&&!w._data(u,"parsedAttrs"))){for(r=u.attributes;r.length>o;o++)i=r[o].name,0===i.indexOf("data-")&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=w._data(e,n),r&&(!i||w.isArray(r)?i=w._data(e,n,w.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=w.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=w.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,w(this).val()):e,null==s?s="":"number"==typeof s?s+="":w.isArray(s)&&(s=w.map(s,function(e){return null==e?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(w.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&w.nodeName(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=w.inArray(w(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?w.prop(e,n,r):(1===u&&w.isXMLDoc(e)||(n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W)),r===t?s&&"get"in s&&null!==(o=s.get(e,n))?o:(o=w.find.attr(e,n),null==o?t:o):null!==r?s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(w.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&1===e.nodeType)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}}),Y&&G||(w.attrHooks.value={set:function(e,n,r){return w.nodeName(e,"input")?(e.defaultValue=n,t):W&&W.set(e,n,r)}}),G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,""===t?!1:t,n)}},w.each(["width","height"],function(e,n){w.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,n){return w.isArray(n)?e.checked=w.inArray(w(e).val(),n)>=0:t}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),v&&(c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(m&&(l=m.events)){t=(t||"").match(S)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||w.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[f],n,r,!0);w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))}},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+w.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[w.expando]?n:new w.Event(v,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{},s||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!s&&!c.noBubble&&!w.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ot()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return w.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,n){return this instanceof w.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&w.extend(this,n),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0,t):new w.Event(e,n)},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!w.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){return w.nodeName(this,"form")?!1:(w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return w.nodeName(this,"form")?!1:(w.event.remove(this,"._submit"),t)}}),w.support.changeBubbles||(w.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1):(w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?w.event.trigger(e,n,r,!0):t}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;i>t;t++)if(w.contains(r[t],this))return!0}));for(t=0;i>t;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,"string"==typeof e&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?w(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!w(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!w.support.htmlSerialize&&mt.test(e)||!w.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(1>=l||"string"!=typeof d||w.support.checkClone)&&Tt.test(d))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l&&(a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,1===a.childNodes.length&&(a=r),r)){for(o=w.map(jt(a,"script"),_t),s=o.length;l>f;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s)for(u=o[o.length-1].ownerDocument,w.map(o,Dt),f=0;s>f;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")));a=r=null}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===w.type(s))w.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!w.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===w.inArray(s,r))&&(o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;null!=(n=e[u]);u++)if((t||w.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+E+")(.*)$","i"),Jt=RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=w.camelCase(n),f=e.style;if(n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||w.cssNumber[a]||(r+="px"),w.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||w.contains(e.ownerDocument,e)||(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),w.each(["height","width"],function(e,n){w.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,i),i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===w.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,n){return n?w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,n){w.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?w(e).position()[n]+"px":r):t}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==b&&(b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l),l?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),204===e||"HEAD"===c.type?T="nocontent":304===e?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===b)return x;a=c.global,a&&0===w.active++&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==b){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(2>b))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||"px"!==s&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};return r.duration=w.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;for(Xn=w.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");"static"===r&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=("absolute"===r||"fixed"===r)&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===w.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position"))e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(e.jQuery=e.$=w,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}))})(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",["jquery"],function(e){return function(){var t,n;return t||e._}}(this)),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),function(e,t){function n(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=p[e[c]];return t||(t={},h++,e[c]=h,p[h]=t),t}function i(e,n,i){return n||(n=t),d?n.createElement(e):(i||(i=r(n)),n=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),n.canHaveChildren&&!a.test(e)?i.frag.appendChild(n):n)}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function o(e){e||(e=t);var n=r(e);if(v.shivCSS&&!l&&!n.hasCSS){var i,o=e;i=o.createElement("p"),o=o.getElementsByTagName("head")[0]||o.documentElement,i.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}</style>",i=o.insertBefore(i.lastChild,o.firstChild),n.hasCSS=!!i}return d||s(e,n),e}var u=e.html5||{},a=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,l,c="_html5shiv",h=0,p={},d;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e;var n;if(!(n=1==e.childNodes.length)){t.createElement("a");var r=t.createDocumentFragment();n="undefined"==typeof r.cloneNode||"undefined"==typeof r.createDocumentFragment||"undefined"==typeof r.createElement}d=n}catch(i){d=l=!0}})();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:"3.6.2pre",shivCSS:!1!==u.shivCSS,supportsUnknownElements:d,shivMethods:!1!==u.shivMethods,type:"default",shivDocument:o,createElement:i,createDocumentFragment:function(e,i){e||(e=t);if(d)return e.createDocumentFragment();for(var i=i||r(e),s=i.frag.cloneNode(),o=0,u=n(),a=u.length;o<a;o++)s.createElement(u[o]);return s}};e.html5=v,o(t)}(this,document),define("html5",function(){}),function(e,t){function n(t,n){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var i=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var r,i,s=e(this[0]);s.length&&s[0]!==document;){if(r=s.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(i=parseInt(s.css("zIndex"),10),!isNaN(i)&&0!==i))return i;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;i.length>r;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)try{e(n).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(n,r,i){var s,o,u,a,f={},l=n.split(".")[0];n=n.split(".")[1],s=l+"-"+n,i||(i=r,r=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},o=e[l][n],u=e[l][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new u(e,n)},e.extend(u,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new r,a.options=e.widget.extend({},a.options),e.each(i,function(n,i){return e.isFunction(i)?(f[n]=function(){var e=function(){return r.prototype[n].apply(this,arguments)},t=function(e){return r.prototype[n].apply(this,e)};return function(){var n,r=this._super,s=this._superApply;return this._super=e,this._superApply=t,n=i.apply(this,arguments),this._super=r,this._superApply=s,n}}(),t):(f[n]=i,t)}),u.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:n},f,{constructor:u,namespace:l,widgetName:n,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,u,n._proto)}),delete o._childConstructors):r._childConstructors.push(u),e.widget.bridge(n,u)},e.widget.extend=function(n){for(var i,o,u=r.call(arguments,1),a=0,f=u.length;f>a;a++)for(i in u[a])o=u[a][i],u[a].hasOwnProperty(i)&&o!==t&&(n[i]=e.isPlainObject(o)?e.isPlainObject(n[i])?e.widget.extend({},n[i],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,i){var o=i.prototype.widgetFullName||n;e.fn[n]=function(u){var f="string"==typeof u,l=r.call(arguments,1),c=this;return u=!f&&l.length?e.widget.extend.apply(null,[u].concat(l)):u,f?this.each(function(){var r,i=e.data(this,o);return i?e.isFunction(i[u])&&"_"!==u.charAt(0)?(r=i[u].apply(i,l),r!==i&&r!==t?(c=r&&r.jquery?c.pushStack(r.get()):r,!1):t):e.error("no such method '"+u+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+u+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(u||{})._init():e.data(this,o,new i(u,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i,s,o,u=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(u={},i=n.split("."),n=i.shift(),i.length){for(s=u[n]=e.widget.extend({},this.options[n]),o=0;i.length-1>o;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];if(n=i.pop(),r===t)return s[n]===t?null:s[n];s[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];u[n]=r}return this._setOptions(u),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,r,i){var s,o=this;"boolean"!=typeof n&&(i=r,r=n,n=!1),i?(r=s=e(r),this.bindings=this.bindings.add(r)):(i=r,r=this.element,s=this.widget()),e.each(i,function(i,u){function f(){return n||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof u?o[u]:u).apply(o,arguments):t}"string"!=typeof u&&(f.guid=u.guid=u.guid||f.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,h=l[2];h?s.delegate(h,c,f):r.bind(c,f)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function r(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var n,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),r=o.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),s=n-r},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var s,p,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=i(b),b[0].preventDefault&&(t.at="left top"),p=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e,n,r=(t[this]||"").split(" ");1===r.length&&(r=f.test(r[0])?r.concat(["center"]):l.test(r[0])?["center"].concat(r):["center","center"]),r[0]=f.test(r[0])?r[0]:"center",r[1]=l.test(r[1])?r[1]:"center",e=c.exec(r[0]),n=c.exec(r[1]),x[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(r[0])[0],h.exec(r[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=v:"center"===t.at[1]&&(g.top+=v/2),s=n(x.at,p,v),g.left+=s[0],g.top+=s[1],this.each(function(){var i,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=r(this,"marginLeft"),y=r(this,"marginTop"),T=c+d+r(this,"marginRight")+E.width,N=h+y+r(this,"marginBottom")+E.height,C=e.extend({},g),L=n(x.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?C.left-=c:"center"===t.my[0]&&(C.left-=c/2),"bottom"===t.my[1]?C.top-=h:"center"===t.my[1]&&(C.top-=h/2),C.left+=L[0],C.top+=L[1],e.support.offsetFractions||(C.left=a(C.left),C.top=a(C.top)),i={marginLeft:d,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:p,targetHeight:v,elemWidth:c,elemHeight:h,collisionPosition:i,collisionWidth:T,collisionHeight:N,offset:[s[0]+L[0],s[1]+L[1]],my:t.my,at:t.at,within:w,elem:l})}),t.using&&(f=function(e){var n=m.left-C.left,r=n+p-c,i=m.top-C.top,s=i+v-h,a={target:{element:b,left:m.left,top:m.top,width:p,height:v},element:{element:l,left:C.left,top:C.top,width:c,height:h},horizontal:0>r?"left":n>0?"right":"center",vertical:0>s?"top":i>0?"bottom":"middle"};c>p&&p>u(n+r)&&(a.horizontal="center"),h>v&&v>u(i+s)&&(a.vertical="middle"),a.important=o(u(n),u(r))>o(u(i),u(s))?"horizontal":"vertical",t.using.call(this,e,a)}),l.offset(e.extend(C,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,u=e.left-t.collisionPosition.marginLeft,a=i-u,f=u+t.collisionWidth-s-i;t.collisionWidth>s?a>0&&0>=f?(n=e.left+a+t.collisionWidth-s-i,e.left+=a-n):e.left=f>0&&0>=a?i:a>f?i+s-t.collisionWidth:i:a>0?e.left+=a:f>0?e.left-=f:e.left=o(e.left-u,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,u=e.top-t.collisionPosition.marginTop,a=i-u,f=u+t.collisionHeight-s-i;t.collisionHeight>s?a>0&&0>=f?(n=e.top+a+t.collisionHeight-s-i,e.top+=a-n):e.top=f>0&&0>=a?i:a>f?i+s-t.collisionHeight:i:a>0?e.top+=a:f>0?e.top-=f:e.top=o(e.top-u,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,f=e.left-t.collisionPosition.marginLeft,l=f-a,c=f+t.collisionWidth-o-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>l?(n=e.left+h+p+d+t.collisionWidth-o-s,(0>n||u(l)>n)&&(e.left+=h+p+d)):c>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+d-a,(r>0||c>u(r))&&(e.left+=h+p+d))},top:function(e,t){var n,r,i=t.within,s=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,f=e.top-t.collisionPosition.marginTop,l=f-a,c=f+t.collisionHeight-o-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>l?(r=e.top+p+d+v+t.collisionHeight-o-s,e.top+p+d+v>l&&(0>r||u(l)>r)&&(e.top+=p+d+v)):c>0&&(n=e.top-t.collisionPosition.marginTop+p+d+v-a,e.top+p+d+v>c&&(n>0||c>u(n))&&(e.top+=p+d+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(i=!0);return i||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if("parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=["document"===i.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===i.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===i.containment?0:e(window).scrollLeft())+e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===i.containment?0:e(window).scrollTop())+(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor===Array)i.containment.constructor===Array&&(this.containment=i.containment);else{if(n=e(i.containment),r=n[0],!r)return;t="hidden"!==e(r).css("overflow"),this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderRightWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderBottomWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==u&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height,m>u-v&&a+v>m&&y>f-v&&l+v>y||m>u-v&&a+v>m&&b>f-v&&l+v>b||g>u-v&&a+v>g&&y>f-v&&l+v>y||g>u-v&&a+v>g&&b>f-v&&l+v>b?("inner"!==d.snapMode&&(r=v>=Math.abs(f-b),i=v>=Math.abs(l-y),s=v>=Math.abs(u-g),o=v>=Math.abs(a-m),r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,"outer"!==d.snapMode&&(r=v>=Math.abs(f-y),i=v>=Math.abs(l-b),s=v>=Math.abs(u-m),o=v>=Math.abs(a-g),r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});r.length&&(t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];n.length>t;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(i=!0,!1):undefined}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,n,r){if(!n.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,h=n.offset.top,p=h+n.proportions.height;switch(r){case"fit":return o>=l&&c>=u&&a>=h&&p>=f;case"intersect":return o+e.helperProportions.width/2>l&&c>u-e.helperProportions.width/2&&a+e.helperProportions.height/2>h&&p>f-e.helperProportions.height/2;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,h,n.proportions.height)&&t(i,l,n.proportions.width);case"touch":return(a>=h&&p>=a||f>=h&&p>=f||h>a&&f>p)&&(o>=l&&c>=o||u>=l&&c>=u||l>o&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;s.length>r;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;u.length>i;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,s,o,u=e.ui.intersect(t,this,this.options.tolerance),a=!u&&this.isover?"isout":u&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s}),o.length&&(r=e.data(o[0],"ui-droppable"),r.greedyChild="isover"===a)),r&&"isover"===a&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),r&&"isout"===a&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(n){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=t(this.helper.css("left")),i=t(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];return p?(n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,r,s,o,u,a=this.options;u={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,r=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,t>u.minWidth&&(u.minWidth=t),s>u.minHeight&&(u.minHeight=s),u.maxWidth>r&&(u.maxWidth=r),u.maxHeight>o&&(u.maxHeight=o)),this._vBoundaries=u},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,r=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(r.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(r.height-e.height),e.left=t.left+(r.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,r=this.axis,s=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,u=n(e.width)&&t.minWidth&&t.minWidth>e.width,a=n(e.height)&&t.minHeight&&t.minHeight>e.height,f=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(r),h=/nw|ne|n/.test(r);return u&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),u&&c&&(e.left=f-t.minWidth),s&&c&&(e.left=f-t.maxWidth),a&&h&&(e.top=l-t.minHeight),o&&h&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,r,i,s=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(i=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")],t=0;n.length>t;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0);i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;p&&(f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=t(n.css("padding"+i))}),f.containerOffset=n.offset(),f.containerPosition=n.position(),f.containerSize={height:n.innerHeight()-r[3],width:n.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a}))},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?r(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)})},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?a(i.alsoResize):e.each(i.alsoResize,function(e,t){a(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u="number"==typeof n.grid?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&h>n.maxWidth,v=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,s=e.data(this,"selectable-item");return s?(r=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),s.unselecting=!r,s.selecting=r,s.selected=r,r?n._trigger("selecting",t,{selecting:s.element}):n._trigger("unselecting",t,{unselecting:s.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||s>n.right||n.top>a||o>n.bottom):"fit"===i.tolerance&&(f=n.left>s&&u>n.right&&n.top>o&&a>n.bottom),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):undefined}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r?!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&a>r+f&&t+l>s&&o>t+l;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>u&&a>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&r||"left"===s&&!r:i&&("down"===i&&n||"up"===i&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--)for(i=e(a[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),s=e(t.document[0].createElement(r)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?s.append("<td colspan='99'>&#160;</td>"):"img"===r&&s.attr("src",t.currentItem.attr("src")),n||s.css("visibility","hidden"),s},update:function(e,o){(!n||r.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(r){var s,o,u,a,f,l,c,h,p,d,v=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(v&&e.contains(this.containers[s].element[0],v.element[0]))continue;v=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",r,this._uiHash(this)),this.containers[s].containerCache.over=0);if(v)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",r,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(u=1e4,a=null,d=v.floating||n(this.currentItem),f=d?"left":"top",l=d?"width":"height",c=this.positionAbs[f]+this.offset.click[f],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!d||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(h=this.items[o].item.offset()[f],p=!1,Math.abs(h-c)>Math.abs(h+this.items[o][l]-c)&&(p=!0,h+=this.items[o][l]),u>Math.abs(h-c)&&(u=Math.abs(h-c),a=this.items[o],this.direction=p?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(r,a,null,!0):this._rearrange(r,null,this.containers[m].element,!0),this._trigger("change",r,this._uiHash()),this.containers[m]._trigger("change",r,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",r,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;r.length>n;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;r.length>n;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var t=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(t.active===!1&&t.collapsible===!0||!this.headers.length)&&(t.active=!1,this.active=e()),t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),"fill"===i?(n=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1||(n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,o){var u,a,f,l=this,c=0,h=e.length&&(!t.length||e.index()<t.index()),p=this.options.animate||{},d=h&&p.down||p,v=function(){l._toggleComplete(o)};return"number"==typeof d&&(f=d),"string"==typeof d&&(a=d),a=a||d.easing||p.easing,f=f||d.duration||p.duration,t.length?e.length?(u=e.show().outerHeight(),t.animate(n,{duration:f,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(r,{duration:f,easing:a,complete:v,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(u-t.outerHeight()-c),c=0)}}),undefined):t.animate(n,f,a,v):e.animate(r,f,a,v)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s="textarea"===i,o="input"===i;this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,n=!0,undefined;t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,r.preventDefault(),undefined;if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){return r?(r=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===n||e.contains(n,r.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(r){n===t&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,r,i,s="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",u="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},f=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?e(r).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,u=this.options,c="checkbox"===this.type||"radio"===this.type,p=c?"":"ui-state-active",d="ui-state-focus";null===u.label&&(u.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){u.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){u.disabled||e(this).removeClass(p)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){i||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){u.disabled||(i=!1,n=e.pageX,r=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){u.disabled||(n!==e.pageX||r!==e.pageY)&&(i=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return u.disabled||i?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||i)return!1;e(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var t=o.element[0];f(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return u.disabled?!1:(e(this).addClass("ui-state-active"),t=this,o.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return u.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return u.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+o+" "+u).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?f(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(u),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function i(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.2"}});var s,o="datepicker",u=(new Date).getTime();e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return i(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,o,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),("focus"===r||"both"===r)&&t.focus(this._showDatepicker),("button"===r||"both"===r)&&(i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,o,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,r,s,u){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),i(p.settings,s||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=u?u.length?u:[u.pageX,u.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,o);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,o);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,o);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,s){var o,u,a,f,l=this._getInst(n);return 2===arguments.length&&"string"==typeof r?"defaults"===r?e.extend({},e.datepicker._defaults):l?"all"===r?e.extend({},l.settings):this._get(l,r):null:(o=r||{},"string"==typeof r&&(o={},o[r]=s),l&&(this._curInst===l&&this._hideDatepicker(),u=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),i(l.settings,o),null!==a&&o.dateFormat!==t&&o.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),null!==f&&o.dateFormat!==t&&o.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in o&&(o.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,u),this._updateAlternate(l),this._updateDatepicker(l)),t)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(n){var r,i,s=e.datepicker._getInst(n.target);return e.datepicker._get(s,"constrainInput")?(r=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),i=String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),n.ctrlKey||n.metaKey||" ">i||!r||r.indexOf(i)>-1):t},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,r,s,o,u,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),s=r?r.apply(t,[t,n]):{},s!==!1&&(i(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),i=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",o*i+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,u=this._curInst;!u||t&&u!==e.data(t,o)||this._datepickerShowing&&(n=this._get(u,"showAnim"),r=this._get(u,"duration"),i=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[n]||e.effects[n])?u.dpDiv.hide(n,e.datepicker._get(u,"showOptions"),r,i):u.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(u,"onClose"),s&&s.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,n+("M"===r?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+("M"===r?"Month":"Year")]=s["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,r,i){if(null==n||null==r)throw"Invalid arguments";if(r="object"==typeof r?""+r:r+"",""===r)return null;var s,o,u,a,f=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,p=(i?i.dayNames:null)||this._defaults.dayNames,d=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,v=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,y=-1,b=-1,w=!1,E=function(e){var t=n.length>s+1&&n.charAt(s+1)===e;return t&&s++,t},S=function(e){var t=E(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=RegExp("^\\d{1,"+n+"}"),s=r.substring(f).match(i);if(!s)throw"Missing number at position "+f;return f+=s[0].length,parseInt(s[0],10)},x=function(n,i,s){var o=-1,u=e.map(E(n)?s:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(u,function(e,n){var i=n[1];return r.substr(f,i.length).toLowerCase()===i.toLowerCase()?(o=n[0],f+=i.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+f},T=function(){if(r.charAt(f)!==n.charAt(s))throw"Unexpected literal at position "+f;f++};for(s=0;n.length>s;s++)if(w)"'"!==n.charAt(s)||E("'")?T():w=!1;else switch(n.charAt(s)){case"d":y=S("d");break;case"D":x("D",h,p);break;case"o":b=S("o");break;case"m":g=S("m");break;case"M":g=x("M",d,v);break;case"y":m=S("y");break;case"@":a=new Date(S("@")),m=a.getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"!":a=new Date((S("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"'":E("'")?T():w=!0;break;default:T()}if(r.length>f&&(u=r.substr(f),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),b>-1)for(g=1,y=b;;){if(o=this._getDaysInMonth(m,g-1),o>=y)break;g++,y-=o}if(a=this._daylightSavingAdjust(new Date(m,g-1,y)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==y)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=e.length>r+1&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))for(;n>r.length;)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;e.length>r;r++)if(h)"'"!==e.charAt(r)||a("'")?c+=e.charAt(r):h=!1;else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=e.length>t+1&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;e.length>t;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);f;){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=7*parseInt(f[1],10);break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=null==n||""===n?r:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"==""+o?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),i===e.selectedMonth&&s===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+u].datepicker._adjustDate(r,-n,"M")},next:function(){window["DP_jQuery_"+u].datepicker._adjustDate(r,+n,"M")},hide:function(){window["DP_jQuery_"+u].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+u].datepicker._gotoToday(r)},selectDay:function(){return window["DP_jQuery_"+u].datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+u].datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+u].datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;if(0>Z&&(Z+=12,et--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",S=0;V[0]>S;S++){for(x="",this.maxRows=4,T=0;V[1]>T;T++){if(N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?U?s:r:"")+(/all|right/.test(C)&&0===S?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;7>E;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";for(k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M)),H=0;D>H;H++){for(k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",E=0;7>E;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&G>P||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!g||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!a||l>=r.getMonth())&&(!f||i.getMonth()>=l)&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}if(y||(b+=w+(!s&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&m&&g?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.2",window["DP_jQuery_"+u]=e}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,s){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(s))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(o,u){r.position=[u.position.left-n.document.scrollLeft(),u.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,t(u))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,s=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,s){r.height=e(this).height(),r.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(r){var s=this,o=!1,u={};e.each(r,function(e,r){s._setOption(e,r),e in t&&(o=!0),e in n&&(u[e]=r)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,r=[],i=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(r=n.split?n.split(" "):[n[0],n[1]],1===r.length&&(r[1]=r[0]),e.each(["left","top"],function(e,t){+r[e]===r[e]&&(i[e]=r[e],r[e]=t)}),n={my:r[0]+(0>i[0]?i[0]:"+"+i[0])+" "+r[1]+(0>i[1]?i[1]:"+"+i[1]),at:r.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(n){var r=e(n.target).closest(".ui-menu-item");!this.mouseHandled&&r.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(n),r.has(".ui-menu").length?this.expand(n):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(n){var r=e(n.currentTarget);r.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(n,r)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(n){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(n)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(n){e(n.target).closest(".ui-menu").length||this.collapseAll(n),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var n=e(this);n.data("ui-menu-submenu-carat")&&n.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(n){function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,s,o,u,a,f=!0;switch(n.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(n);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(n);break;case e.ui.keyCode.HOME:this._move("first","first",n);break;case e.ui.keyCode.END:this._move("last","last",n);break;case e.ui.keyCode.UP:this.previous(n);break;case e.ui.keyCode.DOWN:this.next(n);break;case e.ui.keyCode.LEFT:this.collapse(n);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(n);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(n);break;case e.ui.keyCode.ESCAPE:this.collapse(n);break;default:f=!1,s=this.previousFilter||"",o=String.fromCharCode(n.keyCode),u=!1,clearTimeout(this.filterTimer),o===s?u=!0:o=s+o,a=RegExp("^"+r(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),i=u&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(n.keyCode),a=RegExp("^"+r(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),i.length?(this.focus(n,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}f&&n.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var n,r=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var n=e(this),i=n.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),n.attr("aria-labelledby",i.attr("id"))}),n=i.add(this.element),n.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),n.children(":not(.ui-menu-item)").each(function(){var n=e(this);/[^\-\u2014\u2013\s]/.test(n.text())||n.addClass("ui-widget-content ui-menu-divider")}),n.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(n){var r,i,s,o,u,a;this._hasScroll()&&(r=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=n.offset().top-this.activeMenu.offset().top-r-i,o=this.activeMenu.scrollTop(),u=this.activeMenu.height(),a=n.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>u&&this.activeMenu.scrollTop(o+s-u+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(n){var r=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(n.parents(".ui-menu")).hide().attr("aria-hidden","true"),n.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(r)},collapseAll:function(n,r){clearTimeout(this.timer),this.timer=this._delay(function(){var s=r?this.element:e(n&&n.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(n),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,r)},nextPage:function(n){var r,i,s;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return r=e(this),0>r.offset().top-i-s}),this.focus(n,r)):this.focus(n,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(n),undefined)},previousPage:function(n){var r,i,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return r=e(this),r.offset().top-i+s>0}),this.focus(n,r)):this.focus(n,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(n),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(n){this.active=this.active||e(n.target).closest(".ui-menu-item");var r={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(n,!0),this._trigger("select",n,r)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;n>t;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))&&(i=n,s=e(this),o=t)}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>r||1===t&&r>n)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,n){var r,i,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,i=arguments[0],s=0;r.length>s;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=100*((a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())),l["horizontal"===a.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&("horizontal"===a.orientation?(0===r&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(0===r&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?100*((r-i)/(s-i)):0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),"max"===o&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),"max"===o&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(n){var r,i,s,o,u=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),r=this._start(n,u),r===!1))return}switch(o=this.options.step,i=s=this.options.values&&this.options.values.length?this.values(u):this.value(),n.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(n,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var s=n.attr(r);void 0!==s&&s.length&&(t[r]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&r.min>e?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++i}function r(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var i=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var n=this.options.active,r=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(r,s){return e(s).attr("aria-controls")===i?(n=r,!1):t}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=this.tabs.length?0:!1)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=r?!1:0)),!r&&n===!1&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(n){var r=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(r),s=!0;if(!this._handlePageNav(n)){switch(n.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return n.preventDefault(),clearTimeout(this.activating),this._activate(i),t;case e.ui.keyCode.ENTER:return n.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),t;default:return}n.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,s),n.ctrlKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(n){return n.altKey&&n.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):n.altKey&&n.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,n){function r(){return t>i&&(t=0),0>t&&(t=i),t}for(var i=this.tabs.length-1;-1!==e.inArray(r(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,n){return"active"===e?(this._activate(n),t):"disabled"===e?(this._setupDisabled(n),t):(this._super(e,n),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",n),n||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(n),"heightStyle"===e&&this._setupHeightStyle(n),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var s,o,u,a=e(i).uniqueId().attr("id"),f=e(i).closest("li"),l=f.attr("aria-controls");r(i)?(s=i.hash,o=t.element.find(t._sanitizeSelector(s))):(u=t._tabId(f),s="#"+u,o=t.element.find(s),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":s.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,r=0;n=this.tabs[r];r++)t===!0||-1!==e.inArray(r,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();"fill"===t?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1||(n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),f.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l))},_toggle:function(t,n){function r(){s.running=!1,s._trigger("activate",t,n)}function i(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,r):(o.show(),r())}var s=this,o=n.newPanel,u=n.oldPanel;this.running=!0,u.length&&this.options.hide?this._hide(u,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u.hide(),i()),u.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),o.length&&u.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;r!==!1&&(n===t?r=!1:(n=this._getIndex(n),r=e.isArray(r)?e.map(r,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r))},disable:function(n){var r=this.options.disabled;if(r!==!0){if(n===t)r=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,r))return;r=e.isArray(r)?e.merge([n],r).sort():[n]}this._setupDisabled(r)}},load:function(t,n){t=this._getIndex(t);var i=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),u=this._getPanelForTab(s),a={tab:s,panel:u};r(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),i._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&i.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr},1)})))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function t(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);-1!==i&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var r=0;e.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var t,r=e(this);r.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;return"string"==typeof r?this._open(t,e,r):(n=r.call(e[0],function(n){e.data("ui-tooltip-open")&&i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,r,i){function s(e){f.of=e,o.is(":hidden")||o.position(f)}var o,u,a,f=e.extend({},this.options.position);if(i){if(o=this._find(r),o.length)return o.find(".ui-tooltip-content").html(i),void 0;r.is("[title]")&&(n&&"mouseover"===n.type?r.attr("title",""):r.removeAttr("title")),o=this._tooltip(r),t(r,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:s}),s(n)):o.position(e.extend({of:r},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(f.of),clearInterval(a))},e.fx.interval)),this._trigger("open",n,{tooltip:o}),u={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(o)}},n&&"mouseover"!==n.type||(u.mouseleave="close"),n&&"focusin"!==n.type||(u.focusout="close"),this._on(!0,r,u)}},close:function(t){var r=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),n(s),o.stop(!0),this._hide(o,this.options.hide,function(){r._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+r++,i=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[n]=t,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function r(t,n){var r,i,o={};for(r in n)i=n[r],t[r]!==i&&(s[r]||(e.fx.step[r]||!isNaN(parseFloat(i)))&&(o[r]=i));return o}var i=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var t=e(this);return{el:t,start:n(this)}}),s=function(){e.each(i,function(e,n){t[n]&&o[n+"Class"](t[n])})},s(),f=f.map(function(){return this.end=n(this.el[0]),this.diff=r(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return"boolean"==typeof i||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.2",save:function(e,t){for(var r=0;t.length>r;r++)null!==t[r]&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var s,o;for(o=0;r.length>o;o++)null!==r[o]&&(s=e.data(n+r[o]),s===t&&(s=""),e.css(r[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function t(t){function r(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=n.complete,u=n.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),r()):o.call(i[0],n,r)}var n=r.apply(this,arguments),i=n.mode,s=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?i?this[i](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(r,s){var o,u,a,f=e(this),l=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(f,r.mode||"hide"),h=r.direction||"up",p=t.test(h),d=p?"height":"width",v=p?"top":"left",m=n.test(h),g={},y="show"===c;f.parent().is(".ui-effects-wrapper")?e.effects.save(f.parent(),l):e.effects.save(f,l),f.show(),o=e.effects.createWrapper(f).css({overflow:"hidden"}),u=o[d](),a=parseFloat(o.css(v))||0,g[d]=y?u:0,m||(f.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[v]=y?a:u+a),y&&(o.css(d,0),m||o.css(v,a+u)),o.animate(g,{duration:r.duration,easing:r.easing,queue:!1,complete:function(){"hide"===c&&f.hide(),e.effects.restore(f,l),e.effects.removeWrapper(f),s()}})}}(jQuery),function(e){e.effects.effect.bounce=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","height","width"],f=e.effects.setMode(u,n.mode||"effect"),l="hide"===f,c="show"===f,h=n.direction||"up",p=n.distance,d=n.times||5,v=2*d+(c||l?1:0),m=n.duration/v,g=n.easing,y="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,w=u.queue(),E=w.length;for((c||l)&&a.push("opacity"),e.effects.save(u,a),u.show(),e.effects.createWrapper(u),p||(p=u["top"===y?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[y]=0,u.css("opacity",0).css(y,b?2*-p:2*p).animate(o,m,g)),l&&(p/=Math.pow(2,d-1)),o={},o[y]=0,i=0;d>i;i++)s={},s[y]=(b?"-=":"+=")+p,u.animate(s,m,g).animate(o,m,g),p=l?2*p:p/2;l&&(s={opacity:0},s[y]=(b?"-=":"+=")+p,u.animate(s,m,g)),u.queue(function(){l&&u.hide(),e.effects.restore(u,a),e.effects.removeWrapper(u),r()}),E>1&&w.splice.apply(w,[1,0].concat(w.splice(E,v+1))),u.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","height","width"],f=e.effects.setMode(u,n.mode||"hide"),l="show"===f,c=n.direction||"vertical",h="vertical"===c,p=h?"height":"width",d=h?"top":"left",v={};e.effects.save(u,a),u.show(),i=e.effects.createWrapper(u).css({overflow:"hidden"}),s="IMG"===u[0].tagName?i:u,o=s[p](),l&&(s.css(p,0),s.css(d,o/2)),v[p]=l?o:0,v[d]=l?0:o/2,s.animate(v,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){l||u.hide(),e.effects.restore(u,a),e.effects.removeWrapper(u),r()}})}}(jQuery),function(e){e.effects.effect.drop=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],u=e.effects.setMode(s,n.mode||"hide"),a="show"===u,f=n.direction||"left",l="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f?"pos":"neg",h={opacity:a?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),i=n.distance||s["top"===l?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(l,"pos"===c?-i:i),h[l]=(a?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,s.animate(h,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}})}}(jQuery),function(e){e.effects.effect.explode=function(n,r){function i(){w.push(this),w.length===h*p&&s()}function s(){d.css({visibility:"visible"}),e(w).remove(),m||d.hide(),r()}var o,u,a,f,l,c,h=n.pieces?Math.round(Math.sqrt(n.pieces)):3,p=h,d=e(this),v=e.effects.setMode(d,n.mode||"hide"),m="show"===v,g=d.show().css("visibility","hidden").offset(),y=Math.ceil(d.outerWidth()/p),b=Math.ceil(d.outerHeight()/h),w=[];for(o=0;h>o;o++)for(f=g.top+o*b,c=o-(h-1)/2,u=0;p>u;u++)a=g.left+u*y,l=u-(p-1)/2,d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-u*y,top:-o*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:y,height:b,left:a+(m?l*y:0),top:f+(m?c*b:0),opacity:m?0:1}).animate({left:a+(m?0:l*y),top:f+(m?0:c*b),opacity:m?1:0},n.duration||500,n.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(n,r){var i=e(this),s=e.effects.setMode(i,n.mode||"toggle");i.animate({opacity:s},{queue:!1,duration:n.duration,easing:n.easing,complete:r})}}(jQuery),function(e){e.effects.effect.fold=function(n,r){var i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,n.mode||"hide"),f="show"===a,l="hide"===a,c=n.size||15,h=/([0-9]+)%/.exec(c),p=!!n.horizFirst,d=f!==p,v=d?["width","height"]:["height","width"],m=n.duration/2,g={},y={};e.effects.save(o,u),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),s=d?[i.width(),i.height()]:[i.height(),i.width()],h&&(c=parseInt(h[1],10)/100*s[l?0:1]),f&&i.css(p?{height:0,width:c}:{height:c,width:0}),g[v[0]]=f?s[0]:c,y[v[1]]=f?s[1]:0,i.animate(g,m,n.easing).animate(y,m,n.easing,function(){l&&o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),r()})}}(jQuery),function(e){e.effects.effect.highlight=function(n,r){var i=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,n.mode||"show"),u={backgroundColor:i.css("backgroundColor")};"hide"===o&&(u.opacity=0),e.effects.save(i,s),i.show().css({backgroundImage:"none",backgroundColor:n.color||"#ffff99"}).animate(u,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),r()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(n,r){var i,s=e(this),o=e.effects.setMode(s,n.mode||"show"),u="show"===o,a="hide"===o,f=u||"hide"===o,l=2*(n.times||5)+(f?1:0),c=n.duration/l,h=0,p=s.queue(),d=p.length;for((u||!s.is(":visible"))&&(s.css("opacity",0).show(),h=1),i=1;l>i;i++)s.animate({opacity:h},c,n.easing),h=1-h;s.animate({opacity:h},c,n.easing),s.queue(function(){a&&s.hide(),r()}),d>1&&p.splice.apply(p,[1,0].concat(p.splice(d,l+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(n,r){var i=e(this),s=e.effects.setMode(i,n.mode||"hide"),o="hide"===s,u=parseInt(n.percent,10)||150,a=u/100,f={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(n,{effect:"scale",queue:!1,fade:!0,mode:s,complete:r,percent:o?u:100,from:o?f:{height:f.height*a,width:f.width*a,outerHeight:f.outerHeight*a,outerWidth:f.outerWidth*a}}),i.effect(n)},e.effects.effect.scale=function(n,r){var i=e(this),s=e.extend(!0,{},n),o=e.effects.setMode(i,n.mode||"effect"),u=parseInt(n.percent,10)||(0===parseInt(n.percent,10)?0:"hide"===o?0:100),a=n.direction||"both",f=n.origin,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==a?u/100:1,x:"vertical"!==a?u/100:1};s.effect="size",s.queue=!1,s.complete=r,"effect"!==o&&(s.origin=f||["middle","center"],s.restore=!0),s.from=n.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),s.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),i.effect(s)},e.effects.effect.size=function(n,r){var i,s,o,u=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],f=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.effects.setMode(u,n.mode||"effect"),v=n.restore||"effect"!==d,m=n.scale||"both",g=n.origin||["middle","center"],y=u.css("position"),b=v?a:f,w={height:0,width:0,outerHeight:0,outerWidth:0};"show"===d&&u.show(),i={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},"toggle"===n.mode&&"show"===d?(u.from=n.to||w,u.to=n.from||i):(u.from=n.from||("show"===d?w:i),u.to=n.to||("hide"===d?w:i)),o={from:{y:u.from.height/i.height,x:u.from.width/i.width},to:{y:u.to.height/i.height,x:u.to.width/i.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(b=b.concat(h),u.from=e.effects.setTransition(u,h,o.from.y,u.from),u.to=e.effects.setTransition(u,h,o.to.y,u.to)),o.from.x!==o.to.x&&(b=b.concat(p),u.from=e.effects.setTransition(u,p,o.from.x,u.from),u.to=e.effects.setTransition(u,p,o.to.x,u.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(b=b.concat(c).concat(l),u.from=e.effects.setTransition(u,c,o.from.y,u.from),u.to=e.effects.setTransition(u,c,o.to.y,u.to)),e.effects.save(u,b),u.show(),e.effects.createWrapper(u),u.css("overflow","hidden").css(u.from),g&&(s=e.effects.getBaseline(g,i),u.from.top=(i.outerHeight-u.outerHeight())*s.y,u.from.left=(i.outerWidth-u.outerWidth())*s.x,u.to.top=(i.outerHeight-u.to.outerHeight)*s.y,u.to.left=(i.outerWidth-u.to.outerWidth)*s.x),u.css(u.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(c),p=p.concat(["marginLeft","marginRight"]),l=a.concat(h).concat(p),u.find("*[width]").each(function(){var r=e(this),i={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};v&&e.effects.save(r,l),r.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},r.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(r.from=e.effects.setTransition(r,h,o.from.y,r.from),r.to=e.effects.setTransition(r,h,o.to.y,r.to)),o.from.x!==o.to.x&&(r.from=e.effects.setTransition(r,p,o.from.x,r.from),r.to=e.effects.setTransition(r,p,o.to.x,r.to)),r.css(r.from),r.animate(r.to,n.duration,n.easing,function(){v&&e.effects.restore(r,l)})})),u.animate(u.to,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){0===u.to.opacity&&u.css("opacity",u.from.opacity),"hide"===d&&u.hide(),e.effects.restore(u,b),v||("static"===y?u.css({position:"relative",top:u.to.top,left:u.to.left}):e.each(["top","left"],function(e,t){u.css(t,function(t,n){var r=parseInt(n,10),i=e?u.to.left:u.to.top;return"auto"===n?i+"px":r+i+"px"})})),e.effects.removeWrapper(u),r()}})}}(jQuery),function(e){e.effects.effect.shake=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,n.mode||"effect"),a=n.direction||"left",f=n.distance||20,l=n.times||3,c=2*l+1,h=Math.round(n.duration/c),p="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a,v={},m={},g={},y=s.queue(),b=y.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),v[p]=(d?"-=":"+=")+f,m[p]=(d?"+=":"-=")+2*f,g[p]=(d?"-=":"+=")+2*f,s.animate(v,h,n.easing),i=1;l>i;i++)s.animate(m,h,n.easing).animate(g,h,n.easing);s.animate(m,h,n.easing).animate(v,h/2,n.easing).queue(function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,c+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(n,r){var i,s=e(this),o=["position","top","bottom","left","right","width","height"],u=e.effects.setMode(s,n.mode||"show"),a="show"===u,f=n.direction||"left",l="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f,h={};e.effects.save(s,o),s.show(),i=n.distance||s["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(l,c?isNaN(i)?"-"+i:-i:i),h[l]=(a?c?"+=":"-=":c?"-=":"+=")+i,s.animate(h,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),r()}})}}(jQuery),function(e){e.effects.effect.transfer=function(n,r){var i=e(this),s=e(n.to),o="fixed"===s.css("position"),u=e("body"),a=o?u.scrollTop():0,f=o?u.scrollLeft():0,l=s.offset(),c={top:l.top-a,left:l.left-f,height:s.innerHeight(),width:s.innerWidth()},h=i.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(n.className).css({top:h.top-a,left:h.left-f,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,n.duration,n.easing,function(){p.remove(),r()})}}(jQuery),define("jqueryui",["jquery"],function(){});var MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function u(e,i,s,o,u,a,f){return e=n(e,n(n(r(i,s,o),u),f)),n(t(e,a),i)}function a(e,r,s,o,u,a,f){return e=n(e,n(n(i(r,s,o),u),f)),n(t(e,a),r)}function f(e,r,i,o,u,a,f){return e=n(e,n(n(s(r,i,o),u),f)),n(t(e,a),r)}function l(e,r,i,s,u,a,f){return e=n(e,n(n(o(r,i,s),u),f)),n(t(e,a),r)}function c(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function p(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var d=Array(),v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;e=p(e),d=c(e),w=1732584193,E=4023233417,S=2562383102,x=271733878;for(v=0;v<d.length;v+=16)m=w,g=E,y=S,b=x,w=u(w,E,S,x,d[v+0],T,3614090360),x=u(x,w,E,S,d[v+1],N,3905402710),S=u(S,x,w,E,d[v+2],C,606105819),E=u(E,S,x,w,d[v+3],k,3250441966),w=u(w,E,S,x,d[v+4],T,4118548399),x=u(x,w,E,S,d[v+5],N,1200080426),S=u(S,x,w,E,d[v+6],C,2821735955),E=u(E,S,x,w,d[v+7],k,4249261313),w=u(w,E,S,x,d[v+8],T,1770035416),x=u(x,w,E,S,d[v+9],N,2336552879),S=u(S,x,w,E,d[v+10],C,4294925233),E=u(E,S,x,w,d[v+11],k,2304563134),w=u(w,E,S,x,d[v+12],T,1804603682),x=u(x,w,E,S,d[v+13],N,4254626195),S=u(S,x,w,E,d[v+14],C,2792965006),E=u(E,S,x,w,d[v+15],k,1236535329),w=a(w,E,S,x,d[v+1],L,4129170786),x=a(x,w,E,S,d[v+6],A,3225465664),S=a(S,x,w,E,d[v+11],O,643717713),E=a(E,S,x,w,d[v+0],M,3921069994),w=a(w,E,S,x,d[v+5],L,3593408605),x=a(x,w,E,S,d[v+10],A,38016083),S=a(S,x,w,E,d[v+15],O,3634488961),E=a(E,S,x,w,d[v+4],M,3889429448),w=a(w,E,S,x,d[v+9],L,568446438),x=a(x,w,E,S,d[v+14],A,3275163606),S=a(S,x,w,E,d[v+3],O,4107603335),E=a(E,S,x,w,d[v+8],M,1163531501),w=a(w,E,S,x,d[v+13],L,2850285829),x=a(x,w,E,S,d[v+2],A,4243563512),S=a(S,x,w,E,d[v+7],O,1735328473),E=a(E,S,x,w,d[v+12],M,2368359562),w=f(w,E,S,x,d[v+5],_,4294588738),x=f(x,w,E,S,d[v+8],D,2272392833),S=f(S,x,w,E,d[v+11],P,1839030562),E=f(E,S,x,w,d[v+14],H,4259657740),w=f(w,E,S,x,d[v+1],_,2763975236),x=f(x,w,E,S,d[v+4],D,1272893353),S=f(S,x,w,E,d[v+7],P,4139469664),E=f(E,S,x,w,d[v+10],H,3200236656),w=f(w,E,S,x,d[v+13],_,681279174),x=f(x,w,E,S,d[v+0],D,3936430074),S=f(S,x,w,E,d[v+3],P,3572445317),E=f(E,S,x,w,d[v+6],H,76029189),w=f(w,E,S,x,d[v+9],_,3654602809),x=f(x,w,E,S,d[v+12],D,3873151461),S=f(S,x,w,E,d[v+15],P,530742520),E=f(E,S,x,w,d[v+2],H,3299628645),w=l(w,E,S,x,d[v+0],B,4096336452),x=l(x,w,E,S,d[v+7],j,1126891415),S=l(S,x,w,E,d[v+14],F,2878612391),E=l(E,S,x,w,d[v+5],I,4237533241),w=l(w,E,S,x,d[v+12],B,1700485571),x=l(x,w,E,S,d[v+3],j,2399980690),S=l(S,x,w,E,d[v+10],F,4293915773),E=l(E,S,x,w,d[v+1],I,2240044497),w=l(w,E,S,x,d[v+8],B,1873313359),x=l(x,w,E,S,d[v+15],j,4264355552),S=l(S,x,w,E,d[v+6],F,2734768916),E=l(E,S,x,w,d[v+13],I,1309151649),w=l(w,E,S,x,d[v+4],B,4149444226),x=l(x,w,E,S,d[v+11],j,3174756917),S=l(S,x,w,E,d[v+2],F,718787259),E=l(E,S,x,w,d[v+9],I,3951481745),w=n(w,m),E=n(E,g),S=n(S,y),x=n(x,b);var q=h(w)+h(E)+h(S)+h(x);return q.toLowerCase()};define("custom",function(){}),function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version)return;$.extend($.ui,{timepicker:{version:"1.4"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst)},onChangeMonthYear:function(e,t,n){tp_inst._updateDateTime(n),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,n,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&$input.val()!==""&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),typeof tp_inst._defaults.controlType=="string"?(tp_inst._defaults.controlType==="slider"&&typeof $.ui.slider=="undefined"&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];tp_inst._defaults.timezoneList!==null&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!="object")for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):(new Date).getTimezoneOffset()*-1,tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")}));if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0)tp_inst._defaults.minDate=new Date;if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0)tp_inst._defaults.maxDate=new Date;return tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){this.inst||(this.inst=$.datepicker._getInst(this.$input[0]));if(t||!this._defaults.timeOnly){var n=$.datepicker._get(this.inst,"dateFormat");try{var r=parseDateTimeInternal(n,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!r.timeObj)return!1;$.extend(this,r.timeObj)}catch(i){return $.timepicker.log("Error parsing the date/time string: "+i+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+n),!1}return!0}var s=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return s?($.extend(this,s),!0):!1},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,n=this,r="",i="",s=null,o={},u={},a=null,f=0,l=0;if(e.find("div.ui-timepicker-div").length===0&&t.showTimepicker){var c=' style="display:none;"',h='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl>'+'<dt class="ui_tpicker_time_label"'+(t.showTime?"":c)+">"+t.timeText+"</dt>"+'<dd class="ui_tpicker_time"'+(t.showTime?"":c)+"></dd>";for(f=0,l=this.units.length;f<l;f++){r=this.units[f],i=r.substr(0,1).toUpperCase()+r.substr(1),s=t["show"+i]!==null?t["show"+i]:this.support[r],o[r]=parseInt(t[r+"Max"]-(t[r+"Max"]-t[r+"Min"])%t["step"+i],10),u[r]=0,h+='<dt class="ui_tpicker_'+r+'_label"'+(s?"":c)+">"+t[r+"Text"]+"</dt>"+'<dd class="ui_tpicker_'+r+'"><div class="ui_tpicker_'+r+'_slider"'+(s?"":c)+"></div>";if(s&&t[r+"Grid"]>0){h+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(r==="hour")for(var p=t[r+"Min"];p<=o[r];p+=parseInt(t[r+"Grid"],10)){u[r]++;var d=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);h+='<td data-for="'+r+'">'+d+"</td>"}else for(var v=t[r+"Min"];v<=o[r];v+=parseInt(t[r+"Grid"],10))u[r]++,h+='<td data-for="'+r+'">'+(v<10?"0":"")+v+"</td>";h+="</tr></table></div>"}h+="</dd>"}var m=t.showTimezone!==null?t.showTimezone:this.support.timezone;h+='<dt class="ui_tpicker_timezone_label"'+(m?"":c)+">"+t.timezoneText+"</dt>",h+='<dd class="ui_tpicker_timezone" '+(m?"":c)+"></dd>",h+="</dl></div>";var g=$(h);t.timeOnly===!0&&(g.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div>"+"</div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());for(f=0,l=n.units.length;f<l;f++)r=n.units[f],i=r.substr(0,1).toUpperCase()+r.substr(1),s=t["show"+i]!==null?t["show"+i]:this.support[r],n[r+"_slider"]=n.control.create(n,g.find(".ui_tpicker_"+r+"_slider"),r,n[r],t[r+"Min"],o[r],t["step"+i]),s&&t[r+"Grid"]>0&&(a=100*u[r]*t[r+"Grid"]/(o[r]-t[r+"Min"]),g.find(".ui_tpicker_"+r+" table").css({width:a+"%",marginLeft:t.isRTL?"0":a/(-2*u[r])+"%",marginRight:t.isRTL?a/(-2*u[r])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),i=t.html(),s=parseInt(i.replace(/[^0-9]/g),10),o=i.replace(/[^apm]/ig),u=t.data("for");u==="hour"&&(o.indexOf("p")!==-1&&s<12?s+=12:o.indexOf("a")!==-1&&s===12&&(s=0)),n.control.value(n,n[u+"_slider"],r,s),n._onTimeChange(),n._onSelectHandler()}).css({cursor:"pointer",width:100/u[r]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=g.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val(typeof e=="object"?e.value:e).text(typeof e=="object"?e.label:e)}));if(typeof this.timezone!="undefined"&&this.timezone!==null&&this.timezone!==""){var y=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;y===this.timezone?selectLocalTimezone(n):this.timezone_select.val(this.timezone)}else typeof this.hour!="undefined"&&this.hour!==null&&this.hour!==""?this.timezone_select.val(t.timezone):selectLocalTimezone(n);this.timezone_select.change(function(){n._onTimeChange(),n._onSelectHandler()});var b=e.find(".ui-datepicker-buttonpane");b.length?b.before(g):e.append(g),this.$timeObj=g.find(".ui_tpicker_time");if(this.inst!==null){var w=this.timeDefined;this._onTimeChange(),this.timeDefined=w}if(this._defaults.addSliderAccess){var E=this._defaults.sliderAccessArgs,S=this._defaults.isRTL;E.isRTL=S,setTimeout(function(){if(g.find(".ui-slider-access").length===0){g.find(".ui-slider:visible").sliderAccess(E);var e=g.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&g.find("table:visible").each(function(){var t=$(this),n=t.outerWidth(),r=t.css(S?"marginRight":"marginLeft").toString().replace("%",""),i=n-e,s=r*i/n+"%",o={width:i,marginRight:0,marginLeft:0};o[S?"marginRight":"marginLeft"]=s,t.css(o)})}},10)}n._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var n=this._defaults,r=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(!this._defaults.showTimepicker)return;if($.datepicker._get(e,"minDateTime")!==null&&$.datepicker._get(e,"minDateTime")!==undefined&&r){var i=$.datepicker._get(e,"minDateTime"),s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null)this.hourMinOriginal=n.hourMin,this.minuteMinOriginal=n.minuteMin,this.secondMinOriginal=n.secondMin,this.millisecMinOriginal=n.millisecMin,this.microsecMinOriginal=n.microsecMin;e.settings.timeOnly||s.getTime()===r.getTime()?(this._defaults.hourMin=i.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=i.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=i.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=i.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=i.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if($.datepicker._get(e,"maxDateTime")!==null&&$.datepicker._get(e,"maxDateTime")!==undefined&&r){var o=$.datepicker._get(e,"maxDateTime"),u=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null)this.hourMaxOriginal=n.hourMax,this.minuteMaxOriginal=n.minuteMax,this.secondMaxOriginal=n.secondMax,this.millisecMaxOriginal=n.millisecMax,this.microsecMaxOriginal=n.microsecMax;e.settings.timeOnly||u.getTime()===r.getTime()?(this._defaults.hourMax=o.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=o.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=o.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=o.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=o.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(t!==undefined&&t===!0){var a=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),f=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),l=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),c=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),h=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:a}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:f}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:l}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:c}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:h}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}},_onTimeChange:function(){if(!this._defaults.showTimepicker)return;var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,n=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,r=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,i=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,s=this.timezone_select?this.timezone_select.val():!1,o=this._defaults,u=o.pickerTimeFormat||o.timeFormat,a=o.pickerTimeSuffix||o.timeSuffix;typeof e=="object"&&(e=!1),typeof t=="object"&&(t=!1),typeof n=="object"&&(n=!1),typeof r=="object"&&(r=!1),typeof i=="object"&&(i=!1),typeof s=="object"&&(s=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),n!==!1&&(n=parseInt(n,10)),r!==!1&&(r=parseInt(r,10)),i!==!1&&(i=parseInt(i,10));var f=o[e<12?"amNames":"pmNames"][0],l=e!==this.hour||t!==this.minute||n!==this.second||r!==this.millisec||i!==this.microsec||this.ampm.length>0&&e<12!=($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&s!==this.timezone;l&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),n!==!1&&(this.second=n),r!==!1&&(this.millisec=r),i!==!1&&(this.microsec=i),s!==!1&&(this.timezone=s),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=f),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(u===o.timeFormat?this.$timeObj.text(this.formattedTime+a):this.$timeObj.text($.datepicker.formatTime(u,this,o)+a)),this.timeDefined=!0,l&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=e.currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),n=$.datepicker._daylightSavingAdjust(t),r=$.datepicker._get(e,"dateFormat"),i=$.datepicker._getFormatConfig(e),s=n!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(r,n===null?new Date:n,i);var o=this.formattedDate;e.lastVa===""&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),this._defaults.timeOnly===!0?o=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||s)&&(o+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=o;if(!this._defaults.showTimepicker)this.$input.val(this.formattedDate);else if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(o);var u="",a=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,f=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(this._defaults.altFormat?u=$.datepicker.formatDate(this._defaults.altFormat,n===null?new Date:n,i):u=this.formattedDate,u&&(u+=a)),this._defaults.altTimeFormat?u+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+f:u+=this.formattedTime+f,this.$altInput.val(u)}else this.$input.val(o);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(n){$.timepicker.log(n)}}},_controls:{slider:{create:function(e,t,n,r,i,s,o){var u=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:u?r*-1:r,min:u?s*-1:i,max:u?i*-1:s,step:o,slide:function(t,r){e.control.value(e,$(this),n,u?r.value*-1:r.value),e._onTimeChange()},stop:function(t,n){e._onSelectHandler()}})},options:function(e,t,n,r,i){if(e._defaults.isRTL){if(typeof r=="string")return r==="min"||r==="max"?i!==undefined?t.slider(r,i*-1):Math.abs(t.slider(r)):t.slider(r);var s=r.min,o=r.max;return r.min=r.max=null,s!==undefined&&(r.max=s*-1),o!==undefined&&(r.min=o*-1),t.slider(r)}return typeof r=="string"&&i!==undefined?t.slider(r,i):t.slider(r)},value:function(e,t,n,r){return e._defaults.isRTL?r!==undefined?t.slider("value",r*-1):Math.abs(t.slider("value")):r!==undefined?t.slider("value",r):t.slider("value")}},select:{create:function(e,t,n,r,i,s,o){var u='<select class="ui-timepicker-select" data-unit="'+n+'" data-min="'+i+'" data-max="'+s+'" data-step="'+o+'">',a=e._defaults.pickerTimeFormat||e._defaults.timeFormat;for(var f=i;f<=s;f+=o)u+='<option value="'+f+'"'+(f===r?" selected":"")+">",n==="hour"?u+=$.datepicker.formatTime($.trim(a.replace(/[^ht ]/ig,"")),{hour:f},e._defaults):n==="millisec"||n==="microsec"||f>=10?u+=f:u+="0"+f.toString(),u+="</option>";return u+="</select>",t.children("select").remove(),$(u).appendTo(t).change(function(t){e._onTimeChange(),e._onSelectHandler()}),t},options:function(e,t,n,r,i){var s={},o=t.children("select");if(typeof r=="string"){if(i===undefined)return o.data(r);s[r]=i}else s=r;return e.control.create(e,t,o.data("unit"),o.val(),s.min||o.data("min"),s.max||o.data("max"),s.step||o.data("step"))},value:function(e,t,n,r){var i=t.children("select");return r!==undefined?i.val(r):i.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return typeof e=="object"&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return typeof e=="string"?e==="getDate"?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,n,r,i){var s=parseDateTimeInternal(e,t,n,r,i);if(s.timeObj){var o=s.timeObj;s.date.setHours(o.hour,o.minute,o.second,o.millisec),s.date.setMicroseconds(o.microsec)}return s.date},$.datepicker.parseTime=function(e,t,n){var r=extendRemove(extendRemove({},$.timepicker._defaults),n||{}),i=e.replace(/\'.*?\'/g,"").indexOf("Z")!==-1,s=function(e,t,n){var r=function(e,t){var n=[];return e&&$.merge(n,e),t&&$.merge(n,t),n=$.map(n,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+n.join("|")+")?"},i=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),n={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var r=0;r<t.length;r++)n[t[r].toString().charAt(0)]===-1&&(n[t[r].toString().charAt(0)]=r+1);return n},s="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return r(n.amNames,n.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+n.timeSuffix+"$",o=i(e),u="",a;a=t.match(new RegExp(s,"i"));var f={hour:0,minute:0,second:0,millisec:0,microsec:0};return a?(o.t!==-1&&(a[o.t]===undefined||a[o.t].length===0?(u="",f.ampm=""):(u=$.inArray(a[o.t].toUpperCase(),n.amNames)!==-1?"AM":"PM",f.ampm=n[u==="AM"?"amNames":"pmNames"][0])),o.h!==-1&&(u==="AM"&&a[o.h]==="12"?f.hour=0:u==="PM"&&a[o.h]!=="12"?f.hour=parseInt(a[o.h],10)+12:f.hour=Number(a[o.h])),o.m!==-1&&(f.minute=Number(a[o.m])),o.s!==-1&&(f.second=Number(a[o.s])),o.l!==-1&&(f.millisec=Number(a[o.l])),o.c!==-1&&(f.microsec=Number(a[o.c])),o.z!==-1&&a[o.z]!==undefined&&(f.timezone=$.timepicker.timezoneOffsetNumber(a[o.z])),f):!1},o=function(e,t,n){try{var r=new Date("2012-01-01 "+t);if(isNaN(r.getTime())){r=new Date("2012-01-01T"+t);if(isNaN(r.getTime())){r=new Date("01/01/2012 "+t);if(isNaN(r.getTime()))throw"Unable to parse time with native Date: "+t}}return{hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds(),millisec:r.getMilliseconds(),microsec:r.getMicroseconds(),timezone:r.getTimezoneOffset()*-1}}catch(i){try{return s(e,t,n)}catch(o){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1};return typeof r.parse=="function"?r.parse(e,t,r):r.parse==="loose"?o(e,t,r):s(e,t,r)},$.datepicker.formatTime=function(e,t,n){n=n||{},n=$.extend({},$.timepicker._defaults,n),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var r=e,i=n.amNames[0],s=parseInt(t.hour,10);return s>11&&(i=n.pmNames[0]),r=r.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+s).slice(-2);case"H":return s;case"hh":return("0"+convert24to12(s)).slice(-2);case"h":return convert24to12(s);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(t.timezone===null?n.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(t.timezone===null?n.timezone:t.timezone,!0);case"T":return i.charAt(0).toUpperCase();case"TT":return i.toUpperCase();case"t":return i.charAt(0).toLowerCase();case"tt":return i.toLowerCase();default:return e.replace(/'/g,"")}}),r},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var n=this._getInst($(e)[0]),r=this._get(n,"timepicker");r?(r._limitMinMaxDateTime(n,!0),n.inline=n.stay_open=!0,this._base_selectDate(e,t),n.inline=n.stay_open=!1,this._notifyChange(n),this._updateDatepicker(n)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t)return;if(typeof e.stay_open!="boolean"||e.stay_open===!1){this._base_updateDatepicker(e);var n=this._get(e,"timepicker");n&&n._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),n=$.datepicker._get(t,"timepicker");if(n&&$.datepicker._get(t,"constrainInput")){var r=n.support.ampm,i=n._defaults.showTimezone!==null?n._defaults.showTimezone:n.support.timezone,s=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),o=n._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,r?"APM":"").replace(/Tt/g,r?"AaPpMm":"").replace(/tT/g,r?"AaPpMm":"").replace(/T/g,r?"AP":"").replace(/tt/g,r?"apm":"").replace(/t/g,r?"ap":"")+" "+n._defaults.separator+n._defaults.timeSuffix+(i?n._defaults.timezoneList.join(""):"")+n._defaults.amNames.join("")+n._defaults.pmNames.join("")+s,u=String.fromCharCode(e.charCode===undefined?e.keyCode:e.charCode);return e.ctrlKey||u<" "||!s||o.indexOf(u)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var n=t._defaults.altField;if(n){var r=t._defaults.altFormat||t._defaults.dateFormat,i=this._getDate(e),s=$.datepicker._getFormatConfig(e),o="",u=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,f=t._defaults.altTimeFormat!==null?t._defaults.altTimeFormat:t._defaults.timeFormat;o+=$.datepicker.formatTime(f,t,t._defaults)+a,!t._defaults.timeOnly&&!t._defaults.altFieldTimeOnly&&i!==null&&(t._defaults.altFormat?o=$.datepicker.formatDate(t._defaults.altFormat,i,s)+u+o:o=t.formattedDate+u+o),$(n).val(o)}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),n=$.datepicker._get(t,"timepicker");if(n&&n._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(r){$.timepicker.log(r)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),n=t.dpDiv;this._base_gotoToday(e);var r=this._get(t,"timepicker");selectLocalTimezone(r);var i=new Date;this._setTime(t,i),$(".ui-datepicker-today",n).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(!t)return;var n=this._get(t,"timepicker");$(e).datepicker("getDate"),n&&(t.settings.showTimepicker=!1,n._defaults.showTimepicker=!1,n._updateDateTime(t))},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(!t)return;var n=this._get(t,"timepicker");$(e).datepicker("getDate"),n&&(t.settings.showTimepicker=!0,n._defaults.showTimepicker=!0,n._addTimePicker(t),n._updateDateTime(t))},$.datepicker._setTime=function(e,t){var n=this._get(e,"timepicker");if(n){var r=n._defaults;n.hour=t?t.getHours():r.hour,n.minute=t?t.getMinutes():r.minute,n.second=t?t.getSeconds():r.second,n.millisec=t?t.getMilliseconds():r.millisec,n.microsec=t?t.getMicroseconds():r.microsec,n._limitMinMaxDateTime(e,!0),n._onTimeChange(),n._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,n){var r=this._getInst(e);if(!r)return;var i=this._get(r,"timepicker");if(i){this._setDateFromField(r);var s;t&&(typeof t=="string"?(i._parseTime(t,n),s=new Date,s.setHours(i.hour,i.minute,i.second,i.millisec),s.setMicroseconds(i.microsec)):(s=new Date(t.getTime()),s.setMicroseconds(t.getMicroseconds())),s.toString()==="Invalid Date"&&(s=undefined),this._setTime(r,s))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var n=this._getInst(e);if(!n)return;typeof t=="string"&&(t=new Date(t),t.getTime()||$.timepicker.log("Error creating Date object from string."));var r=this._get(n,"timepicker"),i;t instanceof Date?(i=new Date(t.getTime()),i.setMicroseconds(t.getMicroseconds())):i=t,r&&(!r.support.timezone&&r._defaults.timezone===null&&(r.timezone=i.getTimezoneOffset()*-1),t=$.timepicker.timezoneAdjust(t,r.timezone),i=$.timepicker.timezoneAdjust(i,r.timezone)),this._updateDatepicker(n),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,i,!0)},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var n=this._getInst(e);if(!n)return;var r=this._get(n,"timepicker");if(r){n.lastVal===undefined&&this._setDateFromField(n,t);var i=this._getDate(n);return i&&r._parseTime($(e).val(),r.timeOnly)&&(i.setHours(r.hour,r.minute,r.second,r.millisec),i.setMicroseconds(r.microsec),r.timezone!=null&&(!r.support.timezone&&r._defaults.timezone===null&&(r.timezone=i.getTimezoneOffset()*-1),i=$.timepicker.timezoneAdjust(i,r.timezone))),i}return this._base_getDateDatepicker(e,t)},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,n){var r;try{r=this._base_parseDate(e,t,n)}catch(i){if(!(i.indexOf(":")>=0))throw i;r=this._base_parseDate(e,t.substring(0,t.length-(i.length-i.indexOf(":")-2)),n),$.timepicker.log("Error parsing the date string: "+i+"\ndate string = "+t+"\ndate format = "+e)}return r},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,n,r){var i=this._get(e,"timepicker");return i?(i._updateDateTime(e),i.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,n){var r=this._getInst(e),i;if(!r)return null;var s=this._get(r,"timepicker");if(s){var o=null,u=null,a=null,f=s._defaults.evnts,l={},c;if(typeof t=="string"){if(t==="minDate"||t==="minDateTime")o=n;else if(t==="maxDate"||t==="maxDateTime")u=n;else if(t==="onSelect")a=n;else if(f.hasOwnProperty(t)){if(typeof n=="undefined")return f[t];l[t]=n,i={}}}else if(typeof t=="object"){t.minDate?o=t.minDate:t.minDateTime?o=t.minDateTime:t.maxDate?u=t.maxDate:t.maxDateTime&&(u=t.maxDateTime);for(c in f)f.hasOwnProperty(c)&&t[c]&&(l[c]=t[c])}for(c in l)l.hasOwnProperty(c)&&(f[c]=l[c],i||(i=$.extend({},t)),delete i[c]);if(i&&isEmptyObject(i))return;o?(o===0?o=new Date:o=new Date(o),s._defaults.minDate=o,s._defaults.minDateTime=o):u?(u===0?u=new Date:u=new Date(u),s._defaults.maxDate=u,s._defaults.maxDateTime=u):a&&(s._defaults.onSelect=a)}return n===undefined?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,i||t,n)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var n in t)if(t[n]===null||t[n]===undefined)e[n]=t[n];return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),n=function(e,t){return e.indexOf(t)!==-1?!0:!1};return{hour:n(t,"h"),minute:n(t,"m"),second:n(t,"s"),millisec:n(t,"l"),microsec:n(t,"c"),timezone:n(t,"z"),ampm:n(t,"t")&&n(e,"h"),iso8601:n(e,"Z")}},convert24to12=function(e){return e%=12,e===0&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var n=computeEffectiveSetting(t,"separator"),r=computeEffectiveSetting(t,"timeFormat"),i=r.split(n),s=i.length,o=e.split(n),u=o.length;return u>1?{dateString:o.splice(0,u-s).join(n),timeString:o.splice(0,s).join(n)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,n,r,i){var s,o,u;o=splitDateTime(n,i),s=$.datepicker._base_parseDate(e,o.dateString,r);if(o.timeString==="")return{date:s};u=$.datepicker.parseTime(t,o.timeString,i);if(!u)throw"Wrong time format";return{date:s,timeObj:u}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var n=t||new Date;e.timezone_select.val(-n.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||e<-720)return e;var n=e,r=n%60,i=(n-r)/60,s=t?":":"",o=(n>=0?"+":"-")+("0"+Math.abs(i)).slice(-2)+s+("0"+Math.abs(r)).slice(-2);return o==="+00:00"?"Z":o},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return t.toUpperCase()==="Z"?0:/^(\-|\+)\d{4}$/.test(t)?(t.substr(0,1)==="-"?-1:1)*(parseInt(t.substr(1,2),10)*60+parseInt(t.substr(3,2),10)):e},$.timepicker.timezoneAdjust=function(e,t){var n=$.timepicker.timezoneOffsetNumber(t);return isNaN(n)||e.setMinutes(e.getMinutes()+ -e.getTimezoneOffset()-n),e},$.timepicker.timeRange=function(e,t,n){return $.timepicker.handleRange("timepicker",e,t,n)},$.timepicker.datetimeRange=function(e,t,n){$.timepicker.handleRange("datetimepicker",e,t,n)},$.timepicker.dateRange=function(e,t,n){$.timepicker.handleRange("datepicker",e,t,n)},$.timepicker.handleRange=function(e,t,n,r){function i(i,s){var o=t[e]("getDate"),u=n[e]("getDate"),a=i[e]("getDate");if(o!==null){var f=new Date(o.getTime()),l=new Date(o.getTime());f.setMilliseconds(f.getMilliseconds()+r.minInterval),l.setMilliseconds(l.getMilliseconds()+r.maxInterval),r.minInterval>0&&f>u?n[e]("setDate",f):r.maxInterval>0&&l<u?n[e]("setDate",l):o>u&&s[e]("setDate",a)}}function s(t,n,i){if(!t.val())return;var s=t[e].call(t,"getDate");s!==null&&r.minInterval>0&&(i==="minDate"&&s.setMilliseconds(s.getMilliseconds()+r.minInterval),i==="maxDate"&&s.setMilliseconds(s.getMilliseconds()-r.minInterval)),s.getTime&&n[e].call(n,"option",i,s)}return r=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},r),$.fn[e].call(t,$.extend({onClose:function(e,t){i($(this),n)},onSelect:function(e){s($(this),n,"minDate")}},r,r.start)),$.fn[e].call(n,$.extend({onClose:function(e,n){i($(this),t)},onSelect:function(e){s($(this),t,"maxDate")}},r,r.end)),i(t,n),s(t,n,"minDate"),s(n,t,"maxDate"),$([t.get(0),n.get(0)])},$.timepicker.log=function(e){window.console&&window.console.log(e)},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.4"}(jQuery),define("jquerytimepicker",["jquery","jqueryui"],function(){}),function(e,t,n){var r,i;e.uaMatch=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0",platform:n[0]||""}},r=e.uaMatch(t.navigator.userAgent),i={},r.browser&&(i[r.browser]=!0,i.version=r.version),r.platform&&(i[r.platform]=!0),i.chrome||i.opr?i.webkit=!0:i.webkit&&(i.safari=!0),i.rv&&(i.msie=!0),i.opr&&(i.opera=!0),e.browser=i}(jQuery,window),define("browser",["jquery"],function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!0;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(t){if(typeof exports!="undefined"&&typeof require!="undefined")var n=t.jQuery||t.Zepto||t.ender||require("jquery"),r=t._||require("underscore"),i=t.Backbone||require("backbone");else var n=t.jQuery,r=t._,i=t.Backbone;var s=i.View.extend({initialize:function(e){var t=this;e=e||{},e.formValues&&(this.formValues=e.formValues);var n=this.schema=function(){if(e.schema)return r.result(e,"schema");var n=e.model;return n&&n.schema?r.isFunction(n.schema)?n.schema():n.schema:t.schema?r.isFunction(t.schema)?t.schema():t.schema:{}}();r.extend(this,r.pick(e,"model","data","idPrefix"));var i=this.constructor;this.template=e.template||this.template||i.template,this.Fieldset=e.Fieldset||this.Fieldset||i.Fieldset,this.Field=e.Field||this.Field||i.Field,this.NestedField=e.NestedField||this.NestedField||i.NestedField;var s=this.selectedFields=e.fields||r.keys(n),o=this.fields={};r.each(s,function(e){var t=n[e];o[e]=this.createField(e,t)},this);var u=e.fieldsets||[s],a=this.fieldsets=[];r.each(u,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,t){var n=t.key+":"+e;this.trigger.call(this,n,this,t,Array.prototype.slice.call(arguments,2));switch(e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":this.updateFields(t);if(this.hasFocus){var i=this;setTimeout(function(){var e=r.find(i.fields,function(e){return e.editor.hasFocus});e||i.trigger("blur",i)},0)}}},updateFields:function(e){this.formValues&&this.formValues.updateFormValues(e),this.validate&&this.validate({fields:[e]})},render:function(){var e=this,t=this.fields,i=n(n.trim(this.template(r.result(this,"templateData"))));return i.find("[data-editors]").add(i).each(function(i,s){var o=n(s),u=o.attr("data-editors");if(r.isUndefined(u))return;var a=u=="*"?e.selectedFields||r.keys(t):u.split(",");r.each(a,function(e){var n=t[e];o.append(n.editor.render().el)})}),i.find("[data-fields]").add(i).each(function(i,s){var o=n(s),u=o.attr("data-fields");if(r.isUndefined(u))return;var a=u=="*"?e.selectedFields||r.keys(t):u.split(",");r.each(a,function(e){var n=t[e];o.append(n.render().el)})}),i.find("[data-fieldsets]").add(i).each(function(t,i){var s=n(i),o=s.attr("data-fieldsets");if(r.isUndefined(o))return;r.each(e.fieldsets,function(e){s.append(e.render().el)})}),this.setElement(i),i.addClass(this.className),this},ShowValidateMessage:function(e){if(!e)return;var t=this,n=e.field,i=e.message;console.error(n,i);return},validate:function(e){var t=this,n=this.fields,i=this.model,s={};e=e||{},r.each(n,function(e){var t=e.validate();t&&(s[e.key]=t)});if(!e.skipModelValidate&&i&&i.validate){var o=i.validate(this.getValue());if(o){var u=r.isObject(o)&&!r.isArray(o);u||(s._others=s._others||[],s._others.push(o)),u&&r.each(o,function(e,t){if(n[t]&&!s[t])n[t].setError(e),s[t]=e;else{s._others=s._others||[];var r={};r[t]=e,s._others.push(r)}})}}return r.isEmpty(s)?null:s},commit:function(e){e=e||{};var t={skipModelValidate:!e.validate},n=this.validate(t);if(n)return n;var i,s=r.extend({error:function(e,t){i=t}},e);this.model.set(this.getValue(),s);if(i)return i},getValue:function(e){if(e)return this.fields[e].getValue();var t={};return r.each(this.fields,function(e){t[e.key]=e.getValue()}),t},setValue:function(e,t){var n={};typeof e=="string"?n[e]=t:n=e;var r;for(r in this.schema)n[r]!==undefined&&this.fields[r].setValue(n[r])},getEditor:function(e){var t=this.fields[e];if(!t)throw"Field not found: "+e;return t.editor},focus:function(){if(this.hasFocus)return;var e=this.fieldsets[0],t=e.getFieldAt(0);if(!t)return;t.editor.focus()},blur:function(){if(!this.hasFocus)return;var e=r.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),i.View.prototype.trigger.apply(this,arguments)},remove:function(){return r.each(this.fieldsets,function(e){e.remove()}),r.each(this.fields,function(e){e.remove()}),i.View.prototype.remove.apply(this,arguments)}},{template:r.template('    <form data-fieldsets class="autoform"></form>  ',null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});s.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:r.template('Must match field "<%= field %>"',null,s.templateSettings)},e.required=function(e){return e=r.extend({type:"required",message:this.errMessages.required},e),function(n){e.value=n;var i={type:e.type,message:r.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n===!1||n==="")return i}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=r.extend({type:"regexp",message:this.errMessages.regexp},e),function(n){e.value=n;var i={type:e.type,message:r.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n==="")return;if(!e.regexp.test(n))return i}},e.email=function(t){return t=r.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},t),e.regexp(t)},e.url=function(t){return t=r.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},t),e.regexp(t)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=r.extend({type:"match",message:this.errMessages.match},e),function(n,i){e.value=n;var s={type:e.type,message:r.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n==="")return;if(n!==i[e.field])return s}},e}(),s.Fieldset=i.View.extend({initialize:function(e){e=e||{};var t=this.schema=this.createSchema(e.schema);this.fields=r.pick(e.fields,t.fields),this.template=e.template||this.constructor.template},createSchema:function(e){return r.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){var e=this.schema,t=this.fields,i=n(n.trim(this.template(r.result(this,"templateData"))));return i.find("[data-fields]").add(i).each(function(e,i){var s=n(i),o=s.attr("data-fields");if(r.isUndefined(o))return;r.each(t,function(e){s.append(e.render().el)})}),this.setElement(i),this},remove:function(){r.each(this.fields,function(e){e.remove()}),i.View.prototype.remove.call(this)}},{template:r.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,s.templateSettings)}),s.Field=i.View.extend({initialize:function(e){e=e||{},r.extend(this,r.pick(e,"form","key","model","value","idPrefix"));var t=this.schema=this.createSchema(e.schema);this.template=e.template||t.template||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){r.isString(e)&&(e={type:e});if(r.isUndefined(e.showLable)||e.showLable)e=r.extend({type:"Text",title:e.label?e.label:""},e);return e.type=r.isString(e.type)?s.editors[e.type]:e.type,e},createEditor:function(){var e=r.extend(r.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),t=this.schema.type;return new t(e)},createEditorId:function(){var e=this.idPrefix,t=this.key;return t=t.replace(/\./g,"_"),r.isString(e)||r.isNumber(e)?e+t:r.isNull(e)?t:this.model?this.model.cid+"_"+t:t},createTitle:function(){var e=this.schema&&this.schema.label?this.schema.label:this.key;return e=e.replace(/([A-Z])/g," $1"),e=e.replace(/^./,function(e){return e.toUpperCase()}),e},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var e=this.schema,t=this.editor;if(e.type==s.editors.Hidden)return this.setElement(t.render().el);var i=n(n.trim(this.template(r.result(this,"templateData"))));return e.fieldClass&&i.addClass("input-field "+e.fieldClass),e.fieldAttrs&&i.attr(e.fieldAttrs),i.find("[data-editor]").add(i).each(function(i,s){var o=n(s),u=o.attr("data-editor");if(r.isUndefined(u))return;o.append(t.render().el),e.tooltip&&e.tooltip!=""&&o.find("input,label,textarea,.dropdown-wrapper").qtip({content:e.tooltip,show:"mousedown",position:{my:"bottom center",at:"top center"},style:{}})}),this.setElement(i),this.schema.hideElement&&this.$el.addClass("hide"),this},showField:function(){this.$el.removeClass("hide")},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){if(this.editor.hasNestedForm)return;console.log(this.$el),this.$el.addClass(this.errorClassName);var t=this;this.$("[data-error]").html(e).fadeIn(),setTimeout(function(){t.$("[data-error]").fadeOut(1e3)},3e3)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),i.View.prototype.remove.call(this)}},{template:r.template('    <div class="field-row">      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,s.templateSettings),errorClassName:"error"}),s.NestedField=s.Field.extend({template:r.template(n.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,s.templateSettings)}),s.Editor=s.editors.Base=i.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){var e=e||{};if(e.model){if(!e.key)throw"Missing option: 'key'";this.model=e.model,this.value=this.model.get(e.key)}else e.value!==undefined&&(this.value=e.value);this.value===undefined&&(this.value=this.defaultValue),r.extend(this,r.pick(e,"key","form"));var t=this.schema=e.schema||{};this.validators=e.validators||t.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),t.editorClass&&this.$el.addClass(t.editorClass),t.editorAttrs&&this.$el.attr(t.editorAttrs)},setFieldWidth:function(){this.field_width&&this.$el.css({width:this.field_width})},getName:function(){var e=this.key||"";return e.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw"Not implemented"},blur:function(){throw"Not implemented"},commit:function(e){var t=this.validate();if(t)return t;this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e);if(t)return t},validate:function(){var e=this.$el,t=null,n=this.getValue(),i=this.form?this.form.getValue():{},s=this.validators,o=this.getValidator;return s&&r.every(s,function(e){return t=o(e)(n,i),t?!1:!0}),t},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),i.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var t=s.validators;if(r.isRegExp(e))return t.regexp({regexp:e});if(r.isString(e)){if(!t[e])throw new Error('Validator "'+e+'" not found');return t[e]()}if(r.isFunction(e))return e;if(r.isObject(e)&&e.type){var n=e;return t[n.type](n)}throw new Error("Invalid validator: "+e)}}),s.editors.Text=s.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)},change:"change"},change:function(e){this.changeEvent&&this.changeEvent(e),this.validate&&this.validate()},validateField:function(e,t){this.serverValidate({field:e,message:t})},initialize:function(e){r.bindAll(this),s.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.type),t&&t.dataType&&(n=t.dataType),t&&t.changeEvent&&(this.changeEvent=t.changeEvent),this.setAllAttr(this.schema.attr),this.$el.attr("type",n),this.setOptions(e.schema.form_values),this.defaultValue&&(this.value=this.defaultValue),this.schema.bindDatePicker&&this.bindDatePickerFn()},setOptions:function(e){for(var t in e)this[t]=e[t]},bindDatePickerFn:function(){this.$el.datepicker({dateFormat:"M d, yy",changeMonth:!0,changeYear:!0})},setAllAttr:function(e){for(var t in e)this.$el.attr(t,e[t])},render:function(){return this.setValue(this.value),this.setFieldWidth(),this},determineChange:function(e){var t=this.$el.val(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.schema.bindDatePicker?this.$el.datepicker("getDate"):this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),s.editors.Location=s.editors.Text.extend({tagName:"div",locationId:null,map_id:"",template:'<textarea placeholder="Address" class="location-h address-h" rows="3" cols="25"><%= address %></textarea>			 <span class="address-error hide address-error-status-h"></span>			 <a href="javascript: void(0);" class="verify-address-h">Verify Address</a>			 <div id="<%= map_id %>" style="width: 97%; height: 250px; margin-top: 20px; display:none;"></div>',events:{"click .verify-address-h":"verifyAddress","blur .verify-address-h":"verifyAddress"},verifyAddress:function(){var e=this,t=e.$el.find(".address-h").val(),r=require("usercontrol/location/models/verify-adress");e.locationId=undefined,e.adressModel=new r,e.adressModel.address=t,e.adressModel.url(),e.adressModel.set({address:t}),e.adressModel.showError=function(t,n){try{e.$el.find(".set-address-h").addClass("link-disabled"),e.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}e.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},e.adressModel.save({dataType:"json"}),e.$el.find(".address-h").removeClass("address-verified"),n.when(e.adressModel.request).done(function(){console.log(e.adressModel.toJSON()),e.locationId=e.adressModel.get("payload").id;if(e.locationId){e.$el.find(".address-error-status-h").addClass("hide"),e.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),e.location.latitude=e.adressModel.get("payload").lat,e.location.longitude=e.adressModel.get("payload").lon,e.$el.find(".set-address-h").removeClass("link-disabled");if(e.map){var t=new google.maps.LatLng(e.location.latitude,e.location.longitude);e.refreshAndPosition(t)}else e.createMap();e.trigger("blur",e)}})},createMap:function(){this.$el.find("#"+this.map_id).show();var e=this,t=new google.maps.LatLng(e.location.latitude,e.location.longitude),n={zoom:13,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(document.getElementById(this.map_id),n),this.marker=new google.maps.Marker({position:t,map:this.map}),this.marker.setMap(this.map),e.refreshAndPosition(t)},refreshAndPosition:function(e){var t=this;setTimeout(function(){google.maps.event.trigger(t.map,"resize"),t.marker.setPosition(e),t.map.panTo(e)},50)},determineChange:function(e){var t=this,n=this.$el.val();t.$el.addClass("ui-autocomplete-loading"),this.getData&&this.getData(n,function(e){t.cities=[];for(var n in e)t.cities.push(e[n]);var r=[];t.cities.forEach(function(e,t){r.push(e.city)});try{t.$el.autocomplete("destroy")}catch(i){}t.$el.autocomplete({source:r}),t.$el.trigger("keydown")})},autoComplete:function(){n(e.target).autocomplete({source:arr})},initialize:function(e){r.bindAll(this),s.editors.Base.prototype.initialize.call(this,e),this.map_id="map-canvas-"+Math.floor(Math.random()*1e4+1);var t=e.schema;t&&t.getData&&(this.getData=t.getData),this.setFormOptions(e.schema.form_values),this.value=this.defaultValue||"",this.location={latitude:undefined,longitude:undefined},e.callback&&(this.callback=e.callback),this.location.latitude=r.isUndefined(t.latitude)?undefined:t.latitude,this.location.longitude=r.isUndefined(t.longitude)?undefined:t.longitude,this.locationId=r.isUndefined(t.locationId)?undefined:t.locationId},setFormOptions:function(e){if(e)for(var t in e)this[t]=e[t]},render:function(){var e=this,t=r.template(this.template,{address:this.value,map_id:this.map_id});this.$el.html(t);if(this.location.latitude!==undefined&&this.location.longitude!==undefined)var i=0,s=setInterval(function(){i++,n("#"+e.map_id).length?(e.createMap(),clearInterval(s)):i>20&&clearInterval(s)},300);return this},getValue:function(){return this.locationId},setValue:function(e){this.$el.find(".address-h").val(e),this.$el.find(".verify-address-h").trigger("click")},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),s.editors.AutoComplete=s.editors.Text.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("checkForEmpty",this)}},isValidAutoCompleteKey:function(e){if(e){var t=e.keyCode?e.keyCode:e.which;if(t>=59&&t<=90||t>=96&&t<=105||t==8||t==32||t==46)return!0}return!1},checkForEmpty:function(){alert("sdasd");var e=this,t=this.$el.val();console.error(t),t==""&&(e.afterSetValue&&r.isFunction(e.afterSetValue)&&e.afterSetValue("hide"),e.$el.removeClass("ui-autocomplete-loading"))},determineChange:function(e){if(!this.isValidAutoCompleteKey(e))return;var t=this,i=this.$el.val();this.getData&&i!=""?(t.$el.addClass("ui-autocomplete-loading"),this.getData(i,function(e){console.error("callback",e,i),t.records=[],t.keyNameInPayload||(t.keyNameInPayload="name");var s=t.keyNameInPayload,o=t.subLabelInPayload?t.subLabelInPayload:null;for(var u in e)t.records.push(e[u]);var a=[];t.initialInsert&&typeof t.initialInsert=="object"&&a.push(t.initialInsert),t.records.forEach(function(e,t){var n=e.payload?e.payload[s]:e[s],r=o&&e.payload?e.payload[o]:o?e[o]:"";id=e.payload?e.payload.id:e.id,a.push({value:n,l:r,id:id,full_return:e.payload})}),t.finalInsert&&typeof t.finalInsert=="object"&&a.push(t.finalInsert),console.log(a);var f=function(e,n){t.afterSetValue&&r.isFunction(t.afterSetValue)&&t.afterSetValue("show"),console.log("select or change");if(n.item){t.$el.parent().find(".indicator-h").removeClass("invalid").addClass("valid");var i=n.item.id?n.item.id:n.item.value;t.$el.attr("data-id",i),t.trigger("blur",t),n.item.customCallback&&typeof n.item.customCallback=="function"?n.item.customCallback(i,n.item):t.callback&&t.callback(i,n.item)}};try{t.$el.autocomplete("destroy")}catch(l){}a.length?t.$el.autocomplete({source:a,select:f,change:f,response:function(e,n){n.content.length||(t.$el.attr("data-id",""),t.callback&&t.callback(0)),console.log("hopefully this is every key stroke",n)}}).data("ui-autocomplete")._renderItem=function(e,t){var r=n("<li>"),s="<a>";return console.log(typeof t.value),typeof t.value=="string"?s+=t.value:typeof t.value=="function"&&(s+=t.value(i)),t.l!=""&&(s+="<br><span class='sub-label'>"+t.l+"</span>"),s+="</a>",r.append(s).appendTo(e)}:(console.log("No Results"),t.noResultsCallback&&r.isFunction(t.noResultsCallback)&&t.noResultsCallback(i)),t.$el.trigger("keydown")})):(t.afterSetValue&&r.isFunction(t.afterSetValue)&&t.afterSetValue("hide"),t.$el.removeClass("ui-autocomplete-loading"))},setOptions:function(e){for(var t in e)this[t]=e[t]},initialize:function(e){s.editors.Base.prototype.initialize.call(this,e);var t=this,n=e.schema;this.$el.attr("type","text"),this.setOptions(e.schema.form_values),this.setFieldWidth(),this.automaticFetch&&t.automaticFetchFn(t)},getData:function(e,t){var i=this;if(this.source_collection){if(this.collectionFetchOb){try{i.$el.autocomplete("destroy")}catch(s){}this.collectionFetchOb.abort()}this.collection=new this.source_collection,i.$el.addClass("ui-autocomplete-loading");if(this.request_fields)for(var o in this.request_fields)this.collection[this.request_fields[o].key]=this.request_fields[o].value&&typeof this.request_fields[o].value=="function"?this.request_fields[o].value(this):this.request_fields[o].value;i.$el.parent().find(".indicator-h").length||i.$el.after('<span class="indicator-h field-error-img"></span>'),i.$el.parent().find(".indicator-h").removeClass("valid").addClass("invalid"),i.afterSetValue&&r.isFunction(i.afterSetValue)&&i.afterSetValue("hide"),this.collectionFetchOb=this.collection.fetch(),n.when(i.collection.request).done(function(){i.request_finished&&i.request_finished(),t&&t(i.collection.toJSON()),i.$el.removeClass("ui-autocomplete-loading")})}},getValue:function(){return this.$el.attr("data-id")},setValue:function(e,t){this.$el.parent().find(".indicator-h").length||this.$el.after('<span class="indicator-h field-error-img"></span>'),!e&&e==""?this.$el.parent().find(".indicator-h").removeClass("valid").addClass("invalid"):this.$el.parent().find(".indicator-h").removeClass("invalid").addClass("valid"),this.$el.attr("data-id",e),this.$el.val(t),this.afterSetValue&&r.isFunction(this.afterSetValue)&&this.afterSetValue("show")},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),s.editors.DropDown=s.editors.Text.extend({tagName:"div",determineChange:function(e){var t=this,n=this.$el.val()},template:'<div class="dropdown-container">		<input type="hidden" class="hidden-input-dropdown-h" value="" />		<div class="drop-down-outer">			<div class="region-dark dropdown-header-box">				<%=dropView.title%>			</div>			<div class="down-arrow-outer">				<a href="javascript: void(0);" class="down-arrow up-down-arrow-h">					<span class="icon-white icon-chevron-down"></span>				</a></div>		<div class="common-container">			<ul class="common-dropdown">				<% if(records) { var len = records.length; for(var i = 0; i < len; i++) { %>				<li class="<%=(records[i].payload[recordId] == selectedValue)?"selected":""%>">					<a data-id="<%=records[i].payload[recordId]%>" href="javascript: void(0);"><%=records[i].payload[recordValue]%></a>				</li>				<% } } %>			</ul>		</div>	</div>',multiple:!1,selectedOptions:[],className:"dropdown-wrapper",events:{"click .up-down-arrow-h":"showDropdown","click li a":"selectOptions"},selectOptions:function(e){var t=n(e.target).data("id");this.multiple?(this.setMultipleOptions(t,e),this.setValue(this.selectedOptions.join(", "))):(this.setSingleOption(t,e),this.setValue(t)),this.showSelectedValue(),this.callback&&this.callback(this.selectedOptions),this.trigger("blur",this)},showSelectedValue:function(){var e=this.$el.find(".common-dropdown li.selected").text()||this.title;this.$el.find(".dropdown-header-box").html(e)},setMultipleOptions:function(e,t){var r=this.checkifExists(e);r==-1?(n(t.target).parent().addClass("selected"),this.selectedOptions.push(e)):(n(t.target).parent().removeClass("selected"),this.selectedOptions.splice(r,1))},setSingleOption:function(e,t){var r=this.checkifExists(e);r==-1&&(this.selectedOptions=[],this.$el.find(".common-dropdown li").removeClass("selected"),n(t.target).parent().addClass("selected"),this.selectedOptions.push(e),this.$el.find(".hidden-input-dropdown-h").val(e),this.hideDropdown())},checkifExists:function(e){var t=-1;for(var n in this.selectedOptions)if(this.selectedOptions[n]==e){t=n;break}return t},initialize:function(e){s.editors.Base.prototype.initialize.call(this,e);var t=this;t.selectedOptions=[],t.setOptions(e.schema.form_values),t.checkForData(),t.$el.find(".hidden-input-dropdown-h").attr("id",t.elementId)},getData:function(e,t){var n=this;if(this.source_collection){this.collection=new this.source_collection;if(this.request_fields)for(var r in this.request_fields)this.collection[this.request_fields[r].key]=this.request_fields[r].value&&typeof this.request_fields[r].value=="function"?this.request_fields[r].value():this.request_fields[r].value;this.collection.fetch(),this.collection.processResult=function(){console.log("COLLECTION: ",n.collection);var e=n.collection.ParseForDropdown();n.request_finished&&n.request_finished(),t&&t(e)}}},checkForData:function(e){var t=this;t.data.records&&!e?t.render():t.getData("",function(e){t.data.records=e;if(!t.selectedValue){if(t.data.records&&t.data.records.length)var n=t.data.records[0].payload[t.data.recordId];t.multiple?(t.selectedValue=[],t.selectedValue.push(n)):t.selectedValue=n,t.showDefaultValueSelected()}t.render()})},hideDropdown:function(e){if(!e||!this.$el.find(n(e.target)).parents(".dropdown-container").length)this.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),this.$el.find(".up-down-arrow-h span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),this.$el.find(".common-dropdown").slideUp()},showDropdown:function(e){e.preventDefault();var t=this;n(e.currentTarget).find("span").hasClass("icon-chevron-down")?(n(e.currentTarget).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up"),n(".dropdown-container").removeClass("increase-dropown-zindex"),t.$el.find(".dropdown-container").addClass("increase-dropown-zindex"),n("html").bind("click",function(e){t.hideDropdown(e)})):(t.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),n(e.currentTarget).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down")),n(e.currentTarget).parents(".dropdown-container").find(".common-dropdown").slideToggle()},defaultSelected:function(e){if(_self.multiple){if(_self.selectedValue&&r.isArray(_self.selectedValue))for(var t in _self.selectedValue)if(_self.selectedValue[t]==this.payload[_self.data.recordId])return"selected"}else if(_self.selectedValue&&_self.selectedValue==this.payload[_self.data.recordId])return"selected"},render:function(){var e=this;this.data.dropView=e,this.selectedValue=this.data.selectedValue,this.selectedOptions=[];if(typeof this.selectedValue=="undefined"||!this.selectedValue){if(this.data.records&&this.data.records.length)var t=this.data.records[0].payload[this.data.recordId];this.multiple?(this.selectedValue=[],this.selectedValue.push(t)):this.selectedValue=t}var e=this,i=r.template(this.template,this.data);return this.$el.html(i),this.setValue(this.data.selectedValue),this.selectedOptions.push(this.selectedValue),this.showSelectedValue(),n("#"+this.elementId).length?e.callback&&e.callback(this.selectedOptions):setTimeout(function(){e.showDefaultValueSelected(),e.callback&&e.callback(e.selectedOptions)},200),this},showDefaultValueSelected:function(){var e=this;if(!e.$el.find("li.selected").length){var t=e.$el.find(".common-dropdown li:first-child");t.addClass("selected")}else var t=e.$el.find("li.selected");var n=t.find("a").data("id");n&&(e.$el.find(".hidden-input-dropdown-h").val(t.find("a").data("id")),e.showSelectedValue())},setOptions:function(e){for(var t in e)this[t]=e[t]},getValue:function(){return this.$el.find(".hidden-input-dropdown-h").val()},setValue:function(e){this.$el.find(".common-dropdown li").removeClass("selected"),this.$el.find(".common-dropdown a[data-id="+e+"]").parent("li").addClass("selected");var t=this.$el.find(".common-dropdown li.selected a").data("id");t&&t!=""?this.$el.find(".hidden-input-dropdown-h").val(t):(this.$el.find(".common-dropdown li:first-child").addClass("selected"),this.$el.find(".hidden-input-dropdown-h").val(this.$el.find(".common-dropdown li.selected a").data("id"))),this.showSelectedValue()},select:function(){this.$el.select()}}),s.editors.TextArea=s.editors.Text.extend({tagName:"textarea",initialize:function(e){s.editors.Base.prototype.initialize.call(this,e)}}),s.editors.Password=s.editors.Text.extend({initialize:function(e){s.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),s.editors.Number=s.editors.Text.extend({defaultValue:0,events:r.extend({},s.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){s.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),(!t||!t.editorAttrs||!t.editorAttrs.step)&&this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(e.charCode===0){n();return}var r=this.$el.val();e.charCode!=undefined&&(r+=String.fromCharCode(e.charCode));var i=/^[0-9]*\.?[0-9]*?$/.test(r);i?n():e.preventDefault()},getValue:function(){var e=this.$el.val();return e===""?null:parseFloat(e,10)},setValue:function(e){e=function(){return r.isNumber(e)?e:r.isString(e)&&e!==""?parseFloat(e,10):null}(),r.isNaN(e)&&(e=null),s.editors.Text.prototype.setValue.call(this,e)}}),s.editors.Submit=s.editors.Text.extend({tag:"input",defaultValue:"Create",className:"submit-btn",events:{click:"submitHandler"},submitHandler:function(e){e.preventDefault(),this.onSubmit&&this.onSubmit(e)},initialize:function(e){e.schema&&e.schema.attr&&e.schema.attr.value&&(this.defaultValue=e.schema.attr.value),e.schema&&e.schema.onSubmit&&(this.onSubmit=e.schema.onSubmit),s.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","submit"),this.$el.attr("value","Create")}}),s.editors.Button=s.editors.Text.extend({tag:"input",defaultValue:"",className:"submit-btn",events:{click:"submitHandler"},initialize:function(e){e.schema&&e.schema.attr&&e.schema.attr.value&&(this.defaultValue=e.schema.attr.value),e.schema&&e.schema.onClick&&(this.onClick=e.schema.onClick),s.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","button"),this.$el.attr("value","Cancel"),this.setAllAttr(this.schema.attr)},submitHandler:function(e){e.preventDefault(),this.onClick&&this.onClick(e)},setAllAttr:function(e){for(var t in e)this.$el.attr(t,e[t])}}),s.editors.Hidden=s.editors.Text.extend({defaultValue:"",initialize:function(e){s.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden"),this.value&&this.$el.attr("value",this.value),this.setOptions(e.schema.options)},setOptions:function(e){for(var t in e)this[t]=e[t]},focus:function(){},blur:function(){}}),s.editors.Checkbox=s.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){s.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}}),s.editors.Select=s.editors.Base.extend({tagName:"select",events:{change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){s.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw"Missing required 'schema.options'"},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var t=this;if(e instanceof i.Collection){var n=e;n.length>0?this.renderOptions(e):n.fetch({success:function(n){t.renderOptions(e)}})}else r.isFunction(e)?e(function(e){t.renderOptions(e)},t):this.renderOptions(e)},renderOptions:function(e){var t=this.$el,n;n=this._getOptionsHtml(e),t.html(n),this.setValue(this.value)},_getOptionsHtml:function(e){var t;if(r.isString(e))t=e;else if(r.isArray(e))t=this._arrayToHtml(e);else if(e instanceof i.Collection)t=this._collectionToHtml(e);else if(r.isFunction(e)){var n;e(function(e){n=e},this),t=this._getOptionsHtml(n)}else t=this._objectToHtml(e);return t},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(e){var t=[];e.each(function(e){t.push({val:e.id,label:e.toString()})});var n=this._arrayToHtml(t);return n},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});var r=this._arrayToHtml(t);return r},_arrayToHtml:function(e){var t=[];return r.each(e,function(e){if(r.isObject(e))if(e.group)t.push('<optgroup label="'+e.group+'">'),t.push(this._getOptionsHtml(e.options)),t.push("</optgroup>");else{var n=e.val||e.val===0?e.val:"";t.push('<option value="'+n+'">'+e.label+"</option>")}else t.push("<option>"+e+"</option>")},this),t.join("")}}),s.editors.Radio=s.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},click:"clickHandler","focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=radio]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(this.hasFocus)return;var e=this.$("input[type=radio]:checked");if(e[0]){e.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},initialize:function(e){s.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw"Missing required 'schema.options'";this.clickHandler=this.schema.onClickFn?this.schema.onClickFn:function(){}},_arrayToHtml:function(e){var t=[],n=this;return r.each(e,function(e,i){var s="<li>";if(r.isObject(e)){var o=e.val||e.val===0?e.val:"";s+='<input type="radio" name="'+n.getName()+'" value="'+o+'" id="'+n.id+"-"+i+'" />',s+='<label for="'+n.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="radio" name="'+n.getName()+'" value="'+e+'" id="'+n.id+"-"+i+'" />',s+='<label for="'+n.id+"-"+i+'">'+e+"</label>";s+="</li>",t.push(s)}),t.join("")}}),s.editors.Checkboxes=s.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=checkbox]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){var e=[];return this.$("input[type=checkbox]:checked").each(function(){e.push(n(this).val())}),e},setValue:function(e){r.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var t=[],n=this;return r.each(e,function(e,i){var s="<li>",o=!0;if(r.isObject(e))if(e.group){var u=n.id;n.id+="-"+n.groupNumber++,s='<fieldset class="group"> <legend>'+e.group+"</legend>",s+=n._arrayToHtml(e.options),s+="</fieldset>",n.id=u,o=!1}else{var a=e.val||e.val===0?e.val:"";s+='<input type="checkbox" name="'+n.getName()+'" value="'+a+'" id="'+n.id+"-"+i+'" />',s+='<label for="'+n.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="checkbox" name="'+n.getName()+'" value="'+e+'" id="'+n.id+"-"+i+'" />',s+='<label for="'+n.id+"-"+i+'">'+e+"</label>";o&&(s+="</li>"),t.push(s)}),t.join("")}}),s.editors.Object=s.editors.Base.extend({hasNestedForm:!0,initialize:function(e){this.value={},s.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw'Missing required option "form"';if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),i.View.prototype.remove.call(this)},serverValidate:function(e){return this.nestedForm.ShowValidateMessage(e)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var e=r.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),s.editors.NestedModel=s.editors.Object.extend({initialize:function(e){s.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw'Missing required option "form"';if(!e.schema.model)throw'Missing required "schema.model" option for NestedModel editor'},render:function(){var e=this.form.constructor,t=this.value||{},n=this.key,r=this.schema.model,i=t.constructor===r?t:new r(t);return this.nestedForm=new e({model:i,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):s.editors.Object.prototype.commit.call(this)}}),s.editors.Date=s.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},s.editors.Base.prototype.initialize.call(this,e);var t=s.editors.Date,n=new Date;this.options=r.extend({monthNames:t.monthNames,showMonthNames:t.showMonthNames},e),this.schema=r.extend({yearStart:n.getFullYear()-100,yearEnd:n.getFullYear()},e.schema||{}),this.value&&!r.isDate(this.value)&&(this.value=new Date(this.value));if(!this.value){var i=new Date;i.setSeconds(0),i.setMilliseconds(0),this.value=i}this.template=e.template||this.constructor.template},render:function(){var e=this.options,t=this.schema,i=r.map(r.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),s=r.map(r.range(0,12),function(t){var n=e.showMonthNames?e.monthNames[t]:t+1;return'<option value="'+t+'">'+n+"</option>"}),o=t.yearStart<t.yearEnd?r.range(t.yearStart,t.yearEnd+1):r.range(t.yearStart,t.yearEnd-1,-1),u=r.map(o,function(e){return'<option value="'+e+'">'+e+"</option>"}),a=n(n.trim(this.template({dates:i.join(""),months:s.join(""),years:u.join("")})));return this.$date=a.find('[data-type="date"]'),this.$month=a.find('[data-type="month"]'),this.$year=a.find('[data-type="year"]'),this.$hidden=n('<input type="hidden" name="'+this.key+'" />'),a.append(this.$hidden),this.setValue(this.value),this.setElement(a),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return!e||!t||!n?null:new Date(e,t,n)},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();r.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:r.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,s.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),s.editors.DateTime=s.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},s.editors.Base.prototype.initialize.call(this,e),this.options=r.extend({DateEditor:s.editors.DateTime.DateEditor},e),this.schema=r.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function e(e){return e<10?"0"+e:e}var t=this.schema,i=r.map(r.range(0,24),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),s=r.map(r.range(0,60,t.minsInterval),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),o=n(n.trim(this.template({hours:i.join(),mins:s.join()})));return o.find("[data-date]").append(this.dateEditor.render().el),this.$hour=o.find('select[data-type="hour"]'),this.$min=o.find('select[data-type="min"]'),this.$hidden=o.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(o),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return!e||!t||!n?null:(e.setHours(t),e.setMinutes(n),e)},setValue:function(e){r.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();r.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),s.editors.Base.prototype.remove.call(this)}},{template:r.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,s.templateSettings),DateEditor:s.editors.Date}),s.VERSION="0.12.0",i.Form=s,typeof exports!="undefined"&&(exports=s)}(window||global||this),define("backbone",["underscore","jquery","json2","html5","jqueryui","custom","jquerytimepicker","browser"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function i(e,t){return r(E.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&g[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+T.join(r+" ")+r).split(" "),a(i,t,n))}function l(){h.input=function(n){for(var r=0,i=n.length;r<i;r++)L[n[r]]=n[r]in y;return L.list&&(L.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),L}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),h.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++)y.setAttribute("type",s=e[r]),i=y.type!=="text",i&&(y.value=b,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&y.style.WebkitAppearance!==n?(d.appendChild(y),o=t.defaultView,i=o.getComputedStyle&&o.getComputedStyle(y,null).WebkitAppearance!=="textfield"&&y.offsetHeight!==0,d.removeChild(y)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=y.checkValidity&&y.checkValidity()===!1:i=y.value!=b)),k[e[r]]=!!i;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c="2.6.2",h={},p=!0,d=t.documentElement,v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",x=S.split(" "),T=S.toLowerCase().split(" "),N={svg:"http://www.w3.org/2000/svg"},C={},k={},L={},A=[],O=A.slice,M,_=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:v+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),f.id=v,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),d.style.overflow=a),!!o},D=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return _("@media "+t+" { #"+v+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},P=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var o=e in i;return o||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),o=s(i[e],"function"),s(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),H={}.hasOwnProperty,B;!s(H,"undefined")&&!s(H.call,"undefined")?B=function(e,t){return H.call(e,t)}:B=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=O.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(O.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(O.call(arguments)))};return r}),C.flexbox=function(){return f("flexWrap")},C.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},C.canvastext=function(){return!!h.canvas&&!!s(t.createElement("canvas").getContext("2d").fillText,"function")},C.webgl=function(){return!!e.WebGLRenderingContext},C.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:_(["@media (",E.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},C.geolocation=function(){return"geolocation"in navigator},C.postmessage=function(){return!!e.postMessage},C.websqldatabase=function(){return!!e.openDatabase},C.indexedDB=function(){return!!f("indexedDB",e)},C.hashchange=function(){return P("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},C.history=function(){return!!e.history&&!!history.pushState},C.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},C.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},C.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),o(g.backgroundColor,"rgba")},C.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),o(g.backgroundColor,"rgba")||o(g.backgroundColor,"hsla")},C.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},C.backgroundsize=function(){return f("backgroundSize")},C.borderimage=function(){return f("borderImage")},C.borderradius=function(){return f("borderRadius")},C.boxshadow=function(){return f("boxShadow")},C.textshadow=function(){return t.createElement("div").style.textShadow===""},C.opacity=function(){return i("opacity:.55"),/^0.55$/.test(g.opacity)},C.cssanimations=function(){return f("animationName")},C.csscolumns=function(){return f("columnCount")},C.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+E.join(n+e)).slice(0,-e.length)),o(g.backgroundImage,"gradient")},C.cssreflections=function(){return f("boxReflect")},C.csstransforms=function(){return!!f("transform")},C.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective"in d.style&&_("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},C.csstransitions=function(){return f("transition")},C.fontface=function(){var e;return _('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},C.generatedcontent=function(){var e;return _(["#",v,"{font:0/0 a}#",v,':after{content:"',b,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},C.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},C.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},C.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},C.webworkers=function(){return!!e.Worker},C.applicationcache=function(){return!!e.applicationCache},C.svg=function(){return!!t.createElementNS&&!!t.createElementNS(N.svg,"svg").createSVGRect},C.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==N.svg},C.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(N.svg,"animate")))},C.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(N.svg,"clipPath")))};for(var j in C)B(C,j)&&(M=j.toLowerCase(),h[M]=C[j](),A.push((h[M]?"":"no-")+M));return h.input||l(),h.addTest=function(e,t){if(typeof e=="object")for(var r in e)B(e,r)&&h.addTest(r,e[r]);else{e=e.toLowerCase();if(h[e]!==n)return h;t=typeof t=="function"?t():t,typeof p!="undefined"&&p&&(d.className+=" "+(t?"":"no-")+e),h[e]=t}return h},r(""),m=y=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),h._version=c,h._prefixes=E,h._domPrefixes=T,h._cssomPrefixes=x,h.mq=D,h.hasEvent=P,h.testProp=function(e){return u([e])},h.testAllProps=f,h.testStyles=_,h.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx")},d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+A.join(" "):""),h}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},define("modernizr",function(){}),function(e,t){typeof exports=="object"&&exports?module.exports=t:typeof define=="function"&&define.amd?define("mustache",t):e.Mustache=t}(this,function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){function n(e,n,r){if(!t[e]){var i=m(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice(o[3],o[5]),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function g(e){var t=[],n=t,r=[],i;for(var s=0,o=e.length;s<o;++s){i=e[s];switch(i[0]){case"#":case"^":r.push(i),n.push(i),n=i[4]=[];break;case"/":var u=r.pop();u[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(r=n,t.push(n));return t}function b(e){return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.2",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=m(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)},c=i.call(t.view,n,l);return c!=null?c:"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function E(){if(m&&!w)while(v.length)d.splice(v.pop(),1);else v=[];m=!1,w=!1}r=r||"",u=u||e.tags,typeof u=="string"&&(u=u.split(n));if(u.length!==2)throw new Error("Invalid tags: "+u.join(", "));var f=b(u),c=new p(r),h=[],d=[],v=[],m=!1,w=!1,S,x,T,N;while(!c.eos()){S=c.pos,T=c.scanUntil(f[0]);if(T)for(var C=0,k=T.length;C<k;++C)N=T.charAt(C),a(N)?v.push(d.length):w=!0,d.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();S=c.pos;if(!c.scan(f[0]))break;m=!0,x=c.scan(o)||"name",c.scan(t);if(x==="=")T=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(x==="{"){var L=new RegExp("\\s*"+l("}"+u[1]));T=c.scanUntil(L),c.scan(s),c.scanUntil(f[1]),x="&"}else T=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);if(x==="/"){if(h.length===0)throw new Error('Unopened section "'+T+'" at '+S);var A=h.pop();if(A[1]!==T)throw new Error('Unclosed section "'+A[1]+'" at '+S)}var O=[x,T,S,c.pos];d.push(O);if(x==="#"||x==="^")h.push(O);else if(x==="name"||x==="{"||x==="&")w=!0;else if(x==="="){u=T.split(n);if(u.length!==2)throw new Error("Invalid tags at "+S+": "+u.join(", "));f=b(u)}}var A=h.pop();if(A)throw new Error('Unclosed section "'+A[1]+'" at '+c.pos);return g(y(d))};var w=new v;return e.clearCache=function(){return w.clearCache()},e.compile=function(e,t){return w.compile(e,t)},e.compilePartial=function(e,t,n){return w.compilePartial(e,t,n)},e.compileTokens=function(e,t){return w.compileTokens(e,t)},e.render=function(e,t,n){return w.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o;i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning||this.$element.hasClass("in"))return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning||!this.$element.hasClass("in"))return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=e.extend({},e.fn.collapse.defaults,r.data(),typeof n=="object"&&n);i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||s.toggleClass("open"),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+(!e.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("bootstrap",["jquery","jqueryui"],function(){}),define("vendor",["jquery","underscore","backbone","modernizr","mustache","bootstrap"],function(e,t,n,r,i,s){return e.noConflict(),t.noConflict(),n.noConflict(),r=r?"undefined":window.Modernizr,{jQuery:e,$:e,_:t,Backbone:n,Modernizr:r,Mustache:i,Bootstrap:s}}),define("facade",["vendor"],function(e){var t={},n,r=e.jQuery||window.jQuery,i=e.Zepto||window.Zepto,s=e._,o=e.Mustache||window.Mustache,u=e.Backbone;return n=r||i,!r&&i&&require(["vendor/plugins/type"],function(){n.type=$.type,require(["vendor/plugins/callbacks"],function(){n.Callbacks=$.Callbacks,require(["vendor/plugins/deferred"],function(){n.Deferred=$.Deferred})})}),n&&(t.type=n.type,t.inArray=n.inArray,t.Callbacks=n.Callbacks,t.Deferred=n.Deferred),t.toHTML=o.to_html,t.$=n,t._=s,t.Backbone=u,t.ajaxRequests=[],t}),define("utils/ajax-options",[],function(){var e;return e={beforeSend:function(e){}},e}),define("utils/debug",["facade"],function(e){var t,n,r=e.$;return t={mode:function(){return typeof console!="undefined"&&console!==null},log:function(e){var t=this.mode();t}},n={mode:function(){return r("body").append('<div id="console"/>'),!0},msgs:[],log:function(e){var t=this.mode();t&&(this.msgs.push(e),r("#console").append("<p>"+e+"</p>"))}},window.HL&&window.HL.disableDebugMode&&(t.mode=function(){return!1}),t}),define("utils/cookies",[],function(){var e={getItem:function(e){var t;return!e||!this.hasItem(e)?null:(t=unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")),this.isExpired(t)?null:t)},setItem:function(e,t,n,r,i,s){if(!e||/^(?:expires|max\-age|path|domain|secure)$/.test(e))return;var o="";if(n)switch(typeof n){case"number":o="; max-age="+n;break;case"string":o="; expires="+n;break;case"object":n.hasOwnProperty("toGMTString")&&(o="; expires="+n.toGMTString())}document.cookie=escape(e)+"="+escape(t)+o+(i?"; domain="+i:"")+(r?"; path="+r:"")+(s?"; secure":"")},removeItem:function(e){if(!e||!this.hasItem(e))return;var t=new Date;t.setDate(t.getDate()-1),document.cookie=escape(e)+"=; expires="+t.toGMTString()+"; path=/"},hasItem:function(e){return(new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},isExpired:function(e){return!1;var t}};return e}),define("utils/lib",["facade","utils/debug"],function(e,t){function f(t,n){var s=!0;return r.each(i.keys(n),function(r,i){var o=n,u,a=t,f;u=e.type(o[i]),f=e.type(a[i]);if(u!==f)return s=!1,!1}),s}var n=function(){},r=e.$,i=e._,s=e.Backbone,o=e.inArray,u=e.Callbacks,a={};return n.prototype.duckTypeCheck=function(t,n){var r=!1,s,o;return!i.isUndefined(t)&&!i.isUndefined(n)&&(s=i.keys(t),o=i.keys(n),i.intersection(s,o).length>=o.length&&(r=!0,r&&e.type&&(r=f(t,n)))),r},n.prototype.topic=i.extend({},s.Events),n.prototype.Channel=function(e,t){var n,i,s=e&&a[e],f,l=["once","memory","unique","stopOnFalse"],c;if(!s){if(t&&typeof t=="string"){flag=t.split(" "),r.each(flag,function(){c=!0;if(!o(this,l))return c=!1,c});if(t==="nomemory")n=u();else{if(!c)throw f="Channel options expeced one or more of the following strings: ",f+="'once', 'memory', 'unique', 'stopOnFalse'",new Error(f);n=u(t)}}else n=u("memory");s={publish:n.fire,subscribe:n.add,unsubscribe:n.remove,disable:n.disable,empty:n.empty},e&&(a[e]=s)}return s},n.prototype.loadCss=function(e){var n=document.createElement("link");if(!(i.isObject(e)&&e.href||i.isString(e)))throw new Error("loadCss expects a url string or object (with href property) as an argument.");n.rel=e.rel||"stylesheet",n.href=e.href||e,n.type=e.type||"text/css",n.media=e.media||"screen",n.charset="utf-8",e.title&&(n.title=e.title),t.log("loadCss url: "+e||e.href),document.getElementsByTagName("head")[0].appendChild(n)},n.prototype.formatCase=function(e,t){switch(t){case"upper":e=e.toUpperCase().replace(/\s/g,"-");break;case"lower":e=e.toLowerCase().replace(/\s/g,"-");break;case"camel":e=e.split(" ");for(var n=0;n<e.length;n++)n>0?e[n]=e[n].toLowerCase().charAt(0).toUpperCase()+e[n].toLowerCase().substr(1):e[n]=e[n].toLowerCase();e=e.join("");break;default:}return e},n.prototype.formatMoney=function(e,t,n,r){var i=[],s=e||this,o=isNaN(t)?2:Math.abs(t),u=n||".",a=typeof r=="undefined"?",":r,f=s<0?"-":"",l=parseInt(s=Math.abs(s).toFixed(o),10)+"",c=(c=l.length)>3?c%3:0;return i.push(f),i.push(c?l.substr(0,c)+a:""),i.push(l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+a)),i.push(o?u+Math.abs(s-l).toFixed(o).slice(2):""),i.join("")},new n}),define("utils/storage",["facade","utils/cookies","utils/debug"],function(e,t,n){function o(e){switch(e){case"cookie":t?e=t:n.log("cookie plugin not available.");break;case"localStorage":i.localstorage?e=localStorage:n.log("Modernizr.localstorage: "+i.localstorage);break;default:i.sessionstorage?e=sessionStorage:n.log("Modernizr.sessionstorage: "+i.sessionstorage)}return e}var r,i=e.Modernizr||window.Modernizr,s=e._;return r=function(e,t){var n;if(!e||!s.isString(e))throw new Error("Store expected {String} name argument.");this.setup(e,t),n=this.storage.getItem(this.name),this.data=n&&JSON.parse(n)||{}},r.prototype.storage=sessionStorage,r.prototype.setup=function(e,t){var r=["localStorage","sessionStorage","cookie"];this.name=e,s.contains(r,t)&&(this.storage=o(t)),this.storage||(this.storage=o("cookie"),n.log("Storage option: "+t+" not available, will try to use cookies."))},s.extend(r.prototype,{save:function(e){this.storage.setItem(this.name,JSON.stringify(this.data),e);try{console.log(window.localStorage)}catch(t){console={},console.log=function(e){}}},create:function(e){return e.id||e.set(e.idAttribute,guid()),this.data[e.id]=e,this.save(),e},read:function(e){return e.id?this.find(e):this.findAll()},update:function(e){return this.data[e.id]=e,this.save(),e},destroy:function(e){return delete this.data[e.id],delete this.storage.removeItem(this.name),this.save(),e},find:function(e){return this.data[e.id]},findAll:function(){return s.values(this.data)},_S4:function(){return((1+Math.random())*65536|0).toString(16).substring(1)},_guid:function(){var e=this;return e._S4()+e._S4()+"-"+e._S4()+"-"+e._S4()+"-"+e._S4()+"-"+e._S4()+e._S4()+e._S4()}}),r}),define("utils",["require","utils/ajax-options","utils/debug","utils/cookies","utils/lib","utils/storage"],function(e){return{ajaxOptions:e("utils/ajax-options"),debug:e("utils/debug"),docCookies:e("utils/cookies"),lib:e("utils/lib"),storage:e("utils/storage")}}),define("models/base",["facade","utils"],function(e,t){var n,r=e.Backbone,i=e.$,s=e._,o=t.lib,u=t.ajaxOptions,a=t.debug;return n=r.Model.extend({defaults:{},initialize:function(e,t){t&&(this.options=t,this.setOptions()),s.bindAll(this),this.deferred=new i.Deferred},hideMessages:function(){i(".global-alert").stop().fadeOut().removeClass("alert-error").removeClass("alert-info"),i(".global-messages").stop().fadeOut(),i(".global-errors").stop().fadeOut(),i(".field-error").stop().fadeOut()},showSuccess:function(e,t){var n=this;e.hideMessages();var r=e.get("exec_data"),s=e.get("desc");r.exec_error?i(".global-alert").addClass("alert-error").html(s).stop().fadeIn():i(".global-alert").addClass("alert-info").html(s).stop().fadeIn();var o=r.error_array;if(o){var u="";for(var a=0;a<o.length;a++){var f=o[a];if(f["field"]!=""){var l=f.field,c=i("#"+l).parent().find(".field-error");c.length>0?c.html(f.error).stop().fadeIn():u+=f.error+"<br/>"}else u+=f.error+"<br/>"}u!=""&&n.showErrorMessage(u)}var h=r.message_array;if(h){var p="";for(var a=0;a<h.length;a++){var f=h[a];if(f["field"]!=""){var l=f.field,c=i("#"+l).parent().find(".field-message");c.length>0?c.html(f.message).stop().fadeIn():p+=f.message+"<br/>"}else p+=f.message+"<br/>"}p!=""&&n.showSuccessMessage(p)}},showError:function(e,t){var n=this;i(".global-messages").stop().fadeOut(),i(".global-errors").stop().fadeOut(),i(".field-error").stop().fadeOut();try{var r=i.parseJSON(t.responseText),s="",o="";r!=undefined?(s=r.exec_data,o=r.desc):s=t.exec_data,s.exec_error?i(".global-alert").addClass("alert-error").html("Hold on. There were problems. See sad faces above.").stop().fadeIn():i(".global-alert").addClass("alert-info").html(o).stop().fadeIn();var u=s.error_array;if(u){var a="";for(var f=0;f<u.length;f++){var l=u[f];if(l["field"]!=""){var c=l.field,h=i("#"+c).parent().find(".field-error");h.length>0?h.html(l.error).stop().fadeIn():a+=l.error+"<br/>"}else a+=l.error+"<br/>"}a!=""&&n.showErrorMessage(a)}var p=s.message_array;if(p){var d="";for(var f=0;f<p.length;f++){var l=p[f];if(l["field"]!=""){var c=l.field,h=i("#"+c).parent().find(".field-message");h.length>0?h.html(l.message).stop().fadeIn():d+=l.message+"<br/>"}else d+=l.message+"<br/>"}d!=""&&n.showSuccessMessage(d)}}catch(v){}},showSuccessMessage:function(e){i(".global-messages").html(e).stop().fadeIn()},showErrorMessage:function(e){i(".global-errors").html(e).stop().fadeIn()},request:null,fetch:function(e){return e=e||{},this.targetElement&&this.targetElement!=""&&i(this.targetElement).addClass("region-loader"),e.success||(e.success=this.afterFetch),e.error||(e.error=this.fetchError),s.extend(e,u),this.request=r.Model.prototype.fetch.call(this,e)},afterFetch:function(e,t){this.targetElement&&i(this.targetElement).removeClass("region-loader"),this.fetchSuccess&&this.fetchSuccess(e,t)},fetchSuccess:function(e,t){var n=this;e.deferred&&(e.request||(e.request=e.deferred.promise()),e.deferred.resolve()),e.hideMessages()},fetchError:function(e,t){e.deferred&&e.deferred.reject(),e.showError(e,t)},save:function(e,t){return t=t||{},t.success||(t.success=this.saveSuccess),t.error||(t.error=this.saveError),s.extend(t,u),this.request=r.Model.prototype.save.call(this,e,t)},saveSuccess:function(e,t){e.showSuccess(e,t)},saveError:function(e,t){e.showError(e,t)},isReady:function(){return this.request?this.request.state()==="resolved":this.deferred.state()==="resolved"},setOptions:function(){this.options&&this.options.urlRoot&&(this.urlRoot=this.options.urlRoot)},isError:function(){var e=this.get("exec_data");return e.exec_error},truncateString:o.truncateString}),n}),define("models/messaging",["models/base"],function(e){var t;return t=e.extend({defaults:{message:null,buttons:[{name:null,callback:Function.prototype}],state:"new"}}),t}),define("syncs/factory",["facade","utils"],function(e,t){var n,r=e._,i=t.lib.duckTypeCheck;return n=function(e){var t={};r.each(["create","read","update","destroy"],function(e){t[e]=Function.prototype});if(!i(e,t))throw new Error("syncFactory expected implementation argument with CRUD methods.");return function(n,r,i){switch(n){case"read":e.read(r,i);break;case"create":e.create(r,i);break;case"update":e.update(r,i);break;case"delete":e.destroy(r,i)}}},n}),define("syncs/storage",["facade","utils/lib","utils/debug"],function(e,t,n){function l(e){var t=["create","read","update","destroy"],n={};return i.each(t,function(e,t){n[e]=Function.prototype}),s(e,n)}function c(e){var t={create:o,read:u,update:a,destroy:f};return i.extend(t,e),function(t){return i.each(t,function(e,t,n){n[t]=r(e)}),t}(t)}var r,i=e._,s=t.duckTypeCheck,o,u,a,f;return o=function(e){return e.create(this)},u=function(e){return e.read(this)},a=function(e){return e.update(this)},f=function(e){return e.destroy(this)},SyncAction=function(e){var t=e;return function(n,r){var s,o=n.storage||n.collection.storage;if(i.isUndefined(o))throw new Error("storageFactory error, data object does not have a storage property");s=t.call(n,o,r),s?r.success(n,s,r):r.error("Record not found")}},r=function(){if(i.isFunction(arguments[0]))return new SyncAction(arguments[0]);if(l(arguments[0]))return c(arguments[0]);if(!i.isFunction(arguments[0])&&l(arguments[0]))throw new Error("storageFactory expected a function or CRUD interface as 1st argument.")},r}),define("syncs/application-state",["facade","syncs/factory","syncs/storage","utils"],function(e,t,n,r){var i={},s=e.$,o=e._,u,a,f,l;return debug=r.debug,u=function(e){var t;return o.isUndefined(this.guid)&&(this.guid=e._guid()),e.data=this.toJSON(),e.save(),this},a=function(e,t){var n,r=this,i;return n=e.getItem(e.name),n||r.id&&r.urlRoot&&r.fetch&&(i=r.fetch({success:function(n){return r.save(t),n||i(e,t)}})),i||n},f=function(e){return e.data=this.toJSON(),e.save(),this},l=function(e){return e.storage.removeItem(e.name),delete e.data,this},implementation=n({create:u,read:a,update:f,destroy:l}),i=t(implementation),i}),define("syncs",["syncs/application-state"],function(e){return{applicationStateSync:e}}),define("models/application-state",["facade","utils","syncs"],function(e,t,n){var r,i=e.Backbone,s=e._,o=t.storage,u=n.applicationStateSync,a=t.debug;return r=i.Model.extend({defaults:{name:null,data:null,storage:"sessionStorage"},initialize:function(e,t){a.log("ApplicationState initialize"),this.storage=new o(e.name,e.storage),this.sync=u,this.id=this.id||this.cid;var n=new Date(Date.now()+42e4);this.set("expires",n)},isExpired:function(){var e=this.get("expires"),t=(new Date(e)).valueOf()<Date.now().valueOf();return t},validate:function(e){function r(e){s.isString(e)&&n.push(e)}var t,n=[];r(this.validateNameProperty(e)),r(this.validateStorageProperty(e));if(n.length)return t="ApplicationStateModel failed validation: ",t+=n.join(" AND "),a.log(t),t},validateStorageProperty:function(e){var t,n=["localStorage","sessionStorage","cookie"],r=s.isArray(e)?e[0].storage:e.storage;if(!r||!s.contains(n,r))t="Only localStorage, sessionStorage, or cookie",t+=" are allowed as storage properties.";return t},validateNameProperty:function(e){var t,n=s.isArray(e)?e[0].name:e.name;if(!n||!s.isString(n))t="Name property is not a string";return t}}),r}),define("models",["models/base","models/messaging","models/application-state"],function(e,t,n){return{ApplicationStateModel:n,BaseModel:e,MessagingModel:t}}),define("collections/application-states",["models","facade","utils"],function(e,t,n){var r,i,s=e.ApplicationStateModel,o=t.Backbone,u=t._,a=n.docCookies;return debug=n.debug,r=o.Collection.extend({model:s,_idAttr:"id",initialize:function(e,t){var n=i;return u.bindAll(this),n&&n instanceof r?(debug.log("ApplicationStates instance already exists."),n):(debug.log("ApplicationStates initialize"),i=this,this)},add:function(e,t){var n=this;u.isArray(e)&&e.length?u.each(e,function(e){n.addOrUpdate(e,t)}):n.addOrUpdate(e,t)},addOrUpdate:function(e,t){this.isAlreadyStored(e)?this.updateModel(e,t):(u.isUndefined(e.prototype)&&(e=new this.model(e)),this.storeReferenceName(e.get("name")),o.Collection.prototype.add.call(this,e,t))},clearModel:function(e){e&&e instanceof s&&(this.removeReferenceName(e.get("name")),this.remove(e),this.destroy(e))},remove:function(){var e=r.references,t,n=this,i;if(!arguments[0]){debug.log("Removing all models in ApplicationStates collection (memory).");for(i=n.length-1;i>=0;i--)n.removeReferenceName(n.at(i).get("name")),o.Collection.prototype.remove.call(n,[n.at(i)])}else u.isString(arguments[0])&&u.contains(e,arguments[0])&&(t=n.findByName(arguments[0]),debug.log("Removing model, "+t.name+" in ApplicationStates."),n.removeReferenceName(t.get("name")),o.Collection.prototype.remove.call(n,[t]))},destroy:function(){var e=r.references,t,n=this;arguments[0]?u.isString(arguments[0])&&u.contains(e,arguments[0])&&(t=n.findByName(arguments[0]),debug.log("destroying model, "+t.cid+" in ApplicationStates."),n.removeReferenceName(t.get("name")),n.remove(t),t.destroy()):(debug.log("destroying all models in ApplicationStates."),n.each(function(e){n.removeReferenceName(e.get("name")),n.remove(e),e.destroy()}))},expiresHandler:function(e){var t=!1;return e?(e instanceof s?t=e.isExpired():t=e.expires&&(new Date(e.expires)).valueOf()<Date.now().valueOf(),t&&this.clearModel(e),t):(debug.log("expiresHandler expects a model as argument, preferably with an expires attribute/property."),!0)},isAlreadyStored:function(e){var t=!1,n=r.references;return u.isObject(e)&&e.name&&u.contains(n,e.name)&&(t=!0),t},removeReferenceName:function(e){r.references.splice(r.references.indexOf(e),1)},updateModel:function(e){var t=this.findByName(e.name),n={};t&&u.isFunction(t.toJSON)&&(n=t.toJSON(),e.data&&(u.extend(n,e),u.each(n,function(e,n,r){t.set(n,e)})))},save:function(){var e=arguments[0],t=this,n;e&&!u.isArray(e)?e instanceof s?e.save():u.isString(e)&&(n=this.findByName(e),n&&!u.isString(n)&&this.save(n)):e||this.each(function(e){t.expiresHandler(e)||e.save()})},storeReferenceName:function(e){var t,n=r.references;return u.isString(e)?(n.push(e),t=e+" added to ApplicationStates"):t="ApplicationStates failed to add a model, error on name property.",debug.log(t),e},validate:function(e){function r(e){u.isString(e)&&n.push(e)}var t,n=[];r(this.validateNameProperty(e));if(n.length)return t="ApplicationStates collection failed validation: ",t+=n.join(" AND "),debug.log(t),t},validateNameProperty:function(e){var t,n=e.name,i=r.references;return!n||!u.isString(n)?t="name property is not a string":i.length&&u.contains(i,n)&&(t=n+" is already stored in this model"),t},findByName:function(e){var t=null;return u.isString(e)&&u.contains(r.references,e)&&(t=this.filter(function(t){return t.attributes.name===e})),u.isArray(t)&&(t.length===0?t=null:t=t[0]),t=t instanceof o.Model?t:null,this.expiresHandler(t)?null:t},findByNameInStorage:function(e){var t;if(!e||!u.isString(e))throw new Error("findByNameInStorage expects string as argument.");return t=sessionStorage.getItem(e)||localStorage.getItem(e)||a.getItem(e),t=t?JSON.parse(t):null,t&&!this.expiresHandler(t)?t:null},findInCollectionOrStorage:function(e,t){var n;n=this.findByName(e)||this.findByNameInStorage(e);if(n){if(u.isFunction(n.toJSON))return n.toJSON();if(u.isString(n))return JSON.parse(n)}return!n&&!!(t&&u.isFunction(t.fetch)&&t.url())?t.fetch({url:t.url()}):u.isObject(n)?n:null}},{references:[]}),r}),define("collections/base",["facade","utils"],function(e,t){var n,r=e.Backbone,i=e.$,s=e._,o=t.lib,u=t.ajaxOptions,a=t.debug;return n=r.Collection.extend({initialize:function(e,t){a.log("BaseCollection initialize..."),this.cid=this.cid||s.uniqueId("c"),s.bindAll(this),this.deferred=new i.Deferred},request:null,_idAttr:"id",fetch:function(e){return e=e||{},this.targetElement&&this.targetElement!=""&&i(this.targetElement).addClass("region-loader"),e.success||(e.success=this.afterFetch),e.error||(e.error=this.fetchError),s.extend(e,u),this.request=r.Collection.prototype.fetch.call(this,e),this.request||(this.request=this.deferred.promise()),typeof routing!="undefined"&&typeof routing.ajaxRequests!="undefined"&&routing.ajaxRequests.push(this.request),this.request},afterFetch:function(e,t){this.targetElement&&i(this.targetElement).removeClass("region-loader"),this.fetchSuccess&&this.fetchSuccess(e,t)},isReady:function(){return this.request?this.request.state()==="resolved":this.deferred.state()==="resolved"},fetchSuccess:function(e,t){e.deferred.resolve(t),this.targetElement&&i(this.targetElement).removeClass("region-loader"),a.log("fetchSuccess resolved",t)},fetchError:function(e,t){a.log(t)},isError:function(){return!1}}),n}),define("collections/iterator",["require","collections/base","facade","utils"],function(e){var t,n=e("collections/base"),r=e("facade"),i=e("utils"),s=r.Backbone,o=r.$,u=r._,a=i.lib,f=i.debug;return t=n.extend({_activeModel:null,_setActive:function(e){var t=0,n;return e&&u.isNumber(e)&&(e!==t?(n=this._activeModel+e,n<0?t=this.length+n:n<this.length?t=n:t=n-this.length):t=this._activeModel),this._activeModel=t,t},initialize:function(e,t){this._activeModel=0,n.prototype.initialize.call(this,arguments)},previous:function(){this._activeModel=this._setActive(-1)},next:function(){this._activeModel=this._setActive(1)},selected:function(e){var t;return u.isNumber(e)&&(t=parseInt(e,10),t>=0&&t<this.length&&(this._activeModel=t)),this._activeModel},toJSON:function(){var e=n.prototype.toJSON.call(this);return e[this._activeModel].active=!0,u.each(e,function(e,t,n){n[t].idx=t}),e}}),t}),define("collections/messaging",["models","collections/base","utils","facade"],function(e,t,n,r){var i,s=e.MessagingModel,o=n.lib.Channel,u=n.debug,a=r._;return i=t.extend({model:s,initialize:function(){a.bindAll(this),this.addSubscribers()},add:function(e,n){var r,i=!1;a.isArray(e)?i=!0:this.length>0?(r=this.filter(function(e){return e.get("state")==="done"}),r&&r.length&&(e.message===this.at(r.length-1).get("message")&&u.log("duplicate msg"),this.remove(r),i=!0)):i=!0,i&&t.prototype.add.call(this,e,n)},addSubscribers:function(){o("messaging:status","nomemory").subscribe(this.setStatus)},removeSubscribers:function(){o("messaging:status").unsubscribe(this.setStatus)},setStatus:function(e){this.add(e)}}),i}),define("collections",["require","collections/application-states","collections/base","collections/iterator","collections/messaging"],function(e){return{ApplicationStates:e("collections/application-states"),BaseCollection:e("collections/base"),IteratorCollection:e("collections/iterator"),MessagingCollection:e("collections/messaging")}}),define("views/base",["facade","utils"],function(e,t){var n,r=e.Backbone,i=e.$,s=e._,o=e.toHTML,u=e.Deferred,a=e.Callbacks,f=t.lib,l=t.debug;return n=r.View.extend({initialize:function(e){e&&this.setOptions(e),this.deferred=new u,this.callbacks=a("unique")},setOptions:function(e){e.destination&&(this.destination=e.destination),e.template&&(this.template=e.template)},render:function(e,t,n){var r;return s.isFunction(this.confirmElement)&&this.confirmElement(),t=t||this.dataDecorator,r=this.toHTML(t,n),e=this.domInsertionMethod(e),this.$el[e](r),this.resolve(),this.callbacks.fire(this.$el),this},adJustFontDynamically:function(e,t,n){if(e){var r=i(e),s=n||17,o=t||.9,u=parseInt(r.text().length)-2,a=u>60?o-.1*parseInt((u-60)/10):o,n=u>60?s-parseInt((u-60)/10):s;r.css({"font-size":a+"em","line-height":n+"px"})}},resolve:function(){var e=this;e.deferred.state()!=="resolved"?this.callbacks.add(e.deferred.resolve):this.callbacks.has(e.deferred.resolve)&&this.callbacks.remove(e.deferred.resolve)},confirmElement:function(){s.isUndefined(this.el)&&(this.$el=i(this.options.el));if(s.isUndefined(this.$el))throw new Error("View has no this.el or this.options.el property defined.")},toHTML:function(e,t){var n,r,i;r=this.model?this.model.toJSON():null,e&&s.isFunction(e)&&(r=e.call(this,r)),this.template=this.template||this.options.template;if(!this.template||!r)throw new Error("BaseView method toHTML called, but this.template or data is not defined.");return n=o(this.template,r,t),n},domInsertionMethod:function(e){var t="html",n=["append","html","prepend","text"],r;return e!==t&&e&&s.isString(e)&&s.contains(n,e)&&(r=e),r||t},dataDecorator:function(e){return e},callbacks:null,deferred:null,isReady:function(){return this.deferred.state()==="resolved"},addChildView:function(e,t){var n,r;if(!e)throw r="baseView addChildView expects view object as first arg.",new Error(r);return t&&!s.isEmpty(t)?n=function(){return e.render(),e.$el.appendTo(t.$el),e}:n=function(){return e.render()},n},getOuterHtml:function(e){return e[0].outerHTML?e[0].outerHTML:i("<div/>").html(e.eq(0).clone()).html()},destroy:function(){var e;this.removeSubscribers&&this.removeSubscribers(),this.$el.remove(),this.destination&&i(this.destination).empty();for(e in this)delete this[e]},addSubscribers:function(){},removeSubscribers:function(){this.$el.off()},abortRequest:function(e){var t=this;try{if(i.isArray(e)){for(var n in e)t.abortRequest(e[n]);e=[]}else e!=undefined&&e!=null&&(e.readyState&&e.readyState>0&&e.readyState<4&&e.abort(),e={})}catch(r){console.error(r)}finally{return e||[]}}}),n}),define("views/collection",["facade","views/base","utils"],function(e,t,n){var r,i=e.$,s=e._,o=e.Backbone,u=n.debug;return r=t.extend({initialize:function(e){var n,r;if(!this.collection||!(this.collection instanceof o.Collection))throw r="CollectionView initialize: no collection provided.",new Error(r);t.prototype.initialize.call(this,e),this._view=this.options.view||this._view;if(!this._view)throw new Error("CollectionView initialize: no view provided.");this._tagName=this.options.tagName||this._tagName;if(!this._tagName)throw new Error("CollectionView initialize: no tag name provided.");this._className=this.options.className||this._className,this._decorator=this.options.decorator||this._decorator,this.mainView=e.mainView||this._mainView,this.FBoptions=this.FBoptions,this._id=this.options.id||this._id,this._temp=this.options._template||this._template,this.singleView=this.options.singleView||this.singleView,this.eventView=this.options.eventView||this.eventView,this._views=[],s(this).bindAll("add","remove","reset"),this.setupCollection()},setupCollection:function(){var e=this,t=this.options.collection||this.collection;t.on("reset",this.reset),t.on("add",this.add),t.on("remove",this.remove),!t.length&&!t.request?(t.request=t.fetch(),t.request.done(function(){e.pageId=t.id,t.each(t.add)})):(e.pageId=t.id,t.each(this.add))},reset:function(){this._views=[]},addRecords:function(){var e=this.collection;delete this._views,this._views=[],e.each(this.add)},add:function(e){var t;t=new this._view({tagName:this._tagName,model:e,teamView:this.singleView,eventView:this.eventView,template:this._temp,recordId:this.pageId,className:this._className,decorator:this._decorator,FBoptions:this.FBoptions,mainView:this.mainView}),this._views.push(t),this._rendered?this.listView?this.prepend?this.$el.find(this.listView).prepend(t.render().el):this.$el.find(this.listView).append(t.render().el):this.$el.append(t.render().el):this.$el.append(t.render().el)},remove:function(e){var t;t=s(this._views).select(function(t){return t.model===e})[0],this._views=s(this._views).without(t),this._rendered&&t.destroy()},render:function(){return this.confirmElement.call(this),this._rendered=!0,this.listView||this.$el.empty(),s(this._views).each(function(e){this.listView?this.prepend?this.$el.find(this.listView).prepend(e.render().el):this.$el.find(this.listView).append(e.render().el):this.$el.append(e.render().el),e.options.decorator&&s.isFunction(e.options.decorator)&&e.options.decorator(e)},this),this.resolve.call(this),this.callbacks.fire.call(this),this}}),r}),define("views/layout",["facade","views/base","utils"],function(e,t,n){var r,i=e.$,s=e._,o=n.lib,u=e.Backbone,a=o.Channel,f=n.debug,l=Array.prototype.slice;return f=n.debug,r=t.extend({scheme:null,schemeViewNames:null,initialize:function(e,t){e&&this.setOptions(e),t&&t.route&&this.addController(t)},addController:function(e){e.layout||(e.layout=this),e.data&&this.handleStateData(e.data),this.controller||(this.controller=e),s.each(this.schemeViewNames,function(t){t&&s.isString(t)&&s.isFunction(e.addStateChangeSubscriber)&&e.addStateChangeSubscriber(t)})},setOptions:function(e){var n;t.prototype.setOptions.apply(this,l.call(arguments));if(!this.template&&!s.isString(this.template)&&!this.destination)throw n="LayoutView expected template and destination options for initialization.",new Error(n);this.setSchemeOption(e),this.setDisplayWhenOption(e),this.setTransitionMethodOption(e)},setSchemeOption:function(e){var t,n;if(!e.scheme&&!s.isArray(e.scheme))throw t="LayoutView expected a scheme array for initialization.",new Error(t);this.scheme=e.scheme,n=[],s.each(this.scheme,function(e){n.push(e.name)}),this.schemeViewNames=n,i(this.destination).html(this.template)},setDisplayWhenOption:function(e){if(e.displayWhen){if(e.displayWhen!=="ready"&&e.displayWhen!=="resolved")throw msg="LayoutView option for displayWhen value must be 'resolved' or 'ready'",new Error(msg)}else e.displayWhen="resolved";f.log("LayoutView setDisplayWhenOption: "+e.displayWhen)},setTransitionMethodOption:function(e){var t;if(e.transitionMethod){if(e.transitionMethod!=="showHide")throw t="LayoutView option for transitionMethod is not valid, expected 'showHide'.",new Error(t)}else e.transitionMethod="showHide"},section:function(e){var t=s.find(this.scheme,function(t){return t.name===e});return t},render:function(e){var t=this.options;t.displayWhen&&(t.displayWhen==="ready"?this.displayWhenReady(e):t.displayWhen==="resolved"&&this.displayWhenResolved(e))},displayViews:function(){var e=this.scheme,t=this;s.each(e,function(e){t.section(e.name).display(!0)})},displayWhenResolved:function(e){var t=this,n=[];s.each(this.scheme,function(e){var t;if(!e.deferred)throw t="LayoutView displayWhenResolved expected ",t+=e.name,t+=" view to have a deferred property",new Error(t);n.push(e.deferred)}),i.when.apply(i,n).then(function(){t.displayViews(),e&&s.isFunction(e)&&e(),a("layout:ready").publish()},function(){var t;throw t="LayoutView render could not complete all of the scheme's views.",new Error(t)})},displayWhenReady:function(e){var t=this.scheme,n=this;t.length&&s.each(t,function(e){var t=n.section(e.name);t.isRendered()?t.display(!0):t.isNotRendered()&&(t.render.call(t),t.deferred.done(function(){t.display(!0)}))}),e&&s.isFunction(e)&&e()},transition:function(e,t){var n;if(!!s.contains(this.schemeViewNames,e)){if(!t||t&&(!t.state||!t.display))throw n="LayoutView transition for "+e,n+=" requires a SectionView with methods for state and display",new Error(n);this.section(e).display(!1),t.isNotRendered()?(t.render(),t.deferred.done(function(){t.display(!0)})):t.display(!0)}},clearLayoutScheme:function(){var e;for(var e in this.scheme)typeof this.scheme=="object"&&(this.scheme[e].destroy(),delete this.scheme[e]);this.scheme=null,this.schemeViewNames=null},remove:function(){this.clearLayoutScheme(),t.prototype.remove.call(this)},state:function(e,t){var n=this,r,i;return n.meta||(n.meta={}),e?s.isObject(e)&&s.each(e,function(e,i){if(s.contains(n.schemeViewNames,i)){r=n.section(i);try{r.state(e.state,t,r)}catch(o){f.log(o)}}else n.meta[i]=e}):(n.controller&&n.controller.route?i=n.controller.route:i=window.location.pathname,e={route:i},n.controller&&(e.meta=n.controller.meta),s.each(n.scheme,function(t){e[t.name]={state:t.state(),meta:t.meta()}})),e},displayChangeHandler:function(e,t){var n,r;if(!e||!t||e===t)throw new Error("SectionView stateChangeHandler expected lastState and state arguemnts to be different");if(e==="not-displayed"||e==="displayed"){if(t==="not-displayed"||t==="displayed")n=t.indexOf("not-",0)!==0,this.display(n)}else e==="not-rendered"&&(this.render(),t==="displayed"?this.display(!0):t==="not-displayed"&&this.display(!1))},handleStateData:function(e){var t=this;s.each(e,function(e,n,r){s.each(t.schemeViewNames,function(r,i,s){var o={};r===n&&(o[n]=e,t.state(o,t.displayChangeHandler))})})}}),r}),define("views/section",["facade","views/base","utils"],function(e,t,n){var r,i,s,o=e._,u=e.$,a=n.lib.Channel,f=n.debug;return s=["not-rendered","rendered","not-displayed","displayed"],r=function(){},r.prototype._viewState=s[0],r.prototype.state=function(e,t,n){var r=this._viewState,i;if(e){if(!o.isString(e)||!o.contains(s,e))throw new Error("Section state ("+e+") not allowed.");r!==e?((t||o.isFunction(t))&&t.call(n||this,r,e),this._viewState=e,a(this.name+":stateChanged").publish(r,e)):this._viewState||(this._viewState=e),i="view "+this.name+" ("+this.cid+")",i+=" state was: ["+r+"], state set to: ["+e+"]"}else e=this._viewState;return e},r.prototype.isRendered=function(){return this.state()==="rendered"},r.prototype.isNotRendered=function(){return this.state()==="not-rendered"},r.prototype.isDisplayed=function(){return this.state()==="displayed"},r.prototype.isNotDisplayed=function(){return this.state()==="not-displayed"},i=t.extend({__super__:t.prototype,initialize:function(e){var t;o.bindAll(this);if(!e||e&&!e.name&&!e.destination)throw t="Section initialize method requires an 'options' {object}",t+=" as argument, with 'name' and 'destination' {string} properties",new Error(t);this.destination=e.destination,this.name=e.name,this.state(e.state||"not-rendered"),this.__super__.initialize.call(this,e)},checkForUser:function(){return!o.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},render:function(e,t,n){function i(){r.state("rendered")}var r=this;this.callbacks.add(i),this.__super__.render.call(this,e,t,n),this.afterRender&&this.afterRender()},display:function(e){var t=e,n,r;if(o.isUndefined(t)||!o.isBoolean(t))throw r="SectionView display method expects {boolean} argument.",new Error(r);if(this.state()==="not-rendered")throw r="SectionView ("+this.name+") cannot display, view state is 'not-rendered'.",new Error(r);n=u(this.destination),t&&(n.html(this.$el),this.state("displayed")),!t&&this.state()==="displayed"&&(n.html(""),this.state("not-displayed"))},meta:function(e){return e?(this._meta=this._meta||{},o.each(e,function(e,t){this._meta[t]=e})):e=this._meta,this._meta},setDropdownOptions:function(e,t,n,r,i){var s="";i?s+='<option value="">'+i+"</option>":s+='<option value="">Select</option>';if(e!=null&&e.length>0)for(var o in e)s+='<option value="'+e[o][n]+'">'+e[o][t]+"</option>";this.$el.find(r).html(s)},isValidAutoCompleteKey:function(e){if(e){var t=e.keyCode?e.keyCode:e.which;if(t>=59&&t<=90||t>=96&&t<=105||t==8||t==32||t==46)return!0}return!1},sort:function(e,t,n){e.sort(function(e,r){return n==1?e[t]<r[t]?1:r[t]<e[t]?-1:0:e[t]<r[t]?-1:r[t]<e[t]?1:0})},isEnterKey:function(e){if(e){var t=e.keyCode?e.keyCode:e.which;if(t==13)return!0}return!1},showLoader:function(e){var t=u(".loading-div");t.length?t.show():u(e.$el).append('<div class="loader loading-div"></div>')},hideLoader:function(){u(".loading-div").hide()}}),o.extend(i.prototype,r.prototype),i}),define("views",["views/base","views/collection","views/layout","views/section"],function(e,t,n,r){return{BaseView:e,CollectionView:t,LayoutView:n,SectionView:r}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.4",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!chrome/templates/header.html",[],function(){return'<div class="mobile-show">\r\n\r\n<div class="uk-navbar uk-navbar-attached header-nav">\r\n	<div class="uk-navbar-content"><a href="#" class="uk-navbar-toggle" data-uk-offcanvas="{target:\'#oc_menu\'}"></a></div>\r\n	<a href="" class="uk-navbar-brand">\r\n		<img itemprop="logo" src="<%= branding.src %>" id="header_logo" alt="<%= branding.alt %>" />\r\n	</a>\r\n	<% if(authorized){ %>\r\n	<div class="uk-navbar-flip"><div class="photo"><img src="" alt="<%= user_name %>"/></div></div>\r\n	<% } %>\r\n</div>\r\n\r\n<div id="oc_menu" class="uk-offcanvas">\r\n	<div class="uk-offcanvas-bar uk-offcanvas-bar-show">\r\n        <ul class="uk-nav uk-nav-offcanvas uk-nav-parent-icon" data-uk-nav>\r\n	        <li class="uk-nav-header">&nbsp;</li>\r\n            <% _.each(nav,function(element,index){\r\n\r\n            if(element instanceof Array){\r\n            %>\r\n            <li class="uk-nav-header"><%= index %></li>\r\n\r\n                <% _.each(element,function(e2,index){ %>\r\n                <li><a <% if(e2.id){ %>id="<%= e2.id %>"<% } if(e2.className){ %>class="<%= e2.className %>" <% } %>href="<%= e2.link %>" >\r\n	                <% if(e2.icon){ %><i class="<%= e2.icon %>"></i><% } %>\r\n	                <%= e2.page %>\r\n	            </a></li>\r\n                <% }); %>\r\n\r\n            <%\r\n            } else {\r\n            %><li><a <% if(element.id){ %>id="<%= element.id %>"<% } if(element.className){ %>class="<%= element.className %>" <% } %> href="<%= element.link %>">\r\n	        <% if(element.icon){ %><i class="<%= element.icon %>"></i><% } %>\r\n	        <%= element.page %></a></li><%\r\n            }\r\n            %>\r\n\r\n            <% }); %>\r\n\r\n        </ul>\r\n	</div>\r\n</div>\r\n</div><div class="mobile-hide">\r\n\r\n<div class="row-fluid">\r\n    <div class="logo" itemscope itemtype="http://schema.org/Organization">\r\n    <% if(branding){ %>\r\n    <a class="brand" itemprop="url" title="Athletez Home Page"  href="http://www.athletez.com/#!home">\r\n	    <meta itemprop="name" content="Athletez.com - We\'re Athletez" />\r\n	    <meta itemprop="description" content="Athletez.com is an online community for athletes of all skill levels.  When you link up with your teams and sports organizations, upload and share photos and highlights, and follow the athletes you want to track, your athletic profile will automatically be created so others can see what\'s going on with you!" />\r\n		<meta itemprop="image" content="<%= branding.src %>"/>\r\n	    <div style="display:none;" itemprop="founder" itemscope itemtype="http://schema.org/Person">\r\n			<meta itemprop="name" content="Mike Wrather" />\r\n		    <meta itemprop="email" content="mike@athletez.com" />\r\n		    <meta itemprop="jobTitle" content="Co-Founder" />\r\n	    </div>\r\n	    <div style="display:none;" itemprop="founder" itemscope itemtype="http://schema.org/Person">\r\n		    <meta itemprop="name" content="Maxwell Doyle" />\r\n		    <meta itemprop="email" content="max@athletez.com" />\r\n		    <meta itemprop="jobTitle" content="Co-Founder" />\r\n	    </div>\r\n        <img itemprop="logo" src="<%= branding.src %>" id="header_logo" alt="<%= branding.alt %>" />\r\n    </a>\r\n	<% } %>\r\n    </div>\r\n\r\n    <div class="searchform">\r\n\r\n    </div>\r\n\r\n    <div class="account clearfix">\r\n        <% if(authorized){ %>\r\n            <div class="photo"><img src="" alt="<%= user_name %>"/></div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    <% _.each(nav,function(element,index){\r\n\r\n	                console.log(element);\r\n	                console.log(element instanceof Array);\r\n\r\n	                if(element instanceof Array){\r\n	                  %>\r\n	                   <a class="nav nav_dropdown"><%= index %></a>\r\n	                    <ul class="header_menu hide" role="menu">\r\n	                         <% _.each(element,function(e2,index){ %>\r\n	                            <li><a <% if(e2.id){ %>id="<%= e2.id %>"<% } if(e2.className){ %>class="<%= e2.className %>" <% } %>href="<%= e2.link %>" ><%= e2.page %></a></li>\r\n	                        <% }); %>\r\n	                    </ul><%\r\n	                } else {\r\n	                    %><a class="nav"  href="<%= element.link %>" ><%= element.page %></a><%\r\n	                }\r\n	                %>\r\n\r\n                    <% }); %>\r\n\r\n\r\n\r\n\r\n\r\n\r\n	    <% }  else { %>\r\n            <a class="nav" href="<%=login_url %>" id="userlogin"><%=login_label %></a>\r\n	    <% } %>\r\n    </div>\r\n</div>\r\n\r\n	</div>'}),define("chrome/models/header",["models/base","utils"],function(e,t){var n,r=t.storage,i=t.docCookies;return n=e.extend({defaults:{authorized:!1,branding:{alt:"Athletez Logo",src:"../images/logo_small.png"},search:{placeholder:"Search"},login_url:"#user/login",login_label:"SIGN IN",logout_url:"#logout",logout_label:"Log Out",signup_social_label:"Sign up for Free",signup_facebook_label:"Facebook",signup_email_label:"Email",signup_facebook_link:"/",signup_email_link:"/"},initialize:function(){e.prototype.initialize.call(this);var t=i.getItem("authautologin");!t},url:function(){var e="/authcheck?time="+(new Date).getTime();return _.isUndefined(this.ls_auth)||(e+="&ls_auth="+this.ls_auth),e},saveCookie:function(){var e=new r("user","localStorage");e.create(this)}}),n}),define("text!signup/templates/layout.html",[],function(){return'<!--<div id="main-header">\r\n</div>\r\n\r\n<div id="main-content">\r\n</div>\r\n\r\n<div id="main-footer">\r\n</div>-->\r\n\r\n<div id="RegModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n	</div>\r\n	<div id="main-contentreg"></div>\r\n	<div class="modal-body">\r\n		<div class="inner-content-h"></div>\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n</div>\r\n'}),define("text!registration/templates/layout.html",[],function(){return'\r\n<div id="main-header">\r\n\r\n</div>\r\n\r\n<div id="main-content">\r\n    \r\n    \r\n    \r\n</div>\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n'}),define("controller",["facade","collections","models","utils"],function(e,t,n,r){var i,s=t.ApplicationStates,o=n.EventModel,u=e._,a=e.$,f=r.lib.Channel,l=e.Backbone.Model.extend;return i=function(e){e=e||{},e.title?document.title=e.title:document.title="Athletez",this.route=e.route,i.prototype.appStates?e.appStates&&(i.prototype.appStates=e.appStates):i.prototype.appStates=new s,this.route&&i.prototype.appStates&&this.getStoredState(),this.initialize(e)},i.extend=l,i.prototype={initialize:function(e){return this.triggerPublishers(),u.bindAll(this),this.handleOptions(e),this.addSubscribers(),this.handleDeferreds(),this},setParamsArray:function(e){if(e)for(var t in e)this[e[t].key]=e[t].value},generateRandomNumber:function(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*200+1),e},setupSections:function(){},setupScheme:function(){},setupLayout:function(){var e;return this.layout=e,this.layout},handleDeferreds:function(){var e=this;a.when(null).then(function(){})},addSubscribers:function(){},removeSubscribers:function(){},triggerPublishers:function(){},meta:{activeViews:[],viewNames:[]},handleOptions:function(e){i.prototype.handleOptions(e)},routeChange:function(e){i.prototype.routeChange(options)},addStateChangeSubscriber:null},i.prototype.data=null,i.prototype.layout=null,i.prototype.scheme=[],i.prototype.sections={},i.prototype.route=null,i.prototype.handleOptions=function(e){e&&e.useFixtures&&this.useFixturesForWebServices()},i.prototype.transitionActiveViews=function(e){var t,n=this.layout,r=this.meta.sectionName,i=this.meta.activeViews=[];e=e||this.meta.presentation,t=function(t,s){s===e&&(t.state()==="not-rendered"&&t.render(),n.transition(r,t),i.push(s))},this.iterateOverLayoutViews(t)},i.prototype.renderInActiveViews=function(){var e;e=function(e){e.state()==="not-rendered"&&(e.callbacks.add(function(){e.state("not-displayed")}),e.render())},this.iterateOverLayoutViews(e)},i.prototype.iterateOverLayoutViews=function(e){var t=this.meta.activeViews,n=this.sections,r=this.meta.viewNames,i,s,o;for(o=0;o<r.length;o++)i=r[o],u.contains(t,i)||(s=n[i],e&&u.isFunction(e)&&e(s,i))},i.prototype.routeChange=function(e,t,n){var r={data:{}},s;if(e&&!u.isString(e))throw s="Controller routeChange expects string as 1st argument.",new Error(s);this.route=e,this.layout&&(this.layout.state({route:e}),r.data=this.layout.state(),u.extend(r,t||{}),i.prototype.appStates.add(r),this.data=r.data,debug.log(r),i.prototype.appStates.save(e)),n&&u.isFunction(n)&&n(this.data),debug.log("Controller routeChange method called with: "+e)},i.prototype.getStoredState=function(){var e;if(!this.route)throw new Error("Controller does not have route property.");return e=i.prototype.appStates.findInCollectionOrStorage(this.route),this.data=e&&e.data?e.data:e,this.data},i.prototype.addStateChangeSubscriber=function(e,t){function s(r,s){var o=e,a=t,f=n,l;f.layout&&(l=f.layout.state(),l&&i.prototype.appStates.add({name:f.route,data:l,expires:new Date(Date.now()+4032e4),storage:"localStorage"})),a&&u.isFunction(a)&&a(r,s)}var n=this,r;if(!e||!u.isString(e))throw r="controller method addStateChangeSubscriber expected string as 1st argument.",new Error(r);f(e+":stateChanged").subscribe(s)},i.prototype.remove=function(){var e;this.layout&&this.layout.remove();for(e in this)delete this[e]},i.prototype.webServices={},i.prototype.useFixturesForWebServices=function(){},i}),define("user/models/basics",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"undefined"==typeof this.id?testpath?testpath+"/user/basics/":"/api/user/basics/":testpath?testpath+"/user/basics/"+this.id:"/api/user/basics/"+this.id},initialize:function(){n.__super__.initialize.apply(this,arguments)},user_pic_small:function(){return this.payload.user_picture.types.small_thumb.url}}),n}),define("registration/models/select_type",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return"/api/user/basics/"+this.id},fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n)}}),t}),define("user/models/fbreg",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,birth_day:null,high_school:null,email:null,user_picture:null},desc:"Facebook Registration Information",exec_data:{exec_time:0,exec_error:!1},id:1})}),n}),define("registration/models/register_facebook",["facade","user/models/fbreg","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/fbreg":"/api/user/fbreg"}}),r}),define("registration/models/register_email",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/basics":"/api/user/basics/"+this.id}}),t}),define("registration/models/upload_image",["user/models/basics"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/uploadimage":"/api/user/uploadimage"}}),t}),define("registration/models/select_org",["user/models/basics"],function(e){var t;return t=e.extend({fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n);var r=new Date(t.get("payload").dob),i=new Date,s=i.getFullYear()-r.getFullYear();s>18?t.set("show_highschool",!1):t.set("show_highschool",!0)}}),t}),define("text!registration/templates/select_type.html",[],function(){return'\r\n<h1>Register with AthletesUp</h1>\r\n<a href="#" class="register_facebook">Sign up through Facebook</a>\r\n<br/><br/> OR <br/><br/>\r\n<a href="#" class="register_email">Register With Email Address</a>\r\n\r\n<a href="#" class="go_club">go club directly</a>\r\n<div id="fb-root"></div>'}),define("registration/views/select_type",["require","registration/models/select_type","text!registration/templates/select_type.html","facade","views","utils"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=e("utils"),u=o.lib.Channel,a=s.SectionView,f=window.cordova&&window.facebookConnectPlugin?window.facebookConnectPlugin:FB;return r=a.extend({id:"main-content",events:{"click .register_facebook":"registerWithFacebook","click .register_email":"registerWithEmail","click .go_club":"selectOrg"},template:n,initialize:function(e){a.prototype.initialize.call(this,e),this.initModel()},registerWithFacebook:function(e){function t(){f.login(function(e){e.authResponse?u("registration-with-facebook").publish():alert("Cancelled")},{scope:"email, user_birthday, user_photos"})}function n(){var e,n="facebook-jssdk",r=document.getElementsByTagName("script")[0];if(document.getElementById(n)){t();return}e=document.createElement("script"),e.id=n,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(e,r)}e.preventDefault(),window.fbAsyncInit=function(){f.init({appId:App.Settings.appId,status:!0,cookie:!0,xfbml:!0,oauth:!0}),f.getLoginStatus(function(e){e.status==="connected"?f.api("/me",function(e){u("registration-with-facebook").publish()}):e.status==="not_authorized"?t():t()},{scope:"email, user_birthday, user_photos"})},n()},registerWithEmail:function(e){e.preventDefault(),u("registration-with-email").publish()},initModel:function(){function n(n){e.select_type=new t,e.select_type.id=n,e.select_type.fetch(),$.when(e.select_type.request).done(function(){e.model=e.select_type})}var e=this;u("app-inited").subscribe(n)},selectOrg:function(e){e.preventDefault();var t=this,n=t.model.get("payload");u("registration-select-org").publish(n)}}),r}),define("text!registration/templates/register_facebook.html",[],function(){return'{{#errorDisplay}}\r\n<div class="span8" style="color:red;"> Error: {{errorValue}}</div>\r\n{{/errorDisplay}}\r\n\r\n{{^errorDisplay}}\r\n{{#payload}}\r\n\r\n<div class="row-fluid">\r\n	<div class="span5">\r\n		<ul id="fb-userpic-prev">\r\n			<li><img style="width:100%;" class="picture" src="{{profile_picture}}" alt="{{name}} Facebook Avatar"/></li>\r\n		</ul>\r\n	</div>\r\n	<div class="span7 fbreg-fields">\r\n\r\n		<div class="field">\r\n			<div class="label">Birthday</div>\r\n			<span class="value" data-name="birthday" data-value="{{birthday}}">\r\n				<input type="text" name="birthday" value="{{birthday}}" disabled="disabled"/><div class="edit">&nbsp;</div>\r\n\r\n			</span>\r\n		</div>\r\n\r\n		<div class="field">\r\n			<div class="label">Email Address</div>\r\n			<span class="value" data-name="email" data-value="{{email}}">\r\n				<input type="text" name="email" value="{{email}}" disabled="disabled"/><div class="edit">&nbsp;</div>\r\n			</span>\r\n		</div>\r\n		<div class="field">\r\n			<div class="label">Password</div>\r\n			<input type="password" class="password" name="password" placeholder="Password"/>\r\n		</div>\r\n		<div class="field">\r\n			<div class="label">Again</div>\r\n			<input type="password" name="password-again" placeholder="Password Again"/>\r\n		</div>\r\n		<div class="password-error"></div>\r\n\r\n		<div class="row-fluid">\r\n			<label for="agree"><input type="checkbox" id="agree" name="agree"/>I have read and agree to the <a href="tos.html" target="_blank" style="text-decoration:underline;;">Terms of Service</a></label>\r\n		</div>\r\n\r\n	</div>\r\n	<div class="row-fluid"><a href="javascript:void(0);" class="next btn-common btn-green">What\'s Next</a></div>\r\n</div>\r\n\r\n{{/payload}}\r\n\r\n{{/errorDisplay}}'}),function(e){e.extend(e.fn,{pstrength:function(t){var t=e.extend({verdects:["Very weak","Weak","Medium","Strong","Very strong"],colors:["#f00","#c06","#f60","#3c0","#3f0"],scores:[10,15,30,40],common:["password","sex","god","123456","123","liverpool","letmein","qwerty","monkey"],minchar:6},t);return this.each(function(){var n=e(this).attr("id");e(this).after('<div class="pstrength-minchar" id="'+n+'_minchar">Minimum number of characters is '+t.minchar+"</div>"),e(this).after('<div class="pstrength-info" id="'+n+'_text"></div>'),e(this).after('<div class="pstrength-bar" id="'+n+'_bar" style="border: 1px solid white; font-size: 1px; height: 5px; width: 0px;"></div>'),e(this).keyup(function(){e.fn.runPassword(e(this).val(),n,t)})})},runPassword:function(t,n,r){nPerc=e.fn.checkPassword(t,r);var i="#"+n+"_bar",s="#"+n+"_text";nPerc==-200?(strColor="#f00",strText="Unsafe password word!",e(i).css({width:"0%"})):nPerc<0&&nPerc>-199?(strColor="#ccc",strText="Too short",e(i).css({width:"5%"})):nPerc<=r.scores[0]?(strColor=r.colors[0],strText=r.verdects[0],e(i).css({width:"10%"})):nPerc>r.scores[0]&&nPerc<=r.scores[1]?(strColor=r.colors[1],strText=r.verdects[1],e(i).css({width:"25%"})):nPerc>r.scores[1]&&nPerc<=r.scores[2]?(strColor=r.colors[2],strText=r.verdects[2],e(i).css({width:"50%"})):nPerc>r.scores[2]&&nPerc<=r.scores[3]?(strColor=r.colors[3],strText=r.verdects[3],e(i).css({width:"75%"})):(strColor=r.colors[4],strText=r.verdects[4],e(i).css({width:"92%"})),e(i).css({backgroundColor:strColor}),e(s).html("<span style='color: "+strColor+";'>"+strText+"</span>")},checkPassword:function(e,t){var n=0,r=t.verdects[0];e.length<t.minchar?n-=100:e.length>=t.minchar&&e.length<=t.minchar+2?n+=6:e.length>=t.minchar+3&&e.length<=t.minchar+4?n+=12:e.length>=t.minchar+5&&(n+=18),e.match(/[a-z]/)&&(n+=1),e.match(/[A-Z]/)&&(n+=5),e.match(/\d+/)&&(n+=5),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(n+=7),e.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)&&(n+=5),e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(n+=7),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(n+=2),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(n+=3),e.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)&&(n+=3);for(var i=0;i<t.common.length;i++)e.toLowerCase()==t.common[i]&&(n=-200);return n}})}(jQuery),define("jquery.pstrength",function(){}),define("media/models/image",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),t!=undefined?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},selectImageType:function(e){return r.each(this.get("payload").types,function(t,n){n==e&&(this.get("payload").image_path=t.url)},this),this}}),n}),define("media/collections/images",["facade","collections","media/models/image","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.processItemFromPayload(t,i),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),i}),define("registration/collections/fbimages",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/fbpics":"/api/user/fbpics"}}),r}),define("text!registration/templates/fbimage-item.html",[],function(){return'\r\n{{#payload}}\r\n<img src="{{thumbnail}}" alt="Thumb"/>\r\n{{#num_votes}}{{num_votes}} Votes{{/num_votes}}\r\n{{/payload}}\r\n\r\n'}),define("registration/views/fbimage-item",["vendor","views","utils","text!registration/templates/fbimage-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{click:"changeImage"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeImage:function(){Channel("changeimage"+this.model.collection.id).publish(this.model)}}),i}),define("text!registration/templates/fbimage-board.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter fbimagecontainer pane">\r\n        <img id="image-select" src="{{original}}" alt="{{image_title}}"/>\r\n        <div class="coords" style="display:none;">\r\n            <div>crop x <input name="crop-x" type="hidden" /></div>\r\n            <div>crop y <input name="crop-y" type="hidden" /></div>\r\n            <div>crop width <input name="crop-width" type="hidden" /></div>\r\n            <div>crop height <input name="crop-height" type="hidden" /></div>\r\n            <div>image width <input name="image-width" type="hidden" /></div>\r\n            <div>image height <input name="image-height" type="hidden" /></div>            \r\n        </div>\r\n    </div>\r\n{{/payload}}\r\n'}),function(e){e.fn.jrac=function(t){var n={crop_width:200,crop_height:100,crop_x:0,crop_y:0,crop_resize:!0,crop_aspect_ratio:null,image_width:null,image_height:null,zoom_min:100,zoom_max:3e3,viewport_image_surrounding:!1,viewport_width:null,viewport_height:null,viewport_resize:!0,viewport_content_left:0,viewport_content_top:0,viewport_onload:null};return this.each(function(){if(!e(this).is("img"))return;var r=!1;typeof t=="object"?e.extend(n,t):t=="destroy"&&(r=!0);var i=e(this),s=!1;i.parent().hasClass("jrac_viewport")&&(s=!0),s&&r?(i.draggable("destroy"),i.parent().find(".jrac_crop").remove(),i.parent().parent().find(".jrac_zoom_slider").remove(),i.parent().append(i.data("original")),i.parent().unwrap(),i.unwrap(),i.remove()):i.data("original",i.clone());if(r)return;s||i.hide().css("position","absolute").wrap('<div class="jrac_container"><div class="jrac_viewport"></div></div>');var o=i.parent(),u=o.parent(),a=e('<div class="jrac_loading" />');o.append(a);var f=function(){e.extend(i,{scale_proportion_locked:!0,originalWidth:i.width(),originalHeight:i.height()}),i.width(n.image_width).height(n.image_height),n.viewport_image_surrounding?o.width(i.width()).height(i.height()):o.width(n.viewport_width).height(n.viewport_height),i.css({left:n.viewport_content_left,top:n.viewport_content_top});if(!s){var t=e('<div class="jrac_zoom_slider"><div class="ui-slider-handle"></div></div>').width(o.width()).slider({value:i.width(),min:n.zoom_min,max:n.zoom_max,start:function(n,r){e.extend(t,{on_start_width_value:r.value,on_start_height_value:i.height()})},slide:function(e,n){var r=Math.round(t.on_start_height_value*n.value/t.on_start_width_value);i.height(r),i.width(n.value),o.observator.notify("jrac_image_height",r),o.observator.notify("jrac_image_width",n.value)}});u.append(t),n.viewport_resize&&o.resizable({resize:function(e,n){t.width(n.size.width)}}),i.draggable({drag:function(e,t){t.position.left!=t.originalPosition.left&&o.observator.notify("jrac_crop_x",o.observator.crop_position_x()),t.position.top!=t.originalPosition.top&&o.observator.notify("jrac_crop_y",o.observator.crop_position_y())}});var r=e('<div class="jrac_crop"><div class="jrac_crop_drag_handler"></div></div>').css({width:n.crop_width,height:n.crop_height,left:n.crop_x+n.viewport_content_left,top:n.crop_y+n.viewport_content_top}).draggable({containment:o,handle:"div.jrac_crop_drag_handler",drag:function(e,t){t.position.left!=t.originalPosition.left&&o.observator.notify("jrac_crop_x",o.observator.crop_position_x()),t.position.top!=t.originalPosition.top&&o.observator.notify("jrac_crop_y",o.observator.crop_position_y())}});n.crop_resize&&r.resizable({containment:o,aspectRatio:n.crop_aspect_ratio,resize:function(e,t){t.size.width!=t.originalSize.width&&o.observator.notify("jrac_crop_width",r.width()),t.size.height!=t.originalSize.height&&o.observator.notify("jrac_crop_height",r.height())}}),o.append(r)}e.extend(o,{$container:u,$image:i,$crop:r,$zoom_widget:t,observator:{items:{},register:function(e,t,n){e&&t&&(this.items[e]={element:t,callback:n})},unregister:function(e){delete this.items[e]},notify:function(t,n){if(this.items[t]){var r=this.items[t].element,s=this.items[t].callback;r.trigger(t,[o,n]),e.isFunction(s)&&s.call(o,t,r,n)}i.trigger("jrac_events",[o])},notify_all:function(){this.notify("jrac_crop_x",this.crop_position_x()),this.notify("jrac_crop_y",this.crop_position_y()),this.notify("jrac_crop_width",r.width()),this.notify("jrac_crop_height",r.height()),this.notify("jrac_image_width",i.width()),this.notify("jrac_image_height",i.height())},crop_position_x:function(){return r.position().left-i.position().left},crop_position_y:function(){return r.position().top-i.position().top},crop_consistent:function(){return this.crop_position_x()>=0&&this.crop_position_y()>=0&&this.crop_position_x()+r.width()<=i.width()&&this.crop_position_y()+r.height()<=i.height()},set_property:function(e,n){n=parseInt(n);if(isNaN(n))return;switch(e){case"jrac_crop_x":r.css("left",n+i.position().left);break;case"jrac_crop_y":r.css("top",n+i.position().top);break;case"jrac_crop_width":r.width(n);break;case"jrac_crop_height":r.height(n);break;case"jrac_image_width":if(i.scale_proportion_locked){var s=Math.round(i.height()*n/i.width());i.height(s),this.notify("jrac_image_height",s)}i.width(n),t.slider("value",n);break;case"jrac_image_height":if(i.scale_proportion_locked){var o=Math.round(i.width()*n/i.height());i.width(o),this.notify("jrac_image_width",o),t.slider("value",o)}i.height(n)}this.notify(e,n)}}}),a.hide(),a.remove(),i.show(),e.isFunction(n.viewport_onload)&&(n.viewport_onload.call(o),o.observator.notify_all())},l=i.attr("src");/^data:image/.test(l)?f():(l=l+(l.search(/\?/)<0?"?":"&")+"jracrandom="+(new Date).getTime(),e("<img>").attr("src",l).load(f()))})}}(jQuery),define("jquery.jrac",function(){}),define("registration/views/fbimage-board",["require","text!registration/templates/fbimage-board.html","facade","views","utils","jquery.jrac"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=i.BaseView,u=r._,a=r.$,f=s.lib.Channel;return n=o.extend({tagName:"div",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){console.log("fb image board render"),console.log("fb image board collection"),console.log(this.collection);var e=this;o.prototype.render.call(this)},selectArea:function(e,t){a("#x1").val(t.x1),a("#y1").val(t.y1),a("#x2").val(t.x2),a("#y2").val(t.y2),a("#w").val(t.width),a("#h").val(t.height)},initCropView:function(){a("#image-select").jrac({crop_width:150,crop_height:150,crop_aspect_ratio:"1:1",crop_x:100,crop_y:100,image_width:400,viewport_onload:function(){var e=this,t=e.$container.parent(".pane").find(".coords input:hidden"),n=["jrac_crop_x","jrac_crop_y","jrac_crop_width","jrac_crop_height","jrac_image_width","jrac_image_height"];for(var r=0;r<n.length;r++){var i=n[r];e.observator.register(i,t.eq(r)),t.eq(r).bind(i,function(e,t,n){a(this).val(n)}).change(i,function(t){var n=t.data;e.$image.scale_proportion_locked=e.$container.parent(".pane").find(".coords input:checkbox").is(":checked"),e.observator.set_property(n,a(this).val())})}e.$container.append('<div class="natual-size">Image natual size: '+e.$image.originalWidth+" x "+e.$image.originalHeight+"</div>")}}).bind("jrac_events",function(e,t){var n=a(this).parents(".pane").find(".coords input");n.css("background-color",t.observator.crop_consistent()?"chartreuse":"salmon")})},removeCropView:function(){a("#image-select").jrac("destroy"),a("#image-select").parent().find(".natual-size").remove()},getImageInfo:function(){var e=this.$(".coords :input").serializeArray(),t=this.model.get("payload");a.each(e,function(e,n){t[n.name]=n.value}),this.model.set("payload",t)}}),n}),define("text!registration/templates/picture_buttons.html",[],function(){return'\r\n<div id="picture-buttons">\r\n    <a href="#" class="use_image">Use This Image</a>\r\n    <a href="#" class="upload_image">Upload a New Image</a>\r\n</div>\r\n'}),define("registration/views/picture_buttons",["require","text!registration/templates/picture_buttons.html","vendor","facade","views","utils"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=i.BaseView,u=s.lib.Channel,a=e("vendor"),f=a.Mustache;return n=o.extend({tagName:"div",className:"picture-buttons clearfix",template:t,events:{"click .use_image":"clickUseImage","click .upload_image":"clickUploadImage"},render:function(){var e=f.to_html(this.template);return this.$el.html(e),this},clickUseImage:function(e){e.preventDefault(),u("registration-use-image").publish()},clickUploadImage:function(e){e.preventDefault(),u("registration-upload-image").publish()}}),n}),define("registration/views/fbimage-list",["facade","utils","views","registration/views/fbimage-item","registration/views/fbimage-board","registration/views/picture_buttons","models/base"],function(e,t,n,r,i,s,o){var u,a=n.BaseView;return _=e._,u=a.extend({initialize:function(e){console.log(this.options,"options.collection"),_.map(this.collection,function(e,t){console.log(e.payload,"value.attributes")})},createElement:function(){}}),u}),define("registration/views/register_facebook",["require","text!registration/templates/register_facebook.html","backbone","facade","views","utils","vendor","jquery.pstrength","registration/collections/fbimages","registration/views/fbimage-list"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("vendor"),o=s.Mustache,u=e("utils"),a=u.lib.Channel,f=i.SectionView,l=e("registration/collections/fbimages"),c=e("registration/views/fbimage-list");return n=f.extend({id:"main-content",events:{keypress:"stopSubmit"},template:t,initialize:function(e){function s(e){i.$(".picture").attr("src",e)}function o(){i.initFBPictures()}function u(){i.initUploadImage()}this.callback=e.callback,this.inviteModel=e.inviteModel;var t=$.parseJSON(this.model.request.responseText);if(t.exec_data.exec_error){var n=!0,r=t.exec_data.error_array[0].error;this.model.set("errorDisplay",!0),this.model.set("errorValue",r)}var i=this;if(!this.model)throw new Error("RegistrationFacebookView expected options.model.");i.parseFBData(this.model.get("payload")),f.prototype.initialize.call(this,e),a("registration-change-picture").subscribe(s),a("registration-diff-fbpicture").subscribe(o),a("registration-upload-image").subscribe(u)},childViews:{},render:function(e,t,n){var r={};r.height="500px",r.width="650px",r.title="Register With Facebook - "+this.model.get("payload").name,r.id="fb-reg-pop",r.html=o.to_html(this.template,this.model.toJSON()),routing.trigger("common-popup-open",r),$("#fb-reg-pop .next").bind("click",this.nextStep),$("#fb-reg-pop div.edit").bind("click",this.changeField),$("#fb-reg-pop .diff_fb_pic").bind("click",this.diffFBPicture),$("#fb-reg-pop .upload_new_image").bind("click",this.uploadNewImage)},stopSubmit:function(e){var t=e.keyCode?e.keyCode:e.which;t==13&&e.preventDefault()},diffFBPicture:function(e){e.preventDefault(),this.initFBPictures()},uploadNewImage:function(e){e.preventDefault(),this.initUploadImage()},parseFBData:function(e){e.hs_exists=e.high_school?!0:!1,e.dob_exists=e.birthday?!0:!1,e.email_exists=e.email?!0:!1,this.model.set("payload",e)},initFBPictures:function(){var e=this;this.fbimages?(debug.log(e.fbimages.toJSON(),"else"),this.fbImageListView=new c({collection:e.fbimages.toJSON()})):(this.fbimages=new l,this.fbimages.fetch(),$.when(this.fbimages.request).done(function(){debug.log("this.fbimages are as follows"),debug.log(e.fbimages.toJSON()),this.fbImageListView=new c({collection:e.fbimages.toJSON()})}))},setupFBPictures:function(){var e=this;this.fbImageListView=new c({collection:this.fbimages});var t=this.addChildView(this.fbImageListView);this.childViews.fbImageListView=this.fbImageListView,this.callbacks.add(function(){t()}),this.fbImageListView.render(),this.$el.append(e.fbImageListView.el),$("#"+this.fbImageListView.id).dialog({width:"80%",close:e.removeListView})},removeListView:function(){this.childViews.fbImageListView.removeCropView()},initUploadImage:function(){alert("Upload Image")},changeField:function(e){e.preventDefault(),$(e.target).fadeOut();var t=$(e.target).parent().find("input");t.removeAttr("disabled").focus()},nextStep:function(e){e.preventDefault();var t=this,n=$("#fb-reg-pop :input").serializeArray(),r=this.model.get("payload");$.each(n,function(e,t){r[t.name]=t.value});if(r["password"]==""||r["password-again"]==""){alert("Please input a password");return}if(r["password"]!=r["password-again"]){alert("Please input a password correctly");return}if(r["agree"]==null){alert("Please agree to the Terms of Service");return}this.model.attributes.id=!1,this.model.set({payload:r,id:1}),this.model.url=function(){return testpath?testpath+"/user/basics":"/api/user/basics/"+r.users_id},this.model.save({callback:"true"},{success:function(e){$("#RegModal").modal("hide"),t.callback&&_.isFunction(t.callback)?(routing.trigger("common-popup-close"),t.callback(function(){window.location.reload()})):window.location.href="#usersettings"}})}}),n}),define("text!registration/templates/register_email.html",[],function(){return'\r\n<h1>The Basics</h1>\r\n<div class="row-fluid">\r\n    <form class="form-horizontal">\r\n        <div class="control-group">\r\n            <label class="control-label" for="first_name">First Name: </label>\r\n            <div class="controls">\r\n                <input type="text" name="firstname" id="first_name" placeholder="First Name">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="last_name">Last Name: </label>\r\n            <div class="controls">\r\n                <input type="text" name="lastname" id="last_name" placeholder="Last Name">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="dob">DOB: </label>\r\n            <div class="controls">\r\n                <input type="text" name="dob" id="dob" placeholder="Birthday">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="email">Email: </label>\r\n            <div class="controls">\r\n                <input type="text" name="email" id="email" placeholder="Email">\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label">Gender: </label>\r\n            <div class="controls" id="gender">\r\n                <label for="male"><input type="radio" id="male" name="gender" value="M"> Male</label>\r\n                <label for="female"><input type="radio" id="female" name="gender" value="F"> Female</label>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="password">Password: </label>\r\n            <div class="controls">\r\n                <input type="password" id="password" name="password" placeholder="Password"/>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div class="control-group">\r\n            <label class="control-label" for="re_password">Again: </label>\r\n            <div class="controls">\r\n                <input type="password" id="re_password" name="re_password" placeholder="Password Again"/>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <p class="agree-error text-error"></p>\r\n            <label for="accept_terms">\r\n                <input type="checkbox" id="accept_terms" name="accept_terms"/>I have read and agree to the <a href="#">Terms of Service</a>\r\n                <p class="field-error"></p>\r\n                <p class="field-message"></p>\r\n            </label>            \r\n            <a href="#" class="next">What\'s Next</a>\r\n        </div>\r\n    </form>\r\n</div>'}),define("registration/views/register_email",["require","text!registration/templates/register_email.html","facade","views","utils","jquery.pstrength","models/base"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=i.SectionView,a=e("models/base");return n=u.extend({id:"main-content",events:{keypress:"stopSubmit","click .next":"nextStep"},template:t,initialize:function(e){if(!this.model)throw new Error("RegistrationEmailView expected options.model.");u.prototype.initialize.call(this,e)},render:function(e,t,n){u.prototype.render.call(this,e,t,n),this.$("#password").pstrength()},stopSubmit:function(e){var t=e.keyCode?e.keyCode:e.which;t==13&&e.preventDefault()},nextStep:function(e){e.preventDefault();var t=this.$(":input").serializeArray(),n={};$.each(t,function(e,t){n[t.name]=t.value});var r=new a(n);r.url=function(){return"/api/user/register"},r.saveSuccess=function(e,t){a.prototype.saveSuccess.call(this,e,t);var n=t.exec_data,r=t.payload;n.exec_error||o("registration-select-org").publish(r)},r.save()}}),n}),define("text!registration/templates/upload_image.html",[],function(){return'\r\nUpload Image\r\n\r\n<a href="#" class="next">What\'s Next</a>'}),define("registration/views/upload_image",["require","text!registration/templates/upload_image.html","facade","views","utils"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=i.SectionView;return n=u.extend({id:"main-content",events:{"click .next":"nextStep"},template:t,initialize:function(e){u.prototype.initialize.call(this,e)},nextStep:function(e){e.preventDefault(),o("registration-select-org").publish()}}),n}),define("text!registration/templates/select_org.html",[],function(){return'\r\n<h1>Athletic Organizations</h1>\r\n<div class="step-club">\r\n<div>Link Up With Your Teams</div>\r\n<a href="#" class="find_club">\r\n    <h3>Find My Club</h3>\r\n    <p>Use our club locator to find your sports club and link up with your team.</p>\r\n</a>\r\n</div>\r\n{{#show_highschool}}\r\n<div class="step-highschool" style="display:none;">\r\n<div class="text-error">Only display high school chooser if age <= 18</div>\r\n<a href="#" class="high_school">\r\n    <h3>High School Locator</h3>\r\n    <p>If you play for your high school, click here to find your school and link up with your team.</p>\r\n</a>\r\n</div>\r\n{{/show_highschool}}\r\n<div class="step-sport" style="display:none;">\r\n<a href="#" class="indiv_sports">\r\n    <h3>Individual Sports</h3>\r\n    <p>If you are an athlete who competes without a team, this is where you\'ll find your sport.</p>\r\n</a>\r\n</div>\r\n<div class="step-next" style="display:none;">\r\n<a href="#" class="next">What\'s Next</a>\r\n</div>\r\n'}),define("registration/models/my_club",["models/base"],function(e){var t;return t=e.extend({url:function(){return testpath?testpath+"/user/myclub":"/api/user/basics/"+this.id}}),t}),define("text!registration/templates/find_my_club.html",[],function(){return'\r\n<h2>Find My Sports Club</h2>\r\n<form id="findClubFrm" class="form-horizontal">\r\n    <div class="control-group">\r\n        <label class="control-label" for="states_id">What State?</label>\r\n        <div class="controls">\r\n            <input id="states_id" name="state_name" placeholder="Just Start Typing" value="{{state}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label class="control-label" for="sports_id">What Sport?</label>\r\n        <div class="controls">\r\n            <input id="sports_id" name="sport_name" placeholder="Just Start Typing" value="{{sport}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="control-group">\r\n        <label class="control-label" for="orgs_id">Club Name</label>\r\n        <div class="controls">\r\n            <input id="orgs_id" name="org_name" placeholder="Just Start Typing" value="{{club}}" />\r\n            <p class="field-error"></p>\r\n            <p class="field-message"></p>\r\n        </div>\r\n    </div>\r\n    <div class="complevels"></div>\r\n    <div class="seasons"></div>\r\n    <a href="#" class="back">Go Back</a>    \r\n    <a href="#" class="not_find">Can\'t Find Your Club?</a>\r\n    <a href="#" class="continue">Continue</a>\r\n</form>\r\n'}),define("location/models/state",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{location_id:0,location_name:null,location_country:null},desc:"State Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("location/collections/states",["facade","collections","location/models/state","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){return testpath?testpath+"/state_search":this.state_name==undefined?"/api/state/search":"/api/state/search/?state_name="+this.state_name},fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("registration/collections/states",["facade","collections","location/collections/states","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("sportorg/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports",["facade","collections","sportorg/models/sport","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){return this.state_name==undefined,"/api/sport/search/?sport_name="+this.sport_name+"&gender="+this.gender},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),r[i].icon.indexOf("http://")<0&&(r[i].icon=base_url+r[i].icon),r[i].large_icon.indexOf("http://")<0&&(r[i].large_icon=base_url+r[i].large_icon),r[i].small_icon.indexOf("http://")<0&&(r[i].small_icon=base_url+r[i].small_icon),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){}}),i}),define("registration/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("sportorg/models/club",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/clubs",["facade","collections","sportorg/models/club","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){var e=this;return testpath?testpath+"/club_search":(e.states_id==undefined||e.sports_id==undefined||e.club_name==undefined,"/api/org/search/?sports_club=1&states_id="+e.states_id+"&sports_id="+e.sports_id+"&org_name="+e.club_name)},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var r in n){var i=new SportorgSportModel;i.id=Math.ceil(Math.random()*1e5),i.set("payload",n[r]),i.set("desc",t.desc),i.set("exec_data",t.exec_data),e.push(i)}e.deferred.resolve(t)}}),i}),define("registration/collections/clubs",["facade","collections","sportorg/collections/clubs","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("registration/views/find_my_club",["require","text!registration/templates/find_my_club.html","facade","views","utils","models/base","jqueryui","registration/collections/states","registration/collections/sports","registration/collections/clubs"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=e("models/base");return BaseView=i.BaseView,_=r._,$=r.$,Channel=s.lib.Channel,RegistrationStatesCollection=e("registration/collections/states"),RegistrationSportsCollection=e("registration/collections/sports"),RegistrationClubsCollection=e("registration/collections/clubs"),n=BaseView.extend({id:"find-my-club",tagName:"div",className:"find-my-club",template:t,events:{"click .back":"closeView","click .not-find":"notFind","click .continue":"highSchoolView","keyup #states_id":"keyupState","keyup #sports_id":"keyupSport","keyup #orgs_id":"keyupClub","blur #states_id":"changeState","blur #sports_id":"changeSport","change #orgs_id":"changeClub"},states:[],states_id:"",sports:[],sports_id:"",clubs:[],clubs_id:"",setOptions:function(e){if(!this.model)throw new Error("RegistrationFindMyClubView expected options.model.")},initialize:function(e){BaseView.prototype.initialize.call(this,e)},render:function(){var e=this;BaseView.prototype.render.call(this)},closeView:function(e){e.preventDefault(),Channel("registration-close-clubview").publish()},notFind:function(e){e.preventDefault()},highSchoolView:function(e){e.preventDefault()},keyUp:function(e){switch(this.$(e.target).attr("id")){case"state":this.keyupState(e);break;case"sport":this.keyupSport(e);break;case"club":this.keyupClub(e)}},keyupState:function(e){var t=this,n=this.$("#states_id").val(),r=[];if(n!=""){var i=new RegistrationStatesCollection;i.state_name=n,$(e.target).addClass("ui-autocomplete-loading"),i.fetch(),$.when(i.request).done(function(){if(i.isError())return;var e=i.toJSON();(e==null||e.length<1)&&t.$("#states_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.states=[];for(var n in e)t.states.push(e[n].payload);debug.log("self.states",t.states),t.states.forEach(function(e,t){r.push(e.name)}),debug.log("stateArr",r),t.$("#states_id").autocomplete({source:r})})}},changeState:function(e){var t=this.$("#states_id").val(),n=this;n.states_id="",n.states.forEach(function(e,r){e["name"]==t&&(n.states_id=e.id)}),this.keyupClub()},keyupSport:function(e){var t=this,n=t.model,r="all";n.get("payload").gender&&(r=n.get("payload").gender);var i=this.$("#sports_id").val(),s=[];if(i!=""){var o=new RegistrationSportsCollection;o.sport_name=i,o.gender=r,$(e.target).addClass("ui-autocomplete-loading"),o.fetch(),$.when(o.request).done(function(){if(o.isError())return;var e=o.toJSON();console.log("Sports Model",e),(e==null||e.length<1)&&t.$("#sports_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.sports=[];for(var n in e)t.sports.push(e[n].payload);console.log("sports",t.sports),t.sports.forEach(function(e,t){s.push(e.sport_name)}),console.log("sportArr",s),t.$("#sports_id").autocomplete({source:s})})}},changeSport:function(e){var t=this.$("#sports_id").val(),n=this;n.sports_id="",n.sports.forEach(function(e,r){e["sport_name"]==t&&(n.sports_id=e.sport_id)}),this.keyupClub()},keyupClub:function(e){var t=this,n=this.$("#orgs_id").val(),r=[];if(n!=""){var i=new RegistrationClubsCollection;console.log(t.states_id,t.sports_id,n),i.states_id=t.states_id,i.sports_id=t.sports_id,i.club_name=n,$(e.target).addClass("ui-autocomplete-loading"),i.fetch(),$.when(i.request).done(function(){if(i.isError())return;var e=i.toJSON();console.log("models",e),(e==null||e.length<1)&&t.$("#orgs_id").parent().find(".field-message").html("Couldn't find any matches").stop().fadeIn(),t.clubs=[];for(var n in e)t.clubs.push(e[n].payload);t.clubs.forEach(function(e,t){r.push(e.org_name)}),console.log("clubArr",r),t.$("#orgs_id").autocomplete({source:r})})}},changeClub:function(e){var t=this.$("#orgs_id").val(),n=this;n.clubs_id=0,n.clubs.forEach(function(e,r){e["name"]==t&&(n.clubs_id=e.id)})}}),n}),define("registration/views/select_org",["require","text!registration/templates/select_org.html","facade","views","utils","registration/models/my_club","registration/views/find_my_club"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=r.$,u=s.lib.Channel,a=i.SectionView,f=e("registration/models/my_club"),l=e("registration/views/find_my_club");return n=a.extend({id:"main-content",step:1,events:{"click .find_club":"findMyClub","click .high_school":"highSchoolLocator","click .indiv_sports":"individualSports","click .next":"nextStep"},template:t,initialize:function(e){a.prototype.initialize.call(this,e)},childViews:[],findMyClub:function(e){e.preventDefault();if(this.step!=1)return;var t=this;this.myclub?(this.myclub.fetch(),this.findMyClubView.render(),o("#"+this.findMyClubView.id).dialog({width:"80%",close:t.removeMyClubView})):(this.myclub=new f,this.myclub.id=t.model.get("payload").id,this.myclub.fetch(),o.when(this.myclub.request).done(function(){t.setupFindMyClub()}))},setupFindMyClub:function(){function n(){o("#"+e.findMyClubView.id).dialog("close")}var e=this;this.findMyClubView=new l({model:this.myclub});var t=this.addChildView(this.findMyClubView);this.childViews.findMyClubView=this.findMyClubView,this.callbacks.add(function(){t()}),this.findMyClubView.render(),this.$el.append(e.findMyClubView.el),o("#"+e.findMyClubView.id).dialog({width:"80%",close:e.removeMyClubView}),u("registration-close-clubview").subscribe(n)},removeMyClubView:function(){},highSchoolLocator:function(e){e.preventDefault();if(this.step!=2)return},individualSports:function(e){e.preventDefault();if(this.step!=3)return},nextStep:function(e){e.preventDefault();if(this.step!=4)return}}),n}),define("signup/views/shopopup",["require","backbone","underscore","registration","views","facade","utils"],function(e,t,n,r){var i,s=t.View;return i=s.extend({initialize:function(e){$("#errormsg, #preview").html(""),$("#RegModal").modal("show"),console.log($("#RegModal .modal-body")),$("#RegModal").on("hide",function(){$("div#modalPopup").remove()})}}),i}),define("registration",["require","text!signup/templates/layout.html","text!registration/templates/layout.html","facade","controller","models","views","utils","registration/models/select_type","registration/models/register_facebook","registration/models/register_email","registration/models/upload_image","registration/models/select_org","registration/views/select_type","registration/views/register_facebook","registration/views/register_email","registration/views/upload_image","registration/views/select_org","signup/views/shopopup"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("registration/models/select_type"),f=e("registration/models/register_facebook"),l=e("registration/models/register_email"),c=e("registration/models/upload_image"),h=e("registration/models/select_org"),p=e("registration/views/select_type"),d=e("registration/views/register_facebook"),v=e("registration/views/register_email"),m=e("registration/views/upload_image"),g=e("registration/views/select_org"),y=o.LayoutView,b=r.$,w=r._,E=u.debug,S=u.storage,x=u.lib.Channel,T=[base_url+"pages/registration/registration.css",base_url+"pages/signup/css/signupstyle.css",base_url+"css/style.jrac.css"];return n=i.extend({initialize:function(e){return x("load:css").publish(T),this.callback=e.callback,w.bindAll(this),this.handleOptions(e),this.init(),this},init:function(){ga("send","event","Signup","Header","Loading reg header"),this.setupLayout().render(),this.refreshPage(),this.createData(),this.handleDeferreds()},createData:function(){this.select_type=new a},handleDeferreds:function(){function t(){e.initRegisterFacebook()}function n(){e.initRegisterEmail()}function r(){e.uploadImage()}function i(t){e.selectOrg(t)}var e=this;routing.off("registration-with-facebook"),routing.on("registration-with-facebook",function(t,n){e.initRegisterFacebook(t,n)}),x("registration-select-org").subscribe(i)},refreshPage:function(){var e;this.selectTypeView&&(b(this.selectTypeView.destination).html(""),e=b.inArray(this.selectTypeView,this.scheme),~e&&this.scheme.splice(e,1)),this.registerFacebookView&&(b(this.registerFacebookView.destination).html(""),e=b.inArray(this.registerFacebookView,this.scheme),~e&&this.scheme.splice(e,1)),this.registerEmailView&&(b(this.registerEmailView.destination).html(""),e=b.inArray(this.registerEmailView,this.scheme),~e&&this.scheme.splice(e,1)),this.selectOrgView&&(b(this.selectOrgView.destination).html(""),e=b.inArray(this.selectOrgView,this.scheme),~e&&this.scheme.splice(e,1))},setupSelectTypeView:function(){this.selectTypeView=new p({model:this.select_type,name:"Select Registration Type",destination:"#main-content"}),this.scheme.push(this.selectTypeView),this.layout.render()},initRegisterFacebook:function(e,t){var n=this;this.refreshPage(),this.register_facebook=new f,this.register_facebook.bind("request",n.handleProgress,this),this.register_facebook.fetch(),b.when(this.register_facebook.request).done(function(r){var i={id:"cookieValue",value:r.payload.token},s=new S("authautologin","localStorage");s.create(i);var o={id:"cookieValue",value:r.payload.session},u=new S("session","localStorage");u.create(o),console.log(r,n.register_facebook.request),!w.isUndefined(t)&&w.isObject(t)&&t.save(),console.log(r.payload.identity_exists,"payload"),r.payload.identity_exists==1?location.reload():n.setupRegisterFacebookView(e)}).fail(function(e){n.setupRegisterFacebookView()})},handleProgress:function(e){},setupRegisterFacebookView:function(e,t){this.registerFacebookView=new d({model:this.register_facebook,name:"Registration with Facebook",destination:"#main-contentreg",callback:e,inviteModel:t}),this.scheme.push(this.registerFacebookView),this.layout.render()},initRegisterEmail:function(){var e=this;this.refreshPage(),this.register_email=new l,e.setupRegisterEmailView()},setupRegisterEmailView:function(){this.registerEmailView=new v({model:this.register_email,name:"Registration with Email Address",destination:"#main-content"}),this.scheme.push(this.registerEmailView),this.layout.render()},uploadImage:function(){var e=this;this.refreshPage(),this.upload_image=new c,this.setupUploadImageView()},setupUploadImageView:function(){this.uploadImageView=new m({model:this.upload_image,name:"Registration Upload Image",destination:"#main-content"}),this.scheme.push(this.uploadImageView),this.layout.render()},selectOrg:function(e){var t=this;this.refreshPage(),this.select_org=new h,this.select_org.id=e.id,this.select_org.fetch(),b.when(this.select_org.request).done(function(){t.setupSelectOrgView()})},setupSelectOrgView:function(){this.selectOrgView=new g({model:this.select_org,name:"Registration Select Org",destination:"#main-content"}),this.scheme.push(this.selectOrgView),this.layout.render()},setupLayout:function(){return this.scheme=[],b("#regModelPopup").length||b("body").append('<div id="regModelPopup"></div>'),pageLayout=new y({scheme:this.scheme,destination:"#setupLayout",template:t,displayWhen:"ready"}),this.layout=pageLayout,this.layout}}),n}),define("text!login/templates/layout.html",[],function(){return'<style type="text/css">\r\n	#logincontainer{\r\n		padding-left: 15px;\r\n		font-weight: bold;\r\n	}\r\n</style>\r\n<!--div id="Loginview" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div id="">\r\n		<div class="modal-header">\r\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n			<h3 id="label">Login</h3>\r\n		</div>\r\n		<div id="main-content-reg"></div>\r\n	</div>	\r\n</div-->\r\n'}),define("login/models/Loginmodel",["models/base"],function(e){var t;return t=e.extend({url:"api/user/login?time="+(new Date).getTime()}),t}),define("text!login/templates/logintemplate.html",[],function(){return'<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n\r\n<div id="regcontainer">\r\n	<div id="loginmain">\r\n		<div id="mainreg">\r\n			<div id="fbpane">\r\n				<div id="label">\r\n					Connect with Facebook\r\n				</div>\r\n				<div id="fblogo"><span></span></div>\r\n			</div>\r\n			<div class ="regor">\r\n				or\r\n			</div>\r\n			<div id="regpanemain">	\r\n				<form action="/user/login" method="post" accept-charset="utf-8" id="login">\r\n					<div id="firstregbase">\r\n						<!--<div class="loginbase">\r\n							<!--<label for="username">Email</label>-->\r\n							<input type="text" name="username" placeholder="Email Address" />\r\n							<!--<label for="password">Password</label>-->\r\n							<input type="password" name="password" placeholder="Password" />\r\n							<div class="loguser">\r\n								<input type="checkbox" checked="checked" name="remember" />\r\n								<label for="remember">Remember me for 2 weeks</label>\r\n							</div>	\r\n						<!--</div>-->	\r\n						<div class="errormsg"></div>\r\n						\r\n						<button type="button" class=" loginUser btn btn-primary">Login</button>\r\n						<div class="addsub">\r\n							<button type="button"  class="forgot-password-h btn btn-info btn-sm btn-custom" >Forgot My Password</button>\r\n							\r\n							<button type="button"  id= "signup" class=" btn btn-info btn-sm btn-custom" >create a new account</button>\r\n							\r\n						</div>				\r\n					</div>\r\n					\r\n					\r\n				</form>\r\n				\r\n			</div>\r\n			\r\n	\r\n		</div>\r\n\r\n	</div>\r\n	\r\n</div>\r\n\r\n<div class="forgot-password-container hide">\r\n	<div class="success-message hide">Password Reset link has been sent to your email address. Please check.</div>\r\n	<div class="error-message errormsg hide">Sorry we couldn\'t find the match record. Please try again with valid Email.</div>	\r\n	<form action="" method="POST" class="forgot-password-form-h">\r\n		<!--<label for="">Email</label>-->\r\n		<div id="firstregbase">\r\n			<input type="email" name="forgot_password_email" class="forgot-password-email-h" placeholder="Email Address" />\r\n			<button type="submit" name="forgot-password-btn" class="forgot-pasword-btn-h btn btn-default addsub" > Request Password </button>\r\n			<button type="button" class="log-in-link-h btn btn-default btn-sm addsub" >&nbsp;Log In &nbsp;</button>\r\n		</div>\r\n		<!--<br/>\r\n		<input type="submit" name="forgot-password-btn" class="forgot-pasword-btn-h btn btn-default" value="Request Password" />\r\n		<br/><br/>!-->\r\n		<!--<p><a class="log-in-link-h" href="javascript: void(0);"> Log In</a></p>-->\r\n	</form>\r\n</div>'}),define("signup/models/registerbasic",["models/base"],function(e){var t;return t=e.extend({defaults:{},validate:function(e,t){if(e.priority<0)return"Priority cannot be negative."},validation:{email:{required:!0,pattern:"email",msg:"Please enter a valid email"}}}),t}),define("signup/models/registration-basics-final",["models/base"],function(e){var t;return t=e.extend({defaults:{},url:"api/user/register"}),t}),define("text!signup/templates/registration.html",[],function(){return'<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n<style>\r\n\r\n</style>\r\n<div id="regcontainer">\r\n	<div id="mainreg">\r\n		<div id="header">\r\n			<span class="regheader"> Show us what you got</span>\r\n		</div>\r\n\r\n		<div id="fbpane">\r\n			<div id="label">\r\n				Connect with Facebook\r\n			</div>\r\n		</div>\r\n		<div class ="regor">\r\n			or\r\n		</div>\r\n		<div id="regpanemain">\r\n			<form action="#/user/create" method="post" class="signupform" accept-charset="utf-8">\r\n				<div id="firstregbase">\r\n					<input type="text" name="firstname" placeholder="First name" />\r\n					<div class="error">\r\n					</div>\r\n					<input type="text" name="lastname" placeholder="Last name" />\r\n					<input type="text" name="email" placeholder="Email" />\r\n					<div class="error">\r\n					</div>\r\n				</div><% if(fb_invite){ %><input type="hidden" name="fb_invite_id" value="<%= fb_invite %>" /><% } %>\r\n\r\n				<div class = "signupsubmit">\r\n					<input type="submit" name="create" value="Sign Up" class="regsubmit" />\r\n				</div>\r\n			</form>\r\n			<%  if(!onlyRegister) { %>\r\n\r\n				<div id="reglogin">\r\n				<span>Been here before <a href="javascript:void(0);">sign in</a></span>\r\n				</div>\r\n\r\n			<% } %>\r\n			\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'}),define("text!signup/templates/registration_landing.html",[],function(){return'<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n<style>\r\n\r\n</style>\r\n<div id="regcontainer">\r\n	<div id="mainreg">\r\n\r\n\r\n		<div id="fbpane">\r\n			<a href="#" style="display: block; width: 100%; height: 100%;">\r\n			<div id="label">\r\n				Connect with Facebook\r\n			</div>\r\n			<div id="fblogo"><span></span></div></a>\r\n		</div>\r\n		<div class ="regor">or</div>\r\n		<div id="regpanemain">\r\n			<form action="#/user/create" method="post" class="signupform" accept-charset="utf-8">\r\n				<div id="firstregbase">\r\n					<input type="text" name="fullname" placeholder="Full Name" />\r\n					<div class="error">\r\n					</div>\r\n					<input type="email" name="email" placeholder="Email" />\r\n					<input type="password" name="password" placeholder="Password" />\r\n					<% if(invite_hash != undefined){ %><input type="hidden" name="fb_invite_id" value="<%= invite_hash %>" /><% } %>\r\n					<div class = "signupsubmit">\r\n\r\n						<input type="submit" name="create" value="Sign Up" class="regsubmit" />\r\n						<input type="button" name="login" value="Log In" class="login" />\r\n					</div>\r\n					<div class="error">\r\n					</div>\r\n				</div>\r\n\r\n			</form>\r\n		</div>\r\n	</div>\r\n</div>'});try{window.FB||function(e){function o(){}var t=e,n=e.document,r=e.setTimeout,i=e.setInterval,s=0,u,a;a=function(e){return e[0]},u=function(e){return e};var f,l;(function(e){var t={},n={},r=["global","require","requireDynamic","requireLazy","module","exports"];f=function(r,i){if(n.hasOwnProperty(r))return n[r];if(!t.hasOwnProperty(r)){if(i)return null;throw new Error("Module "+r+" has not been defined")}var s=t[r],o=s.deps,u=o.length,a,l=[];for(var c=0;c<u;c++){switch(o[c]){case"module":a=s;break;case"exports":a=s.exports;break;case"global":a=e;break;case"require":a=f;break;case"requireDynamic":a=f;break;case"requireLazy":a=null;break;default:a=f.call(null,o[c])}l.push(a)}return s.factory.apply(e,l),n[r]=s.exports,s.exports},l=function(e,i,s,o){typeof s=="function"?(t[e]={factory:s,deps:r.concat(i),exports:{}},o===3&&f.call(null,e)):n[e]=s}})(this);var c=function(){return l("ES5ArrayPrototype",[],function(e,t,n,r,i,s){var o={};o.map=function(e,t){if(typeof e!="function")throw new TypeError;var n,r=this.length,i=new Array(r);for(n=0;n<r;++n)n in this&&(i[n]=e.call(t,this[n],n,this));return i},o.forEach=function(e,t){o.map.call(this,e,t)},o.filter=function(e,t){if(typeof e!="function")throw new TypeError;var n,r,i=this.length,s=[];for(n=0;n<i;++n)n in this&&(r=this[n],e.call(t,r,n,this)&&s.push(r));return s},o.every=function(e,t){if(typeof e!="function")throw new TypeError;var n=new Object(this),r=n.length;for(var i=0;i<r;i++)if(i in n&&!e.call(t,n[i],i,n))return!1;return!0},o.some=function(e,t){if(typeof e!="function")throw new TypeError;var n=new Object(this),r=n.length;for(var i=0;i<r;i++)if(i in n&&e.call(t,n[i],i,n))return!0;return!1},o.indexOf=function(e,t){var n=this.length;t|=0,t<0&&(t+=n);for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i.exports=o}),l("ES5FunctionPrototype",[],function(e,t,n,r,i,s){var o={};o.bind=function(e){function r(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}if(typeof this!="function")throw new TypeError("Bind must be called on a function");var t=this,n=Array.prototype.slice.call(arguments,1);return r.displayName="bound:"+(t.displayName||t.name||"(?)"),r.toString=function(){return"bound: "+t},r},i.exports=o}),l("ES5StringPrototype",[],function(e,t,n,r,i,s){var o={};o.trim=function(){if(this==null)throw new TypeError("String.prototype.trim called on null or undefined");return String.prototype.replace.call(this,/^\s+|\s+$/g,"")},i.exports=o}),l("ES5Array",[],function(e,t,n,r,i,s){var o={};o.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"},i.exports=o}),l("ES5Object",[],function(e,t,n,r,i,s){var o={};o.create=function(e){var t=typeof e;if(t!="object"&&t!="function")throw new TypeError("Object prototype may only be a Object or null");var n=new Function;return n.prototype=e,new n},o.keys=function(e){var t=typeof e;if(t!="object"&&t!="function"||e===null)throw new TypeError("Object.keys called on non-object");var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(r);var i=!{toString:!0}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable","constructor"];if(i)for(var o=0;o<s.length;o++){var u=s[o];Object.prototype.hasOwnProperty.call(e,u)&&n.push(u)}return n},i.exports=o}),l("ES5Date",[],function(e,t,n,r,i,s){var o={};o.now=function(){return(new Date).getTime()},i.exports=o}),l("JSON3",[],function(e,t,n,r,i,s){(function(){var e={}.toString,t,n,r,s=i.exports={},o='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=new Date(-0xc782b5b800cec),x,T,N;try{S=S.getUTCFullYear()==-109252&&S.getUTCMonth()===0&&S.getUTCDate()==1&&S.getUTCHours()==10&&S.getUTCMinutes()==37&&S.getUTCSeconds()==6&&S.getUTCMilliseconds()==708}catch(C){}S||(x=Math.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],N=function(e,t){return T[t]+365*(e-1970)+x((e-1969+(t=+(t>1)))/4)-x((e-1901+t)/100)+x((e-1601+t)/400)}),typeof JSON=="object"&&JSON&&(s.stringify=JSON.stringify,s.parse=JSON.parse);if(u=typeof s.stringify=="function"&&!N){(S=function(){return 1}).toJSON=S;try{u=s.stringify(0)==="0"&&s.stringify(new Number)==="0"&&s.stringify(new String)=='""'&&s.stringify(e)===r&&s.stringify(r)===r&&s.stringify()===r&&s.stringify(S)==="1"&&s.stringify([S])=="[1]"&&s.stringify([r])=="[null]"&&s.stringify(null)=="null"&&s.stringify([r,e,null])=="[null,null,null]"&&s.stringify({result:[S,true,false,null,"\0\b\n\f\r	"]})==o&&s.stringify(null,S)==="1"&&s.stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&s.stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&s.stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&s.stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&s.stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(C){u=!1}}if(typeof s.parse=="function")try{if(s.parse("0")===0&&!s.parse(!1)){S=s.parse(o);if(h=S.A.length==5&&S.A[0]==1){try{h=!s.parse('"	"')}catch(C){}if(h)try{h=s.parse("01")!=1}catch(C){}}}}catch(C){h=!1}S=o=null;if(!u||!h)(t={}.hasOwnProperty)||(t=function(n){var r={},i;return(r.__proto__=null,r.__proto__={toString:1},r).toString!=e?t=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(i=r.constructor,t=function(e){var t=(this.constructor||i).prototype;return e in this&&!(e in t&&this[e]===t[e])}),r=null,t.call(this,n)}),n=function(n,r){var i=0,s,o,u,a;(s=function(){this.valueOf=0}).prototype.valueOf=0,o=new s;for(u in o)t.call(o,u)&&i++;return s=o=null,i?i==2?a=function(n,r){var i={},s=e.call(n)=="[object Function]",o;for(o in n)(!s||o!="prototype")&&!t.call(i,o)&&(i[o]=1)&&t.call(n,o)&&r(o)}:a=function(n,r){var i=e.call(n)=="[object Function]",s,o;for(s in n)(!i||s!="prototype")&&t.call(n,s)&&!(o=s==="constructor")&&r(s);(o||t.call(n,s="constructor"))&&r(s)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],a=function(n,r){var i=e.call(n)=="[object Function]",s,u;for(s in n)(!i||s!="prototype")&&t.call(n,s)&&r(s);for(u=o.length;s=o[--u];t.call(n,s)&&r(s));}),a(n,r)},u||(a={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},f=function(e,t){return("000000"+(t||0)).slice(-e)},l=function(e){var t='"',n=0,r;for(;r=e.charAt(n);n++)t+='\\"\b\f\n\r	'.indexOf(r)>-1?a[r]:r<" "?"\\u00"+f(2,r.charCodeAt(0).toString(16)):r;return t+'"'},c=function(i,s,o,u,a,h,p){var d=s[i],v,m,g,y,b,w,E,S,T,C,k,L,A,O,M;if(typeof d=="object"&&d){v=e.call(d);if(v=="[object Date]"&&!t.call(d,"toJSON"))if(d>-1/0&&d<1/0){if(N){y=x(d/864e5);for(m=x(y/365.2425)+1970-1;N(m+1,0)<=y;m++);for(g=x((y-N(m,0))/30.42);N(m,g+1)<=y;g++);y=1+y-N(m,g),b=(d%864e5+864e5)%864e5,w=x(b/36e5)%24,E=x(b/6e4)%60,S=x(b/1e3)%60,T=b%1e3}else m=d.getUTCFullYear(),g=d.getUTCMonth(),y=d.getUTCDate(),w=d.getUTCHours(),E=d.getUTCMinutes(),S=d.getUTCSeconds(),T=d.getUTCMilliseconds();d=(m<=0||m>=1e4?(m<0?"-":"+")+f(6,m<0?-m:m):f(4,m))+"-"+f(2,g+1)+"-"+f(2,y)+"T"+f(2,w)+":"+f(2,E)+":"+f(2,S)+"."+f(3,T)+"Z"}else d=null;else typeof d.toJSON=="function"&&(v!="[object Number]"&&v!="[object String]"&&v!="[object Array]"||t.call(d,"toJSON"))&&(d=d.toJSON(i))}o&&(d=o.call(s,i,d));if(d===null)return"null";v=e.call(d);if(v=="[object Boolean]")return""+d;if(v=="[object Number]")return d>-1/0&&d<1/0?""+d:"null";if(v=="[object String]")return l(d);if(typeof d=="object"){for(A=p.length;A--;)if(p[A]===d)throw TypeError();p.push(d),C=[],O=h,h+=a;if(v=="[object Array]"){for(L=0,A=d.length;L<A;M||(M=!0),L++)k=c(L,d,o,u,a,h,p),C.push(k===r?"null":k);return M?a?"[\n"+h+C.join(",\n"+h)+"\n"+O+"]":"["+C.join(",")+"]":"[]"}return n(u||d,function(e){var t=c(e,d,o,u,a,h,p);t!==r&&C.push(l(e)+":"+(a?" ":"")+t),M||(M=!0)}),M?a?"{\n"+h+C.join(",\n"+h)+"\n"+O+"}":"{"+C.join(",")+"}":"{}"}},s.stringify=function(t,n,r){var i,s,o,u,a,f;if(typeof n=="function"||typeof n=="object"&&n)if(e.call(n)=="[object Function]")s=n;else if(e.call(n)=="[object Array]"){o={};for(u=0,a=n.length;u<a;f=n[u++],(e.call(f)=="[object String]"||e.call(f)=="[object Number]")&&(o[f]=1));}if(r)if(e.call(r)=="[object Number]"){if((r-=r%1)>0)for(i="",r>10&&(r=10);i.length<r;i+=" ");}else e.call(r)=="[object String]"&&(i=r.length<=10?r:r.slice(0,10));return c("",(f={},f[""]=t,f),s,o,i,"",[])}),h||(p=String.fromCharCode,d={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},v=function(){throw w=E=null,SyntaxError()},m=function(){var e=E,t=e.length,n,r,i,s,o;while(w<t){n=e.charAt(w);if("	\r\n ".indexOf(n)>-1)w++;else{if("{}[]:,".indexOf(n)>-1)return w++,n;if(n=='"'){for(r="@",w++;w<t;){n=e.charAt(w);if(n<" ")v();else if(n=="\\"){n=e.charAt(++w);if('\\"/btnfr'.indexOf(n)>-1)r+=d[n],w++;else if(n=="u"){i=++w;for(s=w+4;w<s;w++)n=e.charAt(w),n>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F"||v();r+=p("0x"+e.slice(i,w))}else v()}else{if(n=='"')break;r+=n,w++}}if(e.charAt(w)=='"')return w++,r;v()}else{i=w,n=="-"&&(o=!0,n=e.charAt(++w));if(n>="0"&&n<="9"){n=="0"&&(n=e.charAt(w+1),n>="0"&&n<="9")&&v(),o=!1;for(;w<t&&(n=e.charAt(w),n>="0"&&n<="9");w++);if(e.charAt(w)=="."){s=++w;for(;s<t&&(n=e.charAt(s),n>="0"&&n<="9");s++);s==w&&v(),w=s}n=e.charAt(w);if(n=="e"||n=="E"){n=e.charAt(++w),(n=="+"||n=="-")&&w++;for(s=w;s<t&&(n=e.charAt(s),n>="0"&&n<="9");s++);s==w&&v(),w=s}return+e.slice(i,w)}o&&v();if(e.slice(w,w+4)=="true")return w+=4,!0;if(e.slice(w,w+5)=="false")return w+=5,!1;if(e.slice(w,w+4)=="null")return w+=4,null;v()}}}return"$"},g=function(e){var t,n,r;e=="$"&&v();if(typeof e=="string"){if(e.charAt(0)=="@")return e.slice(1);if(e=="["){t=[];for(;;n||(n=!0)){e=m();if(e=="]")break;n&&(e==","?(e=m(),e=="]"&&v()):v()),e==","&&v(),t.push(g(e))}return t}if(e=="{"){t={};for(;;n||(n=!0)){e=m();if(e=="}")break;n&&(e==","?(e=m(),e=="}"&&v()):v()),(e==","||typeof e!="string"||e.charAt(0)!="@"||m()!=":")&&v(),t[e.slice(1)]=g(m())}return t}v()}return e},b=function(e,t,n){var i=y(e,t,n);i===r?delete e[t]:e[t]=i},y=function(t,r,i){var s=t[r],o;if(typeof s=="object"&&s)if(e.call(s)=="[object Array]")for(o=s.length;o--;)b(s,o,i);else n(s,function(e){b(s,e,i)});return i.call(t,r,s)},s.parse=function(t,n){w=0,E=t;var r=g(m());return m()!="$"&&v(),w=E=null,n&&e.call(n)=="[object Function]"?y((S={},S[""]=r,S),"",n):r})}).call(this)}),l("ES5",["ES5ArrayPrototype","ES5FunctionPrototype","ES5StringPrototype","ES5Array","ES5Object","ES5Date","JSON3"],function(t,n,r,i,s,o){function x(e,t,n){var r=d.call(arguments,3),i=n?/\s(.*)\]/.exec(v.call(e).toLowerCase())[1]:e,s=m[i+"."+t]||e[t];if(typeof s=="function")return s.apply(e,r)}var u=n("ES5ArrayPrototype"),a=n("ES5FunctionPrototype"),f=n("ES5StringPrototype"),l=n("ES5Array"),c=n("ES5Object"),h=n("ES5Date"),p=n("JSON3"),d=Array.prototype.slice,v=Object.prototype.toString,m={"JSON.stringify":p.stringify,"JSON.parse":p.parse},g={array:u,"function":a,string:f,Object:c,Array:l,Date:h};for(var y in g){if(!g.hasOwnProperty(y))continue;var b=g[y],w=y===y.toLowerCase()?e[y.replace(/^\w/,function(e){return e.toUpperCase()})].prototype:e[y];for(var E in b){if(!b.hasOwnProperty(E))continue;var S=w[E];m[y+"."+E]=S&&/\{\s+\[native code\]\s\}/.test(S)?S:b[E]}}s.exports=x}),c=f("ES5"),c.apply(null,arguments)};l("sdk.RuntimeConfig",[],{locale:"en_US",rtl:!1}),l("SDKConfig",[],{bustCache:!0,tagCountLogRate:.01,errorHandling:{rate:4},usePluginPipe:!0,features:{kill_fragment:!0,xfbml_profile_pic_server:!0,error_handling:{rate:4},e2e_ping_tracking:{rate:1e-6}},api:{mode:"warn",whitelist:["Canvas","Canvas.Prefetcher","Canvas.Prefetcher.addStaticResource","Canvas.Prefetcher.setCollectionMode","Canvas.getPageInfo","Canvas.hideFlashElement","Canvas.scrollTo","Canvas.setAutoGrow","Canvas.setDoneLoading","Canvas.setSize","Canvas.setUrlHandler","Canvas.showFlashElement","Canvas.startTimer","Canvas.stopTimer","Data","Data.process","Data.query","Data.query:wait","Data.waitOn","Data.waitOn:wait","Event","Event.subscribe","Event.unsubscribe","Music.flashCallback","Music.init","Music.send","Payment","Payment.cancelFlow","Payment.continueFlow","Payment.init","Payment.lockForProcessing","Payment.unlockForProcessing","Payment.parse","Payment.setSize","ThirdPartyProvider","ThirdPartyProvider.init","ThirdPartyProvider.sendData","UA","UA.nativeApp","XFBML","XFBML.RecommendationsBar","XFBML.RecommendationsBar.markRead","XFBML.parse","addFriend","api","getAccessToken","getAuthResponse","getLoginStatus","getUserID","init","login","logout","publish","share","ui","ui:subscribe"]},initSitevars:{enableMobileComments:1,iframePermissions:{read_stream:!1,manage_mailbox:!1,manage_friendlists:!1,read_mailbox:!1,publish_checkins:!0,status_update:!0,photo_upload:!0,video_upload:!0,sms:!1,create_event:!0,rsvp_event:!0,offline_access:!0,email:!0,xmpp_login:!1,create_note:!0,share_item:!0,export_stream:!1,publish_stream:!0,publish_likes:!0,ads_management:!1,contact_email:!0,access_private_data:!1,read_insights:!1,read_requests:!1,read_friendlists:!0,manage_pages:!1,physical_login:!1,manage_groups:!1,read_deals:!1}}}),l("UrlMapConfig",[],{www:"www.facebook.com",m:"m.facebook.com",connect:"connect.facebook.net",business:"business.facebook.com",api_https:"api.facebook.com",api_read_https:"api-read.facebook.com",graph_https:"graph.facebook.com",fbcdn_http:"static.ak.fbcdn.net",fbcdn_https:"fbstatic-a.akamaihd.net",cdn_http:"static.ak.facebook.com",cdn_https:"s-static.ak.facebook.com"}),l("XDConfig",[],{XdUrl:"connect/xd_arbiter.php?version=40",Flash:{path:"https://connect.facebook.net/rsrc.php/v1/yR/r/ks_9ZXiQ0GL.swf"},useCdn:!0}),l("CssConfig",[],{rules:'.fb_hidden{position:absolute;top:-10000px;z-index:10001}\n.fb_invisible{display:none}\n.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}\n.fb_reset > div{overflow:hidden}\n.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}\n.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}\n.fb_dialog_content{background:#fff;color:#333}\n.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\\9;right:7px\\9}\n.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}\n.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}\n.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}\n.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}\n.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size:24px;padding:20px}\n.fb_dialog_top_left,\n.fb_dialog_top_right,\n.fb_dialog_bottom_left,\n.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}\n.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}\n.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}\n.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}\n.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right,\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}\n.fb_dialog_vert_left,\n.fb_dialog_vert_right{width:10px;height:100%}\n.fb_dialog_vert_left{margin-left:-10px}\n.fb_dialog_vert_right{right:0;margin-right:-10px}\n.fb_dialog_horiz_top,\n.fb_dialog_horiz_bottom{width:100%;height:10px}\n.fb_dialog_horiz_top{margin-top:-10px}\n.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}\n.fb_dialog_iframe{line-height:0}\n.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size:14px;font-weight:bold;margin:0}\n.fb_dialog_content .dialog_title > span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif)\nno-repeat 5px 50%;float:left;padding:5px 0 7px 26px}\nbody.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}\n.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif)\nwhite no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}\n.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}\n#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}\n#fb-root #fb_dialog_ipad_overlay.hidden{display:none}\n.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}\n.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}\n.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%\n}\n.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px\n}\n.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px\n}\n.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6),\ncolor-stop(0.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset,\nrgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}\n.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}\n.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}\n.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}\n.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}\n#fb_dialog_loader_close{float:left}\n.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}\n.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}\n.fb_iframe_widget{display:inline-block;position:relative}\n.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}\n.fb_iframe_widget iframe{position:absolute}\n.fb_iframe_widget_lift{z-index:1}\n.fb_hide_iframes iframe{position:relative;left:-10000px}\n.fb_iframe_widget_loader{position:relative;display:inline-block}\n.fb_iframe_widget_fluid{display:inline}\n.fb_iframe_widget_fluid span{width:100%}\n.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}\n.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}\n.fb_connect_bar_container div,\n.fb_connect_bar_container span,\n.fb_connect_bar_container a,\n.fb_connect_bar_container img,\n.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}\n.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}\n.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px":body.scrollTop+"px")}\n.fb_connect_bar{position:relative;margin:auto;height:100%;width:100%;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:"lucida grande", tahoma, verdana, arial, sans-serif !important;font-size:13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}\n.fb_connect_bar a:hover{color:#fff}\n.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}\n.fb_connect_bar div a,\n.fb_connect_bar span,\n.fb_connect_bar span a{color:#bac6da;font-size:11px;text-decoration:none}\n.fb_connect_bar .fb_buttons{float:right;margin-top:7px}\n.fbpluginrecommendationsbarleft,\n.fbpluginrecommendationsbarright{position:fixed !important;bottom:0;z-index:999}\n.fbpluginrecommendationsbarleft{left:10px}\n.fbpluginrecommendationsbarright{right:10px}',components:["css:fb.css.base","css:fb.css.dialog","css:fb.css.iframewidget","css:fb.css.connectbarwidget","css:fb.css.plugin.recommendationsbar"]}),l("CanvasPrefetcherConfig",[],{blacklist:[0x83d70a64a992],sampleRate:500}),l("PluginPipeConfig",[],{threshold:0,enabledApps:{0xbec51e4718e7:1,0xaa568c1d5c06:1}}),l("ConnectBarConfig",[],{imgs:{buttonUrl:"rsrc.php/v2/yY/r/h_Y6u1wrZPW.png",missingProfileUrl:"rsrc.php/v2/yo/r/UlIqmHJn-SK.gif"}}),l("ApiClientConfig",[],{FlashRequest:{swfUrl:"https://connect.facebook.net/rsrc.php/v1/yW/r/PvklbuW2Ycn.swf"}}),l("QueryString",[],function(e,t,n,r,i,s){function o(e){var t=[];return c(c("Object","keys",!1,e).sort(),"forEach",!0,function(n){var r=e[n];if(typeof r=="undefined")return;if(r===null){t.push(n);return}t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}),t.join("&")}function u(e,t){var n={};if(e==="")return n;var r=e.split("&");for(var i=0;i<r.length;i++){var s=r[i].split("=",2),o=decodeURIComponent(s[0]);if(t&&n.hasOwnProperty(o))throw new URIError("Duplicate key: "+o);n[o]=s.length===2?decodeURIComponent(s[1]):null}return n}function a(e,t){return e+(~c(e,"indexOf",!0,"?")?"&":"?")+(typeof t=="string"?t:f.encode(t))}var f={encode:o,decode:u,appendToUrl:a};i.exports=f}),l("copyProperties",[],function(e,t,n,r,i,s){function o(e,t,n,r,i,s,o){e=e||{};var u=[t,n,r,i,s],a=0,f;while(u[a]){f=u[a++];for(var l in f)e[l]=f[l];f.hasOwnProperty&&f.hasOwnProperty("toString")&&typeof f.toString!="undefined"&&e.toString!==f.toString&&(e.toString=f.toString)}return e}i.exports=o}),l("ManagedError",[],function(e,t,n,r,i,s){function o(e,t){Error.prototype.constructor.call(this,e),this.message=e,this.innerError=t}o.prototype=new Error,o.prototype.constructor=o,i.exports=o}),l("AssertionError",["ManagedError"],function(e,t,n,r,i,s){function u(e){o.prototype.constructor.apply(this,arguments)}var o=t("ManagedError");u.prototype=new o,u.prototype.constructor=u,i.exports=u}),l("sprintf",[],function(e,t,n,r,i,s){function o(e){var t=Array.prototype.slice.call(arguments,1),n=0;return e.replace(/%s/g,function(e){return t[n++]})}i.exports=o}),l("Assert",["AssertionError","sprintf"],function(e,t,n,r,i,s){function a(e,t){if(typeof e!="boolean"||!e)throw new o(t);return e}function f(e,t,n){var r;if(t===undefined)r="undefined";else if(t===null)r="null";else{var i=Object.prototype.toString.call(t);r=/\s(\w*)/.exec(i)[1].toLowerCase()}return a(c(e,"indexOf",!0,r)!==-1,n||u("Expression is of type %s, not %s",r,e)),t}function l(e,t,n){return a(t instanceof e,n||"Expression not instance of type"),t}function h(e,t){p["is"+e]=t,p["maybe"+e]=function(e,n){e!=null&&t(e,n)}}var o=t("AssertionError"),u=t("sprintf"),p={isInstanceOf:l,isTrue:a,isTruthy:function(e,t){return a(!!e,t)},type:f,define:function(e,t){e=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase(),h(e,function(e,n){a(t(e),n)})}};c(["Array","Boolean","Date","Function","Null","Number","Object","Regexp","String","Undefined"],"forEach",!0,function(e){h(e,c(f,"bind",!0,null,e.toLowerCase()))}),i.exports=p}),l("Type",["copyProperties","Assert"],function(e,t,n,r,i,s){function a(){var e=this.__mixins;if(e)for(var t=0;t<e.length;t++)e[t].apply(this,arguments)}function f(e,t){if(t instanceof e)return!0;if(t instanceof a)for(var n=0;n<t.__mixins.length;n++)if(t.__mixins[n]==e)return!0;return!1}function l(e,t){var n=e.prototype;c("Array","isArray",!1,t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];typeof i=="function"&&(n.__mixins.push(i),i=i.prototype),c(c("Object","keys",!1,i),"forEach",!0,function(e){n[e]=i[e]})}}function h(e,t,n){var r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){this.parent.apply(this,arguments)};u.isFunction(r);if(e&&e.prototype instanceof a==0)throw new Error("parent type does not inherit from Type");e=e||a;var i=new Function;return i.prototype=e.prototype,r.prototype=new i,o(r.prototype,t),r.prototype.constructor=r,r.parent=e,r.prototype.__mixins=e.prototype.__mixins?Array.prototype.slice.call(e.prototype.__mixins):[],n&&l(r,n),r.prototype.parent=function(){this.parent=e.prototype.parent,e.apply(this,arguments)},r.prototype.parentCall=function(t){return e.prototype[t].apply(this,Array.prototype.slice.call(arguments,1))},r.extend=function(e,t){return h(this,e,t)},r}var o=t("copyProperties"),u=t("Assert");o(a.prototype,{instanceOf:function(e){return f(e,this)}}),o(a,{extend:function(e,t){return typeof e=="function"?h.apply(null,arguments):h(null,e,t)},instanceOf:f}),i.exports=a}),l("ObservableMixin",[],function(e,t,n,i,s,o){function u(){this.__observableEvents={}}u.prototype={inform:function(e){var t=Array.prototype.slice.call(arguments,1),n=Array.prototype.slice.call(this.getSubscribers(e));for(var i=0;i<n.length;i++){if(n[i]===null)continue;try{n[i].apply(this,t)}catch(s){r(function(){throw s},0)}}return this},getSubscribers:function(e){return this.__observableEvents[e]||(this.__observableEvents[e]=[])},clearSubscribers:function(e){return e&&(this.__observableEvents[e]=[]),this},clearAllSubscribers:function(){return this.__observableEvents={},this},subscribe:function(e,t){var n=this.getSubscribers(e);return n.push(t),this},unsubscribe:function(e,t){var n=this.getSubscribers(e);for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}return this},monitor:function(e,t){if(!t()){var n=c(function(r){t.apply(t,arguments)&&this.unsubscribe(e,n)},"bind",!0,this);this.subscribe(e,n)}return this}},s.exports=u}),l("sdk.Model",["Type","ObservableMixin"],function(e,t,n,r,i,s){var o=t("Type"),u=t("ObservableMixin"),a=o.extend({constructor:function(e){this.parent();var t={},n=this;c(c("Object","keys",!1,e),"forEach",!0,function(r){t[r]=e[r],n["set"+r]=function(e){return e===t[r]?this:(t[r]=e,n.inform(r+".change",e),n)},n["get"+r]=function(){return t[r]}})}},u);i.exports=a}),l("sdk.Runtime",["sdk.Model","copyProperties","sdk.RuntimeConfig"],function(t,n,r,i,s,o){var u=n("sdk.Model"),a=r("sdk.RuntimeConfig"),f=n("copyProperties"),l={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},c=new u({AccessToken:"",ClientID:"",Environment:l.UNKNOWN,Initialized:!1,KidDirectedSite:undefined,Locale:a.locale,LoginStatus:undefined,Rtl:a.rtl,Scope:undefined,Secure:undefined,UseCookie:!1,UserID:"",CookieUserID:""});f(c,{ENVIRONMENTS:l,isEnvironment:function(e){var t=this.getEnvironment();return(e|t)===t}}),function(){var t=/app_runner/.test(e.name)?l.PAGETAB:/iframe_canvas/.test(e.name)?l.CANVAS:l.UNKNOWN;(t|l.PAGETAB)===t&&(t|=l.CANVAS),c.setEnvironment(t)}(),s.exports=c}),l("sdk.Cookie",["QueryString","sdk.Runtime"],function(e,t,r,i,s,o){function l(e,t,r){e+=a.getClientID();var i=f&&f!==".";i&&(n.cookie=e+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;",n.cookie=e+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;"+"domain="+location.hostname+";");var s=(new Date(r)).toGMTString();n.cookie=e+"="+t+(t&&r===0?"":"; expires="+s)+"; path=/"+(i?"; domain="+f:"")}function c(e){e+=a.getClientID();var t=new RegExp("\\b"+e+"=([^;]*)\\b");return t.test(n.cookie)?RegExp.$1:null}var u=t("QueryString"),a=t("sdk.Runtime"),f=null,h={setDomain:function(e){f=e;var t=u.encode({base_domain:f&&f!=="."?f:""}),n=new Date;n.setFullYear(n.getFullYear()+1),l("fbm_",t,n.getTime())},getDomain:function(){return f},loadMeta:function(){var e=c("fbm_");if(e){var t=u.decode(e);return f||(f=t.base_domain),t}},loadSignedRequest:function(){return c("fbsr_")},setSignedRequestCookie:function(e,t){if(!e)throw new Error("Value passed to Cookie.setSignedRequestCookie was empty.");l("fbsr_",e,t)},clearSignedRequestCookie:function(){l("fbsr_","",0)},setRaw:l};s.exports=h}),l("guid",[],function(e,t,n,r,i,s){function o(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}i.exports=o}),l("hasNamePropertyBug",["guid"],function(e,t,r,i,s,o){function f(){var e=n.createElement("form"),t=e.appendChild(n.createElement("input"));return t.name=u(),a=t!==e.elements[t.name],e=t=null,a}function l(){return typeof a=="undefined"?f():a}var u=t("guid"),a;s.exports=l}),l("wrapFunction",[],function(e,t,n,r,i,s){function u(e,t,n){return t=t||"default",function(){var r=t in o?o[t](e,n):e;return r.apply(this,arguments)}}var o={};u.setWrapper=function(e,t){t=t||"default",o[t]=e},i.exports=u}),l("DOMEventListener",["wrapFunction"],function(t,n,r,i,s,o){var u=n("wrapFunction"),a,f;e.addEventListener?(a=function(e,t,n){n.wrapper=u(n,"entry","DOMEventListener.add "+t),e.addEventListener(t,n.wrapper,!1)},f=function(e,t,n){e.removeEventListener(t,n.wrapper,!1)}):e.attachEvent?(a=function(e,t,n){n.wrapper=u(n,"entry","DOMEventListener.add "+t),e.attachEvent("on"+t,n.wrapper)},f=function(e,t,n){e.detachEvent("on"+t,n.wrapper)}):f=a=function(){};var l={add:function(e,t,n){return a(e,t,n),{remove:function(){f(e,t,n),e=null}}},remove:f};s.exports=l}),l("sdk.createIframe",["copyProperties","guid","hasNamePropertyBug","DOMEventListener"],function(e,t,r,i,s,o){function c(e){e=u({},e);var t,r=e.name||a(),i=e.root,s=e.style||{border:"none"},o=e.url,c=e.onload;f()?t=n.createElement('<iframe name="'+r+'"/>'):(t=n.createElement("iframe"),t.name=r),delete e.style,delete e.name,delete e.url,delete e.root,delete e.onload;var p=u({frameBorder:0,allowTransparency:!0,scrolling:"no"},e);p.width&&(t.width=p.width+"px"),p.height&&(t.height=p.height+"px"),delete p.height,delete p.width;for(var d in p)p.hasOwnProperty(d)&&t.setAttribute(d,p[d]);u(t.style,s),t.src="javascript:false",i.appendChild(t);if(c)var v=l.add(t,"load",function(){v.remove(),c()});return t.src=o,t}var u=t("copyProperties"),a=t("guid"),f=t("hasNamePropertyBug"),l=t("DOMEventListener");s.exports=c}),l("DOMWrapper",[],function(e,r,i,s,o,u){var a,f,l={setRoot:function(e){a=e},getRoot:function(){return a||n.body},setWindow:function(e){f=e},getWindow:function(){return f||t}};o.exports=l}),l("sdk.feature",["SDKConfig"],function(e,t,n,r,i,s){function u(e,t){if(o.features&&e in o.features){var n=o.features[e];return typeof n=="object"&&typeof n.rate=="number"?n.rate&&Math.random()*100<=n.rate?n.value||!0:n.value?null:!1:n}return typeof t!="undefined"?t:null}var o=n("SDKConfig");i.exports=u}),l("UserAgent",[],function(e,t,r,i,s,o){function x(){if(u)return;u=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);b=/\b(iPhone|iP[ao]d)/.exec(e),w=/\b(iP[ao]d)/.exec(e),g=/Android/i.exec(e),E=/FBAN\/\w+;/i.exec(e),S=/Mobile/i.exec(e),y=!!/Win64/.exec(e);if(t){a=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,a&&n&&n.documentMode&&(a=n.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(e);p=i?parseFloat(i[1])+4:a,f=t[2]?parseFloat(t[2]):NaN,l=t[3]?parseFloat(t[3]):NaN,c=t[4]?parseFloat(t[4]):NaN,c?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),h=t&&t[1]?parseFloat(t[1]):NaN):h=NaN}else a=f=l=h=c=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);d=s?parseFloat(s[1].replace("_",".")):!0}else d=!1;v=!!r[2],m=!!r[3]}else d=v=m=!1}var u=!1,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,T={ie:function(){return x()||a},ieCompatibilityMode:function(){return x()||p>a},ie64:function(){return T.ie()&&y},firefox:function(){return x()||f},opera:function(){return x()||l},webkit:function(){return x()||c},safari:function(){return T.webkit()},chrome:function(){return x()||h},windows:function(){return x()||v},osx:function(){return x()||d},linux:function(){return x()||m},iphone:function(){return x()||b},mobile:function(){return x()||b||w||g||S},nativeApp:function(){return x()||E},android:function(){return x()||g},ipad:function(){return x()||w}};s.exports=T}),l("sdk.getContextType",["UserAgent","sdk.Runtime"],function(e,t,n,r,i,s){function a(){return o.nativeApp()?3:o.mobile()?2:u.isEnvironment(u.ENVIRONMENTS.CANVAS)?5:1}var o=t("UserAgent"),u=t("sdk.Runtime");i.exports=a}),l("UrlMap",["UrlMapConfig"],function(e,t,n,r,i,s){var o=t("UrlMapConfig"),u={resolve:function(e,t){var n=typeof t=="undefined"?location.protocol.replace(":",""):t?"https":"http";if(e in o)return n+"://"+o[e];if(typeof t=="undefined"&&e+"_"+n in o)return n+"://"+o[e+"_"+n];if(t!==!0&&e+"_http"in o)return"http://"+o[e+"_http"];if(t!==!1&&e+"_https"in o)return"https://"+o[e+"_https"]}};i.exports=u}),l("sdk.Impressions",["guid","QueryString","sdk.Runtime","UrlMap"],function(e,t,n,r,i,s){function l(e){var t=a.getClientID();!e.api_key&&t&&(e.api_key=t),e.kid_directed_site=a.getKidDirectedSite();var n=new Image;n.src=u.appendToUrl(f.resolve("www",!0)+"/impression.php/"+o()+"/",e)}var o=t("guid"),u=t("QueryString"),a=t("sdk.Runtime"),f=t("UrlMap"),h={log:function(e,t){t.source||(t.source="jssdk"),l({lid:e,payload:c("JSON","stringify",!1,t)})},impression:l};i.exports=h}),l("Log",["sprintf"],function(t,n,r,i,s,o){function f(t,n){var r=Array.prototype.slice.call(arguments,2),i=u.apply(null,r),s=e.console;s&&l.level>=n&&s[t in s?t:"log"](i)}var u=n("sprintf"),a={DEBUG:3,INFO:2,WARNING:1,ERROR:0},l={level:-1,Level:a,debug:c(f,"bind",!0,null,"debug",a.DEBUG),info:c(f,"bind",!0,null,"info",a.INFO),warn:c(f,"bind",!0,null,"warn",a.WARNING),error:c(f,"bind",!0,null,"error",a.ERROR)};s.exports=l}),l("Base64",[],function(e,t,n,r,i,s){function u(e){return e=e.charCodeAt(0)<<16|e.charCodeAt(1)<<8|e.charCodeAt(2),String.fromCharCode(o.charCodeAt(e>>>18),o.charCodeAt(e>>>12&63),o.charCodeAt(e>>>6&63),o.charCodeAt(e&63))}function f(e){return e=a.charCodeAt(e.charCodeAt(0)-43)<<18|a.charCodeAt(e.charCodeAt(1)-43)<<12|a.charCodeAt(e.charCodeAt(2)-43)<<6|a.charCodeAt(e.charCodeAt(3)-43),String.fromCharCode(e>>>16,e>>>8&255,e&255)}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=">___?456789:;<=_______\0\b	\n\f\r______ !\"#$%&'()*+,-./0123",l={encode:function(e){e=unescape(encodeURI(e));var t=(e.length+2)%3;return e=(e+"\0\0".slice(t)).replace(/[\s\S]{3}/g,u),e.slice(0,e.length+t-2)+"==".slice(t)},decode:function(e){e=e.replace(/[^A-Za-z0-9+\/]/g,"");var t=e.length+3&3;e=(e+"AAA".slice(t)).replace(/..../g,f),e=e.slice(0,e.length+t-3);try{return decodeURIComponent(escape(e))}catch(n){throw new Error("Not valid UTF-8")}},encodeObject:function(e){return l.encode(c("JSON","stringify",!1,e))},decodeObject:function(e){return c("JSON","parse",!1,l.decode(e))},encodeNums:function(e){return String.fromCharCode.apply(String,c(e,"map",!0,function(e){return o.charCodeAt((e|-(e>63))&-(e>0)&63)}))}};i.exports=l}),l("sdk.SignedRequest",["Base64"],function(e,t,n,r,i,s){function u(e){if(!e)return null;var t=e.split(".",2)[1].replace(/\-/g,"+").replace(/\_/g,"/");return o.decodeObject(t)}var o=t("Base64"),a={parse:u};i.exports=a}),l("URL",["Assert","copyProperties","QueryString","Log"],function(e,t,r,i,s,o){function m(e){u.isString(e,"The passed argument was of invalid type.");if(h.test(e))throw new URIError("The passed argument could not be parsed as a url.");if(this instanceof m==0)return new m(e);var t=e.replace(p,function(t){return l.warn('Escaping unescaped character \\x%s from "%s"',t.charCodeAt(0).toString(16),e),encodeURIComponent(t)}).match(c);if(!e||!t)throw new URIError("The passed argument could not be parsed as a url.");var n=!!location.hostname;this.setProtocol(t[4]||(n?location.protocol.replace(/:/,""):"")),this.setDomain(t[6]||location.hostname),this.setPort(t[8]||(n&&!t[6]?location.port:"")),this.setPath(t[9]||""),this.setSearch(t[11]||""),this.setFragment(t[13]||""),this._path.substring(0,1)!="/"&&(this._path="/"+this._path);if(this._domain&&!d.test(decodeURIComponent(this._domain.toLowerCase())))throw l.error("Invalid characters found in domain name: %s",this._domain),new URIError("Domain contained invalid characters.")}var u=t("Assert"),a=t("copyProperties"),f=t("QueryString"),l=t("Log"),c=new RegExp("((((\\w+):)?//)(.*?@)?([^~/?#:]+)(:(\\d+))?)?([^\\?$#]+)?(\\?([^$#]+))?(#([^$]+))?"),h=/[\0\\]/,p=/[^\w\-\.,;\/?:@=&%#$~+!*'\[\]()]+/g,d=/^[a-z0-9.][a-z0-9\-\.]+[a-z0-9.]$/,v=/\.facebook\.com$/;a(m.prototype,{constructor:m,getProtocol:function(){return this._protocol},setProtocol:function(e){return this._protocol=e,this},getDomain:function(){return this._domain},setDomain:function(e){return this._domain=e,this},getPort:function(){return this._port},setPort:function(e){return this._port=e,this},getPath:function(){return this._path},setPath:function(e){return this._path=e,this},getSearch:function(){return this._search},setSearch:function(e){return this._search=e,this},getFragment:function(){return this._fragment},setFragment:function(e){return this._fragment=e,this},getParsedSearch:function(){return f.decode(this._search)},getParsedFragment:function(){return f.decode(this._fragment)},isFacebookURL:function(){return v.test(this._domain)},toString:function(){return(this._protocol?this._protocol+":":"")+(this._domain?"//"+this._domain:"")+(this._port?":"+this._port:"")+this._path+(this._search?"?"+this._search:"")+(this._fragment?"#"+this._fragment:"")},valueOf:function(){return this.toString()}}),a(m,{getCurrent:function(){return new m(location.href)},getReferrer:function(){return n.referrer?new m(n.referrer):null}}),s.exports=m}),l("sdk.domReady",[],function(t,i,s,o,u,a){function c(){if(!f)return;var e;while(e=f.shift())e();f=null}function h(e){if(f){f.push(e);return}e()}var f,l="readyState"in n?/loaded|complete/.test(n.readyState):!!n.body;if(!l){f=[],n.addEventListener?(n.addEventListener("DOMContentLoaded",c,!1),e.addEventListener("load",c,!1)):n.attachEvent&&(n.attachEvent("onreadystatechange",c),e.attachEvent("onload",c));if(n.documentElement.doScroll&&e==e.top){var p=function(){try{n.documentElement.doScroll("left")}catch(e){r(p,0);return}c()};p()}}u.exports=h},3),l("sdk.Content",["sdk.domReady","Log","UserAgent"],function(e,t,r,i,s,o){var u=t("sdk.domReady"),a=t("Log"),f=t("UserAgent"),l,c,h={append:function(e,t){t||(l?t=l:(l=t=n.getElementById("fb-root"),t||(a.warn('The "fb-root" div has not been created, auto-creating'),l=t=n.createElement("div"),t.id="fb-root",f.ie()||!n.body?u(function(){n.body.appendChild(t)}):n.body.appendChild(t)),t.className+=" fb_reset"));if(typeof e=="string"){var r=n.createElement("div");return t.appendChild(r).innerHTML=e,r}return t.appendChild(e)},appendHidden:function(e){if(!t){var t=n.createElement("div"),r=t.style;r.position="absolute",r.top="-10000px",r.width=r.height=0,t=h.append(t)}return h.append(e,t)},submitToTarget:function(e,t){var r=n.createElement("form");r.action=e.url,r.target=e.target,r.method=t?"GET":"POST",h.appendHidden(r);for(var i in e.params)if(e.params.hasOwnProperty(i)){var s=e.params[i];if(s!==null&&s!==undefined){var o=n.createElement("input");o.name=i,o.value=s,r.appendChild(o)}}r.submit(),r.parentNode.removeChild(r)}};s.exports=h}),l("sdk.Event",[],function(e,t,n,r,i,s){var o={subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(e,t){var n=this.subscribers();n[e]?n[e].push(t):n[e]=[t]},unsubscribe:function(e,t){var n=this.subscribers()[e];n&&c(n,"forEach",!0,function(e,r){e==t&&(n[r]=null)})},monitor:function(e,t){if(!t()){var n=this,r=function(){t.apply(t,arguments)&&n.unsubscribe(e,r)};this.subscribe(e,r)}},clear:function(e){delete this.subscribers()[e]},fire:function(e){var t=Array.prototype.slice.call(arguments,1),n=this.subscribers()[e];n&&c(n,"forEach",!0,function(e){e&&e.apply(this,t)})}};i.exports=o}),l("Queue",["copyProperties"],function(e,t,n,i,s,o){function f(e){this._opts=u({interval:0,processor:null},e),this._queue=[],this._stopped=!0}var u=t("copyProperties"),a={};f.prototype._dispatch=function(e){if(this._stopped||this._queue.length===0)return;if(!this._opts.processor)throw this._stopped=!0,new Error("No processor available");if(this._opts.interval)this._opts.processor.call(this,this._queue.shift()),this._timeout=r(c(this._dispatch,"bind",!0,this),this._opts.interval);else while(this._queue.length)this._opts.processor.call(this,this._queue.shift())},f.prototype.enqueue=function(e){return this._opts.processor&&!this._stopped?this._opts.processor.call(this,e):this._queue.push(e),this},f.prototype.start=function(e){return e&&(this._opts.processor=e),this._stopped=!1,this._dispatch(),this},f.prototype.dispatch=function(){this._dispatch(!0)},f.prototype.stop=function(e){return this._stopped=!0,e&&clearTimeout(this._timeout),this},f.prototype.merge=function(e,t){return this._queue[t?"unshift":"push"].apply(this._queue,e._queue),e._queue=[],this._dispatch(),this},f.prototype.getLength=function(){return this._queue.length},f.get=function(e,t){var n;return e in a?n=a[e]:n=a[e]=new f(t),n},f.exists=function(e){return e in a},f.remove=function(e){return delete a[e]},s.exports=f}),l("JSONRPC",["copyProperties","Log"],function(e,t,n,i,s,o){function f(e){this._counter=0,this._callbacks={},this.remote=c(function(e){return this._context=e,this.remote},"bind",!0,this),this.local={},this._write=e}var u=t("copyProperties"),a=t("Log");u(f.prototype,{stub:function(e){this.remote[e]=c(function(){var t=Array.prototype.slice.call(arguments),n={jsonrpc:"2.0",method:e};typeof t[t.length-1]=="function"&&(n.id=++this._counter,this._callbacks[n.id]=t.pop()),n.params=t,this._write(c("JSON","stringify",!1,n),this._context||{method:e})},"bind",!0,this)},read:function(e,t){var n=c("JSON","parse",!1,e),i=n.id;if(!n.method){if(!this._callbacks[i]){a.warn("Could not find callback %s",i);return}var s=this._callbacks[i];delete this._callbacks[i],delete n.id,delete n.jsonrpc,s(n);return}var o=this,u=this.local[n.method],f;i?f=function(e,n){var s={jsonrpc:"2.0",id:i};s[e]=n,r(function(){o._write(c("JSON","stringify",!1,s),t)},0)}:f=function(){};if(!u){a.error('Method "%s" has not been defined',n.method),f("error",{code:-32601,message:"Method not found",data:n.method});return}n.params.push(c(f,"bind",!0,null,"result")),n.params.push(c(f,"bind",!0,null,"error"));try{var l=u.apply(t||null,n.params);typeof l!="undefined"&&f("result",l)}catch(p){a.error("Invokation of RPC method %s resulted in the error: %s",n.method,p.message),f("error",{code:-32603,message:"Internal error",data:p.message})}}}),s.exports=f}),l("sdk.RPC",["Assert","JSONRPC","Queue"],function(e,t,n,r,i,s){var o=t("Assert"),u=t("JSONRPC"),a=t("Queue"),f=new a,l=new u(function(e){f.enqueue(e)}),h={local:l.local,remote:l.remote,stub:c(l.stub,"bind",!0,l),setInQueue:function(e){o.isInstanceOf(a,e),e.start(function(e){l.read(e)})},getOutQueue:function(){return f}};i.exports=h}),l("emptyFunction",["copyProperties"],function(e,t,n,r,i,s){function u(e){return function(){return e}}function a(){}var o=t("copyProperties");o(a,{thatReturns:u,thatReturnsFalse:u(!1),thatReturnsTrue:u(!0),thatReturnsNull:u(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),i.exports=a}),l("htmlSpecialChars",[],function(e,t,n,r,i,s){function c(e){return typeof e=="undefined"||e===null||!e.toString?"":e===!1?"0":e===!0?"1":e.toString().replace(o,"&amp;").replace(f,"&quot;").replace(l,"&#039;").replace(u,"&lt;").replace(a,"&gt;")}var o=/&/g,u=/</g,a=/>/g,f=/"/g,l=/'/g;i.exports=c}),l("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent","copyProperties","guid","htmlSpecialChars"],function(t,n,r,i,s,o){function g(e){var t=m.getElementById(e);t&&t.parentNode.removeChild(t),delete d[e]}function y(){for(var e in d)d.hasOwnProperty(e)&&g(e)}function b(e){return e.replace(/\d+/g,function(e){return"000".substring(e.length)+e})}function w(t){v||(l.ie()>=9&&u.add(e,"unload",y),v=!0),d[t]=t}var u=n("DOMEventListener"),a=n("DOMWrapper"),f=n("QueryString"),l=n("UserAgent"),c=n("copyProperties"),h=n("guid"),p=n("htmlSpecialChars"),d={},v,m=a.getWindow().document,E={embed:function(e,t,n,r){var i=h();e=p(e).replace(/&amp;/g,"&"),n=c({allowscriptaccess:"always",flashvars:r,movie:e},n||{}),typeof n.flashvars=="object"&&(n.flashvars=f.encode(n.flashvars));var s=[];for(var o in n)n.hasOwnProperty(o)&&n[o]&&s.push('<param name="'+p(o)+'" value="'+p(n[o])+'">');var u=t.appendChild(m.createElement("span")),a="<object "+(l.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+e+'" '+(n.height?'height="'+n.height+'" ':"")+(n.width?'width="'+n.width+'" ':"")+'id="'+i+'">'+s.join("")+"</object>";u.innerHTML=a;var d=u.firstChild;return w(i),d},remove:g,getVersion:function(){var e="Shockwave Flash",t="application/x-shockwave-flash",n="ShockwaveFlash.ShockwaveFlash",r;if(navigator.plugins&&typeof navigator.plugins[e]=="object"){var i=navigator.plugins[e].description;i&&navigator.mimeTypes&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(r=i.match(/\d+/g))}if(!r)try{r=(new ActiveXObject(n)).GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),r=Array.prototype.slice.call(r,1)}catch(s){}return r},checkMinVersion:function(e){var t=E.getVersion();return t?b(t.join("."))>=b(e):!1},isAvailable:function(){return!!E.getVersion()}};s.exports=E}),l("dotAccess",[],function(e,t,n,r,i,s){function o(e,t,n){var r=t.split(".");do{var i=r.shift();e=e[i]||n&&(e[i]={})}while(r.length&&e);return e}i.exports=o}),l("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(e,t,n,r,i,s){var o=t("DOMWrapper"),u=t("dotAccess"),a=t("guid"),f=t("wrapFunction"),l,c,h={setPrefix:function(e){l=u(o.getWindow(),e,!0),c=e},create:function(e,t){l||this.setPrefix("__globalCallbacks");var n=a();return l[n]=f(e,"entry",t||"GlobalCallback"),c+"."+n},remove:function(e){var t=e.substring(c.length+1);delete l[t]}};i.exports=h}),l("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent","wrapFunction"],function(e,t,n,i,s,o){function b(e){var t={},n=e.length,r=g.transports;while(n--)t[e[n]]=1;n=r.length;while(n--){var i=r[n],s=m[i];if(!t[i]&&s.isAvailable())return i}}var u=t("DOMEventListener"),a=t("DOMWrapper"),f=t("emptyFunction"),l=t("Flash"),c=t("GlobalCallback"),h=t("guid"),p=t("Log"),d=t("UserAgent"),v=t("wrapFunction"),m={},g={transports:[]},y=a.getWindow(),w={register:function(e,t){p.debug("Registering %s as XDM provider",e),g.transports.push(e),m[e]=t},create:function(e){if(!e.whenReady&&!e.onMessage)throw p.error("An instance without whenReady or onMessage makes no sense"),new Error("An instance without whenReady or onMessage makes no sense");e.channel||(p.warn("Missing channel name, selecting at random"),e.channel=h()),e.whenReady||(e.whenReady=f),e.onMessage||(e.onMessage=f);var t=e.transport||b(e.blacklist||[]),n=m[t];if(n&&n.isAvailable())return p.debug("%s is available",t),n.init(e),t}};w.register("flash",function(){var e=!1,t,n=!1,i=15e3,s;return{isAvailable:function(){return l.checkMinVersion("8.0.24")},init:function(o){p.debug("init flash: "+o.channel);var u={send:function(e,n,r,i){p.debug("sending to: %s (%s)",n,i),t.postMessage(e,n,i)}};if(e){o.whenReady(u);return}var a=o.root.appendChild(y.document.createElement("div")),f=c.create(function(){c.remove(f),clearTimeout(s),p.info("xdm.swf called the callback");var e=c.create(function(e,t){e=decodeURIComponent(e),t=decodeURIComponent(t),p.debug("received message %s from %s",e,t),o.onMessage(e,t)},"xdm.swf:onMessage");t.init(o.channel,e),o.whenReady(u)},"xdm.swf:load");t=l.embed(o.flashUrl,a,null,{protocol:location.protocol.replace(":",""),host:location.host,callback:f,log:n}),s=r(function(){p.warn("The Flash component did not load within %s ms - verify that the container is not set to hidden or invisible using CSS as this will cause some browsers to not load the components",i)},i),e=!0}}}()),w.register("postmessage",function(){var e=!1;return{isAvailable:function(){return!!y.postMessage},init:function(t){p.debug("init postMessage: "+t.channel);var n="_FB_"+t.channel,i={send:function(e,t,n,i){if(y===n)throw p.error("Invalid windowref, equal to window (self)"),new Error;p.debug("sending to: %s (%s)",t,i);var s=function(){n.postMessage("_FB_"+i+e,t)};d.ie()==8||d.ieCompatibilityMode()?r(s,0):s()}};if(e){t.whenReady(i);return}u.add(y,"message",v(function(e){var r=e.data,i=e.origin||"native";if(typeof r!="string"){p.warn("Received message of type %s from %s, expected a string",typeof r,i);return}p.debug("received message %s from %s",r,i),r.substring(0,n.length)==n&&(r=r.substring(n.length)),t.onMessage(r,i)},"entry","onMessage")),t.whenReady(i),e=!0}}}()),s.exports=w}),l("sdk.XD",["sdk.Content","sdk.createIframe","sdk.Event","guid","Log","QueryString","Queue","sdk.RPC","sdk.Runtime","UrlMap","URL","XDM","XDConfig"],function(e,t,r,i,s,o){function P(e){h.info("Remote XD can talk to facebook.com (%s)",e),m.setEnvironment(e==="canvas"?m.ENVIRONMENTS.CANVAS:m.ENVIRONMENTS.PAGETAB)}function H(e,t){if(!t)throw h.error("No senderOrigin"),new Error;var n=/^https?/.exec(t)[0];switch(e.xd_action){case"proxy_ready":var r,i;n=="https"?(r=x,i=N):(r=S,i=T),e.registered&&(P(e.registered),E=r.merge(E)),h.info("Proxy ready, starting queue %s containing %s messages",n+"ProxyQueue",r.getLength()),r.start(function(e){A.send(typeof e=="string"?e:p.encode(e),t,i.contentWindow,k+"_"+n)});break;case"plugin_ready":h.info("Plugin %s ready, protocol: %s",e.name,n),_[e.name]={protocol:n};if(d.exists(e.name)){var s=d.get(e.name);h.debug("Enqueuing %s messages for %s in %s",s.getLength(),e.name,n+"ProxyQueue"),(n=="https"?x:S).merge(s)}}e.data&&B(e.data,t)}function B(e,t){if(t&&t!=="native"&&!y(t).isFacebookURL())return;if(typeof e=="string"){if(/^FB_RPC:/.test(e)){D.enqueue(e.substring(7));return}if(e.substring(0,1)=="{")try{e=c("JSON","parse",!1,e)}catch(n){h.warn("Failed to decode %s as JSON",e);return}else e=p.decode(e)}t||e.xd_sig==C&&(t=e.xd_origin);if(e.xd_action){H(e,t);return}e.access_token&&m.setSecure(/^https/.test(L));if(e.cb){var r=I._callbacks[e.cb];I._forever[e.cb]||delete I._callbacks[e.cb],r&&r(e)}}function j(e,t){if(e=="facebook")t.relation="parent.parent",E.enqueue(t);else{t.relation='parent.frames["'+e+'"]';var n=_[e];n?(h.debug("Enqueuing message for plugin %s in %s",e,n.protocol+"ProxyQueue"),(n.protocol=="https"?x:S).enqueue(t)):(h.debug("Buffering message for plugin %s",e),d.get(e).enqueue(t))}}function F(e){if(O)return;var t=u.appendHidden(n.createElement("div")),r=w.create({blacklist:null,root:t,channel:k,flashUrl:b.Flash.path,whenReady:function(n){A=n;var i={channel:k,origin:location.protocol+"//"+location.host,transport:r,xd_name:e},s="/"+b.XdUrl+"#"+p.encode(i),o=b.useCdn?g.resolve("cdn",!1):"http://www.facebook.com",u=b.useCdn?g.resolve("cdn",!0):"https://www.facebook.com";m.getSecure()!==!0&&(T=a({url:o+s,name:"fb_xdm_frame_http",id:"fb_xdm_frame_http",root:t,"aria-hidden":!0,title:M,"tab-index":-1})),N=a({url:u+s,name:"fb_xdm_frame_https",id:"fb_xdm_frame_https",root:t,"aria-hidden":!0,title:M,"tab-index":-1})},onMessage:B});O=!0}var u=t("sdk.Content"),a=t("sdk.createIframe"),f=t("sdk.Event"),l=t("guid"),h=t("Log"),p=t("QueryString"),d=t("Queue"),v=t("sdk.RPC"),m=t("sdk.Runtime"),g=t("UrlMap"),y=t("URL"),b=r("XDConfig"),w=t("XDM"),E=new d,S=new d,x=new d,T,N,C=l(),k=l(),L=location.protocol+"//"+location.host,A,O=!1,M="Facebook Cross Domain Communication Frame",_={},D=new d;v.setInQueue(D),v.getOutQueue().start(function(e){j("facebook","FB_RPC:"+e)});var I={rpc:v,_callbacks:{},_forever:{},_channel:k,_origin:L,onMessage:B,recv:B,init:F,sendToFacebook:j,inform:function(e,t,n,r){j("facebook",{method:e,params:c("JSON","stringify",!1,t||{}),behavior:r||"p",relation:n})},handler:function(e,t,n,r){var i=b.useCdn?g.resolve("cdn",location.protocol=="https:"):location.protocol+"//www.facebook.com";return i+"/"+b.XdUrl+"#"+p.encode({cb:this.registerCallback(e,n,r),origin:L+"/"+k,domain:location.hostname,relation:t||"opener"})},registerCallback:function(e,t,n){return n=n||l(),t&&(I._forever[n]=!0),I._callbacks[n]=e,n}};f.subscribe("init:post",function(e){F(e.xdProxyName)}),s.exports=I}),l("sdk.Auth",["sdk.Cookie","copyProperties","sdk.createIframe","DOMWrapper","sdk.feature","sdk.getContextType","guid","sdk.Impressions","Log","ObservableMixin","QueryString","sdk.Runtime","sdk.SignedRequest","UrlMap","URL","sdk.XD"],function(e,t,n,i,s,o){function k(e,t){var n=b.getUserID(),r="";if(e)if(e.userID)r=e.userID;else if(e.signedRequest){var i=w.parse(e.signedRequest);i&&i.user_id&&(r=i.user_id)}var s=b.getLoginStatus(),o=s==="unknown"&&e||b.getUseCookie()&&b.getCookieUserID()!==r,u=n&&!e,a=e&&n&&n!=r,f=e!=T,l=t!=(s||"unknown");b.setLoginStatus(t),b.setAccessToken(e&&e.accessToken||null),b.setUserID(r),T=e;var c={authResponse:e,status:t};return(u||a)&&C.inform("logout",c),(o||a)&&C.inform("login",c),f&&C.inform("authresponse.change",c),l&&C.inform("status.change",c),c}function L(){return T}function A(e,t,n){return function(r){var i;if(r&&r.access_token){var s=w.parse(r.signed_request);t={accessToken:r.access_token,userID:s.user_id,expiresIn:parseInt(r.expires_in,10),signedRequest:r.signed_request},r.granted_scopes&&(t.grantedScopes=r.granted_scopes);if(b.getUseCookie()){var o=t.expiresIn===0?0:c("Date","now",!1)+t.expiresIn*1e3,a=u.getDomain();!a&&r.base_domain&&u.setDomain("."+r.base_domain),u.setSignedRequestCookie(r.signed_request,o)}i="connected",k(t,i)}else if(n==="logout"||n==="login_status")r.error&&r.error==="not_authorized"?i="not_authorized":i="unknown",k(null,i),b.getUseCookie()&&u.clearSignedRequestCookie();return r&&r.https==1&&b.setSecure(!0),e&&e({authResponse:t,status:b.getLoginStatus()}),t}}function O(e){var t,n=c("Date","now",!1);N&&(clearTimeout(N),N=null);var i=A(e,T,"login_status"),s=S(E.resolve("www",!0)+"/connect/ping").setSearch(y.encode({client_id:b.getClientID(),response_type:"token,signed_request,code",domain:location.hostname,origin:p(),redirect_uri:x.handler(function(e){if(h("e2e_ping_tracking",!0)){var s={init:n,close:c("Date","now",!1),method:"ping"};m.debug("e2e: %s",c("JSON","stringify",!1,s)),v.log(114,{payload:s})}t.parentNode.removeChild(t),i(e)&&(N=r(function(){O(function(){})},12e5))},"parent"),sdk:"joey",kid_directed_site:b.getKidDirectedSite()}));t=f({root:l.getRoot(),name:d(),url:s.toString(),style:{display:"none"}})}function _(e,t){if(!b.getClientID()){m.warn("FB.getLoginStatus() called before calling FB.init().");return}if(e){if(!t&&M=="loaded"){e({status:b.getLoginStatus(),authResponse:L()});return}C.subscribe("FB.loginStatus",e)}if(!t&&M=="loading")return;M="loading";var n=function(e){M="loaded",C.inform("FB.loginStatus",e),C.clearSubscribers("FB.loginStatus")};O(n)}var u=t("sdk.Cookie"),a=t("copyProperties"),f=t("sdk.createIframe"),l=t("DOMWrapper"),h=t("sdk.feature"),p=t("sdk.getContextType"),d=t("guid"),v=t("sdk.Impressions"),m=t("Log"),g=t("ObservableMixin"),y=t("QueryString"),b=t("sdk.Runtime"),w=t("sdk.SignedRequest"),E=t("UrlMap"),S=t("URL"),x=t("sdk.XD"),T,N,C=new g,M;a(C,{getLoginStatus:_,fetchLoginStatus:O,setAuthResponse:k,getAuthResponse:L,parseSignedRequest:w.parse,xdResponseWrapper:A}),s.exports=C}),l("invariant",[],function(e,t,n,r,i,s){function o(e){if(!e){var t=new Error("Minified exception occured, use the non-minified dev environment for the full error message and additional helpful warnings.");throw t.framesToPop=1,t}}i.exports=o}),l("toArray",["invariant"],function(e,t,n,r,i,s){function u(e){var t=e.length;o(!c("Array","isArray",!1,e)&&(typeof e=="object"||typeof e=="function")),o(typeof t=="number"),o(t===0||t-1 in e);if(e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}var r=Array(t);for(var i=0;i<t;i++)r[i]=e[i];return r}var o=t("invariant");i.exports=u}),l("createArrayFrom",["toArray"],function(e,t,n,r,i,s){function u(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(c("Array","isArray",!1,e)||"callee"in e||"item"in e)}function a(e){return u(e)?c("Array","isArray",!1,e)?e.slice():o(e):[e]}var o=t("toArray");i.exports=a}),l("sdk.DOM",["Assert","createArrayFrom","sdk.domReady","UserAgent"],function(t,r,i,s,o,u){function d(e,t){var n=e.getAttribute(t)||e.getAttribute(t.replace(/_/g,"-"))||e.getAttribute(t.replace(/-/g,"_"))||e.getAttribute(t.replace(/-/g,""))||e.getAttribute(t.replace(/_/g,""))||e.getAttribute("data-"+t)||e.getAttribute("data-"+t.replace(/_/g,"-"))||e.getAttribute("data-"+t.replace(/-/g,"_"))||e.getAttribute("data-"+t.replace(/-/g,""))||e.getAttribute("data-"+t.replace(/_/g,""));return n?String(n):null}function v(e,t){var n=d(e,t);return n?/^(true|1|yes|on)$/.test(n):null}function m(e,t){a.isTruthy(e,"element not specified"),a.isString(t);try{return String(e[t])}catch(n){throw new Error("Could not read property "+t+" : "+n.message)}}function g(e,t){a.isTruthy(e,"element not specified"),a.isString(t);try{e.innerHTML=t}catch(n){throw new Error("Could not set innerHTML : "+n.message)}}function y(e,t){a.isTruthy(e,"element not specified"),a.isString(t);var n=" "+m(e,"className")+" ";return c(n,"indexOf",!0," "+t+" ")>=0}function b(e,t){a.isTruthy(e,"element not specified"),a.isString(t),y(e,t)||(e.className=m(e,"className")+" "+t)}function w(e,t){a.isTruthy(e,"element not specified"),a.isString(t);var n=new RegExp("\\s*"+t,"g");e.className=c(m(e,"className").replace(n,""),"trim",!0)}function E(e,t,r){a.isString(e),t=t||n.body,r=r||"*";if(t.querySelectorAll)return f(t.querySelectorAll(r+"."+e));var i=t.getElementsByTagName(r),s=[];for(var o=0,u=i.length;o<u;o++)y(i[o],e)&&(s[s.length]=i[o]);return s}function S(e,t){a.isTruthy(e,"element not specified"),a.isString(t),t=t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});var r=e.currentStyle||n.defaultView.getComputedStyle(e,null),i=r[t];return/backgroundPosition?/.test(t)&&/top|left/.test(i)&&(i="0%"),i}function x(e,t,n){a.isTruthy(e,"element not specified"),a.isString(t),t=t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}),e.style[t]=n}function T(e,t){var r=!0;for(var i=0,s;s=t[i++];)s in p||(r=!1,p[s]=!0);if(r)return;if(!h.ie()){var o=n.createElement("style");o.type="text/css",o.textContent=e,n.getElementsByTagName("head")[0].appendChild(o)}else try{n.createStyleSheet().cssText=e}catch(u){n.styleSheets[0]&&(n.styleSheets[0].cssText+=e)}}function N(){var t=n.documentElement&&n.compatMode=="CSS1Compat"?n.documentElement:n.body;return{scrollTop:t.scrollTop||n.body.scrollTop,scrollLeft:t.scrollLeft||n.body.scrollLeft,width:e.innerWidth?e.innerWidth:t.clientWidth,height:e.innerHeight?e.innerHeight:t.clientHeight}}function C(e){a.isTruthy(e,"element not specified");var t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{x:t,y:n}}var a=r("Assert"),f=r("createArrayFrom"),l=r("sdk.domReady"),h=r("UserAgent"),p={},k={containsCss:y,addCss:b,removeCss:w,getByClass:E,getStyle:S,setStyle:x,getAttr:d,getBoolAttr:v,getProp:m,html:g,addCssRules:T,getViewportInfo:N,getPosition:C,ready:l};o.exports=k}),l("sdk.Scribe",["UrlMap","QueryString"],function(e,t,n,r,i,s){function a(e,t){(new Image).src=u.appendToUrl(o.resolve("www",!0)+"/common/scribe_endpoint.php",{c:e,m:c("JSON","stringify",!1,t)})}var o=t("UrlMap"),u=t("QueryString"),f={log:a};i.exports=f}),l("sdk.ErrorHandling",["sdk.feature","ManagedError","sdk.Runtime","sdk.Scribe","UserAgent","wrapFunction"],function(t,n,s,o,u,a){function y(e){var t=e._originalError;throw delete e._originalError,p.log("jssdk_error",{appId:h.getClientID(),error:e.name||e.message,extra:e}),t}function b(e){var t={line:e.lineNumber||e.line,message:e.message,name:e.name,script:e.fileName||e.sourceURL||e.script,stack:e.stackTrace||e.stack};t._originalError=e,d.chrome()&&/([\w:\.\/]+\.js):(\d+)/.test(e.stack)&&(t.script=RegExp.$1,t.line=parseInt(RegExp.$2,10));for(var n in t)t[n]==null&&delete t[n];return t}function w(e,t){return function(){if(!m)return e.apply(this,arguments);try{return g=t,e.apply(this,arguments)}catch(n){if(n instanceof l)throw n;var r=b(n);r.entry=t;var i=c(Array.prototype.slice.call(arguments),"map",!0,function(e){var t=Object.prototype.toString.call(e);return/^\[object (String|Number|Boolean|Object|Date)\]$/.test(t)?e:e.toString()});r.args=c("JSON","stringify",!1,i).substring(0,200),y(r)}finally{g=""}}}function E(t){return t.__wrapper||(t.__wrapper=function(){try{return t.apply(this,arguments)}catch(n){return e.setTimeout(function(){throw n},0),!1}}),t.__wrapper}function S(e,t){return function(n,r){var i=t+":"+(g||"[global]")+":"+(n.name||"[anonymous]"+(arguments.callee.caller.name?"("+arguments.callee.caller.name+")":""));return e(v(n,"entry",i),r)}}var f=n("sdk.feature"),l=n("ManagedError"),h=n("sdk.Runtime"),p=n("sdk.Scribe"),d=n("UserAgent"),v=n("wrapFunction"),m=f("error_handling",!1),g="";m&&(r=S(r,"setTimeout"),i=S(i,"setInterval"),v.setWrapper(w,"entry"));var x={guard:w,unguard:E};u.exports=x}),l("sdk.Insights",["sdk.Impressions"],function(e,t,n,r,i,s){var o=t("sdk.Impressions"),u={TYPE:{NOTICE:"notice",WARNING:"warn",ERROR:"error"},CATEGORY:{DEPRECATED:"deprecated",APIERROR:"apierror"},log:function(e,t,n){var r={source:"jssdk",type:e,category:t,payload:n};o.log(113,r)},impression:o.impression};i.exports=u}),l("FB",["sdk.Auth","copyProperties","dotAccess","sdk.domReady","sdk.DOM","sdk.ErrorHandling","sdk.Content","DOMWrapper","GlobalCallback","sdk.Insights","Log","sdk.Runtime","sdk.Scribe","CssConfig","SDKConfig"],function(t,r,i,s,o,u){function O(e,t,n,r){var i;/^_/.test(n)?i="hide":N&&!N[t]&&(i=C);switch(i){case"hide":return;case"stub":return function(){w.warn("The method FB.%s has been removed from the JS SDK.",t)};default:return v.guard(function(){function n(e){return c("Array","isArray",!1,e)?c(e,"map",!0,n):e&&typeof e=="object"&&e.__wrapped?e.__wrapped:typeof e=="function"&&/^function/.test(e.toString())?v.unguard(e):e}i==="warn"&&(w.warn("The method FB.%s is not officially supported by Facebook and access to it will soon be removed.",t),k.hasOwnProperty(t)||(b.log(b.TYPE.WARNING,b.CATEGORY.DEPRECATED,"FB."+t),S.log("jssdk_error",{appId:E.getClientID(),error:"Private method used",extra:{args:t}}),k[t]=!0));var s=c(Array.prototype.slice.call(arguments),"map",!0,n),o=e.apply(r,s),u,a=!0;if(o&&typeof o=="object"){var f=Function();f.prototype=o,u=new f,u.__wrapped=o;for(var l in o){var h=o[l];if(typeof h!="function"||l==="constructor")continue;a=!1,u[l]=O(h,t+":"+l,l,o)}}return a?a?o:u:u},t)}}function M(e,t){var n=e?h(T,e,!0):T;c(c("Object","keys",!1,t),"forEach",!0,function(r){var i=t[r];if(typeof i=="function"){var s=(e?e+".":"")+r,o=O(i,s,r,t);o&&(n[r]=o)}})}var a=r("sdk.Auth"),f=r("copyProperties"),l=i("CssConfig"),h=r("dotAccess"),p=r("sdk.domReady"),d=r("sdk.DOM"),v=r("sdk.ErrorHandling"),m=r("sdk.Content"),g=r("DOMWrapper"),y=r("GlobalCallback"),b=r("sdk.Insights"),w=r("Log"),E=r("sdk.Runtime"),S=r("sdk.Scribe"),x=i("SDKConfig"),T,N,C=h(x,"api.mode"),k={};T=e.FB={};var L={};w.level=1,y.setPrefix("FB.__globalCallbacks");var A=n.createElement("div");g.setRoot(A),p(function(){w.info("domReady"),m.appendHidden(A),l.rules&&d.addCssRules(l.rules,l.components)}),E.subscribe("AccessToken.change",function(e){!e&&E.getLoginStatus()==="connected"&&a.getLoginStatus(null,!0)}),h(x,"api.whitelist.length")&&(N={},c(x.api.whitelist,"forEach",!0,function(e){N[e]=1})),E.setSecure(function(){var t=/iframe_canvas|app_runner/.test(e.name),n=/dialog/.test(e.name);if(location.protocol=="https:"&&(e==top||!t&&!n))return!0;if(/_fb_https?/.test(e.name))return c(e.name,"indexOf",true,"_fb_https")!=-1}()),f(L,{provide:M}),o.exports=L}),l("ArgumentError",["ManagedError"],function(e,t,n,r,i,s){function u(e,t){o.prototype.constructor.apply(this,arguments)}var o=t("ManagedError");u.prototype=new o,u.prototype.constructor=u,i.exports=u}),l("CORSRequest",["wrapFunction","QueryString"],function(e,n,r,i,s,o){function f(e,n){if(!t.XMLHttpRequest)return null;var r=new XMLHttpRequest,i=function(){};if("withCredentials"in r)r.open(e,n,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded");else{if(!t.XDomainRequest)return null;r=new XDomainRequest;try{r.open(e,n),r.onprogress=r.ontimeout=i}catch(s){return null}}var o={send:function(e){r.send(e)}},a=u(function(){a=i,"onload"in o&&o.onload(r)},"entry","XMLHttpRequest:load"),f=u(function(){f=i,"onerror"in o&&o.onerror(r)},"entry","XMLHttpRequest:error");return r.onload=function(){a()},r.onerror=function(){f()},r.onreadystatechange=function(){r.readyState==4&&(r.status==200?a():f())},o}function l(e,t,n,r){n.suppress_http_code=1;var i=a.encode(n);t!="post"&&(e=a.appendToUrl(e,i),i="");var s=f(t,e);return s?(s.onload=function(e){r(c("JSON","parse",!1,e.responseText))},s.onerror=function(e){e.responseText?r(c("JSON","parse",!1,e.responseText)):r({error:{type:"http",message:"unknown error",status:e.status}})},s.send(i),!0):!1}var u=n("wrapFunction"),a=n("QueryString"),h={execute:l};s.exports=h}),l("FlashRequest",["DOMWrapper","Flash","GlobalCallback","QueryString","Queue"],function(e,t,n,r,i,s){function m(){if(!d)throw new Error("swfUrl has not been set");var e=a.create(function(){h.start(function(e){var t=v.execute(e.method,e.url,e.body);if(!t)throw new Error("Could create request");p[t]=e.callback})}),t=a.create(function(e,t,n){var r;try{r=c("JSON","parse",!1,decodeURIComponent(n))}catch(i){r={error:{type:"SyntaxError",message:i.message,status:t,raw:n}}}p[e](r),delete p[e]});v=u.embed(d,o.getRoot(),null,{log:!1,initCallback:e,requestCallback:t})}function g(e,t,n,r){n.suppress_http_code=1,n.method||(n.method=t);var i=f.encode(n);t==="get"&&e.length+i.length<2e3?(e=f.appendToUrl(e,i),i=""):t="post";if(!h){if(!u.isAvailable())return!1;h=new l,m()}return h.enqueue({method:t,url:e,body:i,callback:r}),!0}var o=t("DOMWrapper"),u=t("Flash"),a=t("GlobalCallback"),f=t("QueryString"),l=t("Queue"),h,p={},d,v,y={setSwfUrl:function(e){d=e},execute:g};i.exports=y}),l("flattenObject",[],function(e,t,n,r,i,s){function o(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(null===r||undefined===r)continue;typeof r=="string"?t[n]=r:t[n]=c("JSON","stringify",!1,r)}return t}i.exports=o}),l("JSONPRequest",["DOMWrapper","GlobalCallback","QueryString"],function(e,t,i,s,o,u){function c(e,t,i,s){var o=n.createElement("script"),u=function(e){u=function(){},f.remove(i.callback),s(e),o.parentNode.removeChild(o)};i.callback=f.create(u),i.method||(i.method=t),e=l.appendToUrl(e,i);if(e.length>2e3)return f.remove(i.callback),!1;o.onerror=function(){u({error:{type:"http",message:"unknown error"}})};var c=function(){r(function(){u({error:{type:"http",message:"unknown error"}})},0)};return o.addEventListener?o.addEventListener("load",c,!1):o.onreadystatechange=function(){/loaded|complete/.test(this.readyState)&&c()},o.src=e,a.getRoot().appendChild(o),!0}var a=t("DOMWrapper"),f=t("GlobalCallback"),l=t("QueryString"),h={execute:c};o.exports=h}),l("keyMirror",["invariant"],function(e,t,n,r,i,s){var o=t("invariant"),u=function(e){var t={},n;o(e instanceof Object&&!c("Array","isArray",!1,e));for(n in e){if(!e.hasOwnProperty(n))continue;t[n]=n}return t};i.exports=u}),l("mergeHelpers",["invariant","keyMirror"],function(e,t,n,r,i,s){var o=t("invariant"),u=t("keyMirror"),a=36,f=function(e){return typeof e!="object"||e===null},l={MAX_MERGE_DEPTH:a,isTerminal:f,normalizeMergeArg:function(e){return e===undefined||e===null?{}:e},checkMergeArrayArgs:function(e,t){o(c("Array","isArray",!1,e)&&c("Array","isArray",!1,t))},checkMergeObjectArgs:function(e,t){l.checkMergeObjectArg(e),l.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){o(!f(e)&&!c("Array","isArray",!1,e))},checkMergeLevel:function(e){o(e<a)},checkArrayStrategy:function(e){o(e===undefined||e in l.ArrayStrategies)},ArrayStrategies:u({Clobber:!0,IndexByIndex:!0})};i.exports=l}),l("mergeInto",["mergeHelpers"],function(e,t,n,r,i,s){function a(e,t){u(e);if(t!=null){u(t);for(var n in t){if(!t.hasOwnProperty(n))continue;e[n]=t[n]}}}var o=t("mergeHelpers"),u=o.checkMergeObjectArg;i.exports=a}),l("merge",["mergeInto"],function(e,t,n,r,i,s){var o=t("mergeInto"),u=function(e,t){var n={};return o(n,e),o(n,t),n};i.exports=u}),l("ApiClient",["ArgumentError","Assert","copyProperties","CORSRequest","FlashRequest","flattenObject","JSONPRequest","Log","merge","ObservableMixin","sprintf","URL","UrlMap","ApiClientConfig"],function(e,t,n,r,i,s){function C(e,t,n,r){x&&(n=a({},x,n)),n.access_token=n.access_token||E,n.pretty=n.pretty||0,n=h(n);var i={jsonp:p,cors:f,flash:l},s;n.transport?(s=[n.transport],delete n.transport):s=["jsonp","cors","flash"];for(var o=0;o<s.length;o++){var u=i[s[o]],c=a({},n);if(u.execute(e,t,c,r))return}r({error:{type:"no-transport",message:"Could not find a usable transport for request"}})}function k(e,t,n,r,i){O.inform("request.complete",t,n,r,i),e&&e(i)}function L(e){u.isString(e,"Invalid path");var t,n={};try{t=new y(e)}catch(r){throw new o(r.message,r)}c(Array.prototype.slice.call(arguments,1),"forEach",!0,function(e){n[typeof e]=e});var i=(n.string||"get").toLowerCase(),s=v(n.object||{},t.getParsedSearch()),a=n["function"];a||d.warn("No callback passed to the ApiClient");var f=c(k,"bind",!0,null,a,t.getPath(),i,s);u.isTrue(i in T,g("Invalid method passed to ApiClient: %s",i)),s.method=i,t=b.resolve("graph")+t.getPath(),C(t,i=="get"?"get":"post",s,f)}function A(e,t){u.isObject(e),u.isString(e.method,"method missing"),t||d.warn("No callback passed to the ApiClient");var n=e.method.toLowerCase().replace(".","_");e.format="json-strings",e.api_key=S;var r=n in N?"api_read":"api",i=b.resolve(r)+"/restserver.php",s=c(k,"bind",!0,null,t,"/restserver.php","get",e);C(i,"get",e,s)}var o=t("ArgumentError"),u=t("Assert"),a=t("copyProperties"),f=t("CORSRequest"),l=t("FlashRequest"),h=t("flattenObject"),p=t("JSONPRequest"),d=t("Log"),v=t("merge"),m=t("ObservableMixin"),g=t("sprintf"),y=t("URL"),b=t("UrlMap"),w=t("ApiClientConfig"),E,S,x,T={get:!0,post:!0,"delete":!0,put:!0},N={fql_query:!0,fql_multiquery:!0,friends_get:!0,notifications_get:!0,stream_get:!0,users_getinfo:!0},O=a(new m,{setAccessToken:function(e){E=e},setClientID:function(e){S=e},setDefaultParams:function(e){x=e},rest:A,graph:L});l.setSwfUrl(w.FlashRequest.swfUrl),i.exports=O}),l("sdk.api",["ApiClient","sdk.Runtime"],function(e,t,n,r,i,s){function f(){typeof arguments[0]=="string"?o.graph.apply(o,arguments):o.rest.apply(o,arguments)}var o=t("ApiClient"),u=t("sdk.Runtime"),a;u.subscribe("ClientID.change",function(e){o.setClientID(e)}),u.subscribe("AccessToken.change",function(e){a=e,o.setAccessToken(e)}),o.setDefaultParams({sdk:"joey"}),o.subscribe("request.complete",function(e,t,n,r){var i=!1;if(r&&typeof r=="object")if(r.error){if(r.error=="invalid_token"||r.error.type=="OAuthException"&&r.error.code==190)i=!0}else r.error_code&&r.error_code=="190"&&(i=!0);i&&a===u.getAccessToken()&&u.setAccessToken(null)}),o.subscribe("request.complete",function(e,t,n,r){(e=="/me/permissions"&&t==="delete"||e=="/restserver.php"&&n.method=="Auth.revokeAuthorization")&&r===!0&&u.setAccessToken(null)}),i.exports=f}),l("legacy:fb.api",["FB","sdk.api"],function(e,t,n,r){var i=t("FB"),s=t("sdk.api");i.provide("",{api:s})},3),l("sdk.Canvas.Environment",["sdk.RPC"],function(e,t,n,r,i,s){function u(e){o.remote.getPageInfo(function(t){e(t.result)})}function a(e,t){o.remote.scrollTo({x:e||0,y:t||0})}var o=t("sdk.RPC");o.stub("getPageInfo"),o.stub("scrollTo");var f={getPageInfo:u,scrollTo:a};i.exports=f}),l("sdk.Intl",["Log"],function(e,t,n,r,i,s){function a(e){return typeof e!="string"?!1:!!e.match(new RegExp(u+"["+')"'+"'"+"»"+"༻"+"༽"+"’"+"”"+"›"+"〉"+"》"+"」"+"』"+"】"+"〕"+"〗"+"〙"+"〛"+"〞"+"〟"+"﴿"+"＇"+"）"+"］"+"\\s"+"]*$"))}function f(e,t){if(t!==undefined)if(typeof t!="object")o.error("The second arg to FB.Intl.tx() must be an Object for FB.Intl.tx("+e+", ...)");else{var n;for(var r in t)t.hasOwnProperty(r)&&(a(t[r])?n=new RegExp("\\{"+r+"\\}"+u+"*","g"):n=new RegExp("\\{"+r+"\\}","g"),e=e.replace(n,t[r]))}return e}function l(){throw new Error("Placeholder function")}var o=t("Log"),u="[.!?。！？।…ຯ᠁ฯ．]";l._=f,i.exports={tx:l}}),l("sdk.Dialog",["sdk.Canvas.Environment","sdk.Content","sdk.DOM","DOMEventListener","sdk.Intl","ObservableMixin","sdk.Runtime","Type","UserAgent","sdk.feature"],function(t,i,s,o,u,a){function N(){if(b("dialog_resize_refactor")){var e=h.getViewportInfo();if(e.height&&e.width)return{width:Math.min(e.width,w),height:Math.min(e.height,E)}}return null}var f=i("sdk.Canvas.Environment"),l=i("sdk.Content"),h=i("sdk.DOM"),p=i("DOMEventListener"),d=i("sdk.Intl"),v=i("ObservableMixin"),m=i("sdk.Runtime"),g=i("Type"),y=i("UserAgent"),b=i("sdk.feature"),w=590,E=500,S=240,x=575,T=function(){var e;if(b("dialog_resize_refactor")){var t=N();e=t&&(t.height>=w||t.width>=E)}else e=y.ipad();return T=function(){return e},e},C=g.extend({constructor:function(t,n){this.parent(),this.id=t,this.display=n,this._e2e={},k._dialogs||(k._dialogs={},k._addOrientationHandler()),k._dialogs[t]=this,this.trackEvent("init")},trackEvent:function(e,t){return this._e2e[e]?this:(this._e2e[e]=t||c("Date","now",!1),e=="close"&&this.inform("e2e:end",this._e2e),this)},trackEvents:function(e){typeof e=="string"&&(e=c("JSON","parse",!1,e));for(var t in e)e.hasOwnProperty(t)&&this.trackEvent(t,e[t]);return this}},v),k={newInstance:function(e,t){return new C(e,t)},_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,get:function(e){return k._dialogs[e]},_findRoot:function(e){while(e){if(h.containsCss(e,"fb_dialog"))return e;e=e.parentNode}},_createWWWLoader:function(e){return e=e?e:460,k.create({content:'<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>',width:e})},_createMobileLoader:function(){var e=y.nativeApp()?"":'<table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+d.tx._("Cancel")+'"'+'            id="fb_dialog_loader_close"/>'+"        </label>"+"      </td>"+'      <td class="header_center">'+"        <div>"+d.tx._("Loading...")+"</div>"+"      </td>"+'      <td class="header_right">'+"      </td>"+"    </tr>"+"  </tbody>"+"</table>";return k.create({classes:"loading"+(T()?" centered":""),content:'<div class="dialog_header">'+e+"</div>"})},_restoreBodyPosition:function(){if(!T()){var e=n.getElementsByTagName("body")[0];h.removeCss(e,"fb_hidden")}},_showTabletOverlay:function(){if(!T())return;k._overlayEl||(k._overlayEl=n.createElement("div"),k._overlayEl.setAttribute("id","fb_dialog_ipad_overlay"),l.append(k._overlayEl,null)),k._overlayEl.className=""},_hideTabletOverlay:function(){T()&&(k._overlayEl.className="hidden")},showLoader:function(e,t){k._showTabletOverlay(),k._loaderEl||(k._loaderEl=k._findRoot(y.mobile()?k._createMobileLoader():k._createWWWLoader(t))),e||(e=function(){});var r=n.getElementById("fb_dialog_loader_close");h.removeCss(r,"fb_hidden"),r.onclick=function(){k._hideLoader(),k._restoreBodyPosition(),k._hideTabletOverlay(),e()};var i=n.getElementById("fb_dialog_ipad_overlay");i&&(i.ontouchstart=r.onclick),k._makeActive(k._loaderEl)},_hideLoader:function(){k._loaderEl&&k._loaderEl==k._active&&(k._loaderEl.style.top="-10000px")},_makeActive:function(e){k._setDialogSizes(),k._lowerActive(),k._active=e,m.isEnvironment(m.ENVIRONMENTS.CANVAS)&&f.getPageInfo(function(e){k._centerActive(e)}),k._centerActive()},_lowerActive:function(){if(!k._active)return;k._active.style.top="-10000px",k._active=null},_removeStacked:function(e){k._stack=c(k._stack,"filter",!0,function(t){return t!=e})},_centerActive:function(e){var t=k._active;if(!t)return;var r=h.getViewportInfo(),i=parseInt(t.offsetWidth,10),s=parseInt(t.offsetHeight,10),o=r.scrollLeft+(r.width-i)/2,u=(r.height-s)/2.5;o<u&&(u=o);var a=r.height-s-u,f=(r.height-s)/2;e&&(f=e.scrollTop-e.offsetTop+(e.clientHeight-s)/2),f<u?f=u:f>a&&(f=a),f+=r.scrollTop;if(y.mobile()){var l=100;if(T())l+=(r.height-s)/2;else{var c=n.getElementsByTagName("body")[0];h.addCss(c,"fb_hidden"),b("dialog_resize_refactor")&&(c.style.width="auto"),f=1e4}var p=h.getByClass("fb_dialog_padding",t);p.length&&(p[0].style.height=l+"px")}t.style.left=(o>0?o:0)+"px",t.style.top=(f>0?f:0)+"px"},_setDialogSizes:function(){if(!y.mobile()||T())return;for(var e in k._dialogs)if(k._dialogs.hasOwnProperty(e)){var t=n.getElementById(e);t&&(t.style.width=k.getDefaultSize().width+"px",t.style.height=k.getDefaultSize().height+"px")}},getDefaultSize:function(){if(y.mobile()){var t=N();if(t)return t;if(y.ipad())return{width:E,height:w};if(y.android())return{width:screen.availWidth,height:screen.availHeight};var n=e.innerWidth,r=e.innerHeight,i=n/r>1.2;return{width:n,height:Math.max(r,i?screen.width:screen.height)}}return{width:x,height:S}},_handleOrientationChange:function(e){var t=b("dialog_resize_refactor",!1)?h.getViewportInfo().width:screen.availWidth;if(y.android()&&t==k._availScreenWidth){r(k._handleOrientationChange,50);return}k._availScreenWidth=t;if(T())k._centerActive();else{var i=k.getDefaultSize().width;for(var s in k._dialogs)if(k._dialogs.hasOwnProperty(s)){var o=n.getElementById(s);o&&(o.style.width=i+"px")}}},_addOrientationHandler:function(){if(!y.mobile())return;var t="onorientationchange"in e?"orientationchange":"resize";k._availScreenWidth=b("dialog_resize_refactor",!1)?h.getViewportInfo().width:screen.availWidth,p.add(e,t,k._handleOrientationChange)},create:function(e){e=e||{};var t=n.createElement("div"),r=n.createElement("div"),i="fb_dialog";if(e.closeIcon&&e.onClose){var s=n.createElement("a");s.className="fb_dialog_close_icon",s.onclick=e.onClose,t.appendChild(s)}i+=" "+(e.classes||""),y.ie()?(i+=" fb_dialog_legacy",c(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],"forEach",!0,function(e){var r=n.createElement("span");r.className="fb_dialog_"+e,t.appendChild(r)})):i+=y.mobile()?" fb_dialog_mobile":" fb_dialog_advanced",e.content&&l.append(e.content,r),t.className=i;var o=parseInt(e.width,10);isNaN(o)||(t.style.width=o+"px"),r.className="fb_dialog_content",t.appendChild(r);if(y.mobile()){var u=n.createElement("div");u.className="fb_dialog_padding",t.appendChild(u)}return l.append(t),e.visible&&k.show(t),r},show:function(e){var t=k._findRoot(e);t&&(k._removeStacked(t),k._hideLoader(),k._makeActive(t),k._stack.push(t),"fbCallID"in e&&k.get(e.fbCallID).inform("iframe_show").trackEvent("show"))},hide:function(e){var t=k._findRoot(e);k._hideLoader(),t==k._active&&(k._lowerActive(),k._restoreBodyPosition(),k._hideTabletOverlay(),"fbCallID"in e&&k.get(e.fbCallID).inform("iframe_hide").trackEvent("hide"))},remove:function(e){e=k._findRoot(e);if(e){var t=k._active==e;k._removeStacked(e),t?(k._hideLoader(),k._stack.length>0?k.show(k._stack.pop()):(k._lowerActive(),k._restoreBodyPosition(),k._hideTabletOverlay())):k._active===null&&k._stack.length>0&&k.show(k._stack.pop()),r(function(){e.parentNode.removeChild(e)},3e3)}},isActive:function(e){var t=k._findRoot(e);return t&&t===k._active}};u.exports=k}),l("sdk.Frictionless",["sdk.Auth","sdk.api","sdk.Event","sdk.Dialog"],function(e,t,n,r,i,s){var o=t("sdk.Auth"),u=t("sdk.api"),a=t("sdk.Event"),f=t("sdk.Dialog"),l={_allowedRecipients:{},_useFrictionless:!1,_updateRecipients:function(){l._allowedRecipients={},u("/me/apprequestformerrecipients",function(e){if(!e||e.error)return;c(e.data,"forEach",!0,function(e){l._allowedRecipients[e.recipient_id]=!0})})},init:function(){l._useFrictionless=!0,o.getLoginStatus(function(e){e.status=="connected"&&l._updateRecipients()}),a.subscribe("auth.login",function(e){e.authResponse&&l._updateRecipients()})},_processRequestResponse:function(e,t){return function(n){var r=n&&n.updated_frictionless;l._useFrictionless&&r&&l._updateRecipients(),n&&(!t&&n.frictionless&&(f._hideLoader(),f._restoreBodyPosition(),f._hideIPadOverlay()),delete n.frictionless,delete n.updated_frictionless),e&&e(n)}},isAllowed:function(e){if(!e)return!1;if(typeof e=="number")return e in l._allowedRecipients;typeof e=="string"&&(e=e.split(",")),e=c(e,"map",!0,function(e){return c(String(e),"trim",!0)});var t=!0,n=!1;return c(e,"forEach",!0,function(e){t=t&&e in l._allowedRecipients,n=!0}),t&&n}};a.subscribe("init:post",function(e){e.frictionlessRequests&&l.init()}),i.exports=l}),l("insertIframe",["guid","GlobalCallback"],function(e,t,i,s,o,u){function l(e){e.id=e.id||a(),e.name=e.name||a();var t=!1,i=!1,s=function(){t&&!i&&(i=!0,e.onload&&e.onload(e.root.firstChild))},o=f.create(s);if(n.attachEvent){var u='<iframe id="'+e.id+'"'+' name="'+e.name+'"'+(e.title?' title="'+e.title+'"':"")+(e.className?' class="'+e.className+'"':"")+' style="border:none;'+(e.width?"width:"+e.width+"px;":"")+(e.height?"height:"+e.height+"px;":"")+'"'+' src="javascript:false;"'+' frameborder="0"'+' scrolling="no"'+' allowtransparency="true"'+' onload="'+o+'()"'+"></iframe>";e.root.innerHTML='<iframe src="javascript:false" frameborder="0" scrolling="no" style="height:1px"></iframe>',t=!0,r(function(){e.root.innerHTML=u,e.root.firstChild.src=e.url,e.onInsert&&e.onInsert(e.root.firstChild)},0)}else{var l=n.createElement("iframe");l.id=e.id,l.name=e.name,l.onload=s,l.scrolling="no",l.style.border="none",l.style.overflow="hidden",e.title&&(l.title=e.title),e.className&&(l.className=e.className),e.height!==undefined&&(l.style.height=e.height+"px"),e.width!==undefined&&(e.width=="100%"?l.style.width=e.width:l.style.width=e.width+"px"),e.root.appendChild(l),t=!0,l.src=e.url,e.onInsert&&e.onInsert(l)}}var a=t("guid"),f=t("GlobalCallback");o.exports=l}),l("sdk.Native",["copyProperties","Log","UserAgent"],function(t,n,r,i,s,o){var u=n("copyProperties"),a=n("Log"),f=n("UserAgent"),l="fbNativeReady",c={onready:function(t){if(!f.nativeApp()){a.error("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");return}e.__fbNative&&!this.nativeReady&&u(this,e.__fbNative);if(this.nativeReady)t();else{var n=function(r){e.removeEventListener(l,n),this.onready(t)};e.addEventListener(l,n,!1)}}};s.exports=c}),l("resolveURI",[],function(t,r,i,s,o,u){function a(t){if(!t)return e.location.href;t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;");var r=n.createElement("div");return r.innerHTML='<a href="'+t+'"></a>',r.firstChild.href}o.exports=a}),l("sdk.UIServer",["sdk.Auth","sdk.Content","copyProperties","sdk.Dialog","sdk.DOM","sdk.Event","flattenObject","sdk.Frictionless","sdk.getContextType","guid","insertIframe","Log","sdk.Native","QueryString","resolveURI","sdk.RPC","sdk.Runtime","UrlMap","UserAgent","sdk.XD","SDKConfig"],function(t,s,o,u,a,f){var l=s("sdk.Auth"),h=s("sdk.Content"),p=s("copyProperties"),d=s("sdk.Dialog"),v=s("sdk.DOM"),m=s("sdk.Event"),g=s("flattenObject"),y=s("sdk.Frictionless"),b=s("sdk.getContextType"),w=s("guid"),E=s("insertIframe"),S=s("Log"),x=s("sdk.Native"),T=s("QueryString"),N=s("resolveURI"),C=s("sdk.RPC"),k=s("sdk.Runtime"),L=o("SDKConfig"),A=s("UrlMap"),O=s("UserAgent"),M=s("sdk.XD"),_={transform:function(t){return t.params.display==="touch"&&t.params.access_token&&e.postMessage?(t.params.channel=P._xdChannelHandler(t.id,"parent"),O.nativeApp()||(t.params.in_iframe=1),t):P.genericTransform(t)},getXdRelation:function(t){var n=t.display;return n==="touch"&&e.postMessage&&t.in_iframe?"parent":P.getXdRelation(t)}},D={"stream.share":{size:{width:670,height:340},url:"sharer.php",transform:function(t){return t.params.u||(t.params.u=e.location.toString()),t.params.display="popup",t}},apprequests:{transform:function(e){return e=_.transform(e),e.params.frictionless=y&&y._useFrictionless,e.params.frictionless&&(y.isAllowed(e.params.to)&&(e.params.display="iframe",e.params.in_iframe=!0,e.hideLoader=!0),e.cb=y._processRequestResponse(e.cb,e.hideLoader)),e.closeIcon=!1,e},getXdRelation:_.getXdRelation},feed:_,"permissions.oauth":{url:"dialog/oauth",size:{width:O.mobile()?null:475,height:O.mobile()?null:183},transform:function(e){if(!k.getClientID()){S.error("FB.login() called before FB.init().");return}if(l.getAuthResponse()&&!e.params.scope&&!e.params.auth_type){S.error("FB.login() called when user is already connected."),e.cb&&e.cb({status:k.getLoginStatus(),authResponse:l.getAuthResponse()});return}var t=e.cb,n=e.id;return delete e.cb,e.params.display==="async"?(p(e.params,{client_id:k.getClientID(),origin:b(),response_type:"token,signed_request",domain:location.hostname}),e.cb=l.xdResponseWrapper(t,l.getAuthResponse(),"permissions.oauth")):p(e.params,{client_id:k.getClientID(),redirect_uri:N(P.xdHandler(t,n,"opener",l.getAuthResponse(),"permissions.oauth")),origin:b(),response_type:"token,signed_request",domain:location.hostname}),e}},"auth.logout":{url:"logout.php",transform:function(e){if(!k.getClientID())S.error("FB.logout() called before calling FB.init().");else{if(!!l.getAuthResponse())return e.params.next=P.xdHandler(e.cb,e.id,"parent",l.getAuthResponse(),"logout"),e;S.error("FB.logout() called without an access token.")}}},"login.status":{url:"dialog/oauth",transform:function(e){var t=e.cb,n=e.id;return delete e.cb,p(e.params,{client_id:k.getClientID(),redirect_uri:P.xdHandler(t,n,"parent",l.getAuthResponse(),"login_status"),origin:b(),response_type:"token,signed_request,code",domain:location.hostname}),e}}},P={Methods:D,_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',genericTransform:function(e){return(e.params.display=="dialog"||e.params.display=="iframe")&&p(e.params,{display:"iframe",channel:P._xdChannelHandler(e.id,"parent.parent")},!0),e},checkOauthDisplay:function(e){var t=e.scope||e.perms||k.getScope();if(!t)return e.display;var n=t.split(/\s|,/g);for(var r=0;r<n.length;r++)if(!L.initSitevars.iframePermissions[c(n[r],"trim",!0)])return"popup";return e.display},prepareCall:function(e,t){var n=e.method.toLowerCase(),r=p({},P.Methods[n]),i=w(),s=k.getSecure()||n!=="auth.status"&&n!="login.status";p(e,{app_id:k.getClientID(),locale:k.getLocale(),sdk:"joey",access_token:s&&k.getAccessToken()||undefined}),e.display=P.getDisplayMode(r,e),r.url||(r.url="dialog/"+n),(r.url=="dialog/oauth"||r.url=="dialog/permissions.request")&&(e.display=="iframe"||e.display=="touch"&&e.in_iframe)&&(e.display=P.checkOauthDisplay(e));var o={cb:t,id:i,size:r.size||P.getDefaultSize(),url:A.resolve(e.display=="touch"?"m":"www",s)+"/"+r.url,params:e,name:n,dialog:d.newInstance(i,e.display)},u=r.transform?r.transform:P.genericTransform;if(u){o=u(o);if(!o)return}var a=r.getXdRelation||P.getXdRelation,f=a(o.params);return!(o.id in P._defaultCb)&&!("next"in o.params)&&!("redirect_uri"in o.params)&&(o.params.next=P._xdResult(o.cb,o.id,f,!0)),f==="parent"&&p(o.params,{channel_url:P._xdChannelHandler(i,"parent.parent")},!0),o=P.prepareParams(o),o},prepareParams:function(e){var t=e.params.method;e.params.display!=="async"&&delete e.params.method,e.params=g(e.params);var n=T.encode(e.params);return!O.nativeApp()&&P.urlTooLongForIE(e.url+"?"+n)?e.post=!0:n&&(e.url+="?"+n),e},urlTooLongForIE:function(e){return e.length>2e3},getDisplayMode:function(e,t){if(t.display==="hidden"||t.display==="none")return t.display;var n=k.isEnvironment(k.ENVIRONMENTS.CANVAS)||k.isEnvironment(k.ENVIRONMENTS.PAGETAB);return n&&!t.display?"async":O.mobile()||t.display==="touch"?"touch":!k.getAccessToken()&&t.display=="dialog"&&!e.loggedOutIframe?(S.error('"dialog" mode can only be used when the user is connected.'),"popup"):e.connectDisplay&&!n?e.connectDisplay:t.display||(k.getAccessToken()?"dialog":"popup")},getXdRelation:function(t){var n=t.display;if(n==="popup"||n==="touch")return"opener";if(n==="dialog"||n==="iframe"||n==="hidden"||n==="none")return"parent";if(n==="async")return"parent.frames["+e.name+"]"},popup:function(t){var r=typeof e.screenX!="undefined"?e.screenX:e.screenLeft,i=typeof e.screenY!="undefined"?e.screenY:e.screenTop,s=typeof e.outerWidth!="undefined"?e.outerWidth:n.documentElement.clientWidth,o=typeof e.outerHeight!="undefined"?e.outerHeight:n.documentElement.clientHeight-22,u=O.mobile()?null:t.size.width,a=O.mobile()?null:t.size.height,f=r<0?e.screen.width+r:r,l=parseInt(f+(s-u)/2,10),c=parseInt(i+(o-a)/2.5,10),p=[];u!==null&&p.push("width="+u),a!==null&&p.push("height="+a),p.push("left="+l),p.push("top="+c),p.push("scrollbars=1"),(t.name=="permissions.request"||t.name=="permissions.oauth")&&p.push("location=1,toolbar=0"),p=p.join(",");var d;t.post?(d=e.open("about:blank",t.id,p),d&&(P.setLoadedNode(t,d,"popup"),h.submitToTarget({url:t.url,target:t.id,params:t.params}))):(d=e.open(t.url,t.id,p),d&&P.setLoadedNode(t,d,"popup"));if(!d)return;t.id in P._defaultCb&&P._popupMonitor()},setLoadedNode:function(e,t,n){e.params&&e.params.display!="popup"&&(t.fbCallID=e.id),t={node:t,type:n,fbCallID:e.id},P._loadedNodes[e.id]=t},getLoadedNode:function(e){var t=typeof e=="object"?e.id:e,n=P._loadedNodes[t];return n?n.node:null},hidden:function(e){e.className="FB_UI_Hidden",e.root=h.appendHidden(""),P._insertIframe(e)},iframe:function(e){e.className="FB_UI_Dialog";var t=function(){P._triggerDefault(e.id)};e.root=d.create({onClose:t,closeIcon:e.closeIcon===undefined?!0:e.closeIcon,classes:O.ipad()?"centered":""}),e.hideLoader||d.showLoader(t,e.size.width),v.addCss(e.root,"fb_dialog_iframe"),P._insertIframe(e)},touch:function(e){e.params&&e.params.in_iframe?e.ui_created?d.showLoader(function(){P._triggerDefault(e.id)},0):P.iframe(e):O.nativeApp()&&!e.ui_created?(e.frame=e.id,x.onready(function(){P.setLoadedNode(e,x.open(e.url+"#cb="+e.frameName),"native")}),P._popupMonitor()):e.ui_created||P.popup(e)},async:function(e){e.params.redirect_uri=location.protocol+"//"+location.host+location.pathname,delete e.params.access_token,C.remote.showDialog(e.params,function(t){var n=t.result;if(n&&n.e2e){var r=d.get(e.id);r.trackEvents(n.e2e),r.trackEvent("close"),delete n.e2e}e.cb(n)})},getDefaultSize:function(){return d.getDefaultSize()},_insertIframe:function(e){P._loadedNodes[e.id]=!1;var t=function(t){e.id in P._loadedNodes&&P.setLoadedNode(e,t,"iframe")};e.post?E({url:"about:blank",root:e.root,className:e.className,width:e.size.width,height:e.size.height,id:e.id,onInsert:t,onload:function(t){h.submitToTarget({url:e.url,target:t.name,params:e.params})}}):E({url:e.url,root:e.root,className:e.className,width:e.size.width,height:e.size.height,id:e.id,name:e.frameName,onInsert:t})},_handleResizeMessage:function(e,t){var n=P.getLoadedNode(e);if(!n)return;t.height&&(n.style.height=t.height+"px"),t.width&&(n.style.width=t.width+"px"),M.inform("resize.ack",t||{},"parent.frames["+n.name+"]"),d.isActive(n)||d.show(n)},_triggerDefault:function(e){P._xdRecv({frame:e},P._defaultCb[e]||function(){})},_popupMonitor:function(){var e;for(var t in P._loadedNodes)if(P._loadedNodes.hasOwnProperty(t)&&t in P._defaultCb){var n=P._loadedNodes[t];if(n.type!="popup"&&n.type!="native")continue;var r=n.node;try{r.closed?P._triggerDefault(t):e=!0}catch(s){}}e&&!P._popupInterval?P._popupInterval=i(P._popupMonitor,100):!e&&P._popupInterval&&(clearInterval(P._popupInterval),P._popupInterval=null)},_xdChannelHandler:function(e,t){return M.handler(function(t){var n=P.getLoadedNode(e);if(!n)return;if(t.type=="resize")P._handleResizeMessage(e,t);else if(t.type=="hide")d.hide(n);else if(t.type=="rendered"){var r=d._findRoot(n);d.show(r)}else t.type=="fireevent"&&m.fire(t.event)},t,!0,null)},_xdNextHandler:function(e,t,n,r){return r&&(P._defaultCb[t]=e),M.handler(function(t){P._xdRecv(t,e)},n)+"&frame="+t},_xdRecv:function(t,n){var i=P.getLoadedNode(t.frame);if(i)if(i.close)try{i.close(),/iPhone.*Version\/(5|6)/.test(navigator.userAgent)&&RegExp.$1!=="5"&&e.focus(),P._popupCount--}catch(s){}else v.containsCss(i,"FB_UI_Hidden")?r(function(){i.parentNode.parentNode.removeChild(i.parentNode)},3e3):v.containsCss(i,"FB_UI_Dialog")&&d.remove(i);delete P._loadedNodes[t.frame],delete P._defaultCb[t.frame];if(t.e2e){var o=d.get(t.frame);o.trackEvents(t.e2e),o.trackEvent("close"),delete t.e2e}n(t)},_xdResult:function(e,t,n,r){return P._xdNextHandler(function(t){e&&e(t.result&&t.result!=P._resultToken&&c("JSON","parse",!1,t.result))},t,n,r)+"&result="+encodeURIComponent(P._resultToken)},xdHandler:function(e,t,n,r,i){return P._xdNextHandler(l.xdResponseWrapper(e,r,i),t,n,!0)}};C.stub("showDialog"),a.exports=P}),l("sdk.ui",["Assert","copyProperties","sdk.feature","sdk.Impressions","Log","sdk.UIServer"],function(e,t,n,r,i,s){function p(e,t){o.isObject(e),o.maybeFunction(t),e=u({},e);if(!e.method)return l.error('"method" is a required parameter for FB.ui().'),null;var n=e.method;e.redirect_uri&&(l.warn("When using FB.ui, you should not specify a redirect_uri."),delete e.redirect_uri),(n=="permissions.request"||n=="permissions.oauth")&&(e.display=="iframe"||e.display=="dialog")&&(e.display=h.checkOauthDisplay(e));var r=a("e2e_tracking",!0);r&&(e.e2e={});var i=h.prepareCall(e,t||function(){});if(!i)return null;var s=i.params.display;s==="dialog"?s="iframe":s==="none"&&(s="hidden");var p=h[s];return p?(r&&i.dialog.subscribe("e2e:end",function(e){e.method=n,e.display=s,l.debug("e2e: %s",c("JSON","stringify",!1,e)),f.log(114,{payload:e})}),p(i),i.dialog):(l.error('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"'),null)}var o=t("Assert"),u=t("copyProperties"),a=t("sdk.feature"),f=t("sdk.Impressions"),l=t("Log"),h=t("sdk.UIServer");i.exports=p}),l("legacy:fb.auth",["sdk.Auth","sdk.Cookie","copyProperties","sdk.Event","FB","Log","sdk.Runtime","sdk.SignedRequest","sdk.ui"],function(e,t,n,r){var i=t("sdk.Auth"),s=t("sdk.Cookie"),o=t("copyProperties"),u=t("sdk.Event"),a=t("FB"),f=t("Log"),l=t("sdk.Runtime"),h=t("sdk.SignedRequest"),p=t("sdk.ui");a.provide("",{getLoginStatus:function(){return i.getLoginStatus.apply(i,arguments)},getAuthResponse:function(){return i.getAuthResponse()},getAccessToken:function(){return l.getAccessToken()||null},getUserID:function(){return l.getUserID()||l.getCookieUserID()},login:function(e,t){t&&t.perms&&!t.scope&&(t.scope=t.perms,delete t.perms,f.warn("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update."));var n=l.isEnvironment(l.ENVIRONMENTS.CANVAS)||l.isEnvironment(l.ENVIRONMENTS.PAGETAB);p(o({method:"permissions.oauth",display:n?"async":"popup",domain:location.hostname},t||{}),e)},logout:function(e){p({method:"auth.logout",display:"hidden"},e)}}),i.subscribe("logout",c(u.fire,"bind",!0,u,"auth.logout")),i.subscribe("login",c(u.fire,"bind",!0,u,"auth.login")),i.subscribe("authresponse.change",c(u.fire,"bind",!0,u,"auth.authResponseChange")),i.subscribe("status.change",c(u.fire,"bind",!0,u,"auth.statusChange")),u.subscribe("init:post",function(e){e.status&&i.getLoginStatus();if(l.getClientID())if(e.authResponse)i.setAuthResponse(e.authResponse,"connected");else if(l.getUseCookie()){var t=s.loadSignedRequest(),n;if(t){try{n=h.parse(t)}catch(r){s.clearSignedRequestCookie()}n&&n.user_id&&l.setCookieUserID(n.user_id)}s.loadMeta()}})},3),l("sdk.Canvas.Plugin",["sdk.api","sdk.RPC","Log","UserAgent","sdk.Runtime","createArrayFrom"],function(t,n,i,s,o,u){function b(e){e._hideunity_savedstyle={},e._hideunity_savedstyle.left=e.style.left,e._hideunity_savedstyle.position=e.style.position,e._hideunity_savedstyle.width=e.style.width,e._hideunity_savedstyle.height=e.style.height,e.style.left="-10000px",e.style.position="absolute",e.style.width="1px",e.style.height="1px"}function w(e){e._hideunity_savedstyle&&(e.style.left=e._hideunity_savedstyle.left,e.style.position=e._hideunity_savedstyle.position,e.style.width=e._hideunity_savedstyle.width,e.style.height=e._hideunity_savedstyle.height)}function E(e){e._old_visibility=e.style.visibility,e.style.visibility="hidden"}function S(e){e.style.visibility=e._old_visibility||"",delete e._old_visibility}function x(e){var t=e.type?e.type.toLowerCase():null,n=t==="application/x-shockwave-flash"||e.classid&&e.classid.toUpperCase()==v;if(!n)return!1;var r=/opaque|transparent/i;if(r.test(e.getAttribute("wmode")))return!1;for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];if(/param/i.test(s.nodeName)&&/wmode/i.test(s.name)&&r.test(s.value))return!1}return!0}function T(e){var t=e.type?e.type.toLowerCase():null;return t==="application/vnd.unity"||e.classid&&e.classid.toUpperCase()==m}function N(t){var n=d(e.document.getElementsByTagName("object"));n=n.concat(d(e.document.getElementsByTagName("embed")));var i=!1,s=!1;c(n,"forEach",!0,function(e){var n=x(e),o=y&&T(e);if(!n&&!o)return;i=i||n,s=s||o;var u=function(){t.state==="opened"?n?E(e):b(e):n?S(e):w(e)};if(g){l.info("Calling developer specified callback");var a={state:t.state,elem:e};g(a),r(u,200)}else u()});if(Math.random()<=.001){var o={unity:s,flash:i};a(p.getClientID()+"/occludespopups","post",o)}}function C(){E(),b()}function k(){S(),w()}var a=n("sdk.api"),f=n("sdk.RPC"),l=n("Log"),h=n("UserAgent"),p=n("sdk.Runtime"),d=n("createArrayFrom"),v="CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",m="CLSID:444785F1-DE89-4295-863A-D46C3A781394",g=null,y=!(h.osx()>=10.9&&(h.chrome()>=31||h.webkit()>=537.71||h.firefox()>=25));f.local.hidePluginObjects=function(){l.info("hidePluginObjects called"),N({state:"opened"})},f.local.showPluginObjects=function(){l.info("showPluginObjects called"),N({state:"closed"})},f.local.showFlashObjects=f.local.showPluginObjects,f.local.hideFlashObjects=f.local.hidePluginObjects;var L={_setHidePluginCallback:function(e){g=e},hidePluginElement:C,showPluginElement:k};o.exports=L}),l("sdk.Canvas.IframeHandling",["DOMWrapper","sdk.RPC"],function(t,n,r,s,o,u){function h(){var e=a.getWindow().document,t=e.body,n=e.documentElement,r=Math.max(t.offsetTop,0),i=Math.max(n.offsetTop,0),s=t.scrollHeight+r,o=t.offsetHeight+r,u=n.scrollHeight+i,f=n.offsetHeight+i;return Math.max(s,o,u,f)}function p(t){typeof t!="object"&&(t={});var n=0,r=0;t.height||(t.height=h(),n=16,r=4),t.frame||(t.frame=e.name||"iframe_canvas");if(c){var i=c.height,s=t.height-i;if(s<=r&&s>=-n)return!1}return c=t,f.remote.setSize(t),!0}function d(e,t){t===undefined&&typeof e=="number"&&(t=e,e=!0),e||e===undefined?(l===null&&(l=i(function(){p()},t||100)),p()):l!==null&&(clearInterval(l),l=null)}var a=n("DOMWrapper"),f=n("sdk.RPC"),l=null,c;f.stub("setSize");var v={setSize:p,setAutoGrow:d};o.exports=v}),l("sdk.Canvas.Navigation",["sdk.RPC"],function(e,t,n,r,i,s){function u(e){o.local.navigate=function(t){e({path:t})},o.remote.setNavigationEnabled(!0)}var o=t("sdk.RPC");o.stub("setNavigationEnabled");var a={setUrlHandler:u};i.exports=a}),l("sdk.Canvas.Tti",["sdk.RPC","sdk.Runtime"],function(e,t,n,r,i,s){function a(e,t){var n={appId:u.getClientID(),time:c("Date","now",!1),name:t},r=[n];e&&r.push(function(t){e(t.result)}),o.remote.logTtiMessage.apply(null,r)}function f(){a(null,"StartIframeAppTtiTimer")}function l(e){a(e,"StopIframeAppTtiTimer")}function h(e){a(e,"RecordIframeAppTti")}var o=t("sdk.RPC"),u=t("sdk.Runtime");o.stub("logTtiMessage");var p={setDoneLoading:h,startTimer:f,stopTimer:l};i.exports=p}),l("legacy:fb.canvas",["Assert","sdk.Canvas.Environment","sdk.Event","FB","sdk.Canvas.Plugin","sdk.Canvas.IframeHandling","Log","sdk.Canvas.Navigation","sdk.Runtime","sdk.Canvas.Tti"],function(e,t,n,r){var i=t("Assert"),s=t("sdk.Canvas.Environment"),o=t("sdk.Event"),u=t("FB"),a=t("sdk.Canvas.Plugin"),f=t("sdk.Canvas.IframeHandling"),l=t("Log"),c=t("sdk.Canvas.Navigation"),h=t("sdk.Runtime"),p=t("sdk.Canvas.Tti");u.provide("Canvas",{setSize:function(e){return i.maybeObject(e,"Invalid argument"),f.setSize.apply(null,arguments)},setAutoGrow:function(){return f.setAutoGrow.apply(null,arguments)},getPageInfo:function(e){return i.isFunction(e,"Invalid argument"),s.getPageInfo.apply(null,arguments)},scrollTo:function(e,t){return i.maybeNumber(e,"Invalid argument"),i.maybeNumber(t,"Invalid argument"),s.scrollTo.apply(null,arguments)},setDoneLoading:function(e){return i.maybeFunction(e,"Invalid argument"),p.setDoneLoading.apply(null,arguments)},startTimer:function(){return p.startTimer.apply(null,arguments)},stopTimer:function(e){return i.maybeFunction(e,"Invalid argument"),p.stopTimer.apply(null,arguments)},getHash:function(e){return i.isFunction(e,"Invalid argument"),c.getHash.apply(null,arguments)},setHash:function(e){return i.isString(e,"Invalid argument"),c.setHash.apply(null,arguments)},setUrlHandler:function(e){return i.isFunction(e,"Invalid argument"),c.setUrlHandler.apply(null,arguments)}}),u.provide("CanvasInsights",{setDoneLoading:function(e){return l.warn("Deprecated: use FB.Canvas.setDoneLoading"),i.maybeFunction(e,"Invalid argument"),p.setDoneLoading.apply(null,arguments)}}),o.subscribe("init:post",function(e){h.isEnvironment(h.ENVIRONMENTS.CANVAS)&&(i.isTrue(!e.hideFlashCallback||!e.hidePluginCallback,"cannot specify deprecated hideFlashCallback and new hidePluginCallback"),a._setHidePluginCallback(e.hidePluginCallback||e.hideFlashCallback))})},3),l("sdk.Canvas.Prefetcher",["sdk.api","createArrayFrom","sdk.Runtime","CanvasPrefetcherConfig"],function(e,t,i,s,o,u){function y(){var e={object:"data",link:"href",script:"src"};m==p.AUTOMATIC&&c(c("Object","keys",!1,e),"forEach",!0,function(t){var r=e[t];c(f(n.getElementsByTagName(t)),"forEach",!0,function(e){e[r]&&g.push(e[r])})});if(g.length===0)return;a(h.getClientID()+"/staticresources","post",{urls:c("JSON","stringify",!1,g),is_https:location.protocol==="https:"}),g=[]}function b(){if(!h.isEnvironment(h.ENVIRONMENTS.CANVAS)||!h.getClientID()||!d)return;if(Math.random()>1/d||v=="*"||~c(v,"indexOf",!0,h.getClientID()))return;r(y,3e4)}function w(e){m=e}function E(e){g.push(e)}var a=t("sdk.api"),f=t("createArrayFrom"),l=i("CanvasPrefetcherConfig"),h=t("sdk.Runtime"),p={AUTOMATIC:0,MANUAL:1},d=l.sampleRate,v=l.blacklist,m=p.AUTOMATIC,g=[],S={COLLECT_AUTOMATIC:p.AUTOMATIC,COLLECT_MANUAL:p.MANUAL,addStaticResource:E,setCollectionMode:w,_maybeSample:b};o.exports=S}),l("legacy:fb.canvas.prefetcher",["FB","sdk.Canvas.Prefetcher","sdk.Event","sdk.Runtime"],function(e,t,n,r){var i=t("FB"),s=t("sdk.Canvas.Prefetcher"),o=t("sdk.Event"),u=t("sdk.Runtime");i.provide("Canvas.Prefetcher",s),o.subscribe("init:post",function(e){u.isEnvironment(u.ENVIRONMENTS.CANVAS)&&s._maybeSample()})},3),l("legacy:fb.compat.ui",["copyProperties","FB","Log","sdk.ui","sdk.UIServer"],function(e,t,n,r){var i=t("copyProperties"),s=t("FB"),o=t("Log"),u=t("sdk.ui"),a=t("sdk.UIServer");s.provide("",{share:function(e){o.error("share() has been deprecated. Please use FB.ui() instead."),u({display:"popup",method:"stream.share",u:e})},publish:function(e,t){o.error("publish() has been deprecated. Please use FB.ui() instead."),e=e||{},u(i({display:"popup",method:"stream.publish",preview:1},e||{}),t)},addFriend:function(e,t){o.error("addFriend() has been deprecated. Please use FB.ui() instead."),u({display:"popup",id:e,method:"friend.add"},t)}}),a.Methods["auth.login"]=a.Methods["permissions.request"]},3),l("mergeArrays",[],function(e,t,n,r,i,s){function o(e,t){for(var n=0;n<t.length;n++)c(e,"indexOf",!0,t[n])<0&&e.push(t[n]);return e}i.exports=o}),l("format",[],function(e,t,n,r,i,s){function o(e,t){return t=Array.prototype.slice.call(arguments,1),e.replace(/\{(\d+)\}/g,function(e,n){var r=t[Number(n)];return r===null||r===undefined?"":r.toString()})}i.exports=o}),l("safeEval",[],function(t,n,r,i,s,o){function u(t,n){if(t===null||typeof t=="undefined")return;return typeof t!="string"?t:/^\w+$/.test(t)&&typeof e[t]=="function"?e[t].apply(null,n||[]):Function('return eval("'+t.replace(/"/g,'\\"')+'");').apply(null,n||[])}s.exports=u}),l("sdk.Waitable",["sdk.Model"],function(e,t,n,r,i,s){var o=t("sdk.Model"),u=o.extend({constructor:function(){this.parent({Value:undefined})},error:function(e){this.inform("error",e)},wait:function(e,t){t&&this.subscribe("error",t),this.monitor("Value.change",c(function(){var t=this.getValue();if(t!==undefined)return this.value=t,e(t),!0},"bind",!0,this))}});i.exports=u}),l("sdk.Query",["format","safeEval","Type","sdk.Waitable"],function(e,t,n,r,i,s){function l(e){return c(e.split(","),"map",!0,function(e){return c(e,"trim",!0)})}function h(e){var t=/^\s*(\w+)\s*=\s*(.*)\s*$/i.exec(e),n,r,i="unknown";return t&&(r=t[2],/^(["'])(?:\\?.)*?\1$/.test(r)?(r=u(r),i="index"):/^\d+\.?\d*$/.test(r)&&(i="index")),i=="index"?n={type:"index",key:t[1],value:r}:n={type:"unknown",value:e},n}function p(e){return typeof e=="string"?c("JSON","stringify",!1,e):e}var o=t("format"),u=t("safeEval"),a=t("Type"),f=t("sdk.Waitable"),d=1,v=f.extend({constructor:function(){this.parent(),this.name="v_"+d++},hasDependency:function(e){return arguments.length&&(this._hasDependency=e),!!this._hasDependency},parse:function(e){var t=o.apply(null,e),n=/^select (.*?) from (\w+)\s+where (.*)$/i.exec(t);this.fields=l(n[1]),this.table=n[2],this.where=h(n[3]);for(var r=1;r<e.length;r++)a.instanceOf(v,e[r])&&e[r].hasDependency(!0);return this},toFql:function(){var e="select "+this.fields.join(",")+" from "+this.table+" where ";switch(this.where.type){case"unknown":e+=this.where.value;break;case"index":e+=this.where.key+"="+p(this.where.value);break;case"in":this.where.value.length==1?e+=this.where.key+"="+p(this.where.value[0]):e+=this.where.key+" in ("+c(this.where.value,"map",!0,p).join(",")+")"}return e},toString:function(){return"#"+this.name}});i.exports=v}),l("sdk.Data",["sdk.api","sdk.ErrorHandling","mergeArrays","sdk.Query","safeEval","sdk.Waitable"],function(e,t,n,i,s,o){var u=t("sdk.api"),a=t("sdk.ErrorHandling"),f=t("mergeArrays"),l=t("sdk.Query"),h=t("safeEval"),p=t("sdk.Waitable"),d={query:function(e,t){var n=(new l).parse(Array.prototype.slice.call(arguments));return d.queue.push(n),d._waitToProcess(),n},waitOn:function(e,t){var n=new p,r=e.length;if(typeof t=="string"){var i=t;t=a.unguard(function(){return h(i)})}return c(e,"forEach",!0,function(i){i.monitor("Value.change",function(){var s=!1;d._getValue(i)!==undefined&&(i.value=i.getValue(),r--,s=!0);if(r===0){var o=t(c(e,"map",!0,d._getValue));n.setValue(o!==undefined?o:!0)}return s})}),n},process:function(e){d._process(e)},_getValue:function(e){return e instanceof p?e.getValue():e},_selectByIndex:function(e,t,n,r){var i=new l;return i.fields=e,i.table=t,i.where={type:"index",key:n,value:r},d.queue.push(i),d._waitToProcess(),i},_waitToProcess:function(){d.timer<0&&(d.timer=r(function(){d._process()},10))},_process:function(e){d.timer=-1;var t={},n=d.queue;if(!n.length)return;d.queue=[];for(var r=0;r<n.length;r++){var i=n[r];i.where.type=="index"&&!i.hasDependency()?d._mergeIndexQuery(i,t):t[i.name]=i}var s={q:{}};for(var o in t)t.hasOwnProperty(o)&&(s.q[o]=t[o].toFql());e&&(s.access_token=e),u("/fql","GET",s,function(e){e.error?c(c("Object","keys",!1,t),"forEach",!0,function(n){t[n].error(new Error(e.error.message))}):c(e.data,"forEach",!0,function(e){t[e.name].setValue(e.fql_result_set)})})},_mergeIndexQuery:function(e,t){var n=e.where.key,r=e.where.value,i="index_"+e.table+"_"+n,s=t[i];s||(s=t[i]=new l,s.fields=[n],s.table=e.table,s.where={type:"in",key:n,value:[]}),f(s.fields,e.fields),f(s.where.value,[r]),s.wait(function(t){e.setValue(c(t,"filter",!0,function(e){return e[n]==r}))})},timer:-1,queue:[]};s.exports=d}),l("legacy:fb.data",["FB","sdk.Data"],function(e,t,n,r){var i=t("FB"),s=t("sdk.Data");i.provide("Data",s)},3),l("legacy:fb.event",["FB","sdk.Event"],function(e,t,n,r){var i=t("FB"),s=t("sdk.Event");i.provide("Event",s),i.provide("EventProvider",s)},3),l("legacy:fb.frictionless",["FB","sdk.Frictionless"],function(e,t,n,r){var i=t("FB"),s=t("sdk.Frictionless");i.provide("Frictionless",s)},3),l("sdk.init",["sdk.Cookie","copyProperties","createArrayFrom","sdk.ErrorHandling","sdk.Event","Log","QueryString","sdk.Runtime"],function(t,i,s,o,u,a){function y(e){var t=typeof e=="number"&&e>0||typeof e=="string"&&/^[0-9a-f]{21,}$|^[0-9]{1,21}$/.test(e);return t?e.toString():(v.warn("Invalid App Id: Must be a number or numeric string representing the application id."),null)}function b(e){g.getInitialized()&&v.warn("FB.init has already been called - this could indicate a problem"),/number|string/.test(typeof e)&&(v.warn("FB.init called with invalid parameters"),e={apiKey:e}),e=l({logging:!0,status:!0},e||{});var t=y(e.appId||e.apiKey);t!==null&&g.setClientID(t),"scope"in e&&g.setScope(e.scope),e.cookie&&(g.setUseCookie(!0),typeof e.cookie=="string"&&f.setDomain(e.cookie)),e.kidDirectedSite&&g.setKidDirectedSite(!0),g.setInitialized(!0),d.fire("init:post",e)}var f=i("sdk.Cookie"),l=i("copyProperties"),h=i("createArrayFrom"),p=i("sdk.ErrorHandling"),d=i("sdk.Event"),v=i("Log"),m=i("QueryString"),g=i("sdk.Runtime");r(function(){var t=/(connect\.facebook\.net|\.facebook\.com\/assets.php).*?#(.*)/;c(h(n.getElementsByTagName("script")),"forEach",!0,function(e){if(e.src){var n=t.exec(e.src);if(n){var r=m.decode(n[2]);for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s=="0"&&(r[i]=0)}b(r)}}}),e.fbAsyncInit&&!e.fbAsyncInit.hasRun&&(e.fbAsyncInit.hasRun=!0,p.unguard(e.fbAsyncInit)())},0),u.exports=b}),l("legacy:fb.init",["FB","sdk.init"],function(e,t,n,r){var i=t("FB"),s=t("sdk.init");i.provide("",{init:s})},3),l("legacy:fb.json",["FB","ManagedError"],function(e,t,n,r){var i=t("FB"),s=t("ManagedError");i.provide("JSON",{stringify:function(e){try{return c("JSON","stringify",!1,e)}catch(t){throw new s(t.message,t)}},parse:function(e){try{return c("JSON","parse",!1,e)}catch(t){throw new s(t.message,t)}}})},3),l("legacy:fb.pay",["FB","copyProperties","sdk.Runtime","sdk.UIServer","sdk.XD"],function(t,n,r,i){n("FB");var s=n("copyProperties"),o=n("sdk.Runtime"),u=n("sdk.UIServer"),a=n("sdk.XD"),f={error_code:1383001,error_message:"An unknown error caused the dialog to be closed"},l=function(e){return function(t){e(t&&t.response?c("JSON","parse",!1,t.response):f)}};s(u.Methods,{"pay.prompt":{transform:function(t){var n=a.handler(l(t.cb),"parent.frames["+(e.name||"iframe_canvas")+"]");t.params.channel=n,a.inform("Pay.Prompt",t.params)}},pay:{size:{width:555,height:120},connectDisplay:"popup",transform:function(t){t.cb=l(t.cb);if(!o.isEnvironment(o.ENVIRONMENTS.CANVAS))return t.params.order_info=c("JSON","stringify",!1,t.params.order_info),t;var n=a.handler(t.cb,"parent.frames["+(e.name||"iframe_canvas")+"]");t.params.channel=n,t.params.uiserver=!0,a.inform("Pay.Prompt",t.params)}}})},3),l("legacy:fb.ua",["FB","UserAgent"],function(e,t,n,r){var i=t("FB"),s=t("UserAgent");i.provide("UA",{nativeApp:s.nativeApp})},3),l("legacy:fb.ui",["FB","sdk.ui"],function(e,t,n,r){var i=t("FB"),s=t("sdk.ui");i.provide("",{ui:s})},3),l("Miny",[],function(e,t,n,r,i,s){function f(e){for(var t=u.encode.length;t<e;t++){var n=t.toString(32).split("");n[n.length-1]=a[parseInt(n[n.length-1],32)],n=n.join(""),u.encode[t]=n,u.decode[n]=t}return u}function l(e){var t=e.match(/\w+|\W+/g),n={};for(var r=0;r<t.length;r++)n[t[r]]=(n[t[r]]||0)+1;var i=c("Object","keys",!1,n);i.sort(function(e,t){return n[e]<n[t]?1:n[t]<n[e]?-1:0});var s=f(i.length).encode;for(r=0;r<i.length;r++)n[i[r]]=s[r];var u=[];for(r=0;r<t.length;r++)u[r]=n[t[r]];for(r=0;r<i.length;r++)i[r]=i[r].replace(/'~'/g,"\\~");return[o,i.length].concat(i).concat(u.join("")).join("~")}function h(e){var t=e.split("~");if(t.shift()!=o)throw new Error("Not a Miny stream");var n=parseInt(t.shift(),10),r=t.pop();r=r.match(/[0-9a-v]*[\-w-zA-Z_]/g);var i=t,s=f(n).decode,u=[];for(var a=0;a<r.length;a++)u[a]=i[s[r[a]]];return u.join("")}var o="Miny1",u={encode:[],decode:{}},a="wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split(""),p={encode:l,decode:h};i.exports=p}),l("runOnce",[],function(e,t,n,r,i,s){function o(e){var t,n;return function(){return t||(t=!0,n=e()),n}}i.exports=o}),l("XFBML",["Assert","copyProperties","createArrayFrom","sdk.DOM","sdk.feature","sdk.Impressions","Log","ObservableMixin","runOnce","UserAgent"],function(e,t,i,s,o,u){function x(e,t){return e[t]+""}function T(e){return e.scopeName?e.scopeName+":"+e.nodeName:""}function N(e){return b[x(e,"nodeName").toLowerCase()]||b[T(e).toLowerCase()]}function C(e){var t=c(c(x(e,"className"),"trim",!0).split(/\s+/),"filter",!0,function(e){return w.hasOwnProperty(e)});if(t.length===0)return undefined;if(e.getAttribute("fb-xfbml-state")||!e.childNodes||e.childNodes.length===0||e.childNodes.length===1&&e.childNodes[0].nodeType===3||e.children.length===1&&x(e.children[0],"className")==="fb-xfbml-parse-ignore")return w[t[0]]}function k(e){var t={};return c(l(e.attributes),"forEach",!0,function(e){t[x(e,"name")]=x(e,"value")}),t}function L(e,t,r){var i=n.createElement("div");return h.addCss(e,t+"-"+r),c(l(e.childNodes),"forEach",!0,function(e){i.appendChild(e)}),c(l(e.attributes),"forEach",!0,function(e){i.setAttribute(e.name,e.value)}),e.parentNode.replaceChild(i,e),i}function A(e,t,n){a.isTrue(e&&e.nodeType&&e.nodeType===1&&!!e.getElementsByTagName,"Invalid DOM node passed to FB.XFBML.parse()"),a.isFunction(t,"Invalid callback passed to FB.XFBML.parse()");var i=++E;v.info("XFBML Parsing Start %s",i);var s=1,o=0,u=function(){s--,s===0&&(v.info("XFBML Parsing Finish %s, %s tags found",i,o),t(),S.inform("render",i,o)),a.isTrue(s>=0,"onrender() has been called too many times")};c(l(e.getElementsByTagName("*")),"forEach",!0,function(e){if(!n&&e.getAttribute("fb-xfbml-state"))return;if(e.nodeType!==1)return;var t=N(e)||C(e);if(!t)return;y.ie()<9&&e.scopeName&&(e=L(e,t.xmlns,t.localName)),s++,o++;var r=new t.ctor(e,t.xmlns,t.localName,k(e));r.subscribe("render",g(function(){e.setAttribute("fb-xfbml-state","rendered"),u()}));var i=function(){e.getAttribute("fb-xfbml-state")=="parsed"?S.subscribe("render.queue",i):(e.setAttribute("fb-xfbml-state","parsed"),r.process())};i()}),S.inform("parse",i,o);var f=3e4;r(function(){s>0&&v.warn("%s tags failed to render in %s ms",s,f)},f),u()}var a=t("Assert"),f=t("copyProperties"),l=t("createArrayFrom"),h=t("sdk.DOM"),p=t("sdk.feature"),d=t("sdk.Impressions"),v=t("Log"),m=t("ObservableMixin"),g=t("runOnce"),y=t("UserAgent"),b={},w={},E=0,S=new m;S.subscribe("render",function(){var e=S.getSubscribers("render.queue");S.clearSubscribers("render.queue"),c(e,"forEach",!0,function(e){e()})}),f(S,{registerTag:function(e){var t=e.xmlns+":"+e.localName;a.isUndefined(b[t],t+" already registered"),b[t]=e,w[e.xmlns+"-"+e.localName]=e},parse:function(e,t){A(e||n.body,t||function(){},!0)},parseNew:function(){A(n.body,function(){},!1)}});if(p("log_tag_count")){var O=function(e,t){S.unsubscribe("parse",O),r(c(d.log,"bind",!0,null,102,{tag_count:t}),5e3)};S.subscribe("parse",O)}o.exports=S}),l("PluginPipe",["sdk.Content","copyProperties","sdk.feature","guid","insertIframe","Miny","ObservableMixin","sdk.Runtime","UrlMap","UserAgent","XFBML","PluginPipeConfig"],function(e,t,r,i,s,o){function x(){return!(!f("plugin_pipe")||m.getSecure()===undefined||!y.chrome()&&!y.firefox()||!v.enabledApps[m.getClientID()])}function T(){function n(){t--,t===0&&N(e)}var e=S;S=[];if(e.length<=E){c(e,"forEach",!0,function(e){h(e.config)});return}var t=e.length+1;c(e,"forEach",!0,function(e){var t={};for(var r in e.config)t[r]=e.config[r];t.url=g.resolve("www",m.getSecure())+"/plugins/plugin_pipe_shell.php",t.onload=n,h(t)}),n()}function N(e){var t=n.createElement("span");u.appendHidden(t);var r={};c(e,"forEach",!0,function(e){r[e.config.name]={plugin:e.tag,params:e.params}});var i=c("JSON","stringify",!1,r),s=p.encode(i);c(e,"forEach",!0,function(e){var t=n.getElementsByName(e.config.name)[0];t.onload=e.config.onload});var o=g.resolve("www",m.getSecure())+"/plugins/pipe.php",a=l();h({url:"about:blank",root:t,name:a,className:"fb_hidden fb_invisible",onload:function(){u.submitToTarget({url:o,target:a,params:{plugins:s.length<i.length?s:i}})}})}var u=t("sdk.Content"),a=t("copyProperties"),f=t("sdk.feature"),l=t("guid"),h=t("insertIframe"),p=t("Miny"),d=t("ObservableMixin"),v=r("PluginPipeConfig"),m=t("sdk.Runtime"),g=t("UrlMap"),y=t("UserAgent"),b=t("XFBML"),w=new d,E=v.threshold,S=[];b.subscribe("parse",T),a(w,{add:function(e){var t=x();return t&&S.push({config:e._config,tag:e._tag,params:e._params}),t}}),s.exports=w}),l("IframePlugin",["sdk.Auth","sdk.createIframe","copyProperties","sdk.DOM","sdk.Event","guid","Log","ObservableMixin","PluginPipe","QueryString","resolveURI","sdk.Runtime","Type","UrlMap","UserAgent","sdk.XD"],function(t,i,s,o,u,a){function k(e,t,n){if(t||t===0)e.style.width=t+"px";if(n||n===0)e.style.height=n+"px"}function L(e){return function(t){var n={width:t.width,height:t.height,pluginID:e};d.fire("xfbml.resize",n)}}function O(e,t){var n=e[t]||e[t.replace(/_/g,"-")]||e[t.replace(/_/g,"")]||e["data-"+t]||e["data-"+t.replace(/_/g,"-")]||e["data-"+t.replace(/_/g,"")]||undefined;return n}function M(e,t,n,r){c(c("Object","keys",!1,e),"forEach",!0,function(i){e[i]=="text"&&!n[i]&&(n[i]=t.textContent||t.innerText||"",t.setAttribute(i,n[i])),r[i]=A[e[i]](O(n,i))})}function _(e){return e||e==="0"||e===0?parseInt(e,10):undefined}var f=i("sdk.Auth"),l=i("sdk.createIframe"),h=i("copyProperties"),p=i("sdk.DOM"),d=i("sdk.Event"),v=i("guid"),m=i("Log"),g=i("ObservableMixin"),y=i("PluginPipe"),b=i("QueryString"),w=i("resolveURI"),E=i("sdk.Runtime"),S=i("Type"),x=i("UrlMap"),T=i("UserAgent"),N=i("sdk.XD"),C={skin:"string",font:"string",width:"px",height:"px",ref:"string",color_scheme:"string"},A={string:function(e){return e},bool:function(e){return e?/^(?:true|1|yes|on)$/i.test(e):undefined},url:function(e){return w(e)},url_maybe:function(e){return e?w(e):e},hostname:function(t){return t||e.location.hostname},px:function(e){return/^(\d+)(?:px)?$/.test(e)?parseInt(RegExp.$1,10):undefined},text:function(e){return e}},D=S.extend({constructor:function(t,r,i,s){this.parent(),i=i.replace(/-/g,"_");var o=O(s,"plugin_id");this.subscribe("xd.resize",L(o)),this.subscribe("xd.resize.flow",L(o)),this.subscribe("xd.resize.flow",c(function(e){this._config.root.style.verticalAlign="bottom",k(this._config.root,_(e.width),_(e.height)),this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize",c(function(e){this._config.root.style.verticalAlign="bottom",k(this._config.root,_(e.width),_(e.height)),k(this._iframe,_(e.width),_(e.height)),this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize.iframe",c(function(e){k(this._iframe,_(e.width),_(e.height)),this.updateLift(),clearTimeout(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.sdk_event",function(e){var n=c("JSON","parse",!1,e.data);n.pluginID=o,d.fire(e.event,n,t)});var u=E.getSecure()||e.location.protocol=="https:",a=x.resolve("www",u)+"/plugins/"+i+".php?",l={};M(this.getParams(),t,s,l),M(C,t,s,l),l.app_id=E.getClientID(),l.locale=E.getLocale(),l.sdk="joey",l.kid_directed_site=E.getKidDirectedSite();var h=c(function(e){this.inform("xd."+e.type,e)},"bind",!0,this);l.channel=N.handler(h,"parent.parent",!0),p.addCss(t,"fb_iframe_widget");var m=v();this.subscribe("xd.verify",function(e){N.sendToFacebook(m,{method:"xd/verify",params:c("JSON","stringify",!1,e.token)})}),this.subscribe("xd.refreshLoginStatus",c(f.getLoginStatus,"bind",!0,f,c(this.inform,"bind",!0,this,"login.status"),!0));var g=n.createElement("span");g.style.verticalAlign="top",g.style.width="0px",g.style.height="0px",this._element=t,this._ns=r,this._tag=i,this._params=l,this._config={root:g,url:a+b.encode(l),name:m,width:T.mobile()?undefined:l.width||1e3,height:l.height||1e3,style:{border:"none",visibility:"hidden"},title:this._ns+":"+this._tag+" Facebook Social Plugin",onload:c(function(){this.inform("render")},"bind",!0,this)}},process:function(){var e=h({},this._params);delete e.channel;var t=b.encode(e);if(this._element.getAttribute("fb-iframe-plugin-query")==t){m.info("Skipping render: %s:%s %s",this._ns,this._tag,t),this.inform("render");return}this._element.setAttribute("fb-iframe-plugin-query",t),this.subscribe("render",function(){this._iframe.style.visibility="visible"});while(this._element.firstChild)this._element.removeChild(this._element.firstChild);this._element.appendChild(this._config.root);var n=T.mobile()?120:45;this._timeoutID=r(c(function(){this._iframe&&k(this._iframe,0,0),m.warn("%s:%s failed to resize in %ss",this._ns,this._tag,n)},"bind",!0,this),n*1e3),y.add(this)||(this._iframe=l(this._config)),T.mobile()&&(p.addCss(this._element,"fb_iframe_widget_fluid"),this._element.style.display="block",this._element.style.width="100%",this._element.style.height="auto",this._config.root.style.width="100%",this._config.root.style.height="auto",this._iframe.style.width="100%",this._iframe.style.height="auto",this._iframe.style.position="static")},updateLift:function(){var e=this._iframe.style.width===this._config.root.style.width&&this._iframe.style.height===this._config.root.style.height;p[e?"removeCss":"addCss"](this._iframe,"fb_iframe_widget_lift")}},g);D.getVal=O,D.withParams=function(e){return D.extend({getParams:function(){return e}})},u.exports=D}),l("PluginTags",[],function(e,t,n,r,i,s){var o={activity:{filter:"string",action:"string",max_age:"string",linktarget:"string",header:"bool",recommendations:"bool",site:"hostname"},composer:{action_type:"string",action_properties:"string"},create_event_button:{},degrees:{href:"url"},facepile:{href:"string",action:"string",size:"string",max_rows:"string",show_count:"bool"},follow:{href:"url",layout:"string",show_faces:"bool"},like:{href:"url",layout:"string",show_faces:"bool",share:"bool",action:"string",send:"bool"},like_box:{href:"string",show_faces:"bool",header:"bool",stream:"bool",force_wall:"bool",show_border:"bool",id:"string",connections:"string",profile_id:"string",name:"string"},open_graph:{href:"url",layout:"string",show_faces:"bool",action_type:"string",action_properties:"string"},open_graph_preview:{action_type:"string",action_properties:"string"},page_events:{href:"url"},post:{href:"url",show_border:"bool"},privacy_selector:{},profile_pic:{uid:"string",linked:"bool",href:"string",size:"string",facebook_logo:"bool"},recommendations:{filter:"string",action:"string",max_age:"string",linktarget:"string",header:"bool",site:"hostname"},share_button:{href:"url",type:"string"},shared_activity:{header:"bool"},send:{href:"url"},send_to_mobile:{max_rows:"string",show_faces:"bool",size:"string"},story:{href:"url",show_border:"bool"},topic:{topic_name:"string",topic_id:"string"},want:{href:"url",layout:"string",show_faces:"bool"}},u={subscribe:"follow",fan:"like_box",likebox:"like_box",friendpile:"facepile"};c(c("Object","keys",!1,u),"forEach",!0,function(e){o[e]=o[u[e]]}),i.exports=o}),l("sdk.Arbiter",[],function(e,t,n,r,i,s){var o={BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s"};i.exports=o}),l("sdk.XFBML.Element",["sdk.DOM","Type","ObservableMixin"],function(e,t,r,i,s,o){var u=t("sdk.DOM"),a=t("Type"),f=t("ObservableMixin"),l=a.extend({constructor:function(e){this.parent(),this.dom=e},fire:function(){this.inform.apply(this,arguments)},getAttribute:function(e,t,n){var r=u.getAttr(this.dom,e);return r?n?n(r):r:t},_getBoolAttribute:function(e,t){var n=u.getBoolAttr(this.dom,e);return n===null?t:n},_getPxAttribute:function(e,t){return this.getAttribute(e,t,function(e){var n=parseInt(e.replace("px",""),10);return isNaN(n)?t:n})},_getAttributeFromList:function(e,t,n){return this.getAttribute(e,t,function(e){return e=e.toLowerCase(),c(n,"indexOf",!0,e)>-1?e:t})},isValid:function(){for(var e=this.dom;e;e=e.parentNode)if(e==n.body)return!0},clear:function(){u.html(this.dom,"")}},f);s.exports=l}),l("sdk.XFBML.IframeWidget",["sdk.Arbiter","sdk.Auth","sdk.Content","copyProperties","sdk.DOM","sdk.Event","sdk.XFBML.Element","guid","insertIframe","QueryString","sdk.Runtime","sdk.ui","UrlMap","sdk.XD"],function(e,t,r,i,s,o){function N(){var e={};for(var t in T){var n=T[t];e[t]={widget:n.getUrlBits().name,params:n._getQS()}}return e}var u=t("sdk.Arbiter"),a=t("sdk.Auth"),f=t("sdk.Content"),l=t("copyProperties"),h=t("sdk.DOM"),p=t("sdk.Event"),d=t("sdk.XFBML.Element"),v=t("guid"),m=t("insertIframe"),g=t("QueryString"),y=t("sdk.Runtime"),b=t("sdk.ui"),w=t("UrlMap"),E=t("sdk.XD"),S=d.extend({_iframeName:null,_showLoader:!0,_refreshOnAuthChange:!1,_allowReProcess:!1,_fetchPreCachedLoader:!1,_visibleAfter:"load",_widgetPipeEnabled:!1,_borderReset:!1,_repositioned:!1,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return!0},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){return this._iframeName},getIframeTitle:function(){return"Facebook Social Plugin"},getChannelUrl:function(){if(!this._channelUrl){var e=this;this._channelUrl=E.handler(function(t){e.fire("xd."+t.type,t)},"parent.parent",!0)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(e,t,n){E.sendToFacebook(this.getIframeName(),{method:e,params:c("JSON","stringify",!1,t||{}),behavior:n||u.BEHAVIOR_PERSISTENT})},_arbiterInform:function(e,t,n){var r='parent.frames["'+this.getIframeNode().name+'"]';E.inform(e,t,r,n)},getDefaultWebDomain:function(){return w.resolve("www")},process:function(e){if(this._done){if(!this._allowReProcess&&!e)return;this.clear()}else this._oneTimeSetup();this._done=!0,this._iframeName=this.getIframeName()||this._iframeName||v();if(!this.setupAndValidate()){this.fire("render");return}this._showLoader&&this._addLoader(),h.addCss(this.dom,"fb_iframe_widget"),this._visibleAfter!="immediate"?h.addCss(this.dom,"fb_hide_iframes"):this.subscribe("iframe.onload",c(this.fire,"bind",!0,this,"render"));var t=this.getSize()||{},r=this.getFullyQualifiedURL();t.width=="100%"&&h.addCss(this.dom,"fb_iframe_widget_fluid"),this.clear(),m({url:r,root:this.dom.appendChild(n.createElement("span")),name:this._iframeName,title:this.getIframeTitle(),className:y.getRtl()?"fb_rtl":"fb_ltr",height:t.height,width:t.width,onload:c(this.fire,"bind",!0,this,"iframe.onload")}),this._resizeFlow(t),this.loaded=!1,this.subscribe("iframe.onload",c(function(){this.loaded=!0},"bind",!0,this))},generateWidgetPipeIframeName:function(){return x++,"fb_iframe_"+x},getFullyQualifiedURL:function(){var e=this._getURL();e+="?"+g.encode(this._getQS());if(e.length>2e3){e="about:blank";var t=c(function(){this._postRequest(),this.unsubscribe("iframe.onload",t)},"bind",!0,this);this.subscribe("iframe.onload",t)}return e},_getWidgetPipeShell:function(){return w.resolve("www")+"/common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",c(this._handleResizeMsg,"bind",!0,this)),this.subscribe("xd.resize",c(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.resize.iframe",c(this._resizeIframe,"bind",!0,this)),this.subscribe("xd.resize.flow",c(this._resizeFlow,"bind",!0,this)),this.subscribe("xd.resize.flow",c(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.refreshLoginStatus",function(){a.getLoginStatus(function(){},!0)}),this.subscribe("xd.logout",function(){b({method:"auth.logout",display:"hidden"},function(){})}),this._refreshOnAuthChange&&this._setupAuthRefresh(),this._visibleAfter=="load"&&this.subscribe("iframe.onload",c(this._makeVisible,"bind",!0,this)),this.subscribe("xd.verify",c(function(e){this.arbiterInform("xd/verify",e.token)},"bind",!0,this)),this.oneTimeSetup()},_makeVisible:function(){this._removeLoader(),h.removeCss(this.dom,"fb_hide_iframes"),this.fire("render")},_setupAuthRefresh:function(){a.getLoginStatus(c(function(e){var t=e.status;p.subscribe("auth.statusChange",c(function(e){if(!this.isValid())return;(t=="unknown"||e.status=="unknown")&&this.process(!0),t=e.status},"bind",!0,this))},"bind",!0,this))},_handleResizeMsg:function(e){if(!this.isValid())return;this._resizeIframe(e),this._resizeFlow(e),this._borderReset||(this.getIframeNode().style.border="none",this._borderReset=!0),this._makeVisible()},_bubbleResizeEvent:function(e){var t={height:e.height,width:e.width,pluginID:this.getAttribute("plugin-id")};p.fire("xfbml.resize",t)},_resizeIframe:function(e){var t=this.getIframeNode();e.reposition==="true"&&this._repositionIframe(e),e.height&&(t.style.height=e.height+"px"),e.width&&(t.style.width=e.width+"px"),this._updateIframeZIndex()},_resizeFlow:function(e){var t=this.dom.getElementsByTagName("span")[0];e.height&&(t.style.height=e.height+"px"),e.width&&(t.style.width=e.width+"px"),this._updateIframeZIndex()},_updateIframeZIndex:function(){var e=this.dom.getElementsByTagName("span")[0],t=this.getIframeNode(),n=t.style.height===e.style.height&&t.style.width===e.style.width,r=n?"removeCss":"addCss";h[r](t,"fb_iframe_widget_lift")},_repositionIframe:function(e){var t=this.getIframeNode(),n=parseInt(h.getStyle(t,"width"),10),r=h.getPosition(t).x,i=h.getViewportInfo().width,s=parseInt(e.width,10);r+s>i&&r>s?(t.style.left=n-s+"px",this.arbiterInform("xd/reposition",{type:"horizontal"}),this._repositioned=!0):this._repositioned&&(t.style.left="0px",this.arbiterInform("xd/reposition",{type:"restore"}),this._repositioned=!1)},_addLoader:function(){this._loaderDiv||(h.addCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv=n.createElement("div"),this._loaderDiv.className="FB_Loader",this.dom.appendChild(this._loaderDiv))},_removeLoader:function(){this._loaderDiv&&(h.removeCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv.parentNode&&this._loaderDiv.parentNode.removeChild(this._loaderDiv),this._loaderDiv=null)},_getQS:function(){return l({api_key:y.getClientID(),locale:y.getLocale(),sdk:"joey",kid_directed_site:y.getKidDirectedSite(),ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var e=this.getDefaultWebDomain(),t="";return e+"/plugins/"+t+this.getUrlBits().name+".php"},_postRequest:function(){f.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}}),x=0,T={};s.exports=S}),l("sdk.XFBML.Comments",["sdk.Event","sdk.XFBML.IframeWidget","QueryString","sdk.Runtime","UrlMap","UserAgent","SDKConfig"],function(t,r,i,s,o,u){var a=r("sdk.Event"),f=r("sdk.XFBML.IframeWidget"),l=r("QueryString"),h=r("sdk.Runtime"),p=i("SDKConfig"),d=r("UrlMap"),v=r("UserAgent"),m=f.extend({_visibleAfter:"immediate",_refreshOnAuthChange:!0,setupAndValidate:function(){var t={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),skin:this.getAttribute("skin"),numposts:this.getAttribute("num-posts",10),width:this._getPxAttribute("width",550),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed"),order_by:this.getAttribute("order_by"),mobile:this._getBoolAttribute("mobile")};p.initSitevars.enableMobileComments&&v.mobile()&&t.mobile!==!1&&(t.mobile=!0,delete t.width),t.skin||(t.skin=t.colorscheme);if(!t.href){t.migrated=this.getAttribute("migrated"),t.xid=this.getAttribute("xid"),t.title=this.getAttribute("title",n.title),t.url=this.getAttribute("url",n.URL),t.quiet=this.getAttribute("quiet"),t.reverse=this.getAttribute("reverse"),t.simple=this.getAttribute("simple"),t.css=this.getAttribute("css"),t.notify=this.getAttribute("notify");if(!t.xid){var r=c(n.URL,"indexOf",!0,"#");r>0?t.xid=encodeURIComponent(n.URL.substring(0,r)):t.xid=encodeURIComponent(n.URL)}t.migrated&&(t.href=d.resolve("www")+"/plugins/comments_v1.php?"+"app_id="+h.getClientID()+"&xid="+encodeURIComponent(t.xid)+"&url="+encodeURIComponent(t.url))}else{var i=this.getAttribute("fb_comment_id");i||(i=l.decode(n.URL.substring(c(n.URL,"indexOf",!0,"?")+1)).fb_comment_id,i&&c(i,"indexOf",!0,"#")>0&&(i=i.substring(0,c(i,"indexOf",!0,"#")))),i&&(t.fb_comment_id=i,this.subscribe("render",c(function(){e.location.hash||(e.location.hash=this.getIframeNode().id)},"bind",!0,this)))}return this._attr=t,!0},oneTimeSetup:function(){this.subscribe("xd.addComment",c(this._handleCommentMsg,"bind",!0,this)),this.subscribe("xd.commentCreated",c(this._handleCommentCreatedMsg,"bind",!0,this)),this.subscribe("xd.commentRemoved",c(this._handleCommentRemovedMsg,"bind",!0,this))},getSize:function(){return this._attr.mobile?{width:"100%",height:160}:{width:this._attr.width,height:160}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){return d.resolve(this._attr.mobile?"m":"www",!0)},_handleCommentMsg:function(e){if(!this.isValid())return;a.fire("comments.add",{post:e.post,user:e.user,widget:this})},_handleCommentCreatedMsg:function(e){if(!this.isValid())return;var t={href:e.href,commentID:e.commentID,parentCommentID:e.parentCommentID};a.fire("comment.create",t)},_handleCommentRemovedMsg:function(e){if(!this.isValid())return;var t={href:e.href,commentID:e.commentID};a.fire("comment.remove",t)}});o.exports=m}),l("sdk.XFBML.CommentsCount",["sdk.Data","sdk.DOM","sdk.XFBML.Element","sprintf"],function(t,n,r,i,s,o){var u=n("sdk.Data"),a=n("sdk.DOM"),f=n("sdk.XFBML.Element"),l=n("sprintf"),h=f.extend({process:function(){a.addCss(this.dom,"fb_comments_count_zero");var t=this.getAttribute("href",e.location.href);u._selectByIndex(["commentsbox_count"],"link_stat","url",t).wait(c(function(e){var t=e[0].commentsbox_count;a.html(this.dom,l('<span class="fb_comments_count">%s</span>',t)),t>0&&a.removeCss(this.dom,"fb_comments_count_zero"),this.fire("render")},"bind",!0,this))}});s.exports=h}),l("sdk.Anim",["sdk.DOM"],function(e,t,n,r,s,o){var u=t("sdk.DOM"),a={ate:function(e,t,n,r){n=!isNaN(parseFloat(n))&&n>=0?n:750;var s=40,o={},a={},f=null,l=i(c(function(){f||(f=c("Date","now",!1));var i=1;n!=0&&(i=Math.min((c("Date","now",!1)-f)/n,1));for(var s in t)if(t.hasOwnProperty(s)){var h=t[s];if(!o[s]){var d=u.getStyle(e,s);if(d===!1)return;o[s]=this._parseCSS(d+"")}a[s]||(a[s]=this._parseCSS(h.toString()));var v="";c(o[s],"forEach",!0,function(e,t){isNaN(a[s][t].numPart)&&a[s][t].textPart=="?"?v=e.numPart+e.textPart:isNaN(e.numPart)?v=e.textPart:v+=e.numPart+Math.ceil((a[s][t].numPart-e.numPart)*Math.sin(Math.PI/2*i))+a[s][t].textPart+" "}),u.setStyle(e,s,v)}i==1&&(clearInterval(l),r&&r(e))},"bind",!0,this),s)},_parseCSS:function(e){var t=[];return c(e.split(" "),"forEach",!0,function(e){var n=parseInt(e,10);t.push({numPart:n,textPart:e.replace(n,"")})}),t}};s.exports=a}),l("escapeHTML",[],function(e,t,n,r,i,s){function a(e){return e.replace(o,function(e){return u[e]})}var o=/[&<>"'\/]/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};i.exports=a}),l("sdk.Helper",["sdk.ErrorHandling","sdk.Event","UrlMap","safeEval","sprintf"],function(t,n,r,i,s,o){var u=n("sdk.ErrorHandling"),a=n("sdk.Event"),f=n("UrlMap"),l=n("safeEval"),c=n("sprintf"),h={isUser:function(e){return e<22e8||e>=1e14&&e<=0x5b0a58f100ef||e>=89e12&&e<=89999999999999},upperCaseFirstChar:function(e){return e.length>0?e.substr(0,1).toUpperCase()+e.substr(1):e},getProfileLink:function(e,t,n){return!n&&e&&(n=c("%s/profile.php?id=%s",f.resolve("www"),e.uid||e.id)),n&&(t=c('<a class="fb_link" href="%s">%s</a>',n,t)),t},invokeHandler:function(e,t,n){e&&(typeof e=="string"?u.unguard(l)(e,n):e.apply&&u.unguard(e).apply(t,n||[]))},fireEvent:function(e,t){var n=t._attr.href;t.fire(e,n),a.fire(e,n,t)},executeFunctionByName:function(t){var n=Array.prototype.slice.call(arguments,1),r=t.split("."),i=r.pop(),s=e;for(var o=0;o<r.length;o++)s=s[r[o]];return s[i].apply(this,n)}};s.exports=h}),l("sdk.XFBML.ConnectBar",["sdk.Anim","sdk.api","sdk.Auth","createArrayFrom","sdk.Data","sdk.DOM","sdk.XFBML.Element","escapeHTML","sdk.Event","format","sdk.Helper","sdk.Insights","sdk.Intl","sdk.Runtime","UrlMap","UserAgent","ConnectBarConfig"],function(t,r,i,s,o,u){var a=r("sdk.Anim"),f=r("sdk.api"),l=r("sdk.Auth"),h=r("createArrayFrom"),p=i("ConnectBarConfig"),d=r("sdk.Data"),v=r("sdk.DOM"),m=r("sdk.XFBML.Element"),g=r("escapeHTML"),y=r("sdk.Event"),b=r("format"),w=r("sdk.Helper"),E=r("sdk.Insights"),S=r("sdk.Intl"),x=r("sdk.Runtime"),T=r("UrlMap"),N=r("UserAgent"),C=m.extend({_initialHeight:null,_initTopMargin:0,_picFieldName:"pic_square",_page:null,_displayed:!1,_notDisplayed:!1,_container:null,_animationSpeed:0,process:function(){l.getLoginStatus(c(function(e){y.monitor("auth.statusChange",c(function(){return this.isValid()&&x.getLoginStatus()=="connected"?(this._uid=x.getUserID(),f({method:"Connect.shouldShowConnectBar"},c(function(e){e!=2?(this._animationSpeed=e==0?750:0,this._showBar()):this._noRender()},"bind",!0,this))):this._noRender(),!1},"bind",!0,this))},"bind",!0,this))},_showBar:function(){var e=d._selectByIndex(["first_name","profile_url",this._picFieldName],"user","uid",this._uid),t=d._selectByIndex(["display_name"],"application","api_key",x.getClientID());d.waitOn([e,t],c(function(e){e[0][0].site_name=e[1][0].display_name,this._displayed||(this._displayed=!0,this._notDisplayed=!1,this._renderConnectBar(e[0][0]),this.fire("render"),E.impression({lid:104,name:"widget_load"}),this.fire("connectbar.ondisplay"),y.fire("connectbar.ondisplay",this),w.invokeHandler(this.getAttribute("on-display"),this))},"bind",!0,this))},_noRender:function(){this._displayed&&(this._displayed=!1,this._closeConnectBar()),this._notDisplayed||(this._notDisplayed=!0,this.fire("render"),this.fire("connectbar.onnotdisplay"),y.fire("connectbar.onnotdisplay",this),w.invokeHandler(this.getAttribute("on-not-display"),this))},_renderConnectBar:function(t){var r=n.createElement("div"),i=n.createElement("div");r.className="fb_connect_bar",i.className="fb_reset fb_connect_bar_container",i.appendChild(r),n.body.appendChild(i),this._container=i,this._initialHeight=Math.round(parseFloat(v.getStyle(i,"height"))+parseFloat(v.getStyle(i,"borderBottomWidth"))),v.html(r,b('<div class="fb_buttons"><a href="#" class="fb_bar_close"><img src="{1}" alt="{2}" title="{2}"/></a></div><a href="{7}" class="fb_profile" target="_blank"><img src="{3}" alt="{4}" title="{4}"/></a>{5} <span><a href="{8}" class="fb_learn_more" target="_blank">{6}</a> &ndash; <a href="#" class="fb_no_thanks">{0}</a></span>',S.tx._("No Thanks"),T.resolve("fbcdn")+"/"+p.imgs.buttonUrl,S.tx._("Close"),t[this._picFieldName]||T.resolve("fbcdn")+"/"+p.imgs.missingProfileUrl,g(t.first_name),S.tx._("Hi {firstName}. <strong>{siteName}</strong> is using Facebook to personalize your experience.",{firstName:g(t.first_name),siteName:g(t.site_name)}),S.tx._("Learn More"),t.profile_url,T.resolve("www")+"/sitetour/connect.php")),c(h(r.getElementsByTagName("a")),"forEach",!0,function(e){e.onclick=c(this._clickHandler,"bind",!0,this)},this),this._page=n.body;var s=0;this._page.parentNode?s=Math.round((parseFloat(v.getStyle(this._page.parentNode,"height"))-parseFloat(v.getStyle(this._page,"height")))/2):s=parseInt(v.getStyle(this._page,"marginTop"),10),s=isNaN(s)?0:s,this._initTopMargin=s,e.XMLHttpRequest?(i.style.top=-1*this._initialHeight+"px",a.ate(i,{top:"0px"},this._animationSpeed)):i.className+=" fb_connect_bar_container_ie6";var o={marginTop:this._initTopMargin+this._initialHeight+"px"};N.ie()?o.backgroundPositionY=this._initialHeight+"px":o.backgroundPosition="? "+this._initialHeight+"px",a.ate(this._page,o,this._animationSpeed)},_clickHandler:function(t){t=t||e.event;var n=t.target||t.srcElement;while(n.nodeName!="A")n=n.parentNode;switch(n.className){case"fb_bar_close":f({method:"Connect.connectBarMarkAcknowledged"}),E.impression({lid:104,name:"widget_user_closed"}),this._closeConnectBar();break;case"fb_learn_more":case"fb_profile":e.open(n.href);break;case"fb_no_thanks":this._closeConnectBar(),f({method:"Connect.connectBarMarkAcknowledged"}),E.impression({lid:104,name:"widget_user_no_thanks"}),f({method:"auth.revokeAuthorization",block:!0},c(function(){this.fire("connectbar.ondeauth"),y.fire("connectbar.ondeauth",this),w.invokeHandler(this.getAttribute("on-deauth"),this),this._getBoolAttribute("auto-refresh",!0)&&e.location.reload()},"bind",!0,this))}return!1},_closeConnectBar:function(){this._notDisplayed=!0;var e={marginTop:this._initTopMargin+"px"};N.ie()?e.backgroundPositionY="0px":e.backgroundPosition="? 0px";var t=this._animationSpeed==0?0:300;a.ate(this._page,e,t),a.ate(this._container,{top:-1*this._initialHeight+"px"},t,function(e){e.parentNode.removeChild(e)}),this.fire("connectbar.onclose"),y.fire("connectbar.onclose",this),w.invokeHandler(this.getAttribute("on-close"),this)}});o.exports=C}),l("sdk.XFBML.LoginButton",["sdk.Helper","IframePlugin"],function(e,t,n,r,i,s){var o=t("sdk.Helper"),u=t("IframePlugin"),a=u.extend({constructor:function(e,t,n,r){this.parent(e,t,n,r);var i=u.getVal(r,"on_login");i&&this.subscribe("login.status",function(e){o.invokeHandler(i,null,[e])})},getParams:function(){return{scope:"string",perms:"string",size:"string",login_text:"text",show_faces:"bool",max_rows:"string",show_login_face:"bool",registration_url:"url_maybe",auto_logout_link:"bool",one_click:"bool",show_banner:"bool"}}});i.exports=a}),l("sdk.XFBML.Name",["copyProperties","sdk.Data","escapeHTML","sdk.Event","sdk.XFBML.Element","sdk.Helper","Log","sdk.Runtime"],function(e,t,n,r,i,s){var o=t("copyProperties"),u=t("sdk.Data"),a=t("escapeHTML"),f=t("sdk.Event"),l=t("sdk.XFBML.Element"),h=t("sdk.Helper"),p=t("Log"),d=t("sdk.Runtime"),v=l.extend({process:function(){o(this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),_linked:this._getBoolAttribute("linked",!0),_subjectId:this.getAttribute("subject-id")});if(!this._uid){p.error('"uid" is a required attribute for <fb:name>'),this.fire("render");return}var e=[];this._firstnameonly?e.push("first_name"):this._lastnameonly?e.push("last_name"):e.push("name"),this._subjectId&&(e.push("sex"),this._subjectId==d.getUserID()&&(this._reflexive=!0));var t;f.monitor("auth.statusChange",c(function(){if(!this.isValid())return this.fire("render"),!0;if(!this._uid||this._uid=="loggedinuser")this._uid=d.getUserID();if(!this._uid)return;h.isUser(this._uid)?t=u._selectByIndex(e,"user","uid",this._uid):t=u._selectByIndex(["name","id"],"profile","id",this._uid),t.wait(c(function(e){this._subjectId==this._uid?this._renderPronoun(e[0]):this._renderOther(e[0]),this.fire("render")},"bind",!0,this))},"bind",!0,this))},_renderPronoun:function(e){var t="",n=this._objective;this._subjectId&&(n=!0,this._subjectId===this._uid&&(this._reflexive=!0));if(this._uid==d.getUserID()&&this._getBoolAttribute("use-you",!0))this._possessive?this._reflexive?t="your own":t="your":this._reflexive?t="yourself":t="you";else switch(e.sex){case"male":this._possessive?t=this._reflexive?"his own":"his":this._reflexive?t="himself":n?t="him":t="he";break;case"female":this._possessive?t=this._reflexive?"her own":"her":this._reflexive?t="herself":n?t="her":t="she";break;default:this._getBoolAttribute("use-they",!0)?this._possessive?this._reflexive?t="their own":t="their":this._reflexive?t="themselves":n?t="them":t="they":this._possessive?this._reflexive?t="his/her own":t="his/her":this._reflexive?t="himself/herself":n?t="him/her":t="he/she"}this._getBoolAttribute("capitalize",!1)&&(t=h.upperCaseFirstChar(t)),this.dom.innerHTML=t},_renderOther:function(e){var t="",n="";this._uid==d.getUserID()&&this._getBoolAttribute("use-you",!0)?this._reflexive?this._possessive?t="your own":t="yourself":this._possessive?t="your":t="you":e&&(null===e.first_name&&(e.first_name=""),null===e.last_name&&(e.last_name=""),this._firstnameonly&&e.first_name!==undefined?t=a(e.first_name):this._lastnameonly&&e.last_name!==undefined&&(t=a(e.last_name)),t||(t=a(e.name)),t!==""&&this._possessive&&(t+="'s")),t||(t=a(this.getAttribute("if-cant-see","Facebook User"))),t&&(this._getBoolAttribute("capitalize",!1)&&(t=h.upperCaseFirstChar(t)),e&&this._linked?n=h.getProfileLink(e,t,this.getAttribute("href",null)):n=t),this.dom.innerHTML=n}});i.exports=v}),l("sdk.XFBML.RecommendationsBar",["sdk.Arbiter","DOMEventListener","sdk.Event","sdk.XFBML.IframeWidget","resolveURI","sdk.Runtime"],function(t,i,s,o,u,a){var f=i("sdk.Arbiter"),l=i("DOMEventListener"),h=i("sdk.Event"),p=i("sdk.XFBML.IframeWidget"),d=i("resolveURI"),v=i("sdk.Runtime"),m=p.extend({getUrlBits:function(){return{name:"recommendations_bar",params:this._attr}},setupAndValidate:function(){function t(e,t){function s(){t(),i=null,n=c("Date","now",!1)}var n=0,i=null;return function(){if(!i){var t=c("Date","now",!1);t-n<e?i=r(s,e-(t-n)):s()}return!0}}function i(e){if(e.match(/^\d+(?:\.\d+)?%$/)){var t=Math.min(Math.max(parseInt(e,10),0),100);e=t/100}else e!="manual"&&e!="onvisible"&&(e="onvisible");return e}function s(e){return Math.max(parseInt(e,10)||30,10)}function o(e){return e=="left"||e=="right"?e:v.getRtl()?"left":"right"}this._attr={channel:this.getChannelUrl(),api_key:v.getClientID(),font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme"),href:d(this.getAttribute("href")),side:o(this.getAttribute("side")),site:this.getAttribute("site"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),max_age:this.getAttribute("max_age"),trigger:i(this.getAttribute("trigger","")),read_time:s(this.getAttribute("read_time")),num_recommendations:parseInt(this.getAttribute("num_recommendations"),10)||2},this._showLoader=!1,this.subscribe("iframe.onload",c(function(){var e=this.dom.children[0];e.className="fbpluginrecommendationsbar"+this._attr.side},"bind",!0,this));var u=c(function(){return l.remove(e,"scroll",u),l.remove(n.documentElement,"click",u),l.remove(n.documentElement,"mousemove",u),r(c(this.arbiterInform,"bind",!0,this,"platform/plugins/recommendations_bar/action",null,f.BEHAVIOR_STATE),this._attr.read_time*1e3),!0},"bind",!0,this);l.add(e,"scroll",u),l.add(n.documentElement,"click",u),l.add(n.documentElement,"mousemove",u);if(this._attr.trigger=="manual"){var a=c(function(e){return e==this._attr.href&&(h.unsubscribe("xfbml.recommendationsbar.read",a),this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,f.BEHAVIOR_STATE)),!0},"bind",!0,this);h.subscribe("xfbml.recommendationsbar.read",a)}else{var p=t(500,c(function(){return this.calculateVisibility()&&(l.remove(e,"scroll",p),l.remove(e,"resize",p),this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,f.BEHAVIOR_STATE)),!0},"bind",!0,this));l.add(e,"scroll",p),l.add(e,"resize",p),p()}this.visible=!1;var m=t(500,c(function(){return!this.visible&&this.calculateVisibility()?(this.visible=!0,this.arbiterInform("platform/plugins/recommendations_bar/visible")):this.visible&&!this.calculateVisibility()&&(this.visible=!1,this.arbiterInform("platform/plugins/recommendations_bar/invisible")),!0},"bind",!0,this));l.add(e,"scroll",m),l.add(e,"resize",m),m(),this.focused=!0;var y=c(function(){return this.focused=!this.focused,!0},"bind",!0,this);return l.add(e,"blur",y),l.add(e,"focus",y),this.resize_running=!1,this.animate=!1,this.subscribe("xd.signal_animation",c(function(){this.animate=!0},"bind",!0,this)),!0},getSize:function(){return{height:25,width:this._attr.action=="recommend"?140:96}},calculateVisibility:function(){var t=n.documentElement.clientHeight;if(!this.focused&&e.console&&e.console.firebug)return this.visible;switch(this._attr.trigger){case"manual":return!1;case"onvisible":var r=this.dom.getBoundingClientRect().top;return r<=t;default:var i=e.pageYOffset||n.body.scrollTop,s=n.documentElement.scrollHeight;return(i+t)/s>=this._attr.trigger}}});u.exports=m}),l("sdk.XFBML.Registration",["sdk.Auth","sdk.Helper","sdk.XFBML.IframeWidget","sdk.Runtime","UrlMap"],function(t,n,r,i,s,o){var u=n("sdk.Auth"),a=n("sdk.Helper"),f=n("sdk.XFBML.IframeWidget"),l=n("sdk.Runtime"),h=n("UrlMap"),p=f.extend({_visibleAfter:"immediate",_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){return this._attr={action:this.getAttribute("action"),border_color:this.getAttribute("border-color"),channel_url:this.getChannelUrl(),client_id:l.getClientID(),fb_only:this._getBoolAttribute("fb-only",!1),fb_register:this._getBoolAttribute("fb-register",!1),fields:this.getAttribute("fields"),height:this._getPxAttribute("height"),redirect_uri:this.getAttribute("redirect-uri",e.location.href),no_footer:this._getBoolAttribute("no-footer"),no_header:this._getBoolAttribute("no-header"),onvalidate:this.getAttribute("onvalidate"),width:this._getPxAttribute("width",600),target:this.getAttribute("target")},this._attr.onvalidate&&this.subscribe("xd.validate",c(function(e){var t=c("JSON","parse",!1,e.value),n=c(function(t){this.arbiterInform("Registration.Validation",{errors:t,id:e.id})},"bind",!0,this),r=a.executeFunctionByName(this._attr.onvalidate,t,n);r&&n(r)},"bind",!0,this)),this.subscribe("xd.authLogin",c(this._onAuthLogin,"bind",!0,this)),this.subscribe("xd.authLogout",c(this._onAuthLogout,"bind",!0,this)),!0},getSize:function(){return{width:this._attr.width,height:this._getHeight()}},_getHeight:function(){if(this._attr.height)return this._attr.height;var e;if(!this._attr.fields)e=["name"];else try{e=c("JSON","parse",!1,this._attr.fields)}catch(t){e=this._attr.fields.split(/,/)}return this._attr.width<this._skinnyWidth?this._skinnyBaseHeight+e.length*this._skinnyFieldHeight:this._baseHeight+e.length*this._fieldHeight},getUrlBits:function(){return{name:"registration",params:this._attr}},getDefaultWebDomain:function(){return h.resolve("www",!0)},_onAuthLogin:function(){u.getAuthResponse()||u.getLoginStatus(),a.fireEvent("auth.login",this)},_onAuthLogout:function(){u.getAuthResponse()||u.getLoginStatus(),a.fireEvent("auth.logout",this)}});s.exports=p}),l("sdk.XFBML.SocialContext",["sdk.Event","sdk.XFBML.IframeWidget"],function(e,t,n,r,i,s){var o=t("sdk.Event"),u=t("sdk.XFBML.IframeWidget"),a=u.extend({setupAndValidate:function(){var e=this.getAttribute("size","small");return this._attr={channel:this.getChannelUrl(),width:this._getPxAttribute("width",400),height:this._getPxAttribute("height",100),ref:this.getAttribute("ref"),size:this.getAttribute("size"),keywords:this.getAttribute("keywords"),urls:this.getAttribute("urls"),object_id:this.getAttribute("object_id")},this.subscribe("xd.social_context_stats",c(this._bubbleSocialContextStats,"bind",!0,this)),!0},_bubbleSocialContextStats:function(e){var t={pluginID:this.getAttribute("plugin-id"),socialContextPageIDs:c("JSON","parse",!1,e.social_context_page_ids)};o.fire("xfbml.social_context_stats",t)},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"social_context",params:this._attr}}});i.exports=a}),l("legacy:fb.xfbml",["Assert","sdk.domReady","sdk.Event","FB","IframePlugin","PluginTags","wrapFunction","XFBML","sdk.XFBML.Comments","sdk.XFBML.CommentsCount","sdk.XFBML.ConnectBar","sdk.XFBML.LoginButton","sdk.XFBML.Name","sdk.XFBML.RecommendationsBar","sdk.XFBML.Registration","sdk.XFBML.SocialContext"],function(t,i,s,o){var u=i("Assert"),a=i("sdk.domReady"),f=i("sdk.Event"),l=i("FB"),h=i("IframePlugin"),p=i("PluginTags"),d=i("wrapFunction"),v=i("XFBML"),m={comments:i("sdk.XFBML.Comments"),comments_count:i("sdk.XFBML.CommentsCount"),connect_bar:i("sdk.XFBML.ConnectBar"),login_button:i("sdk.XFBML.LoginButton"),name:i("sdk.XFBML.Name"),recommendations_bar:i("sdk.XFBML.RecommendationsBar"),registration:i("sdk.XFBML.Registration"),social_context:i("sdk.XFBML.SocialContext")};c(c("Object","keys",!1,p),"forEach",!0,function(e){v.registerTag({xmlns:"fb",localName:e.replace(/_/g,"-"),ctor:h.withParams(p[e])})}),c(c("Object","keys",!1,m),"forEach",!0,function(e){v.registerTag({xmlns:"fb",localName:e.replace(/_/g,"-"),ctor:m[e]})}),l.provide("XFBML",{parse:function(e){return u.maybeXfbml(e,"Invalid argument"),e&&e.nodeType===9&&(e=e.body),v.parse.apply(null,arguments)}}),l.provide("XFBML.RecommendationsBar",{markRead:function(t){f.fire("xfbml.recommendationsbar.read",t||e.location.href)}}),v.subscribe("parse",c(f.fire,"bind",!0,f,"xfbml.parse")),v.subscribe("render",c(f.fire,"bind",!0,f,"xfbml.render")),f.subscribe("init:post",function(e){e.xfbml&&r(d(c(a,"bind",!0,null,v.parse),"entry","init:post:xfbml.parse"),0)}),u.define("Xfbml",function(e){return(e.nodeType===1||e.nodeType===9)&&typeof e.nodeName=="string"});try{n.namespaces&&!n.namespaces.item.fb&&n.namespaces.add("fb")}catch(g){}},3)}.call({},window.inDapIF?parent.window:window)}catch(e){(new Image).src="http://www.facebook.com/common/scribe_endpoint.php?c=jssdk_error&m="+encodeURIComponent('{"error":"LOAD", "extra": {"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","message":"'+e.message+'"}}')}define("facebook",function(){}),define("packages/invite/models/invite",["models","facade"],function(e,t){var n=e.BaseModel,r=t.$,i=t._,s=t.Backbone;return n.extend({idAttribute:"id",methodToURL:{read:function(e){var t=base_url+"api/invite/basics/";return e.get("sechash")&&(t+="?sechash="+e.get("sechash")),t},create:"api/invite/accept",update:function(e){var t=base_url+"api/invite/accept/";return e.get("sechash")&&(t+="?sechash="+e.get("sechash")),t},"delete":function(e){return""}},sync:function(e,t,n){return n=n||{},n.url=typeof t.methodToURL[e.toLowerCase()]=="function"?t.methodToURL[e.toLowerCase()](t):t.methodToURL[e.toLowerCase()],s.sync.apply(this,arguments)},loadInvitePage:function(){switch(this.get("payload").invite_to_obj.enttypes_id){case"1":routing.navigate("!profile/"+this.get("payload").invite_to_obj.id,{trigger:!0,replace:!0});break;case"5":routing.navigate("!team/"+this.get("payload").invite_to_obj.id,{trigger:!0,replace:!0});break;case"8":routing.navigate("!game/"+this.get("payload").invite_to_obj.id,{trigger:!0,replace:!0});break;default:self.showHomePage(userId)}}})}),define("signup/views/facebooksignup",["vendor","views","registration","signup","signup/views/shopopup","utils/storage","facebook","packages/invite/models/invite"],function(e,t,n,r,i,s){var o,u=t.BaseView,a=e.$,f=e._,l=e.Mustache,c,h=require("packages/invite/models/invite"),p=window.cordova&&window.facebookConnectPlugin?window.facebookConnectPlugin:FB;return o=u.extend({initialize:function(e){e&&e.callback&&(this.callback=e.callback),e&&e.invite_hash&&(this.invite_hash=e.invite_hash),console.log(e),!window.cordova&&!window.facebookConnectPlugin&&p.init({appId:App.Settings.appId,status:!0,cookie:!0,xfbml:!0,oauth:!0})},signupFacebook:function(e,t){var r=this;this.linkWithFB=e&&e=="linkWithFB"?!0:!1,this.registrationController||(this.registrationController=new n({callback:r.calback})),this.loginfb(t)},getFBlogin:function(){var e=this;alert("getFBlogin"),p.getLoginStatus(function(t){console.log(t),t.status==="connected"?this.actionFunction=function(){p.api("/me",function(t){e.linkWithFB&&alert("Facebook Account linked Successfully."),routing.trigger("registration-with-facebook",e.callback)})}:t.status==="not_authorized"?(e.linkWithFB&&alert("There was a problem trying to establish a connection to Facebook."),console.log("not_authorized"),e.loginInfo||(e.loginInfo=e.loginfb())):e.loginInfo||(e.loginInfo=e.loginfb())},{scope:"email, user_birthday, user_photos"})},loginfb:function(e){var t=this;console.log(p),console.log(e);var n=function(n){console.log(n);if(n.authResponse){console.log(n),t.saveAccessToken(n.authResponse),routing.trigger("hide-landing");if(t.invite_hash)var r=new h({sechash:t.invite_hash});e&&f.isFunction(e)?e():routing.trigger("registration-with-facebook",t.callback,r)}else alert("Facebook Login has been cancelled")},r=function(e){console.log(e)},i=window.cordova&&window.facebookConnectPlugin?["email, user_birthday, user_photos"]:{scope:"email,user_birthday,user_photos"},s=window.cordova&&window.facebookConnectPlugin?p.login(i,n,r):p.login(n,r,i)},saveAccessToken:function(e){var t={id:"FBAuthToken",value:e},n=new s("FBAuthToken","localStorage");n.create(t)},checkFBlogin:function(){var e=this;p.getLoginStatus(function(t){t.status==="connected"&&p.api("/me",function(t){routing.trigger("registration-with-facebook",e.callback)})},{scope:"email, user_birthday, user_photos"})}}),o}),define("text!signup/templates/basciFinal.html",[],function(){return'<!--<h1>Auth module using the ORM driver for Kohana 3.1</h1>-->\r\n\r\n\r\n\r\n<div id="regcontainer">\r\n	<div id="mainregfinal">\r\n		<div id="regpanefinal">\r\n			<form action="#/user/create" method="post" accept-charset="utf-8">\r\n				<div id="finalreg">\r\n					<div class="field" id="firstname">\r\n						<span>Name</span>\r\n						<input type="text" id="first_name" name="Name" placeholder="Name" />\r\n					</div>\r\n\r\n					<div class="field" id="email">\r\n						<div class="label">\r\n							<label for="Email">Email</label>\r\n						</div>\r\n						<input type="text" name="email" id="emailInput" placeholder="Email" />\r\n					</div>\r\n\r\n					<div class="field">\r\n						<span>Birthday</span>\r\n						<div style="width:94%;" id="dob"></div>\r\n					</div>\r\n\r\n					<div class="field">\r\n						<span>Password</span>\r\n						<input type="password" name="password" id="password" placeholder="Password" />\r\n						<input type="password" name="re_password" id="re_password" placeholder="Password Again" />\r\n					</div>\r\n\r\n					\r\n					<div style="height:40px; margin:10px 0 10px 0;">\r\n						<div class="row-fluid field">\r\n							<label for="re_terms_conditions">\r\n								<input type="checkbox" class="terms-condition-h" id="re_terms_conditions" name="re_terms_conditions"/>I have read and agree to the <a href="tos.html" target="_blank" style="text-decoration:underline;">Terms of Service</a>\r\n							</label>\r\n						</div>\r\n					</div>\r\n					<% if(invite_hash){ %>\r\n						<input type="hidden" name="invite_hash" value="<%= invite_hash %>" />\r\n					<% } %>\r\n					<input type="submit" name="create" value="Sign Up" class="next btn-common btn-green regsubmitfinal" />\r\n				</div>\r\n			</form>\r\n				\r\n			<%  if(!page) { %>	<br /><br/>\r\n				<div id="reglogin">\r\n					<span>Been here before <a href="#">sign in</a></span>\r\n				</div>\r\n			<% } %>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'}),define("signup/views/registration-basics-final",["require","text!signup/templates/basciFinal.html","backbone","underscore","views","facade","utils"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=u.storage,l=n.View;return i=l.extend({initialize:function(e){this.callback=e.callback,this.template=r.template(t,{page:e.openAsPopUp?!0:!1,invite_hash:e.invite_hash?e.invite_hash:!1}),e.destination&&(this.$el=$(e.destination)),e.openAsPopUp&&(this.openAsPopUp=e.openAsPopUp),this.render()},render:function(){this.$el.html(this.template);var e=this,t=setTimeout(function(){e.$el.find(".regsubmitfinal").length?clearInterval(t):console.log("not found")},100);this.registrationElements(),this.payload=this.finalRegistrationPayload(this.options.attr),this.fetchpayload(this.payload)},events:{"click .regsubmitfinal":"next","click #editname":"editName"},editName:function(e){e.preventDefault(),$(".firstdiv").empty();var t=this.getnameElement("first_name","First Name","firstname"),n=this.getnameElement("last_name","Last Name","lastname"),r=this.getLabel("First Name"),i=this.getLabel("Second Name");$(".firstdiv").append(r),$(".firstdiv").append(t),$(".firstdiv").append(i),$(".firstdiv").append(n)},getLabel:function(e){var t=$("<div/>").attr({"class":"label"}),n=$("<lable/>").attr({For:e}).html(e);return t.append(n),t},getnameElement:function(e,t,n){var r=$("<input/>").attr({name:n,type:"text",id:e,placeholder:t});return r},finalRegistrationPayload:function(e){payload={};var t=e.attr;return $.each(t,function(e,t){payload[t.name]=t.value}),payload},registrationElements:function(){var e={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20",21:"21",22:"22",23:"23",24:"24",25:"25",26:"26",27:"27",28:"28",29:"29",30:"30",31:"31"},n={1945:"1945",1946:"1946",1947:"1947",1948:"1948",1949:"1949",1950:"1950",1951:"1951",1952:"1952",1953:"1953",1954:"1954",1955:"1955",1956:"1956",1957:"1957",1958:"1958",1959:"1959",1960:"1960",1961:"1961",1962:"1962",1963:"1963",1964:"1964",1965:"1965",1966:"1966",1967:"1967",1968:"1968",1969:"1969",1970:"1970",1971:"1971",1972:"1972",1973:"1973",1974:"1974",1975:"1975",1976:"1976",1977:"1977",1978:"1978",1979:"1979",1980:"1980",1981:"1981",1982:"1982",1983:"1983",1984:"1984",1985:"1985",1986:"1986",1987:"1987",1988:"1988",1989:"1989",1990:"1990",1991:"1991",1992:"1992",1993:"1993",1994:"1994",1995:"1995",1996:"1996",1997:"1997",1998:"1998",1999:"1999",2e3:"2000",2001:"2001"},r=this.option(e,"born","06");this.$el.find("#dob").append(r);var i=this.option(t,"borndate","15");this.$el.find("#dob").append(i);var s=this.option(n,"borndyear","1985");this.$el.find("#dob").append(s)},option:function(e,t,n){var r='<select class="'+t+'">';return $.each(e,function(e,t){var i="";if(e==n)var i="selected='selected'";r+='<option value="'+e+'" '+i+">"+t+"</option>"}),r+="</select>",r},fetchpayload:function(e){this.$el.find("#first_name").val(e.fullname),this.$el.find("#emailInput").val(e.email),this.$el.find("#password").val(e.password)},next:function(e){e.preventDefault();var t=this,n=$(".terms-condition-h").is(":checked");if(!n){alert("Please select terms and condition.");return}var i=this;console.log(this.payload);var s=this.$(":input").serializeArray();$.each(s,function(e,t){payload[t.name]=t.value}),console.log(payload,"new payload"),console.log($("#finalreg input#password")),console.log($("#finalreg input#re_password")),this.payload.gender=$("input:radio[name=gender]:checked").val(),this.payload.password=$("#finalreg input#password").val(),this.payload.re_password=$("#finalreg input#re_password").val(),this.payload.dob=$(".borndate").val()+"-"+$(".born").val()+"-"+$(".borndyear").val(),this.payload.accept_terms=n;var o=routing.showSpinner("input[name=create]");this.model.save(this.payload,{success:function(e,n){routing.hideSpinner(o,"input[name=create]"),$("#RegModal").modal("hide");var i={id:"cookieValue",value:n.payload.token},s=new f("authautologin","localStorage");s.create(i);var u={id:"cookieValue",value:n.payload.session},a=new f("session","localStorage");a.create(u),t.callback&&r.isFunction(t.callback)?(routing.trigger("common-popup-close"),App.header&&App.header.render(!0),t.callback(function(){})):($(".register-wrapper-h").length&&$(".register-wrapper-h").slideUp("slow"),routing.navigate("usersettings",{trigger:!0,replace:!0}))},error:function(e){routing.hideSpinner(o,"input[name=create]"),$(".errormsg").remove();var t=jQuery.parseJSON(e.request.responseText);errorArray=t.exec_data.error_array,$.each(errorArray,function(e,t){i.displayErrors(t)})}})},displayErrors:function(e){var t=$("#"+e.field),n=t.width();if(n){console.log(t.position(),"fieldName",n,"elemet width");var r=this.displayMesage(t.position(),e.error,n);$("#finalreg input.regsubmitfinal").before(r)}},displayMesage:function(e,t,n){console.log(n,"widthele");var r=e.left+15;r+=n,console.log(r,"posleft");var i=$("<div/>").attr({name:"error message","class":"errormsg"}).css({width:"90%","margin-top":"10px",color:"#CE0009"}).html(t);return i}}),i}),define("signup/views/registerbasic",["require","text!signup/templates/registration.html","text!signup/templates/registration_landing.html","backbone","underscore","registration","login","views","signup/views/facebooksignup","facade","utils","signup/views/registration-basics-final","signup/models/registration-basics-final"],function(e,t,n,r,i,s,o){var u,a=e("facade"),f=e("views"),l=e("signup/views/facebooksignup"),c=e("utils"),h=c.lib.Channel,p=e("signup/views/registration-basics-final"),d=e("signup/models/registration-basics-final"),v=r.View;return u=v.extend({initialize:function(e){e.openAsaPage&&(this.openAsaPage=e.openAsaPage),this.callback=e.callback,this.registrationController=new s({route:"",callback:this.callback}),this.invite_hash=e.invite_hash?e.invite_hash:!1,console.log("Options passed to registerbasics",e),this.AcceptData=e.data?e.data:undefined,e.showOnLanding==1?this.template=i.template(n,{onlyRegister:this.openAsaPage?!0:!1,invite_hash:this.invite_hash}):this.template=i.template(t,{onlyRegister:this.openAsaPage?!0:!1,invite_hash:this.invite_hash}),this.$el=$(e.destination),$("#errormsg, #preview").html(""),v.prototype.initialize.call(this,e),this.render(),this.facebookView=new l({callback:this.callback,invite_hash:this.invite_hash})},render:function(){this.$el.html(this.template),this.AcceptData&&(this.$el.find("input[name=firstname]").val(this.AcceptData.firstname),this.$el.find("input[name=lastname]").val(this.AcceptData.lastname),this.$el.find("input[name=email]").val(this.AcceptData.email)),routing.trigger("center-landing-image",{})},events:{"click .regsubmit":"next","click #fbpane":"signupFacebook","click #reglogin a":"showLogin","click .login":"showLogin"},next:function(e){e.preventDefault();var t=$(e.target).parents("form").find("input[name=fullname]"),n=t.val(),r=/[a-zA-Z\.\_\-]$/;if(!r.test(n))return t.addClass("field-failed"),setTimeout(function(){t.removeClass("field-failed")},2e3),!1;var i=this.$(":input").serializeArray(),s=!0;$.each(this.$(":input"),function(e,t){t.value||(setTimeout(function(){$(t).addClass("field-failed"),setTimeout(function(){$(t).removeClass("field-failed")},2e3)},parseInt(e+"00")),s=!1)});try{if(this.openAsaPage&&s){routing.trigger("common-popup-close");var o={};o.height="500px",o.width="500px",o.title="The Basics",o.html='<div id="reg-cont"></div>',routing.trigger("common-popup-open",o),this.basic_type=new d;var o={model:this.basic_type,name:"Final registration",attr:{attr:i},openAsPopUp:!0,callback:this.callback,invite_hash:this.invite_hash,destination:$("#reg-cont")};this.selectRegisterBasicFinalView=new p(o)}else s&&routing.trigger("register-basic-final",i,this.callback)}catch(u){console.log(u.stack)}},signupFacebook:function(e){e.preventDefault(),$(e.target).parent().find("#label").addClass("loading").html("Connecting to Facebook..."),$("#RegModal").modal("hide"),this.facebookView.loginfb()},showLogin:function(t){t.preventDefault();var n=this.$(":input").serializeArray(),r=e("login");routing.trigger("common-popup-close"),this.logincontroller=new r({callback:this.callback,attr:{attr:n}}),routing.trigger("Login")}}),u}),define("signup/models/image-upload",["models/base"],function(e){var t;return t=e.extend({defaults:{},url:"/api/user/savecrop/425983",payload:{}}),t}),define("text!signup/templates/imageupload.html",[],function(){return' <style type="text/css">\r\n\r\n </style>\r\n <div id="regcontainer">\r\n    <div id="mainregimg">\r\n      <div id="header">\r\n      <span class="regheader"> Upload a user pic</span>\r\n    </div>\r\n      <div id="imgcontainer" class="imgcontainer">\r\n       \r\n        <div class="textcenter pane" id="imgpreview" >\r\n          <img id="image-select" style="max-height: 245px; max-width: 320px;" />\r\n            <div class="coords" style="display:none;">\r\n                <div>crop x <input name="crop-x" type="hidden" /></div>\r\n                <div>crop y <input name="crop-y" type="hidden" /></div>\r\n                <div>crop width <input name="crop-width" type="hidden" /></div>\r\n                <div>crop height <input name="crop-height" type="hidden" /></div>\r\n                <div>image width <input name="image-width" type="hidden" /></div>\r\n                <div>image height <input name="image-height" type="hidden" /></div>            \r\n            </div>\r\n        </div>\r\n        <div id="imguploader" class="imguploader">\r\n          <input type="file" name= "preview" id="preview">\r\n        </div>\r\n        <div class="inputmask">\r\n          <div class="selectlabel">Select File</div>\r\n          <div class="showselected"></div>\r\n        </div>  \r\n         \r\n        <div id="imgupload"  class="imgupload">\r\n          <input type="submit" name="imgup" id="crpimgup" value="Crop and save" class="imgup" /> \r\n           <input type="submit" name="skip" id="skip" value="Skip" class="imgup" />   \r\n        </div>\r\n        \r\n      </div>\r\n    </div>  \r\n  </div>   '}),define("signup/views/image-upload",["require","text!signup/templates/imageupload.html","backbone","underscore","views","facade","utils","jquery.jrac"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=n.View;return i=f.extend({initialize:function(e){this.template=r.template(t),this.$el=$(e.destination),this.render()},render:function(){this.$el.html(this.template),this.userinfo(this.options.attr)},events:{"change input":"preview","click #crpimgup":"imageupload","click #skip":"skip"},skip:function(e){e.preventDefault(),window.location.href="#usersettings"},userinfo:function(e){},preview:function(e){this.removeCropView();var t=window.URL||window.webkitURL;window.fileURL=t.createObjectURL(e.target.files[0]),this.srcimg=window.fileURL,$("#image-select").attr({src:window.fileURL}),this.initCropView()},initCropView:function(){$("#image-select").jrac({crop_width:200,crop_height:240,crop_aspect_ratio:"1:1",crop_x:0,crop_y:0,crop_resize:!1,viewport_resize:!1,viewport_onload:function(){var e=this,t=e.$container.parent(".pane").find(".coords input:hidden"),n=["jrac_crop_x","jrac_crop_y","jrac_crop_width","jrac_crop_height","jrac_image_width","jrac_image_height"];for(var r=0;r<n.length;r++){var i=n[r];e.observator.register(i,t.eq(r)),t.eq(r).bind(i,function(e,t,n){$(this).val(n)}).change(i,function(t){var n=t.data;e.$image.scale_proportion_locked=e.$container.parent(".pane").find(".coords input:checkbox").is(":checked"),e.observator.set_property(n,$(this).val())})}e.$container.append('<div class="natual-size">Image natual size: '+e.$image.originalWidth+" x "+e.$image.originalHeight+"</div>")}}).bind("jrac_events",function(e,t){var n=$(this).parents(".pane").find(".coords input");n.css("background-color",t.observator.crop_consistent()?"chartreuse":"salmon")})},imageupload:function(e){e.preventDefault(),this.getImageInfo()},removeCropView:function(){$("#image-select").jrac("destroy"),$("#image-select").parent().find(".natual-size").remove()},getImageInfo:function(){var e=[],t=this.$(".coords :input").serializeArray();e.image_url=this.srcimg,$.each(t,function(t,n){e[n.name]=n.value}),console.log(e,"finalRegistrationPayload"),this.model.save(e,{success:function(e){a("upload-user-image").publish(e)},error:function(){}})}}),i}),define("signup",["require","text!signup/templates/layout.html","facade","controller","models","views","utils","signup/models/registerbasic","signup/models/registration-basics-final","signup/views/registerbasic","signup/views/registration-basics-final","signup/models/image-upload","signup/views/image-upload"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("signup/models/registerbasic"),f=e("signup/models/registration-basics-final"),l=e("signup/models/image-upload"),c=e("signup/views/registerbasic"),h=e("signup/views/registration-basics-final"),p=e("signup/views/image-upload"),d=o.LayoutView,v=r.$,m=r._,g=u.debug,y=u.lib.Channel,b=[base_url+"pages/signup/css/signupstyle.css",base_url+"css/style.jrac.css",base_url+"pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return y("load:css").publish(b),m.bindAll(this),this.handleOptions(e),this.init(),this},init:function(){ga("send","event","Signup","Open","User opened registration box"),this.refreshPage(),this.setupLayout(),this.createData(),this.handleDeferreds()},setupLayout:function(){return this.scheme=[],pageLayout=new d({scheme:this.scheme,destination:"#modalBody",template:t,displayWhen:"ready"}),this.layout=pageLayout,this.layout},createData:function(){this.select_type=new a},refreshPage:function(){this.selectTypeView&&(v(this.selectTypeView.destination).html(""),position=v.inArray(this.selectTypeView,this.scheme),~position&&this.scheme.splice(position,1))},showPopup:function(){v("#imgUploadModal").modal("show"),v("#imgUploadModal").on("hidden",function(){}),v("#imgUploadModal").on("hide",function(){})},handleDeferreds:function(){function t(t,n){e.initRegisterFinal({attr:t},n)}function n(t){e.uploadUserImage({attr:t})}var e=this;routing.off("register-basic"),routing.on("register-basic",function(t){e.setupSelectTypeView(t)}),routing.off("register-basic-final"),routing.on("register-basic-final",function(e,n){t(e,n)}),routing.off("upload-user-image"),routing.on("upload-user-image",function(e){n(e)})},initRegisterFinal:function(e,t){this.basic_type=new f,this.selectRegisterBasicFinalView=new h({model:this.basic_type,name:"Final registration",destination:"#modalBody",attr:e,callback:t}),this.layout.render()},uploadUserImage:function(e){this.basic_type=new l,this.selectRegisterBasicFinalView=new p({model:this.basic_type,name:"Final registration",destination:"#modalBody",attr:e}),this.layout.render();var t={};t.height="500px",t.width="500px",t.title="Register",routing.trigger("common-popup-open",t)},setupSelectTypeView:function(e){var t="modal-popup-signup",n="#"+t+" #modalBody",r={};r.height="500px",r.width="600px",r.title="Get Started on Athletez",r.id=t,routing.trigger("common-popup-open",r),this.selectTypeView=new c({model:this.select_type,name:"Select Registration Type",destination:n,showOnLanding:!0,callback:e})}}),n}),define("login/models/Forgotmodel",["models/base"],function(e){return e.extend({defaults:{},email:undefined,url:function(){return"api/user/pw_reset?email="+encodeURIComponent(this.email)},payload:{}})}),define("login/views/Loginview",["require","text!login/templates/logintemplate.html","backbone","underscore","signup","views","facade","utils","login/models/Forgotmodel","signup/views/facebooksignup"],function(e,t,n,r,i){var s=e("facade"),o=e("views"),u=e("utils"),a=u.storage,f=u.docCookies,l=u.lib.Channel,c=e("login/models/Forgotmodel"),h=e("signup/views/facebooksignup"),p=n.View,d=p.extend({initialize:function(e){this.callback=e.callback,r.isUndefined(e.attr)||(this.attr=e.attr),this.signcontroller=new i,this.template=r.template(t),this.$el=$(e.destination),this.render()},render:function(){this.$el.html(this.template),$("#errormsg, #preview").html(""),debug.log("Image upload basic view"),$("#Loginview").modal("show"),$("#Loginview").on("hide",function(){$("div#LoginPopup").empty()}),r.isUndefined(this.attr)||(this.attr=this.setAttrPayload(this.attr),this.$el.find('input[name="username"]').val(this.attr.email),this.$el.find('input[name="password"]').val(this.attr.password),r.isUndefined(this.attr.fb_invite_id)||this.$el.find("form#login").append('<input type="hidden" name="sechash" value="'+this.attr.fb_invite_id+'" />'))},setAttrPayload:function(e){var t={},n=e.attr;return $.each(n,function(e,n){t[n.name]=n.value}),t},events:{"click button#signup":"signupUser","click .loginUser":"userLogin","click .forgot-password-h":"forgotPassword","submit .forgot-password-form-h":"forgotPasswordForm","click .log-in-link-h":"loginPageView","submit #login":"userLogin","click #fbpane":"signupFacebook"},forgotPasswordForm:function(e){e.preventDefault();var t=routing.showSpinner(".forgot-pasword-btn-h"),n=this,r=new c;r.email=$(e.target).find(".forgot-password-email-h").val(),r.save({email:r.email}),$.when(r.request).done(function(){routing.hideSpinner(t,".forgot-pasword-btn-h"),n.$el.find(".success-message").removeClass("hide"),n.$el.find(".error-message").addClass("hide"),setTimeout(function(){n.loginPageView()},3e3)}),$.when(r.request).fail(function(){routing.hideSpinner(t,".forgot-pasword-btn-h"),n.$el.find(".error-message").removeClass("hide"),n.$el.find(".success-message").addClass("hide")})},signupFacebook:function(e){e.preventDefault(),$("#RegModal").modal("hide"),headView=new h({callback:this.callback}),headView.signupFacebook()},userLogin:function(e){e.preventDefault();var t=routing.showSpinner(".loginUser"),n=this.$(":input").serializeArray(),i=[],s=this;$.each(n,function(e,t){i[t.name]=t.value}),i.isNative=routing.isNative;var o=$.extend({},i);this.model.save(o,{success:function(e,n){routing.hideSpinner(t,".loginUser"),$("#Loginview").modal("hide"),e.id=n.payload.id;var i=new a("user","localStorage");i.create(e);var o={id:"cookieValue",value:n.payload.token},u=new a("authautologin","localStorage");u.create(o);var f={id:"cookieValue",value:n.payload.session},l=new a("session","localStorage");l.create(f),s.callback&&r.isFunction(s.callback)?(routing.trigger("common-popup-close"),App.header&&App.header.render(!0),s.callback(function(){})):window.location.href="#profile",routing.trigger("hide-landing")},error:function(e){$(".errormsg").empty(),routing.hideSpinner(t,".loginUser");var n=jQuery.parseJSON(e.request.responseText);$(".errormsg").html(n.exec_data.error_array[0].error)}})},forgotPassword:function(e){e.preventDefault(),this.$el.find(".success-message").addClass("hide"),this.$el.find(".error-message").addClass("hide"),$("#Loginview h3#label").html("Forgot Password"),$("#loginmain").addClass("hide"),$(".forgot-password-container").removeClass("hide")},loginPageView:function(){this.$el.find(".success-message").addClass("hide"),this.$el.find(".error-message").addClass("hide"),$("#Loginview h3#label").html("Login"),$("#loginmain").removeClass("hide"),$(".forgot-password-container").addClass("hide")},signupUser:function(e){e.preventDefault(),routing.trigger("common-popup-close"),routing.trigger("register-basic",this.callback)}});return d}),define("login/models/Logoutmodel",["models/base"],function(e){var t;return t=e.extend({defaults:{},url:"/api/user/logout?time="+(new Date).getTime(),payload:{}}),t}),define("login",["require","text!login/templates/layout.html","application","facade","controller","models","views","utils","login/models/Loginmodel","login/views/Loginview","login/models/Logoutmodel"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("login/models/Loginmodel"),f=e("login/views/Loginview"),l=e("login/models/Logoutmodel"),c=o.LayoutView,h=r.$,p=r._,d=u.debug,v=u.lib.Channel,m=[base_url+"pages/imageup/imageup.css"],g=i.extend({initialize:function(e){return v("load:css").publish(m),this.callback=e.callback,p.bindAll(this),this.handleOptions(e),!p.isUndefined(e.attr)&&p.isObject(e.attr)&&(this.attr=e.attr),this.init(),this},init:function(){this.refreshPage(),this.setupLayout(),this.createData(),this.refreshPage(),this.handleDeferreds()},setupLayout:function(){return this.scheme=[],pageLayout=new c({scheme:this.scheme,destination:"#LoginPopup",template:t,displayWhen:"ready"}),this.layout=pageLayout,this.layout},createData:function(){this.login_type=new a},refreshPage:function(){this.loginView&&(h(this.loginView.destination).html(""),position=h.inArray(this.loginView,this.scheme),~position&&this.scheme.splice(position,1))},showPopup:function(){h("#imgUploadModal").modal("show"),h("#imgUploadModal").on("hidden",function(){}),h("#imgUploadModal").on("hide",function(){})},handleDeferreds:function(){var e=this;routing.off("Login"),routing.on("Login",function(){e.setupLoginView()}),routing.off("Logout"),routing.on("Logout",function(t){e.setupLogout(t)})},setupLogout:function(e){var t=this;this.logoutcheck=new l,this.logoutcheck.fetch(),h.when(this.logoutcheck.request).done(function(){e!=undefined&&e.clear(),window.localStorage.clear(),location.href="/"})},setupLoginView:function(){var e="modal-popup-"+Math.floor(Math.random()*Math.random()*50*Math.random()*50),t="#"+e+" #modalBody",n={};n.height="500px",n.width="600px",n.title="Log Into Athletez",n.id=e,routing.trigger("common-popup-open",n),this.loginView=new f({model:this.login_type,name:"Login View",destination:t,callback:this.callback,attr:this.attr})}});return g}),!function(e,t,n){!function(e){"function"==typeof define&&define.amd?define("vendor/plugins/qtip/qtip",["jquery"],e):jQuery&&!jQuery.fn.qtip&&e(jQuery)}(function(r){function i(e,t,n,i){this.id=n,this.target=e,this.tooltip=D,this.elements={target:e},this._id=V+"-"+n,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:r(),disabled:_,attr:i,onTooltip:_,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=_}function s(e){return e===D||"object"!==r.type(e)}function o(e){return!(r.isFunction(e)||e&&e.attr||e.length||"object"===r.type(e)&&(e.jquery||e.then))}function u(e){var t,n,i,u;return s(e)?_:(s(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&(t=e.content,s(t)||t.jquery||t.done?t=e.content={text:n=o(t)?_:t}:n=t.text,"ajax"in t&&(i=t.ajax,u=i&&i.once!==_,delete t.ajax,t.text=function(e,t){var s=n||r(this).attr(t.options.content.attr)||"Loading...",o=r.ajax(r.extend({},i,{context:t})).then(i.success,D,i.error).then(function(e){return e&&u&&t.set("content.text",e),e},function(e,n,r){t.destroyed||0===e.status||t.set("content.text",n+": "+r)});return u?s:(t.set("content.text",s),o)}),"title"in t&&(s(t.title)||(t.button=t.title.button,t.title=t.title.text),o(t.title||_)&&(t.title=_))),"position"in e&&s(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&s(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===M?{ready:M}:{event:e.show}),"hide"in e&&s(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&s(e.style)&&(e.style={classes:e.style}),r.each(X,function(){this.sanitize&&this.sanitize(e)}),e)}function f(e,t){for(var n,r=0,i=e,s=t.split(".");i=i[s[r++]];)r<s.length&&(n=i);return[n||e,s.pop()]}function l(e,t){var n,r,i;for(n in this.checks)for(r in this.checks[n])(i=(new RegExp(r,"i")).exec(e))&&(t.push(i),("builtin"===n||this.plugins[n])&&this.checks[n][r].apply(this.plugins[n]||this,t))}function h(e){return K.concat("").join(e?"-"+e+" ":" ")}function p(n){return n&&{type:n.type,pageX:n.pageX,pageY:n.pageY,target:n.target,relatedTarget:n.relatedTarget,scrollX:n.scrollX||e.pageXOffset||t.body.scrollLeft||t.documentElement.scrollLeft,scrollY:n.scrollY||e.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop}||{}}function d(e,t){return t>0?setTimeout(r.proxy(e,this),t):(e.call(this),void 0)}function v(e){return this.tooltip.hasClass(nt)?_:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=d.call(this,function(){this.toggle(M,e)},this.options.show.delay),void 0)}function m(e){if(this.tooltip.hasClass(nt))return _;var t=r(e.relatedTarget),n=t.closest(Q)[0]===this.tooltip[0],i=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(n||i))try{e.preventDefault(),e.stopImmediatePropagation()}catch(s){}else this.timers.hide=d.call(this,function(){this.toggle(_,e)},this.options.hide.delay,this)}function g(e){return this.tooltip.hasClass(nt)||!this.options.hide.inactive?_:(clearTimeout(this.timers.inactive),this.timers.inactive=d.call(this,function(){this.hide(e)},this.options.hide.inactive),void 0)}function y(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function w(e,n,i){r(t.body).delegate(e,(n.split?n:n.join(ft+" "))+ft,function(){var e=C.api[r.attr(this,J)];e&&!e.disabled&&i.apply(e,arguments)})}function E(e,n,s){var o,a,f,l,c,h=r(t.body),p=e[0]===t?h:e,d=e.metadata?e.metadata(s.metadata):D,v="html5"===s.metadata.type&&d?d[s.metadata.name]:D,m=e.data(s.metadata.name||"qtipopts");try{m="string"==typeof m?r.parseJSON(m):m}catch(g){}if(l=r.extend(M,{},C.defaults,s,"object"==typeof m?u(m):D,u(v||d)),a=l.position,l.id=n,"boolean"==typeof l.content.text){if(f=e.attr(l.content.attr),l.content.attr===_||!f)return _;l.content.text=f}if(a.container.length||(a.container=h),a.target===_&&(a.target=p),l.show.target===_&&(l.show.target=p),l.show.solo===M&&(l.show.solo=a.container.closest("body")),l.hide.target===_&&(l.hide.target=p),l.position.viewport===M&&(l.position.viewport=a.container),a.container=a.container.eq(0),a.at=new L(a.at,M),a.my=new L(a.my),e.data(V))if(l.overwrite)e.qtip("destroy",!0);else if(l.overwrite===_)return _;return e.attr($,n),l.suppress&&(c=e.attr("title"))&&e.removeAttr("title").attr(it,c).attr("title",""),o=new i(e,l,n,!!f),e.data(V,o),e.one("remove.qtip-"+n+" removeqtip.qtip-"+n,function(){var e;(e=r(this).data(V))&&e.destroy(!0)}),o}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}function x(e,t){var r,i,s=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+wt.join(s+" ")+s).split(" "),u=0;if(bt[t])return e.css(bt[t]);for(;r=o[u++];)if((i=e.css(r))!==n)return bt[t]=r,i}function T(e,t){return Math.ceil(parseFloat(x(e,t)))}function N(e,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=e)}var C,k,L,A,O,M=!0,_=!1,D=null,P="x",H="y",B="width",j="height",F="top",I="left",q="bottom",R="right",U="center",z="flipinvert",W="shift",X={},V="qtip",$="data-hasqtip",J="data-qtip-id",K=["ui-widget","ui-tooltip"],Q="."+V,G="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Y=V+"-fixed",Z=V+"-default",et=V+"-focus",tt=V+"-hover",nt=V+"-disabled",rt="_replacedByqTip",it="oldtitle",st={ie:function(){for(var e=3,n=t.createElement("div");(n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];);return e>4?e:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||_};k=i.prototype,k._when=function(e){return r.when.apply(r,e)},k.render=function(e){if(this.rendered||this.destroyed)return this;var t,n=this,i=this.options,s=this.cache,o=this.elements,u=i.content.text,a=i.content.title,f=i.content.button,l=i.position,c=("."+this._id+" ",[]);return r.attr(this.target[0],"aria-describedby",this._id),this.tooltip=o.tooltip=t=r("<div/>",{id:this._id,"class":[V,Z,i.style.classes,V+"-pos-"+i.position.my.abbrev()].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:"mouse"===l.target&&l.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":_,"aria-describedby":this._id+"-content","aria-hidden":M}).toggleClass(nt,this.disabled).attr(J,this.id).data(V,this).appendTo(l.container).append(o.content=r("<div />",{"class":V+"-content",id:this._id+"-content","aria-atomic":M})),this.rendered=-1,this.positioning=M,a&&(this._createTitle(),r.isFunction(a)||c.push(this._updateTitle(a,_))),f&&this._createButton(),r.isFunction(u)||c.push(this._updateContent(u,_)),this.rendered=M,this._setWidget(),r.each(X,function(e){var t;"render"===this.initialize&&(t=this(n))&&(n.plugins[e]=t)}),this._unassignEvents(),this._assignEvents(),this._when(c).then(function(){n._trigger("render"),n.positioning=_,n.hiddenDuringWait||!i.show.ready&&!e||n.toggle(M,s.event,_),n.hiddenDuringWait=_}),C.api[this.id]=this,this},k.destroy=function(e){function t(){if(!this.destroyed){this.destroyed=M;var e=this.target,t=e.attr(it);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),r.each(this.plugins,function(){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),e.removeData(V).removeAttr(J).removeAttr($).removeAttr("aria-describedby"),this.options.suppress&&t&&e.attr("title",t).removeAttr(it),this._unbind(e),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=D,delete C.api[this.id]}}return this.destroyed?this.target:(e===M&&"hide"!==this.triggering||!this.rendered?t.call(this):(this.tooltip.one("tooltiphidden",r.proxy(t,this)),!this.triggering&&this.hide()),this.target)},A=k.checks={builtin:{"^id$":function(e,t,n,i){var s=n===M?C.nextid:n,o=V+"-"+s;s!==_&&s.length>0&&!r("#"+o).length?(this._id=o,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):e[t]=i},"^prerender":function(e,t,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,n){this._updateContent(n)},"^content.attr$":function(e,t,n,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(n))},"^content.title$":function(e,t,n){return n?(n&&!this.elements.title&&this._createTitle(),this._updateTitle(n),void 0):this._removeTitle()},"^content.button$":function(e,t,n){this._updateButton(n)},"^content.title.(text|button)$":function(e,t,n){this.set("content."+t,n)},"^position.(my|at)$":function(e,t,n){"string"==typeof n&&(e[t]=new L(n,"at"===t))},"^position.container$":function(e,t,n){this.rendered&&this.tooltip.appendTo(n)},"^show.ready$":function(e,t,n){n&&(!this.rendered&&this.render(M)||this.toggle(M))},"^style.classes$":function(e,t,n,r){this.rendered&&this.tooltip.removeClass(r).addClass(n)},"^style.(width|height)":function(e,t,n){this.rendered&&this.tooltip.css(t,n)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(e,t,n){this.rendered&&this.tooltip.toggleClass(Z,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(e,t,n){this.rendered&&this.tooltip[(r.isFunction(n)?"":"un")+"bind"]("tooltip"+t,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var e=this.options.position;this.tooltip.attr("tracking","mouse"===e.target&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},k.get=function(e){if(this.destroyed)return this;var t=f(this.options,e.toLowerCase()),n=t[0][t[1]];return n.precedance?n.string():n};var ot=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,ut=/^prerender|show\.ready/i;k.set=function(e,t){if(this.destroyed)return this;var n,i=this.rendered,s=_,o=this.options;return this.checks,"string"==typeof e?(n=e,e={},e[n]=t):e=r.extend({},e),r.each(e,function(t,n){if(i&&ut.test(t))return delete e[t],void 0;var u,l=f(o,t.toLowerCase());u=l[0][l[1]],l[0][l[1]]=n&&n.nodeType?r(n):n,s=ot.test(t)||s,e[t]=[l[0],l[1],n,u]}),u(o),this.positioning=M,r.each(e,r.proxy(l,this)),this.positioning=_,this.rendered&&this.tooltip[0].offsetWidth>0&&s&&this.reposition("mouse"===o.position.target?D:this.cache.event),this},k._update=function(e,t){var n=this,i=this.cache;return this.rendered&&e?(r.isFunction(e)&&(e=e.call(this.elements.target,i.event,this)||""),r.isFunction(e.then)?(i.waiting=M,e.then(function(e){return i.waiting=_,n._update(e,t)},D,function(e){return n._update(e,t)})):e===_||!e&&""!==e?_:(e.jquery&&e.length>0?t.empty().append(e.css({display:"block",visibility:"visible"})):t.html(e),this._waitForContent(t).then(function(e){e.images&&e.images.length&&n.rendered&&n.tooltip[0].offsetWidth>0&&n.reposition(i.event,!e.length)}))):_},k._waitForContent=function(e){var t=this.cache;return t.waiting=M,(r.fn.imagesLoaded?e.imagesLoaded():r.Deferred().resolve([])).done(function(){t.waiting=_}).promise()},k._updateContent=function(e,t){this._update(e,this.elements.content,t)},k._updateTitle=function(e,t){this._update(e,this.elements.title,t)===_&&this._removeTitle(_)},k._createTitle=function(){var e=this.elements,t=this._id+"-title";e.titlebar&&this._removeTitle(),e.titlebar=r("<div />",{"class":V+"-titlebar "+(this.options.style.widget?h("header"):"")}).append(e.title=r("<div />",{id:t,"class":V+"-title","aria-atomic":M})).insertBefore(e.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){r(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){r(this).toggleClass("ui-state-hover","mouseover"===e.type)}),this.options.content.button&&this._createButton()},k._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=D,e!==_&&this.reposition())},k.reposition=function(n,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=M;var s,o,u=this.cache,f=this.tooltip,l=this.options.position,c=l.target,h=l.my,p=l.at,d=l.viewport,v=l.container,m=l.adjust,g=m.method.split(" "),y=f.outerWidth(_),w=f.outerHeight(_),E=0,S=0,x=f.css("position"),T={left:0,top:0},N=f[0].offsetWidth>0,C=n&&"scroll"===n.type,k=r(e),L=v[0].ownerDocument,A=this.mouse;if(r.isArray(c)&&2===c.length)p={x:I,y:F},T={left:c[0],top:c[1]};else if("mouse"===c)p={x:I,y:F},!A||!A.pageX||!m.mouse&&n&&n.pageX?n&&n.pageX||((!m.mouse||this.options.show.distance)&&u.origin&&u.origin.pageX?n=u.origin:(!n||n&&("resize"===n.type||"scroll"===n.type))&&(n=u.event)):n=A,"static"!==x&&(T=v.offset()),L.body.offsetWidth!==(e.innerWidth||L.documentElement.clientWidth)&&(o=r(t.body).offset()),T={left:n.pageX-T.left+(o&&o.left||0),top:n.pageY-T.top+(o&&o.top||0)},m.mouse&&C&&A&&(T.left-=(A.scrollX||0)-k.scrollLeft(),T.top-=(A.scrollY||0)-k.scrollTop());else{if("event"===c?n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?u.target=r(n.target):n.target||(u.target=this.elements.target):"event"!==c&&(u.target=r(c.jquery?c:this.elements.target)),c=u.target,c=r(c).eq(0),0===c.length)return this;c[0]===t||c[0]===e?(E=st.iOS?e.innerWidth:c.width(),S=st.iOS?e.innerHeight:c.height(),c[0]===e&&(T={top:(d||c).scrollTop(),left:(d||c).scrollLeft()})):X.imagemap&&c.is("area")?s=X.imagemap(this,c,p,X.viewport?g:_):X.svg&&c&&c[0].ownerSVGElement?s=X.svg(this,c,p,X.viewport?g:_):(E=c.outerWidth(_),S=c.outerHeight(_),T=c.offset()),s&&(E=s.width,S=s.height,o=s.offset,T=s.position),T=this.reposition.offset(c,T,v),(st.iOS>3.1&&st.iOS<4.1||st.iOS>=4.3&&st.iOS<4.33||!st.iOS&&"fixed"===x)&&(T.left-=k.scrollLeft(),T.top-=k.scrollTop()),(!s||s&&s.adjustable!==_)&&(T.left+=p.x===R?E:p.x===U?E/2:0,T.top+=p.y===q?S:p.y===U?S/2:0)}return T.left+=m.x+(h.x===R?-y:h.x===U?-y/2:0),T.top+=m.y+(h.y===q?-w:h.y===U?-w/2:0),X.viewport?(T.adjusted=X.viewport(this,T,l,E,S,y,w),o&&T.adjusted.left&&(T.left+=o.left),o&&T.adjusted.top&&(T.top+=o.top)):T.adjusted={left:0,top:0},this._trigger("move",[T,d.elem||d],n)?(delete T.adjusted,i===_||!N||isNaN(T.left)||isNaN(T.top)||"mouse"===c||!r.isFunction(l.effect)?f.css(T):r.isFunction(l.effect)&&(l.effect.call(f,this,r.extend({},T)),f.queue(function(e){r(this).css({opacity:"",height:""}),st.ie&&this.style.removeAttribute("filter"),e()})),this.positioning=_,this):this},k.reposition.offset=function(e,n,i){function s(e,t){n.left+=t*e.scrollLeft(),n.top+=t*e.scrollTop()}if(!i[0])return n;var o,u,a,f,l=r(e[0].ownerDocument),c=!!st.ie&&"CSS1Compat"!==t.compatMode,h=i[0];do"static"!==(u=r.css(h,"position"))&&("fixed"===u?(a=h.getBoundingClientRect(),s(l,-1)):(a=r(h).position(),a.left+=parseFloat(r.css(h,"borderLeftWidth"))||0,a.top+=parseFloat(r.css(h,"borderTopWidth"))||0),n.left-=a.left+(parseFloat(r.css(h,"marginLeft"))||0),n.top-=a.top+(parseFloat(r.css(h,"marginTop"))||0),o||"hidden"===(f=r.css(h,"overflow"))||"visible"===f||(o=r(h)));while(h=h.offsetParent);return o&&(o[0]!==l[0]||c)&&s(o,1),n};var at=(L=k.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,U).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var n=e.charAt(0);this.precedance="t"===n||"b"===n?H:P}).prototype;at.invert=function(e,t){this[e]=this[e]===I?R:this[e]===R?I:t||this[e]},at.string=function(){var e=this.x,t=this.y;return e===t?e:this.precedance===H||this.forceY&&"center"!==t?t+" "+e:e+" "+t},at.abbrev=function(){var e=this.string().split(" ");return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},at.clone=function(){return new L(this.string(),this.forceY)},k.toggle=function(e,n){var i=this.cache,s=this.options,o=this.tooltip;if(n){if(/over|enter/.test(n.type)&&/out|leave/.test(i.event.type)&&s.show.target.add(n.target).length===s.show.target.length&&o.has(n.relatedTarget).length)return this;i.event=p(n)}if(this.waiting&&!e&&(this.hiddenDuringWait=M),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var u,a,f,l=e?"show":"hide",c=this.options[l],h=(this.options[e?"hide":"show"],this.options.position),d=this.options.content,v=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=e||1===c.target.length,y=!n||c.target.length<2||i.target[0]===n.target;return(typeof e).search("boolean|number")&&(e=!m),u=!o.is(":animated")&&m===e&&y,a=u?D:!!this._trigger(l,[90]),this.destroyed?this:(a!==_&&e&&this.focus(n),!a||u?this:(r.attr(o[0],"aria-hidden",!e),e?(i.origin=p(this.mouse),r.isFunction(d.text)&&this._updateContent(d.text,_),r.isFunction(d.title)&&this._updateTitle(d.title,_),!O&&"mouse"===h.target&&h.adjust.mouse&&(r(t).bind("mousemove."+V,this._storeMouse),O=M),v||o.css("width",o.outerWidth(_)),this.reposition(n,arguments[2]),v||o.css("width",""),c.solo&&("string"==typeof c.solo?r(c.solo):r(Q,c.solo)).not(o).not(c.target).qtip("hide",r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete i.origin,O&&!r(Q+'[tracking="true"]:visible',c.solo).not(o).length&&(r(t).unbind("mousemove."+V),O=_),this.blur(n)),f=r.proxy(function(){e?(st.ie&&o[0].style.removeAttribute("filter"),o.css("overflow",""),"string"==typeof c.autofocus&&r(this.options.show.autofocus,o).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):o.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(e?"visible":"hidden")},this),c.effect===_||g===_?(o[l](),f()):r.isFunction(c.effect)?(o.stop(1,1),c.effect.call(o,this),o.queue("fx",function(e){f(),e()})):o.fadeTo(90,e?1:0,f),e&&c.target.trigger("qtip-"+this.id+"-inactive"),this))},k.show=function(e){return this.toggle(M,e)},k.hide=function(e){return this.toggle(_,e)},k.focus=function(e){if(!this.rendered||this.destroyed)return this;var t=r(Q),n=this.tooltip,i=parseInt(n[0].style.zIndex,10),s=C.zindex+t.length;return n.hasClass(et)||this._trigger("focus",[s],e)&&(i!==s&&(t.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+et).qtip("blur",e)),n.addClass(et)[0].style.zIndex=s),this},k.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(et),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},k.disable=function(e){return this.destroyed?this:("toggle"===e?e=this.rendered?!this.tooltip.hasClass(nt):!this.disabled:"boolean"!=typeof e&&(e=M),this.rendered&&this.tooltip.toggleClass(nt,e).attr("aria-disabled",e),this.disabled=!!e,this)},k.enable=function(){return this.disable(_)},k._createButton=function(){var e=this,t=this.elements,n=t.tooltip,i=this.options.content.button,s="string"==typeof i,o=s?i:"Close tooltip";t.button&&t.button.remove(),t.button=i.jquery?i:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":V+"-icon"),title:o,"aria-label":o}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),t.button.appendTo(t.titlebar||n).attr("role","button").click(function(t){return n.hasClass(nt)||e.hide(t),_})},k._updateButton=function(e){if(!this.rendered)return _;var t=this.elements.button;e?this._createButton():t.remove()},k._setWidget=function(){var e=this.options.style.widget,t=this.elements,n=t.tooltip,r=n.hasClass(nt);n.removeClass(nt),nt=e?"ui-state-disabled":"qtip-disabled",n.toggleClass(nt,r),n.toggleClass("ui-helper-reset "+h(),e).toggleClass(Z,this.options.style.def&&!e),t.content&&t.content.toggleClass(h("content"),e),t.titlebar&&t.titlebar.toggleClass(h("header"),e),t.button&&t.button.toggleClass(V+"-icon",!e)},k._storeMouse=function(e){(this.mouse=p(e)).type="mousemove"},k._bind=function(e,t,n,i,s){var o="."+this._id+(i?"-"+i:"");t.length&&r(e).bind((t.split?t:t.join(o+" "))+o,r.proxy(n,s||this))},k._unbind=function(e,t){r(e).unbind("."+this._id+(t?"-"+t:""))};var ft="."+V;r(function(){w(Q,["mouseenter","mouseleave"],function(e){var t="mouseenter"===e.type,n=r(e.currentTarget),i=r(e.relatedTarget||e.target),s=this.options;t?(this.focus(e),n.hasClass(Y)&&!n.hasClass(nt)&&clearTimeout(this.timers.hide)):"mouse"===s.position.target&&s.hide.event&&s.show.target&&!i.closest(s.show.target[0]).length&&this.hide(e),n.toggleClass(tt,t)}),w("["+J+"]",G,g)}),k._trigger=function(e,t,n){var i=r.Event("tooltip"+e);return i.originalEvent=n&&r.extend({},n)||this.cache.event||D,this.triggering=e,this.tooltip.trigger(i,[this].concat(t||[])),this.triggering=_,!i.isDefaultPrevented()},k._bindEvents=function(e,t,n,i,s,o){if(i.add(n).length===i.length){var u=[];t=r.map(t,function(t){var n=r.inArray(t,e);return n>-1?(u.push(e.splice(n,1)[0]),void 0):t}),u.length&&this._bind(n,u,function(e){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?o:s).call(this,e)})}this._bind(n,e,s),this._bind(i,t,o)},k._assignInitialEvents=function(e){function t(e){return this.disabled||this.destroyed?_:(this.cache.event=p(e),this.cache.target=e?r(e.target):[n],clearTimeout(this.timers.show),this.timers.show=d.call(this,function(){this.render("object"==typeof e||i.show.ready)},i.show.delay),void 0)}var i=this.options,s=i.show.target,o=i.hide.target,u=i.show.event?r.trim(""+i.show.event).split(" "):[],a=i.hide.event?r.trim(""+i.hide.event).split(" "):[];/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&a.push("mouseleave"),this._bind(s,"mousemove",function(e){this._storeMouse(e),this.cache.onTarget=M}),this._bindEvents(u,a,s,o,t,function(){clearTimeout(this.timers.show)}),(i.show.ready||i.prerender)&&t.call(this,e)},k._assignEvents=function(){var n=this,i=this.options,s=i.position,o=this.tooltip,u=i.show.target,f=i.hide.target,l=s.container,c=s.viewport,h=r(t),p=(r(t.body),r(e)),d=i.show.event?r.trim(""+i.show.event).split(" "):[],w=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(e,t){n._bind(o,"toggle"===e?["tooltipshow","tooltiphide"]:["tooltip"+e],t,null,o)}),/mouse(out|leave)/i.test(i.hide.event)&&"window"===i.hide.leave&&this._bind(h,["mouseout","blur"],function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||this.hide(e)}),i.hide.fixed?f=f.add(o.addClass(Y)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(f,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(l.closest("html"),["mousedown","touchstart"],function(e){var t=r(e.target),n=this.rendered&&!this.tooltip.hasClass(nt)&&this.tooltip[0].offsetWidth>0,i=t.parents(Q).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||i||this.target.has(t[0]).length||!n||this.hide(e)}),"number"==typeof i.hide.inactive&&(this._bind(u,"qtip-"+this.id+"-inactive",g),this._bind(f.add(o),C.inactiveEvents,g,"-inactive")),this._bindEvents(d,w,u,f,v,m),this._bind(u.add(o),"mousemove",function(e){if("number"==typeof i.hide.distance){var t=this.cache.origin||{},n=this.options.hide.distance,r=Math.abs;(r(e.pageX-t.pageX)>=n||r(e.pageY-t.pageY)>=n)&&this.hide(e)}this._storeMouse(e)}),"mouse"===s.target&&s.adjust.mouse&&(i.hide.event&&this._bind(u,["mouseenter","mouseleave"],function(e){this.cache.onTarget="mouseenter"===e.type}),this._bind(h,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(nt)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(s.adjust.resize||c.length)&&this._bind(r.event.special.resize?c:p,"resize",y),s.adjust.scroll&&this._bind(p.add(s.container),"scroll",y)},k._unassignEvents=function(){var n=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],e,t];this._unbind(r([]).pushStack(r.grep(n,function(e){return"object"==typeof e})))},C=r.fn.qtip=function(e,t,i){var s=(""+e).toLowerCase(),o=D,a=r.makeArray(arguments).slice(1),f=a[a.length-1],l=this[0]?r.data(this[0],V):D;return!arguments.length&&l||"api"===s?l:"string"==typeof e?(this.each(function(){var e=r.data(this,V);if(!e)return M;if(f&&f.timeStamp&&(e.cache.event=f),!t||"option"!==s&&"options"!==s)e[s]&&e[s].apply(e,a);else{if(i===n&&!r.isPlainObject(t))return o=e.get(t),_;e.set(t,i)}}),o!==D?o:this):"object"!=typeof e&&arguments.length?void 0:(l=u(r.extend(M,{},e)),this.each(function(e){var t,n;return n=r.isArray(l.id)?l.id[e]:l.id,n=!n||n===_||n.length<1||C.api[n]?C.nextid++:n,t=E(r(this),n,l),t===_?M:(C.api[n]=t,r.each(X,function(){"initialize"===this.initialize&&this(t)}),t._assignInitialEvents(f),void 0)}))},r.qtip=i,C.api={},r.each({attr:function(e,t){if(this.length){var n=this[0],i="title",s=r.data(n,"qtip");if(e===i&&s&&"object"==typeof s&&s.options.suppress)return arguments.length<2?r.attr(n,it):(s&&s.options.content.attr===i&&s.cache.attr&&s.set("content.text",t),this.attr(it,t))}return r.fn["attr"+rt].apply(this,arguments)},clone:function(e){var t=(r([]),r.fn["clone"+rt].apply(this,arguments));return e||t.filter("["+it+"]").attr("title",function(){return r.attr(this,it)}).removeAttr(it),t}},function(e,t){if(!t||r.fn[e+rt])return M;var n=r.fn[e+rt]=r.fn[e];r.fn[e]=function(){return t.apply(this,arguments)||n.apply(this,arguments)}}),r.ui||(r["cleanData"+rt]=r.cleanData,r.cleanData=function(e){for(var t,n=0;(t=r(e[n])).length;n++)if(t.attr($))try{t.triggerHandler("removeqtip")}catch(i){}r["cleanData"+rt].apply(this,arguments)}),C.version="2.2.0",C.nextid=0,C.inactiveEvents=G,C.zindex=15e3,C.defaults={prerender:_,id:_,overwrite:M,suppress:M,content:{text:M,attr:"title",title:_,button:_},position:{my:"top left",at:"bottom right",target:_,container:_,viewport:_,adjust:{x:0,y:0,mouse:M,scroll:M,resize:M,method:"flipinvert flipinvert"},effect:function(e,t){r(this).animate(t,{duration:200,queue:_})}},show:{target:_,event:"mouseenter",effect:M,delay:90,solo:_,ready:_,autofocus:_},hide:{target:_,event:"mouseleave",effect:M,delay:0,fixed:_,inactive:_,leave:"window",distance:_},style:{classes:"",widget:_,width:_,height:_,def:M},events:{render:D,move:D,show:D,hide:D,toggle:D,visible:D,hidden:D,focus:D,blur:D}};var lt,ct="margin",ht="border",pt="color",dt="background-color",vt="transparent",mt=" !important",gt=!!t.createElement("canvas").getContext,yt=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,bt={},wt=["Webkit","O","Moz","ms"];if(gt)var Et=e.devicePixelRatio||1,St=function(){var e=t.createElement("canvas").getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}(),xt=Et/St;else var Tt=function(e,t,n){return"<qtipvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'};r.extend(N.prototype,{init:function(e){var t,n;n=this.element=e.elements.tip=r("<div />",{"class":V+"-tip"}).prependTo(e.tooltip),gt?(t=r("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=Tt("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),e._bind(r("*",n).add(n),["click","mousedown"],function(e){e.stopPropagation()},this._ns)),e._bind(e.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(e){var t=this.qtip.elements.titlebar;return t&&(e.y===F||e.y===U&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(M))},_parseCorner:function(e){var t=this.qtip.options.position.my;return e===_||t===_?e=_:e===M?e=new L(t.string()):e.string||(e=new L(e),e.fixed=M),e},_parseWidth:function(e,t,n){var r=this.qtip.elements,i=ht+S(t)+"Width";return(n?T(n,i):T(r.content,i)||T(this._useTitle(e)&&r.titlebar||r.content,i)||T(r.tooltip,i))||0},_parseRadius:function(e){var t=this.qtip.elements,n=ht+S(e.y)+S(e.x)+"Radius";return st.ie<9?0:T(this._useTitle(e)&&t.titlebar||t.content,n)||T(t.tooltip,n)||0},_invalidColour:function(e,t,n){var r=e.css(t);return!r||n&&r===e.css(n)||yt.test(r)?_:r},_parseColours:function(e){var t=this.qtip.elements,n=this.element.css("cssText",""),i=ht+S(e[e.precedance])+S(pt),s=this._useTitle(e)&&t.titlebar||t.content,o=this._invalidColour,u=[];return u[0]=o(n,dt)||o(s,dt)||o(t.content,dt)||o(t.tooltip,dt)||n.css(dt),u[1]=o(n,i,pt)||o(s,i,pt)||o(t.content,i,pt)||o(t.tooltip,i,pt)||t.tooltip.css(i),r("*",n).add(n).css("cssText",dt+":"+vt+mt+";"+ht+":0"+mt+";"),u},_calculateSize:function(e){var t,n,r,i=e.precedance===H,s=this.options.width,o=this.options.height,u="c"===e.abbrev(),a=(i?s:o)*(u?.5:1),f=Math.pow,l=Math.round,c=Math.sqrt(f(a,2)+f(o,2)),h=[this.border/a*c,this.border/o*c];return h[2]=Math.sqrt(f(h[0],2)-f(this.border,2)),h[3]=Math.sqrt(f(h[1],2)-f(this.border,2)),t=c+h[2]+h[3]+(u?0:h[0]),n=t/c,r=[l(n*s),l(n*o)],i?r:r.reverse()},_calculateTip:function(e,t,n){n=n||1,t=t||this.size;var r=t[0]*n,i=t[1]*n,s=Math.ceil(r/2),o=Math.ceil(i/2),u={br:[0,0,r,i,r,0],bl:[0,0,r,0,0,i],tr:[0,i,r,0,r,i],tl:[0,0,0,i,r,i],tc:[0,i,s,0,r,i],bc:[0,0,r,0,s,i],rc:[0,0,r,o,0,i],lc:[r,0,r,i,0,o]};return u.lt=u.br,u.rt=u.bl,u.lb=u.tr,u.rb=u.tl,u[e.abbrev()]},_drawCoords:function(e,t){e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.closePath()},create:function(){var e=this.corner=(gt||st.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=e.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,n){if(!this.enabled)return this;var i,s,o,u,f,l,c,h,p=this.qtip.elements,d=this.element,v=d.children(),m=this.options,g=this.size,y=m.mimic,b=Math.round;t||(t=this.qtip.cache.corner||this.corner),y===_?y=t:(y=new L(y),y.precedance=t.precedance,"inherit"===y.x?y.x=t.x:"inherit"===y.y?y.y=t.y:y.x===y.y&&(y[t.precedance]=t[t.precedance])),s=y.precedance,t.precedance===P?this._swapDimensions():this._resetDimensions(),i=this.color=this._parseColours(t),i[1]!==vt?(h=this.border=this._parseWidth(t,t[t.precedance]),m.border&&1>h&&!yt.test(i[1])&&(i[0]=i[1]),this.border=h=m.border!==M?m.border:h):this.border=h=0,c=this.size=this._calculateSize(t),d.css({width:c[0],height:c[1],lineHeight:c[1]+"px"}),l=t.precedance===H?[b(y.x===I?h:y.x===R?c[0]-g[0]-h:(c[0]-g[0])/2),b(y.y===F?c[1]-g[1]:0)]:[b(y.x===I?c[0]-g[0]:0),b(y.y===F?h:y.y===q?c[1]-g[1]-h:(c[1]-g[1])/2)],gt?(o=v[0].getContext("2d"),o.restore(),o.save(),o.clearRect(0,0,6e3,6e3),u=this._calculateTip(y,g,xt),f=this._calculateTip(y,this.size,xt),v.attr(B,c[0]*xt).attr(j,c[1]*xt),v.css(B,c[0]).css(j,c[1]),this._drawCoords(o,f),o.fillStyle=i[1],o.fill(),o.translate(l[0]*xt,l[1]*xt),this._drawCoords(o,u),o.fillStyle=i[0],o.fill()):(u=this._calculateTip(y),u="m"+u[0]+","+u[1]+" l"+u[2]+","+u[3]+" "+u[4]+","+u[5]+" xe",l[2]=h&&/^(r|b)/i.test(t.string())?8===st.ie?2:1:0,v.css({coordsize:c[0]+h+" "+(c[1]+h),antialias:""+(y.string().indexOf(U)>-1),left:l[0]-l[2]*Number(s===P),top:l[1]-l[2]*Number(s===H),width:c[0]+h,height:c[1]+h}).each(function(e){var t=r(this);t[t.prop?"prop":"attr"]({coordsize:c[0]+h+" "+(c[1]+h),path:u,fillcolor:i[0],filled:!!e,stroked:!e}).toggle(!!h||!!e),!e&&t.html(Tt("stroke",'weight="'+2*h+'px" color="'+i[1]+'" miterlimit="1000" joinstyle="miter"'))})),e.opera&&setTimeout(function(){p.tip.css({display:"inline-block",visibility:"visible"})},1),n!==_&&this.calculate(t,c)},calculate:function(e,t){if(!this.enabled)return _;var n,i,s=this,o=this.qtip.elements,u=this.element,a=this.options.offset,f=(o.tooltip.hasClass("ui-widget"),{});return e=e||this.corner,n=e.precedance,t=t||this._calculateSize(e),i=[e.x,e.y],n===P&&i.reverse(),r.each(i,function(r,i){var u,l,h;i===U?(u=n===H?I:F,f[u]="50%",f[ct+"-"+u]=-Math.round(t[n===H?0:1]/2)+a):(u=s._parseWidth(e,i,o.tooltip),l=s._parseWidth(e,i,o.content),h=s._parseRadius(e),f[i]=Math.max(-s.border,r?l:a+(h>u?h:-u)))}),f[e[n]]-=t[n===P?0:1],u.css({margin:"",top:"",bottom:"",left:"",right:""}).css(f),f},reposition:function(e,t,r){function i(e,t,n,r,i){e===W&&f.precedance===t&&l[r]&&f[n]!==U?f.precedance=f.precedance===P?H:P:e!==W&&l[r]&&(f[t]=f[t]===U?l[r]>0?r:i:f[t]===r?i:r)}function s(e,t,i){f[e]===U?m[ct+"-"+t]=v[e]=o[ct+"-"+t]-l[t]:(u=o[i]!==n?[l[t],-o[t]]:[-l[t],o[t]],(v[e]=Math.max(u[0],u[1]))>u[0]&&(r[t]-=l[t],v[t]=_),m[o[i]!==n?i:t]=v[e])}if(this.enabled){var o,u,a=t.cache,f=this.corner.clone(),l=r.adjusted,h=t.options.position.adjust.method.split(" "),p=h[0],d=h[1]||h[0],v={left:_,top:_,x:0,y:0},m={};this.corner.fixed!==M&&(i(p,P,H,I,R),i(d,H,P,F,q),f.string()===a.corner.string()||a.cornerTop===l.top&&a.cornerLeft===l.left||this.update(f,_)),o=this.calculate(f),o.right!==n&&(o.left=-o.right),o.bottom!==n&&(o.top=-o.bottom),o.user=this.offset,(v.left=p===W&&!!l.left)&&s(P,I,R),(v.top=d===W&&!!l.top)&&s(H,F,q),this.element.css(m).toggle(!(v.x&&v.y||f.x===U&&v.y||f.y===U&&v.x)),r.left-=o.left.charAt?o.user:p!==W||v.top||!v.left&&!v.top?o.left+this.border:0,r.top-=o.top.charAt?o.user:d!==W||v.left||!v.left&&!v.top?o.top+this.border:0,a.cornerLeft=l.left,a.cornerTop=l.top,a.corner=f.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),lt=X.tip=function(e){return new N(e,e.options.style.tip)},lt.initialize="render",lt.sanitize=function(e){if(e.style&&"tip"in e.style){var t=e.style.tip;"object"!=typeof t&&(t=e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=M)}},A.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(e){this.size=[e.width,e.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},r.extend(M,C.defaults,{style:{tip:{corner:M,mimic:_,width:6,height:6,border:M,offset:0}}}),X.viewport=function(n,r,i,s,o,u,f){function l(e,t,n,i,s,o,u,a,f){var l=r[s],c=x[e],p=T[e],b=n===W,E=c===s?f:c===o?-f:-f/2,S=p===s?a:p===o?-a:-a/2,N=y[s]+w[s]-(v?0:d[s]),C=N-l,k=l+f-(u===B?m:g)-N,L=E-(x.precedance===e||c===x[t]?S:0)-(p===U?a/2:0);return b?(L=(c===s?1:-1)*E,r[s]+=C>0?C:k>0?-k:0,r[s]=Math.max(-d[s]+w[s],l-L,Math.min(Math.max(-d[s]+w[s]+(u===B?m:g),l+L),r[s],"center"===c?l-E:1e9))):(i*=n===z?2:0,C>0&&(c!==s||k>0)?(r[s]-=L+i,h.invert(e,s)):k>0&&(c!==o||C>0)&&(r[s]-=(c===U?-L:L)+i,h.invert(e,o)),r[s]<y&&-r[s]>k&&(r[s]=l,h=x.clone())),r[s]-l}var c,h,p,d,v,m,g,y,w,E=i.target,S=n.elements.tooltip,x=i.my,T=i.at,N=i.adjust,C=N.method.split(" "),k=C[0],L=C[1]||C[0],A=i.viewport,O=i.container,M=n.cache,D={left:0,top:0};return A.jquery&&E[0]!==e&&E[0]!==t.body&&"none"!==N.method?(d=O.offset()||D,v="static"===O.css("position"),c="fixed"===S.css("position"),m=A[0]===e?A.width():A.outerWidth(_),g=A[0]===e?A.height():A.outerHeight(_),y={left:c?0:A.scrollLeft(),top:c?0:A.scrollTop()},w=A.offset()||D,("shift"!==k||"shift"!==L)&&(h=x.clone()),D={left:"none"!==k?l(P,H,k,N.x,I,R,B,s,u):0,top:"none"!==L?l(H,P,L,N.y,F,q,j,o,f):0},h&&M.lastClass!==(p=V+"-pos-"+h.abbrev())&&S.removeClass(n.cache.lastClass).addClass(n.cache.lastClass=p),D):D},X.polys={polygon:function(e,t){var n,r,i,s={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:_},o=0,u=[],a=1,f=1,l=0,c=0;for(o=e.length;o--;)n=[parseInt(e[--o],10),parseInt(e[o+1],10)],n[0]>s.position.right&&(s.position.right=n[0]),n[0]<s.position.left&&(s.position.left=n[0]),n[1]>s.position.bottom&&(s.position.bottom=n[1]),n[1]<s.position.top&&(s.position.top=n[1]),u.push(n);if(r=s.width=Math.abs(s.position.right-s.position.left),i=s.height=Math.abs(s.position.bottom-s.position.top),"c"===t.abbrev())s.position={left:s.position.left+s.width/2,top:s.position.top+s.height/2};else{for(;r>0&&i>0&&a>0&&f>0;)for(r=Math.floor(r/2),i=Math.floor(i/2),t.x===I?a=r:t.x===R?a=s.width-r:a+=Math.floor(r/2),t.y===F?f=i:t.y===q?f=s.height-i:f+=Math.floor(i/2),o=u.length;o--&&!(u.length<2);)l=u[o][0]-s.position.left,c=u[o][1]-s.position.top,(t.x===I&&l>=a||t.x===R&&a>=l||t.x===U&&(a>l||l>s.width-a)||t.y===F&&c>=f||t.y===q&&f>=c||t.y===U&&(f>c||c>s.height-f))&&u.splice(o,1);s.position={left:u[0][0],top:u[0][1]}}return s},rect:function(e,t,n,r){return{width:Math.abs(n-e),height:Math.abs(r-t),position:{left:Math.min(e,n),top:Math.min(t,r)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(e,t,n,r,i){var s=X.polys._angles[i.abbrev()],o=0===s?0:n*Math.cos(s*Math.PI),u=r*Math.sin(s*Math.PI);return{width:2*n-Math.abs(o),height:2*r-Math.abs(u),position:{left:e+o,top:t+u},adjustable:_}},circle:function(e,t,n,r){return X.polys.ellipse(e,t,n,n,r)}},X.svg=function(e,n,i){for(var s,o,u,a,f,l,c,h,p,d,v,m=r(t),g=n[0],y=r(g.ownerSVGElement),w=1,E=1,S=!0;!g.getBBox;)g=g.parentNode;if(!g.getBBox||!g.parentNode)return _;s=y.attr("width")||y.width()||parseInt(y.css("width"),10),o=y.attr("height")||y.height()||parseInt(y.css("height"),10);var x=(parseInt(n.css("stroke-width"),10)||0)/2;switch(x&&(w+=x/s,E+=x/o),g.nodeName){case"ellipse":case"circle":d=X.polys.ellipse(g.cx.baseVal.value,g.cy.baseVal.value,(g.rx||g.r).baseVal.value+x,(g.ry||g.r).baseVal.value+x,i);break;case"line":case"polygon":case"polyline":for(p=g.points||[{x:g.x1.baseVal.value,y:g.y1.baseVal.value},{x:g.x2.baseVal.value,y:g.y2.baseVal.value}],d=[],h=-1,l=p.numberOfItems||p.length;++h<l;)c=p.getItem?p.getItem(h):p[h],d.push.apply(d,[c.x,c.y]);d=X.polys.polygon(d,i);break;default:d=g.getBoundingClientRect(),d={width:d.width,height:d.height,position:{left:d.left,top:d.top}},S=!1}return v=d.position,y=y[0],S&&(y.createSVGPoint&&(u=g.getScreenCTM(),p=y.createSVGPoint(),p.x=v.left,p.y=v.top,a=p.matrixTransform(u),v.left=a.x,v.top=a.y),y.viewBox&&(f=y.viewBox.baseVal)&&f.width&&f.height&&(w*=s/f.width,E*=o/f.height)),v.left+=m.scrollLeft(),v.top+=m.scrollTop(),d}})}(window,document),define("vendor/plugins/qtip/qtip-wrapper",["require","vendor/plugins/qtip/qtip"],function(){return jQuery.fn.qtip2=function(e,t){(!routing.mobile||t)&&$(this).each(function(){$(this).qtip(e)})},function(){}}),!function(e){if("function"==typeof define&&define.amd&&define("uikit",[],function(){var t=e(window,window.jQuery,window.document);return t.load=function(e,n,r,i){var s,o=e.split(","),u=[],a=(i.config&&i.config.uikit&&i.config.uikit.base?i.config.uikit.base:"").replace(/\/+$/g,"");if(!a)throw new Error("Please define base path to uikit in the requirejs config.");for(s=0;s<o.length;s+=1){var f=o[s].replace(/\./g,"/");u.push(a+"/js/addons/"+f)}n(u,function(){r(t)})},t}),!window.jQuery)throw new Error("UIkit requires jQuery");window&&window.jQuery&&e(window,window.jQuery,window.document)}(function(e,t,n){var r=t.UIkit||{},i=t("html"),s=t(window);return r.fn?r:(r.version="2.6.0",r.fn=function(e,n){var i=arguments,s=e.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),o=s[1],u=s[2];return r[o]?this.each(function(){var e=t(this),s=e.data(o);s||e.data(o,s=new r[o](this,u?void 0:n)),u&&s[u].apply(s,Array.prototype.slice.call(i,1))}):(t.error("UIkit component ["+o+"] does not exist."),this)},r.support={},r.support.transition=function(){var e=function(){var e,t=n.body||n.documentElement,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),r.support.animation=function(){var e=function(){var e,t=n.body||n.documentElement,r={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),r.support.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},r.support.touch="ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||e.DocumentTouch&&document instanceof e.DocumentTouch||e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints>0||e.navigator.pointerEnabled&&e.navigator.maxTouchPoints>0||!1,r.support.mutationobserver=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver||null,r.Utils={},r.Utils.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}},r.Utils.removeCssRules=function(e){var t,n,r,i,s,o,u,a,f,l;e&&setTimeout(function(){try{for(l=document.styleSheets,i=0,u=l.length;u>i;i++){for(r=l[i],n=[],r.cssRules=r.cssRules,t=s=0,a=r.cssRules.length;a>s;t=++s)r.cssRules[t].type===CSSRule.STYLE_RULE&&e.test(r.cssRules[t].selectorText)&&n.unshift(t);for(o=0,f=n.length;f>o;o++)r.deleteRule(n[o])}}catch(p){}},0)},r.Utils.isInView=function(e,n){var r=t(e);if(!r.is(":visible"))return!1;var i=s.scrollLeft(),o=s.scrollTop(),u=r.offset(),a=u.left,l=u.top;return n=t.extend({topoffset:0,leftoffset:0},n),l+r.height()>=o&&l-n.topoffset<=o+s.height()&&a+r.width()>=i&&a-n.leftoffset<=i+s.width()?!0:!1},r.Utils.options=function(e){if(t.isPlainObject(e))return e;var n=e?e.indexOf("{"):-1,r={};if(-1!=n)try{r=(new Function("","var json = "+e.substr(n)+"; return JSON.parse(JSON.stringify(json));"))()}catch(i){}return r},r.Utils.template=function(e,t){for(var n,r,i,s,o=e.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),u=0,a=[],f=0;u<o.length;){if(n=o[u],n.match(/\{\{\s*(.+?)\s*\}\}/))switch(u+=1,n=o[u],r=n[0],i=n.substring(n.match(/^(\^|\#|\!|\~|\:)/)?1:0),r){case"~":a.push("for(var $i=0;$i<"+i+".length;$i++) { var $item = "+i+"[$i];"),f++;break;case":":a.push("for(var $key in "+i+") { var $val = "+i+"[$key];"),f++;break;case"#":a.push("if("+i+") {"),f++;break;case"^":a.push("if(!"+i+") {"),f++;break;case"/":a.push("}"),f--;break;case"!":a.push("__ret.push("+i+");");break;default:a.push("__ret.push(escape("+i+"));")}else a.push("__ret.push('"+n.replace(/\'/g,"\\'")+"');");u+=1}s=["var __ret = [];","try {","with($data){",f?'__ret = ["Not all blocks are closed correctly."]':a.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n");var l=new Function("$data",s);return t?l(t):l},r.Utils.events={},r.Utils.events.click=r.support.touch?"tap":"click",t.UIkit=r,t.fn.uk=r.fn,t.UIkit.langdirection="rtl"==i.attr("dir")?"right":"left",t(function(){if(t(document).trigger("uk-domready"),r.support.mutationobserver){try{var e=new r.support.mutationobserver(r.Utils.debounce(function(){t(document).trigger("uk-domready")},300));e.observe(document.body,{childList:!0,subtree:!0})}catch(n){}r.support.touch&&r.Utils.removeCssRules(/\.uk-(?!navbar).*:hover/)}}),i.addClass(r.support.touch?"uk-touch":"uk-notouch"),r)}),function(e,t){var n=e(window),r="resize orientationchange",i=[],s=function(o,u){var l=this,h=e(o);h.data("stackMargin")||(this.element=h,this.columns=this.element.children(),this.options=e.extend({},s.defaults,u),this.columns.length&&(n.on(r,function(){var r=function(){l.process()};return e(function(){r(),n.on("load",r)}),t.Utils.debounce(r,150)}()),e(document).on("uk-domready",function(){l.columns=l.element.children(),l.process()}),this.element.data("stackMargin",this),i.push(this)))};e.extend(s.prototype,{process:function(){var t=this;this.revert();var n=!1,r=this.columns.filter(":visible:first"),i=r.length?r.offset().top:!1;if(i!==!1)return this.columns.each(function(){var r=e(this);r.is(":visible")&&(n?r.addClass(t.options.cls):r.offset().top!=i&&(r.addClass(t.options.cls),n=!0))}),this},revert:function(){return this.columns.removeClass(this.options.cls),this}}),s.defaults={cls:"uk-margin-small-top"},t.stackMargin=s,e(document).on("uk-domready",function(){e("[data-uk-margin]").each(function(){var n,r=e(this);r.data("stackMargin")||(n=new s(r,t.Utils.options(r.attr("data-uk-margin"))))})}),e(document).on("uk-check-display",function(){i.forEach(function(e){e.element.is(":visible")&&e.process()})})}(jQuery,jQuery.UIkit),function(e){function t(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function n(){f=null,c.last&&(c.el.trigger("longTap"),c={})}function r(){f&&clearTimeout(f),f=null}function i(){o&&clearTimeout(o),u&&clearTimeout(u),a&&clearTimeout(a),f&&clearTimeout(f),o=u=a=f=null,c={}}function s(e){return e.pointerType==e.MSPOINTER_TYPE_TOUCH&&e.isPrimary}var o,u,a,f,l,c={},h=750;e(function(){var p,v,y,w=0,E=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.originalEvent.velocityX>1?"Right":e.originalEvent.velocityX<-1?"Left":e.originalEvent.velocityY>1?"Down":e.originalEvent.velocityY<-1?"Up":null;t&&(c.el.trigger("swipe"),c.el.trigger("swipe"+t))}).on("touchstart MSPointerDown",function(t){("MSPointerDown"!=t.type||s(t.originalEvent))&&(y="MSPointerDown"==t.type?t:t.originalEvent.touches[0],p=Date.now(),v=p-(c.last||p),c.el=e("tagName"in y.target?y.target:y.target.parentNode),o&&clearTimeout(o),c.x1=y.pageX,c.y1=y.pageY,v>0&&250>=v&&(c.isDoubleTap=!0),c.last=p,f=setTimeout(n,h),l&&"MSPointerDown"==t.type&&l.addPointer(t.originalEvent.pointerId))}).on("touchmove MSPointerMove",function(e){("MSPointerMove"!=e.type||s(e.originalEvent))&&(y="MSPointerMove"==e.type?e:e.originalEvent.touches[0],r(),c.x2=y.pageX,c.y2=y.pageY,w+=Math.abs(c.x1-c.x2),E+=Math.abs(c.y1-c.y2))}).on("touchend MSPointerUp",function(n){("MSPointerUp"!=n.type||s(n.originalEvent))&&(r(),c.x2&&Math.abs(c.x1-c.x2)>30||c.y2&&Math.abs(c.y1-c.y2)>30?a=setTimeout(function(){c.el.trigger("swipe"),c.el.trigger("swipe"+t(c.x1,c.x2,c.y1,c.y2)),c={}},0):"last"in c&&(isNaN(w)||30>w&&30>E?u=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=i,c.el.trigger(t),c.isDoubleTap?(c.el.trigger("doubleTap"),c={}):o=setTimeout(function(){o=null,c.el.trigger("singleTap"),c={}},250)},0):c={},w=E=0))}).on("touchcancel MSPointerCancel",i),e(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(n){return e(this).on(t,n)}})}(jQuery),function(e,t){var n=function(t,r){var i=this;this.options=e.extend({},n.defaults,r),this.element=e(t),this.element.data("alert")||(this.element.on("click",this.options.trigger,function(e){e.preventDefault(),i.close()}),this.element.data("alert",this))};e.extend(n.prototype,{close:function(){function e(){t.trigger("closed").remove()}var t=this.element.trigger("close");this.options.fade?t.css("overflow","hidden").css("max-height",t.height()).animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0,"margin-top":0,"margin-bottom":0},this.options.duration,e):e()}}),n.defaults={fade:!0,duration:200,trigger:".uk-alert-close"},t.alert=n,e(document).on("click.alert.uikit","[data-uk-alert]",function(r){var i=e(this);if(!i.data("alert")){var s=new n(i,t.Utils.options(i.data("uk-alert")));e(r.target).is(i.data("alert").options.trigger)&&(r.preventDefault(),s.close())}})}(jQuery,jQuery.UIkit),function(e,t){var n=function(t,r){var i=this,s=e(t);s.data("buttonRadio")||(this.options=e.extend({},n.defaults,r),this.element=s.on("click",this.options.target,function(t){t.preventDefault(),s.find(i.options.target).not(this).removeClass("uk-active").blur(),s.trigger("change",[e(this).addClass("uk-active")])}),this.element.data("buttonRadio",this))};e.extend(n.prototype,{getSelected:function(){this.element.find(".uk-active")}}),n.defaults={target:".uk-button"};var r=function(t,n){var i=e(t);i.data("buttonCheckbox")||(this.options=e.extend({},r.defaults,n),this.element=i.on("click",this.options.target,function(t){t.preventDefault(),i.trigger("change",[e(this).toggleClass("uk-active").blur()])}),this.element.data("buttonCheckbox",this))};e.extend(r.prototype,{getSelected:function(){this.element.find(".uk-active")}}),r.defaults={target:".uk-button"};var i=function(t,n){var r=this,s=e(t);s.data("button")||(this.options=e.extend({},i.defaults,n),this.element=s.on("click",function(e){e.preventDefault(),r.toggle(),s.trigger("change",[s.blur().hasClass("uk-active")])}),this.element.data("button",this))};e.extend(i.prototype,{options:{},toggle:function(){this.element.toggleClass("uk-active")}}),i.defaults={},t.button=i,t.buttonCheckbox=r,t.buttonRadio=n,e(document).on("click.buttonradio.uikit","[data-uk-button-radio]",function(r){var i=e(this);if(!i.data("buttonRadio")){var s=new n(i,t.Utils.options(i.attr("data-uk-button-radio")));e(r.target).is(s.options.target)&&e(r.target).trigger("click")}}),e(document).on("click.buttoncheckbox.uikit","[data-uk-button-checkbox]",function(n){var i=e(this);if(!i.data("buttonCheckbox")){var s=new r(i,t.Utils.options(i.attr("data-uk-button-checkbox")));e(n.target).is(s.options.target)&&e(n.target).trigger("click")}}),e(document).on("click.button.uikit","[data-uk-button]",function(){var t=e(this);t.data("button")||(new i(t,t.attr("data-uk-button")),t.trigger("click"))})}(jQuery,jQuery.UIkit),function(e,t){var n=!1,r=function(i,s){var o=this,u=e(i);u.data("dropdown")||(this.options=e.extend({},r.defaults,s),this.element=u,this.dropdown=this.element.find(".uk-dropdown"),this.centered=this.dropdown.hasClass("uk-dropdown-center"),this.justified=this.options.justify?e(this.options.justify):!1,this.boundary=e(this.options.boundary),this.boundary.length||(this.boundary=e(window)),"click"==this.options.mode||t.support.touch?this.element.on("click",function(t){var r=e(t.target);r.parents(".uk-dropdown").length||((r.is("a[href='#']")||r.parent().is("a[href='#']"))&&t.preventDefault(),r.blur()),o.element.hasClass("uk-open")?(r.is("a")||!o.element.find(".uk-dropdown").find(t.target).length)&&(o.element.removeClass("uk-open"),n=!1):o.show()}):this.element.on("mouseenter",function(){o.remainIdle&&clearTimeout(o.remainIdle),o.show()}).on("mouseleave",function(){o.remainIdle=setTimeout(function(){o.element.removeClass("uk-open"),o.remainIdle=!1,n&&n[0]==o.element[0]&&(n=!1)},o.options.remaintime)}).on("click",function(t){var n=e(t.target);o.remainIdle&&clearTimeout(o.remainIdle),(n.is("a[href='#']")||n.parent().is("a[href='#']"))&&t.preventDefault(),o.show()}),this.element.data("dropdown",this))};e.extend(r.prototype,{remainIdle:!1,show:function(){n&&n[0]!=this.element[0]&&n.removeClass("uk-open"),this.checkDimensions(),this.element.addClass("uk-open"),n=this.element,this.registerOuterClick()},registerOuterClick:function(){var t=this;e(document).off("click.outer.dropdown"),setTimeout(function(){e(document).on("click.outer.dropdown",function(r){!n||n[0]!=t.element[0]||!e(r.target).is("a")&&t.element.find(".uk-dropdown").find(r.target).length||(n.removeClass("uk-open"),e(document).off("click.outer.dropdown"))})},10)},checkDimensions:function(){if(this.dropdown.length){var t=this.dropdown.css("margin-"+e.UIkit.langdirection,"").css("min-width",""),n=t.show().offset(),r=t.outerWidth(),i=this.boundary.width(),s=this.boundary.offset()?this.boundary.offset().left:0;if(this.centered&&(t.css("margin-"+e.UIkit.langdirection,-1*(parseFloat(r)/2-t.parent().width()/2)),n=t.offset(),(r+n.left>i||n.left<0)&&(t.css("margin-"+e.UIkit.langdirection,""),n=t.offset())),this.justified&&this.justified.length){var o=this.justified.outerWidth();if(t.css("min-width",o),"right"==e.UIkit.langdirection){var u=i-(this.justified.offset().left+o),f=i-(t.offset().left+t.outerWidth());t.css("margin-right",u-f)}else t.css("margin-left",this.justified.offset().left-n.left);n=t.offset()}r+(n.left-s)>i&&(t.addClass("uk-dropdown-flip"),n=t.offset()),n.left<0&&t.addClass("uk-dropdown-stack"),t.css("display","")}}}),r.defaults={mode:"hover",remaintime:800,justify:!1,boundary:e(window)},t.dropdown=r;var i=t.support.touch?"click":"mouseenter";e(document).on(i+".dropdown.uikit","[data-uk-dropdown]",function(n){var s=e(this);if(!s.data("dropdown")){var o=new r(s,t.Utils.options(s.data("uk-dropdown")));("click"==i||"mouseenter"==i&&"hover"==o.options.mode)&&o.show(),o.element.find(".uk-dropdown").length&&n.preventDefault()}})}(jQuery,jQuery.UIkit),function(e,t){var n=e(window),r="resize orientationchange",i=[],s=function(o,u){var l=this,h=e(o);h.data("gridMatchHeight")||(this.options=e.extend({},s.defaults,u),this.element=h,this.columns=this.element.children(),this.elements=this.options.target?this.element.find(this.options.target):this.columns,this.columns.length&&(n.on(r,function(){var r=function(){l.match()};return e(function(){r(),n.on("load",r)}),t.Utils.debounce(r,150)}()),e(document).on("uk-domready",function(){l.columns=l.element.children(),l.elements=l.options.target?l.element.find(l.options.target):l.columns,l.match()}),this.element.data("gridMatchHeight",this),i.push(this)))};e.extend(s.prototype,{match:function(){this.revert();var t=this.columns.filter(":visible:first");if(t.length){var n=Math.ceil(100*parseFloat(t.css("width"))/parseFloat(t.parent().css("width")))>=100?!0:!1,r=this;if(!n)return this.options.row?(this.element.width(),setTimeout(function(){var t=!1,n=[];r.elements.each(function(){var i=e(this),s=i.offset().top;s!=t&&n.length&&(r.matchHeights(e(n)),n=[],s=i.offset().top),n.push(i),t=s}),n.length&&r.matchHeights(e(n))},0)):this.matchHeights(this.elements),this}},revert:function(){return this.elements.css("min-height",""),this},matchHeights:function(t){if(!(t.length<2)){var n=0;t.each(function(){n=Math.max(n,e(this).outerHeight())}).each(function(){var t=e(this),r=n-(t.outerHeight()-t.height());t.css("min-height",r+"px")})}}}),s.defaults={target:!1,row:!1};var o=function(n,r){var i=e(n);if(!i.data("gridMargin")){this.options=e.extend({},o.defaults,r);var s=new t.stackMargin(i,this.options);i.data("gridMargin",s)}};o.defaults={cls:"uk-grid-margin"},t.gridMatchHeight=s,t.gridMargin=o,e(document).on("uk-domready",function(){e("[data-uk-grid-match],[data-uk-grid-margin]").each(function(){var n,r=e(this);r.is("[data-uk-grid-match]")&&!r.data("gridMatchHeight")&&(n=new s(r,t.Utils.options(r.attr("data-uk-grid-match")))),r.is("[data-uk-grid-margin]")&&!r.data("gridMargin")&&(n=new o(r,t.Utils.options(r.attr("data-uk-grid-margin"))))})}),e(document).on("uk-check-display",function(){i.forEach(function(e){e.element.is(":visible")&&e.match()})})}(jQuery,jQuery.UIkit),function(e,t,n){function r(t,n){return n?("object"==typeof t?(t=t instanceof jQuery?t:e(t),t.parent().length&&(n.persist=t,n.persist.data("modalPersistParent",t.parent()))):t=e("<div></div>").html("string"==typeof t||"number"==typeof t?t:"$.UIkitt.modal Error: Unsupported data type: "+typeof t),t.appendTo(n.element.find(".uk-modal-dialog")),n):void 0}var i=!1,s=e("html"),o=function(n,r){var i=this;this.element=e(n),this.options=e.extend({},o.defaults,r),this.transition=t.support.transition,this.dialog=this.element.find(".uk-modal-dialog"),this.scrollable=function(){var e=i.dialog.find(".uk-overflow-container:first");return e.length?e:!1}(),this.element.on("click",".uk-modal-close",function(e){e.preventDefault(),i.hide()}).on("click",function(t){var n=e(t.target);n[0]==i.element[0]&&i.options.bgclose&&i.hide()})};e.extend(o.prototype,{scrollable:!1,transition:!1,toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){if(!this.isActive())return i&&i.hide(!0),this.element.removeClass("uk-open").show(),this.resize(),i=this,s.addClass("uk-modal-page").height(),this.element.addClass("uk-open").trigger("uk.modal.show"),this},hide:function(e){if(this.isActive()){if(!e&&t.support.transition){var n=this;this.element.one(t.support.transition.end,function(){n._hide()}).removeClass("uk-open")}else this._hide();return this}},resize:function(){var e="padding-"+("left"==t.langdirection?"right":"left");if(this.scrollbarwidth=window.innerWidth-s.width(),s.css(e,this.scrollbarwidth),this.element.css(e,""),this.dialog.offset().left>this.scrollbarwidth&&this.element.css(e,this.scrollbarwidth-(this.element[0].scrollHeight==window.innerHeight?0:this.scrollbarwidth)),this.scrollable){this.scrollable.css("height",0);var n=Math.abs(parseInt(this.dialog.css("margin-top"),10)),r=this.dialog.outerHeight(),i=window.innerHeight,o=i-2*(20>n?20:n)-r;this.scrollable.css("height",o<this.options.minScrollHeight?"":o)}},_hide:function(){this.element.hide().removeClass("uk-open"),s.removeClass("uk-modal-page").css("padding-"+("left"==t.langdirection?"right":"left"),""),i===this&&(i=!1),this.element.trigger("uk.modal.hide")},isActive:function(){return i==this}}),o.dialog={tpl:'<div class="uk-modal"><div class="uk-modal-dialog"></div></div>'},o.defaults={keyboard:!0,show:!1,bgclose:!0,minScrollHeight:150};var u=function(t,n){var r=this,i=e(t);i.data("modal")||(this.options=e.extend({target:i.is("a")?i.attr("href"):!1},n),this.element=i,this.modal=new o(this.options.target,n),i.on("click",function(e){e.preventDefault(),r.show()}),e.each(["show","hide","isActive"],function(e,t){r[t]=function(){return r.modal[t]()}}),this.element.data("modal",this))};u.dialog=function(t,n){var i=new o(e(o.dialog.tpl).appendTo("body"),n);return i.element.on("uk.modal.hide",function(){i.persist&&(i.persist.appendTo(i.persist.data("modalPersistParent")),i.persist=!1),i.element.remove()}),r(t,i),i},u.alert=function(t,n){u.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-buttons"><button class="uk-button uk-button-primary uk-modal-close">Ok</button></div>'].join(""),e.extend({bgclose:!1,keyboard:!1},n)).show()},u.confirm=function(t,n,r){n=e.isFunction(n)?n:function(){};var i=u.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-buttons"><button class="uk-button uk-button-primary js-modal-confirm">Ok</button> <button class="uk-button uk-modal-close">Cancel</button></div>'].join(""),e.extend({bgclose:!1,keyboard:!1},r));i.element.find(".js-modal-confirm").on("click",function(){n(),i.hide()}),i.show()},u.Modal=o,t.modal=u,e(document).on("click.modal.uikit","[data-uk-modal]",function(n){var r=e(this);if(r.is("a")&&n.preventDefault(),!r.data("modal")){var i=new u(r,t.Utils.options(r.attr("data-uk-modal")));i.show()}}),e(document).on("keydown.modal.uikit",function(e){i&&27===e.keyCode&&i.options.keyboard&&(e.preventDefault(),i.hide())}),n.on("resize orientationchange",t.Utils.debounce(function(){i&&i.resize()},150))}(jQuery,jQuery.UIkit,jQuery(window)),function(e,t){var n,r=e(window),i=e(document),s={show:function(t){if(t=e(t),t.length){var o=e("html"),u=t.find(".uk-offcanvas-bar:first"),l="right"==e.UIkit.langdirection,h=(u.hasClass("uk-offcanvas-bar-flip")?-1:1)*(l?-1:1),p=-1==h&&r.width()<window.innerWidth?window.innerWidth-r.width():0;n={x:window.scrollX,y:window.scrollY},t.addClass("uk-active"),o.css({width:window.innerWidth,height:window.innerHeight}).addClass("uk-offcanvas-page"),o.css(l?"margin-right":"margin-left",(l?-1:1)*(u.outerWidth()-p)*h).width(),u.addClass("uk-offcanvas-bar-show").width(),t.off(".ukoffcanvas").on("click.ukoffcanvas swipeRight.ukoffcanvas swipeLeft.ukoffcanvas",function(t){var n=e(t.target);if(!t.type.match(/swipe/)&&!n.hasClass("uk-offcanvas-close")){if(n.hasClass("uk-offcanvas-bar"))return;if(n.parents(".uk-offcanvas-bar:first").length)return}t.stopImmediatePropagation(),s.hide()}),i.on("keydown.ukoffcanvas",function(e){27===e.keyCode&&s.hide()})}},hide:function(t){var r=e("html"),s=e(".uk-offcanvas.uk-active"),o="right"==e.UIkit.langdirection,u=s.find(".uk-offcanvas-bar:first");s.length&&(e.UIkit.support.transition&&!t?(r.one(e.UIkit.support.transition.end,function(){r.removeClass("uk-offcanvas-page").attr("style",""),s.removeClass("uk-active"),window.scrollTo(n.x,n.y)}).css(o?"margin-right":"margin-left",""),setTimeout(function(){u.removeClass("uk-offcanvas-bar-show")},50)):(r.removeClass("uk-offcanvas-page").attr("style",""),s.removeClass("uk-active"),u.removeClass("uk-offcanvas-bar-show"),window.scrollTo(n.x,n.y)),s.off(".ukoffcanvas"),i.off(".ukoffcanvas"))}},o=function(t,n){var r=this,i=e(t);i.data("offcanvas")||(this.options=e.extend({target:i.is("a")?i.attr("href"):!1},n),this.element=i,i.on("click",function(e){e.preventDefault(),s.show(r.options.target)}),this.element.data("offcanvas",this))};o.offcanvas=s,t.offcanvas=o,i.on("click.offcanvas.uikit","[data-uk-offcanvas]",function(n){n.preventDefault();var r=e(this);r.data("offcanvas")||(new o(r,t.Utils.options(r.attr("data-uk-offcanvas"))),r.trigger("click"))})}(jQuery,jQuery.UIkit),function(e,t){function n(t){var n=e(t),r="auto";if(n.is(":visible"))r=n.outerHeight();else{var i={position:n.css("position"),visibility:n.css("visibility"),display:n.css("display")};r=n.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),n.css(i)}return r}var r=function(t,n){var i=this,s=e(t);s.data("nav")||(this.options=e.extend({},r.defaults,n),this.element=s.on("click",this.options.toggle,function(t){t.preventDefault();var n=e(this);i.open(n.parent()[0]==i.element[0]?n:n.parent("li"))}),this.element.find(this.options.lists).each(function(){var t=e(this),n=t.parent(),r=n.hasClass("uk-active");t.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>'),n.data("list-container",t.parent()),r&&i.open(n,!0)}),this.element.data("nav",this))};e.extend(r.prototype,{open:function(t,r){var i=this.element,s=e(t);this.options.multiple||i.children(".uk-open").not(t).each(function(){e(this).data("list-container")&&e(this).data("list-container").stop().animate({height:0},function(){e(this).parent().removeClass("uk-open")})}),s.toggleClass("uk-open"),s.data("list-container")&&(r?s.data("list-container").stop().height(s.hasClass("uk-open")?"auto":0):s.data("list-container").stop().animate({height:s.hasClass("uk-open")?n(s.data("list-container").find("ul:first")):0}))}}),r.defaults={toggle:">li.uk-parent > a[href='#']",lists:">li.uk-parent > ul",multiple:!1},t.nav=r,e(document).on("uk-domready",function(){e("[data-uk-nav]").each(function(){var n=e(this);n.data("nav")||new r(n,t.Utils.options(n.attr("data-uk-nav")))})})}(jQuery,jQuery.UIkit),function(e,t,n){var r,i,s=function(t,n){var r=this,i=e(t);i.data("tooltip")||(this.options=e.extend({},s.defaults,n),this.element=i.on({focus:function(){r.show()},blur:function(){r.hide()},mouseenter:function(){r.show()},mouseleave:function(){r.hide()}}),this.tip="function"==typeof this.options.src?this.options.src.call(this.element):this.options.src,this.element.attr("data-cached-title",this.element.attr("title")).attr("title",""),this.element.data("tooltip",this))};e.extend(s.prototype,{tip:"",show:function(){if(i&&clearTimeout(i),this.tip.length){r.stop().css({top:-2e3,visibility:"hidden"}).show(),r.html('<div class="uk-tooltip-inner">'+this.tip+"</div>");var t=this,n=e.extend({},this.element.offset(),{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}),s=r[0].offsetWidth,o=r[0].offsetHeight,u="function"==typeof this.options.offset?this.options.offset.call(this.element):this.options.offset,f="function"==typeof this.options.pos?this.options.pos.call(this.element):this.options.pos,l={display:"none",visibility:"visible",top:n.top+n.height+o,left:n.left},c=f.split("-");"left"!=c[0]&&"right"!=c[0]||"right"!=e.UIkit.langdirection||(c[0]="left"==c[0]?"right":"left");var h={bottom:{top:n.top+n.height+u,left:n.left+n.width/2-s/2},top:{top:n.top-o-u,left:n.left+n.width/2-s/2},left:{top:n.top+n.height/2-o/2,left:n.left-s-u},right:{top:n.top+n.height/2-o/2,left:n.left+n.width+u}};e.extend(l,h[c[0]]),2==c.length&&(l.left="left"==c[1]?n.left:n.left+n.width-s);var p=this.checkBoundary(l.left,l.top,s,o);if(p){switch(p){case"x":f=2==c.length?c[0]+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left";break;case"y":f=2==c.length?(l.top<0?"bottom":"top")+"-"+c[1]:l.top<0?"bottom":"top";break;case"xy":f=2==c.length?(l.top<0?"bottom":"top")+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left"}c=f.split("-"),e.extend(l,h[c[0]]),2==c.length&&(l.left="left"==c[1]?n.left:n.left+n.width-s)}l.left-=e("body").position().left,i=setTimeout(function(){r.css(l).attr("class","uk-tooltip uk-tooltip-"+f),t.options.animation?r.css({opacity:0,display:"block"}).animate({opacity:1},parseInt(t.options.animation,10)||400):r.show(),i=!1},parseInt(this.options.delay,10)||0)}},hide:function(){this.element.is("input")&&this.element[0]===document.activeElement||(i&&clearTimeout(i),r.stop(),this.options.animation?r.fadeOut(parseInt(this.options.animation,10)||400):r.hide())},content:function(){return this.tip},checkBoundary:function(e,t,r,i){var s="";return(0>e||e-n.scrollLeft()+r>window.innerWidth)&&(s+="x"),(0>t||t-n.scrollTop()+i>window.innerHeight)&&(s+="y"),s}}),s.defaults={offset:5,pos:"top",animation:!1,delay:0,src:function(){return this.attr("title")}},t.tooltip=s,e(function(){r=e('<div class="uk-tooltip"></div>').appendTo("body")}),e(document).on("mouseenter.tooltip.uikit focus.tooltip.uikit","[data-uk-tooltip]",function(){var n=e(this);n.data("tooltip")||(new s(n,t.Utils.options(n.attr("data-uk-tooltip"))),n.trigger("mouseenter"))})}(jQuery,jQuery.UIkit,jQuery(window)),function(e,t){var n=function(t,r){var i=this,s=e(t);if(!s.data("switcher")){if(this.options=e.extend({},n.defaults,r),this.element=s.on("click",this.options.toggle,function(e){e.preventDefault(),i.show(this)}),this.options.connect){this.connect=e(this.options.connect).find(".uk-active").removeClass(".uk-active").end();var o=this.element.find(this.options.toggle),u=o.filter(".uk-active");u.length?this.show(u):(u=o.eq(this.options.active),this.show(u.length?u:o.eq(0)))}this.element.data("switcher",this)}};e.extend(n.prototype,{show:function(t){t=isNaN(t)?e(t):this.element.find(this.options.toggle).eq(t);var n=t;if(!n.hasClass("uk-disabled")){if(this.element.find(this.options.toggle).filter(".uk-active").removeClass("uk-active"),n.addClass("uk-active"),this.options.connect&&this.connect.length){var r=this.element.find(this.options.toggle).index(n);this.connect.children().removeClass("uk-active").eq(r).addClass("uk-active")}this.element.trigger("uk.switcher.show",[n]),e(document).trigger("uk-check-display")}}}),n.defaults={connect:!1,toggle:">*",active:0},t.switcher=n,e(document).on("uk-domready",function(){e("[data-uk-switcher]").each(function(){var r=e(this);r.data("switcher")||new n(r,t.Utils.options(r.attr("data-uk-switcher")))})})}(jQuery,jQuery.UIkit),function(e,t){var n=function(t,r){var i=this,s=e(t);if(!s.data("tab")){if(this.element=s,this.options=e.extend({},n.defaults,r),this.options.connect&&(this.connect=e(this.options.connect)),window.location.hash){var o=this.element.children().filter(window.location.hash);o.length&&this.element.children().removeClass("uk-active").filter(o).addClass("uk-active")}var u=e('<li class="uk-tab-responsive uk-active"><a href="javascript:void(0);"></a></li>'),f=u.find("a:first"),l=e('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>'),h=l.find("ul");f.html(this.element.find("li.uk-active:first").find("a").text()),this.element.hasClass("uk-tab-bottom")&&l.addClass("uk-dropdown-up"),this.element.hasClass("uk-tab-flip")&&l.addClass("uk-dropdown-flip"),this.element.find("a").each(function(t){var n=e(this).parent(),r=e('<li><a href="javascript:void(0);">'+n.text()+"</a></li>").on("click",function(){i.element.data("switcher").show(t)});e(this).parents(".uk-disabled:first").length||h.append(r)}),this.element.uk("switcher",{toggle:">li:not(.uk-tab-responsive)",connect:this.options.connect,active:this.options.active}),u.append(l).uk("dropdown",{mode:"click"}),this.element.append(u).data({dropdown:u.data("dropdown"),mobilecaption:f}).on("uk.switcher.show",function(e,t){u.addClass("uk-active"),f.html(t.find("a").text())}),this.element.data("tab",this)}};n.defaults={connect:!1,active:0},t.tab=n,e(document).on("uk-domready",function(){e("[data-uk-tab]").each(function(){var r=e(this);r.data("tab")||new n(r,t.Utils.options(r.attr("data-uk-tab")))})})}(jQuery,jQuery.UIkit),function(e,t){var n=e(window),r=[],i=function(){for(var e=0;e<r.length;e++)t.support.requestAnimationFrame.apply(window,[r[e].check])},s=function(n,i){var o=e(n);if(!o.data("scrollspy")){this.options=e.extend({},s.defaults,i),this.element=e(n);var u,a,f,l=this,c=function(){var e=t.Utils.isInView(l.element,l.options);e&&!a&&(u&&clearTimeout(u),f||(l.element.addClass(l.options.initcls),l.offset=l.element.offset(),f=!0,l.element.trigger("uk-scrollspy-init")),u=setTimeout(function(){e&&l.element.addClass("uk-scrollspy-inview").addClass(l.options.cls).width()},l.options.delay),a=!0,l.element.trigger("uk.scrollspy.inview")),!e&&a&&l.options.repeat&&(l.element.removeClass("uk-scrollspy-inview").removeClass(l.options.cls),a=!1,l.element.trigger("uk.scrollspy.outview"))};c(),this.element.data("scrollspy",this),this.check=c,r.push(this)}};s.defaults={cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},t.scrollspy=s;var o=[],u=function(){for(var e=0;e<o.length;e++)t.support.requestAnimationFrame.apply(window,[o[e].check])},a=function(r,i){var s=e(r);if(!s.data("scrollspynav")){this.element=s,this.options=e.extend({},a.defaults,i);var u,f=[],l=this.element.find("a[href^='#']").each(function(){f.push(e(this).attr("href"))}),h=e(f.join(",")),p=this,d=function(){u=[];for(var e=0;e<h.length;e++)t.Utils.isInView(h.eq(e),p.options)&&u.push(h.eq(e));if(u.length){var r=n.scrollTop(),i=function(){for(var e=0;e<u.length;e++)if(u[e].offset().top>=r)return u[e]}();if(!i)return;p.options.closest?l.closest(p.options.closest).removeClass(p.options.cls).end().filter("a[href='#"+i.attr("id")+"']").closest(p.options.closest).addClass(p.options.cls):l.removeClass(p.options.cls).filter("a[href='#"+i.attr("id")+"']").addClass(p.options.cls)}};this.options.smoothscroll&&t.smoothScroll&&l.each(function(){new t.smoothScroll(this,p.options.smoothscroll)}),d(),this.element.data("scrollspynav",this),this.check=d,o.push(this)}};a.defaults={cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},t.scrollspynav=a;var f=function(){i(),u()};n.on("scroll",f).on("resize orientationchange",t.Utils.debounce(f,50)),e(document).on("uk-domready",function(){e("[data-uk-scrollspy]").each(function(){var n=e(this);n.data("scrollspy")||new s(n,t.Utils.options(n.attr("data-uk-scrollspy")))}),e("[data-uk-scrollspy-nav]").each(function(){var n=e(this);n.data("scrollspynav")||new a(n,t.Utils.options(n.attr("data-uk-scrollspy-nav")))})})}(jQuery,jQuery.UIkit),function(e,t){var n=function(t,r){var i=this,s=e(t);s.data("smoothScroll")||(this.options=e.extend({},n.defaults,r),this.element=s.on("click",function(){var t=e(e(this.hash).length?this.hash:"body"),n=t.offset().top-i.options.offset,r=e(document).height(),s=e(window).height();return t.outerHeight(),n+s>r&&(n=r-s),e("html,body").stop().animate({scrollTop:n},i.options.duration,i.options.transition),!1}),this.element.data("smoothScroll",this))};n.defaults={duration:1e3,transition:"easeOutExpo",offset:0},t.smoothScroll=n,e.easing.easeOutExpo||(e.easing.easeOutExpo=function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n}),e(document).on("click.smooth-scroll.uikit","[data-uk-smooth-scroll]",function(){var r=e(this);r.data("smoothScroll")||(new n(r,t.Utils.options(r.attr("data-uk-smooth-scroll"))),r.trigger("click"))})}(jQuery,jQuery.UIkit),function(e,t,n){var r=function(e,n){var i=this,s=t(e);s.data("toggle")||(this.options=t.extend({},r.defaults,n),this.totoggle=this.options.target?t(this.options.target):[],this.element=s.on("click",function(e){e.preventDefault(),i.toggle()}),this.element.data("toggle",this))};t.extend(r.prototype,{toggle:function(){this.totoggle.length&&(this.totoggle.toggleClass(this.options.cls),"uk-hidden"==this.options.cls&&t(document).trigger("uk-check-display"))}}),r.defaults={target:!1,cls:"uk-hidden"},n.toggle=r,t(document).on("uk-domready",function(){t("[data-uk-toggle]").each(function(){var e=t(this);e.data("toggle")||new r(e,n.Utils.options(e.attr("data-uk-toggle")))})})}(this,jQuery,jQuery.UIkit),define("vendor/plugins/uikit/uikit.min",function(){}),define("chrome/views/header",["vendor","views","text!chrome/templates/header.html","chrome/models/header","registration","login","signup","signup/views/shopopup","utils/storage","signup/views/facebooksignup","vendor/plugins/qtip/qtip-wrapper","vendor/plugins/uikit/uikit.min"],function(e,t,n,r,i,s,o,u,a){var f,l=require("signup/views/facebooksignup"),c=t.BaseView,h=e.$,p=e._,d=e.Mustache;return f=c.extend({tagName:"header",className:"container-fluid clearfix",initialize:function(e){this.template=n,console.error(this),Channel("load:css").publish(["vendor/plugins/qtip/qtip.css","vendor/plugins/uikit/uikit.almost-flat.css"])},model:new r,events:{"click .signup-facebook":"signupFacebook","click .signup-email":"signupUser","click .account clearfix a":"login","click #userlogin":"userLogin","click #logoutId":"LogoutUser"},linkToFacebook:function(){console.log("link to fb called"),routing.trigger("link-to-facebook")},render:function(e){var t=this;return this.model.fetchSuccess=this.model.fetchError=function(n,r){console.log("MODEL:",n.toJSON());var i=p.template(t.template,n.toJSON());t.$el.html(i),routing.isNative&&(h("header div.uk-navbar img#header_logo").attr("src","images/logo_small.png"),h("header div.uk-navbar").css("padding-top","15px"));if(typeof n.get("user_photo")=="object"&&typeof n.get("user_photo").types=="object")if(typeof n.get("user_photo").types.small_thumb=="object")var s=n.get("user_photo").types.small_thumb.url;else if(typeof n.get("user_photo").types.large_thumb=="object")var s=n.get("user_photo").types.large_thumb.url;else if(typeof n.get("user_photo").types.original=="object")var s=n.get("user_photo").types.original.url;else var s="";t.$(".photo img").attr("src",s);var o=n.get("authorized");if(o){var u=n.get("id");t.model.saveCookie(),routing.userLoggedIn=!0,routing.loggedInUserId=u,e||routing.trigger("app-inited",u)}else routing.userLoggedIn=!1,e||routing.trigger("app-inited");h("#main").removeClass("region-loader"),h(document).off("click","a[href*='#fbinvite']"),h(document).on("click","a[href*='#fbinvite']",function(e){e.preventDefault(),routing.trigger("fbInvite")}),t.bindDropdowns()},this.model.fetch(),this},bindDropdowns:function(){var e=this;this.$el.find("a.nav_dropdown").each(function(){console.log(this),h(this).qtip2({content:h(this).next("ul.header_menu"),position:{my:"top center",at:"bottom center",viewport:h(window)},style:{classes:"tipsy header-dropdown",width:"360px"},hide:{fixed:!0,delay:500},events:{render:function(t,n){h(n.elements.tooltip).find(".link-to-fb-h").on("click",e.linkToFacebook)}}},!0)})},userLogin:function(e){e.preventDefault(),this.logincontroller=new s,routing.trigger("Login")},signupFBTest:function(e){},signupFacebook:function(e){e.preventDefault(),headView=new l,headView.signupFacebook()},signupUser:function(e){this.signupc=new o({route:""}),routing.trigger("register-basic",e),this.pop=new u},LogoutUser:function(e){e.preventDefault(),this.logincontroller||(this.logincontroller=new s),routing.trigger("Logout",this.model)}}),f}),define("text!chrome/templates/main.html",[],function(){return"\r\n\r\n"}),define("chrome/models/main",["models/base"],function(e){var t;return t=e.extend({defaults:{}}),t}),define("chrome/views/main",["vendor","views","text!chrome/templates/main.html","chrome/models/main"],function(e,t,n,r){var i,s=t.BaseView,o=e.$,u=e._,a=e.Mustache;return i=s.extend({id:"main",className:"clear clearfix",initialize:function(e){this.template=n},model:new r,render:function(){var e=a.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("text!chrome/templates/footer.html",[],function(){return'<!--<div style="\r\n    position: fixed;\r\n    left: 0px;\r\n    bottom: 0;\r\n    height: 20px;\r\n    width: 20px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    font-size: 2em;\r\n    padding: 15px;\r\n    background: #000000;"><img src="http://athletez.s3.amazonaws.com/resources/img/A_small.png" /></div>-->'}),define("chrome/models/footer",["models/base"],function(e){var t;return t=e.extend({defaults:{}}),t}),define("chrome/views/footer",["vendor","views","text!chrome/templates/footer.html","chrome/models/footer"],function(e,t,n,r){var i,s=t.BaseView,o=e.$,u=e._,a=e.Mustache;return i=s.extend({tagName:"footer",className:"container-fluid clearfix mobile-hide",initialize:function(e){this.template=n},model:new r,render:function(){var e=a.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("chrome",["chrome/views/header","chrome/views/main","chrome/views/footer"],function(e,t,n){var r;return r=function(){$("#main").unbind().empty().addClass("region-loader"),App.header?App.header.render():(App.header=new e,App.header.render().$el.prependTo("body"));if(!$("#main").length){var r=new t;r.render().$el.appendTo("body")}if(!$("footer.container-fluid").length){var i=new n;i.render().$el.appendTo("body")}!$(".common-modal").length},r}),define("text!profile/templates/layout.html",[],function(){return'<div class="template-container profile-container">\r\n	<div id="main-header" class="profile-header"></div>\r\n	<div class="green-left-heading">MESSAGE BOARD</div>\r\n	<div id="commenton-wrap" class="clearfix clear profile-comment-list-box"></div>\r\n	<div id="comment_div" class="clearfix"></div>\r\n	\r\n	\r\n	<div class="media-add-icons-h"></div>\r\n	<!-- <div class="green-left-heading"></div> -->\r\n	<div class="row-fluid" id="main-content">\r\n	<!-- <div id="video-wrap" class="clearfix"></div> -->\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<!--div id="add-media" class="clearfix">add media</div-->\r\n	</div>\r\n\r\n\r\n	<div class="green-left-heading">GAMES / EVENTS</div>\r\n	<div id="games_div" class="clearfix">		\r\n	</div>\r\n	<div class="fans-add-icons-h"></div>\r\n	<div id="fans-div" class="clearfix clear">&nbsp;</div>\r\n	\r\n	<div id="main-footer">\r\n	</div>\r\n</div>\r\n'}),define("text!votes/templates/vote.html",[],function(){return'{{#payload}}\r\n<a href="javascript:void(0);" class="vote {{#has_voted}}team-noaction-h link-disabled{{/has_voted}}{{^has_voted}}team-action-h{{/has_voted}}">Vote</a>\r\n<a href="javascript:void(0);" class="follow {{#is_following}}follow-noaction-h link-disabled{{/is_following}}{{^is_following}}follow-action-h{{/is_following}}">Follow</a>\r\n{{/payload}}'}),define("votes/models/vote",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return"/api/vote/add?subject_type_id="+this.entity_id+"&subject_id="+this.subject_id},setData:function(){this.set({subject_type_id:this.entity_id,subject_id:this.subject_id})}}),n}),define("votes/models/follow",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({url:function(){return"/api/ent/follow/"+this.entity_id+"/"+this.subject_id}}),n}),define("votes/views/vote-section",["require","text!votes/templates/vote.html","views","vendor","facade","utils","jqueryui","controller","votes/models/vote","votes/models/follow"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("votes/models/vote"),d=e("votes/models/follow");return n=o.extend({template:t,events:{"click .team-action-h":"vote","click .follow-action-h":"follow"},vote:function(e){if(!this.checkForUser()){routing.trigger("showSignup");return}this.voteModelOb.save(),u.when(this.voteModelOb.request).done(function(){u(e.currentTarget).addClass("link-disabled")})},follow:function(e){if(!this.checkForUser()){routing.trigger("showSignup");return}this.followModelOb.save(),u.when(this.followModelOb.request).done(function(){u(e.currentTarget).addClass("link-disabled")}),h("new-fan").publish()},checkForUser:function(){return!a.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},initialize:function(e){var t=this;a.bindAll(this),o.prototype.initialize.call(this,e)},render:function(e,t,n){o.prototype.render.call(this,e,t,n);var r=this.model.get("payload");r.has_voted?this.$el.find(".team-action-h").addClass("link-disabled"):(this.voteModelOb=new p,this.voteModelOb.subject_id=r.id,this.voteModelOb.entity_id=r.enttypes_id,this.voteModelOb.setData()),r.is_following?this.$el.find(".follow-action-h").addClass("link-disabled"):(this.followModelOb=new d,this.followModelOb.subject_id=r.id,this.followModelOb.entity_id=r.enttypes_id)}}),n}),define("profile/models/basics",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("profile/models/addmedia",["models/base"],function(e){var t;return t=e.extend({sportName:undefined,firstName:undefined,defaults:{links:[{label:"Add "+this.sportName+" pics of "+this.firstName,link:"javascript:void(0);",id:"addPhoto"},{label:"Add "+this.sportName+" videos of "+this.firstName,link:"javascript:void(0);",id:"addVideo"}],userid:null},setData:function(){this.set({links:[{label:"Add "+this.sportName+" pics of "+this.firstName,link:"javascript:void(0);",id:"addPhoto"},{label:"Add "+this.sportName+" videos of "+this.firstName,link:"javascript:void(0);",id:"addVideo"}],userid:null})}}),t}),define("sportorg/models/org",["facade","models/base"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({initialize:function(e){e&&e.id&&(this.id=e.id)},methodToURL:{read:function(e){console.log(e);var t="/api/org/basics/"+e.id;return t},create:"/api/org/add/",update:function(e){var t="/api/org/basics/";return e.id&&(t+=e.id),t},"delete":function(e){return"/api/org/delete"+e.id}},sync:function(e,t,n){return n=n||{},n.url=typeof t.methodToURL[e.toLowerCase()]=="function"?t.methodToURL[e.toLowerCase()](t):t.methodToURL[e.toLowerCase()],i.sync.apply(this,arguments)}}),n}),define("sportorg/collections/orgs",["facade","collections","sportorg/models/org","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,url:function(){var e=this,t="/api/org/search?sports_club="+encodeURIComponent(e.sports_club)+"&states_id="+encodeURIComponent(e.states_id)+"&org_name="+encodeURIComponent(e.org_name);return e.single_sport_id&&(t+="&single_sport_id="+e.single_sport_id),t},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i],u=o.teams,a=[];for(var f in u){var l=u[f];a.push(l)}o.teams=a,s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},isError:function(){return!1}}),i}),define("profile/collections/orgs",["facade","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/orgs/"+this.id+"/"+this.sport_id:"/api/user/orgs/"+this.id+"?sport_id="+this.sport_id+"&_="+(new Date).getTime()}}),r}),define("user/models/related",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{user_id:0,user_name:null,user_picture:null,teams:[{sport:null,position:null,org:null,season:null,year:null}],num_votes:0,num_followers:0},desc:"Related user information about the user",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("user/collections/relateds",["facade","collections","user/models/related","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("profile/collections/relateds",["facade","user/collections/relateds","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?"/test/user/related/"+this.id+"/"+this.sport_id:"/api/user/related/"+this.id+"?sport_id="+this.sport_id}}),r}),define("user/models/fitnessbasic",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,val:null,units:null},desc:"Fitness Basic information about the user",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("user/collections/fitnessbasics",["facade","collections","user/models/fitnessbasic","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=[];for(var u in r[i].data)o.push(r[i].data[u]);o={data:o},s.set("payload",o),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profile/collections/fitnessbasics",["facade","user/collections/fitnessbasics","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/rdtree/"+this.id+"/?overview=1&sports_id="+this.sport_id:"/api/user/rdtree/"+this.id+"?overview=1&sports_id="+this.sport_id}}),r}),define("media/models/video",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{video_id:0,video_title:null,video_quality:0,video_thumb:null,video_src:null,org_name:null,teams:[{complevel:null,season:null,grad_year:0,team_name:null,schedule:{schedule_date:null,other_team:null,schedule_summary:null}}],games:[{team1_name:null,team2_name:null}],video_desc:null,user_name:null,post_date:null,tags_count:0,tags:[],num_votes:0,num_views:0,num_comments:0,social_links:[{"class":null,title:null,link:null}]},desc:"Video information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("media/collections/videos",["facade","collections","media/models/video","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profile/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/videos/"+this.id+"/"+this.sport_id:"/api/user/videos/"+this.id+"?sport_id="+this.sport_id}}),r}),define("profile/collections/image-videos",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({limit:8,offset:0,url:function(){if(testpath)return testpath+"/user/media/"+this.id+"/"+this.sport_id;var e=this.limit?"&limit="+this.limit:"";return"/api/user/media/"+this.id+"?offset="+this.offset+e+"&sport_id="+this.sport_id}}),r}),define("site/models/comment",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("site/collections/comments",["facade","collections","site/models/comment","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profile/collections/commentsof",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/commentsof/"+this.id:"/api/user/commentsof/"+this.id}}),r}),define("profile/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/comment/getall/"+this.id:"/api/comment/getall/?subject_enttypes_id="+this.subject_entity_type+"&subject_id="+this.id}}),r}),define("sportorg/models/team",["facade","models/base"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{name:null,location:null,picture:null,sport:null,complevel:null,season:null,year:null,mascot:null,unique_ident:null,statvals:[{statval:null,statdate:null,statteam:null,stat_context:null}]},desc:"Team information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/team/basics/"+this.id},parseAsRequired:function(e){return e}}),n}),define("schedules/collections/user-games",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i=t.BaseCollection,s=e._,o=r.lib.Channel;return i.extend({userId:undefined,sports_id:undefined,model:e.Backbone.Model.extend({}),url:function(){return"/api/user/games/"+this.userId+"?sports_id="+this.sports_id},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5);var o=r[i];o.is_race=parseInt(o.is_race)>0?!0:!1,s.set("payload",o),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}})}),define("profile/collections/fans",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/followers/"+this.id+"/"+this.sport_id:"/api/user/followers/"+this.id+"?sport_id="+this.sport_id}}),r}),define("text!profile/templates/header.html",[],function(){return'{{#payload}}\r\n<div class="row-fluid">\r\n	<div class="profile-heading" itemscope itemtype="http://schema.org/Person">\r\n		<h3 class="username" itemprop="name">{{name}}</h3><h3 class="grad-year"> {{#grad_year}}\'{{grad_year}}{{/grad_year}}</h3>\r\n		<h4 class="sports-name-h"></h4>\r\n		<div class="sports-h"></div>\r\n	</div>\r\n\r\n	<div class="row-fluid profile-pic-outer">\r\n		<div class="span7 border-right">\r\n			<ul class="span6 textcenter image-outer-h"></ul>\r\n			<div class="span6">\r\n				<div class="teams">\r\n					<h4 class="hide">Teams</h4>\r\n					<div id="sports-info"></div>\r\n					<a href="javascript: void(0);" class="see-more-teams-h hide">Show All</a>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		\r\n		<div class="stats-panel span5" style="width:35%;">\r\n			<div class="stats-header">\r\n				<span id="profileName"></span>Stats{{#loggedInUser}}<span class="edit-message">Click an entry to edit</span>{{/loggedInUser}}\r\n			</div>\r\n			<div id="fitnessbasic-wrap"></div>\r\n		</div>\r\n	</div>\r\n			<div class="profile-info">\r\n			{{#height_ft}}\r\n				<div class="height">\r\n					Height: {{height_ft}}\r\n				</div>\r\n				{{/height_ft}}\r\n				{{#weight_lb}}\r\n				<div class="weight">\r\n					Weight: {{weight_lb}} lbs\r\n				</div>\r\n			{{/weight_lb}}\r\n		</div>\r\n\r\n</div>\r\n</div>\r\n{{/payload}}\r\n'}),define("text!profile/templates/sports.html",[],function(){return'{{#payload}}\r\n    <img src="{{large_icon}}" class="sports-icon-h" data-name="{{sport_name}}" data-sporttype="{{sport_type_id}}" data-id="{{id}}" />\r\n{{/payload}}\r\n'}),define("profile/collections/sports",["facade","sportorg/collections/sports","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/user/sports/"+this.id:"/api/user/sports/"+this.id}}),r}),define("text!profile/templates/sport-team.html",[],function(){return'{{#records}}\r\n	{{#payload}}\r\n	{{#name}}\r\n	<div>\r\n		<span class="icon-circle-arrow-right team-list-icon"></span><div class="teamlist-header">{{name}}</div>\r\n		{{#sports}}\r\n		 <span class="team-item list-container" style="display: none;">\r\n				{{#teams}}\r\n				   <a  title="{{complevel}} {{season}} {{year}}" href="/#!team/{{id}}" style="display: block;">{{complevel}} {{season}} {{year}}</a>\r\n			    {{/teams}}\r\n		</span>\r\n	    {{/sports}}\r\n    </div>\r\n    {{/name}}\r\n{{/payload}}\r\n{{/records}}'}),define("sportorg/collections/teams",["facade","collections","sportorg/models/team","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}console.log("Updtaed Collection",e),e.deferred.resolve(t)}}),i}),define("profile/collections/teams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return"/api/user/teamlist/"+this.id+"?sports_id="+this.sports_id}}),r}),define("text!sportorg/templates/team-item.html",[],function(){return'\r\n	<!--<a href="/#!game/{{id}}" class="background-blue team-info-h" tooltip="test">\r\n	<div class="game-info hide">\r\n		{{summary}}\r\n	</div> </a>\r\n-->'}),define("sportorg/views/team-item",["vendor","views","utils","text!sportorg/templates/team-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"team",events:{"mouseover .team-info-h":"showinfo","mouseout .team-info-h":"showinfo"},showinfo:function(e){e.preventDefault(),s(e.target).parents(".game-info").length||(s(e.target).find(".game-info").hasClass("hide")?s(e.target).find(".game-info").removeClass("hide"):s(".game-info").addClass("hide"))},initialize:function(e){this.teams_id=e.teams_id||null,console.log("Teams_id:",e),this.mpay=this.model.get("payload"),console.log("Team Item View",this.mpay),this.template=r},render:function(){var e=this.createOpponentString(),t=u.to_html(this.template,{id:this.mpay.id,summary:e});return this.$el.html(t),this},createOpponentString:function(){var e=this.mpay.game_day+" | ";return console.log("Game info",this.mpay),s.each(this.mpay.teams,function(){this.id>0&&this.id!=this.teams_id&&(e+=" VS. "+this.org_name)}),e}}),i}),define("text!sportorg/templates/team-list.html",[],function(){return'{{#data}}\r\n<div class="select-team">\r\n	<div class="game-box-outer">\r\n		<ul class="team-list-h">\r\n			\r\n		</ul>\r\n	</div>\r\n</div>\r\n</div>\r\n{{/data}}\r\n{{^data}}\r\n<div class="info">	\r\n	No games on the docket.  <a href="javascript: void(0);" title="add game" class="add-game-h">Click here to Add Game</a>\r\n</div>\r\n{{/data}}\r\n'}),define("sportorg/views/team-list",["vendor","facade","views","utils","sportorg/views/team-item","text!sportorg/templates/team-list.html","utils/storage"],function(e,t,n,r,i,s,o){var u,a,f=t.$,l=t._,c=r.lib.Channel,h=n.CollectionView,p=e.Mustache;return SectionView=n.SectionView,a=h.extend(SectionView.prototype),u=a.extend({__super__:h.prototype,name:"Team List",events:{"click .add-game-h":"addGame"},_tagName:"li",_className:"team",template:s,_view:i,listView:".team-list-h",initialize:function(e){this.renderTemplate(),h.prototype.initialize.call(this,e);if(!this.collection)throw new Error("TeamListView expected options.collection.");l.bindAll(this),this.addSubscribers()},addGame:function(){var e=new o("user","localStorage");console.log(e.data);var t=0;if(e.data)for(var n in e.data){t=n;break}t&&routing.trigger("add-game",t)},renderTemplate:function(){var e={};e.data=this.collection.toJSON(),console.log("Schedule Data",e.data);var t=p.to_html(this.template,e);return this.$el.html(t),this}}),u}),define("profile/views/sport-item",["vendor","views","utils","text!profile/templates/sport-team.html","profile/collections/teams","sportorg/views/team-list"],function(e,t,n,r){var i,s=e.$,o=t.SectionView,u=e.Mustache,a=n.lib.Channel,f=require("sportorg/views/team-list"),l=require("profile/collections/teams");return i=o.extend({tagName:"li",className:"sport",initialize:function(e){function i(e){t.initTeamList(),console.log("CALLED REFRESH PROFILE CHANNEL"),a("refresh-profilepage").publish(e)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.get("payload").sport_id;routing.off("showTwmList"),routing.on("showTwmList",function(e){i(e)})},initTeamList:function(){var e=this,t=s(".sports-h img.selected-sport-h").data("id");this.teams=new l,this.teams.id=this.id,this.teams.sports_id=t,this.teams.fetch(),s.when(this.teams.request).done(function(){e.setupTeamListView()})},setupTeamListView:function(){var e=this,t=undefined;console.log("TEAMS===================================",this.teams);try{var t=this.teams.at(0);t.get("payload").sports[0]?s(".teams h4").removeClass("hide"):s(".teams h4").addClass("hide")}catch(n){s(".teams h4").addClass("hide")}var r=t&&t.get("payload").sports?t.get("payload").sports.length:0;if(r>2){s(".see-more-teams-h").html("Show All "+(r-2)),s(".see-more-teams-h").removeClass("hide"),this.allSportsRecords=this.teams.toArray();var i=this.allSportsRecords.slice(0,2);this.teams.reset(i),s(".see-more-teams-h").click(function(){s(this).addClass("hide"),e.teams.reset(e.allSportsRecords),e.showTeamView()})}else s(".see-more-teams-h").addClass("hide");this.showTeamView()},showTeamView:function(){var e={};e.records=this.teams.toJSON();var t=u.to_html(this.template,e);this.$el.html(t)},render:function(){var e=this,t=u.to_html(this.template,this.model.toJSON());return this.$el.html(t),this}}),i}),define("profile/views/sport-list",["facade","views","utils","profile/views/sport-item"],function(e,t,n,r){var i,s,o=e._,u=t.CollectionView,a=t.SectionView;return s=u.extend(a.prototype),i=s.extend({__super__:u.prototype,id:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,showList:function(e){var t=$(e.target).next("span.list-container");console.error(t.css("display")),t.css("display")==="none"?($(e.target).prev(".team-list-icon").removeClass("icon-circle-arrow-right").addClass("icon-circle-arrow-down"),t.slideDown()):($(e.target).prev(".team-list-icon").removeClass("icon-circle-arrow-down").addClass("icon-circle-arrow-right"),t.slideUp())},initialize:function(e){u.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");o.bindAll(this),this.addSubscribers();var t=this;$(document).off("click",".teamlist-header, .team-list-icon"),$(document).on("click",".teamlist-header, .team-list-icon",function(e){t.showList(e)})}}),i}),define("text!media/templates/image-item.html",[],function(){return'<a href="{{_link}}" data-index="{{index}}" data-id="{{_media_id}}" class="image-outer-h {{^_has_link}}open-photo-player-h{{/_has_link}}">\r\n	<div class="image-item-container">\r\n		{{#_thumbnail}}<img itemprop="image" class="list-thumbnail" src="{{_thumbnail}}" alt=""/>{{/_thumbnail}}\r\n		{{^_thumbnail}}\r\n\r\n			<div class="game-tile">{{_noicon_text}}</div>\r\n			<div class="back-cover">{{#_sports_icon}}<img src="{{_sports_icon}}" class="sports-icon" />{{/_sports_icon}}</div>\r\n\r\n		{{/_thumbnail}}\r\n		<div class="action-section mobile-hide">\r\n\r\n\r\n				<div class="action-block left-block vote vote-h {{#_has_voted}} link-disabled {{/_has_voted}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}">\r\n					<span>vote{{#_has_voted}}d{{/_has_voted}}</span>\r\n				</div>\r\n				{{#_can_follow}}\r\n				<div class="action-block right-block follow follow-h {{#_is_following}} link-disabled {{/_is_following}}" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>follow{{#_is_following}}ing{{/_is_following}}</span></div>\r\n				{{/_can_follow}}\r\n\r\n			{{#show_delete}}\r\n			<!--<div class="action-block left-block edit edit-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>edit</span></div>-->\r\n			<div class="action-block right-block delete delete-h" subject-type-id="{{_enttypes_id}}" subject-id="{{_id}}"><span>delete</span></div>\r\n			{{/show_delete}}\r\n			{{#usl_game_link_id}}\r\n			{{#show_edit}}\r\n			<div class="action-block right-block edit edit-h" subject-type-id="{{usl_enttype_id}}" subject-id="{{usl_game_link_id}}"><span>edit</span></div>\r\n			<div class="action-block left-block delete-from-game delete-h" subject-type-id="{{usl_enttype_id}}" subject-id="{{usl_game_link_id}}"><span>remove</span></div>\r\n			{{/show_edit}}\r\n			{{/usl_game_link_id}}\r\n\r\n		</div>\r\n		<div class="mobile-hide detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n			{{#_label}}<h6>{{_label}}</h6>{{/_label}}\r\n			{{#_sublabel}}\r\n				{{#label}}\r\n					<span>{{label}}</span>\r\n				{{/label}}\r\n				{{^label}}\r\n					<span itemprop="description">{{_sublabel}}</span>\r\n				{{/label}}\r\n			{{/_sublabel}}\r\n			<div style="display: block; min-height: 150px;">&nbsp;</div>\r\n			{{#meta}}\r\n				<div itemprop="{{itemprop}}">{{content}}</div>\r\n			{{/meta}}\r\n		</div>\r\n	</div>\r\n</a>'}),define("text!media/templates/image-item-detail.html",[],function(){return'<li class="detail_row_mobile .uk-animation-slide-top" id="<%= liid %>">\r\n	<div class="uk-width-1-1 uk-panel">\r\n		<div class="uk-panel-box">\r\n			<div class="uk-panel-header">\r\n				<% if(false){ %>\r\n					<% if(_is_following){ %>\r\n					<div class="uk-panel-badge uk-badge " subject-type-id="<%= _enttypes_id %>" subject-id="<%= _id %>">Following</div>\r\n					<% } %>\r\n				<% } %>\r\n				<% if(!_.isUndefined(votes)){ %>\r\n					<div class="uk-panel-badge uk-badge uk-badge-success" subject-type-id="<%= _enttypes_id %>" subject-id="<%= _id %>"><%= votes %> Vote<% if(votes!=1){ %>s<% } %></div>\r\n				<% } %>\r\n				<h4 class="uk-panel-title">\r\n					<i class="<%= ukicon %>"></i>\r\n					<a href="<%= _link %>"><%= _label %></a>\r\n				</h4><span></span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</li>'}),define("common/models/delete",["models","facade"],function(e,t){var n=e.BaseModel,r=t.Backbone,i=t.$,s=t._;return n.extend({subject_id:undefined,enttypes_id:undefined,removeNode:undefined,id:1,url:function(){return"/api/ent/delete/"+this.enttypes_id+"/"+this.subject_id},destroyAndRemove:function(){if(confirm("Are you sure you want to delete this?")){var e=this;this.destroy({success:function(t,n){e.removeNode.remove()}})}}})}),define("sportorg/models/game",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,game_name:null,game_day:null,game_time:null,game_picture:null,teams:[{team_name:null,team_location:null,points_scored:0,points_against:0,is_winner:null}],game_location:null},desc:"Game information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/game/basics/"+this.id}}),n}),define("common/models/entparse",["models","facade","media/models/image","media/models/video","sportorg/models/team","sportorg/models/game","user/models/basics"],function(e,t){var n=e.BaseModel,r=t.Backbone,i=t.$,s=t._;return n.extend({mpay:{},thumb_size:220,display_width:220,display_height:220,parsedData:{},initialize:function(e){e.mpay&&(this.mpay=e.mpay),e.thumb_size&&(this.thumb_size=e.thumb_size),e.display_width&&(this.display_width=e.display_width),e.display_height&&(this.display_height=e.display_height),this.parseResult()},ucwords:function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},findCorrectType:function(e){var t=!1,n=this;s.each(e,function(e){t=t||e,e.height>=n.display_height&&e.width>=n.display_width&&(t.height<n.display_height&&t.width<n.display_width?t=e:t.height>e.height&&t.width>e.width&&(t=e))}),this.closest_image_format=t},parseResult:function(){var e=this,t=this.mpay,n={_enttypes_id:t.enttypes_id,_id:t.id,_has_voted:t.has_voted,_is_following:t.is_following,_can_follow:t.can_follow,votes:t.num_votes,show_play:!1,show_delete:!1,show_edit:!1};switch(t.enttypes_id){case"23":n=e.parse_video(t,n),n.ukicon="uk-icon-video-camera",n.modelToUse=require("media/models/video");break;case"21":n=e.parse_image(t,n),n.modelToUse=require("media/models/image"),n.ukicon="uk-icon-picture-o";break;case"1":n=e.parse_user(t,n),n.modelToUse=require("user/models/basics"),n.ukicon="uk-icon-user";break;case"8":n=e.parse_game(t,n),n.modelToUse=require("sportorg/models/game"),n.ukicon="uk-icon-trophy";break;case"2":n=e.parse_org(t,n),n.ukicon="uk-icon-users";break;case"5":n=e.parse_team(t,n),n.modelToUse=require("sportorg/models/team"),n.ukicon="uk-icon-users"}e.closest_image_format!="undefined"&&e.closest_image_format!=null?n=e.imageFormat(n):n.imgData="",e.parsedData=n},get_selected_icon:function(e,t){if(!t)var t="large";if(t=="large")var n=e.large_icon;if(t=="small")var n=e.small_icon;return n.split(".png")[0]+"_selected.png"},parse_team:function(e,t){return typeof e.picture_obj=="object"&&e.picture_obj!=null&&typeof e.picture_obj.types=="object"&&this.findCorrectType(e.picture_obj.types),t._noicon_text=e.org_name,t._color="#928add",t._sports_icon=this.get_selected_icon(e.org_sport_link_obj.sport),t._label=e.complevels_obj.abbr+" "+e.org_sport_link_obj.sport.sport_name+" "+e.year,t._sublabel="Votes: "+e.num_votes+", Followers: "+e.num_followers,t._link="#!team/"+e.id,t._has_link=!0,e.hasOwnProperty("is_owner")&&(t.show_delete=e.is_owner),t.itemtype="http://schema.org/Organization",t.meta=[{itemprop:"name",content:e.team_name},{itemprop:"address",content:e.team_location},{itemprop:"url",content:t._link}],t},parse_org:function(e,t){return t._noicon_text="org",t._color="#928add",t._label=e.name,t._sublabel="Votes: "+e.num_votes+", Followers: "+e.num_followers,t._link="/#!team/"+e.id,t._has_link=!0,e.hasOwnProperty("is_owner")&&(t.show_delete=e.is_owner),t.itemtype="http://schema.org/Organization",t.meta=[{itemprop:"name",content:e.org_name},{itemprop:"address",content:e.org_location},{itemprop:"url",content:t._link}],t},parse_user:function(e,t){return typeof e.user_picture_obj=="object"&&typeof e.user_picture_obj.types=="object"&&this.findCorrectType(e.user_picture_obj.types),parseInt(e.usl_game_link_id)>0&&(t.usl_game_link_id=e.usl_game_link_id,t.usl_enttype_id=e.usl_enttype_id),e.can_edit==1&&(t.show_edit=!0),e.result_time&&e.result_time!="00:00:00:00"?t._sublabel="Result Time: "+e.result_time:t._sublabel="Votes: "+e.num_votes+", Followers: "+e.num_followers,t._noicon_text="hi",t._color="#c4df89",t._label=e.label,t._link="#!profile/"+e.id,t._has_link=!0,e.hasOwnProperty("is_owner")&&(t.show_delete=e.is_owner),t.itemtype="http://schema.org/Person",t.meta=[{itemprop:"name",content:e.name},{itemprop:"url",content:t._link}],t},parse_video:function(e,t){return typeof e.standard_thumb=="object"?(this.closest_image_format=e.standard_thumb,t._thumbnail=this.closest_image_format.url):t._thumbnail=e.thumbs,t.show_play=!0,t._enttypes_id=typeof (e.media=="object")?e.media.enttypes_id:0,t._id=typeof (e.media=="object")?e.media.id:0,t._label=e.media.name,t._link="javascript: void(0);",t._has_link=!1,e.media.hasOwnProperty("is_owner")&&(t.show_delete=e.media.is_owner),t._noicon_text="play",t._color="#e27171",t},parse_image:function(e,t){t._enttypes_id=typeof (e.media_obj=="object")?e.media_obj.enttypes_id:0,t._id=typeof (e.media_obj=="object")?e.media_obj.id:0,typeof e.types=="object"&&this.findCorrectType(e.types);var n=!s.isUndefined(e.media_obj.users_obj)&&!s.isUndefined(e.media_obj.users_obj.label)?e.media_obj.users_obj.label:!1;if(typeof e.media_obj.sports_obj=="object"){var r;parseInt(e.media_obj.sports_obj.male)==1&&parseInt(e.media_obj.sports_obj.female)==0?r="Men's ":parseInt(e.media_obj.sports_obj.female)==1&&parseInt(e.media_obj.sports_obj.male)==0?r="Women's ":parseInt(e.media_obj.sports_obj.male)==1&&parseInt(e.media_obj.sports_obj.female)==1&&(r="Coed "),r+=this.ucwords(e.media_obj.sports_obj.sport_name)}return t._sublabel=[],n&&t._sublabel.push({label:"up'd by "+n}),r&&t._sublabel.push({label:"Sport: "+r}),t.itemtype="http://schema.org/Person",t.meta=[{itemprop:"name",content:n||""}],t._link="javascript: void(0);",t._has_link=!1,e.media_obj.hasOwnProperty("is_owner")&&(t.show_delete=e.media_obj.is_owner),t._noicon_text="look",t._color="#dfe271",t},parse_game:function(e,t){return t._detailclass="game",typeof e.game_picture=="object"&&e.game_picture!=null&&typeof e.game_picture.types=="object"&&(this.findCorrectType(e.game_picture.types),t._thumbnail=this.closest_image_format.url),e.sports_obj&&(t._sports_icon=this.get_selected_icon(e.sports_obj)),t._label=e.game_name,t._link="#!game/"+e.id,t._has_link=!0,e.hasOwnProperty("is_owner")&&(t.show_delete=e.is_owner),t._sublabel=e.full_date,t._noicon_text="vs",t._color="#e49f6f",t},imageFormat:function(e){var t=this;e._thumbnail=this.closest_image_format.url;var n=t.closest_image_format,r=n.width/this.display_width,i=n.height/this.display_height;n.width=parseInt(n.width),n.height=parseInt(n.height);var s=n.width>n.height?-(n.width/i-this.display_width)/2:-(n.height/r-this.display_height)/2;return s>0&&(s=0),n.width>n.height?(n.maxwidth=n.width/i,n.left=s):(n.maxheight=n.height/r,n.top=s),e.imgData=n,e}})}),define("media/views/image-item",["vendor","views","utils","text!media/templates/image-item.html","text!media/templates/image-item-detail.html","votes/models/vote","votes/models/follow","utils/storage","chrome/views/header","common/models/delete","common/models/entparse"],function(e,t,n,r,i){var s,o=e.$,u=t.BaseView,a=e.Mustache,f=require("votes/models/vote"),l=require("utils/storage"),c=require("votes/models/follow"),h=require("common/models/delete"),p=require("chrome/views/header"),d=require("common/models/entparse");return s=u.extend({tagName:"li",className:"image",events:{"click .vote-h":"vote","click .follow-h":"follow","click .edit-h":"edit","click .delete-h":"delete","click .image-outer-h":"stopIfMobile"},initialize:function(e){this.template=r;if(e.length)for(var t in e)this[t]=e[t];e.mainView&&(this.mainView=e.mainView)},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},stopIfMobile:function(e){routing.mobile&&e.preventDefault()},render:function(){function h(e){console.log(o(this),e)}var e=this,t=this.model.get("payload");if(_.isArray(t)||t.image_id==0)return!1;var n=routing.mobile?o(window).width()/3:220,r=new d({mpay:t,display_height:n,display_width:n}),i=r.parsedData;i._media_id=t.media_id;var s=a.to_html(this.template,i);this.$el.html(s);var u="120px",f="92px";this.$el.find(".image-item-container").mouseout(function(){o(this).find(".action-block").css({opacity:0}),o(this).find(".detail-view").css({bottom:"-"+f}),o(this).find(".detail-view.game").css({bottom:"-"+u})});var l=this.$el.find(".game-tile");if(l.length){var c=l.text().length;console.log(c),c<3?l.css({"font-size":"5em",top:"90px",left:"60px"}):c<5?l.css({"font-size":"4em",top:"90px",left:"40px"}):c<25?l.css("font-size","2em"):c<30?l.css({"font-size":"1.7em",top:"65px"}):c<40?l.css({"font-size":"1.5em",top:"50px"}):l.css("font-size","1em")}return i.imgData.maxwidth&&this.$el.find("img.list-thumbnail").css({"max-width":i.imgData.maxwidth,left:i.imgData.left}),i.imgData.maxheight&&this.$el.find("img.list-thumbnail").css({"max-height":i.imgData.maxheight,top:i.imgData.top}),i.show_play&&!routing.mobile&&this.$el.append('<div class="circle open-photo-player-h"><div class="play"></div></div>'),routing.mobile?this.$el.on("click",null,i,this.insertDetailView):(this.$el.find(".image-item-container").mouseover(function(){o(this).find(".detail-view").css({bottom:"0px"}),o(this).find(".action-block").css({opacity:90})}),this.$el.find(".circle").mouseover(function(){o(this).parent().find(".detail-view").css({bottom:"0px"}),o(this).parent().find(".action-block").css({opacity:90})})),this.$el.find(".vote-h").click(function(t){e.vote(t)}),this.$el.find(".follow-h").click(function(t){e.follow(t)}),this.$el.find(".edit-h").click(function(t){e.edit(t)}),this.$el.find(".delete-h").click(function(t){e["delete"](t)}),this.$el.find("a.image-outer-h").on("click",this.stopIfMobile),setTimeout(function(){if(e.$el.is(":visible"))console.log(e.$el.width()),e.$el.css("height",Math.floor(e.$el.width())),e.$el.find("div.image-item-container").css({height:e.$el.width(),"min-height":e.$el.width()});else{var t=Math.floor(o(window).width()*(e.$el.width()/100));console.log(t),e.$el.css("height",t),e.$el.find("div.image-item-container").css({height:t,"min-height":t})}},5),this},insertDetailView:function(e){var t=o(e.target).closest("li");t.parent().find("li.detail_row_mobile").remove(),t.parent().find("li").removeClass("selected"),t.addClass("selected");var n=Math.ceil((t.index()+1)/3)*3-1,r=_.extend({liid:"detail_"+e.data._enttypes_id+"_"+e.data._id},e.data);_.isUndefined(r._label)&&(r._label=r._sublabel[0].label);var s=_.template(i,r);t.parent().find("li:eq("+n+")").after(s);if(_.isObject(r.modelToUse)){var u=new r.modelToUse({id:r._id});u.fetch({success:function(e){console.log(e)}})}},vote:function(e){e.preventDefault(),e.stopPropagation();var t=this,n=function(n){var r=new f;r.subject_id=t.model.get("payload").id,r.entity_id=t.model.get("payload").enttypes_id,r.setData(),r.save(),o.when(r.request).done(function(){o(e.currentTarget).addClass("link-disabled").html("voted"),n&&n()})};t.checkForUser()?n():routing.trigger("showSignup",function(e){n(function(){e&&e()})})},follow:function(e){e.preventDefault(),console.log(e.target),e.stopPropagation();var t=this,n=function(n){var r=new c;r.subject_id=t.model.get("payload").id,r.entity_id=t.model.get("payload").enttypes_id,r.save(),o.when(r.request).done(function(){typeof r.get("payload").follower=="object"&&typeof r.get("payload").subject=="object"&&r.get("payload").id>0&&o(e.currentTarget).addClass("link-disabled").html("following"),n&&n()})};t.checkForUser()?n():routing.trigger("showSignup",function(e){n(function(){e&&e()})})},edit:function(e){e.stopPropagation(),e.preventDefault()},"delete":function(e){e.stopPropagation(),e.preventDefault(),deleteModel=new h,deleteModel.subject_id=o(e.currentTarget).attr("subject-id"),deleteModel.enttypes_id=o(e.currentTarget).attr("subject-type-id"),deleteModel.removeNode=o(e.currentTarget).parents("li.image"),deleteModel.destroyAndRemove(),this.mainView&&this.mainView.showAddButton&&_.isFunction(this.mainView.showAddButton)&&this.mainView.showAddButton()}}),s}),define("profile/views/header",["require","text!profile/templates/header.html","text!profile/templates/sports.html","profile/models/basics","facade","views","utils","vendor","profile/collections/sports","profile/views/sport-list","utils/storage","media/views/image-item"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("profile/models/basics"),a=o.SectionView,f=e("profile/views/sport-list"),l=e("profile/collections/sports"),c=e("utils"),h=c.lib.Channel,p=e("vendor"),d=p.Mustache,v=e("utils/storage"),m=e("media/views/image-item"),g=s.$;return r=a.extend({id:"main-header",template:t,selectSportTemplate:n,events:{"click .sports-icon-h":"selectSport"},initialize:function(e){a.prototype.initialize.call(this,e),this.sports_id=e.sports_id,this.initSportList()},initSportList:function(){var e=this;this.sports=new l,this.sports.id=this.model.id,this.sports.fetch(),this.model.get("payload").loggedInUser=this.checkForCurrentUser(),g.when(this.sports.request).done(function(){e.setupSportListView(),e.selectSport()})},checkForCurrentUser:function(){return routing.loggedInUserId==this.model.id?!0:!1},setupSportListView:function(){var e=this,t=new f({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),e.$el.find("#sports-info").html(t.el);var r={payload:[]},s=t.collection;if(s.length){for(i=0;i<s.length;i++)r.payload[i]=s.at(i).get("payload");var o=d.to_html(e.selectSportTemplate,r);e.$el.find(".sports-h").html(o)}else this.model.get("payload").id!=routing.loggedInUserId?e.$el.find(".sports-h").html(this.model.get("payload").first_name+" has not entered any sports or teams."):e.$el.find(".sports-h").html('<a href="#!usersettings" title="edit sports" class="btn pull-right">Edit Sports</a>');t.render()},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){a.prototype.render.call(this,e,t,n),this.renderImage()},renderImage:function(){this.headerImage=new m({model:this.model}),this.headerImage.render(),this.$el.find(".image-outer-h").html(this.headerImage.$el)},getUserName:function(){return this.model.get("payload").label},selectSport:function(e){var t=e?g(e.target).data("id"):this.sports_id?this.sports_id:g(".sports-h img:first-child").data("id"),n=e?g(e.target).data("name"):g(".sports-h img:first-child").data("name");n?this.$el.find(".sports-name-h").html(n+" Profile"):this.$el.find(".sports-name-h").html("No Sport Selected"),ga("send","event","Profile-Action","Sport-Change",n,t),g(".sports-icon-h.selected-sport-h").each(function(){console.log(this);var e=String(g(this).attr("src")).split("_selected.png")[0];e=e.split(".png")[0]+".png",g(this).attr("src",e).removeClass("selected-sport-h")}),g(".sports-icon-h[data-id="+t+"]").addClass("selected-sport-h");var r=String(g(".sports-icon-h[data-id="+t+"]").attr("src")).split(".png")[0]+"_selected.png";g(".sports-icon-h[data-id="+t+"]").attr("src",r);var i=this.getUserName();t&&(i+=" | "+n,this.$(".sport-info").stop().slideUp(),this.$(".sport-info-"+t).stop().slideDown(),routing.trigger("showTwmList",t));if(t){var s=window.location.hash;s.match(/\/sport\/(.*)[0-9]\//i)?s=s.replace(/\/sport\/(.*)[0-9]\//i,"/sport/"+t+"/"):s.match(/\/sport\/(.*)[0-9]/i)?s=s.replace(/\/sport\/(.*)[0-9]/i,"/sport/"+t):s=s+"/sport/"+t,e?routing.navigate(s,{trigger:!1}):routing.navigate(s,{trigger:!1,replace:!0})}routing.mobile&&g("#games_div, #fans-div, #commenton-wrap, #main-content, .buttons-h, #comment_div").hide(),g(".green-left-heading").removeClass("down-arrow-heading"),document.title=i}}),r}),define("text!media/templates/add-media.html",[],function(){return'{{#links}}\r\n	<div>\r\n	<a href="{{link}}" title="{{label}}" id="{{id}}">\r\n	</a>\r\n	<span class="hide character-limit-h">{{label}}</span>		\r\n	</div>\r\n\r\n{{/links}}'}),define("profile/views/add-media",["require","text!media/templates/add-media.html","application","profile/models/addmedia","facade","views"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=i._;return r=o.extend({id:"add-media",tagName:"div",template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","click #addGame":"openAddGamePopup","mouseover a":"showText","mouseout a":"showicon"},setOptions:function(e){if(!this.model)throw new Error("ProfileAddMediaView expects option with model property.");this.model.userid=e.userid},showText:function(e){$(e.target).parent().find("span").removeClass("hide")},afterRender:function(){var e=this;$ele=this.$el.find(".character-limit-h"),$ele.each(function(){e.adJustFontDynamically($(this))})},showicon:function(e){$(e.target).parent().find("span").addClass("hide")},openAddGamePopup:function(){ga("send","event","Open-Add-Popup","Game","User opened game adder",this.model.userid),routing.trigger("add-game",this.model.userid)},openAddImagePopup:function(e){ga("send","event","Open-Add-Popup","Image","User opened image uploader",this.model.userid);var t=$(".selected-sport-h").data("id"),n="/api/user/addimage/"+this.model.userid,n="/api/user/addimage/"+this.model.userid,r={sports_id:t};routing.trigger("add-image",n,r)},openAddvideoPopup:function(e){ga("send","event","Open-Add-Popup","Video","User opened video uploader",this.model.userid);var t="/api/user/addvideo/"+this.model.userid;Channel("add-video").publish(t)}}),r}),define("text!schedules/templates/schedule-item.html",[],function(){return'{{#payload}}\r\n	<div class="select-team">\r\n	{{#teams}}\r\n		<div class="org-name">\r\n			<a href="/#!team/{{team_id}}"><span class="team-label">{{org_name}} | {{complevel}} | {{season}} {{year}}</span></a>\r\n			<a href="javascript: void(0);" data-team-id="{{team_id}}" data-sport-id="0" title="add game" class="add-game-h desktop-link right-with-icon">ADD GAME</a>\r\n			<!--<a href="javascript: void(0);" data-sport-id="0" title="add team" class="add-event-h">Click here to Add Event.</a>-->\r\n		</div>\r\n			<div class="game-box-outer">\r\n				<ul>\r\n				{{#schedules}}\r\n					<li data-game-id="{{id}}">\r\n						<a href="#!game/{{id}}" data-team-id="{{team_id}}" class="{{#isWinner}}win{{/isWinner}}{{^isWinner}}background-blue{{/isWinner}} team-info-h">\r\n							<div class="game-info hide">\r\n								<span class="game-day">{{gameDay}}</span>{{#teams}}<span class="team-name" data-winner="{{isWinner}}" data-team-id="{{id}}">\r\n								&nbsp; vs. {{team_name}}</span>{{/teams}}\r\n								<span class="game-score">{{#teams}}{{#points_scored}}<span class="team-score {{#isWinner}}win{{/isWinner}}{{^isWinner}}loss{{/isWinner}}">{{points_scored}}</span>{{/points_scored}}{{/teams}}</span>\r\n							</div>\r\n						</a>\r\n					</li>\r\n				{{/schedules}}\r\n			</ul>\r\n		</div>\r\n		\r\n		<a href="javascript: void(0);" title="show older" class="common-btn common-default-comment-dark-grey mobile-link show-older-h">SHOW OLDER</a>\r\n		<a href="javascript: void(0);" data-team-id="{{team_id}}" data-sport-id="0" title="add game" class="add-game-h common-btn common-default-game-orange mobile-link right-with-icon">ADD GAME</a>\r\n		\r\n	{{/teams}}\r\n	</div>\r\n{{/payload}}'}),define("text!schedules/templates/schedule-single-item.html",[],function(){return'{{#payload}}\r\n<a href="#game/{{id}}" data-team-id="{{teams_id}}" class="background-blue team-info-h">\r\n	<div class="game-info hide">\r\n		<span class="game-day">{{gameDay}}</span>{{#teams}}<span class="team-name" data-winner="{{isWinner}}" data-team-id="{{id}}">\r\n									&nbsp; vs. {{team_name}}</span>{{/teams}}\r\n		<span class="game-score">{{#teams}}{{#points_scored}}<span class="team-score {{#isWinner}}win{{/isWinner}}{{^isWinner}}loss{{/isWinner}}">{{points_scored}}</span>{{/points_scored}}{{/teams}}</span>\r\n	</div>\r\n</a>\r\n{{/payload}}'}),define("text!schedules/templates/schedule-event-item.html",[],function(){return'{{#payload}}\r\n	<a href="#!game/{{id}}" class="{{#result_time}}background-blue{{/result_time}}{{^result_time}}noscore{{/result_time}} team-info-h"><div class="game-info hide">\r\n		<span class="game-header"><span class="game-day">{{event_name}}</span></span>\r\n		<span class="game-day">{{game_day}}</span><br/>\r\n		<span class="team-name">{{game_location}}</span><br/>\r\n		{{#is_race}}\r\n		{{#result_time}}<span class="game-score"><span class="team-score">{{result_time}}</span></span>{{/result_time}}\r\n		{{^result_time}}<span class="game-score"><span class="team-score add-score" data-uslgamelink="{{usl_game_link_id}}">Add My Time</span></span>{{/result_time}}\r\n		{{/is_race}}\r\n	</div></a>\r\n{{/payload}}'}),define("schedules/views/schedule-item",["vendor","views","utils","text!schedules/templates/schedule-item.html","text!schedules/templates/schedule-single-item.html","text!schedules/templates/schedule-event-item.html"],function(e,t,n,r,i,s){var o=e.$,u=t.BaseView,a=e.Mustache;return u.extend({tagName:"li",className:"org",events:{"change #select-team":"selectTeam"},initialize:function(e){console.log(e),e.model&&e.model.collection&&(this.teams_id=e.model.collection.id),e.teamView&&(this.teamView=e.teamView),e.eventView&&(this.eventView=e.eventView)},render:function(){if(this.teamView){this.mpay=this.model.get("payload"),this.template=i;var e=a.to_html(this.template,{payload:this.mpay,teams_id:this.teams_id});o(this.el).attr("data-team-id",this.teams_id)}else if(this.eventView&&this.eventView!=""){delete this.teams_id;if(this.model.get("payload")!==null&&this.model.get("payload").result_time==="0h 0m 0s"){var t=this.model.get("payload");t.result_time=null,this.model.set("payload",t)}console.log("schedule item event",this.model.toJSON()),this.template=s;var e=a.to_html(this.template,this.model.toJSON())}else{delete this.teams_id,this.template=r;var e=a.to_html(this.template,this.model.toJSON())}return this.$el.html(e),this.select_team=this.$("#select-team"),console.log(this.select_team),this.selectTeam(),this.setWins(),this},setWins:function(){var e=this.teams_id!=undefined?this.teams_id:o(this.el).find("div.org-name a.add-game-h").attr("data-team-id"),t=this,n=o(this.el).attr("data-team-id")?o(this.el):o(this.el).find("ul li");n.each(function(t){e=o(this).find("a.team-info-h").attr("data-team-id");var n=o(this).find('span.team-name[data-team-id="'+e+'"]');o(this).find('span.team-name[data-team-id="'+e+'"][data-winner="true"]').length&&o(this).find("a.team-info-h").addClass("win").removeClass("background-blue"),o(this).find('span.team-name[data-winner="true"]').length||o(this).find("a.team-info-h").addClass("noscore").removeClass("background-blue"),o(this).find('span.team-name[data-team-id="'+e+'"]').hide()})},selectTeam:function(e){var t=this.select_team.val();this.$(".team-info").stop().slideUp(),this.$(".team-info-"+t).stop().slideDown(),console.log(t)}})}),define("text!schedules/templates/schedule-list.html",[],function(){return'{{#data}}\r\n	<div>\r\n		{{#eventPage}}\r\n			<span class="event-sport-label">{{eventPage}} Events</span>\r\n			<a href="javascript: void(0);" title="Add an Event / Meet" class="add-event-h desktop-link right-with-icon">Add Event / Meet</a>\r\n		{{/eventPage}}\r\n\r\n		{{^eventPage}}\r\n			<span class="event-sport-label">&nbsp;</span>\r\n			<a href="javascript: void(0);" title="Add a Game" class="add-game-h desktop-link right-with-icon">ADD GAME</a>\r\n		{{/eventPage}}\r\n	</div>\r\n<div class="select-team">\r\n	<div class="game-box-outer">\r\n		<ul class="schedule-list-h">\r\n			\r\n		</ul>\r\n	</div>\r\n</div>\r\n{{#eventPage}}\r\n\r\n	<a href="javascript: void(0);" title="Add an Event / Meet" class="add-event-h common-btn common-default-game-orange mobile-link right-with-icon">Add Event / Meet</a>\r\n{{/eventPage}}\r\n\r\n{{^eventPage}}\r\n		<a href="javascript: void(0);" title="show older" class="show-older  mobile-link show-older-h">SHOW OLDER</a>\r\n		<a href="javascript: void(0);" title="add game" class="add-game-h mobile-link right-with-icon">ADD GAME</a>\r\n{{/eventPage}}\r\n\r\n\r\n</div>\r\n{{/data}}\r\n{{^data}}\r\n<div class="info">\r\n	{{#eventPage}}\r\n	<div>\r\n		<a href="javascript: void(0);" title="Add an Event" class="add-event-h desktop-link right-with-icon">Add Event / Meet</a>\r\n		<a href="javascript: void(0);" title="Add an Event" class="add-event-h common-btn common-default-game-orange add-event-link mobile-link right-with-icon">Add Event / Meet</a>\r\n	</div>\r\n	{{/eventPage}}\r\n	{{^eventPage}}\r\n	<div>\r\n		<a href="javascript: void(0);" title="show older" class="show-older mobile-link show-older-h">SHOW OLDER</a>\r\n		<a href="javascript: void(0);" title="add game" class="add-game-h desktop-link right-with-icon">ADD GAME</a>\r\n	</div>\r\n	{{/eventPage}}\r\n</div>\r\n{{/data}}\r\n'}),define("common/models/add",["facade","models/base"],function(e,t){var n=e._;return t.extend({defaults:n.extend({},(new t).attributes,{payload:{image_id:0,image_path:null,image_title:null,num_votes:0},desc:"Image information",exec_data:{exec_time:0,exec_error:!1}}),processItemFromResponse:function(e,t){var n=this,r=e;return n.id=Math.ceil(Math.random()*1e5),typeof t!="undefined"?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this},processItemFromPayload:function(e,t){var n=this,r=e.payload;return n.id=Math.ceil(Math.random()*1e5),typeof t!="undefined"?n.set("payload",r[t]):n.set("payload",r),n.set("desc",e.desc),n.set("exec_data",e.exec_data),this}})}),define("sportorg/models/uslgamelink",["facade","models/base"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({initialize:function(e){e&&e.id&&(this.id=e.id)},methodToURL:{read:function(e){console.log(e);var t="/api/uslgamelink/basics/"+e.id;return t},create:"/api/uslgamelink/add/",update:function(e){var t="/api/uslgamelink/add/";return e.id&&(t+=e.id),t},"delete":function(e){return"/api/uslgamelink/delete"+e.id}},sync:function(e,t,n){return n=n||{},n.url=typeof t.methodToURL[e.toLowerCase()]=="function"?t.methodToURL[e.toLowerCase()](t):t.methodToURL[e.toLowerCase()],i.sync.apply(this,arguments)}}),n}),define("text!common/templates/add-description.html",[],function(){return'<div class="add-big-list-container">\r\n<div class="border-wrapper">\r\n	<div class="left-text">\r\n		{{data.message.left}}\r\n	</div>\r\n	<div class="right-secton {{data.className.mainDiv}} {{data.page}}">\r\n		{{#data.className.btn1}}\r\n			<div>\r\n				<a href="javascript: void(0);" data-target="{{data.className.btn1}}" class="btn1 add-icon-large"></a>\r\n				<span>{{data.message.btn1}}</span>\r\n			</div>\r\n		{{/data.className.btn1}}\r\n		\r\n		{{#data.className.btn2}}\r\n			<div>\r\n				<a href="javascript: void(0);" data-target="{{data.className.btn2}}" class="btn2 add-icon-large"></a>\r\n				<span>{{data.message.btn2}}</span>\r\n			</div>\r\n		{{/data.className.btn2}}\r\n	</div>\r\n</div>\r\n</div>'}),define("common/views/add-description",["require","text!common/templates/add-description.html","facade","views","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=r.Backbone.View.extend({}),o=i.BaseView,u=e("vendor"),a=u.Mustache;return n=o.extend({className:"",events:{"click .btn1":"targetElement","click .btn2":"targetElement"},initialize:function(e){console.error(e);for(var t in e)this[t]=e[t];this.extra_id||(this.extra_id=""),this.initializeData(),this.render()},targetElement:function(e){console.log(e,this.page);switch(this.page){case"fans":$(".fans-add-icons-h").find("."+$(e.target).attr("data-target")).trigger("click");break;case"media":$(".media-add-icons-h").find("."+$(e.target).attr("data-target")).trigger("click");break;case"games":$(".media-add-icons-h").find("."+$(e.target).attr("data-target")).trigger("click");break;case"rosters":this.extra_id!=""?(console.log($(e.target).closest("#roster-wrap").find("."+$(e.target).attr("data-target")+'[data-subject-id="'+this.extra_id+'"]')),$(e.target).closest("#roster-wrap").find("."+$(e.target).attr("data-target")+'[data-subject-id="'+this.extra_id+'"]').trigger("click")):(console.log($(e.target).closest("#roster-wrap").find("."+$(e.target).attr("data-target"))),$(e.target).closest("#roster-wrap").find("."+$(e.target).attr("data-target")).trigger("click"));break;case"participants":console.log($(".participants-add-icons-h").find("."+$(e.target).attr("data-target"))),$(".participants-add-icons-h").find("."+$(e.target).attr("data-target")).trigger("click")}},initializeData:function(){this.messages={fans:{left:"Become a fan and get notified whenever there's any activity for "+this.teamName+". Get notifications for new games or game changes, photos, videos, new team members or new messages.",btn1:"Click here to add yourself to the fan's list and receive notifications.",btn2:"Click here to invite friends from facebook to receive notifications."},media:{left:"The Photo/Video section displays all media that "+this.teamName+" is tagged in. There are currently no photos to show in this section. Use the buttons above to upload new photos or videos.",btn1:"Click here to upload photos of this team.",btn2:"Click here to upload videos of team."},games:{left:"The game timeline shows all of the scheduled games for this team. Each dot is a game. You can hover over the dot to get a preview, or click on the dot to go to game page. Click the 'add game' Button to add a new game to the timeline.",btn1:"Click here to add a game to this team's calendar. All team members will be notified of this new game."},rosters:{left:"This section is a team roster and it lists all registered users for "+this.teamName+". You can add yourself to this roster or invite friends from facebook who play for this team.'",btn1:"Click here to add yourself to this team's roster.'",btn2:"Click here to invite friends from facebook that play for this team."},participants:{left:"This section lists all participants competing in this event.  Click the 'Add Me' button to add yourself as a participant.",btn1:"Click here to add me as a participant in this event",btn2:"Invite a friend from facebook to participate in this event"}}},btnClasses:{fans:{btn1:"add-to-list-h",btn2:"invite-fans-from-fb-h",mainDiv:"fans"},media:{btn1:"add-image-h",btn2:"add-video-h",mainDiv:"media"},games:{btn1:"game-adder-h",mainDiv:"games"},rosters:{btn1:"add-to-roster-list-h",btn2:"invite-roster-from-fb-h",mainDiv:"roster"},participants:{btn1:"add-to-participants-list-h",btn2:"invite-participant-from-fb-h",mainDiv:"participants"}},render:function(){var e=this,n={};n.message=this.messages[this.page],n.className=this.btnClasses[this.page],n.page=this.page;var e=this,r=a.to_html(t,{data:n});console.log(r),$(this.target).is("ul")?setTimeout(function(){var t=$(e.target).parent();$(e.target).replaceWith("<div></div>"),e.$el.html(r),e.el=e.$el,t.html(e.$el)},500):(this.$el.html(r),this.el=this.$el,console.log(this.el),this.target.html(this.$el))}}),n}),define("schedules/views/schedule-list",["vendor","facade","views","utils","schedules/views/schedule-item","utils/storage","text!schedules/templates/schedule-list.html","chrome/views/header","common/models/add","sportorg/models/uslgamelink","vendor/plugins/qtip/qtip-wrapper","common/views/add-description"],function(e,t,n,r,i,s,o,u,a,f){var l,c,h=t.$,p=t._,d=r.lib.Channel,v=n.CollectionView,m=require("common/views/add-description"),g=e.Mustache,y=n.SectionView;return c=v.extend(y.prototype),l=c.extend({__super__:v.prototype,id:"schedule-list",name:"schedule List",tagName:"ul",currentSection:"games",_tagName:"li",_className:"org",_view:i,events:{"click .add-game-h":"addGame","click .add-event-h":"addEvent"},showinfo:function(e){e.preventDefault(),h(e.target).parents(".game-info").length||(h(e.target).find(".game-info").hasClass("hide")?h(e.target).find(".game-info").removeClass("hide"):h(".game-info").addClass("hide"))},checkForUser:function(){return!p.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},getUserId:function(){if(!p.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn)return routing.loggedInUserId},addRecordToCollection:function(e){var t=new addModel;t.processItemFromPayload(participants.toJSON()),_self.$el.find(".add-to-event").hide(),_self.collection.add(t)},addGame:function(e){var t=this;t.checkForUser()?t.openAddGamePopup(e):routing.trigger("showSignup",function(){t.openAddGamePopup(e)})},openAddGamePopup:function(e){var t=this;if(!p.isUndefined(this.teamRecords)&&this.teamRecords)routing.trigger("add-game",0,h("#team-h").val(),h("#sports-h").val(),t.controller.id,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("common-popup-close")});else{var n=h(".selected-sport-h").data("id")||h("#sports-h").val();routing.trigger("add-game",0,h(e.currentTarget).data("team-id"),n,t.controller.id,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("common-popup-close")})}},addEvent:function(e){var t=this;if(!this.checkForUser()){h("#userlogin").trigger("click");return}!p.isUndefined(this.teamRecords)&&this.teamRecords?routing.trigger("add-event",0,h("#sports-h").val(),t.controller.id,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")}):(console.log(h(".selected-sport-h").data("id")),routing.trigger("add-event",0,h(".selected-sport-h").data("id"),t.controller.id,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")}))},initialize:function(e){var t=this;d("load:css").publish(["vendor/plugins/qtip/qtip.css"]),t.eventPage=e.eventPage||!1,t.teamRecords=e.teamRecords,t.controller=e.controller||!1,!p.isUndefined(e.teamRecords)&&e.teamRecords&&(t.renderTemplate(),t.listView=".schedule-list-h",t.singleView=!0),!p.isUndefined(e.eventPage)&&e.eventPage&&(t.renderTemplate(t.eventPage),t.listView=".schedule-list-h",t.eventView=!0),v.prototype.initialize.call(t,e);if(!t.collection)throw new Error("Schedule expected options.collection.");p.bindAll(t),t.addSubscribers()},afterRender:function(){var e=this;this.$el.find("a.team-info-h").each(function(){var t=h(this);h(this).qtip2({content:t.find("div.game-info").html(),position:{my:"bottom center",at:"top center",viewport:h(window)},style:{classes:"tipsy game-info",width:"360px"},hide:{fixed:!0,delay:1e3},events:{render:function(t,n){console.error("here"),h(n.elements.tooltip).find(".add-score").on("click",e.addScore)}}}),routing.mobile&&(h(document).off("click",".add-score"),h(document).on("click",".add-score",e.addScore))})},addScore:function(e){e.stopPropagation(),e.preventDefault();var t=h(e.target).data("uslgamelink");h(e.target).off("click",this.addScore).html('<input type="text" placeholder="00:00:00" data-uslgamelink="'+t+'" style="width:100px; margin:0px;" id="usl_result_time_'+t+'" />'+'<span id="save_result_time'+t+'" style="margin-left:8px;">save</span>').find("#save_result_time"+t).on("click",this.updateGameLink)},updateGameLink:function(e){var t=h(e.target).prev(),n=new f({id:t.data("uslgamelink"),result_time:t.val()});n.save(),h.when(n.request).done(function(e){console.log(e),t.parent().html(e.payload.result_time)})},renderTemplate:function(e){var t=g.to_html(o,{data:this.collection.length,eventPage:e});return this.$el.html(t),this}}),l}),define("text!user/templates/related-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{user_picture}}" alt="{{user_name}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        <div class="username">{{user_name}}</div>\r\n        <div class="votes">Votes: {{num_votes}}</div>\r\n        <div class="fans">Followers: {{num_followers}}</div>\r\n    </div>\r\n</div>\r\n<table class="table">\r\n{{#teams}}\r\n    <tr>\r\n        <td>{{sport}}</td>\r\n        <td>{{position}}</td>\r\n        <td>{{org}}</td>\r\n        <td>{{season}}</td>\r\n        <td>{{year}}</td>\r\n    </tr>\r\n{{/teams}}\r\n</table>\r\n{{/payload}}\r\n\r\n'}),define("user/views/related-item",["vendor","views","utils","text!user/templates/related-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"related",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("user/views/related-list",["facade","views","utils","user/views/related-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"related-list",name:"Related List",tagName:"ul",_tagName:"li",_className:"related",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("RelatedListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!user/templates/fitnessbasic-item.html",[],function(){return'{{#payload}}\r\n	{{#data}}\r\n		<div class="fitness-overview-data-piece" style="">\r\n			<img title="{{name}}" src="{{icon}}" style=""/>\r\n			<span class="stat-val-outer">\r\n				<span class="stats-val-h">{{#val}}{{val}}{{/val}}{{^val}}--{{/val}}</span>\r\n				<input type="text" data-id="{{id}}" data-resume-data-id="{{resume_data_id}}" class="stats-input stats-input-h hide-force" value="{{#val}}{{val}}{{/val}}{{^val}}{{/val}}"/>\r\n			</span>\r\n		</div>\r\n	{{/data}}\r\n	{{^data}}\r\n		<div class="stats-empty-area">\r\n			Either no sport is selected,\r\n			or the selected sport has no \r\n			atheletic metrices to fill out.\r\n		</div>\r\n	{{/data}}\r\n{{/payload}}\r\n\r\n'}),define("user/models/rdtree",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("user/models/fitness",["facade","user/models/rdtree"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,resume_data_id:this.resume_data_id,user_value:this.user_value},processData:!0,url:function(){return"api/resumedataval/add/"}}),n}),define("text!vendor/plugins/qtip/qtip.css",[],function(){return'\r\n.qtip{position:absolute;left:-28000px;top:-28000px;display:none;max-width:280px;min-width:50px;font-size:10.5px;line-height:12px;direction:ltr;box-shadow:none;padding:0}.qtip-content{position:relative;padding:5px 9px;overflow:hidden;text-align:left;word-wrap:break-word}.qtip-titlebar{position:relative;padding:5px 35px 5px 10px;overflow:hidden;border-width:0 0 1px;font-weight:700}.qtip-titlebar+.qtip-content{border-top-width:0!important}.qtip-close{position:absolute;right:-9px;top:-9px;cursor:pointer;outline:medium none;border-width:1px;border-style:solid;border-color:transparent}.qtip-titlebar .qtip-close{right:4px;top:50%;margin-top:-9px}* html .qtip-titlebar .qtip-close{top:16px}.qtip-titlebar .ui-icon,.qtip-icon .ui-icon{display:block;text-indent:-1000em;direction:ltr}.qtip-icon,.qtip-icon .ui-icon{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;text-decoration:none}.qtip-icon .ui-icon{width:18px;height:14px;line-height:14px;text-align:center;text-indent:0;font:400 bold 10px/13px Tahoma,sans-serif;color:inherit;background:transparent none no-repeat -100em -100em}.qtip-focus{}.qtip-hover{}.qtip-default{border-width:1px;border-style:solid;border-color:#F1D031;background-color:#FFFFA3;color:#555}.qtip-default .qtip-titlebar{background-color:#FFEF93}.qtip-default .qtip-icon{border-color:#CCC;background:#F1F1F1;color:#777}.qtip-default .qtip-titlebar .qtip-close{border-color:#AAA;color:#111} .qtip-light{background-color:#fff;border-color:#E2E2E2;color:#454545}.qtip-light .qtip-titlebar{background-color:#f1f1f1} .qtip-dark{background-color:#505050;border-color:#303030;color:#f3f3f3}.qtip-dark .qtip-titlebar{background-color:#404040}.qtip-dark .qtip-icon{border-color:#444}.qtip-dark .qtip-titlebar .ui-state-hover{border-color:#303030} .qtip-cream{background-color:#FBF7AA;border-color:#F9E98E;color:#A27D35}.qtip-cream .qtip-titlebar{background-color:#F0DE7D}.qtip-cream .qtip-close .qtip-icon{background-position:-82px 0} .qtip-red{background-color:#F78B83;border-color:#D95252;color:#912323}.qtip-red .qtip-titlebar{background-color:#F06D65}.qtip-red .qtip-close .qtip-icon{background-position:-102px 0}.qtip-red .qtip-icon{border-color:#D95252}.qtip-red .qtip-titlebar .ui-state-hover{border-color:#D95252} .qtip-green{background-color:#CAED9E;border-color:#90D93F;color:#3F6219}.qtip-green .qtip-titlebar{background-color:#B0DE78}.qtip-green .qtip-close .qtip-icon{background-position:-42px 0} .qtip-blue{background-color:#E5F6FE;border-color:#ADD9ED;color:#5E99BD}.qtip-blue .qtip-titlebar{background-color:#D0E9F5}.qtip-blue .qtip-close .qtip-icon{background-position:-2px 0}.qtip-shadow{-webkit-box-shadow:1px 1px 3px 1px rgba(0,0,0,.15);-moz-box-shadow:1px 1px 3px 1px rgba(0,0,0,.15);box-shadow:1px 1px 3px 1px rgba(0,0,0,.15)}.qtip-rounded,.qtip-tipsy,.qtip-bootstrap{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.qtip-rounded .qtip-titlebar{-moz-border-radius:4px 4px 0 0;-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.qtip-youtube{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 3px #333;-moz-box-shadow:0 0 3px #333;box-shadow:0 0 3px #333;color:#fff;border-width:0;background:#4A4A4A;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#4A4A4A),color-stop(100%,#000));background-image:-webkit-linear-gradient(top,#4A4A4A 0,#000 100%);background-image:-moz-linear-gradient(top,#4A4A4A 0,#000 100%);background-image:-ms-linear-gradient(top,#4A4A4A 0,#000 100%);background-image:-o-linear-gradient(top,#4A4A4A 0,#000 100%)}.qtip-youtube .qtip-titlebar{background-color:#4A4A4A;background-color:rgba(0,0,0,0)}.qtip-youtube .qtip-content{padding:.75em;font:12px arial,sans-serif;filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#4a4a4a, EndColorStr=#000000);-ms-filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#4a4a4a, EndColorStr=#000000);"}.qtip-youtube .qtip-icon{border-color:#222}.qtip-youtube .qtip-titlebar .ui-state-hover{border-color:#303030}.qtip-jtools{background:#232323;background:rgba(0,0,0,.7);background-image:-webkit-gradient(linear,left top,left bottom,from(#717171),to(#232323));background-image:-moz-linear-gradient(top,#717171,#232323);background-image:-webkit-linear-gradient(top,#717171,#232323);background-image:-ms-linear-gradient(top,#717171,#232323);background-image:-o-linear-gradient(top,#717171,#232323);border:2px solid #ddd;border:2px solid rgba(241,241,241,1);-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 12px #333;-moz-box-shadow:0 0 12px #333;box-shadow:0 0 12px #333}.qtip-jtools .qtip-titlebar{background-color:transparent;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171, endColorstr=#4A4A4A);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171, endColorstr=#4A4A4A)"}.qtip-jtools .qtip-content{filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A, endColorstr=#232323);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A, endColorstr=#232323)"}.qtip-jtools .qtip-titlebar,.qtip-jtools .qtip-content{background:transparent;color:#fff;border:0 dashed transparent}.qtip-jtools .qtip-icon{border-color:#555}.qtip-jtools .qtip-titlebar .ui-state-hover{border-color:#333}.qtip-cluetip{-webkit-box-shadow:4px 4px 5px rgba(0,0,0,.4);-moz-box-shadow:4px 4px 5px rgba(0,0,0,.4);box-shadow:4px 4px 5px rgba(0,0,0,.4);background-color:#D9D9C2;color:#111;border:0 dashed transparent}.qtip-cluetip .qtip-titlebar{background-color:#87876A;color:#fff;border:0 dashed transparent}.qtip-cluetip .qtip-icon{border-color:#808064}.qtip-cluetip .qtip-titlebar .ui-state-hover{border-color:#696952;color:#696952}.qtip-tipsy{background:#000;background:rgba(0,0,0,.87);color:#fff;border:0 solid transparent;font-size:11px;font-family:\'Lucida Grande\',sans-serif;font-weight:700;line-height:16px;text-shadow:0 1px #000}.qtip-tipsy .qtip-titlebar{padding:6px 35px 0 10px;background-color:transparent}.qtip-tipsy .qtip-content{padding:6px 10px}.qtip-tipsy .qtip-icon{border-color:#222;text-shadow:none}.qtip-tipsy .qtip-titlebar .ui-state-hover{border-color:#303030}.qtip-tipped{border:3px solid #959FA9;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;background-color:#F9F9F9;color:#454545;font-weight:400;font-family:serif}.qtip-tipped .qtip-titlebar{border-bottom-width:0;color:#fff;background:#3A79B8;background-image:-webkit-gradient(linear,left top,left bottom,from(#3A79B8),to(#2E629D));background-image:-webkit-linear-gradient(top,#3A79B8,#2E629D);background-image:-moz-linear-gradient(top,#3A79B8,#2E629D);background-image:-ms-linear-gradient(top,#3A79B8,#2E629D);background-image:-o-linear-gradient(top,#3A79B8,#2E629D);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8, endColorstr=#2E629D);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8, endColorstr=#2E629D)"}.qtip-tipped .qtip-icon{border:2px solid #285589;background:#285589}.qtip-tipped .qtip-icon .ui-icon{background-color:#FBFBFB;color:#555}.qtip-bootstrap{font-size:14px;line-height:20px;color:#333;padding:1px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.qtip-bootstrap .qtip-titlebar{padding:8px 14px;margin:0;font-size:14px;font-weight:400;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;-webkit-border-radius:5px 5px 0 0;-moz-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}.qtip-bootstrap .qtip-titlebar .qtip-close{right:11px;top:45%;border-style:none}.qtip-bootstrap .qtip-content{padding:9px 14px}.qtip-bootstrap .qtip-icon{background:transparent}.qtip-bootstrap .qtip-icon .ui-icon{width:auto;height:auto;float:right;font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.qtip-bootstrap .qtip-icon .ui-icon:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4;filter:alpha(opacity=40)}.qtip:not(.ie9haxors) div.qtip-content,.qtip:not(.ie9haxors) div.qtip-titlebar{filter:none;-ms-filter:none}.qtip .qtip-tip{margin:0 auto;overflow:hidden;z-index:10}x:-o-prefocus,.qtip .qtip-tip{visibility:hidden}.qtip .qtip-tip,.qtip .qtip-tip .qtip-vml,.qtip .qtip-tip canvas{position:absolute;color:#123456;background:transparent;border:0 dashed transparent}.qtip .qtip-tip canvas{top:0;left:0}.qtip .qtip-tip .qtip-vml{behavior:url(#default#VML);display:inline-block;visibility:visible}\r\n.qtip-athletez{\r\n    font-size: 1em;\r\n    font-family: "Helvetica Neue", "Raleway";\r\n    line-height: 1.0em;\r\n    padding:4px;\r\n    color: white;\r\n}\r\n.qtip-photo{\r\n    background-color: #ddd43a;\r\n    border-color: #ddd43a;\r\n}\r\n.qtip-video, .qtip-red-c{\r\n    background-color: #c43737;\r\n    border-color: #c43737;\r\n}\r\n.qtip-yellow-c {\r\n	 background-color: #ddd439;\r\n    border-color: #ddd439;\r\n}\r\n.qtip-question {\r\n	 background-color: #014a7f;\r\n    border-color: #014a7f;\r\n}\r\n.qtip-green-c {\r\n	 background-color: #1ba0af;\r\n    border-color: #1ba0af;\r\n}\r\n.qtip-fb-c {\r\n	 background-color: #6b74b7;\r\n    border-color: #6b74b7;\r\n}\r\n.qtip-game {\r\n	 background-color: #d65d28;\r\n    border-color: #d65d28;\r\n	\r\n}\r\n.qtip-team{\r\n	 background-color: #948ce1;\r\n    border-color: #948ce1;\r\n}\r\n.qtip-team {\r\n    background-color: #4b3dc6;\r\n    border-color: #4b3dc6;\r\n}\r\n.qtip-game{\r\n    background-color: #d36011;\r\n    border-color: #d36011;\r\n}\r\n.qtip-athlete{\r\n    background-color: #9cca3c;\r\n    border-color: #9cca3c;\r\n}\r\n.qtip-orange {\r\n    background-color: #d45c27;\r\n    border-color: #d45c27;\r\n	\r\n}\r\n'}),define("user/views/fitnessbasic-item",["vendor","views","utils","text!user/templates/fitnessbasic-item.html","user/models/fitness","vendor/plugins/qtip/qtip-wrapper","text!vendor/plugins/qtip/qtip.css"],function(e,t,n,r,i){var s,o=e.$,u=t.BaseView,a=e.Mustache;return s=u.extend({tagName:"li",className:"fitnessbasic",events:{},showInput:function(e){o(e.target).addClass("hide-force"),o(e.target).parents("span.stat-val-outer").find(".stats-input-h").removeClass("hide-force").focus()},hideInput:function(e){var t=o(e.target).data("id"),n=-1,r=this.model.get("payload").data;for(var s in r)if(r[s].id==t){n=s;break}if(n!=-1){var u=new i;u.set({user_id:routing.loggedInUserId,resume_data_id:o(e.currentTarget).data("resume-data-id"),user_value:o(e.target).val()}),u.save();var a=o(e.target).parents("span.stat-val-outer").find(".stats-val-h");a.html(o(e.target).val()),o.when(u.request).done(function(){a.html(u.get("payload").user_value!=""?u.get("payload").user_value:"--"),o(e.target).addClass("hide-force"),a.removeClass("hide-force")})}},initialize:function(e){this.template=r,this.recordId=e.recordId},calculate:function(){if(this.unit_type=="time")var e="00:"+this.user_value+":00";else var e=this.user_value;return e},bindToolTips:function(){var e=this;o.each(this.$el.find("img"),function(){var e=o(this);e.qtip2({position:{my:"bottom center",at:"top center"},style:{classes:"header-dropdown"}})})},render:function(){var e={},t=this;e=this.model.toJSON(),e.view=this,console.log("Fitness Data getting passed to template",e);var n=a.to_html(this.template,e);return this.$el.html(n),routing.loggedInUserId==this.recordId&&(this.$el.find(".stats-val-h").click(function(e){t.showInput(e)}),this.$el.find(".stats-input-h").blur(function(e){t.hideInput(e)})),this.bindToolTips(),this}}),s}),define("user/views/fitnessbasic-list",["facade","views","utils","user/views/fitnessbasic-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"fitnessbasic-list",name:"Fitness Basic List",tagName:"ul",_tagName:"li",_className:"fitnessbasic",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("FitnessBasicListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("text!media/templates/video-item.html",[],function(){return'<input type="hidden" class="id" value="{{id}}"/>\r\n{{#payload}}    \r\n    <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n<div class="row-fluid" style="display:none;">\r\n    <div class="span6">\r\n        <img src="{{base_url}}{{video_thumb}}" alt="{{video_title}}"/>\r\n    </div>\r\n    <div class="span6">\r\n        {{video_title}}<br/>\r\n        Teams: \r\n        {{#teams}}\r\n            {{.}}&nbsp;\r\n        {{/teams}}\r\n        <br/>\r\n        Games: \r\n        {{#games}}\r\n            {{.}}&nbsp; \r\n        {{/games}}\r\n        <br/>\r\n        Posted by {{user_name}}, {{post_date}}<br/>\r\n        {{num_votes}} Votes, {{num_views}} Views, {{num_comments}} Comments<br/>\r\n        <p>{{video_desc}}</p>\r\n        {{#tags_count}}\r\n            {{tags_count}} Tagged<br/>\r\n            {{#tags}}\r\n                <img src="{{base_url}}{{.}}"/>\r\n            {{/tags}}\r\n        {{/tags_count}}\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-item",["vendor","views","utils","text!media/templates/video-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"video",events:{click:"changeVideo"},initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeVideo:function(){Channel("changevideo"+this.model.collection.id).publish(this.model)}}),i}),define("text!media/templates/video-player.html",[],function(){return'\r\n{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{video_src}}" alt="{{video_title}}"/></div>\r\n    <h3>{{video_title}}</h3>\r\n    {{#games}} \r\n        {{team1_name}} vs {{team2_name}}\r\n    {{/games}}    \r\n    Votes: {{num_votes}}, Views: {{num_views}}, Comments: {{num_comments}}<br/>\r\n    <br>\r\n\r\n		{{#video_type}}\r\n				{{video_type_name}}\r\n				{{meta_details.url}}\r\n				<br>\r\n		{{/video_type}}\r\n    <div class="social-links">\r\n    {{#social_links}}\r\n        <a class="{{class}}" href="{{link}}" title="{{title}}">{{title}}</a>\r\n    {{/social_links}}\r\n    </div>\r\n{{/payload}}\r\n\r\n'}),define("media/views/video-player",["require","text!media/templates/video-player.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"video-player",template:t,setOptions:function(e){if(!this.model)throw new Error("VideoPlayerView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-video.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Video Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addvideo" value="Add Video"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-video",["require","text!media/templates/add-video.html","facade","views","media/models/video"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/video"),o=i.BaseView,u=r._;return n=o.extend({tagName:"li",template:t,events:{"click #addvideo":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddVideoView expected options.collection.");this.model||(this.model=new s({id:this.collection.id}),this.model.fetch())},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){alert("AddVideoView"),e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.video_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("media/views/video-list",["facade","views","utils","media/views/video-item","media/views/video-player","media/views/add-video"],function(e,t,n,r,i,s){var o,u,a=e.$,f=e._,l=n.lib.Channel,c=t.CollectionView,h=t.SectionView;return u=c.extend(h.prototype),o=u.extend({__super__:c.prototype,id:"video-list",name:"Video List",tagName:"ul",_tagName:"li",_className:"video",_view:r,initialize:function(e){c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("VideoListView expected options.collection.");f.bindAll(this),this.addSubscribers(),this.setupPlayerView(),this.setupAddView()},childViews:{},setupAddView:function(){function r(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addvideo:fetch").subscribe(r)},setupPlayerView:function(){function r(e){t.model=e,t.render()}if(this.collection.size()==0)return;var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.player=t,this.callbacks.add(function(){n(),t.render(),e.$el.prepend(t.el)}),l("changevideo"+this.collection.id).subscribe(r)}}),o}),define("profile/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/addvideo/"+this.id+"/"+this.sport_id:"/api/user/addvideo?team_id="+this.id+"&sport_id="+this.sport_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gameaddvideo:fetch").publish(e)}}),r}),define("profile/views/add-video",["require","profile/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("ProfileAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id}))}}),r}),define("profile/views/video-list",["facade","utils","media/views/video-list","profile/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gameaddvideo:fetch").subscribe(i)}}),i}),define("text!media/templates/image-board.html",[],function(){return'<!--{{#payload}}\r\n    <div class="textcenter"><img src="{{base_url}}{{image_path}}" alt="{{image_title}}"/></div>\r\n    {{#image_title}}<h3>{{image_title}}</h3>{{/image_title}}\r\n    {{#num_votes}}Votes: {{num_votes}} <br/>{{/num_votes}}\r\n{{/payload}}-->'}),define("media/views/image-board",["require","text!media/templates/image-board.html","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.BaseView,o=r._;return n=s.extend({tagName:"li",className:"image-board",template:t,setOptions:function(e){if(!this.model)throw new Error("ImageBoardView expected options.model.")},render:function(){s.prototype.render.call(this)}}),n}),define("text!media/templates/add-image.html",[],function(){return'\r\n{{#payload}}\r\n<form>\r\n<div class="row-fluid">\r\n    <input type="text" name="title" id="title" placeholder="Image Title"/><br/>\r\n    ...<br/>\r\n    <input type="button" id="addimage" value="Add Image"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("media/views/add-image",["require","text!media/templates/add-image.html","facade","views","media/models/image"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("media/models/image"),o=i.BaseView;return n=o.extend({tagName:"li",template:t,events:{"click #addimage":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");!this.model},render:function(){o.prototype.render.call(this),this.input=this.$("#title")},submitHandler:function(e){e.preventDefault(),this.createOnEnter(e)},createOnEnter:function(e){var t=this.input.val();if(t!=""){var n=this.model.get("payload");n.image_title=this.input.val(),this.model.save();var r=this.model.clone();r.id=Math.ceil(Math.random()*1e5),this.collection.push(r),this.input.val("")}}}),n}),define("text!media/templates/image-list.html",[],function(){return'<ul class="image-list">\r\n</ul>\r\n<!--{{#target}}\r\n<div class="image-drop-area-outer">\r\n	<div class="image-drop-area" id="image-place-holder">\r\n		<div class="drop-text">DROP PHOTOS HERE</div>\r\n		<div>OR CLICK TO UPLOAD</div>\r\n		\r\n	</div>\r\n</div>\r\n{{/target}}-->\r\n<div class="clear">\r\n<a href="javascript: void(0);" title="see more" class="common-btn mobile-link common-default-comment-dark-grey see-more-h">SHOW MORE</a>	\r\n\r\n\r\n<a href="javascript: void(0);" title="see more" class="desktop-link see-more-h">SHOW MORE</a>	\r\n	\r\n	\r\n	</div>\r\n'}),define("media/views/image-list",["facade","views","utils","media/views/image-item","media/views/image-board","media/views/add-image","text!media/templates/image-list.html","votes/models/follow","common/views/add-description"],function(e,t,n,r,i,s,o){var u,a,f=e.$,l=e._,c=require("vendor"),h=require("votes/models/follow"),p=n.lib.Channel,d=require("common/views/add-description"),v=t.CollectionView,m=t.SectionView,g=c.Mustache;return a=v.extend(m.prototype),u=a.extend({__super__:v.prototype,template:o,_tagName:"li",_className:"image",page:0,page_limit:7,currentSection:"media",listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore","click .open-photo-player-h":"initPhotoPlayer","dragover #image-place-holder":"drag","drop #image-place-holder":"drop","click .add-to-fans-h":"follow"},renderTemplate:function(){console.log("rendering template",this.collection.toJSON());var e=g.to_html(this.template,{target:this.target_id});return this.$el.html(e),this},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},follow:function(e){e.preventDefault(),e.stopPropagation();if(!this.checkForUser()){routing.trigger("showSignup");return}var t=this,n=new h;n.subject_id=this.data.payload.id,n.entity_id=this.data.payload.enttypes_id,console.log(n),n.save(),f.when(n.request).done(function(){typeof n.get("payload").follower=="object"&&typeof n.get("payload").subject=="object"&&n.get("payload").id>0?(t.controllerObject.reloadFans(),f(e.currentTarget).parents("li").addClass("hide")):console.log("FAIL")})},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault();var n=e.originalEvent.dataTransfer.files;this.files_drag=e.originalEvent.dataTransfer.files;var r=[],i=[],s=0;for(var o=0,u;u=n[o];o++){if(!u.type.match("image.*"))continue;var a=new FileReader;a.onload=function(e){return function(r){var o="preview_"+s;s++,i.push({preview_id:o,drag_info:t.files_drag,width:"150",height:"150",filesrc:r.target.result,title:escape(e.name)}),s==n.length&&(data={data:i},t.openImageUploader(data))}}(u),a.readAsDataURL(u)}},openImageUploader:function(e){var t=this.sport_id,n=this.target_url+this.target_id,r={sports_id:t},i=e;routing.trigger("add-image",n,r,i)},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},initialize:function(t){console.log("IMAGE LIST",t);for(var n in t)this[n]=t[n];t.name?this.name=t.name:this.name="image list",this.teamName=t.teamName,this.pageName=t.pageName?t.pageName:"profile",t.collecton&&(this.collection=t.collection),t.dontrenderTemplate||this.renderTemplate();var r=this;if(!this.collection.limit){r.allData=this.collection.toArray();var i=r.allData.length;r.start=0,r.end=r.page_limit,r.page_limit=8}r.seeMore(),v.prototype.initialize.call(this,t);if(!this.collection)throw new Error("ImageListView expected options.collection.");var i=r.collection.toJSON().length;(!i||i<r.collection.limit)&&r.$el.find(".see-more-h").hide();if(!i&&l.isUndefined(this.hideAddView)){var s=e.Backbone.Model.extend({});new d({page:this.currentSection,target:this.$el,model:new s,teamName:this.teamName,name:"view - "+Math.random(),extra_id:this.extra_id||""})}l.bindAll(this),this.addSubscribers(),this.setupBoardView(),this.hideAddView||this.setupAddView(),r.media_id&&setTimeout(function(){routing.trigger("photo-player-init",undefined,r.collection,r.user_id,!0,r.pageName,r.target_id,r.media_id)},500)},initPhotoPlayer:function(e){console.log(e);var t=this,n=t.collection.limit,r=f(e.target).parents("ul.image-list").find("li.image").index(f(e.target).parents("li"));console.log(r),console.log(f(e.target).parents("li").index()),r<0&&(r=0),routing.trigger("photo-player-init",r,t.collection,t.user_id,!0,t.pageName,t.target_id)},seeMore:function(e){console.log(e,this.collection.limit);var t=this;if(e&&this.collection.limit)this.collection.offset+=this.collection.limit,this.collection.fetch({remove:!1}),f.when(t.collection.request).done(function(){console.log(t.collection.toJSON());var e=t.collection.toJSON().length;e<t.collection.limit&&t.$el.find(".see-more-h").hide()});else if(!this.collection.limit){var n=this.allData.length;e&&(this.start=this.end,this.end=this.end+this.page_limit),n<=this.end&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(this.start,this.end)):this.collection.reset(this.allData.slice(this.start,this.end)),this.page++,e&&(this.addSubscribers&&this.addSubscribers(),this.setupAddView&&this.setupAddView())}},childViews:{},setupAddView:function(){function r(e){t.model=e,t.render(),f(this.listView).append(t.el)}var e,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),p("addimage:fetch").subscribe(r)},filterWithImageType:function(e){var t=this.collection;return f.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t},addButtons:function(){},setupBoardView:function(){}}),u}),define("profile/views/image-video-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",name:"Image List",setupAddView:function(){}}),r}),define("text!site/templates/comment-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid" data-id="bbbbbbbb">\r\n	<div class="user-photo">\r\n		<a href="#profile/{{user.id}}" title="{{user.name}}">\r\n			<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n		</a>\r\n	</div>\r\n\r\n	<div>\r\n		<div class="bubble">\r\n			<div class="pointer"></div>\r\n			<div class="content">\r\n\r\n				<span class="comment-date"><a href="#profile/{{user.id}}" title="{{user.name}}">{{user.name}}</a>  \r\n					<span class="poster-info">{{poster}} {{comment_date}}</span></span>\r\n				\r\n				<p class="comment-text">{{{comment}}}</p>\r\n\r\n				{{#is_owner}}<a href="javascript: void(0);" title="delete" class="delete-comment-h comment-delete">Delete</a>{{/is_owner}}\r\n\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("vendor/plugins/dateformat",[],function(){var e=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,i=function(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e};return function(s,o,u){var a=e;arguments.length==1&&Object.prototype.toString.call(s)=="[object String]"&&!/\d/.test(s)&&(o=s,s=undefined),s=s?new Date(s):new Date,isNaN(s)&&console.error(this),o=String(a.masks[o]||o||a.masks["default"]),o.slice(0,4)=="UTC:"&&(o=o.slice(4),u=!0);var f=u?"getUTC":"get",l=s[f+"Date"](),c=s[f+"Day"](),h=s[f+"Month"](),p=s[f+"FullYear"](),d=s[f+"Hours"](),v=s[f+"Minutes"](),m=s[f+"Seconds"](),g=s[f+"Milliseconds"](),y=u?0:s.getTimezoneOffset(),b={d:l,dd:i(l),ddd:a.i18n.dayNames[c],dddd:a.i18n.dayNames[c+7],m:h+1,mm:i(h+1),mmm:a.i18n.monthNames[h],mmmm:a.i18n.monthNames[h+12],yy:String(p).slice(2),yyyy:p,h:d%12||12,hh:i(d%12||12),H:d,HH:i(d),M:v,MM:i(v),s:m,ss:i(m),l:i(g,3),L:i(g>99?Math.round(g/10):g),t:d<12?"a":"p",tt:d<12?"am":"pm",T:d<12?"A":"P",TT:d<12?"AM":"PM",Z:u?"UTC":(String(s).match(n)||[""]).pop().replace(r,""),o:(y>0?"-":"+")+i(Math.floor(Math.abs(y)/60)*100+Math.abs(y)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return o.replace(t,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}();return e.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},e}),define("site/views/comment-item",["vendor","views","utils","text!site/templates/comment-item.html","common/models/delete","vendor/plugins/dateformat"],function(e,t,n,r){var i,s=t.BaseView,o=require("common/models/delete"),u=require("vendor/plugins/dateformat"),a=e.Mustache;return i=s.extend({tagName:"li",className:"comment",events:{"click .delete-comment-h":"deleteComments"},initialize:function(e){e.template?this.template=e.template:this.template=r},dateFormat:function(e){return e=new Date(e),u(e,"mmm d, h:MM TT")},render:function(){var e=this.model.get("payload");e.comment=e.comment.replace(/\n/g,"<br />"),e.comment_date=this.dateFormat(e.timePosted),this.model.set("payload",e);var t=a.to_html(this.template,this.model.toJSON());this.$el.html(t);var n=this;if(e)try{var r=e.user.user_picture_obj.types.small_thumb.url;n.$(".user-photo img").attr("src",r)}catch(i){console.log(i)}return this},deleteComments:function(e){e.stopPropagation(),e.preventDefault();var t=this,n=new o;console.log("payload",this.model.get("payload")),n.subject_id=this.model.get("payload").id,n.enttypes_id=this.model.get("payload").enttypes_id,n.removeNode=$(e.currentTarget).parents("li.comment"),n.destroyAndRemove()}}),i}),define("text!site/templates/comment-form.html",[],function(){return'\r\n<a href="javascript: void(0);" title="add comment" class="common-btn mobile-link common-default-comment-red add-comment-h">Add Comment</a>\r\n\r\n\r\n<a href="javascript: void(0);" title="add comment" class="desktop-link add-comment-h">Add Comment</a>\r\n\r\n{{#payload}}\r\n\r\n<form class="add-comment-form-h hide" method="post" action="#">\r\n<div class="row-fluid">\r\n    <div class="field-message submit-result"></div>\r\n    <textarea id="new-comment" placeholder="Leave a comment" ></textarea>\r\n    <br/><input type="button" id="comment-submit" value="Submit"/>\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("site/views/comment-form",["require","text!site/templates/comment-form.html","facade","views","site/models/comment"],function(e){var t,n=e("text!site/templates/comment-form.html"),r=e("facade"),i=e("views"),s=e("site/models/comment"),o=i.BaseView;return t=o.extend({tagName:"li",template:n,events:{"click #comment-submit":"submitHandler"},setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");!this.model},render:function(){console.log("RENDER CALLED!!!!"),o.prototype.render.call(this),this.input=this.$("#new-comment");var e=this.model.get("payload");console.log("return payloady",e);var t=this;if(e)var n=e.user_picture,r=e.email;return this},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},submitHandler:function(e){e.preventDefault();var t=this,n=function(n){t.createOnEnter(e)};t.checkForUser()?n():routing.trigger("showSignup",function(e){n(function(){})})},createOnEnter:function(e){var t=this.input.val();t!=""&&this.input.val("")}}),t}),define("text!site/templates/comment-list.html",[],function(){return'<div class="comment-outer-h">\r\n<ul id="comment-list"></ul>\r\n</div>\r\n<div class="clear">\r\n			<a href="javascript: void(0);" title="show older" class="common-btn common-default-comment-dark-grey mobile-link see-more-h">SHOW OLDER</a>\r\n</div>'}),define("site/views/comment-list",["facade","views","utils","site/views/comment-item","site/views/comment-form","text!site/templates/comment-list.html"],function(e,t,n,r,i,s){var o,u,a=n.lib.Channel,f=require("vendor"),l=t.CollectionView,c=t.SectionView,h=f.Mustache;return u=l.extend(c.prototype),o=u.extend({__super__:l.prototype,listView:"#comment-list",_tagName:"li",_className:"comment",page:1,page_limit:5,prepend:!1,_view:r,template:s,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=h.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate();var t=this;this.collection=e.collection,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.seeMore(),l.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");_.bindAll(this),this.addSubscribers(),this.setupFormView(),console.log(this.collection.toJSON())},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},childViews:{},setupFormView:function(){function r(n){t.model=n,t.render(),$(e.listView).prepend(t.el)}var e=this,t=new i({collection:this.collection}),n=this.addChildView(t);console.log("Form:",t),this.childViews.form=t,this.callbacks.add(function(){n()}),a("commentform:fetch").subscribe(r)}}),o}),define("profile/views/commentof-list",["facade","utils","site/views/comment-list"],function(e,t,n){var r;return r=n.extend({setupFormView:function(){}}),r}),define("profile/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){i.bindAll(this),t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("profile/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views","vendor/plugins/dateformat"],function(e,t,n,r,i){var s,o=e("views"),u=e("vendor/plugins/dateformat"),a=o.BaseView;return s=a.extend({initialize:function(e){console.error(e),_.bindAll(this),this.setOptions(),a.prototype.initialize.call(this,e)},el:"#comment_div",template:t,events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},submitHandler:function(e){e.preventDefault();if(!this.checkForUser()){routing.trigger("showSignup");return}this.createOnEnter(e)},showCommentBox:function(e){var t=this.$el.find(".add-comment-form-h");t.hasClass("hide")?($(e.target).html("Hide"),t.removeClass("hide")):($(e.target).html("Comment"),t.addClass("hide"))},refreshComments:function(e){this.$("#new-comment").val("")},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},dateFormat:function(e){return e=new Date(e),u(e,"mmm d, h:MM TT")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return _.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),console.error(s),s.poster=s.name,s.poster_picture=s.user_picture;var u=n.dateFormat(date);s.comment_date=u,s.timePosted=u,s.poster_email=s.email,console.error(e),n.collection.push(e),n.refreshComments(),routing.on("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return a.prototype.render.call(this),this.input=this.$("#new-comment"),this.collection.length||(routing.mobile?$(".mobile-link.add-comment-h").trigger("click"):$(".desktop-link.add-comment-h").trigger("click")),console.log("run here now",this.el),this}}),s}),define("profile/views/commenton-list",["facade","utils","site/views/comment-list","profile/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}console.log("called");var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){s(e)})}}),s}),define("component/fb",["require","facade","views","utils","vendor","facebook"],function(e){return function(e){var t=window.cordova&&window.facebookConnectPlugin?window.facebookConnectPlugin:FB;console.log(t);var n=this,r="facebook-jssdk-api",i=function(){if(e)for(var t in e)this.currentTarget=e[t]}(),s=function(){t.init({appId:App.Settings.appId,status:!0,cookie:!0,xfbml:!0,oauth:!0})},o=function(e,t){setTimeout(function(){n[e](t)},2e3)};checkIfScriptExists=function(){var e=document.getElementById(r)?!0:!1;return manageLoader(e),e},manageLoader=function(e){this.currentTarget&&(e?$(this.currentTarget).removeClass("blue-loading"):$(this.currentTarget).addClass("blue-loading"))},this.shareOnFacebook=function(e){if(FB&&typeof FB!="undefined"){if(e.link)var n=window.location.protocol+"//"+window.location.host+"/"+e.link+"/";else var n=undefined;t.ui({method:e.method||"",name:e.name||"Facebook Dialogs",link:n||"http://localhost/",picture:e.picture||"",caption:e.caption||"",description:e.description||""},function(t){t&&t.post_id?e.success&&_.isFunction(e.success)&&e.success():e.error&&_.isFunction(e.error)&&e.error()})}else new o("shareOnFacebook",e)},this.sendInvite=function(e){if(FB&&typeof FB!="undefined"){if(e.link)var n=window.location.protocol+"//athletez.com/"+e.link+"/";else var n=undefined;t.ui({method:e.method||"send",to:e.to||"",name:e.name||"Come join Me on Atheletez",link:n||"http://localhost/",picture:e.picture||"",description:e.description||""},function(t){t&&t.success?e.success&&_.isFunction(e.success)&&e.success():e.error&&_.isFunction(e.error)&&e.error()})}else s(),new o("sendInvite",e)},this.getFriends=function(){FB&&typeof FB!="undefined"?t.api("/me/friends?fields=id,first_name",function(e){}):new o("getFriends",{})},s()}}),define("profile/views/fans-image-list",["facade","utils","media/views/image-list","component/fb","votes/models/follow"],function(e,t,n){var r,i=require("component/fb"),s=require("votes/models/follow");return r=n.extend({imagetype:"large_thumb",currentSection:"fans",setupAddView:function(){},events:{"click .invite-to-fb-h":"inviteFBFriend","mouseover a.tiles":"showText","mouseout a.tiles":"showicon","click .add-to-fans-h":"addToFanList"},showText:function(e){$(e.target).parent().find("span").removeClass("hide")},showicon:function(e){$(e.target).parent().find("span").addClass("hide")},inviteFBFriend:function(e){var t=this,n={},r=function(){n.invite_type="follow",n.subject_id=t.target_id,n.enttype_id=t.controllerObject.basics.get("payload").enttypes_id,routing.trigger("fbInvite",undefined,n)};t.checkForUser()?r():routing.trigger("showSignup",function(e){r(function(){e&&e()})})},addToFanList:function(e){e.preventDefault();var t=this,n=function(n){var r=new s;r.subject_id=t.collection.id,r.entity_id=t.controllerObject.basics.get("payload").enttypes_id,r.save(),$.when(r.request).done(function(){typeof r.get("payload").follower=="object"&&typeof r.get("payload").subject=="object"&&r.get("payload").id>0&&($(e.target).addClass("link-disabled"),t.controllerObject&&t.controllerObject.reloadFans&&t.controllerObject.reloadFans()),n&&n()})};t.checkForUser()?n():routing.trigger("showSignup",function(e){n(function(){e&&e()})})},afterRender:function(){var e=this,t=setInterval(function(){$ele=e.$el.find(".character-limit-h"),$ele.length&&(clearInterval(t),$ele.each(function(){e.adJustFontDynamically($(this))}))},100)},addButtons:function(){}}),r}),define("text!common/templates/heading.html",[],function(){return'<div class="green-left-heading"><span>{{heading}}</span></div>\r\n<div class="buttons-h pull-left"></div>'}),define("roster/models/roster",["models","facade"],function(e,t){var n,r=e.BaseModel,i=t.$,s=t._;return n=r.extend({}),n}),define("common/views/add-media-buttons",["require","text!common/templates/heading.html","facade","views","votes/models/follow","roster/models/roster","vendor","vendor/plugins/qtip/qtip-wrapper","text!vendor/plugins/qtip/qtip.css"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("votes/models/follow"),o=e("roster/models/roster"),u=i.BaseView,a=e("vendor"),f=a.Mustache;return n=u.extend({events:{"click .add-image-h":"addImage","click .add-video-h":"addVideo","click .question":"addQuestion","click .add-to-list-h":"addToList","click .invite-fans-from-fb-h":"InviteFromFB","click .invite-participant-from-fb-h":"InviteFromFB","click .add-to-roster-list-h":"addToRoster","click .add-to-participants-list-h":"addParticipant","click .invite-roster-from-fb-h":"InviteFromFB"},addImage:function(e){console.log(this);var t=$(e.currentTarget).data("page-base")||"user",n=$(e.currentTarget).data("ent-id"),r=$(e.currentTarget).data("sports-id");ga("send","event","Open-Add-Popup","Image","User opened "+t+" image uploader",n);var i=$(".selected-sport-h").data("id")||$(".sports-h").val()||$(".sports-h").attr("data-id"),s="/api/"+t+"/addimage/"+n,o={sports_id:r};routing.trigger("add-image",s,o)},addVideo:function(e){ga("send","event","Open-Add-Popup","Video","User opened video uploader",this.model.userid);var t="/api/user/addvideo/"+this.model.userid;Channel("add-video").publish(t)},addQuestion:function(e){},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},addParticipant:function(e){routing.trigger("add-to-event")},addToList:function(e){e.preventDefault();var t=routing.showSpinner(e.currentTarget),n=this,r=function(r){var i=new s;i.subject_id=n.collection.id,i.entity_id=n.controllerObject.basics.get("payload").enttypes_id,i.save(),$.when(i.request).done(function(){routing.hideSpinner(t,e.currentTarget),typeof i.get("payload").follower=="object"&&typeof i.get("payload").subject=="object"&&i.get("payload").id>0&&($(e.target).addClass("link-disabled"),n.controllerObject&&n.controllerObject.reloadFans&&n.controllerObject.reloadFans()),r&&r()})};n.checkForUser()?r():routing.trigger("showSignup",function(e){r(function(){e&&e()})})},InviteFromFB:function(e){var t=this,n={};console.log(t.controllerObject),t.data.inviteData==undefined||!typeof t.data.inviteData==="object"?(n.invite_type="follow",n.subject_id=t.target_id?t.target_id:t.controllerObject.basics.get("payload").id,n.enttype_id=t.controllerObject.basics.get("payload").enttypes_id):n=t.data.inviteData,console.log(n);var r=function(){routing.trigger("fbInvite",undefined,n)};t.checkForUser()?r():routing.trigger("showSignup",function(e){r(function(){e&&e()})})},addToRoster:function(e){this.addToRoster&&this.addToRoster()},className:"pull-left",initialize:function(e){console.error(e);for(var t in e)this[t]=e[t];this.data=e,this.render()},render:function(){var e=this,n=f.to_html(t,{heading:this.heading});this.$el.html(n),$(this.target).html(this.$el);var r=f.to_html(this.template,{data:this.data});this.$el.find(".buttons-h").html(r),this.$el.find("a").each(function(){$(this).qtip2({content:$(this).data("content"),position:{my:"bottom center",at:"top center"},style:{classes:$(this).data("tip-style")}})})}}),n}),define("text!common/templates/add-media-buttons.html",[],function(){return'\r\n<a href="javascript: void(0);" data-page-base="{{data.page_base}}" data-ent-id="{{data.ent_id}}" data-sports-id="{{data.sports_id}}" data-tip-style="qtip-athletez qtip-yellow-c" class="add-image add-icon desktop-link add-image-h" data-content="{{#data.teamName}}Upload images of {{data.teamName}}{{/data.teamName}}{{#data.message}} {{data.message.photo}} {{/data.message}}"></a>\r\n<a href="javascript: void(0);" data-page-base="{{data.page_base}}" data-ent-id="{{data.ent_id}}" data-sports-id="{{data.sports_id}}" class="add-video add-icon desktop-link add-video-h" data-tip-style="qtip-athletez qtip-red-c" data-content="{{#data.teamName}}Upload images of {{data.teamName}}{{/data.teamName}}{{#data.message.video}} {{data.message.video}} {{/data.message.video}}"></a>\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-page-base="{{data.page_base}}" data-ent-id="{{data.ent_id}}" data-sports-id="{{data.sports_id}}" data-tip-style="qtip-athletez qtip-yellow-c" class="add-image common-btn common-default-comment-yellow mobile-link add-image-h" data-content="{{#data.teamName}}Upload images of {{data.teamName}}{{/data.teamName}}{{#data.message}} {{data.message.photo}} {{/data.message}}">ADD PHOTO</a>\r\n<a href="javascript: void(0);" data-page-base="{{data.page_base}}" data-ent-id="{{data.ent_id}}" data-sports-id="{{data.sports_id}}" class="add-video common-btn mobile-link common-default-comment-red add-video-h" data-tip-style="qtip-athletez qtip-red-c" data-content="{{#data.teamName}}Upload images of {{data.teamName}}{{/data.teamName}}{{#data.message.video}} {{data.message.video}} {{/data.message.video}}">ADD VIDEO</a>\r\n\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-question" data-content="The media section has a list of all images or videos.  Click on a tile to open it in the photo / video player" data-page="media" class="question question-h add-icon"></a>'}),define("text!common/templates/add-fans-buttons.html",[],function(){return'<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-green-c" data-content="{{#data.teamName}}Follow {{data.teamName}} and stay notified of any updates{{/data.teamName}}{{#data.message.addMe}} {{data.message.addMe}} {{/data.message.addMe}}" class="add-to-list desktop-link add-icon add-to-list-h"></a>\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-fb-c" data-content="{{#data.teamName}}Invite friends from facebook to get notified of any updates to {{data.teamName}}{{/data.teamName}}{{#data.message.fb}} {{data.message.fb}} {{/data.message.fb}}" class="invite-from-fb desktop-link add-icon invite-fans-from-fb-h"></a>\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-green-c" data-content="{{#data.teamName}}Follow {{data.teamName}} and stay notified of any updates{{/data.teamName}}{{#data.message.addMe}} {{data.message.addMe}} {{/data.message.addMe}}" class="add-to-list common-btn common-default-comment-dark-grey mobile-link add-icon add-to-list-h">FOLLOW</a>\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-fb-c" data-content="{{#data.teamName}}Invite friends from facebook to get notified of any updates to {{data.teamName}}{{/data.teamName}}{{#data.message.fb}} {{data.message.fb}} {{/data.message.fb}}" class="invite-from-fb common-btn common-default-comment-blue mobile-link add-icon invite-fans-from-fb-h">INVITE</a>\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-question" data-content="The fans section shows a list of all people who receive notifications when there is any action on this page." data-page="fans" class="question question-h add-icon"></a>'}),define("text!common/templates/add-games-buttons.html",[],function(){return'<!--<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-game" data-content="{{#data.teamName}}Add a new game to the schedule for {{data.teamName}}{{/data.teamName}}" class="game-adder add-icon game-adder-h"></a>\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-question" data-content="this is for test" data-page="fans" class="question question-h add-icon"></a>-->'}),define("profile",["require","text!profile/templates/layout.html","application","votes/views/vote-section","facade","controller","models","views","utils","profile/models/basics","profile/models/addmedia","profile/collections/orgs","profile/collections/relateds","profile/collections/fitnessbasics","profile/collections/videos","profile/collections/image-videos","profile/collections/commentsof","profile/collections/commentson","schedules/collections/user-games","profile/collections/fans","profile/views/header","profile/views/add-media","schedules/views/schedule-list","user/views/related-list","user/views/fitnessbasic-list","profile/views/video-list","profile/views/image-video-list","profile/views/commentof-list","profile/views/commenton-list","profile/views/fans-image-list","common/views/add-media-buttons","text!common/templates/add-media-buttons.html","text!common/templates/add-fans-buttons.html","text!common/templates/add-games-buttons.html","application"],function(e,t,n,r){var i,s=e("facade"),o=e("controller"),u=e("models"),a=e("views"),f=e("utils"),l=e("profile/models/basics"),c=e("profile/models/addmedia"),h=e("profile/collections/orgs"),p=e("profile/collections/relateds"),d=e("profile/collections/fitnessbasics"),v=e("profile/collections/image-videos"),m=e("profile/collections/commentsof"),g=e("profile/collections/commentson"),y=e("schedules/collections/user-games"),b=e("profile/collections/fans"),w=e("profile/views/header"),E=e("profile/views/add-media"),S=e("schedules/views/schedule-list"),x=e("user/views/related-list"),T=e("user/views/fitnessbasic-list"),N=e("profile/views/image-video-list"),C=e("profile/views/commentof-list"),k=e("profile/views/commenton-list"),L=e("profile/views/fans-image-list"),A=e("common/views/add-media-buttons"),O=e("text!common/templates/add-media-buttons.html"),M=e("text!common/templates/add-fans-buttons.html"),_=e("text!common/templates/add-games-buttons.html"),D=e("media/models/image"),P=a.LayoutView,H=s.$,B=s._,j=f.debug,F=f.lib.Channel,I=[base_url+"pages/profile/profile.css"];return i=o.extend({initialize:function(e){this.callbackcount=1;var t=this;return F("load:css").publish(I),B.bindAll(t),t.handleOptions(e),t.scheme=[],e.params&&this.setParamsArray(e.params),e.userId?(t.id=e.userId,t.init()):t.init(),t},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds(),this.handleClickEvents()},handleClickEvents:function(){H(document).off("click",".green-left-heading"),H(document).on("click",".green-left-heading",function(){H(this).hasClass("down-arrow-heading")?(H(this).removeClass("down-arrow-heading"),H(this).next().slideUp(),H(this).next().attr("id")=="commenton-wrap"&&H(this).next().next().slideUp(),H(this).parent().parent().next().slideUp()):(H(this).addClass("down-arrow-heading"),H(this).next().slideDown(),H(this).next().attr("id")=="commenton-wrap"&&H(this).next().next().slideDown(),H(this).parent().parent().next().slideDown())})},createData:function(){function t(t){if(e.ajaxCalls&&e.ajaxCalls.length){for(var r in e.ajaxCalls)e.ajaxCalls[r].abort();e.ajaxCalls=[]}delete e.orgViewname,e.refreshPage(),e.sports_id=t,e.orgs=new h,e.orgs.id=e.id,e.orgs.sport_id=t,e.orgs.targetElement="#games_div",e.ajaxCalls.push(e.orgs.fetch()),e.fitnessbasics=new d,e.fitnessbasics.id=e.id,e.fitnessbasics.sport_id=t,e.ajaxCalls.push(e.fitnessbasics.fetch()),e.images=new v,e.images.id=e.id,e.images.sport_id=t,e.images.targetElement="#image-wrap",e.ajaxCalls.push(e.images.fetch()),e.handleDeferredsDynamic(),n(t)}function n(t){e.fans=new b,e.fans.id=e.id,e.fans.sport_id=t,e.fans.targetElement="#fans-div",e.fans.fetch(),H.when(e.fans.request).done(function(t){if(e.fansListView){var n;H(e.fansListView.destination).html(""),n=H.inArray(e.fansListView,e.scheme),~n&&e.scheme.splice(n,1)}e.setupFansListView()})}this.basics=new l({id:this.id}),this.basics.id=this.id,this.basics.targetElement="#main",this.basics.fetch(),this.addmedia=new c,this.addmedia.id=this.id,this.fans=new b,this.fans.id=this.id,this.fans.targetElement="#fans-div",this.fans.fetch();var e=this;e.ajaxCalls=[],F("new-fan","nomemory unique").subscribe(n),F("refresh-profilepage","unique").subscribe(t)},setupOGTags:function(){},handleDeferreds:function(){var e=this;H.when(this.basics.request).done(function(){e.setupHeaderView(),e.setupOGTags(),e.initVoteView();var t=e.basics.get("payload").enttypes_id;e.commentson=new g,e.commentson.subject_entity_type=t,e.commentson.id=e.id,e.commentson.targetElement="#commenton-wrap",e.commentson.fetch(),H.when(e.commentson.request).done(function(){e.setupCommentOnListView()})})},initVoteView:function(){var e=new r({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},handleDeferredsDynamic:function(){var e=this;H.when(this.orgs.request).done(function(){e.setupOrgListView()}),H.when(this.fitnessbasics.request).done(function(){e.setupFitnessBasicListView()}),H.when(this.fans.request).done(function(t){e.setupFansListView()}),H.when(this.images.request).done(function(t){e.setupImageListView()})},refreshPage:function(){var e;this.orgListView&&(H(this.orgListView.destination).html(""),e=H.inArray(this.orgListView,this.scheme),~e&&this.scheme.splice(e,1)),this.relatedListView&&(H(this.relatedListView.destination).html(""),e=H.inArray(this.relatedListView,this.scheme),~e&&this.scheme.splice(e,1)),this.fitnessBasicListView&&(H(this.fitnessBasicListView.destination).html(""),e=H.inArray(this.fitnessBasicListView,this.scheme),~e&&this.scheme.splice(e,1)),this.imageListView&&(H(this.imageListView.destination).html(""),e=H.inArray(this.imageListView,this.scheme),~e&&this.scheme.splice(e,1)),this.fansListView&&(H(this.fansListView.destination).html(""),e=H.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1))},setupHeaderView:function(){var e;e=new w({model:this.basics,sports_id:this.sports_id>0?this.sports_id:null,name:"Header",sports_id:this.sport_id,destination:"#main-header"}),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(e){},getOrgData:function(){var e;this.orgListView&&(H(this.orgListView.destination).html(""),e=H.inArray(this.orgListView,this.scheme),~e&&this.scheme.splice(e,1));var t=this;t.orgs.fetch(),H.when(t.orgs.request).done(function(){t.setupOrgListView()})},setupOrgListView:function(){var e;H(".selected-sport-h").data("sporttype")==1?this.setUpOrgView():this.setUpUserSportView()},setUpUserSportView:function(){var e=this;this.orgViewname="sport",this.orgs=new y,this.orgs.userId=e.id,this.orgs.sports_id=H(".selected-sport-h").data("id"),this.orgs.fetch(),H.when(this.orgs.request).done(function(){e.orgListView&&(H(e.orgListView.destination).html(""),position=H.inArray(e.orgListView,e.scheme),~position&&e.scheme.splice(position,1)),e.orgListView=new S({collection:e.orgs,controller:e,destination:"#games_div",eventPage:H(".selected-sport-h").data("name"),teamName:e.basics.get("payload").first_name}),e.scheme.push(e.orgListView),e.layout.render()}),H.when(this.orgs.request).fail(function(){e.orgListView&&(H(e.orgListView.destination).html(""),position=H.inArray(e.orgListView,e.scheme),~position&&e.scheme.splice(position,1)),e.orgListView=new S({collection:e.orgs,controller:e,destination:"#games_div",eventPage:H(".selected-sport-h").data("name"),teamName:e.basics.get("payload").first_name}),e.scheme.push(e.orgListView),e.layout.render()})},setUpOrgView:function(){var e;this.orgListView&&(H(this.orgListView.destination).html(""),e=H.inArray(this.orgListView,this.scheme),~e&&this.scheme.splice(e,1)),this.orgViewname="org",this.orgListView=new S({collection:this.orgs,controller:this,destination:"#games_div"}),this.scheme.push(this.orgListView),this.layout.render()},setupRelatedListView:function(){var e;this.relatedListView=new x({collection:this.relateds,destination:"#related-wrap"}),this.scheme.push(this.relatedListView),this.layout.render()},setupFitnessBasicListView:function(){var e;this.fitnessBasicListView=new T({collection:this.fitnessbasics,destination:"#fitnessbasic-wrap"}),this.scheme.push(this.fitnessBasicListView),this.layout.render()},setupVideoListView:function(){var e;this.videoListView=new ProfileVideoListView({collection:this.videos,destination:"#video-wrap"}),this.scheme.push(this.videoListView),this.layout.render()},setupImageListView:function(){var e=this;this.addmedia.sportName=H(".selected-sport-h").data("name"),this.addmedia.firstName=this.basics.get("payload").first_name,this.addmedia.setData();var t=new A({target:".media-add-icons-h",heading:"PHOTO/VIDEO",template:O,controllerObject:e,page_base:"user",ent_id:e.id,sports_id:H(".selected-sport-h").data("id"),model:e.addmedia,message:{photo:"Add "+this.addmedia.sportName+" pics of "+this.addmedia.firstName,video:"Add "+this.addmedia.sportName+" videos of "+this.addmedia.firstName}});routing.off("image-upload-success"),routing.on("image-upload-success",function(t){e.updateImages(t)}),routing.off("setup-add-icons"),routing.on("setup-add-icons",function(t){e.setupAddMediaView(t)}),this.imageListView=new N({collection:this.images,destination:"#image-wrap",target_id:this.id,target_url:"/api/user/addimage/",sport_id:H(".selected-sport-h").data("id"),media_id:this.media_id,user_id:this.id,name:"images View 2",pageName:"profile",triggerItem:"setup-add-icons",teamName:this.basics.get("payload").first_name}),this.scheme.push(this.imageListView),this.layout.render()},reloadFans:function(){var e=this,t;this.fansListView&&(H(this.fansListView.destination).html(""),t=H.inArray(this.fansListView,this.scheme),~t&&this.scheme.splice(t,1)),e.fans.fetch(),H.when(e.fans.request).done(function(){e.setupFansListView()})},setupFansListView:function(){var e=new A({target:".fans-add-icons-h",heading:"FANS",template:M,controllerObject:this,collection:this.fans,inviteData:{invite_type:"follow",subject_id:this.basics.get("payload").id,enttypes_id:this.basics.get("payload").enttypes_id},message:{addMe:"Keep me notified of "+this.basics.get("payload").first_name+"'s activity",fb:"Invite a friend to receive notifications about  "+this.basics.get("payload").first_name+"'s activity"}});this.fansListView&&(H(this.fansListView.destination).html(""),position=H.inArray(this.fansListView,this.scheme),~position&&this.scheme.splice(position,1)),this.fansListView=new L({collection:this.fans,destination:"#fans-div",target_id:this.id,controllerObject:this,pageName:"profile",data:this.basics.toJSON(),name:"fansView",teamName:this.basics.get("payload").first_name}),this.scheme.push(this.fansListView),this.layout.render()},reloadImages:function(){var e=this,t;this.imageListView&&(H(this.imageListView.destination).html(""),t=H.inArray(this.imageListView,this.scheme),~t&&this.scheme.splice(t,1)),e.images.fetch(),H.when(e.images.request).done(function(){e.setupImageListView()})},updateImages:function(e){var t=new D;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t),this.imageListView.allData&&this.imageListView.allData.push(t.toJSON()),console.log(this.imageListView.collection),this.imageListView.collection.length==1&&this.reloadImages()},setupCommentOfListView:function(){var e;e=new C({collection:this.commentsof,destination:"#commentof-wrap"})},setupCommentOnListView:function(){var e;this.commentOnListView=new k({collection:this.commentson,destination:"#commenton-wrap"}),this.scheme.push(this.commentOnListView),this.layout.render()},setupLayout:function(){var e;return e=new P({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),i}),define("text!imageup/templates/basic.html",[],function(){return'<!--<div id="url" class="url">URL\r\n	<select id="url_tag">\r\n		<option value="user">Users</option>\r\n		<option value="game">Games</option>\r\n		<option value="team">Teams</option>\r\n	</select>\r\n	<input type="text" name="id_tag" id="id_tag" placeholder="ID"/>\r\n</div>\r\n<a href="#imgUploadModal" role="button" class="btn" data-toggle="modal">Upload Image</a>\r\n--><div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n		<h3 id="label">Image Uploader</h3>\r\n	</div>\r\n\r\n	<div class="side-panel" id="left_upload">\r\n		\r\n	</div>\r\n\r\n	<div class="main-body">\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n<div class="clear"></div>\r\n</div>'}),define("text!imageup/templates/uploader.html",[],function(){return'<div id="main-content-img" class="imageholder">\r\n	<div align="center" class="m_top_50"><input type="file" id="image_file" class="files" name="image_file[]" multiple="">\r\n		<div class="clear"></div>\r\n		<div class="textcenter m_top_50 bigger">\r\n			<button class="btn fileuploader btn-primary" id="imageup" type="button">Upload and Finish</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div id="main-content-tag-section" class="imageholder floatLeft m_top_2 displayNone">\r\n		<div id="image-tagging" class="displayNone">\r\n			\r\n		</div>\r\n		<div id="select-allup" class="tag_select_all">\r\n			\r\n		</div>	\r\n</div>'}),define("imageup/models/basic",["facade","media/models/image"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("imageup/models/imageupload",["facade","media/models/image"],function(e,t){var n,r=e._;return ImageUploadModel=t.extend({initialize:function(e,n){t.prototype.initialize.call(e,n)}}),n}),define("imageup/models/errorshow",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{msg:null,color:null}),initialize:function(e,t){}}),n}),define("imageup/collections/basics",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/"+this.id+"/images/":"/api/user/images/"}}),r}),define("imageup/models/preview",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({initialize:function(e,t){}}),n}),define("text!imageup/templates/select_all.html",[],function(){return'<div class="well-large div_select_all">\r\n	<div class="text-center m_top_20 bigger">SELECT IMAGES TO TAG A TEAM, PLAYER OR GAME</div>\r\n	<div class="clear"></div>\r\n	<div class="text-center m_top_20 bigger" >OR</div>\r\n	<div class="clear"></div>\r\n	<div class="text-center m_top_20 bigger"><a href="javascript:void(0)" id="btn_select_all_h">SELECT ALL</a></div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!usercontrol/tag/templates/layout.html",[],function(){return'<div class="well-large container_batch_tag">\r\n	<h4>Tagging</h4>\r\n	<div class="section-Add-Sports_h well-large">\r\n	<div class="m_bottom_10">\r\n		Select Sport:\r\n	</div>\r\n	<div class="row-fluid section_inner">\r\n		<span class="span-ddl-sports-tag_h dropdown"></span>\r\n		<div class="clear"></div>\r\n		<!-- <select class="ddl-tag-sports_h" style=></select> -->\r\n		<span class="displayNone field-message"></span> \r\n	<br/>\r\n	<button class="btn btn-primary btn-tag-sport_h displayNone">Done</button>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="div-tag-list_h section_outer">		\r\n	<div class="section-sports_h displayNone">\r\n		<label class="lbl-tag-sport-name_h bigger"></label>\r\n		<!-- <div class="clear"></div> -->\r\n		<span>\r\n			<a href="javascript:void(0)" class="btn-tag-edit-sport_h">Change Sport</a></span>\r\n	</div>\r\n	\r\n	<div class="section-team_h displayNone section_inner">\r\n		<strong>Teams :</strong> <br/>\r\n		<label class="lbl-tag-team-name_h"></label><span><button class="btn btn-tag-edit-team_h displayNone">Edit</button></span>\r\n	</div>\r\n\r\n	<div class="section-events_h displayNone section_inner">\r\n		<strong>Event:</strong> <br/>\r\n		<label class="lbl-tag-event-name_h"></label><span><button class="btn btn-tag-edit-event_h displayNone">Edit</button></span>\r\n	</div>\r\n	\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-team_h displayNone section_outer">\r\n		Tag a Team : \r\n		<br/>\r\n		<input type="text" class="txt-tag-team-state_h displayNone" placeholder="Enter State" />\r\n		<div class="clear"></div>\r\n		<input type="text" class="txt-tag-team-city_h displayNone" placeholder="Enter City" />\r\n		<div class="clear"></div>\r\n		<input type="text"class="txt-tag-team-school_h" placeholder="Enter Team" />\r\n	<!--	<select class="ddl-tag-team-level_h displayNone"></select>\r\n		<select class="ddl-tag-team-season_h displayNone"></select> -->\r\n	 	<div class="clear"></div>\r\n	 	<span class="displayNone field-message"></span> \r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-team-Done_h displayNone">Done</button>\r\n		\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-event_h displayNone section_outer">\r\n		Tag an Event:\r\n		<br/>\r\n		<input type="text" class="txt-tag-event-state_h" placeholder="Enter State" />\r\n		<div class="clear"></div>\r\n		<input type="text"class="txt-tag-event_h" disabled="disabled" placeholder="Enter The Event\'s Title" />\r\n		<div class="clear"></div>\r\n		<span class="displayNone field-message"></span>\r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-event-Done_h displayNone">Done</button>\r\n\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-player_h displayNone section_outer">\r\n		Tag a Player : \r\n		<br/>\r\n		<div class="section-tag-player-input_h">\r\n		<input type="text" class="txt-tag-player-name_h" placeholder="Enter Name" />\r\n		</div>\r\n		<div class="clear"></div>\r\n		<span class="btn-tag-add-player_h strong">\r\n			+\r\n		</span>\r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-player-Done_h">Done</button>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-team-players_h displayNone section_inner">\r\n		<strong>Players :</strong> \r\n<div class="clear"></div>\r\n		<label class="lbl-tag-players-name_h"></label>\r\n		<span class="displayNone"><button class="btn btn-tag-edit-players-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-tag-game_h displayNone section_outer">\r\n		<strong>Tag a Game : </strong>\r\n		<div class="clear"></div>\r\n		<span class="span-ddl-games-tag_h  dropdown"></span>\r\n		<!-- <select class="ddl-tag-game_h"></select> -->\r\n		<div class="clear"></div>\r\n		<span class="displayNone field-message"></span>\r\n		<div class="clear"></div>\r\n		<button class="btn btn-primary btn-tag-game-Done_h displayNone">Done</button>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-team-games_h displayNone section_outer">\r\n		<strong>Games :</strong>\r\n		<div class="clear"></div>\r\n		<label class="lbl-tag-games-name_h"></label><span class="displayNone"><button class="btn btn-tag-edit-games-team_h displayNone">Edit</button></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-link_h displayNone section_outer">\r\n\r\n		<div class="fixed-icons">\r\n			<ul>\r\n				<li><a id="user" class="link-tag-player_h icons athlete restype" data-selected-class="athlete_selected icon_selected" data-number="2" title="Tag a Player" href="javascript:void(0);"></a></li>\r\n				<li><a id="org" class="link-tag-team_h icons team restype" data-selected-class="team_selected icon_selected" data-number="4" title="Tag a Team" href="javascript:void(0);"></a></li>\r\n				<li><a id="game" class="link-tag-Game_h icons events-games restype" data-selected-class="events-games_selected icon_selected" data-number="3" title="Tag a Game" href="javascript:void(0);"></a></li>\r\n				<li><a id="event" class="link-tag-event_h icons events-games restype" data-selected-class="events-games_selected icon_selected" data-number="3" title="Tag an Event" href="javascript:void(0);"></a></li>\r\n			</ul>\r\n		</div>\r\n		<span class="displayNone field-message"></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<!-- <div class="section_outer">\r\n		<button class="btn btn-primary btn-tag-Finish_h displayNone">Finish</button>\r\n	</div> -->\r\n</div>'}),define("text!imageup/templates/error_template.html",[],function(){return'<div class="alert {{color}}" align="center">\r\n	<button type="button" class="close" data-dismiss="alert">&times;</button>\r\n	{{msg}}\r\n</div>'}),define("imageup/views/errors",["require","text!imageup/templates/error_template.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=i.SectionView,f=r.$,l=r._,c=s.debug;return n=a.extend({id:"main-content",template:t,initialize:function(e){a.prototype.initialize.call(this,e),c.log("error view")}}),n}),define("usercontrol/tag/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("sportorg/collections/sports_listall",["facade","collections","sportorg/collections/sports"],function(e,t,n){var r;return r=n.extend({sport_type:null,sport_type_id:null,male:1,female:0,url:function(){return baseUrl="/api/sport/listall/?male="+this.male+"&female="+this.female+"&sport_type="+this.sport_type+"&sport_type_id="+this.sport_type_id},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload,r="";n.male=="1"&&n.female=="1"?r="":n.male=="1"?r="Men's ":n.female=="1"&&(r="Women's "),t.payload.custom_name=r+n.sport_name,t.payload.team_type=n.sport_type?n.sport_type.name||"":""}}),t}}),r}),define("usercontrol/tag/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+"/api/org/search/"+this.sport_id:"/api/org/search?states_id="+e.states_id+"&org_name="+e.org_name},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("usercontrol/tag/collections/teams",["facade","collections","sportorg/collections/teams","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.team_name&&(e+="team_name="+this.team_name),this.team_name&&(e+="&searchtext="+this.team_name),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.sports_id&&(e+="&sports_id="+this.sports_id),e+="&response_profile=team_min","/api/team/search?"+e}}),i}),define("models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("location/collections/cities",["facade","collections","models/common","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){if(this.city_name==undefined)return"/api/city/search";var e="?city_name="+this.city_name;return this.states_id&&(e+="&states_id="+this.states_id),"/api/city/search/"+e},fetchSuccess:function(e,t){e.reset();var n=t.payload;if(n!=null)for(i=0;i<(n.length>10?10:n.length);i++){var r={};r.city=n[i].name,r.county=n[i].county.name,r.state=n[i].county.state.name,r.id=n[i].id,e.push(r)}e.deferred.resolve(t)},isError:function(){return!1}}),s}),define("user/models/common",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("user/collections/users",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,url:function(){var e="";return this.user_name&&(e+="searchtext="+this.user_name),this.sports_id&&(e+="&sports_id="+this.sports_id),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.team_id&&(e+="&team_id="+this.cities_id),"/api/user/search?"+e},fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("sportorg/collections/games",["facade","collections","sportorg/models/game","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},ParseForDropdown:function(){var e=this,t=e.toJSON();return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var n=t.payload;t.payload.custom_name=n.game_name}}),t}}),s}),define("usercontrol/tag/collections/games",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.sports_id&&(e+="sports_id="+this.sports_id+"&"),this.teams_id&&(e+="teams_id="+this.teams_id+"&"),"/api/game/search/0?"+e}}),i}),define("sportorg/models/complevel",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel information",exec_data:{exec_time:0,exec_error:!1}}),fetchSuccess:function(e,t){}}),n}),define("usercontrol/tag/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("text!usercontrol/dropdown/template/layout.html",[],function(){return'<div class="dropdown-container">\r\n	<input type="hidden" class="hidden-input-dropdown-h" value="" />\r\n	<div class="drop-down-outer">\r\n		<div class="region-dark dropdown-header-box">\r\n			{{dropView.title}}\r\n		</div>\r\n		<div class="down-arrow-outer">\r\n			<a href="javascript: void(0);" class="down-arrow up-down-arrow-h">\r\n				<span class="icon-white icon-chevron-down"></span>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<div class="common-container">\r\n		<ul class="common-dropdown">\r\n			{{#records}}\r\n			<li class="{{#dropView.defaultSelected}}{{dropView.defaultSelected}}{{/dropView.defaultSelected}}">\r\n				<a data-id="{{#dropView.getRecordId}}{{dropView.getRecordId}}{{/dropView.getRecordId}}" href="javascript: void(0);">{{#dropView.getRecordValue}}{{dropView.getRecordValue}}{{/dropView.getRecordValue}}</a>\r\n			</li>\r\n			{{/records}}\r\n		</ul>\r\n	</div>\r\n</div>\r\n'}),define("usercontrol/dropdown/view/dropdown",["require","text!usercontrol/dropdown/template/layout.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p,d;return p=h.View.extend({template:t,multiple:!1,selectedOptions:[],className:"dropdown-wrapper",events:{"click .up-down-arrow-h":"showDropdown","click li a":"selectOptions"},selectOptions:function(e){var t=l(e.target).data("id");this.multiple?this.setMultipleOptions(t,e):this.setSingleOption(t,e),this.showSelectedValue(),this.callback&&this.callback(this.selectedOptions)},showSelectedValue:function(){var e=this.$el.find(".common-dropdown li.selected").text()||this.title;this.$el.find(".dropdown-header-box").html(e)},setMultipleOptions:function(e,t){var n=this.checkifExists(e);n==-1?(l(t.target).parent().addClass("selected"),this.selectedOptions.push(e)):(l(t.target).parent().removeClass("selected"),this.selectedOptions.splice(n,1))},setSingleOption:function(e,t){var n=this.checkifExists(e);n==-1&&(this.selectedOptions=[],console.log(this.$el.find(".common-dropdown li")),this.$el.find(".common-dropdown li").removeClass("selected"),l(t.target).parent().addClass("selected"),this.selectedOptions.push(e),this.$el.find(".hidden-input-dropdown-h").val(e),this.hideDropdown())},checkifExists:function(e){var t=-1;for(var n in this.selectedOptions)if(this.selectedOptions[n]==e){t=n;break}return t},initialize:function(e){d=this,n=this,this.selectedOptions=[],n.setOptions(e),this.render(),this.$el.find(".hidden-input-dropdown-h").attr("id",this.elementId)},hideDropdown:function(e){if(!e||!this.$el.find(l(e.target)).parents(".dropdown-container").length)this.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),this.$el.find(".up-down-arrow-h span").removeClass("icon-chevron-up").addClass("icon-chevron-down"),this.$el.find(".common-dropdown").slideUp()},showDropdown:function(e){e.preventDefault();var t=this;l(e.currentTarget).find("span").hasClass("icon-chevron-down")?(l(e.currentTarget).find("span").removeClass("icon-chevron-down").addClass("icon-chevron-up"),l(".dropdown-container").removeClass("increase-dropown-zindex"),t.$el.find(".dropdown-container").addClass("increase-dropown-zindex"),l("html").bind("click",function(e){t.hideDropdown(e)})):(t.$el.find(".dropdown-container").removeClass("increase-dropown-zindex"),l(e.currentTarget).find("span").removeClass("icon-chevron-up").addClass("icon-chevron-down")),l(e.currentTarget).parents(".dropdown-container").find(".common-dropdown").slideToggle()},getRecordId:function(){return this.payload[d.data.recordId]},defaultSelected:function(e){if(d.multiple){if(_.isArray(d.selectedValue))for(var t in d.selectedValue)if(d.selectedValue[t]==this.payload[d.data.recordId])return"selected"}else if(d.selectedValue&&d.selectedValue==this.payload[d.data.recordId])return"selected"},getRecordValue:function(){return this.payload[d.data.recordValue]},render:function(){this.data.dropView=this;if(!this.selectedValue){if(this.data.records.length)var e=this.data.records[0].payload[this.data.recordId];this.multiple?(this.selectedValue=[],this.selectedValue.push(e)):this.selectedValue=e}var t=this,n=f.to_html(t.template,this.data);return l(t.el).html(n),this.targetView.$el.find(this.destination).html(this.el),this.$el.find(".hidden-input-dropdown-h").val(this.selectedValue),this.selectedOptions.push(this.selectedValue),this.showSelectedValue(),l("#"+this.elementId).length?t.callback&&t.callback(this.selectedOptions):setTimeout(function(){if(!t.$el.find("li.selected").length){var e=t.$el.find(".common-dropdown li:first-child");e.addClass("selected"),t.$el.find("#"+t.elementId).val(e.find("a").data("id")),t.showSelectedValue()}t.callback&&t.callback(t.selectedOptions)},200),!0},setOptions:function(e){for(var t in e)this[t]=e[t]}}),p}),define("usercontrol/tag/models/sport",["facade","sportorg/models/sport"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"/api/sport/basics/"+this.id}}),n}),define("usercontrol/tag/collections/events",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.sports_id&&(e+="sports_id="+this.sports_id+"&"),this.states_id&&(e+="states_id="+this.states_id+"&"),this.event_name&&(e+="searchtext="+encodeURI(this.event_name)),"/api/game/search?"+e}}),i}),define("usercontrol/tag/views/main",["require","text!usercontrol/tag/templates/layout.html","facade","views","utils","vendor","usercontrol/tag/models/basic_info","sportorg/collections/sports_listall","location/collections/states","usercontrol/tag/collections/schools","usercontrol/tag/collections/teams","location/collections/cities","user/collections/users","usercontrol/tag/collections/games","usercontrol/tag/models/complevel","usercontrol/dropdown/view/dropdown","usercontrol/tag/models/sport","usercontrol/tag/collections/events"],function(e){var t=e("text!usercontrol/tag/templates/layout.html"),n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrol/tag/models/basic_info"),h=e("sportorg/collections/sports_listall"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrol/tag/collections/schools"),m=e("user/collections/users"),g=e("usercontrol/tag/collections/games"),y=e("usercontrol/tag/collections/teams"),b=e("usercontrol/tag/models/complevel"),w=e("usercontrol/dropdown/view/dropdown"),E=e("usercontrol/tag/models/sport"),S=e("usercontrol/tag/collections/events");return TagView=s.extend({template:t,tagData:{Game:{},Player:{},Team:{}},events:{"change .ddl-tag-sports_h":"changeSport","click .btn-tag-sport_h":"sportsDone","click .btn-tag-edit-sport_h":"editSport","click .link-tag-team_h":"showTeamSection","keyup .txt-tag-team-state_h":"keyupState","blur .txt-tag-team-state_h":"changeState","keyup .txt-tag-team-city_h":"keyupCity","blur .txt-tag-team-city_h":"changeCity","keyup .txt-tag-team-school_h":"keyupSchool","blur .txt-tag-team-school_h":"changeSchool","change .ddl-tag-team-level_h":"changeCompLevel","change .ddl-tag-team-season_h":"changeSeason","click .btn-tag-team-Done_h":"doneTagTeamTagging","keyup .txt-tag-event-state_h":"keyupState","blur .txt-tag-event-state_h":"changeState","keyup .txt-tag-event_h":"keyupEvent","blur .txt-tag-event_h":"changeEvent","click .btn-tag-event-Done_h":"doneTagTeamTagging","click .link-tag-event_h":"showEventSection","click .btn-tag-event-Done_h":"doneEventTagging","change .ddl-tag-event_h":"changeEvent","click .link-tag-player_h":"showPlayer","click .btn-tag-add-player_h":"addPlayer","keyup .txt-tag-player-name_h":"keyUpPlayer","change .txt-tag-player-name_h":"setPlayerId","click .btn-tag-player-Done_h":"donePlayerTagging","click .link-tag-Game_h":"showGameSection","click .btn-tag-game-Done_h":"doneGameTagging","change .ddl-tag-game_h":"changeGame","click .btn-tag-Finish_h":"finishTagging"},controls:{secAddSports:".section-Add-Sports_h",divTagList:".div-tag-list_h",secSports:".section-sports_h",lblSportName:".lbl-tag-sport-name_h",btnEditSport:".btn-tag-edit-sport_h",btnSportsDone:".btn-tag-sport_h",ddlSports:".ddl-tag-sports_h",spnSports:".span-ddl-sports-tag_h",dropdownHeader:".dropdown-header-box",secTeam:".section-team_h",lblTeamName:".lbl-tag-team-name_h",secTagTeam:".section-tag-team_h",txtTeamState:".txt-tag-team-state_h",txtTeamCity:".txt-tag-team-city_h",txtTeamSchool:".txt-tag-team-school_h",btnTeamDone:".btn-tag-team-Done_h",secEvent:".section-events_h",lblEventName:".lbl-tag-event-name_h",secTagEvent:".section-tag-event_h",txtEventState:".txt-tag-event-state_h",txtEvent:".txt-tag-event_h",btnEventDone:".btn-tag-event-Done_h",secPlayer:".section-tag-player_h",secPlayerInput:".section-tag-player-input_h",txtPlayerName:".txt-tag-player-name_h",additionalPlayer:".additional_h",btnAddPlayer:".btn-tag-add-player_h",btnPlayerDone:".btn-tag-player-Done_h",sectionSelectedPlayers:".section-team-players_h",lblPlayerNames:".lbl-tag-players-name_h",secGame:".section-tag-game_h",ddlGame:".ddl-tag-game_h",btnGameDone:".btn-tag-game-Done_h",secFooterLinks:".section-link_h",lnkTeam:".link-tag-team_h",lnkPlayer:".link-tag-player_h",lnkGame:".link-tag-Game_h",lnkEvent:".link-tag-event_h",sectionSelectedGames:".section-team-games_h",lblGameNames:".lbl-tag-games-name_h",spnGames:".span-ddl-games-tag_h",btnTeamFinish:".btn-tag-Finish_h",fieldMessage:".field-message",fieldError:".field-error",hdnSportsIdData:"hdn_sport_id",hdnSportsId:"#hdn_sport_id",hdnGamesIdData:"hdn_game_id",hdnGamesId:"#hdn_game_id"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid",eventId:"eventid"},inlineTemplates:{sportOption:'{{#sports}}<option value="{{sport_id}}">{{sport_name}}</option>{{/sports}}',compLevelOption:'{{#levels}}<option value="{{complevel_id}}">{{complevel_name}}</option>{{/levels}}',seasonOption:'{{#seasons}}<option value="{{season_id}}">{{season_name}}</option>{{/seasons}}',addPlayerText:'</br><input type="text" class="txt-tag-player-name_h additional_h" placeholder="Enter Name" value="" />'},messages:{dataNotExist:"Not finding anything... ",dataNotExistAwards:"Not finding any awards. ",MandatoryFields:"Sport, Name and Year are mandatory.",selectOrganization:"Please Select High School Or Club & Season. ",selectEvent:"Please select an event. ",selectTeamAndSports:"Please Select Both Sports And A Team. "},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id,e.is_owner==undefined||e.is_owner==null?this.is_owner=null:this.is_owner=e.is_owner;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel,this.sports_id=e.sports_id||null},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.fillSports()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e),console.log("isowner",n.is_owner)},fillSports:function(){if(!(n.sports&&n.sports.length>0)){var e=new h;e.processResult=function(t){var r=e.ParseForDropdown();n.SetupSportsView(r)},e.fetch()}},SetupSportsView:function(e){n.sports=e;var t={};t.records=n.sports,t.recordId="id",t.recordValue="custom_name";var r=new w({data:t,title:"Select Sport",elementId:n.controls.hdnSportsIdData,destination:n.controls.spnSports,targetView:n,selectedValue:n.sports_id||null,callback:function(e){n.changeSport(e)}});n.sports_id&&(n.sportsDone(),n.is_owner==0&&(console.log("insideoop"),l(n.destination).find(n.controls.btnEditSport).addClass("display_none_important")))},changeSport:function(e){e&&e!=0?l(n.destination).find(n.controls.btnSportsDone).fadeIn():l(n.destination).find(n.controls.btnSportsDone).fadeOut()},setSport:function(){return n.sportsId?(n.sport=new E({id:n.sportsId}),n.sport.fetch(),l.when(n.sport.request).done(function(){var e=n.sport.get("payload");e.sport_type_id==1?(l(n.destination).find(n.controls.lnkTeam).fadeIn(),l(n.destination).find(n.controls.lnkGame).fadeIn(),l(n.destination).find(n.controls.lnkEvent).fadeOut()):e.sport_type_id==2&&(l(n.destination).find(n.controls.lnkEvent).fadeIn(),l(n.destination).find(n.controls.lnkGame).fadeOut(),l(n.destination).find(n.controls.lnkPlayer).fadeIn(),l(n.destination).find(n.controls.lnkTeam).fadeOut()),l(n.destination).find(n.controls.lblSportName).html(l(n.destination).find(n.controls.spnSports).find(n.controls.dropdownHeader).text()),l(n.destination).find(n.controls.secAddSports).fadeOut(),l(n.destination).find(n.controls.secSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()}),n.sport):!1},sportsDone:function(e){n.sportsId=l(n.destination).find(n.controls.hdnSportsId).val(),n.setSport()},editSport:function(){this.tagData={Game:{},Player:{},Team:{}},l(n.destination).find(n.controls.secSports).fadeOut(),l(n.destination).find(n.controls.secAddSports).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeOut(),l(n.destination).find("*").show(),l(n.destination).find(".displayNone").hide(),l(n.destination).find("input").val(""),l(n.destination).find(n.controls.additionalPlayer).remove()},showTeamSection:function(e){l(n.destination).find(n.controls.secTagTeam).fadeIn(),l(n.destination).find(n.controls.secTagTeam+" input").val(""),l(n.destination).find(n.controls.btnTeamFinish).fadeOut()},showEventSection:function(e){l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secTagEvent).fadeIn(),l(n.destination).find(n.controls.btnEventDone).fadeOut()},keyupState:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.stateId),n.CheckTeamControlsVisibility();var i=new p;i.state_name=l(e.target).val(),n.stateFetchRequest=n.stateFetchRequest||[],n.stateFetchRequest.push(n.cityFetchRequest||[]),n.stateFetchRequest.push(n.teamFetchRequest||[]),l(e.target).addClass("ui-autocomplete-loading"),n.stateFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.stateFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.states=[];for(var s in t)n.states.push(t[s].payload);n.states.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeState(e)},changeState:function(e){console.log(l(e.target),l(e.target).hasClass("txt-tag-event-state_h"));var t=l(e.target).val();l(e.target).removeAttr(n.attributes.stateId);var r=!1;n.states_id="",n.states&&n.states.forEach(function(i,s){i["name"]==t&&(r=!0,n.states_id=i.id,l(e.target).attr(n.attributes.stateId,n.states_id),l(e.target).hasClass("txt-tag-event-state_h")?l(e.target).parent().find(n.controls.txtEvent).removeAttr("disabled").attr(n.attributes.stateId,n.states_id):l(e.target).parent().find(n.controls.txtTeamSchool).removeAttr("disabled").attr(n.attributes.stateId,n.states_id))}),r||(n.states_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.stateId).fadeOut()),n.CheckTeamControlsVisibility()},keyupCity:function(e){var t=l(e.target).val(),r=[];if(t.length>2)if(n.isValidAutoCompleteKey(e)==1){try{n.$(e.target).autocomplete("destroy")}catch(i){}l(e.target).removeAttr(n.attributes.cityId),n.CheckTeamControlsVisibility();var s=new d;s.states_id=n.states_id,s.city_name=l(e.target).val(),console.log("City Request Abort Request Function AddGame/Main.js"),n.cityFetchRequest=n.cityFetchRequest||[],n.cityFetchRequest.push(n.teamFetchRequest||[]),l(e.target).addClass("ui-autocomplete-loading"),n.cityFetchRequest=n.abortRequest(n.cityFetchRequest);var o=s.fetch();n.cityFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.cities=[];for(var i in t)n.cities.push(t[i]);n.cities.forEach(function(e,t){r.push(e.city)}),n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeCity(e)},changeCity:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.cityId);var r=!1;n.city_id="",n.cities&&n.cities.forEach(function(i,s){i["city"]==t&&(r=!0,n.city_id=i.id,l(e.target).attr(n.attributes.cityId,n.city_id))}),r?l(n.destination).find(n.controls.txtTeamSchool).removeAttr("disabled"):(n.city_id=0,l(n.destination).find(n.controls.txtTeamSchool).attr("disabled","disabled").removeAttr(n.attributes.cityId).fadeOut()),n.CheckTeamControlsVisibility()},keyupSchool:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility();var s=new y;s.states_id=l(e.target).attr(n.attributes.stateId),s.sports_id=l(n.destination).find(n.controls.hdnSportsId).val(),s.team_name=t,l(e.target).addClass("ui-autocomplete-loading"),n.TeamFetchRequest=n.abortRequest(n.TeamFetchRequest);var o=s.fetch();n.TeamFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.teams=[];for(var i in t)n.teams.push(t[i].payload);n.teams.forEach(function(e,t){r.push(e.team_name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r,select:function(e,t){console.log(t),n.changeSchool(e,t)}}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeSchool(e)},changeSchool:function(e,t){var r=e.type=="autocompleteselect"&&t!=undefined?t.item.value:l(e.target).val();console.log("Event",e),console.log("Name",r);var i=!1;n.team_id=0,n.teams&&(console.log("teams",n.teams),n.teams.forEach(function(t,s){var o=t.team_name;o==r&&(i=!0,n.team_id=t.id,l(e.target).attr(n.attributes.teamId,n.team_id))})),i||l(e.target).removeAttr(n.attributes.teamId),n.CheckTeamControlsVisibility()},keyupEvent:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),l(e.target).removeAttr(n.attributes.eventId),n.CheckEventControlsVisibility();var s=new S;s.states_id=l(e.target).attr(n.attributes.stateId),s.sports_id=n.sport.id,s.event_name=t,l(e.target).addClass("ui-autocomplete-loading"),console.log("Event Request Abort Request Function"),n.EventFetchRequest=n.abortRequest(n.EventFetchRequest);var o=s.fetch();n.EventFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.events=[];for(var i in t)n.events.push(t[i].payload);n.events.forEach(function(e,t){r.push(e.event_name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.eventId),n.CheckEventControlsVisibility(),n.isEnterKey(e)&&n.changeEvent(e)},changeEvent:function(e){var t=l(e.target).val(),r=!1;n.event_id=0,n.events&&n.events.forEach(function(i,s){var o=i.event_name;o==t&&(r=!0,n.event_id=i.id,l(e.target).attr(n.attributes.eventId,n.event_id))}),r||l(e.target).removeAttr(n.attributes.eventId),n.CheckEventControlsVisibility()},CheckEventControlsVisibility:function(){var e=l(n.destination).find(n.controls.txtEventState).attr(n.attributes.stateId);e&&e!=""&&e!=0?l(n.destination).find(n.controls.txtEvent).show():l(n.destination).find(n.controls.txtEvent).val("").removeAttr(n.attributes.eventId).hide(),e=l(n.destination).find(n.controls.txtEvent).attr(n.attributes.eventId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnEventDone).show():l(n.destination).find(n.controls.btnEventDone).hide()},doneEventTagging:function(e){var t=l(n.destination).find(n.controls.txtEvent).attr(n.attributes.eventId);n.event_id=t;var r=[];if(t&&t!=""&&t!=0&&t&&t!=""&&t!=0){var i=l(n.destination).find(n.controls.txtEvent).val();r.push(t),l(n.destination).find(n.controls.lblEventName).html(i),l(n.destination).find(n.controls.secTagEvent).fadeOut(),l(n.destination).find(n.controls.secEvent).fadeIn(),l(n.destination).find(n.controls.lnkPlayer).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()}else n.$(e.target).parents(n.controls.secTagEvent).find(n.controls.fieldMessage).html(n.messages.selectOrganization).stop().fadeIn();var s={8:r};u(n.channel).publish(s)},CheckTeamControlsVisibility:function(){var e=l(n.destination).find(n.controls.txtTeamState).attr(n.attributes.stateId);e=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnTeamDone).show():l(n.destination).find(n.controls.btnTeamDone).hide()},doneTagTeamTagging:function(e){var t=l(n.destination).find(n.controls.txtTeamSchool).attr(n.attributes.teamId);n.team_id=t;var r=l(n.destination).find(n.controls.ddlTeamSeason).val(),i=[];if(t&&t!=""&&t!=0&&t&&t!=""&&t!=0){var s=l(n.destination).find(n.controls.txtTeamSchool).val();i.push(t),l(n.destination).find(n.controls.lblTeamName).html(s),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secTeam).fadeIn(),l(n.destination).find(n.controls.lnkPlayer).fadeIn(),l(n.destination).find(n.controls.lnkTeam).fadeIn(),l(n.destination).find(n.controls.lnkGame).fadeIn(),l(n.destination).find(n.controls.secFooterLinks).fadeIn()}else n.$(e.target).parents(n.controls.secTagTeam).find(n.controls.fieldMessage).html(n.messages.selectOrganization).stop().fadeIn();var o={5:i};u(n.channel).publish(o)},showPlayer:function(e){l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secGame).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeIn(),l(n.destination).find(n.controls.btnTeamFinish).fadeOut()},addPlayer:function(e){l(n.destination).find(n.controls.secPlayerInput).append(n.inlineTemplates.addPlayerText)},keyUpPlayer:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.playersId);var i=new m;i.user_name=t,i.states_id=n.states_id,i.sports_id=l(n.destination).find(n.controls.hdnSportsId).val(),l(e.target).addClass("ui-autocomplete-loading"),console.log("Player Request Abort Request Function"),n.PlayerFetchRequest=n.abortRequest(n.PlayerFetchRequest);var s=i.fetch();n.PlayerFetchRequest.push(s),l.when(i.request).done(function(){var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.users=[];for(var s in t)n.users.push(t[s].payload);n.users.forEach(function(e,t){r.push(e.name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.setPlayerId(e),n.isEnterKey(e)&&n.addPlayer(e);else l(e.target).removeAttr(n.attributes.playersId)},setPlayerId:function(e){if(n.users){var t=l(e.target).val().toLowerCase();for(var r in n.users)if(n.users[r].name.toLowerCase()==t){l(e.target).attr(n.attributes.playersId,n.users[r].id);return}}},donePlayerTagging:function(e){var t=[],r="",i=[];l(n.destination).find(n.controls.txtPlayerName).each(function(){var e=l(this).attr(n.attributes.playersId);e>0&&(t.push({name:l(this).val(),id:e}),r+=","+l(this).val(),i.push(e))});if(t.length>0){var s={players:t},o=l(n.destination).find(n.controls.sectionSelectedPlayers);l(o).find(n.controls.lblPlayerNames).html(r),l(o).fadeIn(),l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.btnTeamFinish).fadeIn();var a={1:i};u(n.channel).publish(a)}else{l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectPlayer).fadeIn();var o=l(n.destination).find(n.controls.sectionSelectedPlayers);l(o).find(n.controls.lblPlayerNames).html(""),l(o).fadeOut()}},showGameSection:function(e){n.bindGamesData(e),l(n.destination).find(n.controls.secTagTeam).fadeOut(),l(n.destination).find(n.controls.secPlayer).fadeOut(),l(n.destination).find(n.controls.secGame).fadeIn(),l(n.destination).find(n.controls.btnTeamFinish).fadeOut()},bindGamesData:function(e){var t=l(n.destination).find(n.controls.hdnSportsId).val();if(n.sportsId){var r=new g;r.states_id=n.states_id,r.sports_id=n.sportsId,r.teams_id=n.team_id,l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html("").fadeOut(),r.processResult=function(e){n.SetupGamesView(e)},console.log("Team Request Abort Request Function"),n.GameFetchRequest=n.abortRequest(n.GameFetchRequest);var i=r.fetch();n.GameFetchRequest.push(i)}else l(e.target).parents(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.selectTeamAndSports).fadeIn()},SetupGamesView:function(e){var t=e.toJSON();if(t==null||t.length<1){l(n.destination).find(n.controls.secGame).find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn();return}n.games=t;var r={};r.records=n.games,r.recordId="id",r.recordValue="game_name";var i=new w({data:r,title:"Select Game",elementId:n.controls.hdnGamesIdData,destination:n.controls.spnGames,targetView:n,selectedValue:n.sports_id||null,callback:function(e){n.changeGame(e)}})},changeGame:function(e){var t=e;t&&t!=""&&t!=0?l(n.destination).find(n.controls.secGame).find(n.controls.btnGameDone).fadeIn():l(n.destination).find(n.controls.secGame).find(n.controls.btnGameDone).fadeOut()},doneGameTagging:function(e){var t=this,n=l(e.target).parents(t.controls.secGame).find(t.controls.hdnGamesId).val(),r="";if(n&&n!=""&&n!=0){r=l(e.target).parents(t.controls.secGame).find(t.controls.spnGames).find(t.controls.dropdownHeader).text();var i={game:{id:n,game_name:r}},s=[];s.push(n),t.tagData.Game=i;var o=l(t.destination).find(t.controls.sectionSelectedGames);l(o).find(t.controls.lblGameNames).html(r),l(o).fadeIn(),l(t.destination).find(t.controls.secGame).fadeOut(),l(t.destination).find(t.controls.btnTeamFinish).fadeIn();var a={8:s};u(t.channel).publish(a)}else{var o=l(t.destination).find(t.controls.sectionSelectedGames);l(o).find(t.controls.lblGameNames).html(""),l(o).fadeIn()}},finishTagging:function(){}}),TagView}),define("imageup/views/basic",["require","text!imageup/templates/uploader.html","text!imageup/templates/select_all.html","text!usercontrol/tag/templates/layout.html","facade","views","utils","vendor","imageup/models/basic","imageup/views/errors","usercontrol/tag/views/main"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=o.SectionView,c=e("imageup/models/basic"),h=e("imageup/views/errors"),p=s.$,d=s._,v=u.debug,m=e("usercontrol/tag/views/main");return v.log("SectionView: ",l),i=l.extend({id:"imageuploadForm",events:{"click #imageup":"imageUploadClick","change #image_file":"imagePreview","dragover #imageholder":"drag","drop #imageholder":"drop","click #btn_select_all_h":"selectAllImages"},template:t,data:t,tagCollection:[],tagData:{1:[],5:[],8:[]},"const":{User:1,Team:5,Game:8},files_byUploader:[],files_drag:[],initialize:function(e,t){p("#errormsg, #preview").html(""),l.prototype.initialize.call(this,e),this.files_byUploader=[],this.attr=t,this.files_drag=[],this.scheme=e.scheme,this.layout=e.layout,this.dropedImage=e.dropedImage,this.attr?this.sports_id=this.attr.sports_id||null:this.sports_id=null,a("tag-team-image-success").empty(),a("tag-team-image-success").subscribe(this.tagFunction),p("#imgUploadModal").modal("show"),p("#imgUploadModal").on("hidden",function(){routing.trigger("refresh-onImageUpload")}),p("#imgUploadModal").on("hide",function(){routing.trigger("refresh-onImageUpload")})},drag:function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},drop:function(e){var t=this;e.stopPropagation(),e.preventDefault(),p("#errormsg").hide(),this.files_drag=this.files_drag||[];var n=e.originalEvent.dataTransfer.files;n.length>0&&t.showLoader(t);var r=[];t.dataum=t.dataum||[];var i=t.dataum.length;for(var s=0,o;o=n[s];s++){if(!o.type.match("image.*"))continue;this.files_drag.push(o);var u=new FileReader;u.onload=function(e){return function(n){var r="preview_"+i;i++,t.dataum.push({preview_id:r,width:"250px",height:"250px",filesrc:n.target.result,title:escape(e.name)}),data={data:t.dataum},p("#image_file").attr("disabled","disabled"),routing.trigger("imageup-preview",data),t.hideLoader()}}(o),t.setUpBottomView(),u.readAsDataURL(o)}},imagePreview:function(e){var t=this;p("#preview").hide(),p("#errormsg").hide(),this.files_byUploader=this.files_byUploader||[];var n=p("#image_file")[0].files;n.length>0&&t.showLoader(t),t.dataum=[];var r,i=t.dataum.length,s=0;for(;r=n[s];s++){if(!r.type.match("image.*"))continue;t.files_byUploader.push(r);var o=new FileReader;o.onload=function(e){return function(r){var s="preview_"+i;i++,t.dataum.push({preview_id:s,width:"250px",height:"250px",filesrc:r.target.result,title:escape(e.name)}),i==n.length&&(data={data:t.dataum,ImageIndex:t.files_byUploader.length-1,filesUploader:t.files_byUploader},routing.trigger("imageup-preview",data),t.hideLoader())}}(r),o.readAsDataURL(r)}t.setUpBottomView()},imageUploadClick:function(e){e.preventDefault();var t=this;p("#errormsg").hide(),p("#imageup").attr("disabled","disabled"),p(".closepreview").attr("disabled","disabled"),p(".rotate").attr("disabled","disabled");if(p(".previewimg").length==0){var n={msg:"Image Field Empty",color:"alert-error"};routing.trigger("imageup-msg",n),p("#imageup").removeAttr("disabled")}else if(this.dropedImage){var r=this.files_drag.length;jQuery.each(this.dropedImage.data[0].drag_info,function(e,n){var i=new FormData;if(p("#preview_"+e+"group").length>0){i.append("image_file",n),p("#preview_"+e+"rotang").val()>0?i.append("rotate",p("#preview_"+e+"rotang").val()):i.append("rotate","false");for(var s in t.attr)console.error(s,t.attr[s]),i.append(s,t.attr[s]);var o={dataum:i,id:e,len:r};console.log(o),routing.trigger("imageup-add-image",o)}}),this.files_drag=[],p("#imageup").removeAttr("disabled")}else if(this.files_drag.length>=1){var r=this.files_drag.length;jQuery.each(this.files_drag,function(e,n){var i=new FormData;if(p("#preview_"+e+"group").length>0){i.append("image_file",n),p("#preview_"+e+"rotang").val()>0?i.append("rotate",p("#preview_"+e+"rotang").val()):i.append("rotate","false");for(var s in t.attr)console.error(s,t.attr[s]),i.append(s,t.attr[s]);var o=t.getTagData(p("#preview_"+e+"group"));i.append("tag",JSON.stringify(o));var u={dataum:i,id:e,len:r};console.log(u),routing.trigger("imageup-add-image",u)}}),this.files_drag=[],p("#imageup").removeAttr("disabled")}else console.log("file_byUploader"),console.log(this.files_byUploader),jQuery.each(t.files_byUploader,function(e,n){var r=new FormData;if(p("#preview_"+e+"group").length>0){r.append("image_file",n),p("#preview_"+e+"rotang").val()>0?r.append("rotate",p("#preview_"+e+"rotang").val()):r.append("rotate","false");for(var i in t.attr)r.append(i,t.attr[i]);var s=t.getTagData(p("#preview_"+e+"group"));r.append("tag",JSON.stringify(s));var o={dataum:r,id:e,len:t.files_byUploader.length};routing.isNative?(console.log("sending to image upload",n),routing.trigger("imageup-add-image",o)):routing.trigger("imageup-add-image",o)}}),t.files_byUploader=[],p("#imageup").removeAttr("disabled");this.dataum=[]},getTagData:function(e){var t=p(e).attr("gameIndex"),n=p(e).attr("teamIndex"),r=p(e).attr("userIndex"),i={1:[],5:[],8:[]};if(t>-1){var s=this.tagData[this["const"].Game][t];s&&(i[this["const"].Game]=s)}if(n>-1){var s=this.tagData[this["const"].Team][n];s&&(i[this["const"].Team]=s)}if(r>-1){var s=this.tagData[this["const"].User][r];s&&(i[this["const"].User]=s)}return i},setUpBottomView:function(){p("#main-content-tag-section").fadeIn(),this.setUpSelectAllView(),this.setUpTagView()},setUpSelectAllView:function(){var e=this;p("#select-allup").html(n),e.showSelectAllImages()},setUpTagView:function(){var e=this;this.tagView=new m({model:this.model,template:r,name:"tag-image "+(new Date).toString(),destination:"#image-tagging",user_id:e.user_id||null,sports_id:e.sports_id,channel:"tag-team-image-success"}),this.scheme.push(this.tagView),this.layout.render()},tagFunction:function(e){var t=this;this.tagCollection.push(e);var n=0,r=p(".previewimg.selected");console.log("selected",r);for(var i in e)t.tagData[i]=t.tagData[i]||[],t.tagData[i].push(e[i]),n=t.tagData[i].length-1,i==t["const"].Game?r.attr("gameIndex",n):i==t["const"].Team?r.attr("teamIndex",n):i==t["const"].User&&r.attr("userIndex",n)},selectAllImages:function(e){p(".previewimg").addClass("selected"),p("#select-allup").hide(),p("#image-tagging").show()},showSelectAllImages:function(){p("#select-allup").show(),p("#image-tagging").hide()}}),i}),define("text!imageup/templates/preview_template.html",[],function(){return'{{#data}} \r\n	<div class="previewimg" id="{{preview_id}}group"align="center">\r\n		\r\n		<div class="previewimgsrc" id="{{preview_id}}pre" align="center">\r\n			<div class="click-to-tag">Click to Tag</div>\r\n			<img src="{{filesrc}}" class="img-polaroid" width="{{width}}" height="{{height}}" title="{{title}}" draggable="false">\r\n			<!-- <button type="button" class="close closepreview" value ="{{preview_id}}"data-dismiss="{{preview_id}}">&times;</button> -->\r\n			<input type="hidden" id="{{preview_id}}rotang" value="0">\r\n\r\n		\r\n		</div>\r\n		\r\n		<div class="clear"></div>\r\n		<div id="{{preview_id}}rot" class="previewrotate lnkFooter">\r\n			<button title="Rotate 90°" id="{{preview_id}}pre img" value="{{preview_id}}" class="btn rotate"><img src="http://cdn.athletez.com/resources/img/rotate.png" /></button>\r\n			<button title="Delete" type="button" class="btn close closepreview" value ="{{preview_id}}"data-dismiss="{{preview_id}}">&times;</button>\r\n		</div>\r\n		<div class="clear"></div>\r\n		<div id="{{preview_id}}" class="previewprogress"></div>\r\n		<div class="clear"></div>\r\n	</div>\r\n{{/data}} '}),define("imageup/views/preview",["require","text!imageup/templates/preview_template.html","text!usercontrol/tag/templates/layout.html","text!imageup/templates/select_all.html","facade","views","utils","vendor","usercontrol/tag/views/main"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=o.SectionView,c=s.$,h=s._,p=e("usercontrol/tag/views/main"),d=u.debug;return i=l.extend({id:"imgpreview",template:t,events:{"click .rotate":"imageRotate","click .close":"closePreview","click .previewimgsrc":"selectImage","mouseover .previewimg":"showFooter","mouseout .previewimg":"hideFooter"},initialize:function(e){l.prototype.initialize.call(this,e),this.degree=0,this.scheme=e.scheme,this.layout=e.layout,this.ImageIndex=e.ImageIndex,this.filesUploader=e.filesUploader},imageRotate:function(e){id=e.currentTarget.id,val=e.currentTarget.value,this.degree=c("#"+val+"rotang").val(),this.degree=parseInt(this.degree)+90,this.degree>=360&&(this.degree=0),c("#"+id).css({"-webkit-transform":"rotate("+this.degree+"deg)","-moz-transform":"rotate("+this.degree+"deg)","-ms-transform":"rotate("+this.degree+"deg)","-o-transform":"rotate("+this.degree+"deg)",transform:"rotate("+this.degree+"deg)",zoom:1}),c("#"+val+"rotang").val(this.degree)},closePreview:function(e){var t=[];h.each(this.model.get("data"),function(n,r,i){console.log(n.preview_id,e.currentTarget.value),n.preview_id!=e.currentTarget.value&&t.push(n)}),this.model.set("data",t),id=e.currentTarget.value+"group";var n=document.getElementById(id);n.parentNode.removeChild(n),this.filesUploader.splice(this.ImageIndex,1)},selectImage:function(e){var t=c(e.target).hasClass("previewimg"),n=t?c(e.target):c(e.target).parents(".previewimg");n.find(".click-to-tag").hide(),n.toggleClass("selected");var r=c(this.destination).find(".previewimg.selected");r.length<1?this.setUpSelectAllView():this.setUpTagView()},setUpSelectAllView:function(){c("#image-tagging").hide(),c("#select-allup").show()},setUpTagView:function(){c("#select-allup").hide(),c("#image-tagging").show()},showFooter:function(e){c(e.target).parents(".previewimg").find(".lnkFooter").show(),c(e.target).parents(".previewimg:not(.selected)").find(".click-to-tag").show()},hideFooter:function(e){c(e.target).parents(".previewimg").find(".lnkFooter").hide(),c(e.target).parents(".previewimg").find(".click-to-tag").hide()}}),i}),define("imageup",["require","text!imageup/templates/basic.html","text!imageup/templates/uploader.html","facade","controller","models","views","utils","imageup/models/basic","imageup/models/imageupload","imageup/models/errorshow","imageup/collections/basics","imageup/models/preview","imageup/views/basic","imageup/views/errors","imageup/views/preview"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=e("imageup/models/basic"),f=e("imageup/models/imageupload"),l=e("imageup/models/errorshow"),c=e("imageup/collections/basics"),h=e("imageup/models/preview"),p=e("imageup/views/basic"),d=e("imageup/views/errors"),v=e("imageup/views/preview"),m=o.LayoutView,g=r.$,y=r._,b=u.debug,w=u.lib.Channel,E=[base_url+"pages/imageup/imageup.css"];return n=i.extend({initialize:function(e){return console.error(e),w("load:css").publish(E),y.bindAll(this),this.scheme=[],this.handleOptions(e),this.init(e),this},init:function(e){this.url=e.url,this.attr=e.attr,this.data=e.data,this.count=0,this.setupLayout(),this.handleDeferreds(),this.showuploader(),this.data&&this.showPreviewDropImage()},handleDeferreds:function(){function t(t){e.imageUpload(t)}function n(t){e.imageUploadNative(t)}function r(t){e.msgShowup(t)}function i(t){e.previewShowup(t)}function s(){e.rerender()}var e=this;routing.off("imageup-add-image"),routing.on("imageup-add-image",function(e){t(e)}),routing.off("imageup-add-image-native"),routing.on("imageup-add-image-native",function(e){t(e)}),routing.off("imageup-msg"),routing.on("imageup-msg",function(e){r(e)}),routing.off("imageup-preview"),routing.on("imageup-preview",function(e){console.log("this is"),i(e)}),routing.off("imageup-rerender"),routing.on("imageup-rerender",function(e){s(e)})},showuploader:function(){var e=new p({scheme:this.scheme,layout:this.layout,name:"Add Media",dropedImage:this.data,model:new a,destination:"#left_upload"},this.attr);this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return this.scheme=[],g(".model-popup-h").remove(),g("body").append('<div id="modalPopup" class="model-popup-h"></div>'),e=new m({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=e,this.layout},previewShowup:function(e){var t=new h(e);for(var n in this.scheme)this.scheme[n].id=="imgpreview"&&delete this.scheme[n];console.error(e),previewShowView=new v({scheme:this.scheme,layout:this.layout,name:"Preview Show View",model:t,ImageIndex:e.ImageIndex,filesUploader:e.filesUploader,destination:"#preview",displayWhen:"ready"}),this.scheme.push(previewShowView),g("#preview").show(),routing.trigger("imageup-rerender")},rerender:function(){this.showuploader()},showPreviewDropImage:function(){this.data&&routing.trigger("imageup-preview",this.data)},imageUploadNative:function(e){function t(e){var t=new FileUploadOptions;t.fileKey="file",t.fileName="test",t.mimeType="image/jpeg";var i={};i.value1="test",i.value2="param",t.params=i;var s=new FileTransfer;s.upload(dataum.data,encodeURI(this.url),n,r,t)}function n(e){console.log("Code = "+e.responseCode),console.log("Response = "+e.response),console.log("Sent = "+e.bytesSent)}function r(e){alert("An error has occurred: Code = "+e.code),console.log("upload error source "+e.source),console.log("upload error target "+e.target)}console.log(data),t(e)},imageUpload:function(e){var t=e.id,n=e.len,r=[],i="",s=this,r=e.dataum;g("#preview_"+t).addClass("image_upload_loader_new"),g(".previewimgsrc").addClass("fade-out");if(!routing.isNative||!0)console.log(this.url),g.ajax({url:this.url,data:r,cache:!1,processData:!1,contentType:!1,type:"POST",success:function(e){g("#preview_"+t).fadeOut("slow"),g("#preview_"+t+"rot").fadeOut("slow"),routing.trigger("image-upload-success",e),g("imageup").attr("disabled","disabled"),s.count++,s.count==n&&(i={msg:" File Uploaded Succesfully",color:"alert-success"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled"),g("#imgUploadModal, .modal-backdrop").unbind().remove()),g("#preview_"+t).unbind().removeClass("image_upload_loader_new").html("").attr("disabled","disabled")},error:function(e){g("#preview_"+t).fadeOut("slow"),g(".previewimgsrc").removeClass("fade-out"),g("#preview_"+t).fadeIn("slow").html("<b>Upload Error!</b>"),b.log(e),i={msg:e.statusText,color:"alert-error"},routing.trigger("imageup-msg",i),g("#imageup").removeAttr("disabled"),g("#image_file").removeAttr("disabled"),g(".closepreview").removeAttr("disabled");return}})},msgShowup:function(e){for(var t in this.scheme)this.scheme[t].destination=="#errormsg"&&delete this.scheme[t];errorShowModel=new l(e),addErrorView=new d({name:"File Upload Msg",model:errorShowModel,destination:"#errormsg",displayWhen:"ready"}),this.scheme.push(addErrorView),g("#errormsg").show(),routing.trigger("imageup-rerender")}}),n}),define("text!pages/home/templates/layout.html",[],function(){return'<div class="template-container home-template">\r\n	<div id="main-header"></div>\r\n	<div id="main-content" class="row-fluid">\r\n		<div class="green-left-heading desktop-link">\r\n			Top Rated Profiles\r\n		</div>\r\n		<div id="top-rated" class="p-l-20 clearfix clear"></div>\r\n		<div class="green-left-heading desktop-link">\r\n			Find Content\r\n		</div>\r\n		<div id="menu" class="p-l-20 clear"></div>\r\n		<div class="search-result-outer">\r\n\r\n			<div id="search-result" class="p-l-20 clear"></div>\r\n		</div>\r\n	</div>\r\n	<div data-uk-scrollspy="{cls:\'uk-animation-fade\', repeat: true}" class="uk-width-1-2 uk-container-center" id="homepage-infinite-scroll">\r\n		<!--<div style="text-align: center;" class="uk-panel uk-panel-box">loading more...</div>-->\r\n	</div>\r\n	<div id="main-footer"></div>\r\n</div>'}),define("pages/home/models/menu",["models"],function(e){var t,n=e.BaseModel;return t=n.extend({defaults:{name:null,views:{browse:[{name:"VOTES",value:"votes"},{name:"RECENT",value:"newest"},{name:"FANS",value:"followers"}],time:[{name:"TODAY",value:"DAY"},{name:"THIS WEEK",value:"WEEK"},{name:"THIS MONTH",value:"MONTH"},{name:"ALL TIME",value:"YEAR"}]}}}),t}),define("packages/location/models/city",["models","facade"],function(e,t){var n,r=e.BaseModel,s=t.$,o=t._;return n=r.extend({defaults:{name:null},initialize:function(e,t){this.id=this.id||o.uniqueId("m"),this.addSubscribers(),o.bindAll(this)},search:function(e){this.request&&this.request.abort(),this.request=s.ajax({url:"/api/location/search/?search_text="+e}).done(function(t,n,r){var s=[],u=t.payload;if(u!=null)for(i=0;i<(u.length>10?10:u.length);i++){var a={};a.label=u[i].str,a.id=u[i].type=="states_id"?"":u[i].id;var f=o.isUndefined(u[i].obj.states_obj)?!o.isUndefined(u[i].obj.city)&&!o.isUndefined(u[i].obj.city.states_obj)?u[i].obj.city.states_obj:{}:u[i].obj.states_obj;a.state_id=u[i].type=="states_id"?u[i].id:f.id,a.country_id=o.isUndefined(f.country)?"":f.country.id,s.push(a)}Channel("response :"+e).publish(s)})},addSubscribers:function(){var e=this;Channel("changeInput"+this.id).subscribe(e.search)}}),n}),define("sport/models/sport",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{sport_id:0,sport_name:null,sport_type:null},desc:"Sport Information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("packages/sport/collections/sports",["require","sport/models/sport","facade","collections","utils"],function(e,t){var n,r=e("utils"),s=e("facade"),o=e("collections"),u=r.debug,a=o.BaseCollection,f=s._;return n=a.extend({model:t,url:function(){var e="/api/sport/listall?",t=this.name||"boys",n="";switch(t){case"boys":n="male=1";break;case"both":n="male=1&";case"girls":n+="female=1"}return e+n},initialize:function(e,t){this.url=t.url||this.url,this.name=t.name,a.prototype.initialize.call(this,e,t)},fetchSuccess:function(e,n){e.reset();var r=n.payload;if(r!=null)for(i=0;i<r.length;i++){var s=new t;s.id=Math.ceil(Math.random()*1e5),r[i].icon.indexOf("http://")<0&&(r[i].icon=base_url+r[i].icon),r[i].large_icon.indexOf("http://")<0&&(r[i].large_icon=base_url+r[i].large_icon),r[i].small_icon.indexOf("http://")<0&&(r[i].small_icon=base_url+r[i].small_icon),s.set("payload",r[i]),s.set("desc",n.desc),s.set("exec_data",n.exec_data),e.push(s)}e.deferred.resolve(n)}}),n}),define("pages/home/models/image",["facade","media/models/image"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("pages/home/collections/image",["facade","collections","pages/home/models/image","utils","media/collections/images"],function(e,t,n,r,i){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=i.extend({model:n,initialize:function(e,t){debug.log("HomeImageList initialize..."),this.cid=this.cid||u.uniqueId("c"),this.deferred=new $.Deferred,this.num=t.num,u.bindAll(this)},fetchSuccess:function(e,t){var r=u.first(t.payload,e.num);e.reset();for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),s.selected_image!=undefined&&(r[i].image_path=s.selected_image),e.push(s)}e.deferred.resolve(t)}}),s}),define("text!pages/home/templates/menu.html",[],function(){return'<div class="demo-select">\r\n\r\n</div>\r\n<div class="fixed-icons">\r\n	<ul>\r\n		<li><a id="image" class="icons restype photos" data-tip-style="qtip-athletez qtip-photo" data-selected-class="photos_selected icon_selected" data-number="1" title="Find Images" href="javascript:void(0);">\r\n			<span class="mobile-link under-text under-text-h">images</span></a>\r\n		</li>\r\n		<li><a id="video" class="icons videos restype" data-tip-style="qtip-athletez qtip-video" data-selected-class="videos_selected icon_selected" title="Show Videos" data-number="0" href="javascript:void(0);">\r\n			<span class="mobile-link under-text under-text-h">videos</span></a>\r\n		</li>\r\n		<li><a  id="user" class="icons athlete restype" data-tip-style="qtip-athletez qtip-athlete" data-selected-class="athlete_selected icon_selected" data-number="2" title="Search for an Athlete" href="javascript:void(0);">\r\n			<span class="mobile-link under-text under-text-h">athletes</span></a>\r\n		</li>\r\n		<li><a id="org" class="icons team restype" data-tip-style="qtip-athletez qtip-team" data-selected-class="team_selected icon_selected" data-number="4" title="Find a Team" href="javascript:void(0);">\r\n			<span class="mobile-link under-text under-text-h">teams</span></a>\r\n		</li>\r\n		<li><a id="game" class="icons events-games restype" data-tip-style="qtip-athletez qtip-game" data-selected-class="events-games_selected icon_selected" data-number="3" title="Search for Games, Events, or Matches" href="javascript:void(0);">\r\n			<span class="mobile-link under-text under-text-h">events</span></a>\r\n		</li>\r\n	</ul>\r\n</div>\r\n\r\n\r\n<div class="clearfix"></div>\r\n\r\n\r\n<div class="menu-outer-h">\r\n\r\n	<!--div id="resulttype" class="menu span3">\r\n		<a href="javascript:void(0)" class="menu-link-h restype-link-h"><span class="option-heading-h">Athletes</span>\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-view-area-h restype-options-h">\r\n\r\n\r\n			<ul class="dropdown-menu" style="display: block; position: relative;">\r\n				<li><a id="user" class="restype" data-number="2" href="javascript:void(0)">Athletes</a></li>\r\n				<li><a id="image" class="restype" data-number="1" href="javascript:void(0)">Images</a></li>\r\n				<li><a id="video" class="restype"  data-number="0" href="javascript:void(0)">Videos</a></li>\r\n				<li><a id="game" class="restype" data-number="3" href="javascript:void(0)">Games &amp; Events</a></li>\r\n				<li><a id="org" class="restype" data-number="4" href="javascript:void(0)">Teams</a></li>\r\n			</ul>\r\n		</div>\r\n	</div-->\r\n	\r\n	<!--div class="menu individual-reset-btn">\r\n		<a href="javascript:void(0)" class="menu-link-h btn-link reset-option-btn-h hide" data-type="restype"><span class="option-heading-h" style="text-decoration: underline;">RESET</span></a>\r\n	</div-->\r\n	\r\n	<div id="sport" class="menu span3">\r\n		<a href="javascript:void(0)" class="menu-link-h sport-link-h" title="Use this menu to filter the results to only show a specific sport.">\r\n			<span class="option-heading-h">ALL SPORTS</span>\r\n\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-sport-area-h sports-option-h">\r\n			<!--<a href="javascript: void(0);" class="btn sport-reset-btn-h">Reset</a>-->\r\n			<div class="left text-center">\r\n				<strong>Guys</strong>\r\n				<div id=\'boys\' class="text-left sport-list"></div>\r\n			</div>\r\n			<div class="left text-center">\r\n				<strong>Girls</strong>\r\n				<div id=\'girls\' class="text-left sport-list"></div>\r\n			</div>\r\n			<div class="left text-center">\r\n				<strong>Both</strong>\r\n				<div id=\'both\' class="text-left sport-list"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="menu individual-reset-btn">\r\n		<a href="javascript:void(0)" class="menu-link-h btn-link reset-option-btn-h hide" data-type="sport"><span class="option-heading-h">&times;</span></a>\r\n	</div>\r\n\r\n	<div id="location" class="menu span3">\r\n		<a href="javascript:void(0)" class="menu-link-h location-link-h" title="Filter the results by location.  You can search for a state or a city in the United States and the results will be narrowed to that location."> <span class="option-heading-h">PLACE</span>\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-location-area-h no-padding">\r\n			<!--<a href="javascript: void(0);" class="btn location-reset-btn-h">Reset</a>-->\r\n			<!--div class="state"></div-->\r\n			<div class="city"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="menu individual-reset-btn">\r\n		<a href="javascript:void(0)" class="menu-link-h btn-link reset-option-btn-h hide" data-type="city"><span class="option-heading-h">&times;</span></a>\r\n	</div>\r\n\r\n	<div id="views" class="menu span2">\r\n		<a href="javascript:void(0)" class="menu-link-h view-link-h" title="Choose how you want your results ordered."><span class="option-heading-h">ORDER</span>\r\n			<div class="caret-large-container">\r\n				<span class="caret-large"></span>\r\n			</div>\r\n		</a>\r\n\r\n		<div class="dd menu-detail-h reset-view-area-h view-options-h">\r\n			<div class="dropdown">\r\n				<span> SORT BY</span>\r\n\r\n				<div class="clearfix"></div>\r\n				<ul class="dropdown-menu dropdown-menu-alias" style="display: block; position: relative; margin-bottom:15px;">\r\n					{{#views.browse}}\r\n					<li><a class="browse" data-id="{{value}}" href="javascript:void(0);">{{name}}</a></li>\r\n					{{/views.browse}}\r\n				</ul>\r\n			</div>\r\n			<br/>\r\n\r\n			<div class="dropdown">\r\n				<span>TIME FRAME</span>\r\n				<div class="clearfix"></div>\r\n				<ul class="dropdown-menu dropdown-menu-alias" style="display: block; position: relative;">\r\n					{{#views.time}}\r\n					<li><a class="time" data-id="{{value}}" href="javascript: void(0)">{{name}}</a></li>\r\n					{{/views.time}}\r\n				</ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="menu individual-reset-btn">\r\n		<a href="javascript:void(0)" class="menu-link-h btn-link reset-option-btn-h hide" data-type="views"><span class="option-heading-h">&times;</span></a>\r\n	</div>\r\n	\r\n	<!--div id="reset" class="menu span2">\r\n		<a href="javascript:void(0)" class="menu-link-h btn-link"><span class="option-heading-h reset-all-btn-h">&times;</span></a>\r\n	</div-->\r\n\r\n	<div class="pull-right search-box">\r\n		<input type="text" id="search" placeholder="SEARCH" style="height: 28px; margin:0px 5px;;"/><a href="javascript:void(0);" class="common-btn common-default-sky-dark common-btn-small">SEARCH</a>\r\n	</div>\r\n</div>'}),function(e){jQuery.fn.extend({slimScroll:function(n){var r=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},n);return this.each(function(){function i(t){if(p){t=t||window.event;var n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3),e(t.target||t.srcTarget||t.srcElement).closest("."+r.wrapperClass).is(x.parent())&&s(n,!0),t.preventDefault&&!S&&t.preventDefault(),S||(t.returnValue=!1)}}function s(e,t,n){S=!1;var i=e,s=x.outerHeight()-N.outerHeight();t&&(i=parseInt(N.css("top"))+e*parseInt(r.wheelStep)/100*N.outerHeight(),i=Math.min(Math.max(i,0),s),i=0<e?Math.ceil(i):Math.floor(i),N.css({top:i+"px"})),b=parseInt(N.css("top"))/(x.outerHeight()-N.outerHeight()),i=b*(x[0].scrollHeight-x.outerHeight()),n&&(i=e,e=i/x[0].scrollHeight*x.outerHeight(),e=Math.min(Math.max(e,0),s),N.css({top:e+"px"})),x.scrollTop(i),x.trigger("slimscrolling",~~i),l(),c()}function o(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1),this.addEventListener("MozMousePixelScroll",i,!1)):document.attachEvent("onmousewheel",i)}function u(){y=Math.max(x.outerHeight()/x[0].scrollHeight*x.outerHeight(),E),N.css({height:y+"px"});var e=y==x.outerHeight()?"none":"block";N.css({display:e})}function l(){u(),clearTimeout(m),b==~~b?(S=r.allowPageScroll,w!=b&&x.trigger("slimscroll",0==~~b?"top":"bottom")):S=!1,w=b,y>=x.outerHeight()?S=!0:(N.stop(!0,!0).fadeIn("fast"),r.railVisible&&C.stop(!0,!0).fadeIn("fast"))}function c(){r.alwaysVisible||(m=setTimeout(function(){r.disableFadeOut&&p||d||v||(N.fadeOut("slow"),C.fadeOut("slow"))},1e3))}var p,d,v,m,g,y,b,w,E=30,S=!1,x=e(this);if(x.parent().hasClass(r.wrapperClass)){var T=x.scrollTop(),N=x.parent().find("."+r.barClass),C=x.parent().find("."+r.railClass);u();if(e.isPlainObject(n)){if("height"in n&&"auto"==n.height){x.parent().css("height","auto"),x.css("height","auto");var k=x.parent().parent().height();x.parent().css("height",k),x.css("height",k)}if("scrollTo"in n)T=parseInt(r.scrollTo);else if("scrollBy"in n)T+=parseInt(r.scrollBy);else if("destroy"in n){N.remove(),C.remove(),x.unwrap();return}s(T,!1,!0)}}else{r.height="auto"==r.height?x.parent().height():r.height,T=e("<div></div>").addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height}),x.css({overflow:"hidden",width:r.width,height:r.height});var C=e("<div></div>").addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),N=e("<div></div>").addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),k="right"==r.position?{right:r.distance}:{left:r.distance};C.css(k),N.css(k),x.wrap(T),x.parent().append(N),x.parent().append(C),r.railDraggable&&N.bind("mousedown",function(n){var r=e(document);return v=!0,t=parseFloat(N.css("top")),pageY=n.pageY,r.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,N.css("top",currTop),s(0,N.position().top,!1)}),r.bind("mouseup.slimscroll",function(e){v=!1,c(),r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),C.hover(function(){l()},function(){c()}),N.hover(function(){d=!0},function(){d=!1}),x.hover(function(){p=!0,l(),c()},function(){p=!1,c()}),x.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(g=e.originalEvent.touches[0].pageY)}),x.bind("touchmove",function(e){S||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(s((g-e.originalEvent.touches[0].pageY)/r.touchScrollStep,!0),g=e.originalEvent.touches[0].pageY)}),u(),"bottom"===r.start?(N.css({top:x.outerHeight()-N.outerHeight()}),s(0,!0)):"top"!==r.start&&(s(e(r.start).position().top,null,!0),r.alwaysVisible||N.hide()),o()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),define("jquery.slimscroll",["jquery","jqueryui"],function(){}),define("common/models/get-city",["facade","models/base"],function(e,t){var n=e._;return t.extend({cityId:undefined,url:function(){return"/api/city/basics/"+this.cityId}})}),define("pages/home/views/menu",["require","text!pages/home/templates/menu.html","facade","views","jquery.slimscroll","common/models/get-city","vendor/plugins/qtip/qtip-wrapper","text!vendor/plugins/qtip/qtip.css"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("common/models/get-city");return n=s.extend({id:"menu1",events:{"blur #search":"updateSearch","focus #search":"hideDropdown","click .restype":"changeBaseUrl","click .dropdown-menu-alias > li > a":"select","click .dd":"doNothing","click .menu-link-h":"showMenuDropdown","click .views-reset-btn-h":"resetView","click .sport-reset-btn-h":"resetSport","click .location-reset-btn-h":"resetLocation","click .reset-all-btn-h":"resetAll","click .reset-option-btn-h":"resetIndividual"},demoSelect:function(){},resetIndividual:function(e){var t=$(e.currentTarget).data("type");$(e.currentTarget).addClass("hide"),t&&_.isFunction(this[t])&&this[t]()},restype:function(){Channel("resetIndividual").publish("restype")},sport:function(){Channel("resetIndividual").publish("sports")},city:function(){Channel("resetIndividual").publish("location")},views:function(){Channel("resetIndividual").publish("view")},resetAll:function(){this.resetView(),this.resetLocation(),this.resetSport()},resetView:function(){var e="view";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-view-area-h ul li a.select, .reset-view-area-h ul li.select").removeClass("select")},resetSport:function(){var e="sports";Channel("resetFilter").publish(e),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-sport-area-h ul li a.select, .reset-sport-area-h ul li.select").removeClass("select")},resetLocation:function(){var e="location";Channel("resetFilter").publish(e),this.$el.find("#city").val(""),this.$el.find(".menu-detail-h").hide(),this.$el.find(".reset-location-area-h ul li a.select, .reset-location-area-h ul li.select").removeClass("select")},template:t,initialize:function(e){s.prototype.initialize.call(this,e),this.options=e.options?e.options:{}},bindToolTips:function(){this.$el.find("a.restype").each(function(){var e=$(this);$(this).qtip2({position:{my:"left center",at:"right center"},style:{classes:e.data("tip-style")}},!1)}),this.$el.find("a.menu-link-h").each(function(){var e=$(this);$(this).qtip2({position:{my:"bottom center",at:"top center"},style:{classes:"header-dropdown"}})})},updateSearch:function(e){Channel("textChanged").publish($(e.target).val())},changeBaseUrl:function(e){var t=$(e.currentTarget);this.$el.find(".icons").each(function(){$(this).removeClass($(this).data("selected-class"))}),t.addClass(t.data("selected-class"));var n=t.data("number");Channel("baseUrlChanged").publish(n)},stateListChange:function(e){var t=$(e.currentTarget).val();console.log(t);var n=t.data("id");routing.trigger("stateChanged",n)},doNothing:function(e){e.preventDefault(),e.stopPropagation()},hideDropdown:function(){this.$el.find(".menu-detail-h").hide()},hideAllDropdowns:function(){var e=this;$("html, #search").click(function(t){$(t.target).parents(".menu").length||e.hideDropdown()})},showMenuDropdown:function(e){var t=$(e.currentTarget).next();t.css("display")=="none"?(this.$el.find(".menu-detail-h").hide(),t.show()):t.hide()},select:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),n=t.attr("class");$(".dropdown-menu > li > a."+n).removeClass("select"),n=t.attr("class").split(" ")[0],$(t).addClass("select"),$(".menu-detail-h").hide(),this.$el.find(".reset-option-btn-h[data-type="+$(t).parents(".menu").attr("id")+"]").removeClass("hide");var r={submenu:n,value:$(t).data("id")||$(t).text()};Channel("viewFilterChanged").publish(r)},toggle:function(e){e.preventDefault();var t=$(e.currentTarget),n=$(t).offset(),r=n.top+40,i=n.left+10,s=t.attr("id");s="#"+s+" .dd",$(s).attr("class")==="dd open"?$(s).hide().removeClass("open"):($(".open").hide().removeClass("open"),$(s).css("top",r).css("left",i),$(s).show(),$(s).addClass("open"))},afterRender:function(){this.hideAllDropdowns();var e=this,t=setInterval(function(){try{$(e.el).find(".sport-list").slimScroll(),clearInterval(t)}catch(n){}},1e3);this.bindToolTips();var n=this.model.toJSON();this.options.searchtext&&this.$el.find("#search").val(this.options.searchtext),this.options.cities_id||this.options.states_id||this.options.country_id;if(this.options.base){var r=this.$el.find(".restype[data-number="+this.options.base+"]");r.addClass(r.data("selected-class"))}this.options.sports_id&&this.options.sports_id!="0"&&e.$el.find(".reset-option-btn-h[data-type=sport]").removeClass("hide"),this.options.orderby!="random"&&e.$el.find(".reset-option-btn-h[data-type=views]").removeClass("hide");if(this.options.orderby){var i=this.$el.find("a.browse[data-id="+this.options.orderby+"]");i.parents("ul").find("a").removeClass("select"),i.addClass("select");var s=setInterval(function(){$("#views .view-link-h .option-heading-h").length&&(clearInterval(s),i.text()&&$("#views .view-link-h .option-heading-h").html(i.text()))},500)}}}),n}),define("pages/home/views/image-list",["facade","views","utils","media/views/image-item","media/views/image-list"],function(e,t,n,r,i){var s,o,u=e.$,a=e._,f=n.lib.Channel,l=t.CollectionView,c=t.SectionView;return o=l.extend(c.prototype),s=i.extend({__super__:l.prototype,id:"image-list",name:"Image List",tagName:"ul",_tagName:"li",_className:"image",page:0,page_limit:9999,allItemsInCollection:!1,_view:r,hideAddView:!0,initPhotoPlayer:function(e){e.preventDefault();var t=u(e.target).parents("li").index();routing.trigger("photo-player-init",t,this.allItemsInCollection,this.collection.id,undefined,this.pageName)},childViews:{}}),s}),define("text!packages/location/templates/state-item.html",[],function(){return'{{#payload}}\r\n<div data-id="{{id}}" class="state-{{id}}">{{name}}</div>\r\n{{/payload}}\r\n\r\n'}),define("packages/location/views/state-item",["vendor","views","utils","text!packages/location/templates/state-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"state",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},changeState:function(){console.log(this.model),Channel("stateChanged:"+this.model.collection.cid).publish(this.model)}}),i}),define("packages/location/views/state-list",["facade","views","utils","packages/location/views/state-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"state-list",name:"State List",tagName:"ul",_tagName:"li",_className:"state",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("StateListView expected options.collection.");u.bindAll(this),this.addSubscribers()},childViews:{}}),i}),define("pages/home/views/state-list",["facade","views","utils","packages/location/views/state-list"],function(e,t,n,r){var i,s=e.$,o=e._,u=n.lib.Channel,a=t.SectionView;return i=r.extend({tagName:"select",_tagName:"option",events:{change:"changeState"},initialize:function(e){r.prototype.initialize.call(this,e),this.id=e.id||this.id||o.uniqueId("v")},changeState:function(e){console.log(this.collection);var t=s(e.target).val(),n="";this.collection.each(function(e){e.get("payload").name==t&&(n=e.get("payload").id)}),n!=""&&(console.log("sdsd"),routing.trigger("stateChanged",n))}}),i}),define("text!sport/templates/sport-item.html",[],function(){return'{{#payload}}\r\n<a href="javascript: void(0);" class="sport-item-h" data-id="{{sport_id}}">\r\n<img src="{{small_icon}}"  class="tiny-sport-icon"/>{{sport_name}}</a>\r\n{{/payload}}'}),define("sport/views/sport-item",["vendor","views","utils","text!sport/templates/sport-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"sport",events:{},initialize:function(e){this.template=r},render:function(){var e=this,t=u.to_html(this.template,this.model.toJSON());return this.$el.html(t),this.$el.find("a").click(function(t){e.selectSport(t)}),this},selectSport:function(e){s(".reset-option-btn-h[data-type=sport]").removeClass("hide"),s(".menu-detail-h").hide(),s("li.sport").removeClass("select"),this.$el.addClass("select"),Channel("sportChanged:"+this.model.collection.cid).publish(this.model)}}),i}),define("packages/sport/views/sport-list",["facade","views","utils","sport/views/sport-item","jqueryui","jquery.slimscroll"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=n.debug;return CollectionView=t.CollectionView,SectionView=t.SectionView,s=CollectionView.extend(SectionView.prototype),i=s.extend({__super__:CollectionView.prototype,className:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){s.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.sports_id=e.sports_id||undefined,this.name=e.name||this.name,this._tagName=e._tagName||this._tagName,this.tagName=e.tagName||this.tagName,this._className=e._className||this._className,this._view=e._view||this._view,this.addSubscribers()},initScroll:function(){o("."+this.className).slimScroll({height:"200px"})},addSubscribers:function(){var e=this;a("layout:ready").subscribe(e.initScroll)},afterRender:function(){if(this.sports_id){var e=this.$el.find("a.sport-item-h[data-id="+this.sports_id+"]");o("li.sport").removeClass("select"),e.addClass("select");var t=setInterval(function(){o("#sport .sport-link-h .option-heading-h").length&&(clearInterval(t),e.text()&&o("#sport .sport-link-h .option-heading-h").html(e.text()))},2e3)}},childViews:{}}),i}),define("text!location/templates/city.html",[],function(){return'<input id="city" type="text" placeholder="Enter a City"/>'}),define("packages/location/views/city",["require","text!location/templates/city.html","views","facade","utils","jqueryui","controller"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("controller");return n=o.extend({template:t,className:"ui-front",initialize:function(e){o.prototype.initialize.call(this,e),this.id=e.id||this.id||a.unique("v"),this.addSubscribers()},initPlugin:function(){var e=this,t=this.model.id;u("#city").autocomplete({minLength:2,source:function(e,n){var r=e.term,i=l.prototype.appStates;if(i){var s=i.findByNameInStorage(r);if(s){n(s.data);return}}var o=function(e){var t=l.prototype.appStates;t&&(t.add({name:r,data:e,storage:"localStorage",expires:new Date(Date.now()+3154e5)}),t.save(r)),n(e)};Channel("response :"+r).subscribe(o),Channel("changeInput"+t).publish(r)},select:function(t,n){Channel("cityChanged:"+e.id).publish(n.item),f.log(n.item)}})},addSubscribers:function(){var e=this;Channel("layout:ready").subscribe(e.initPlugin)}}),n}),define("home",["require","text!pages/home/templates/layout.html","backbone","facade","controller","models","views","utils","pages/home/models/menu","packages/location/models/city","signup/models/registerbasic","packages/sport/collections/sports","pages/home/collections/image","location/collections/states","pages/home/views/menu","pages/home/views/image-list","pages/home/views/state-list","packages/sport/views/sport-list","signup/views/registerbasic","packages/location/views/city"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("packages/sport/collections/sports"),l=e("location/collections/states"),c=e("pages/home/collections/image"),h=e("pages/home/models/menu"),p=e("packages/location/models/city"),d=e("signup/models/registerbasic"),v=e("pages/home/views/menu"),m=e("signup/views/registerbasic"),g=e("pages/home/views/image-list"),y=e("pages/home/views/state-list"),b=e("packages/sport/views/sport-list"),w=e("packages/location/views/city"),E=u.LayoutView,S=i.$,x=i._,T=a.lib.Channel,N=[base_url+"pages/home/home.css",base_url+"vendor/plugins/qtip/qtip.css"];return r=s.extend({searchPage:0,initialize:function(e){return T("load:css").publish(N),x.bindAll(this),e.params&&this.setParamsArray(e.params),this.handleOptions(e),e.userId&&(this.userId=e.userId),this.scheme=[],this.genderTypes=["boys","girls","both"],this.init(),this},init:function(){this.initUrlOptions(),this.createData(),this.handleDeferreds()},initUrlOptions:function(){this.searchUrls=["/api/video/search","/api/image/search","/api/user/search","/api/game/search","/api/team/search"];var e=!!x.isUndefined(this.base)||this.base==""&&this.base!=0?1:this.base;this.baseUrl=this.searchUrls[e],this.urlOptions={sports_id:this.sports_id||"0",cities_id:this.cities_id||"0",orderby:this.orderby||"random",time:this.time||"DAY",states_id:this.states_id||"0",searchtext:this.searchtext||"",country_id:this.country_id||"0"},this.urlOptionByPageView={restype:["base"],location:["cities_id","states_id","country_id"],view:["orderby"],sports:["sports_id"]},this.menuValues=[{page:"view",src:".view-options-h .browse.select",target:".view-link-h .option-heading-h",input:!1,defaultValue:"ORDER"},{page:"sports",src:".sports-option-h .sport.select",target:".sport-link-h .option-heading-h",input:!1,defaultValue:"ALL SPORTS"},{page:"location",src:"#city",target:".location-link-h .option-heading-h",input:!0,defaultValue:"PLACE"},{page:"restype",src:"#resulttype a.restype.select",target:".restype-link-h .option-heading-h",input:!1,defaultValue:"ATHLETES"}],this.viewOptions=["orderby","time"],this.sportsOptions=["sports_id"],this.locationOptions=["cities_id","states_id","country_id"]},addSubscribers:function(){var e=this;x.each(this.genderTypes,function(e){T("sportChanged:"+this.collections[e].cid,"unique").subscribe(this.changeSportFilter)},this),T("cityChanged:"+this.sections.city.id,"unique").subscribe(this.changeCityFilter),routing.off("stateChanged"),routing.on("stateChanged",function(t){e.changeStateFilter(t)}),T("resetIndividual","unique").subscribe(this.updateIndividual),T("textChanged","unique").subscribe(this.updateText),T("viewFilterChanged","unique").subscribe(this.changeViewFilter),T("baseUrlChanged","unique").subscribe(this.updateBaseUrl),T("resetFilter","unique").subscribe(this.resetFilter)},setupScheme:function(){var e,t=this.params;for(e=0;e<this.meta.activeViews.length;e++)this.scheme.push(this.sections[this.meta.activeViews[e]])},updateIndividual:function(e){for(var t in this.menuValues)this.menuValues[t].page==e&&(this.menuValues[t].input?S(this.menuValues[t].src).val(""):S(this.menuValues[t].src).removeClass("select"));switch(e){case"view":for(var t in this.viewOptions)this.viewOptions[t]=="orderby"?(S(".dropdown-menu .browse").removeClass("select"),this.urlOptions[this.viewOptions[t]]="random"):t=="time"&&(this.urlOptions[this.viewOptions[t]]="today");break;case"sports":for(var t in this.sportsOptions)this.urlOptions[this.sportsOptions[t]]="0";break;case"restype":this.baseUrl=this.searchUrls[0];break;case"location":for(var t in this.locationOptions)this.urlOptions[this.locationOptions[t]]="0"}this.updateUrlAfterReset(this.urlOptionByPageView[e]),this.transitionView()},updateUrlAfterReset:function(e){var t=window.location.hash;if(e&&e.length)for(var n in e){var r=new RegExp(e[n]+"/[0-9a-zA-Z]+/","i"),i=new RegExp(e[n]+"/[0-9a-zA-Z]+","i");r.test(t)?t=t.replace(r,""):i.test(t)&&(t=t.replace(i,""))}routing.navigate(t,{trigger:!1})},initSections:function(){this.setupMenuView(),x.each(this.genderTypes,this.setupSportListView),x.each(["top-rated","search-result"],this.setupImageListView),this.setupLocationDDView(),this.setupScheme(),this.setupLayout().render(),this.setUpRegistrationView(),this.cityView&&this.cityView.initPlugin(),this.userId&&S(".register-wrapper, .register-wrapper-h").hide().html(""),routing.mobile&&S("[data-uk-scrollspy]").on("uk.scrollspy.inview",function(){console.log("Element is visible.")})},updateBaseUrl:function(e){this.baseUrl=this.searchUrls[e];var t={base:e};this.transitionView(t)},updateText:function(e){this.urlOptions.searchtext=e;var t={searchtext:e};this.transitionView(t)},changeViewFilter:function(e){e.submenu==="browse"?options={orderby:e.value}:options={time:e.value},options.orderby=="random"?S(".left-arrow-page").fadeOut():S(".left-arrow-page").fadeIn(),this.transitionView(options)},changeSportFilter:function(e){var t={sports_id:e.attributes.payload.sport_id};this.transitionView(t)},changeStateFilter:function(e){var t={states_id:e};this.transitionView(t)},changeCityFilter:function(e){S(".menu-detail-h").hide(),S(".reset-option-btn-h[data-type=city]").removeClass("hide"),e.label&&S("#city").val(e.label);var t={cities_id:e.id,states_id:e.state_id,country_id:e.country_id};this.transitionView(t)},resetFilter:function(e){for(var t in this.menuValues)this.menuValues[t].input?S(this.menuValues[t].src).val(""):S(this.menuValues[t].src).removeClass("select");switch(e){case"view":for(var t in this.viewOptions)this.viewOptions[t]=="orderby"?(S(".dropdown-menu .browse").removeClass("select"),this.urlOptions[this.viewOptions[t]]="random"):t=="time"&&(this.urlOptions[this.viewOptions[t]]="today");break;case"sports":for(var t in this.sportsOptions)this.urlOptions[this.sportsOptions[t]]="0";break;case"location":for(var t in this.locationOptions)this.urlOptions[this.locationOptions[t]]="0"}this.removeParamsFromUrl(),this.transitionView()},transitionView:function(e){this.searchPage=0,this.searchView(e)},manageHomePageUrl:function(e){var t,n=window.location.hash.match("home")?window.location.hash:window.location.hash+"/!home";n=n.match("search")?n:n+"/search";if(e)for(var r in e)if(!x.isUndefined(e[r])&&(e[r]!=""||e[r]=="0")){var i=new RegExp(r+"/(.*)[0-9a-zA-Z]","i"),s=new RegExp(r+"/(.*)[0-9a-zA-Z]","i");i.test(n)?n=n.replace(i,r+"/"+e[r]):s.test(n)?n=n.replace(s,r+"/"+e[r]):(t=n[n.length-1]!="/"?"/":"",n+=t+r+"/"+e[r])}routing.navigate(n,{trigger:!1});var o=!this.currentHashURL||this.currentHashURL==n||!n.match("base")&&!n.match("searchtext")?!1:!0;return console.log(n,o),this.currentHashURL=n,o},removeParamsFromUrl:function(){routing.navigate("!home",{trigger:!1})},searchView:function(e){var t=this,r="search-result",i=this.collections[r],s=this,o=i.toJSON(),u=this.manageHomePageUrl(e);i.url=this.url(e),i.targetElement="#search-result",i.fetch({remove:!1});var a=a||null;S.when(i.request).done(function(){if(u){var e=new n.Collection;e.add(i.toJSON()),t.imageListView=new g({collection:i,name:r,destination:"#"+r,user_id:this.userId,media_id:a,pageName:"home",allItemsInCollection:e}),console.log(t.imageListView.allItemsInCollection),s.layout.transition(r,t.imageListView)}else t.imageListView.allItemsInCollection||(t.imageListView.allItemsInCollection=new n.Collection,t.imageListView.allItemsInCollection.add(o,{at:0})),t.imageListView.allItemsInCollection.add(i.toJSON());i.length<12&&S("[data-uk-scrollspy]").off("uk.scrollspy.inview"),S("[data-uk-scrollspy]").trigger("uk.scrollspy.outview")});for(var f in this.menuValues){if(this.menuValues[f].input)var l=S(this.menuValues[f].src).val();else var l=S(this.menuValues[f].src).text();l!=""?S(this.menuValues[f].target).html(l):S(this.menuValues[f].target).html(this.menuValues[f].defaultValue)}},bindLoadMoreContent:function(){var e=this;if(routing.mobile||1)S("[data-uk-scrollspy]").on("uk.scrollspy.inview",function(t){e.searchPage+=12,e.searchView()}),S("[data-uk-scrollspy]").on("uk.scrollspy.outview",function(e){console.log("OUTVIEW")})},bindCickEvents:function(){var e=this;S(document).on("click",".left-arrow-page-h",function(){e.searchPage-=12,e.searchView()}),S(document).on("click",".right-arrow-page-h",function(){e.searchPage+=12,e.searchView()}),e.bindLoadMoreContent(),e.searchPage==0?S(".left-arrow-page-h").addClass("disable-arrow-link"):S(".left-arrow-page-h").removeClass("disable-arrow-link")},url:function(e){var t=this.baseUrl+"?offset="+this.searchPage+"&";x.extend(this.urlOptions,e);var n=[];return S.each(this.urlOptions,function(e,t){n.push(e+"="+encodeURIComponent(t))}),t+=n.join("&"),this.media_id&&(t+="&media_id="+this.media_id),t},createData:function(){var e=this;e.collections={},e.collections["search-result"]=new c([],{url:e.url(),num:"12",media_id:e.media_id,targetElement:"#search-result"}),e.collections.state=new l,e.collections["top-rated"]=new c([],{url:"/api/user/search",num:"4",targetElement:"#top-rated"}),x.each(e.genderTypes,function(t){e.collections[t]=new f([],{name:t})})},handleDeferreds:function(){var e=this,t=[];x.each(this.collections,function(e,n,r){t.push(e.fetch())}),S.when.apply(S,t).done(e.initSections,e.addSubscribers)},setupImageListView:function(e){var t=new n.Collection;t.add(this.collections[e].toJSON()),this.imageListView=new g({collection:this.collections[e],name:e,destination:"#"+e,user_id:this.userId,media_id:this.media_id,pageName:"home",viewName:e,allItemsInCollection:t}),this.imageListView.render(),this.sections[e]=this.imageListView,this.meta.activeViews.push(e)},setupSportListView:function(e){var t;t=new b({collection:this.collections[e],name:e,id:e,sports_id:this.sports_id,destination:"#sport #"+e}),t.render(),this.sections[e]=t,this.meta.activeViews.push(e)},setUpRegistrationView:function(){var e;this.select_type=new d},setupMenuView:function(){var e=new h,t,n="menu",r=this.urlOptions;r.base=this.base,t=new v({model:e,name:n,destination:"#"+n,options:r}),t.render(),this.sections[n]=t,this.meta.activeViews.push(n)},setupLocationDDView:function(){var e,t="state",n=new p,r="city";this.cityView=new w({model:n,name:r,destination:"#location .city"}),this.cityView.render(),this.sections[r]=this.cityView,this.meta.activeViews.push(r)},setupLayout:function(){var e;return e=new E({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.bindCickEvents(),this.layout}}),r}),define("text!videopreview/templates/basic.html",[],function(){return'<div id="imgUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n\r\n	<div class="modal-header">\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n		<h3 id="label">Video Uploader</h3>\r\n	</div>\r\n\r\n	<div class="modal-body">\r\n		<div id="main-content-img" class="video"></div>\r\n\r\n		<div id="errormsg"></div>\r\n		<div id="preview"></div>\r\n	</div>\r\n\r\n</div>'}),define("videopreview/models/base",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{URL:window.URL||window.webkitURL}),files:[],initialize:function(){!this.URL},playSelectedFile:function(e){var t=this.files[0],n=t.type,r=document.querySelector("video"),i=r.canPlayType(n);i=i===""?"no":i;var s='Can play type "'+n+'": '+i,o=i==="no";this.displayMessage(s,o);if(o)return;var u=this.URL.createObjectURL(t);r.src=u}}),n}),define("videopreview/models/videoup",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({initialize:function(e){},doUpload:function(e){return new plupload.Uploader({runtimes:"html5,gears,flash,silverlight,browserplus",browse_button:"pickfiles",container:"container_plupload",max_file_size:"500mb",max_file_count:1,chunk_size:"5mb",url:e,unique_names:!0,flash_swf_url:"/plupload/js/plupload.flash.swf",silverlight_xap_url:"/plupload/js/plupload.silverlight.xap",filters:[{title:"Video files",extensions:"mov,mp4,mpeg4,avi,mkv,webm,ogg"}],multipart_params:{title:""},init:{ChunkUploaded:function(e,t,n){console.log(t,n)},FileUploaded:function(e,t,n){$("#"+t.id+" b").html("100%"),$("#uploadfiles").removeClass("isUploading"),e.refresh(),$("form.form input").val("");var r=$.parseJSON(n.response);console.log(r),r.result=="success"&&$("#resultdiv").html("SUCCESS! Your video has been uploaded and is now being encoded.  This may take a few minutes.  You will receive an email when the video is ready to view.  If anything goes wrong you can refer to the encode job ID: "+r.jobID).show(),console.log(t,n)}}})}}),n}),define("text!videopreview/templates/upload.html",[],function(){return'<!--<input type="file" id="chooseVideoFile" accept="video/*"/>\r\n<form>\r\n	<div id="container">\r\n		<div id="pickfiles">Find a Video</div>\r\n		<div class="modal-footer">\r\n			<button class="btn fileuploader btn-primary" id="videoup" type="button">Upload</button>\r\n			<button class="btn" data-dismiss="modal"  aria-hidden="true">Close</button>\r\n		</div>\r\n	</div>\r\n</form>-->\r\n\r\n<div id="file_upload"></div>\r\n<form class="form" id="upload_form" method="post">\r\n	<div id="container_plupload">\r\n\r\n	<div style="padding:5px 0 20px 10px;">The video uploader will let you upload large videos to our servers.  Once the upload is finished, it takes a couple minutes for everything to process.\r\n	So nothing will happen right away, but it will be on your profile within a couple minutes of when you hit upload.</div>\r\n	<span class="file-wrapper">\r\n				<div class="qq-upload-button" id="pickfiles" style="float:left; width:95%;">\r\n					<a class="btn-common common-default-sky-dark">Select a Video File</a>\r\n					<span style="font-size:11px; display:block; color:#880000;" id="fileVal"></span>\r\n				</div></span><br/>\r\n		<input type="text" id="title" name="title" style="width:95%" placeholder="Enter a Title"/>\r\n		<label style="margin-bottom: 2px;">Sport</label>\r\n		<select name="sports_id" id="sports_id" style="width:95%;" class="">\r\n			<option value="1">Baseball (Men\'s)</option>\r\n			<option value="2">Basketball (Men\'s)</option>\r\n			<option value="20">Basketball (Women\'s)</option>\r\n			<option value="52">Beach Volleyball (Individual)</option>\r\n			<option value="53">Boxing (Men\'s)</option>\r\n			<option value="54">Boxing (Women\'s)</option>\r\n			<option value="55">Brazilian Jujitsu (Men\'s)</option>\r\n			<option value="56">Brazilian Jujitsu (Women\'s)</option>\r\n			<option value="22">Cheerleading (Women\'s)</option>\r\n			<option value="19">Crew (Men\'s)</option>\r\n			<option value="35">Crew (Women\'s)</option>\r\n			<option value="3">Cross Country (Men\'s)</option>\r\n			<option value="21">Cross Country (Women\'s)</option>\r\n			<option value="74">Crossfit (Individual)</option>\r\n			<option value="72">Cycling (Individual)</option>\r\n			<option value="39">Diving (Men\'s)</option>\r\n			<option value="47">Diving (Women\'s)</option>\r\n			<option value="41">Fencing (Men\'s)</option>\r\n			<option value="42">Fencing (Women\'s)</option>\r\n			<option value="34">Field Hockey (Women\'s)</option>\r\n			<option value="6">Football (Men\'s)</option>\r\n			<option value="82">Golf (Individual)</option>\r\n			<option value="8">Golf (Team) (Men\'s)</option>\r\n			<option value="23">Golf (Team) (Women\'s)</option>\r\n			<option value="36">Gymnastics (Men\'s)</option>\r\n			<option value="43">Gymnastics (Women\'s)</option>\r\n			<option value="9">Hockey (Men\'s)</option>\r\n			<option value="24">Hockey (Women\'s)</option>\r\n			<option value="40">Indoor Track (Men\'s)</option>\r\n			<option value="46">Indoor Track (Women\'s)</option>\r\n			<option value="62">Karate (Men\'s)</option>\r\n			<option value="63">Karate (Women\'s)</option>\r\n			<option value="64">Kickboxing (Men\'s)</option>\r\n			<option value="65">Kickboxing (Women\'s)</option>\r\n			<option value="10">Lacrosse (Men\'s)</option>\r\n			<option value="25">Lacrosse (Women\'s)</option>\r\n			<option value="50">Long Distance Running (Individual)</option>\r\n			<option value="57">MMA (Men\'s)</option>\r\n			<option value="58">MMA (Women\'s)</option>\r\n			<option value="78">Mountain Climbing (Individual)</option>\r\n			<option value="37">Rifle (Men\'s)</option>\r\n			<option value="44">Rifle (Women\'s)</option>\r\n			<option value="7">Rugby (Men\'s)</option>\r\n			<option value="38">Skiing (Men\'s)</option>\r\n			<option value="45">Skiing (Women\'s)</option>\r\n			<option value="11">Soccer (Men\'s)</option>\r\n			<option value="27">Soccer (Women\'s)</option>\r\n			<option value="26">Softball (Women\'s)</option>\r\n			<option value="70">Spartan Race (Individual)</option>\r\n			<option value="48">Squash (Men\'s)</option>\r\n			<option value="49">Squash (Women\'s)</option>\r\n			<option value="76">Surfing (Individual)</option>\r\n			<option value="68">Swimming (Individual)</option>\r\n			<option value="12">Swimming (Team) (Men\'s)</option>\r\n			<option value="28">Swimming (Team) (Women\'s)</option>\r\n			<option value="66">Tennis (Individual)</option>\r\n			<option value="14">Tennis (Team) (Men\'s)</option>\r\n			<option value="30">Tennis (Team) (Women\'s)</option>\r\n			<option value="15">Track and Field (Men\'s)</option>\r\n			<option value="31">Track and Field (Women\'s)</option>\r\n			<option value="51">Triathalon (Individual)</option>\r\n			<option value="16">Volleyball (Men\'s)</option>\r\n			<option value="32">Volleyball (Women\'s)</option>\r\n			<option value="17">Water Polo (Men\'s)</option>\r\n			<option value="33">Water Polo (Women\'s)</option>\r\n			<option value="18">Wrestling (Men\'s)</option>\r\n		</select>\r\n\r\n		<div id="uploadfiles" class="common-default-sky-dark btn-common" style="width:70px;">Upload</div>\r\n		<div id="filelist"></div>\r\n	</div>\r\n</form>\r\n\r\n<div id="resultdiv" style="display: none; padding-left: 10px;"></div></div>'}),function(){function l(){this.returnValue=!1}function c(){this.cancelBubble=!0}var e=0,t=[],n={},r={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},s=/[<>&\"\']/g,o,u=window.setTimeout,a={},f;(function(e){var t=e.split(/,/),n,i,s;for(n=0;n<t.length;n+=2){s=t[n+1].split(/ /);for(i=0;i<s.length;i++)r[s[i]]=t[n]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var h={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,ua:function(){var e=navigator,t=e.userAgent,n=e.vendor,r,i,s;return r=/WebKit/.test(t),s=r&&n.indexOf("Apple")!==-1,i=window.opera&&window.opera.buildNumber,{windows:navigator.platform.indexOf("Win")!==-1,ie:!r&&!i&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),webkit:r,gecko:!r&&/Gecko/.test(t),safari:s,opera:!!i}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return h.each(arguments,function(t,n){n>0&&h.each(t,function(t,n){e[n]=t})}),e},cleanName:function(e){var t,n;n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,""),e},addRuntime:function(e,n){return n.name=e,t[e]=n,t.push(n),n},guid:function(){var t=(new Date).getTime().toString(32),n;for(n=0;n<5;n++)t+=Math.floor(Math.random()*65535).toString(32);return(h.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var n="";return h.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},each:function(e,t){var n,r,i;if(e){n=e.length;if(n===o){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(i=0;i<n;i++)if(t(e[i],i)===!1)return}},formatSize:function(e){return e===o||/\D/.test(e)?h.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function a(e){var t,n,r=0,i=0;return e&&(n=e.getBoundingClientRect(),t=s.compatMode==="CSS1Compat"?s.documentElement:s.body,r=n.left+t.scrollLeft,i=n.top+t.scrollTop),{x:r,y:i}}var n=0,r=0,i,s=document,o,u;e=e,t=t||s.body;if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&s.documentMode<8)return o=a(e),u=a(t),{x:o.x-u.x,y:o.y-u.y};i=e;while(i&&i!=t&&i.nodeType)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;i=e.parentNode;while(i&&i!=t&&i.nodeType)n-=i.scrollLeft||0,r-=i.scrollTop||0,i=i.parentNode;return{x:n,y:r}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return typeof e=="string"&&(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],t=="g"&&(e*=1073741824),t=="m"&&(e*=1048576),t=="k"&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(s,function(e){return i[e]?"&"+i[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},addI18n:function(e){return h.extend(n,e)},translate:function(e){return n[e]||e},isEmptyObj:function(e){if(e===o)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var n;return e.className==""?!1:(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),n.test(e.className))},addClass:function(e,t){h.hasClass(e,t)||(e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return t===" "&&n===" "?" ":""})},getStyle:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle)return window.getComputedStyle(e,null)[t]},addEvent:function(e,t,n){var r,i,s,u;u=arguments[3],t=t.toLowerCase(),f===o&&(f="Plupload_"+h.guid()),e.addEventListener?(r=n,e.addEventListener(t,r,!1)):e.attachEvent&&(r=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=l,e.stopPropagation=c,n(e)},e.attachEvent("on"+t,r)),e[f]===o&&(e[f]=h.guid()),a.hasOwnProperty(e[f])||(a[e[f]]={}),i=a[e[f]],i.hasOwnProperty(t)||(i[t]=[]),i[t].push({func:r,orig:n,key:u})},removeEvent:function(e,t){var n,r,i;typeof arguments[2]=="function"?r=arguments[2]:i=arguments[2],t=t.toLowerCase();if(!(e[f]&&a[e[f]]&&a[e[f]][t]))return;n=a[e[f]][t];for(var s=n.length-1;s>=0;s--)if(n[s].key===i||n[s].orig===r){e.removeEventListener?e.removeEventListener(t,n[s].func,!1):e.detachEvent&&e.detachEvent("on"+t,n[s].func),n[s].orig=null,n[s].func=null,n.splice(s,1);if(r!==o)break}n.length||delete a[e[f]][t];if(h.isEmptyObj(a[e[f]])){delete a[e[f]];try{delete e[f]}catch(u){e[f]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[f]===o||!e[f])return;h.each(a[e[f]],function(n,r){h.removeEvent(e,r,t)})}};h.Uploader=function(e){function f(){var e,t=0,n;if(this.state==h.STARTED){for(n=0;n<i.length;n++)!e&&i[n].status==h.QUEUED?(e=i[n],e.status=h.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e)):t++;t==i.length&&(this.stop(),this.trigger("UploadComplete",i))}}function l(){var e,t;r.reset();for(e=0;e<i.length;e++)t=i[e],t.size!==o?(r.size+=t.size,r.loaded+=t.loaded):r.size=o,t.status==h.DONE?r.uploaded++:t.status==h.FAILED?r.failed++:r.queued++;r.size===o?r.percent=i.length>0?Math.ceil(r.uploaded/i.length*100):0:(r.bytesPerSec=Math.ceil(r.loaded/((+(new Date)-s||1)/1e3)),r.percent=r.size>0?Math.ceil(r.loaded/r.size*100):0)}var n={},r,i=[],s,a=!1;r=new h.QueueProgress,e=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e),h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:i,settings:e,total:r,id:h.guid(),init:function(){function v(){var e=a[p++],t,r,i;if(e){t=e.getFeatures(),r=n.settings.required_features;if(r){r=r.split(",");for(i=0;i<r.length;i++)if(!t[r[i]]){v();return}}e.init(n,function(r){r&&r.success?(n.features=t,n.runtime=e.name,n.trigger("Init",{runtime:e.name}),n.trigger("PostInit"),n.refresh()):v()})}else n.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var n=this,r,a,c,p=0,d;typeof e.preinit=="function"?e.preinit(n):h.each(e.preinit,function(e,t){n.bind(t,e)}),e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url),e.chunk_size=h.parseSize(e.chunk_size),e.max_file_size=h.parseSize(e.max_file_size),n.bind("FilesAdded",function(t,r){var s,a,f=0,l,c=e.filters;c&&c.length&&(l=[],h.each(c,function(e){h.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?l.push("\\.*"):l.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),l=new RegExp(l.join("|")+"$","i"));for(s=0;s<r.length;s++){a=r[s],a.loaded=0,a.percent=0,a.status=h.QUEUED;if(l&&!l.test(a.name)){t.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:a});continue}if(a.size!==o&&a.size>e.max_file_size){t.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:a});continue}i.push(a),f++}if(!f)return!1;u(function(){n.trigger("QueueChanged"),n.refresh()},1)}),e.unique_names&&n.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),r="tmp";n&&(r=n[1]),t.target_name=t.id+"."+r}),n.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,l()}),n.bind("StateChanged",function(e){if(e.state==h.STARTED)s=+(new Date);else if(e.state==h.STOPPED)for(r=e.files.length-1;r>=0;r--)e.files[r].status==h.UPLOADING&&(e.files[r].status=h.QUEUED,l())}),n.bind("QueueChanged",l),n.bind("Error",function(e,t){t.file&&(t.file.status=h.FAILED,l(),e.state==h.STARTED&&u(function(){f.call(n)},1))}),n.bind("FileUploaded",function(e,t){t.status=h.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),u(function(){f.call(n)},1)});if(e.runtimes){a=[],d=e.runtimes.split(/\s?,\s?/);for(r=0;r<d.length;r++)t[d[r]]&&a.push(t[d[r]])}else a=t;v(),typeof e.init=="function"?e.init(n):h.each(e.init,function(e,t){n.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){i.length&&this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),f.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){a=arguments[0]!==o?arguments[0]:!0,this.trigger("DisableBrowse",a)},getFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e)return i[t]},removeFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;return n=i.splice(e===o?0:e,t===o?i.length:t),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t=n[e.toLowerCase()],r,i;if(t){i=Array.prototype.slice.call(arguments),i[0]=this;for(r=0;r<t.length;r++)if(t[r].func.apply(t[r].scope,i)===!1)return!1}return!0},hasEventListener:function(e){return!!n[e.toLowerCase()]},bind:function(e,t,r){var i;e=e.toLowerCase(),i=n[e]||[],i.push({func:t,scope:r||this}),n[e]=i},unbind:function(e){e=e.toLowerCase();var t=n[e],r,i=arguments[1];if(t){if(i!==o){for(r=t.length-1;r>=0;r--)if(t[r].func===i){t.splice(r,1);break}}else t=[];t.length||delete n[e]}},unbindAll:function(){var e=this;h.each(n,function(t,n){e.unbind(n)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},h.File=function(e,t,n){var r=this;r.id=e,r.name=t,r.size=n,r.loaded=0,r.percent=0,r.status=0},h.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},h.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},h.runtimes={},window.plupload=h}(),function(){if(window.google&&google.gears)return;var e=null;if(typeof GearsFactory!="undefined")e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory"),e.getBuildInfo().indexOf("ie_mobile")!=-1&&e.privateSetGlobalObject(this)}catch(t){typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]&&(e=document.createElement("object"),e.style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}if(!e)return;window.google||(window.google={}),google.gears||(google.gears={factory:e})}(),function(e,t,n,r){function s(e,t,n){var r,i,s,o;i=google.gears.factory.create("beta.canvas");try{i.decode(e),t.width||(t.width=i.width),t.height||(t.height=i.height),o=Math.min(width/i.width,height/i.height);if(o<1||o===1&&n==="image/jpeg")return i.resize(Math.round(i.width*o),Math.round(i.height*o)),t.quality?i.encode(n,{quality:t.quality/100}):i.encode(n)}catch(u){}return e}var i={};n.runtimes.Gears=n.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,o){function d(e){var t,s,o=[],u;for(s=0;s<e.length;s++)t=e[s],u=n.guid(),i[u]=t.blob,o.push(new n.File(u,t.name,t.blob.length));r.trigger("FilesAdded",o)}var u,l,h=!1;if(!e.google||!google.gears)return o({success:!1});try{u=google.gears.factory.create("beta.desktop")}catch(p){return o({success:!1})}r.bind("PostInit",function(){var e=r.settings,i=t.getElementById(e.drop_element);i&&(n.addEvent(i,"dragover",function(e){u.setDropEffect(e,"copy"),e.preventDefault()},r.id),n.addEvent(i,"drop",function(e){var t=u.getDragData(e,"application/x-gears-files");t&&d(t.files),e.preventDefault()},r.id),i=0),n.addEvent(t.getElementById(e.browse_button),"click",function(t){var n=[],r,i,s;t.preventDefault();if(h)return;e:for(r=0;r<e.filters.length;r++){s=e.filters[r].extensions.split(",");for(i=0;i<s.length;i++){if(s[i]==="*"){n=[];break e}n.push("."+s[i])}}u.openFiles(d,{singleFile:!e.multi_selection,filter:n})},r.id)}),r.bind("CancelUpload",function(){l.abort&&l.abort()}),r.bind("UploadFile",function(e,t){function v(){function y(r){var i,s="----pluploadboundary"+n.guid(),o="--",u="\r\n",f,h;a&&(l.setRequestHeader("Content-Type","multipart/form-data; boundary="+s),i=google.gears.factory.create("beta.blobbuilder"),n.each(n.extend(m,e.settings.multipart_params),function(e,t){i.append(o+s+u+'Content-Disposition: form-data; name="'+t+'"'+u+u),i.append(e+u)}),h=n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",i.append(o+s+u+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"'+u+"Content-Type: "+h+u+u),i.append(r),i.append(u+o+s+o+u),f=i.getAsBlob(),p=f.length-r.length,r=f),l.send(r)}var s,a=e.settings.multipart,p=0,m={name:t.target_name||t.name},g=e.settings.url;if(t.status==n.DONE||t.status==n.FAILED||e.state==n.STOPPED)return;d&&(m.chunk=r,m.chunks=o),s=Math.min(u,t.size-r*u),a||(g=n.buildUrl(e.settings.url,m)),l=google.gears.factory.create("beta.httprequest"),l.open("POST",g),a||(l.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),l.setRequestHeader("Content-Type","application/octet-stream")),n.each(e.settings.headers,function(e,t){l.setRequestHeader(t,e)}),l.upload.onprogress=function(n){t.loaded=h+n.loaded-p,e.trigger("UploadProgress",t)},l.onreadystatechange=function(){var i;if(l.readyState==4&&e.state!==n.STOPPED)if(l.status==200){i={chunk:r,chunks:o,response:l.responseText,status:l.status},e.trigger("ChunkUploaded",t,i);if(i.cancelled){t.status=n.FAILED;return}h+=s,++r>=o?(t.status=n.DONE,e.trigger("FileUploaded",t,{response:l.responseText,status:l.status})):v()}else e.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:t,chunk:r,chunks:o,status:l.status})},r<o&&y(i[t.id].slice(r*u,s))}var r=0,o,u,h=0,p=e.settings.resize,d;p&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(i[t.id]=s(i[t.id],p,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=i[t.id].length,u=e.settings.chunk_size,d=u>0,o=Math.ceil(t.size/u),d||(u=t.size,o=1),v()}),r.bind("DisableBrowse",function(e,t){h=t}),r.bind("Destroy",function(e){var r,i,s={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in s)i=t.getElementById(s[r]),i&&n.removeAllEvents(i,e.id)}),o({success:!0})}})}(window,document,plupload),function(e,t,n,r){function o(e){var t,n=typeof e,i,s,u;if(e===r||e===null)return"null";if(n==="string")return t="\bb	t\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,n){var r=t.indexOf(n);return r+1?"\\"+t.charAt(r+1):(e=n.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if(n=="object"){i=e.length!==r,t="";if(i){for(s=0;s<e.length;s++)t&&(t+=","),t+=o(e[s]);t="["+t+"]"}else{for(u in e)e.hasOwnProperty(u)&&(t&&(t+=","),t+=o(u)+":"+o(e[u]));t="{"+t+"}"}return t}return""+e}function u(e){var t=!1,n=null,r=null,i,s,o,u,a,f=0;try{try{r=new ActiveXObject("AgControl.AgControl"),r.IsVersionSupported(e)&&(t=!0),r=null}catch(l){var c=navigator.plugins["Silverlight Plug-In"];if(c){i=c.description,i==="1.0.30226.2"&&(i="2.0.30226.2"),s=i.split(".");while(s.length>3)s.pop();while(s.length<4)s.push(0);o=e.split(".");while(o.length>4)o.pop();do u=parseInt(o[f],10),a=parseInt(s[f],10),f++;while(f<o.length&&u===a);u<=a&&!isNaN(u)&&(t=!0)}}}catch(h){t=!1}return t}var i={},s={};n.silverlight={trigger:function(e,t){var r=i[e],s,o;r&&(o=n.toArray(arguments).slice(1),o[0]="Silverlight:"+t,setTimeout(function(){r.trigger.apply(r,o)},0))}},n.runtimes.Silverlight=n.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,l){function E(){return t.getElementById(r.id+"_silverlight").content.Upload}var p,v="",m=r.settings.filters,y,w=t.body;if(!u("2.0.31005.0")||e.opera&&e.opera.buildNumber){l({success:!1});return}s[r.id]=!1,i[r.id]=r,p=t.createElement("div"),p.id=r.id+"_silverlight_container",n.extend(p.style,{position:"absolute",top:"80px",background:r.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:r.settings.shim_bgcolor||t.documentMode>8?"":.01}),p.className="plupload silverlight",r.settings.container&&(w=t.getElementById(r.settings.container),n.getStyle(w,"position")==="static"&&(w.style.position="relative")),w.appendChild(p);for(y=0;y<m.length;y++)v+=(v!=""?"|":"")+m[y].title+" | *."+m[y].extensions.replace(/,/g,";*.");p.innerHTML='<object id="'+r.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+r.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+r.id+",filter="+v+",multiselect="+r.settings.multi_selection+'"/></object>',r.bind("Silverlight:Init",function(){var e,u={};if(s[r.id])return;s[r.id]=!0,r.bind("Silverlight:StartSelectFiles",function(t){e=[]}),r.bind("Silverlight:SelectFile",function(t,r,i,s){var o;o=n.guid(),u[o]=r,u[r]=o,e.push(new n.File(o,i,s))}),r.bind("Silverlight:SelectSuccessful",function(){e.length&&r.trigger("FilesAdded",e)}),r.bind("Silverlight:UploadChunkError",function(e,t,i,s,o){r.trigger("Error",{code:n.IO_ERROR,message:"IO Error.",details:o,file:e.getFile(u[t])})}),r.bind("Silverlight:UploadFileProgress",function(e,t,r,i){var s=e.getFile(u[t]);s.status!=n.FAILED&&(s.size=i,s.loaded=r,e.trigger("UploadProgress",s))}),r.bind("Refresh",function(e){var r,i,s;r=t.getElementById(e.settings.browse_button),r&&(i=n.getPos(r,t.getElementById(e.settings.container)),s=n.getSize(r),n.extend(t.getElementById(e.id+"_silverlight_container").style,{top:i.y+"px",left:i.x+"px",width:s.w+"px",height:s.h+"px"}))}),r.bind("Silverlight:UploadChunkSuccessful",function(e,t,r,i,s){var o,a=e.getFile(u[t]);o={chunk:r,chunks:i,response:s},e.trigger("ChunkUploaded",a,o),a.status!=n.FAILED&&e.state!==n.STOPPED&&E().UploadNextChunk(),r==i-1&&(a.status=n.DONE,e.trigger("FileUploaded",a,{response:s}))}),r.bind("Silverlight:UploadSuccessful",function(e,t,r){var i=e.getFile(u[t]);i.status=n.DONE,e.trigger("FileUploaded",i,{response:r})}),r.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)E().RemoveFile(u[t[n].id])}),r.bind("UploadFile",function(e,t){var r=e.settings,i=r.resize||{};E().UploadFile(u[t.id],e.settings.url,o({name:t.target_name||t.name,mime:n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:r.chunk_size,image_width:i.width,image_height:i.height,image_quality:i.quality||90,multipart:!!r.multipart,multipart_params:r.multipart_params||{},file_data_name:r.file_data_name,headers:r.headers}))}),r.bind("CancelUpload",function(){E().CancelUpload()}),r.bind("Silverlight:MouseEnter",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_hover,i&&s&&n.addClass(i,s)}),r.bind("Silverlight:MouseLeave",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_hover,i&&s&&n.removeClass(i,s)}),r.bind("Silverlight:MouseLeftButtonDown",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_active,i&&s&&(n.addClass(i,s),n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)}))}),r.bind("Sliverlight:StartSelectFiles",function(e){var i,s;i=t.getElementById(r.settings.browse_button),s=e.settings.browse_button_active,i&&s&&n.removeClass(i,s)}),r.bind("DisableBrowse",function(e,t){E().DisableBrowse(t)}),r.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id),delete s[e.id],delete i[e.id],r=t.getElementById(e.id+"_silverlight_container"),r&&w.removeChild(r)}),l({success:!0})})}})}(window,document,plupload),function(e,t,n,r){function o(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}var i={},s={};n.flash={trigger:function(e,t,n){setTimeout(function(){var r=i[e],s,o;r&&r.trigger("Flash:"+t,n)},0)}},n.runtimes.Flash=n.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,r){function p(){return t.getElementById(e.id+"_flash")}function v(){if(l++>5e3){r({success:!1});return}s[e.id]===!1&&setTimeout(v,1)}var u,f,l=0,h=t.body;if(o()<10){r({success:!1});return}s[e.id]=!1,i[e.id]=e,u=t.getElementById(e.settings.browse_button),f=t.createElement("div"),f.id=e.id+"_flash_container",n.extend(f.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),f.className="plupload flash",e.settings.container&&(h=t.getElementById(e.settings.container),n.getStyle(h,"position")==="static"&&(h.style.position="relative")),h.appendChild(f),function(){var r,i;r='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',n.ua.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.ua.ie?(i=t.createElement("div"),f.appendChild(i),i.outerHTML=r,i=null):f.innerHTML=r}(),v(),u=f=null,e.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id),delete s[e.id],delete i[e.id],r=t.getElementById(e.id+"_flash_container"),r&&h.removeChild(r)}),e.bind("Flash:Init",function(){var i={},o;try{p().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(u){r({success:!1});return}if(s[e.id])return;s[e.id]=!0,e.bind("UploadFile",function(t,r){var s=t.settings,o=e.settings.resize||{};p().uploadFile(i[r.id],s.url,{name:r.target_name||r.name,mime:n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:s.chunk_size,width:o.width,height:o.height,quality:o.quality,multipart:s.multipart,multipart_params:s.multipart_params||{},file_data_name:s.file_data_name,format:/\.(jpg|jpeg)$/i.test(r.name)?"jpg":"png",headers:s.headers,urlstream_upload:s.urlstream_upload})}),e.bind("CancelUpload",function(){p().cancelUpload()}),e.bind("Flash:UploadProcess",function(e,t){var r=e.getFile(i[t.id]);r.status!=n.FAILED&&(r.loaded=t.loaded,r.size=t.size,e.trigger("UploadProgress",r))}),e.bind("Flash:UploadChunkComplete",function(e,t){var r,s=e.getFile(i[t.id]);r={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",s,r),s.status!==n.FAILED&&e.state!==n.STOPPED&&p().uploadNextChunk(),t.chunk==t.chunks-1&&(s.status=n.DONE,e.trigger("FileUploaded",s,{response:t.text}))}),e.bind("Flash:SelectFiles",function(t,r){var s,o,u=[],a;for(o=0;o<r.length;o++)s=r[o],a=n.guid(),i[a]=s.id,i[s.id]=a,u.push(new n.File(a,s.name,s.size));u.length&&e.trigger("FilesAdded",u)}),e.bind("Flash:SecurityError",function(t,r){e.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:GenericError",function(t,r){e.trigger("Error",{code:n.GENERIC_ERROR,message:n.translate("Generic error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:IOError",function(t,r){e.trigger("Error",{code:n.IO_ERROR,message:n.translate("IO error."),details:r.message,file:e.getFile(i[r.id])})}),e.bind("Flash:ImageError",function(t,r){e.trigger("Error",{code:parseInt(r.code,10),message:n.translate("Image error."),file:e.getFile(i[r.id])})}),e.bind("Flash:StageEvent:rollOver",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_hover,i&&s&&n.addClass(i,s)}),e.bind("Flash:StageEvent:rollOut",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_hover,i&&s&&n.removeClass(i,s)}),e.bind("Flash:StageEvent:mouseDown",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_active,i&&s&&(n.addClass(i,s),n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)},r.id))}),e.bind("Flash:StageEvent:mouseUp",function(r){var i,s;i=t.getElementById(e.settings.browse_button),s=r.settings.browse_button_active,i&&s&&n.removeClass(i,s)}),e.bind("Flash:ExifData",function(t,n){e.trigger("ExifData",e.getFile(i[n.id]),n.data)}),e.bind("Flash:GpsData",function(t,n){e.trigger("GpsData",e.getFile(i[n.id]),n.data)}),e.bind("QueueChanged",function(t){e.refresh()}),e.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)p().removeFile(i[t[n].id])}),e.bind("StateChanged",function(t){e.refresh()}),e.bind("Refresh",function(r){var i,s,o;p().setFileFilters(e.settings.filters,e.settings.multi_selection),i=t.getElementById(r.settings.browse_button),i&&(s=n.getPos(i,t.getElementById(r.settings.container)),o=n.getSize(i),n.extend(t.getElementById(r.id+"_flash_container").style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"}))}),e.bind("DisableBrowse",function(e,t){p().disableBrowse(t)}),r({success:!0})})}})}(window,document,plupload),function(e){e.runtimes.BrowserPlus=e.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,n){function u(n){var r,s,o=[],u,f;for(s=0;s<n.length;s++)u=n[s],f=e.guid(),i[f]=u,o.push(new e.File(f,u.name,u.size));s&&t.trigger("FilesAdded",o)}function f(){var f=!1;t.bind("PostInit",function(){function h(e,t){r.DragAndDrop.AddDropTarget({id:e},function(n){r.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),u(e)}},function(){})})}function p(){document.getElementById(o).style.top="-1000px"}var n,i=s.drop_element,o=t.id+"_droptarget",l=document.getElementById(i),c;l&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?(n=document.createElement("div"),n.setAttribute("id",o),e.extend(n.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(n),e.addEvent(l,"dragenter",function(t){var n,r;n=document.getElementById(i),r=e.getPos(n),e.extend(document.getElementById(o).style,{top:r.y+"px",left:r.x+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})}),h(o,p)):h(i)),e.addEvent(document.getElementById(s.browse_button),"click",function(t){var n=[],i,o,l=s.filters,c,h;t.preventDefault();if(f)return;e:for(i=0;i<l.length;i++){c=l[i].extensions.split(",");for(o=0;o<c.length;o++){if(c[o]==="*"){n=[];break e}h=e.mimeTypes[c[o]],h&&e.inArray(h,n)===-1&&n.push(e.mimeTypes[c[o]])}}r.FileBrowse.OpenBrowseDialog({mimeTypes:n},function(e){e.success&&u(e.value)})}),l=n=null}),t.bind("CancelUpload",function(){r.Uploader.cancel({},function(){})}),t.bind("DisableBrowse",function(e,t){f=t}),t.bind("UploadFile",function(t,n){function d(i,s){var o;if(n.status==e.FAILED)return;u.name=n.target_name||n.name,f&&(u.chunk=""+i,u.chunks=""+s),o=p.shift(),r.Uploader.upload({url:t.settings.url,files:{file:o},cookies:document.cookies,postvars:e.extend(u,t.settings.multipart_params),progressCallback:function(e){var r,s=0;l[i]=parseInt(e.filePercent*o.size/100,10);for(r=0;r<l.length;r++)s+=l[r];n.loaded=s,t.trigger("UploadProgress",n)}},function(r){var o,u;r.success?(o=r.value.statusCode,f&&t.trigger("ChunkUploaded",n,{chunk:i,chunks:s,response:r.value.body,status:o}),p.length>0?d(++i,s):(n.status=e.DONE,t.trigger("FileUploaded",n,{response:r.value.body,status:o}),o>=400&&t.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:n,status:o}))):t.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic Error."),file:n,details:r.error})})}function v(e){n.size=e.size,f?r.FileAccess.chunk({file:e,chunkSize:f},function(e){if(e.success){var t=e.value,n=t.length;l=Array(n);for(var r=0;r<n;r++)l[r]=0,p.push(t[r]);d(0,n)}}):(l=Array(1),p.push(e),d(0,1))}var s=i[n.id],u={},f=t.settings.chunk_size,l,p=[];o&&/\.(png|jpg|jpeg)$/i.test(n.name)?BrowserPlus.ImageAlter.transform({file:s,quality:o.quality||90,actions:[{scale:{maxwidth:o.width,maxheight:o.height}}]},function(e){e.success&&v(e.value.file)}):v(s)}),n({success:!0})}var r=window.BrowserPlus,i={},s=t.settings,o=s.resize;r?r.init(function(e){var t=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];o&&t.push({service:"ImageAlter",version:"4"}),e.success?r.require({services:t},function(e){e.success?f():n()}):n()}):n()}})}(plupload),function(e,t,n,r){function u(t,n){var r;if(!("FileReader"in e))return n(t.getAsDataURL());r=new FileReader,r.readAsDataURL(t),r.onload=function(){n(r.result)}}function a(t,n){var r;if(!("FileReader"in e))return n(t.getAsBinary());r=new FileReader,r.readAsBinaryString(t),r.onload=function(){n(r.result)}}function f(e,n,r,i){var o,a,f,l,p=this;u(s[e.id],function(s){o=t.createElement("canvas"),o.style.display="none",t.body.appendChild(o),a=o.getContext("2d"),f=new Image,f.onerror=f.onabort=function(){i({success:!1})},f.onload=function(){var t,u,d,m,g;n.width||(n.width=f.width),n.height||(n.height=f.height),l=Math.min(n.width/f.width,n.height/f.height);if(l<1||l===1&&r==="image/jpeg"){t=Math.round(f.width*l),u=Math.round(f.height*l),o.width=t,o.height=u,a.drawImage(f,0,0,t,u);if(r==="image/jpeg"){m=new c(atob(s.substring(s.indexOf("base64,")+7))),m.headers&&m.headers.length&&(g=new h,g.init(m.get("exif")[0])&&(g.setExif("PixelXDimension",t),g.setExif("PixelYDimension",u),m.set("exif",g.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",e,g.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",e,g.GPS())));if(n.quality)try{s=o.toDataURL(r,n.quality/100)}catch(y){s=o.toDataURL(r)}}else s=o.toDataURL(r);s=s.substring(s.indexOf("base64,")+7),s=atob(s),m&&m.headers&&m.headers.length&&(s=m.restore(s),m.purge()),o.parentNode.removeChild(o),i({success:!0,data:s})}else i({success:!1})},f.src=s})}function l(){function n(n,r){var i=e?0:-8*(r-1),s=0,o;for(o=0;o<r;o++)s|=t.charCodeAt(n+o)<<Math.abs(i+o*8);return s}function i(e,n,r){var r=arguments.length===3?r:t.length-n-1;t=t.substr(0,n)+e+t.substr(r+n)}function s(t,n,r){var s="",o=e?0:-8*(r-1),u;for(u=0;u<r;u++)s+=String.fromCharCode(n>>Math.abs(o+u*8)&255);i(s,t,r)}var e=!1,t;return{II:function(t){if(t===r)return e;e=t},init:function(n){e=!1,t=n},SEGMENT:function(e,n,r){switch(arguments.length){case 1:return t.substr(e,t.length-e-1);case 2:return t.substr(e,n);case 3:i(r,e,n);break;default:return t}},BYTE:function(e){return n(e,1)},SHORT:function(e){return n(e,2)},LONG:function(e,t){if(t===r)return n(e,4);s(e,t,4)},SLONG:function(e){var t=n(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var r="";for(t+=e;e<t;e++)r+=String.fromCharCode(n(e,1));return r}}}function c(e){var t={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},n=[],i,s,o=r,u=0,a;i=new l,i.init(e);if(i.SHORT(0)!==65496)return;s=2,a=Math.min(1048576,e.length);while(s<=a){o=i.SHORT(s);if(o>=65488&&o<=65495){s+=2;continue}if(o===65498||o===65497)break;u=i.SHORT(s+2)+2,t[o]&&i.STRING(s+4,t[o].signature.length)===t[o].signature&&n.push({hex:o,app:t[o].app.toUpperCase(),name:t[o].name.toUpperCase(),start:s,length:u,segment:i.SEGMENT(s,u)}),s+=u}return i.init(null),{headers:n,restore:function(e){i.init(e);var t=new c(e);if(!t.headers)return!1;for(var r=t.headers.length;r>0;r--){var o=t.headers[r-1];i.SEGMENT(o.start,o.length,"")}t.purge(),s=i.SHORT(2)==65504?4+i.SHORT(4):2;for(var r=0,u=n.length;r<u;r++)i.SEGMENT(s,0,n[r].segment),s+=n[r].length;return i.SEGMENT()},get:function(e){var t=[];for(var r=0,i=n.length;r<i;r++)n[r].app===e.toUpperCase()&&t.push(n[r].segment);return t},set:function(e,t){var r=[];typeof t=="string"?r.push(t):r=t;for(var i=ii=0,s=n.length;i<s;i++){n[i].app===e.toUpperCase()&&(n[i].segment=r[ii],n[i].length=r[ii].length,ii++);if(ii>=r.length)break}},purge:function(){n=[],i.init(null)}}}function h(){function u(t,n){var i=e.SHORT(t),u,a,f,l,c,h,p,d,v=[],m={};for(u=0;u<i;u++){p=h=t+12*u+2,f=n[e.SHORT(p)];if(f===r)continue;l=e.SHORT(p+=2),c=e.LONG(p+=2),p+=4,v=[];switch(l){case 1:case 7:c>4&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.BYTE(p+a);break;case 2:c>4&&(p=e.LONG(p)+s.tiffHeader),m[f]=e.STRING(p,c-1);continue;case 3:c>2&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.SHORT(p+a*2);break;case 4:c>1&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.LONG(p+a*4);break;case 5:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.LONG(p+a*4)/e.LONG(p+a*4+4);break;case 9:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4);break;case 10:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4)/e.SLONG(p+a*4+4);break;default:continue}d=c==1?v[0]:v,o.hasOwnProperty(f)&&typeof d!="object"?m[f]=o[f][d]:m[f]=d}return m}function a(){var n=r,i=s.tiffHeader;return e.II(e.SHORT(i)==18761),e.SHORT(i+=2)!==42?!1:(s.IFD0=s.tiffHeader+e.LONG(i+=2),n=u(s.IFD0,t.tiff),s.exifIFD="ExifIFDPointer"in n?s.tiffHeader+n.ExifIFDPointer:r,s.gpsIFD="GPSInfoIFDPointer"in n?s.tiffHeader+n.GPSInfoIFDPointer:r,!0)}function f(n,r,o){var u,a,f,l=0;if(typeof r=="string"){var c=t[n.toLowerCase()];for(hex in c)if(c[hex]===r){r=hex;break}}u=s[n.toLowerCase()+"IFD"],a=e.SHORT(u);for(i=0;i<a;i++){f=u+12*i+2;if(e.SHORT(f)==r){l=f+8;break}}return l?(e.LONG(l,o),!0):!1}var e,t,s={},o;return e=new l,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},o={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return s={tiffHeader:10},t===r||!t.length?!1:(e.init(t),e.SHORT(0)===65505&&e.STRING(4,5).toUpperCase()==="EXIF\0"?a():!1)},EXIF:function(){var e;e=u(s.exifIFD,t.exif);if(e.ExifVersion&&n.typeOf(e.ExifVersion)==="array"){for(var r=0,i="";r<e.ExifVersion.length;r++)i+=String.fromCharCode(e.ExifVersion[r]);e.ExifVersion=i}return e},GPS:function(){var e;return e=u(s.gpsIFD,t.gps),e.GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(e,t){return e!=="PixelXDimension"&&e!=="PixelYDimension"?!1:f("exif",e,t)},getBinary:function(){return e.SEGMENT()}}}var s={},o;n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var r,i,s,u,a,f;return i=s=a=f=!1,e.XMLHttpRequest&&(r=new XMLHttpRequest,s=!!r.upload,i=!!r.sendAsBinary||!!r.upload),i&&(u=!!(r.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),a=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!u),f=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),o=n.ua.safari&&n.ua.windows,{html5:i,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:a,pngresize:a,multipart:a||!!e.FileReader||!!e.FormData,canSendBinary:u,cantSendBlobInFormData:!!(n.ua.gecko&&e.FormData&&e.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:s,chunks:f,multi_selection:!n.ua.safari||!n.ua.windows,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,i){function c(e){var t,i,o=[],u,a={};for(i=0;i<e.length;i++){t=e[i];if(a[t.name])continue;a[t.name]=!0,u=n.guid(),s[u]=t,o.push(new n.File(u,t.fileName||t.name,t.fileSize||t.size))}o.length&&r.trigger("FilesAdded",o)}var u,l;u=this.getFeatures();if(!u.html5){i({success:!1});return}r.bind("Init",function(e){var i,s,o=[],u,a,f=e.settings.filters,l,h,d=t.body,v;i=t.createElement("div"),i.id=e.id+"_html5_container",n.extend(i.style,{position:"absolute",background:r.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:r.settings.shim_bgcolor?"":0}),i.className="plupload html5",r.settings.container&&(d=t.getElementById(r.settings.container),n.getStyle(d,"position")==="static"&&(d.style.position="relative")),d.appendChild(i);e:for(u=0;u<f.length;u++){l=f[u].extensions.split(/,/);for(a=0;a<l.length;a++){if(l[a]==="*"){o=[];break e}h=n.mimeTypes[l[a]],h&&n.inArray(h,o)===-1&&o.push(h)}}i.innerHTML='<input id="'+r.id+'_html5"  style="font-size:999px" type="file" accept="'+o.join(",")+'" '+(r.settings.multi_selection&&r.features.multi_selection?'multiple="multiple"':"")+" />",i.scrollTop=100,v=t.getElementById(r.id+"_html5"),e.features.triggerDialog?n.extend(v.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(v.style,{cssFloat:"right",styleFloat:"right"}),v.onchange=function(){var e=window.URL||window.webkitURL;window.fileURL=e.createObjectURL(this.files[0]),c(this.files),this.value=""},s=t.getElementById(e.settings.browse_button);if(s){var m=e.settings.browse_button_hover,g=e.settings.browse_button_active,y=e.features.triggerDialog?s:i;m&&(n.addEvent(y,"mouseover",function(){n.addClass(s,m)},e.id),n.addEvent(y,"mouseout",function(){n.removeClass(s,m)},e.id)),g&&(n.addEvent(y,"mousedown",function(){n.addClass(s,g)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(s,g)},e.id)),e.features.triggerDialog&&n.addEvent(s,"click",function(n){var r=t.getElementById(e.id+"_html5");r&&!r.disabled&&r.click(),n.preventDefault()},e.id)}}),r.bind("PostInit",function(){var e=t.getElementById(r.settings.drop_element);if(e){if(o){n.addEvent(e,"dragenter",function(i){var s,o,u;s=t.getElementById(r.id+"_drop"),s||(s=t.createElement("input"),s.setAttribute("type","file"),s.setAttribute("id",r.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",function(){c(this.files),n.removeEvent(s,"change",r.id),s.parentNode.removeChild(s)},r.id),e.appendChild(s)),o=n.getPos(e,t.getElementById(r.settings.container)),u=n.getSize(e),n.getStyle(e,"position")==="static"&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:u.w+"px",height:u.h+"px",opacity:0})},r.id);return}n.addEvent(e,"dragover",function(e){e.preventDefault()},r.id),n.addEvent(e,"drop",function(e){var t=e.dataTransfer;t&&t.files&&c(t.files),e.preventDefault()},r.id)}}),r.bind("Refresh",function(e){var i,s,o,u,a;i=t.getElementById(r.settings.browse_button),i&&(s=n.getPos(i,t.getElementById(e.settings.container)),o=n.getSize(i),u=t.getElementById(r.id+"_html5_container"),n.extend(u.style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"}),r.features.triggerDialog&&(n.getStyle(i,"position")==="static"&&n.extend(i.style,{position:"relative"}),a=parseInt(n.getStyle(i,"z-index"),10),isNaN(a)&&(a=0),n.extend(i.style,{zIndex:a}),n.extend(u.style,{zIndex:a-1})))}),r.bind("DisableBrowse",function(e,n){var r=t.getElementById(e.id+"_html5");r&&(r.disabled=n)}),r.bind("CancelUpload",function(){l&&l.abort&&l.abort()}),r.bind("UploadFile",function(t,r){function h(e,t,n){var r;if(!File.prototype.slice)return(r=File.prototype.webkitSlice||File.prototype.mozSlice)?r.call(e,t,n):null;try{return e.slice(),e.slice(t,n)}catch(i){return e.slice(t,n-t)}}function p(s){function c(){function S(i){var s=0,f="----pluploadboundary"+n.guid(),h,d="--",v="\r\n",S="";l=new XMLHttpRequest,l.upload&&(l.upload.onprogress=function(e){r.loaded=Math.min(r.size,a+e.loaded-s),t.trigger("UploadProgress",r)}),l.onreadystatechange=function(){var e,s;if(l.readyState==4&&t.state!==n.STOPPED){try{e=l.status}catch(u){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:r,status:e});else{if(m){s={chunk:o,chunks:m,response:l.responseText,status:e},t.trigger("ChunkUploaded",r,s),a+=b;if(s.cancelled){r.status=n.FAILED;return}r.loaded=Math.min(r.size,(o+1)*y)}else r.loaded=r.size;t.trigger("UploadProgress",r),i=p=h=S=null,!m||++o>=m?(r.status=n.DONE,t.trigger("FileUploaded",r,{response:l.responseText,status:e})):c()}}};if(t.settings.multipart&&u.multipart){g.name=r.target_name||r.name,l.open("post",E,!0),n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)});if(typeof i!="string"&&!!e.FormData){h=new FormData,n.each(n.extend(g,t.settings.multipart_params),function(e,t){h.append(t,e)}),h.append(t.settings.file_data_name,i),l.send(h);return}if(typeof i=="string"){l.setRequestHeader("Content-Type","multipart/form-data; boundary="+f),n.each(n.extend(g,t.settings.multipart_params),function(e,t){S+=d+f+v+'Content-Disposition: form-data; name="'+t+'"'+v+v,S+=unescape(encodeURIComponent(e))+v}),w=n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",S+=d+f+v+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(r.name))+'"'+v+"Content-Type: "+w+v+v+i+v+d+f+d+v,s=S.length-i.length,i=S;if(l.sendAsBinary)l.sendAsBinary(i);else if(u.canSendBinary){var x=new Uint8Array(i.length);for(var T=0;T<i.length;T++)x[T]=i.charCodeAt(T)&255;l.send(x.buffer)}return}}E=n.buildUrl(t.settings.url,n.extend(g,t.settings.multipart_params)),l.open("post",E,!0),l.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)}),l.send(i)}var p,d,m,g,y,b,w,E=t.settings.url;if(r.status==n.DONE||r.status==n.FAILED||t.state==n.STOPPED)return;g={name:r.target_name||r.name},i.chunk_size&&r.size>i.chunk_size&&(u.chunks||typeof s=="string")?(y=i.chunk_size,m=Math.ceil(r.size/y),b=Math.min(y,r.size-o*y),typeof s=="string"?p=s.substring(o*y,o*y+b):p=h(s,o*y,o*y+b),g.chunk=o,g.chunks=m):(b=r.size,p=s),t.settings.multipart&&u.multipart&&typeof p!="string"&&f&&u.cantSendBlobInFormData&&u.chunks&&t.settings.chunk_size?(f.onload=function(){S(f.result)},f.readAsBinaryString(p)):S(p)}var o=0,a=0,f="FileReader"in e?new FileReader:null;c()}var i=t.settings,o,c;o=s[r.id],u.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(r.name)?f.call(t,r,t.settings.resize,/\.png$/i.test(r.name)?"image/png":"image/jpeg",function(e){e.success?(r.size=e.data.length,p(e.data)):u.chunks?p(o):a(o,p)}):!u.chunks&&u.jpgresize?a(o,p):p(o)}),r.bind("Destroy",function(e){var r,i,s=t.body,o={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in o)i=t.getElementById(o[r]),i&&n.removeAllEvents(i,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(s=t.getElementById(e.settings.container)),s.removeChild(t.getElementById(o.inputContainer))}),i({success:!0})}})}(window,document,plupload),function(e,t,n,r){function i(e){return t.getElementById(e)}n.runtimes.Html4=n.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,s){r.bind("Init",function(s){function T(){var e,u,l,c;p=n.guid(),v.push(p),e=t.createElement("form"),e.setAttribute("id","form_"+p),e.setAttribute("method","post"),e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"),e.setAttribute("target",s.id+"_iframe"),e.style.position="absolute",u=t.createElement("input"),u.setAttribute("id","input_"+p),u.setAttribute("type","file"),u.setAttribute("accept",g),u.setAttribute("size",1),c=i(s.settings.browse_button),s.features.triggerDialog&&c&&n.addEvent(i(s.settings.browse_button),"click",function(e){u.disabled||u.click(),e.preventDefault()},s.id),n.extend(u.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),n.extend(e.style,{overflow:"hidden"}),l=s.settings.shim_bgcolor,l&&(e.style.background=l),m&&n.extend(u.style,{filter:"alpha(opacity=0)"}),n.addEvent(u,"change",function(t){var o=t.target,a,l=[],h;o.value&&(i("form_"+p).style.top="-1048575px",a=o.value.replace(/\\/g,"/"),a=a.substring(a.length,a.lastIndexOf("/")+1),l.push(new n.File(p,a)),s.features.triggerDialog?n.removeEvent(c,"click",s.id):n.removeAllEvents(e,s.id),n.removeEvent(u,"change",s.id),T(),l.length&&r.trigger("FilesAdded",l))},s.id),e.appendChild(u),o.appendChild(e),s.refresh()}function N(){var r=t.createElement("div");r.innerHTML='<iframe id="'+s.id+'_iframe" name="'+s.id+'_iframe" src="'+l+':&quot;&quot;" style="display:none"></iframe>',u=r.firstChild,o.appendChild(u),n.addEvent(u,"load",function(t){var r=t.target,i,o;if(!c)return;try{i=r.contentWindow.document||r.contentDocument||e.frames[r.id].document}catch(u){s.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),file:c});return}o=i.body.innerHTML,o&&(c.status=n.DONE,c.loaded=1025,c.percent=100,s.trigger("UploadProgress",c),s.trigger("FileUploaded",c,{response:o}))},s.id)}var o=t.body,u,l="javascript",c,h,p,v=[],m=/MSIE/.test(navigator.userAgent),g=[],y=s.settings.filters,w,E,S,x;e:for(w=0;w<y.length;w++){E=y[w].extensions.split(/,/);for(x=0;x<E.length;x++){if(E[x]==="*"){g=[];break e}S=n.mimeTypes[E[x]],S&&n.inArray(S,g)===-1&&g.push(S)}}g=g.join(","),s.settings.container&&(o=i(s.settings.container),n.getStyle(o,"position")==="static"&&(o.style.position="relative")),s.bind("UploadFile",function(e,r){var s,o;if(r.status==n.DONE||r.status==n.FAILED||e.state==n.STOPPED)return;s=i("form_"+r.id),o=i("input_"+r.id),o.setAttribute("name",e.settings.file_data_name),s.setAttribute("action",e.settings.url),n.each(n.extend({name:r.target_name||r.name},e.settings.multipart_params),function(e,r){var i=t.createElement("input");n.extend(i,{type:"hidden",name:r,value:e}),s.insertBefore(i,s.firstChild)}),c=r,i("form_"+p).style.top="-1048575px",s.submit()}),s.bind("FileUploaded",function(e){e.refresh()}),s.bind("StateChanged",function(t){t.state==n.STARTED?N():t.state==n.STOPPED&&e.setTimeout(function(){n.removeEvent(u,"load",t.id),u.parentNode&&u.parentNode.removeChild(u)},0),n.each(t.files,function(e,t){if(e.status===n.DONE||e.status===n.FAILED){var r=i("form_"+e.id);r&&r.parentNode.removeChild(r)}})}),s.bind("Refresh",function(e){var r,s,o,u,f,l,c,h,d;r=i(e.settings.browse_button),r&&(f=n.getPos(r,i(e.settings.container)),l=n.getSize(r),c=i("form_"+p),h=i("input_"+p),n.extend(c.style,{top:f.y+"px",left:f.x+"px",width:l.w+"px",height:l.h+"px"}),e.features.triggerDialog&&(n.getStyle(r,"position")==="static"&&n.extend(r.style,{position:"relative"}),d=parseInt(r.style.zIndex,10),isNaN(d)&&(d=0),n.extend(r.style,{zIndex:d}),n.extend(c.style,{zIndex:d-1})),o=e.settings.browse_button_hover,u=e.settings.browse_button_active,s=e.features.triggerDialog?r:c,o&&(n.addEvent(s,"mouseover",function(){n.addClass(r,o)},e.id),n.addEvent(s,"mouseout",function(){n.removeClass(r,o)},e.id)),u&&(n.addEvent(s,"mousedown",function(){n.addClass(r,u)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(r,u)},e.id)))}),r.bind("FilesRemoved",function(e,t){var n,r;for(n=0;n<t.length;n++)r=i("form_"+t[n].id),r&&r.parentNode.removeChild(r)}),r.bind("DisableBrowse",function(e,n){var r=t.getElementById("input_"+p);r&&(r.disabled=n)}),r.bind("Destroy",function(e){var r,s,u,f={inputContainer:"form_"+p,inputFile:"input_"+p,browseButton:e.settings.browse_button};for(r in f)s=i(f[r]),s&&n.removeAllEvents(s,e.id);n.removeAllEvents(t.body,e.id),n.each(v,function(e,t){u=i("form_"+e),u&&o.removeChild(u)})}),T()}),s({success:!0})}})}(window,document,plupload),define("plupload",["jquery"],function(){}),define("videopreview/views/uploader",["vendor","views","facade","videopreview/models/videoup","text!videopreview/templates/upload.html","plupload"],function(e,t,n,r){var i=require("text!videopreview/templates/upload.html"),s,o=e.$,u=n._,a=t.SectionView,f=e.Mustache;return s=a.extend({name:"Video Preview Form View",id:"videoPreviewForm",template:i,data:i,events:{"change input:file":"play","click #uploadfiles":"uploadFiles"},initialize:function(e){a.prototype.initialize.call(this,e),u.bindAll(this,"beforeRender","render","afterRender");var t=this;this.render=u.wrap(this.render,function(e){return t.beforeRender(),e(),t}),o("#imgUploadModal").modal("show")},beforeRender:function(){console.log("beforeRender")},afterRender:function(){},uploadFiles:function(e){this.uploader=this.model.uploader,console.log(this.uploader,"up");if(o("input#title").val()==""){alert("Please enter a title for this video.");return}this.uploader.settings.multipart_params.name=o("input#title").val(),this.uploader.settings.multipart_params.mm=o("input#mm").is(":checked"),this.uploader.settings.multipart_params.sports_id=o("select#sports_id").val(),o("#uploadfiles").addClass("isUploading"),this.uploader.start(),e.preventDefault()},plupInit:function(){},play:function(e){var t=window.fileURL;Channel("select-video-preview-change").publish(t)},videoUploadClick:function(e){console.log("called",this.file),e.preventDefault(),o("#errormsg").hide(),o("#imageup").attr("disabled","disabled"),Channel("mediaup-add-video").publish(this.file)}}),s}),define("text!videopreview/templates/preview.html",[],function(){return'<video  width="320" height="240" controls autoplay></video>'}),define("videopreview/views/preview",["vendor","views","utils","text!videopreview/templates/preview.html"],function(e,t,n){var r=require("text!videopreview/templates/preview.html"),i,s=e.$,o=t.SectionView;return i=o.extend({name:"Video Preview View",id:"videoPreviewWindow",template:r,data:r,initialize:function(e){o.prototype.initialize.call(this,e),Channel("select-video-preview-change").subscribe(this.changeVideo)},changeVideo:function(e){this.$el.selector&&(document.querySelector(this.$el.selector+" video").src=e)},displayMessage:function(e,t){var n=this.$el.find(".message");n.html(e),n.className=t?"error":"info"}}),i}),define("videopreview",["require","text!videopreview/templates/basic.html","facade","controller","models","views","utils","videopreview/models/base","videopreview/models/videoup","videopreview/views/uploader","videopreview/views/preview"],function(e,t,n,r,i,s,o,u,a,f,l){var c,h=s.LayoutView,p=n.$,d=n._,v=o.debug,m=o.lib.Channel,g=[base_url+"pages/imageup/imageup.css"];return c=r.extend({initialize:function(e){return m("load:css").publish(g),d.bindAll(this),this.handleOptions(e),this.init(e),this},init:function(e){this.url=e.url,this.attr=e.attr,v.log("VideoPreview Init"),this.setupLayout(),this.showVideoPreview()},setupLayout:function(){return this.scheme=[],p("div#modalPopup").remove(),p("body").append('<div id="modalPopup"></div>'),pageLayout=new h({scheme:this.scheme,destination:"#modalPopup",template:t,displayWhen:"ready"}),this.layout=pageLayout,console.log(this.layout),this.layout},showVideoPreview:function(e){var t=new a,n=this,r=new l({name:"Video Preview View",model:t,destination:".modal-body #preview"},this.attr);this.scheme.push(r);var i=new f({name:"Video Upload View",model:t,destination:"#main-content-img"},this.attr);this.scheme.push(i),this.layout.render(),this.afterRender(t)},afterRender:function(e){e.uploader=e.doUpload(this.url),e.uploader.bind("Init",function(e,t){p("#filelist").html("<div></div>")});try{e.uploader.init()}catch(t){alert(t)}e.uploader.bind("FilesAdded",function(t,n){maxCountError=!1,p.each(n,function(n,r){e.uploader.settings.max_file_count&&n>=e.uploader.settings.max_file_count?(maxCountError=!0,setTimeout(function(){t.removeFile(r)},50)):p("#filelist").append('<div id="'+r.id+'">'+r.name+" ("+plupload.formatSize(r.size)+") <b></b>"+"</div>"),maxCountError&&p("#resultdiv").html("You can only select one video at a time.").show()}),t.refresh()}),e.uploader.bind("UploadProgress",function(e,t){p("#"+t.id+" b").html(t.percent+"%")}),e.uploader.bind("Error",function(e,t){p("#filelist").append("<div>Error: "+t.code+", Message: "+t.message+(t.file?", File: "+t.file.name:"")+"</div>"),e.refresh()})},uploadVideo:function(e){alert("inside uploadvideo"),console.log("Called",e);var t=new a({file:e})}}),c}),define("text!game/templates/layout.html",[],function(){return'<div class="template-container">\r\n	<div id="main-header" class="profile-header"></div>\r\n\r\n	<div class="media-add-icons-h"></div>\r\n	<div class="row-fluid" id="main-content">\r\n		<!-- <div id="video-wrap" class="clearfix"></div> -->\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<!--div id="add-media" class="clearfix">add media</div-->\r\n	</div>\r\n\r\n	<div class="green-left-heading">MESSAGE BOARD</div>\r\n	<div id="commenton-wrap" class="clearfix clear commentson-outer-box-h"></div>\r\n	<div id="comment_div" class="clearfix"></div>\r\n	\r\n	<div id="roster-wrap" class="clearfix clear"></div>\r\n	\r\n	<div class="participants-add-icons-h participants-heading-h hide"></div>\r\n	<div id="participants_div" class="clearfix clear"></div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="org-wrap" class="clearfix hide"></div>\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	\r\n	\r\n	\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        <div>MESSAGE BOARD</div>\r\n    	<div class="commentson-outer-box-h clear"></div>\r\n    	<div id="comment_div" class="clearfix"></div>\r\n        \r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n        \r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n       \r\n        \r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>\r\n'}),define("votes/views/vote",["require","text!votes/templates/vote.html","views","vendor","facade","utils","jqueryui","controller","votes/models/vote","votes/models/follow"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("votes/models/vote"),d=e("votes/models/follow");return n=o.extend({template:t,events:{"click .team-action-h":"vote","click .follow-action-h":"follow"},vote:function(e){if(!this.checkForUser()){routing.trigger("showSignup");return}this.voteModelOb.save(),u.when(this.voteModelOb.request).done(function(){u(e.currentTarget).addClass("link-disabled").html("voted")})},follow:function(e){console.log(e);if(!this.checkForUser()){routing.trigger("showSignup");return}this.followModelOb.save(),u.when(this.followModelOb.request).done(function(){u(e.currentTarget).addClass("link-disabled").html("following")}),h("new-fan").publish()},checkForUser:function(){return!a.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},initialize:function(e){var t=this;a.bindAll(this),o.prototype.initialize.call(this,e)},render:function(e,t,n){o.prototype.render.call(this,e,t,n);var r=this.model.get("payload");r.has_voted?this.$el.find(".team-action-h").addClass("link-disabled"):(this.voteModelOb=new p,this.voteModelOb.subject_id=r.id,this.voteModelOb.entity_id=r.enttypes_id,this.voteModelOb.setData()),r.is_following?this.$el.find(".follow-action-h").addClass("link-disabled"):(this.followModelOb=new d,this.followModelOb.subject_id=r.id,this.followModelOb.entity_id=r.enttypes_id)}}),n}),define("game/models/basics",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/game/basics/"+this.id:"/api/game/basics/"+this.id}}),n}),define("game/models/addmedia",["models/base"],function(e){var t;return t=e.extend({defaults:{links:[{label:"Got Pics From this Game?",link:"javascript:void(0);",id:"addPhoto"},{label:"Got Videos From this Game?",link:"javascript:void(0);",id:"addVideo"}]}}),t}),define("sportorg/models/teamroster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{team_id:0,team_name:null,rosters:[{name:null,user_picture:null,grad_year:0,sport_name:null,position:null}]},desc:"Team Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/teamrosters",["facade","collections","sportorg/models/teamroster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(!u.isUndefined(r)&&r!=null&&r){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}e.deferred.resolve(t)}}),s}),define("game/collections/teamrosters",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("game/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/videos/"+this.id:"/api/game/videos/"+this.id}}),r}),define("game/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({limit:8,offset:0,url:function(){return testpath?testpath+"/game/media/"+this.id:"/api/game/media/"+this.id+"?limit="+this.limit+"&offset="+this.offset}}),r}),define("game/collections/participants",["facade","collections","utils"],function(e,t,n){var r=e._,i=t.BaseCollection,s=n.lib.Channel,o=e.Backbone;return i.extend({url:function(){return testpath?testpath+"/game/users/"+this.id:"/api/game/users/"+this.id},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var r in n){var i=new o.Model;i.set("payload",n[r]),i.set("desc",t.desc),i.set("exec_data",t.exec_data),console.log(i),e.push(i)}e.deferred.resolve(t)}})}),define("game/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("game/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/game/comments/"+this.id:"/api/game/comments/"+this.id}}),r}),define("text!game/templates/header.html",[],function(){return'{{#payload}}\r\n<div class="row-fluid">\r\n\r\n	<div class="game-heading">\r\n		<!--div class="sports-h"></div-->\r\n		<a href="javascript: void(0);" class="game-edit-btn-h desktop-link pull-right">Edit Event</a>\r\n		<div class="game-general">\r\n			<!--<div class="stretch"></div>-->\r\n			{{#shared}}\r\n				{{#shared.sport}}<span class="sport-h" data-id="{{sports_id}}">{{shared.sport}}</span>{{/shared.sport}}\r\n				{{#shared.complevel}}<span>{{shared.complevel}}</span>{{/shared.complevel}}\r\n				{{#shared.season}}<span>{{shared.season}}</span>{{/shared.season}}\r\n			{{/shared}}\r\n			{{^shared}}\r\n				{{#event_name}}<span class="sport-h" data-id="{{sports_id}}">{{event_name}}</span>{{/event_name}}\r\n			{{/shared}}\r\n		</div>\r\n		<p>\r\n			{{game_day}} {{game_time}} - {{game_location}}\r\n		</p>\r\n		{{^shared}}<!--a href="javascript: void(0);" class="add-to-event common-btn common-default-sky-dark pull-right" title="Add me to this Event">Add me to this Event</a-->{{/shared}}\r\n\r\n\r\n		<a href="javascript: void(0);" class="game-edit-btn-h mobile-link pull-right">Edit</a>\r\n\r\n\r\n	</div>\r\n\r\n	<ul class="span3 image-outer-h">\r\n			</ul>\r\n\r\n	<!--{{#game_picture}}\r\n	<a href="javascript: void(0);" class="header-image-container image-outer-h">\r\n	<div class="image-item-container">\r\n		<img src="{{game_picture.types.standard_thumb.url}}" alt="{{game_name}}" />\r\n		<div class="action-section">\r\n			{{#game_picture.is_owner}}\r\n			<div class="action-block left-block edit object-edit-h" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>E</span>\r\n			</div>\r\n			<div class="action-block right-block delete object-delete-h" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>D</span>\r\n			</div>\r\n			{{/game_picture.is_owner}}\r\n			{{^game_picture.is_owner}}\r\n			<div class="action-block left-block vote" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>V</span>\r\n			</div>\r\n			<div class="action-block right-block follow" subject-type-id="{{enttypes_id}}" subject-id="{{id}}">\r\n				<span>F</span>\r\n			</div>\r\n			{{/game_picture.is_owner}}\r\n		</div>\r\n	</div> </a>\r\n	{{/game_picture}}-->\r\n\r\n	<ul class="teams-list">\r\n		{{#teams}}\r\n		<li class="team-item">\r\n			<div class=\'score-box score-box-h {{#isWinner}}win{{/isWinner}}\'>\r\n				<a href="javascript: void(0);" title="edit score" class="edit-score-h"> <span class="game-score-el" style="width:100%; height: 100%">{{points_scored}}</span> </a>\r\n				<input type="hidden" value="{{points_scored}}" data-id="{{games_teams_link_id}}" class="edit-score-input-h input-mini game-score-el" />\r\n			</div>\r\n			<div class="org-info">\r\n				<span class="org-name"><a href="/#!team/{{id}}">{{org_sport_link_obj.org.org_name}}, {{complevels_obj.complevel_name}}, {{seasons_obj.season_name}} {{year}}</a></span>\r\n				<span class="org-location"> {{team_location}} </span>\r\n			</div>\r\n		</li>\r\n		{{/teams}}\r\n	</ul>\r\n	<div id="votes-area-h"></div>\r\n</div>\r\n\r\n<div id="modalPopupGameEdit" class="modal photo-frame-model hide fade">\r\n	<div class="modal-header"><span>Update Event Info</span>\r\n		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\r\n			&times;\r\n		</button>\r\n	</div>\r\n	<form action="#" class="update-date-time-h" name="update-date-time">\r\n	<div class="modal-body page-content-h">\r\n\r\n			<div class="row-fluid">\r\n				<label>Event Name</label>\r\n				<input type="text" id="event_name" value="{{event_name}}" />\r\n			</div>\r\n			<div class="row-fluid">\r\n			<label>Date &amp; Time</label>\r\n			<input type="text" class="txt-game-date_h txtDate" placeholder="Enter Date" value="{{gameDay}}" readonly="readonly" />\r\n			<input type="text" class="txt-game-time_h hasDatepicker txtTime"  placeholder="Time" value="{{game_hour}}" placeholder="Time" maxlength="5" />\r\n			<span class="spn-ddl-time-period_h"></span>\r\n			</div>\r\n			<div class="row-fluid"><label>Location</label></div>\r\n			\r\n			<textarea placeholder="Address" class="location-h address-h" rows="3" cols="25">{{game_location}}</textarea>\r\n			<a href="javascript: void(0);" title="Verify Address" class="verify-address-h">Verify Address</a>\r\n			<span class="address-error hide address-error-status-h"></span>\r\n			<div class="view-map-h"></div>\r\n\r\n\r\n	</div>\r\n	<div class="modal-footer"><input type="submit" class="common-btn common-btn-validation" name="submit_edit-form" value="Update" />	</div>\r\n	</form>\r\n</div>\r\n{{/payload}}\r\n'}),define("game/models/score",["models/base"],function(e){return e.extend({url:function(){return testpath?testpath+"/game/score/":"/api/game/score/"+this.gameId+"/?games_teams_link_id="+this.teams_id+"&score="+this.score}})}),define("text!usercontrol/location/templates/layout.html",[],function(){return'<div>\r\n	Location: <textarea placeholder="Address" class="location-h address-h" rows="3" cols="25"></textarea>\r\n	<span class="address-error hide address-error-status-h"></span>\r\n	<a href="javascript: void(0);" class="common-btn common-btn-validation verify-address-h">Verify Address</a>\r\n	<a href="javascript: void(0);" class="common-btn common-btn-direction link-disabled set-address-h">Set Address</a>\r\n	 <div id="map-canvas" style="width: 90%; height: 300px; margin-top: 40px;"></div>\r\n</div>'}),define("usercontrol/location/models/verify-adress",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/location/add?address="+this.address:"/api/location/add?address="+this.address}})}),define("usercontrol/location/models/save",["facade","models/base"],function(e,t){var n=e._;return t.extend({url:function(){return testpath?testpath+"/game/basics/"+this.id:"/api/game/basics/"+this.id}})}),define("usercontrol/location/views/location",["require","text!usercontrol/location/templates/layout.html","facade","views","utils","vendor","usercontrol/location/models/verify-adress","usercontrol/location/models/save"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=e("usercontrol/location/models/verify-adress"),l=e("usercontrol/location/models/save"),c=a.Mustache,h=r.$,p=i.BaseView,d=r.Backbone,v;return d.View.extend({template:t,events:{"click .verify-address-h":"verifyAddress","click .set-address-h":"setLocation"},initialize:function(e){v=this,v.game_id=e.game_id||undefined,v.location=e,v.selectedOptions=[],v.setOptions(e),v.render()},setLocation:function(e){var t=confirm("Are you sure want to set new address?");if(t&&this.locationId){var n=new l;n.id=this.game_id,n.set({locations_id:this.locationId,id:this.game_id}),n.save(),h.when(n.request).done(function(){routing.trigger("popup-close")})}},verifyAddress:function(){var e=this,t=e.$el.find(".address-h").val();e.adressModel=new f,e.adressModel.address=t,e.adressModel.url(),e.adressModel.set({address:t}),e.adressModel.showError=function(t,n){try{e.$el.find(".set-address-h").addClass("link-disabled"),e.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}e.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},e.adressModel.save({dataType:"json"}),e.$el.find(".address-h").removeClass("address-verified"),h.when(e.adressModel.request).done(function(){console.log(e.adressModel.toJSON()),e.locationId=e.adressModel.get("payload").id;if(e.locationId){e.$el.find(".address-error-status-h").addClass("hide"),e.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),e.location.latitude=e.adressModel.get("payload").lat,e.location.latitude=e.adressModel.get("payload").lon,e.$el.find(".set-address-h").removeClass("link-disabled");var t=new google.maps.LatLng(e.adressModel.get("payload").lat,e.adressModel.get("payload").lon);e.marker.setPosition(t),e.map.panTo(t)}})},intializeMap:function(){console.log(v.location);var e=new google.maps.LatLng(v.location.latitude,v.location.longitude),t={zoom:13,center:e,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.$el.find("#map-canvas")[0],t),this.marker=new google.maps.Marker({position:e,map:this.map}),this.marker.setMap(this.map)},render:function(){var e=this,t=c.to_html(e.template,{location:e.locaion});return h(e.el).html(t),setTimeout(function(){e.intializeMap()},1e3),this},setOptions:function(e){for(var t in e)this[t]=e[t]}})}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("vendor/plugins/spin.min",t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}if(r[n]!==undefined)return n}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function c(e,t){return typeof e=="string"?e:e[t%e.length]}function p(e){if(typeof this=="undefined")return new p(e);this.opts=f(e||{},p.defaults,h)}function d(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function h(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)h(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)h(l);return i(t,f)},p.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};p.defaults={},f(p.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(c(t.color,s),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var v=a(r("group"),{behavior:"url(#default#VML)"});return!u(v,"transform")&&v.adj?d():n=u(v,"animation"),p}),define("component/forms",["require","facade","views","utils","vendor","vendor/plugins/qtip/qtip","text!vendor/plugins/qtip/qtip.css","vendor/plugins/spin.min"],function(e){return function(t,n){var r={},s,o=e("facade"),u=e("views"),a=o.Backbone.Model.extend({schema:t}),f=new a,l=(new o.Backbone.Form({model:f,formValues:r})).render();n.append(l.el);if(t){var c=l.getValue();r.fields={};for(var h in c)r.fields[h]={currentValue:function(){return l.fields[h].editor.getValue()},form_field:l.fields[h].editor,deps:l.fields[h].editor.valueBindings?l.fields[h].editor.valueBindings:[],post_to_server:typeof l.fields[h].editor.post_to_server!="undefined"?l.fields[h].editor.post_to_server:!0};r.getFormValues=function(){var e={};if(r.fields)for(var t in r.fields)if(r.fields[t].post_to_server){var n=[];if(r.fields[t].deps&&r.fields[t].deps.length)for(var i in r.fields[t].deps)n.push(l.fields[r.fields[t].deps[i]].editor.getValue()||"");else n.push(l.fields[t].editor.getValue());var s=l.fields[t].editor.serverKey||t;e[s]=n.join(" ")}return e},r.updateUiAfterUpdatingObject=function(e,t){l.fields&&e&&l.fields[e]&&l.fields[e].editor.setValue(t)},r.getFieldValue=function(e){if(l.fields&&e&&l.fields[e]){var t=[];if(r.fields[e].deps&&r.fields[e].deps.length)for(var n in r.fields[e].deps)t.push(l.fields[r.fields[e].deps[n]].editor.getValue()||"");else t.push(l.fields[i].editor.getValue());return t.join(" ")}return undefined},r.updateFormValues=function(e){if(e&&e.objectValuesToUpdate)for(var t in e.objectValuesToUpdate){var n=l.fields[e.objectValuesToUpdate[t]].editor;n.setValue("","")}},r.showServersErrors=function(e){if(l.fields)for(var t in l.fields)if(l.fields[t].editor.serverDbField)for(var n in e)if(e[n].field==l.fields[t].editor.serverDbField){if(l.fields[t].editor.valueBindings&&l.fields[t].editor.valueBindings.length){var r=l.fields[l.fields[t].editor.valueBindings[0]].editor.id;$("#"+r).parents(".field-row").find("*[data-error='']").html(e[n].error).show()}else{var r=l.fields[t].editor.id;$("#"+r).parents(".field-row").find("*[data-error='']").html(e[n].error).show()}break}}}return{form:l,formValues:r}}}),define("game/views/header",["require","text!game/templates/header.html","facade","views","game/models/score","game/models/basics","votes/models/vote","votes/models/follow","usercontrol/location/views/location","usercontrol/location/models/verify-adress","usercontrol/location/models/save","chrome/views/header","usercontrol/dropdown/view/dropdown","media/views/image-item","component/forms","vendor/plugins/dateformat"],function(e,t){var n,r=e("facade"),i=e("views"),s=e("game/models/score"),o=e("game/models/basics"),u=e("votes/models/vote"),a=e("votes/models/follow"),f=e("media/views/image-item"),l=e("usercontrol/location/views/location"),c=e("usercontrol/dropdown/view/dropdown"),h=e("usercontrol/location/models/verify-adress"),p=e("usercontrol/location/models/save"),d=e("component/forms"),v=e("vendor/plugins/dateformat"),m=i.SectionView;return n=m.extend({id:"main-header",template:t,events:{"click .edit-score-h":"editScore","blur .edit-score-input-h":"resumeEditScore","keyup .edit-score-input-h":"adjustFont","click .vote":"vote","click .follow":"follow","click .object-edit-h":"editObject","click .object-delete-h":"deleteObject","submit .update-date-time-h":"updateDateTime","click .game-edit-btn-h":"openEditPopup","click .verify-address-h":"verifyAddress","blur .address-h":"verifyAddress"},messages:{dataNotExist:"Data does not exist . ",selectDateAndTime:"Please select date and time",selectTeam:"Please select team",selectScore:"Please enter score",selectLocation:"Please select location",selectLocationType:"Please select location type",gameFound:"Sweet ! This Event Already Exists ! ",enterEventName:"Please enter event name",selectSport:"Please select sport",selectValidTime:"Please enter valid time in format hh:mm (12 hours)"},location:{lat:undefined,lon:undefined},initialize:function(e){m.prototype.initialize.call(this,e);var t=this.model.get("payload"),n;if(t.teams){if(t.teams.length)try{n=t.teams[0].org_name+" VS "+t.teams[1].org_name,n+=" "+t.shared.complevel}catch(r){n="Game Page"}}else n=t.event_name;n+=" | "+t.shared.sport+" | "+t.game_day,document.title=n,this.setDateFields()},setDateFields:function(){var e=this.model.get("payload"),t=e.game_time;console.log(t);if(t!=undefined)try{var n=t.split(" ");console.log(n),n.length&&(e.game_hour=n[0],e.game_ampm=n[1],console.log("full payload now",e),this.model.set("payload",e))}catch(r){}},adjustFont:function(e){var t=2.2,n=$(e.target).val().length-2,r=n>0?t-.5*n:t-0;r>0&&$(e.target).parents(".team-item").find(".game-score-el").css({"font-size":r+"em"})},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},openEditPopup:function(){if(!this.checkForUser()){routing.trigger("showSignup");return}var e={height:"500px",width:"500px",html:'<div id="editGameForm"></div>',title:"Edit Event Info"};routing.trigger("common-popup-open",e),this.drawEditGameForm()},drawEditGameForm:function(){var e=this,t=e.model.get("payload").time_as_int,n=new Date(t);console.log(t,n);var r=new d({date:{form_values:{defaultValue:v(n,"mmm d, yy"),post_to_server:!1,serverKey:"game_date",serverDbField:"gameDay",objectValuesToUpdate:["game_datetime"],getValue:function(){return this.$el.val()}},fieldClass:"date-picker-field",type:"Text",attr:{placeholder:"Enter Date","class":"txt-game-date_h txtDate"},showLable:!0,label:"Date and Time",bindDatePicker:!0},time:{form_values:{defaultValue:v(n,"h:MM"),post_to_server:!1,serverDbField:"gameTime",serverKey:"game_time",objectValuesToUpdate:["game_datetime"]},type:"Text",fieldClass:"time-picker-field",attr:{placeholder:"Time","class":"txt-game-time_h hasDatepicker txtTime"},showLable:!0,label:"&nbsp;",validators:[{type:"required",message:"Please enter a time"},/^(0?[1-9]|1[012])(:[0-5]\d)?$/]},Day_light:{type:"DropDown",fieldClass:"ampm-field",form_values:{post_to_server:!1,serverKey:"game_ampm",objectValuesToUpdate:["game_datetime"],data:{records:[{payload:{name:"AM",value:"AM"}},{payload:{name:"PM",value:"PM"}}],recordId:"name",recordValue:"value",selectedValue:v(n,"TT")},elementId:"hidden_time_value",callback:function(e){}},showLable:!0,label:"&nbsp;"},game_datetime:{type:"Hidden",form_values:{serverDbField:"game_datetime",valueBindings:["date","time","Day_light"],serverKey:"game_datetime",post_to_server:!0}},eventname:{form_values:{defaultValue:e.model.get("payload").event_name,post_to_server:!0,serverDbField:"event_name",serverKey:"event_name"},type:"Text",fieldClass:"",attr:{placeholder:"Event Name","class":"txt-event-name"},showLable:!0,label:"Event Name"},Location:{form_values:{defaultValue:e.model.get("payload").location.full_address,serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},longitude:e.model.get("payload").location.lon,latitude:e.model.get("payload").location.lat,locationId:e.model.get("payload").location.id,type:"Location",label:"Location",validators:[{type:"required",message:'Please select location and click the "Verify Address" button'}]},users_id:{form_values:{serverKey:e.users_id,post_to_server:!0,value:e.user_id},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Save Changes"},showLable:!1,onSubmit:function(t){var n=routing.showSpinner("input[name=submit]"),r=i.commit();if(r){routing.hideSpinner(n,"input[name=submit]");for(var s in r){var o=$("*[name="+s+"]"),u=o.position();o.parents(".common-modal #modalBody").animate({scrollTop:u.top},"500",function(){o.addClass("focus-error-animation"),setTimeout(function(){o.removeClass("focus-error-animation")},2e3)});break}}else{if(e.formValues)var a=e.formValues.getFormValues();else var a=i.getValue();var a=e.formValues.getFormValues(),f=e;e.model.set({game_datetime:a.game_datetime,locations_id:a.locations_id,event_name:a.event_name}),console.log(f.model),f.model.save({}),$.when(f.model.request).done(function(t){e.updateHeaderData(f.model.id),routing.hideSpinner(n,"input[name=submit]"),routing.trigger("common-popup-close")}),$.when(f.model.request).fail(function(t){var r=JSON.parse(t.responseText),i=r.exec_data.error_array;routing.hideSpinner(n,"input[name=submit]"),e.formValues.showServersErrors(i)})}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel","class":"cancel-btn"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},$("#editGameForm")),i=r.form;this.formValues=r.formValues},editObject:function(){alert("Coming soon")},deleteObject:function(){alert("Coming soon")},gameEditBtn:function(){this.$el.find(".update-date-time-h").removeClass("hide")},updateHeaderData:function(e){var t=this;t.model.id=e,t.model.fetch(),$.when(t.model.request).done(function(){t.setDateFields(),console.error(t.model.toJSON()),$("#modalPopupGameEdit").modal("hide"),t.render()})},cancelDateTimeBtn:function(){this.$el.find(".update-date-time-h").addClass("hide")},afterRender:function(){this.$el.find(".edit-score-input-h").trigger("keyup"),this.$el.find(".image-outer-h").mouseover(function(){$(this).find(".action-block").css({opacity:90})}).mouseout(function(){$(this).find(".action-block").css({opacity:0})}),this.$el.find(".date-time-h").datetimepicker({timeFormat:"hh:mm:ss",dateFormat:"yy-mm-dd",showTimezone:!0,changeMonth:!0,changeYear:!0})},vote:function(e){e.preventDefault(),console.log(this.model);var t=new u;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.setData(),t.save()},follow:function(e){e.preventDefault(),console.log(e.target);var t=new a;t.userId=this.model.id,t.entity_id=this.model.get("payload").enttypes_id,t.save()},editScore:function(e){if(!this.checkForUser()){routing.trigger("showSignup");return}$(e.currentTarget).hide(),$(e.currentTarget).parents(".score-box-h").find(".edit-score-input-h").attr("type","text").focus()},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},resumeEditScore:function(e){var t=new s;t.teams_id=$(e.currentTarget).data("id"),t.score=$(e.target).val(),t.gameId=this.model.id,t.set({id:$(e.target).data("id"),games_teams_link_id:$(e.target).data("id"),score:$(e.target).val()}),t.save(),this.$el.find(".edit-score-input-h").attr("type","hidden"),this.$el.find(".edit-score-h").show(),$.when(t.request).done(function(){$(e.currentTarget).parents(".score-box-h").find(".edit-score-h span").html(t.get("score"))})},childViews:{},render:function(e,t,n){m.prototype.render.call(this,e,t,n),$(this.el).find(".txt-game-date_h").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0});var r=[{payload:{name:"AM",value:"AM"}},{payload:{name:"PM",value:"PM"}}],i={};i.records=r,i.recordId="name",i.recordValue="value";var s=this,o=new c({data:i,elementId:"hdn_time-period_h",destination:".spn-ddl-time-period_h",targetView:s,selectedValue:this.model.get("payload").game_ampm,callback:function(e){}});this.renderImage()},renderImage:function(){this.headerImage=new f({model:this.model}),this.headerImage.render(),this.$el.find(".image-outer-h").html(this.headerImage.$el)}}),n}),define("game/views/add-media",["require","text!media/templates/add-media.html","game/models/addmedia","facade","views","sportorg/models/team"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("sportorg/models/team"),u=r._;return GameAddMediaView=s.extend({id:"add-media",tagName:"ul",template:t,events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","mouseover a":"showText","mouseout a":"showicon"},game_model:{},initialize:function(e){s.prototype.initialize.call(this,e)},showText:function(e){$(e.target).parent().find("span").removeClass("hide")},showicon:function(e){$(e.target).parent().find("span").addClass("hide")},afterRender:function(){var e=this;$ele=this.$el.find(".character-limit-h"),$ele.each(function(){e.adJustFontDynamically($(this))})},openAddvideoPopup:function(e){var t="/api/user/addvideo/"+this.model.id;Channel("add-video").publish(t)},setOptions:function(e){if(!this.model)throw new Error("AddMediaView expects option with model property.")},childViews:{},render:function(e,t,n){s.prototype.render.call(this,e,t,n)},openAddImagePopup:function(e){if(this.game_model.attributes.payload.sports_id>0){var t="/api/game/addimage/"+this.game_model.attributes.id,n={sports_id:this.game_model.attributes.payload.sports_id};routing.trigger("add-image",t,n)}else try{var r=new o({id:this.game_model.attributes.payload.teams[0].id});r.fetch();var i=this;$.when(r.request).done(function(){var e="/api/game/addimage/"+i.game_model.attributes.id,t={sports_id:r.attributes.payload.org_sport_link_obj.sports_id};routing.trigger("add-image",e,t)})}catch(s){alert("Whaaaa...?  It seems like the sport isn't set for this game (weird), which means we can't add the photo.  Shoot an email to support@athletez.com and we'll figure out what went wrong.")}}}),GameAddMediaView}),define("game/views/commenton-list",["facade","utils","site/views/comment-list","profile/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({name:"games comments on view",initialize:function(e){o.bindAll(this),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){alert("refresh"),s(e)})}}),s}),define("text!sportorg/templates/teamroster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n        <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n        {{name}} \'{{grad_year}}<br/>\r\n        {{sport_name}}<br/>\r\n        {{position}}<br/>\r\n        {{team_name}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/teamroster-item",["vendor","views","utils","text!sportorg/templates/teamroster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"teamroster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/teamroster-list",["facade","views","utils","sportorg/views/teamroster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"teamroster-list",name:"Team Roster List",tagName:"ul",_tagName:"li",_className:"teamroster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("TeamRosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("game/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/game/addvideo/"+this.id:"/api/game/addvideo?game_id="+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gameaddvideo:fetch").publish(e)}}),r}),define("game/views/add-video",["require","game/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/video-list",["facade","utils","media/views/video-list","game/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gameaddvideo:fetch").subscribe(i)}}),i}),define("game/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({defaults:{payload:{}},url:function(){return testpath?testpath+"/game/commentform/"+this.id:"/api/game/commentform/"+this.id},initialize:function(e,n){i.bindAll(this),t.prototype.initialize.call(e,n)},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("gamecommentform:fetch").publish(e)}}),r}),define("game/views/comment-form",["require","game/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("GameCommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id}),this.model.fetch())}}),r}),define("game/views/comment-list",["facade","utils","site/views/comment-list","game/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("gamecommentform:fetch").subscribe(i)}}),i}),define("text!roster/templates/roster.html",[],function(){return'<div class="roster-heading-h"></div>\r\n<!--div class="clear"><a href="javascript: void(0);" class="hide add-to-roster-h" title="Add to roster">Add to Roster</a></div-->\r\n<div  class="clear roster-images-h"></div>'}),define("roster/collections/roster",["facade","sportorg/collections/teamrosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/roster/"+this.id:"/api/team/roster/"+this.id}}),r}),define("roster/views/image-list",["facade","utils","media/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",tagName:"ul",currentSection:"rosters",extra_id:"test",setupAddView:function(){}}),r}),define("text!common/templates/add-roster-buttons.html",[],function(){return'<a href="javascript: void(0);" {{#data.subject_id}}data-subject-id="{{data.subject_id}}"{{/data.subject_id}}data-tip-style="qtip-athletez qtip-team" data-content="Click here to add yourself to {{#data.team_name}} {{data.team_name}}{{/data.team_name}}{{^data.team_name}} this team{{/data.team_name}}" class="add-to-roster-list add-icon desktop-link add-to-roster-list-h"></a>\r\n<a href="javascript: void(0);" {{#data.subject_id}}data-subject-id="{{data.subject_id}}"{{/data.subject_id}}data-tip-style="qtip-athletez qtip-fb-c" data-content="Click here to invite friends from facebook that play for {{#data.team_name}} {{data.team_name}}{{/data.team_name}}{{^data.team_name}} this team{{/data.team_name}}" class="invite-from-fb desktop-link add-icon invite-roster-from-fb-h"></a>\r\n\r\n\r\n<a href="javascript: void(0);" {{#data.subject_id}}data-subject-id="{{data.subject_id}}"{{/data.subject_id}}data-tip-style="qtip-athletez qtip-team" data-content="Click here to add yourself to {{#data.team_name}} {{data.team_name}}{{/data.team_name}}{{^data.team_name}} this team{{/data.team_name}}" class="add-to-roster-list common-btn common-default-comment-light-blue mobile-link add-icon add-to-roster-list-h">ADD</a>\r\n<a href="javascript: void(0);" {{#data.subject_id}}data-subject-id="{{data.subject_id}}"{{/data.subject_id}}data-tip-style="qtip-athletez qtip-fb-c" data-content="Click here to invite friends from facebook that play for {{#data.team_name}} {{data.team_name}}{{/data.team_name}}{{^data.team_name}} this team{{/data.team_name}}" class="invite-from-fb common-btn common-default-comment-blue mobile-link add-icon invite-roster-from-fb-h">INVITE</a>\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-question" data-content="This is a team roster.  It lists all athletes on {{#data.team_name}} {{data.team_name}}{{/data.team_name}}{{^data.team_name}} this team{{/data.team_name}}." data-page="roster" class="question add-icon"></a>'}),define("roster/views/roster",["require","text!roster/templates/roster.html","views","vendor","facade","utils","jqueryui","controller","roster/models/roster","roster/collections/roster","roster/views/image-list","component/fb","common/views/add-media-buttons","text!common/templates/add-roster-buttons.html"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("vendor"),c=l.Mustache,h=s.lib.Channel,p=e("component/fb"),d=e("roster/models/roster"),v=e("roster/views/image-list"),m=e("roster/collections/roster"),g=e("common/views/add-media-buttons"),y=e("text!common/templates/add-roster-buttons.html");return n=o.extend({template:t,events:{"click .add-to-roster-h":"addToRoster","mouseover a.tiles":"showText","mouseout a.tiles":"showicon","click .invite-team-player-h":"inviteFBFriend"},showText:function(e){u(e.target).parent().find("span").removeClass("hide")},showicon:function(e){u(e.target).parent().find("span").addClass("hide")},afterRender:function(){var e=this,t=setInterval(function(){$ele=e.$el.find(".character-limit-h"),$ele.length&&(clearInterval(t),$ele.each(function(){e.adJustFontDynamically(u(this))}))},100)},inviteFBFriend:function(e){var t=this,n={};n.subject_id=this.team_id,n.enttype_id=this.entityId,routing.trigger("fbInvite",undefined,n)},initialize:function(e){var t=this;e.mainView=this,this.mainView=this,o.prototype.initialize.call(this,e),console.log("roster view",e),t.team_id=e.team_id,t.teamName=e.teamName,t.entityId=e.entityId,t.team_name=e.team_name,t.controllerObject=e.controllerObject,t.viewName=e.viewName||"Image List"+Math.random(),a.bindAll(this),t.getTeams()},getTeams:function(){var e=this;e.team_id&&(e.collection1=new m,e.collection1.id=e.team_id,e.collection1.fetch(),u.when(e.collection1.request).done(function(){e.setupTeamRosterListView()}))},setupTeamRosterListView:function(){var e,t=!1;e=new v({collection:this.collection1,name:this.viewName,mainView:this,dontrenderTemplate:!0,model:new d,teamName:this.teamName,extra_id:this.team_id});if(this.checkForUser())try{var n=this.collection1.toArray();for(var r in n)if(parseInt(n[r].attributes.payload.id)===parseInt(routing.loggedInUserId)){t=!0;break}}catch(i){}this.$el.find(".roster-images-h").html(e.$el),t&&this.$el.find(".roster-heading-h").find(".add-to-roster-list-h").addClass("link-disabled")},checkForUser:function(){return!a.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},addToRoster:function(e){var t=routing.showSpinner(e.currentTarget),n=this,r=new d,i=function(i){r.url="/api/team/player/"+n.team_id,r.save(),u.when(r.request).done(function(){routing.hideSpinner(t,e.currentTarget),u(e.currentTarget).addClass("link-disabled"),n.getTeams(),i&&i()})};n.checkForUser()?i():routing.trigger("showSignup",function(e){i(function(){e&&e()})})},render:function(e,t,n){o.prototype.render.call(this,e,t,n);var r=new g({target:this.$el.find(".roster-heading-h"),heading:this.team_name,team_id:this.team_id,team_name:this.team_name,entityId:this.entityId,subject_id:this.team_id,addToRoster:this.addToRoster,template:y,inviteData:{invite_type:"join",subject_id:this.team_id,enttypes_id:this.entityId}})}}),n}),define("text!common/templates/add-participants-buttons.html",[],function(){return'<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-orange" data-content="Add me to the list for &quot;{{data.message.event_name}}&quot;" class="add-participants add-icon desktop-link add-to-participants-list-h"></a>\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-fb-c" data-content="Invite a friend from facebook to participate in &quot;{{data.message.event_name}}&quot;" class="invite-from-fb desktop-link add-icon invite-participant-from-fb-h"></a>\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-orange" data-content="Add me to the list for &quot;{{data.message.event_name}}&quot;" class="add-participants common-btn common-default-game-orange mobile-link add-to-participants add-to-participants-list-h">ADD ME</a>\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-fb-c" data-content="Invite a friend from facebook to participate in &quot;{{data.message.event_name}}&quot;" class="invite-from-fb common-btn common-default-comment-blue mobile-link add-icon invite-participant-from-fb-h">INVITE</a>\r\n\r\n\r\n\r\n<a href="javascript: void(0);" data-tip-style="qtip-athletez qtip-question" data-content="" data-page="participants" class="question add-icon"></a>'}),define("text!game/templates/participats-list.html",[],function(){return'<div class="clear">\r\n\r\n</div>\r\n<ul class="image-list">\r\n</ul>\r\n\r\n<!--a href="javascript: void(0);" class="add-comment">Add Comment</a>\r\n<a href="javascript: void(0);" class="add-media">Add Media</a-->\r\n\r\n\r\n<!--{{#target}}\r\n<div class="image-drop-area-outer">\r\n	<div class="image-drop-area" id="image-place-holder">\r\n		<div class="drop-text">DROP PHOTOS HERE</div>\r\n		<div>OR CLICK TO UPLOAD</div>\r\n	</div>\r\n</div>\r\n{{/target}}-->\r\n\r\n<div class="clear"><a href="javascript: void(0);" class="see-more-h">More</a></div>\r\n'}),define("game/views/participants-list",["facade","views","utils","media/views/image-item","text!game/templates/participats-list.html","sportorg/models/uslgamelink","common/models/add","component/fb","component/forms","common/views/add-description"],function(e,t,n,r,i,s,o){var u,a,f=e.$,l=e._,c=require("vendor"),h=n.lib.Channel,p=require("component/fb"),d=t.CollectionView,v=t.SectionView,m=require("component/forms"),g=c.Mustache,y=require("common/views/add-description"),b=d.extend(v.prototype);return b.extend({__super__:d.prototype,template:i,_tagName:"li",_className:"image",page:0,page_limit:8,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore","mouseover a.tiles":"showText","mouseout a.tiles":"showicon","click .invite-to-fb-h":"inviteFBFriend"},showText:function(e){f(e.target).parent().find("span").removeClass("hide")},showicon:function(e){f(e.target).parent().find("span").addClass("hide")},inviteFBFriend:function(e){var t=this,n={},r=function(){n.subject_id=t.game_id,n.enttype_id=t.controllerObject.basics.get("payload").enttypes_id,routing.trigger("fbInvite",undefined,n)};t.checkForUser()?r():routing.trigger("showSignup",function(e){r(function(){e&&e()})})},renderTemplate:function(){var e=g.to_html(this.template,{target:this.target_id});return console.log(e),this.$el.html(e),this},afterRender:function(){var e=this,t=setInterval(function(){$ele=e.$el.find(".character-limit-h"),$ele.length&&(clearInterval(t),$ele.each(function(){e.adJustFontDynamically(f(this))}))},100);this.$el.find(".edit-h").on("click",this.editResults)},editResults:function(e){e.preventDefault(),e.stopPropagation();if(f(e.target)[0].tagName=="SPAN")var t=f(e.target).parent().attr("subject-id");else var t=f(e.target).attr("subject-id");if(!this.checkForUser())routing.trigger("showSignup",function(e){addToList(function(){e&&e()})});else{var n={height:"500px",width:"500px",html:'<div id="addParticipantForm"></div>',title:"Edit My Times"};routing.trigger("common-popup-open",n),this.drawAddParticipantForm(t)}},addParticipant:function(){if(!this.checkForUser())routing.trigger("showSignup",function(e){addToList(function(){e&&e()})});else{var e={height:"500px",width:"500px",html:'<div id="addParticipantForm"></div>',title:"Add Me to This Event"};routing.trigger("common-popup-open",e),this.drawAddParticipantForm()}},drawAddParticipantForm:function(e){var t=this,n=!1,r=new s,i=function(){var e=new m({result_time:{form_values:{defaultValue:n?r.get("payload").result_time:"",post_to_server:!0,serverDbField:"result_time",serverKey:"result_time"},type:"Text",fieldClass:"",attr:{placeholder:"00:00:00","class":"txt-result-time"},showLable:!0,label:"Result Time"},bibnumber:{form_values:{defaultValue:n?r.get("payload").bib_number:"",post_to_server:!0,serverDbField:"bib_number",serverKey:"bib_number"},type:"Text",fieldClass:"",attr:{placeholder:"0","class":"txt-bib-number"},showLable:!0,label:"Bib Number"},games_id:{form_values:{serverKey:"games_id",serverDbField:"games_id",post_to_server:!0,value:t.game_id},type:"Hidden"},sports_id:{form_values:{serverKey:"sports_id",serverDbField:"sports_id",post_to_server:!0,value:t.sport_id},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Save Changes"},showLable:!1,onSubmit:function(e){var s=i.commit();if(s)for(var u in s){var a=f("*[name="+u+"]"),c=a.position();a.parents(".common-modal #modalBody").animate({scrollTop:c.top},"500",function(){a.addClass("focus-error-animation"),setTimeout(function(){a.removeClass("focus-error-animation")},2e3)});break}else{if(t.formValues)var h=t.formValues.getFormValues();else var h=i.getValue();var h=t.formValues.getFormValues();r.set({games_id:h.games_id,sports_id:h.sports_id,result_time:h.result_time,bib_number:h.bib_number}),r.save(),f.when(r.request).done(function(){var e=r.toJSON(),i=new o;i.processItemFromResponse(e.payload.usl.user),routing.trigger("common-popup-close"),t.$el.find(".add-to-event").addClass("link-disabled"),n||(t.collection.add(i),t.collection.length==1&&t.controllerObject&&t.controllerObject.reloadParticipants&&l.isFunction(t.controllerObject.reloadParticipants)&&t.controllerObject.reloadParticipants())}),f.when(r.request).fail(function(e){var n=JSON.parse(e.responseText),r=n.exec_data.error_array;t.formValues.showServersErrors(r)})}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel","class":"cancel-btn"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},f("#addParticipantForm")),i=e.form;t.formValues=e.formValues};e?(r.set("id",e),r.fetch(),f.when(r.request).done(function(){n=!0,i()})):i()},initialize:function(t){var n=this;routing.off("add-to-event"),routing.on("add-to-event",function(){if(!n.checkForUser()){routing.trigger("showSignup");return}n.addParticipant()}),f(".participants-heading-h").removeClass("hide"),t.name?this.name=t.name:this.name="image list",t.collecton&&(this.collection=t.collection),this.controllerObject=t.controllerObject,this.controller=t.controller,this.sports_id=t.sports_id,this.game_id=this.collection.id,this.mainView=this,t.mainView=this,this.renderTemplate();if(!this.collection.limit){n.allData=this.collection.toArray();var r=n.allData.length;n.start=0,n.end=n.page_limit,n.page_limit=8}var r=n.collection.length;(!r||r<n.collection.limit)&&n.$el.find(".see-more-h").hide(),console.log("PL",r,n.collection);if(!r){var i=e.Backbone.Model.extend({});new y({page:"participants",target:this.$el,model:new i,teamName:this.teamName,name:"view - "+Math.random()})}else{var s=this.collection.toArray(),o=!1;for(var u in s)routing.loggedInUserId==s[u].id&&(o=!0)}this.target_id=t.target_id,this.target_url=t.target_url,this.sport_id=t.sport_id,console.error(t);var n=this;n.allData=this.collection.toArray(),n.seeMore(),d.prototype.initialize.call(this,t);if(!this.collection)throw new Error("ImageListView expected options.collection.");l.bindAll(this),this.addSubscribers(),this.setupAddView(),setTimeout(function(){},0)},showAddButton:function(){this.$el.find(".add-to-event").removeClass("link-disabled")},seeMore:function(e){var t=this.allData.length,n=this.page*this.page_limit,r=n+this.page_limit;t<=r&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(n,r)):this.collection.reset(this.allData.slice(n,r)),this.page++,e&&(this.addSubscribers&&this.addSubscribers(),this.setupAddView&&this.setupAddView())},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},childViews:{},setupAddView:function(){function i(e){n.model=e,n.render(),f(this.listView).append(n.el)}var e,t=this,n=new AddImageView({collection:this.collection}),r=this.addChildView(n);this.childViews.form=n,this.callbacks.add(function(){r()}),h("addimage:fetch").subscribe(i)},filterWithImageType:function(e){var t=this.collection;return f.each(t.models,function(t,n){n.selectImageType&&n.selectImageType(e)}),t}})}),define("game/views/participants-list-main",["facade","views","utils","game/views/participants-list"],function(e,t,n,r){return r.extend({imagetype:"large_thumb",setupAddView:function(){}})}),define("game",["require","text!game/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","game/models/basics","game/models/addmedia","game/collections/teamrosters","game/collections/videos","game/collections/images","game/collections/participants","game/collections/comments","game/collections/commentson","game/views/header","game/views/add-media","game/views/commenton-list","sportorg/views/teamroster-list","game/views/video-list","profile/views/image-video-list","game/views/comment-list","game/views/commenton-list","roster/views/roster","common/views/add-media-buttons","text!common/templates/add-media-buttons.html","text!common/templates/add-participants-buttons.html","game/views/participants-list-main"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("game/models/basics"),l=e("game/models/addmedia"),c=e("game/collections/teamrosters"),h=e("game/collections/videos"),p=e("game/collections/images"),d=e("game/collections/comments"),v=e("game/collections/commentson"),m=e("game/collections/participants"),g=e("game/views/header"),y=e("game/views/add-media"),b=e("sportorg/views/teamroster-list"),w=e("game/views/video-list"),E=e("profile/views/image-video-list"),S=e("game/views/comment-list"),x=e("game/views/commenton-list"),T=e("media/models/image"),N=e("roster/views/roster"),C=e("common/views/add-media-buttons"),k=e("text!common/templates/add-media-buttons.html"),L=e("text!common/templates/add-participants-buttons.html"),A=e("game/views/participants-list-main"),O=u.LayoutView,M=i.$,_=i._,D=a.debug,P=a.lib.Channel,H=[base_url+"pages/game/game.css"];return r=s.extend({rosterViewsCount:0,initialize:function(e){return P("load:css").publish(H),_.bindAll(this),this.scheme=[],e.params&&this.setParamsArray(e.params),this.handleOptions(e),this.init(),this},handleOptions:function(e){this.id=e.gameId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds(),this.handleClickEvents()},handleClickEvents:function(){M(document).off("click",".green-left-heading"),M(document).on("click",".green-left-heading",function(){M(this).hasClass("down-arrow-heading")?(M(this).removeClass("down-arrow-heading"),M(this).next().slideUp(),M(this).next().attr("id")=="commenton-wrap"&&M(this).next().next().slideUp(),M(this).parent().parent().next().slideUp()):(M(this).addClass("down-arrow-heading"),M(this).next().slideDown(),M(this).next().attr("id")=="commenton-wrap"&&M(this).next().next().slideDown(),M(this).parent().parent().next().slideDown())})},createData:function(){this.basics=new f({id:this.id}),this.basics.targetElement="#main",this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id},handleDeferreds:function(){var e=this;M.when(this.basics.request).done(function(){e.setupHeaderView();var t=e.basics.get("payload"),n=t.enttypes_id;e.images=new p,e.images.id=e.id,e.images.targetElement="#image-wrap",e.images.fetch();var r=t.teams,i=r?r.length:0;for(var s=0;s<i;s++)e.setupRosterView(r[s].id,r[s].org_sport_link_obj.org.name,r[s].enttypes_id);e.commentson=new v,e.commentson.subject_entity_type=n,e.commentson.id=e.id,e.commentson.targetElement="#commenton-wrap",e.commentson.fetch(),console.error(e.basics.get("payload"));var o=e.basics.get("payload"),u=!_.isUndefined(o.teams)&&o.teams?o.teams.length:0;e.teamsCount=u,u||(e.participants=new m,e.participants.id=e.id,e.participants.targetElement="#roster-wrap",e.participants.fetch(),M.when(e.participants.request).done(function(){e.setupParticipantsListView()})),M.when(e.commentson.request).done(function(){e.setupCommentsOnListView()}),M.when(e.images.request).done(function(){e.setupImageListView()})})},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupRosterView:function(e,t,n){M("#roster_wrap_"+this.rosterViewsCount).length||M("#roster-wrap").append('<div id="roster_wrap_'+this.rosterViewsCount+'" class="clear"></div>');var r,s=i.Backbone.Collection.extend({});r=new N({model:new s,team_id:e,entityId:n,team_name:t,controllerObject:this,name:"roster images"+Math.random()*Math.random(),destination:"#roster_wrap_"+this.rosterViewsCount,teamName:this.basics.get("payload").game_name}),this.scheme.push(r),this.layout.render(),this.rosterViewsCount++},setupHeaderView:function(){var e;e=new g({model:this.basics,name:"Header",destination:"#main-header"}),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(e){var t;t=new y({model:this.addmedia,name:"Add Media",destination:e,controllerObject:this}),t.game_model=this.basics,this.scheme.push(t),this.layout.render()},reloadParticipateView:function(){var e=this,t;this.participantsView&&(M(this.participantsView.destination).html(""),t=M.inArray(this.participantsView,this.scheme),~t&&this.scheme.splice(t,1)),e.participants.fetch(),M.when(e.participants.request).done(function(){e.setupParticipantsListView()})},reloadParticipants:function(){var e=this,t;this.participantsView&&(M(this.participantsView.destination).html(""),t=M.inArray(this.participantsView,this.scheme),~t&&this.scheme.splice(t,1)),e.participants.fetch(),M.when(e.participants.request).done(function(){e.setupParticipantsListView()})},setupParticipantsListView:function(){var e=this,t=new C({target:".participants-add-icons-h",heading:"PARTICIPANTS",template:L,controllerObject:e,inviteData:{invite_type:"join",subject_id:e.basics.get("payload").id,enttypes_id:e.basics.get("payload").enttypes_id},message:{event_name:e.basics.get("payload").game_name}});this.participantsView=new A({collection:this.participants,name:"participants view",controller:this,controllerObject:this,sport_id:this.basics.get("payload").sports_id,destination:"#participants_div",teamName:this.basics.get("payload").game_name}),this.scheme.push(this.participantsView),this.layout.render()},setupTeamRosterListView:function(){M("#roster_wrap_"+this.rosterViewsCount).length||M("#roster-wrap").append('<div id="#roster_wrap_'+this.rosterViewsCount+'" class="clear"></div>');var e;e=new E({collection:this.teamrosters,name:"roster images",destination:"#roster_wrap_"+this.rosterViewsCount,teamName:this.basics.get("payload").game_name}),this.scheme.push(e),this.layout.render(),this.rosterViewsCount++},setupTeamRosterSecondListView:function(){var e;e=new E({collection:this.teamrostersSecond,name:"roster roster second images",destination:"#roster-second-wrap",teamName:this.basics.get("payload").game_name}),this.scheme.push(e),this.layout.render()},setupVideoListView:function(){var e;e=new w({collection:this.videos,destination:"#video-wrap"}),this.scheme.push(e),this.layout.render()},setupImageListView:function(){var e=this,t,n=new C({target:".media-add-icons-h",heading:"PHOTO/VIDEO",template:k,page_base:"game",ent_id:e.id,sports_id:M(".sport-h").data("id"),controllerObject:e,model:e.addmedia,message:{photo:"Got Pics From this Game?",video:"Got Videos From this Game?"}});routing.off("setup-add-icons"),routing.on("setup-add-icons",function(t){e.setupAddMediaView(t)}),t=new E({collection:this.images,name:"image list",target_id:this.id,controllerObject:this,target_url:"/api/game/addimage/",sport_id:M(".sport-h").data("id"),destination:"#image-wrap",media_id:this.media_id,pageName:"game",triggerItem:"setup-add-icons",teamName:this.basics.get("payload").game_name}),this.imageListView=t,routing.off("image-upload-success"),routing.on("image-upload-success",function(t){e.updateImages(t)}),this.scheme.push(t),this.layout.render()},reloadImages:function(){var e=this,t;this.imageListView&&(M(this.imageListView.destination).html(""),t=M.inArray(this.imageListView,this.scheme),~t&&this.scheme.splice(t,1)),e.images.fetch(),M.when(e.images.request).done(function(){e.setupImageListView()})},updateImages:function(e){var t=new T;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t),this.imageListView.allData&&this.imageListView.allData.push(t.toJSON()),this.imageListView.collection.length==1&&this.reloadImages()},setupCommentListView:function(){},setupCommentsOnListView:function(){var e;e=new x({collection:this.commentson,userId:this.userId,destination:".commentson-outer-box-h",name:"games comment on view"}),this.scheme.push(e),this.layout.render()},setupLayout:function(){var e;return e=new O({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r}),define("text!team/templates/layout.html",[],function(){return'<div class="template-container team-template-outer">\r\n<div id="main-header"></div>\r\n\r\n<div id="team-image-container" class="team-image-container">\r\n	<ul id="team-image-container-ul"></ul>\r\n</div>\r\n<div id="menu-container"></div>\r\n\r\n<div class="green-left-heading">MESSAGE BOARD</div>\r\n<div  class="clearfix clear commentson-outer-box-h profile-comment-list-box"></div>\r\n<div id="comment_div" class="clearfix"></div>\r\n\r\n\r\n<div class="media-add-icons-h"></div>\r\n	<div class="row-fluid" id="main-content">\r\n		<div id="image-wrap" class="clearfix clear">\r\n		</div>\r\n		<!--div id="add-media" class="clearfix">add media</div-->\r\n	</div>\r\n	\r\n	<div class="row-fluid">\r\n		<div class="span4" id="main-sidebar">\r\n			<div id="related-wrap" class="clearfix"></div>\r\n			<div  class="clearfix"></div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="games-add-icons-h game-green-heading hide">GAMES</div>\r\n	<div id="games_div" class="clearfix">\r\n	</div>\r\n	\r\n	<div class="fans-add-icons-h"></div>\r\n	<div id="fans-div" class="clearfix clear">&nbsp;</div>\r\n\r\n	<div id="roster-wrap" class="clearfix clear"></div>\r\n\r\n<div id="votes-area-h"></div>\r\n<!--div class="row-fluid">\r\n    <div class="span4" id="main-sidebar">\r\n    \r\n        <div id="add-media" class="clearfix">\r\n        </div>\r\n        \r\n        Upcoming<br/>\r\n        <div id="upcoming-schedule" class="clearfix">\r\n        </div>\r\n        \r\n        Recent<br/>\r\n        <div id="recent-schedule" class="clearfix">        \r\n        </div>\r\n        \r\n        <a href="#">Missing a Game?</a>\r\n        \r\n        <div id="competitor-teams" class="clearfix">\r\n        </div>\r\n    \r\n    </div>\r\n    <div class="span8" id="main-content">\r\n    	\r\n    	\r\n    	\r\n        Roster\r\n        <div id="roster-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Videos\r\n        <div id="video-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        Photos\r\n        <div id="image-wrap" class="clearfix">\r\n        </div>\r\n        \r\n        FanBoard\r\n        <div id="comment-wrap" class="clearfix">\r\n        </div>\r\n        \r\n    </div>\r\n</div-->\r\n\r\n<div id="main-footer">\r\n\r\n</div>\r\n</div>'}),define("team/models/basics",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/team/basics/"+this.id:"/api/team/basics/"+this.id}}),n}),define("team/models/addmedia",["models/base"],function(e){var t;return t=e.extend({id:undefined,sportName:undefined,firstName:undefined,defaults:{links:[{label:"Got pics of "+this.teamName,link:"javascript:void(0);",id:"addPhoto"},{label:"Got videos of "+this.teamName,link:"javascript:void(0);",id:"addVideo"}],userid:null},setData:function(){this.set({links:[{label:"Got pics of "+this.teamName,link:"javascript:void(0);",id:"addPhoto"},{label:"Got videos of "+this.teamName,link:"javascript:void(0);",id:"addVideo"}],userid:null})}}),t}),define("team/collections/upcoming_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/upcoming_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/upcoming_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/recent_schedules",["facade","sportorg/collections/games","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/recent_schedules/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/recent_schedules/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/competitor_teams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/competitor_teams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/competitor_teams/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("sportorg/models/roster",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,user_picture:null,grad_year:0,sport_name:null,position:null,num_votes:0,num_followers:0},desc:"Roster information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/rosters",["facade","collections","sportorg/models/roster","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/rosters",["facade","sportorg/collections/rosters","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/rosters/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/rosters/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/videos",["facade","media/collections/videos","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/videos/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/videos/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/images",["facade","media/collections/images","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({limit:8,offset:0,url:function(){return testpath?testpath+"/team/media/"+this.team_id+"/"+this.sport_id:"/api/team/media/"+this.team_id+"?sport_id="+this.sport_id+"&limit="+this.limit+"&offset="+this.offset}}),r}),define("team/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id}}),r}),define("team/collections/commentson",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id:"/api/team/comments/"+this.id}}),r}),define("team/collections/orgs",["facade","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/games/"+this.id:"/api/team/games/"+this.id}}),r}),define("team/collections/fans",["facade","media/collections/images","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/team/followers/"+this.id+"/"+this.sport_id:"/api/team/followers/"+this.id+"?sport_id="+this.sport_id}}),r}),define("text!team/templates/header.html",[],function(){return'\r\n{{#payload}}\r\n<div class="row-fluid">\r\n	\r\n	<div class="profile-heading">\r\n            <h3 class="username">{{org_sport_link_obj.org.org_name	}}</h3>\r\n            <h4>{{org_sport_link_obj.sport.sport_name}} | {{complevels_obj.complevel_name}} | {{seasons_obj.season_name}} \'{{year}}</h4>\r\n            <a href="javascript: void(0);" id="editTeamLink" title="Edit Team">Edit Team</a>\r\n            \r\n            <div id="votes-area-h"></div>\r\n    </div>\r\n	\r\n    <!--div class="span4 textcenter">\r\n        {{#picture}}\r\n        <img src="{{picture}}" alt="{{name}}" />\r\n        {{/picture}}\r\n    </div>\r\n    <div class="span8">\r\n        <div>\r\n            <h3 class="teamname">{{name}}</h3>\r\n            <div class="teamloaction">{{location}}</div>\r\n            <div class="votes">Votes: {{num_votes}}</div>\r\n            <div class="followers">Followers: {{num_followers}}</div>\r\n        </div>\r\n        <div id="sports-info"></div>\r\n    </div-->\r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/sport-select.html",[],function(){return'<select name="sport" id="select-sport">\r\n{{#payload}}\r\n    <option value="{{sport_id}}">{{sport_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("team/collections/sports",["facade","sportorg/collections/sports","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/sports/"+this.id:"/api/org/sports/"+this.id}}),r}),define("text!team/templates/sport-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="sport-info sport-info-{{sport_id}}" style="display:none">\r\n    <div class="complevels"></div>     \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/complevel-select.html",[],function(){return'<select name="complevel" class="select-complevel">\r\n{{#payload}}\r\n    <option value="{{complevel_id}}">{{complevel_name}}</option>    \r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/collections/complevels",["facade","collections","sportorg/models/complevel","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload||[];for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),s}),define("team/collections/complevels",["facade","sportorg/collections/complevels","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/complevels/"+this.id+"/"+this.sport_id:"/api/org/complevels/"+this.id+"?sports_id="+this.sport_id}}),r}),define("text!team/templates/complevel-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="complevel-info complevel-info-{{sport_id}}-{{complevel_id}}" style="display:none">\r\n    <div class="seasons"></div>     \r\n</div>\r\n{{/payload}}\r\n\r\n'}),define("text!team/templates/seasonteam-select.html",[],function(){return'<select name="season" id="select-season">\r\n{{#payload}}\r\n    <option value="{{seasons_id}}">{{seasons_obj.season_name}} {{year}}</option>\r\n{{/payload}}\r\n</select>\r\n'}),define("sportorg/models/season",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,season_name:null},desc:"Season information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/seasons",["facade","collections","sportorg/models/season","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},ParseForDropdown:function(){return this.toJSON()}}),s}),define("team/collections/seasons",["facade","sportorg/collections/seasons","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasons/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasons/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("team/collections/seasonteams",["facade","sportorg/collections/teams","utils"],function(e,t,n){var r,i=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/org/seasonteams/"+this.id+"/"+this.sport_id+"/"+this.complevel_id:"/api/org/seasonteams/"+this.id+"?sports_id="+this.sport_id+"&complevels_id="+this.complevel_id}}),r}),define("text!team/templates/season-item.html",[],function(){return'\r\n{{#payload}}\r\n<div class="season-info season-info-{{sport_id}}-{{complevel_id}}-{{season_id}}" style="display:none">\r\n    \r\n</div>            \r\n{{/payload}}\r\n\r\n'}),define("team/views/season-item",["vendor","views","utils","text!team/templates/season-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=n.lib.Channel,i=o.extend({tagName:"li",className:"complevel",initialize:function(e){function o(){a("refresh-teampage").publish(n,i,s)}this.template=r;var t=this;this.id=e.model.collection.id;var n=this.model.collection.sport_id,i=this.model.collection.complevel_id,s=this.model.get("payload").season_id;a("teamseasons:select"+n+"-"+i+"-"+s).subscribe(o)},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}});return i}),define("team/views/season-list",["facade","views","utils","team/views/season-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"season-list",name:"Season List",tagName:"ul",_tagName:"li",_className:"season",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SeasonListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/complevel-item",["vendor","views","utils","text!team/templates/complevel-item.html","text!team/templates/seasonteam-select.html","team/collections/seasons","team/collections/seasonteams","team/views/season-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/season-list"),h=require("team/collections/seasons");return SeasonTeamList=require("team/collections/seasonteams"),o=a.extend({tagName:"li",className:"complevel",rendered:!1,events:{"change #select-season":"selectSeason"},initialize:function(e){function n(){if(t.rendered){t.selectSeason();return}t.rendered=!0,t.initList()}this.template=r,this.selectSeasonTemplate=s;var t=this;this.id=e.model.collection.id;var i=this.model.collection.sport_id;l("teamcomplevels:select"+i+"-"+this.model.get("payload").complevel_id).subscribe(n)},initList:function(){var e=this;this.seasons=new SeasonTeamList,this.seasons.id=this.id,this.seasons.sport_id=this.model.collection.sport_id,this.seasons.complevel_id=this.model.get("payload").complevel_id,this.seasons.fetch();var t=this.seasons.sport_id,n=this.seasons.complevel_id;u.when(this.seasons.request).done(function(){e.setupSeasonListView(t,n),l("teamseasons"+t+"-"+n+":fetch").publish(),e.select_season=e.$("#select-season"),e.selectSeason()})},setupSeasonListView:function(e,t){function s(){r.render(),n.$el.find(".seasons").html(r.el);var e={payload:[]},t=r.collection;if(t.length){for(i=0;i<t.length;i++)e.payload[i]=t.at(i).get("payload");var s=f.to_html(n.selectSeasonTemplate,e);n.$el.find(".seasons").prepend(s)}else n.$el.find(".seasons").html("")}var n=this,r=new c({collection:this.seasons});l("teamseasons"+e+"-"+t+":fetch").subscribe(s)},render:function(){var e=this.model.collection.sport_id,t=this.model.get("payload");t.sport_id=e,this.model.set("payload",t);var n=f.to_html(this.template,this.model.toJSON());return this.$el.html(n),this},selectSeason:function(){var e=this.select_season.val(),t=this.model.collection.sport_id,n=this.model.get("payload").complevel_id;this.$(".season-info").stop().slideUp(),this.$(".season-info-"+t+"-"+n+"-"+e).stop().slideDown(),l("teamseasons:select"+t+"-"+n+"-"+e).publish()}}),o}),define("team/views/complevel-list",["facade","views","utils","team/views/complevel-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return TeamComplevelListAbstract=f.extend(l.prototype),i=TeamComplevelListAbstract.extend({__super__:f.prototype,id:"complevel-list",name:"Complevel List",tagName:"ul",_tagName:"li",_className:"complevel",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ComplevelListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/sport-item",["vendor","views","utils","text!team/templates/sport-item.html","text!team/templates/complevel-select.html","team/collections/complevels","team/views/complevel-list"],function(e,t,n,r,s){var o,u=e.$,a=t.BaseView,f=e.Mustache,l=n.lib.Channel,c=require("team/views/complevel-list"),h=require("team/collections/complevels");return o=a.extend({tagName:"li",className:"sport",rendered:!1,events:{"change #select-complevel":"selectComplevel"},initialize:function(e){function n(){if(t.rendered){t.selectComplevel();return}t.rendered=!0,t.initList()}this.template=r,this.selectComplevelTemplate=s;var t=this;this.id=e.model.collection.id,l("teamsports:select"+this.model.get("payload").sport_id).subscribe(n)},initList:function(){var e=this;this.complevels=new h,this.complevels.id=this.id,this.complevels.sport_id=this.model.get("payload").sport_id,this.complevels.fetch();var t=this.complevels.sport_id;u.when(this.complevels.request).done(function(){e.setupComplevelListView(t),l("teamcomplevels"+t+":fetch").publish(),e.select_complevel=e.$("#select-complevel"),e.selectComplevel()})},setupComplevelListView:function(e){function r(){n.render(),t.$el.find(".complevels").html(n.el);var e={payload:[]},r=n.collection;if(r.length){for(i=0;i<r.length;i++)e.payload[i]=r.at(i).get("payload");var s=f.to_html(t.selectComplevelTemplate,e);t.$el.find(".complevels").prepend(s)}else t.$el.find(".complevels").html("")}var t=this,n=new c({collection:this.complevels});l("teamcomplevels"+e+":fetch").subscribe(r)},render:function(){var e=f.to_html(this.template,this.model.toJSON());return this.$el.html(e),this},selectComplevel:function(){var e=this.select_complevel.val(),t=this.model.get("payload").sport_id;this.$(".complevel-info").stop().slideUp(),this.$(".complevel-info-"+t+"-"+e).stop().slideDown(),l("teamcomplevels:select"+t+"-"+e).publish()}}),o}),define("team/views/sport-list",["facade","views","utils","team/views/sport-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"sport-list",name:"Sport List",tagName:"ul",_tagName:"li",_className:"sport",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("SportListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/header",["require","text!team/templates/header.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","sportorg/models/org","team/collections/seasonteams","component/forms","team/collections/complevels"],function(e,t,n){var r,s=e("facade"),o=e("views"),u=e("team/models/basics"),a=e("sportorg/models/org"),f=o.SectionView,l=e("team/views/sport-list"),c=e("team/collections/sports"),h=e("usercontrol/dropdown/view/dropdown"),p=e("team/collections/seasonteams"),d=e("team/collections/complevels"),v=e("component/forms"),m=e("utils"),g=m.lib.Channel,y=e("vendor"),b=y.Mustache,w=s.$,E=s._;return r=f.extend({template:t,selectSportTemplate:n,events:{"click #editTeamLink":"openEditPopup"},initialize:function(e){this.controllerObject=e.controllerObject,f.prototype.initialize.call(this,e),E.bindAll(this)},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){var t=this;t.model.id!=e&&(t.model.id=e,t.model.fetch(),w.when(t.model.request).done(function(){t.render();var e=t.model.get("payload"),n=e.id,r=e.org_sport_link_obj.org.name;t.controllerObject.setupRosterView(n,r),t.controllerObject.showVote()}))},showAllTeamData:function(){routing.trigger("refresh-teampage",w("#sports-h").val(),w("#team-h").val(),this.season.id)},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=b.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new l({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),g("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},getName:function(){var e=this.model.get("payload").org_name;return this.model.get("payload").complevels_obj.complevel_name&&(e+=" | "+this.model.get("payload").complevels_obj.complevel_name),this.model.get("payload").org_sport_link_obj.sport.sport_name&&(e+=" | "+this.model.get("payload").org_sport_link_obj.sport.sport_name),this.model.get("payload").seasons_obj.season_name&&(e+=" | "+this.model.get("payload").seasons_obj.season_name),this.model.get("payload").year&&(e+=" | "+this.model.get("payload").year),e},openEditPopup:function(){if(!this.checkForUser()){routing.trigger("showSignup");return}var e={height:"500px",width:"500px",html:'<div id="editTeamForm"></div>',title:"Edit Organization Info"};routing.trigger("common-popup-open",e),this.drawEditTeamForm()},drawEditTeamForm:function(){var e=this,t=e.model.get("payload").org_sport_link_obj.org,n=t.locations,r=new v({orgname:{form_values:{defaultValue:t.name,post_to_server:!0,serverDbField:"name",serverKey:"name"},type:"Text",fieldClass:"",attr:{placeholder:"Event Name","class":"txt-org-name"},showLable:!0,label:"Organization Name"},Location:{form_values:{defaultValue:n.full_address,serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},longitude:n.lon,latitude:n.lat,locationId:n.id,type:"Location",label:"Location",validators:[{type:"required",message:'Please select location and click the "Verify Address" button'}]},users_id:{form_values:{serverKey:e.users_id,post_to_server:!0,value:e.user_id},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Save Changes"},showLable:!1,onSubmit:function(n){var r=routing.showSpinner("input[name=submit]"),s=i.commit();if(s){routing.hideSpinner(r,"input[name=submit]");for(var o in s){var u=w("*[name="+o+"]"),f=u.position();u.parents(".common-modal #modalBody").animate({scrollTop:f.top},"500",function(){u.addClass("focus-error-animation"),setTimeout(function(){u.removeClass("focus-error-animation")},2e3)});break}}else{if(e.formValues)var l=e.formValues.getFormValues();else var l=i.getValue();var l=e.formValues.getFormValues(),c=e,h=new a({id:t.id});console.log(h),h.set({locations_id:l.locations_id,name:l.name}),h.save({}),w.when(h.request).done(function(t){e.updateHeaderData(c.model.id),routing.hideSpinner(r,"input[name=submit]"),routing.trigger("common-popup-close")}),w.when(h.request).fail(function(t){var n=JSON.parse(t.responseText),i=n.exec_data.error_array;routing.hideSpinner(r,"input[name=submit]"),e.formValues.showServersErrors(i)})}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel","class":"cancel-btn"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},w("#editTeamForm")),i=r.form;this.formValues=r.formValues},updateHeaderData:function(e){var t=this;t.model.id=e,t.model.fetch(),w.when(t.model.request).done(function(){t.render()})},childViews:{},render:function(e,t,n){document.title=this.getName(),f.prototype.render.call(this,e,t,n)}}),r}),define("team/views/add-media",["require","text!media/templates/add-media.html","profile/models/addmedia","facade","views"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=r._;return n=s.extend({template:t,tagName:"div",id:"add-media",events:{"click #addPhoto":"openAddImagePopup","click #addVideo":"openAddvideoPopup","click #addGame":"openAddGamePopup","mouseover a":"showText","mouseout a":"showicon"},showText:function(e){$(e.target).parent().find("span").removeClass("hide")},showicon:function(e){$(e.target).parent().find("span").addClass("hide")},setOptions:function(e){if(!this.model)throw new Error("ProfileAddMediaView expects option with model property.");this.model.userid=e.userid},afterRender:function(){var e=this;$ele=this.$el.find(".character-limit-h"),$ele.each(function(){e.adJustFontDynamically($(this))})},openAddGamePopup:function(){routing.trigger("add-game",this.model.userid)},openAddImagePopup:function(e){var t=$("#sports-h").val(),n=$("#team-h").val(),r="/api/team/addimage/"+n,r="/api/team/addimage/"+n,i={sports_id:t};routing.trigger("add-image",r,i)},openAddvideoPopup:function(e){var t="/api/user/addvideo/"+this.model.id;Channel("add-video").publish(t)}}),n}),define("text!sportorg/templates/competitorteam-item.html",[],function(){return'\r\n{{#payload}}\r\n    <h3>{{name}}</h3>\r\n    <img src="{{picture}}" alt="{{name}}"/><br/>\r\n    {{sport}}<br/>\r\n    {{complevel}}<br/>\r\n    {{season}}<br/>\r\n    <br/><br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/competitorteam-item",["vendor","views","utils","text!sportorg/templates/competitorteam-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"team",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/competitorteam-list",["facade","views","utils","sportorg/views/competitorteam-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"team-list",name:"Team List",tagName:"ul",_tagName:"li",_className:"team",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CompetitorTeamListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/views/commentof-list",["facade","utils","site/views/comment-list"],function(e,t,n){var r;return r=n.extend({name:"team Commentof List",setupFormView:function(){}}),r}),define("team/views/commenton-form",["require","text!site/templates/comment-form.html","profile/models/commentonform","site/views/comment-form","models/base","views"],function(e,t,n,r,i){var s,o=e("views"),u=o.BaseView;return s=u.extend({initialize:function(e){this.$el.unbind(),_.bindAll(this),this.setOptions(),u.prototype.initialize.call(this,e)},el:"#comment_div",template:t,name:"Comment Form",events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox"},setOptions:function(e){if(!this.collection)throw new Error("ProfileCommentOnFormView expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},submitHandler:function(e){e.preventDefault();if(!this.checkForUser()){routing.trigger("showSignup");return}this.createOnEnter(e)},showCommentBox:function(){var e=this.$el.find(".add-comment-form-h");console.log(e),e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")},refreshComments:function(e){this.$("#new-comment").val("")},dateFormat:function(e){var t=["January","February","March","April","May","June","july","August","September","October","November","December"];e=new Date(e);var n=t[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear();return n},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.subject_type_id=this.collection.subject_entity_type,r.subject_id=this.model.get("id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/comment/add/":"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email;var u=n.dateFormat(date);s.comment_date=u,s.timePosted=u,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.trigger("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return u.prototype.render.call(this),this.input=this.$("#new-comment"),this.collection.length||$(".add-comment-h").trigger("click"),this}}),s}),define("team/views/commenton-list",["facade","utils","site/views/comment-list","team/views/commenton-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),e.name&&(this.name=e.name),this.options.collection=this.collection,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function i(e){console.log("Comments callback",e.user_pic_small),t.model=e,t.render()}function s(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){i(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){s(e)})}}),s}),define("text!sportorg/templates/roster-item.html",[],function(){return'\r\n{{#payload}}\r\n    <img src="{{user_picture}}" alt="{{name}}"/><br/>\r\n    {{name}} \'{{grad_year}}<br/>\r\n    {{sport_name}}<br/>\r\n    {{position}}<br/>\r\n    {{team_name}}<br/>\r\n    {{num_votes}} Votes<br/>\r\n    {{num_followers}} Followers<br/>\r\n{{/payload}}\r\n\r\n'}),define("sportorg/views/roster-item",["vendor","views","utils","text!sportorg/templates/roster-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"roster",initialize:function(e){this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());return this.$el.html(e),this}}),i}),define("sportorg/views/roster-list",["facade","views","utils","sportorg/views/roster-item"],function(e,t,n,r){var i,s,o=e.$,u=e._,a=n.lib.Channel,f=t.CollectionView,l=t.SectionView;return s=f.extend(l.prototype),i=s.extend({__super__:f.prototype,id:"roster-list",name:"Roster List",tagName:"ul",_tagName:"li",_className:"roster",_view:r,initialize:function(e){f.prototype.initialize.call(this,e);if(!this.collection)throw new Error("RosterListView expected options.collection.");u.bindAll(this),this.addSubscribers()}}),i}),define("team/models/addvideo",["facade","media/models/video","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addvideo/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addvideo?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddvideo:fetch").publish(e)}}),r}),define("team/views/add-video",["require","team/models/addvideo","media/views/add-video"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("TeamAddVideoView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/video-list",["facade","utils","media/views/video-list","team/views/add-video"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){function i(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),s("teamaddvideo:fetch").subscribe(i)}}),i}),define("team/models/addimage",["facade","media/models/image","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/addimage/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/addimage?team_id="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamaddimage:fetch").publish(e)}}),r}),define("team/views/add-image",["require","team/models/addimage","media/views/add-image"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("AddImageView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/image-list",["facade","utils","media/views/image-list","team/views/add-image"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupAddView:function(){var e=this}}),i}),define("team/models/commentform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/team/comments/"+this.id+"/"+this.sport_id+"/"+this.complevel_id+"/"+this.season_id:"/api/team/comments/"+this.id+"?id1="+this.id+"&sport_id="+this.sport_id+"&complevel_id="+this.complevel_id+"&season_id="+this.season_id},initialize:function(e,n){t.prototype.initialize.call(e,n),this.sport_id=e.sport_id,this.complevel_id=e.complevel_id,this.season_id=e.season_id},fetchSuccess:function(e,n){t.prototype.fetchSuccess.call(this,e,n),s("teamcommentform:fetch").publish(e)}}),r}),define("team/views/comment-form",["require","team/models/commentform","site/views/comment-form"],function(e,t,n){var r;return r=n.extend({setOptions:function(e){if(!this.collection)throw new Error("CommentFormView expected options.collection.");this.model||(this.model=new t({id:this.collection.id,sport_id:this.collection.sport_id,complevel_id:this.collection.complevel_id,season_id:this.collection.season_id}),this.model.fetch())}}),r}),define("team/views/comment-list",["facade","utils","site/views/comment-list","team/views/comment-form"],function(e,t,n,r){var i,s=t.lib.Channel;return i=n.extend({setupFormView:function(){function i(n){t.model=n,t.render(),e.$el.prepend(t.el)}var e=this,t=new r({collection:this.collection}),n=this.addChildView(t);this.callbacks.add(function(){n()}),s("teamcommentform:fetch").subscribe(i)}}),i}),define("text!team/templates/menu.html",[],function(){return'<div id="sports-info">\r\n\r\n	<h4>Select a team</h4>\r\n\r\n	<div class="sports-h drop-down-main-outer"></div>\r\n	<div class="season-h drop-down-main-outer"></div>\r\n	<div class="team-h drop-down-main-outer"></div>\r\n</div>\r\n'}),define("team/views/menu",["require","text!team/templates/menu.html","text!team/templates/sport-select.html","team/models/basics","facade","views","utils","vendor","team/collections/sports","team/views/sport-list","usercontrol/dropdown/view/dropdown","team/collections/seasonteams","media/views/image-item","team/collections/complevels"],function(e,t,n){var r=e("facade"),s=e("views"),o=e("team/models/basics"),u=s.SectionView,a=e("team/views/sport-list"),f=e("team/collections/sports"),l=e("usercontrol/dropdown/view/dropdown"),c=e("team/collections/seasonteams"),h=e("media/views/image-item"),p=e("team/collections/complevels"),d=e("utils"),v=d.lib.Channel,m=e("vendor"),g=m.Mustache,y=r.$,b=r._;return u.extend({template:t,selectSportTemplate:n,events:{},initialize:function(e){this.headerView=e.headerView,u.prototype.initialize.call(this,e),this.initSportList();var t=new h({model:this.model});t.render(),y("#team-image-container-ul").html(t.$el)},selectSport:function(e){self.select_sport=self.$("#select-sport");var t=this.select_sport.val()},updateHeaderData:function(e){this.model.id!=e&&this.headerView.updateHeaderData(e)},getTeam:function(){var e=this;this.season=new c,this.season.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.season.sport_id=y("#sports-h").val(),this.season.complevel_id=y("#season-h").val(),this.season.fetch(),y.when(this.season.request).done(function(){var t={};t.records=e.season.toJSON(),t.recordId="id",t.recordValue="season_label";var n=new l({data:t,title:"Team",elementId:"team-h",destination:".team-h",selectedValue:e.model.id,targetView:e,callback:function(t){e.updateHeaderData(y("#team-h").val()),e.showAllTeamData()}})})},showAllTeamData:function(){routing.trigger("refresh-teampage",y("#sports-h").val(),y("#team-h").val(),this.season.id)},getComplevels:function(){var e=this;this.complevel=new p,this.complevel.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.complevel.sport_id=y("#sports-h").val(),this.complevel.fetch(),y.when(this.complevel.request).done(function(){var t={};t.records=e.complevel.toJSON(),t.recordId="complevel_id",t.recordValue="complevel_name";var n=new l({data:t,title:"Season",elementId:"season-h",destination:".season-h",selectedValue:e.model.get("payload").complevels_obj.complevel_id,targetView:e,callback:function(t){e.getTeam()}})})},initSportList:function(){var e=this;this.sports=new f,this.sports.id=this.model.get("payload").org_sport_link_obj.orgs_id,this.sports.fetch(),y.when(this.sports.request).done(function(){var t={};t.records=e.sports.toJSON(),t.recordId="sport_id",t.recordValue="sport_name";var n=new l({data:t,elementId:"sports-h",title:"Sport",selectedValue:e.model.get("payload").org_sport_link_obj.sports_id,destination:".sports-h",targetView:e,callback:function(t){e.getComplevels()}})})},insertOption:function(e,t){var n="",r=t.length;for(var i=0;i<r;i++)n+='<option value="'+t[i].payload.sport_id+'">'+t[i].payload.sport_name+"</option>";e.html(n)},setupSportListView:function(){function r(){t.render(),e.$el.find("#sports-info").html(t.el);var n={payload:[]},r=t.collection;if(r.length){for(i=0;i<r.length;i++)n.payload[i]=r.at(i).get("payload");var s=g.to_html(e.selectSportTemplate,n);e.$el.find("#sports-info").prepend(s)}else e.$el.find("#sports-info").html("")}var e=this,t=new a({collection:this.sports}),n=this.addChildView(t);this.childViews.sportListView=t,this.callbacks.add(function(){n()}),v("teamsports:fetch").subscribe(r)},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},childViews:{},render:function(e,t,n){u.prototype.render.call(this,e,t,n)}})}),define("team",["require","text!team/templates/layout.html","votes/views/vote","facade","controller","models","views","utils","team/models/basics","team/models/addmedia","team/collections/upcoming_schedules","team/collections/recent_schedules","team/collections/competitor_teams","team/collections/rosters","team/collections/videos","team/collections/images","team/collections/comments","profile/collections/commentsof","team/collections/commentson","team/collections/orgs","team/collections/fans","team/views/header","team/views/add-media","sportorg/views/competitorteam-list","team/views/commentof-list","team/views/commenton-list","sportorg/views/roster-list","team/views/video-list","team/views/image-list","team/views/comment-list","team/views/menu","media/models/image","schedules/views/schedule-list","roster/views/roster","profile/views/fans-image-list","common/views/add-media-buttons","text!common/templates/add-media-buttons.html","text!common/templates/add-fans-buttons.html","text!common/templates/add-games-buttons.html","votes/views/vote"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=e("team/models/basics"),l=e("team/models/addmedia"),c=e("team/collections/upcoming_schedules"),h=e("team/collections/recent_schedules"),p=e("team/collections/competitor_teams"),d=e("team/collections/orgs"),v=e("team/collections/videos"),m=e("team/collections/images"),g=e("team/collections/fans"),y=e("team/collections/comments"),b=e("profile/collections/commentsof"),w=e("team/collections/commentson"),E=e("team/views/header"),S=e("team/views/add-media"),x=e("schedules/views/schedule-list"),T=e("sportorg/views/competitorteam-list"),N=e("team/views/video-list"),C=e("team/views/image-list"),k=e("sportorg/views/teamroster-list"),L=e("team/views/comment-list"),A=e("team/views/commentof-list"),O=e("team/views/commenton-list"),M=e("profile/views/fans-image-list"),_=e("team/views/menu"),D=e("roster/views/roster"),P=e("media/models/image"),H=e("votes/views/vote"),B=e("common/views/add-media-buttons"),j=e("text!common/templates/add-media-buttons.html"),F=e("text!common/templates/add-fans-buttons.html"),I=e("text!common/templates/add-games-buttons.html"),q=u.LayoutView,R=i.$,U=i._,z=a.debug,W=a.lib.Channel,X=[base_url+"pages/team/team.css"];return r=s.extend({initialize:function(e){var t=this;return W("load:css").publish(X),U.bindAll(t),this.scheme=[],this.handleOptions(e),e.params&&this.setParamsArray(e.params),this.init(),this},handleOptions:function(e){this.id=e.teamId,this.userId=e.userId},init:function(){this.setupLayout().render(),this.createData(),this.handleDeferreds(),this.handleClickEvents()},handleClickEvents:function(){R(document).off("click",".green-left-heading"),R(document).on("click",".green-left-heading",function(){R(this).hasClass("down-arrow-heading")?(R(this).removeClass("down-arrow-heading"),R(this).next().slideUp(),R(this).next().attr("id")=="commenton-wrap"&&R(this).next().next().slideUp(),R(this).next().hasClass("commentson-outer-box-h")&&R(this).next().next().slideUp(),R(this).parent().parent().next().slideUp()):(R(this).addClass("down-arrow-heading"),R(this).next().slideDown(),R(this).next().attr("id")=="commenton-wrap"&&R(this).next().next().slideDown(),R(this).next().hasClass("commentson-outer-box-h")&&R(this).next().next().slideDown(),R(this).parent().parent().next().slideDown())})},createData:function(){function t(t,n,r){if(e.ajaxCalls&&e.ajaxCalls.length){for(var i in e.ajaxCalls)console.error("here"),e.ajaxCalls[i].abort();e.ajaxCalls=[]}e.refreshPage(),e.games=new d,e.games.id=n,e.games.sport_id=t,e.games.targetElement="#games_div",e.ajaxCalls.push(e.games.fetch()),e.images=new m,e.images.team_id=n,e.images.sport_id=t,e.images.targetElement="#image-wrap",e.ajaxCalls.push(e.images.fetch()),e.fans=new g,e.fans.id=n,e.fans.sport_id=t,e.fans.targetElement="#fans-div",e.ajaxCalls.push(e.fans.fetch());var s=e.basics.get("payload").enttypes_id;e.commentson=new w,e.commentson.subject_entity_type=s,e.commentson.savePath="/team/addcomment/"+n,e.commentson.id=n,e.commentson.targetElement="#comment_div",e.setupRosterView(),e.ajaxCalls.push(e.commentson.fetch()),e.handleDeferredsDynamic()}this.basics=new f({id:this.id}),this.basics.targetElement="#main",this.basics.fetch(),this.addmedia=new l,this.addmedia.id=this.id;var e=this;e.ajaxCalls=[],W("new-fan","unique").subscribe(this.refreshFansPage),routing.on("refresh-teampage",function(e,n,r){t(e,n,r)})},refreshFansPage:function(){var e,t=this;this.fansListView&&(R(this.fansListView.destination).html(""),e=R.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1),this.fans=new g,this.fans.id=this.id,this.fans.sport_id=R("#sports-h").val(),this.fans.targetElement="#fans-div",this.ajaxCalls.push(this.fans.fetch()),R.when(this.fans.request).done(function(e){t.setupFansListView()}))},reloadFans:function(){this.refreshFansPage()},handleDeferreds:function(){var e=this;R.when(this.basics.request).done(function(){e.setupHeaderView(),e.setupRosterView(),e.userId&&e.setUpVoteView()})},setupCommentOfListView:function(){var e;e=new A({collection:this.commentsof,destination:".commentsoff-outer-box-h",name:"team comments off view"})},deleteOldView:function(e){var t=this.scheme.length;for(var n=0;n<t;n++)this.scheme[n].name==e&&this.scheme[n].remove()},setupRosterView:function(e,t){if(!e&&!t)var n=this.basics.get("payload"),e=n.id,t=n.org_sport_link_obj.org.name;this.oldRosterViewName&&this.deleteOldView(this.oldRosterViewName),this.oldRosterViewName="roster images"+Math.random();var r,s=i.Backbone.Collection.extend({});r=new D({model:new s,team_id:e,entityId:this.basics.get("payload").enttypes_id,team_name:t,controllerObject:this,name:this.oldRosterViewName,destination:"#roster-wrap",teamName:this.basics.get("payload").team_name}),this.scheme.push(r),this.layout.render()},setupCommentOnListView:function(){this.commentOnListView=new O({collection:this.commentson,destination:".commentson-outer-box-h",name:"team comments on view "}),this.scheme.push(this.commentOnListView),this.layout.render()},showVote:function(){var e;this.votesView&&(R(this.votesView.destination).unbind().html(""),e=R.inArray(this.votesView,this.scheme),~e&&this.scheme.splice(e,1),this.setUpVoteView())},refreshPage:function(){var e;this.commentOnListView&&(this.commentOnListView.unbind().remove(),R(this.commentOnListView.destination).unbind().html(""),e=R.inArray(this.commentOnListView,this.scheme),~e&&this.scheme.splice(e,1)),this.gamesView&&(R(this.gamesView.destination).html(""),e=R.inArray(this.gamesView,this.scheme),~e&&this.scheme.splice(e,1)),this.fansListView&&(R(this.fansListView.destination).html(""),e=R.inArray(this.fansListView,this.scheme),~e&&this.scheme.splice(e,1)),this.imageListView&&(R(this.imageListView.destination).html(""),e=R.inArray(this.imageListView,this.scheme),~e&&this.scheme.splice(e,1))},handleDeferredsDynamic:function(){var e=this;R.when(e.commentson.request).done(function(){e.setupCommentOnListView()}),R.when(e.games.request).done(function(){e.setupGameView()}),R.when(e.fans.request).done(function(t){e.setupFansListView()}),R.when(this.images.request).done(function(){e.setupImages()})},setupFansListView:function(){this.addmedia.teamName=this.basics.get("payload").team_name,this.addmedia.setData();var e=new B({target:".fans-add-icons-h",heading:"FANS",template:F,controllerObject:this,collection:this.fans,model:this.addmedia,teamName:this.addmedia.teamName,inviteData:{invite_type:"follow",subject_id:this.basics.get("payload").id,enttypes_id:this.basics.get("payload").enttypes_id}});this.fansListView=new M({collection:this.fans,destination:"#fans-div",controllerObject:this,pageName:"team",target_id:this.id,data:this.basics.toJSON(),name:"fansView",teamName:this.addmedia.teamName}),this.scheme.push(this.fansListView),this.layout.render()},setupHeaderView:function(){var e,t=this;e=new E({model:this.basics,name:"Header",controllerObject:t,destination:"#main-header"});var n=new _({model:this.basics,name:"Menu View",headerView:e,controllerObject:t,destination:"#menu-container"});this.scheme.push(n),this.scheme.push(e),this.layout.render()},setupAddMediaView:function(e){var t;this.addMediaView&&(R(this.addMediaView.destination).html(""),t=R.inArray(this.addMediaView,this.scheme),~t&&this.scheme.splice(t,1)),this.addmedia.teamName=this.basics.get("payload").team_name,this.addmedia.setData(),this.addMediaView=new S({model:this.addmedia,team_id:this.basics.id,name:"Add_Media",destination:e}),this.scheme.push(this.addMediaView),this.layout.render()},setUpVoteView:function(){this.votesView=new H({model:this.basics,id:this.id,destination:"#votes-area-h",name:"votes_view"}),this.scheme.push(this.votesView),this.layout.render()},setupUpcomingSchedules:function(){var e;e=TeamScheduleListView.extend({name:"Upcoming_Schedule_List"}),this.upcomingScheduleListView=new e({collection:this.upcoming_schedules,destination:"#upcoming-schedule",name:"upcoming_schedule"}),this.scheme.push(this.upcomingScheduleListView),this.layout.render()},setupRecentSchedules:function(){var e;e=TeamScheduleListView.extend({name:"Recent_Schedule_List"}),this.recentScheduleListView=new e({collection:this.recent_schedules,destination:"#recent-schedule",name:"recent_schedule"}),this.scheme.push(this.recentScheduleListView),this.layout.render()},getOrgData:function(){var e,t=this;this.gamesView&&(R(this.gamesView.destination).html(""),e=R.inArray(this.gamesView,this.scheme),~e&&this.scheme.splice(e,1)),t.games.fetch(),R.when(t.games.request).done(function(){t.setupGameView()})},setupGameView:function(){var e=this.basics.get("payload");this.addmedia.teamName=this.basics.get("payload").team_name,this.addmedia.setData();var t=new B({target:".games-add-icons-h",heading:"GAMES",template:I,model:this.addmedia,teamName:this.addmedia.teamName});if(e.org_sport_link_obj.sport.sport_type_id!="2"){R(".game-green-heading").removeClass("hide");var n=x.extend({tagName:"div"});this.gamesView=new n({teams_id:this.id,controller:this,collection:this.games,destination:"#games_div",teamRecords:!0,teamName:this.addmedia.teamName}),this.scheme.push(this.gamesView),this.layout.render()}},setupCompetitorTeams:function(){this.competitorTeamListView=new T({collection:this.competitor_teams,destination:"#competitor-teams",name:"competitor_teams"}),this.scheme.push(this.competitorTeamListView),this.layout.render()},setupRosters:function(){this.rosterListView=new k({collection:this.rosters,destination:"#roster-wrap",name:"roster_wrap"}),this.scheme.push(this.rosterListView),this.layout.render()},setupVideos:function(){this.videoListView=new N({collection:this.videos,destination:"#video-wrap",name:"video_wrap"}),this.scheme.push(this.videoListView),this.layout.render()},initVoteView:function(){var e=new n({name:"vote View",destination:"#votes-area-h",model:this.basics,userId:this.id});this.scheme.push(e),this.layout.render()},setupImages:function(e){var t=this;this.addmedia.teamName=this.basics.get("payload").team_name,this.addmedia.setData();var n=new B({target:".media-add-icons-h",heading:"PHOTO/VIDEO",template:j,page_base:"team",ent_id:t.id,sports_id:R("#sports-h").val(),controllerObject:t,model:t.addmedia,teamName:this.addmedia.teamName});routing.off("image-upload-success"),routing.on("image-upload-success",function(e){t.updateImages(e)}),routing.off("setup-add-icons"),routing.on("setup-add-icons",function(e){t.setupAddMediaView(e)}),this.imageListView=new C({collection:this.images,destination:"#image-wrap",target_id:this.id,target_url:"/api/team/addimage/",sport_id:R("#sports-h").val(),name:"image_wrap ",user_id:this.userId,media_id:this.media_id,pageName:"team",triggerItem:"setup-add-icons",teamName:t.addmedia.teamName}),this.scheme.push(this.imageListView),this.layout.render()},reloadImages:function(){var e=this,t;this.imageListView&&(R(this.imageListView.destination).html(""),t=R.inArray(this.imageListView,this.scheme),~t&&this.scheme.splice(t,1)),e.images.fetch(),R.when(e.images.request).done(function(){e.setupImages()})},updateImages:function(e){var t=new P;t.processItemFromPayload(e),t.selectImageType(this.imageListView.imagetype),this.imageListView.collection.add(t),this.imageListView.allData&&this.imageListView.allData.push(t.toJSON()),this.imageListView.collection.length==1&&this.reloadImages()},setupComments:function(){this.commentListView=new L({collection:this.comments,destination:"#comment-wrap",name:"comment_wrap"}),this.scheme.push(this.commentListView),this.layout.render()},setupLayout:function(){var e;return e=new q({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout}}),r}),define("text!profilesetting/templates/layout.html",[],function(){return'<div class="span12 main-container">\r\n	<div id="main-header-prof-setting" class="profile-header"></div>\r\n\r\n	<!-- Basic Info Section Starts-->\r\n	<div class="row-fluid" id="section-basics-prof-setting"></div>\r\n	<!-- Basic Info Section Ends-->\r\n\r\n	<!-- Team Info Section Starts-->\r\n	<div class="row-fluid section-teams-prof-setting">\r\n\r\n\r\n		<!--Club Info Section Starts-->\r\n		<div id="section-club-prof-setting" class="row-fluid sub-section-prof-setting">\r\n			<div id="content-club-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!--Club Info Section Ends-->\r\n\r\n\r\n		<!-- High School Section Starts-->\r\n		<div id="section-school-prof-setting" class="row-fluid sub-section-prof-setting">\r\n\r\n			<div id="content-school-prof-setting">\r\n			</div>\r\n			<br/>\r\n\r\n		</div>\r\n		<!-- High School Section Ends-->\r\n\r\n\r\n\r\n		<!--Individual Sports Section Starts-->\r\n		<div id="section-individual-prof-setting">\r\n\r\n		</div>\r\n		<!--Individual Sports Section Ends-->\r\n	</div>\r\n	<!-- Team Info Section Ends-->\r\n\r\n	<div id="main-footer-prof-setting">\r\n\r\n	</div>\r\n</div>\r\n'}),define("profilesetting/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("text!profilesetting/templates/basic_info_header.html",[],function(){return'{{#payload}}\r\n<div class="span4 profile-image">\r\n	<img id="img-profile-prof-setting" src="{{user_picture_obj.types.large_thumb.url}}" />\r\n	<a href="javascript:void(0);" id="change_user_pic">Change User Picture</a>\r\n</div>\r\n<div class="two-column-form mt20" id="user_profile_data"></div>\r\n{{/payload}}\r\n\r\n	<!--div id="edit_profile_info_section">\r\n		<div>\r\n			<span>Name: </span>\r\n			<input type="text" id="txt_user_name" model-property="name" value="{{name}}" />\r\n		</div>\r\n		<div>\r\n			<span>Height (in):</span>\r\n			<input type="text" id="txt_user_height" model-property="height_in" value="{{height_in}}" />\r\n		</div>\r\n		<div>\r\n			<span>Weight (lbs)</span>\r\n			<input type="text" id="txt_user_weight" model-property="weight_lb" value="{{weight_lb}}" />\r\n		</div>\r\n		<div style="font-size: .8em; font-weight: bolder;">\r\n			Change Password\r\n		</div>\r\n		<div>\r\n			<span>New</span>\r\n			<input type="password" id="txt_new_password" model-property="password" placeholder="New Password" />\r\n		</div>\r\n		<div>\r\n			<span>Again</span>\r\n			<input type="password" id="txt_re_new_password" model-property="re_password" placeholder="New Password Again" />\r\n		</div>\r\n		<a href="javascript:void(0);" class="resume_button" id="save_user_data">Save</a>\r\n	</div-->'}),define("text!profilesetting/templates/basic_info_header_edit.html",[],function(){return'{{#payload}}\r\n		<div id="edit_profile_info_section">\r\n			<div><span>Name: </span><input type="text" id="txt_user_name" model-property="name" value="{{name}}" /></div>\r\n			<div><span>Height (in):</span><input type="text" id="txt_user_height" model-property="height_in" value="{{height_in}}" /></div>\r\n			<div><span>Weight (lbs)</span><input type="text" id="txt_user_weight" model-property="weight_lb" value="{{weight_lb}}" /></div>\r\n			<div style="font-size: .8em; font-weight: bolder;">Change Password</div>\r\n			<!--<div><span>Current</span><input type="password" id="txt_current_password" model-property="current_password"  placeholder="Current Password" /></div>-->\r\n\r\n			<div><span>New</span><input type="password" id="txt_new_password" model-property="password" placeholder="New Password" /></div>\r\n			<div><span>Again</span><input type="password" id="txt_re_new_password" model-property="re_password" placeholder="New Password Again" /></div>\r\n			<a href="javascript:void(0);" class="resume_button" id="save_user_data">Save</a>\r\n		</div>\r\n{{/payload}}'}),define("text!profilesetting/templates/basic_info_header_completed.html",[],function(){return'{{#payload}}\r\n	<h2 id="user_name">{{first_name}} {{last_name}}</h2>\r\n	<p id="user_height">\r\n		{{#height_in}} {{height_in}} INCHES{{/height_in}}\r\n	</p>\r\n	<p id="user_weight">\r\n		{{#weight_lb}}{{weight_lb}} LBS{{/weight_lb}}\r\n	</p>\r\n	<div class="resume_button" id="edit_profile_info">Edit Basic User Info</div>\r\n\r\n{{/payload}}'}),define("text!usercontrol/imagecropper/templates/layout.html",[],function(){return'<iframe id="cropper_iframe"></iframe>'}),define("usercontrol/imagecropper/imagecropper",["require","text!usercontrol/imagecropper/templates/layout.html","facade","controller","views"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("views"),o=e("utils"),u=r.$,a=r._,f=o.lib.Channel,l=s.LayoutView;return n=i.extend({cssArr:[base_url+"usercontrols/imagecropper/imagecropper.css"],events:{"click button.close":"alertsomething"},initialize:function(e){console.log("init");var t=this;f("load:css").publish(this.cssArr),a.bindAll(this),console.log(e),this.image_o=e.image_o?e.image_o:"",this.image_e=e.image_e?e.image_e:"",this.modelHTML='<div id="modalPopup" class="modal imagecropper hide fade model-popup-h"><div class="modal-header"><span>Athletez Profile Pic Editor</span><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"></div></div>',this.setupLayout().render(),this.handleDeferreds()},handleDeferreds:function(){},setupLayout:function(){var e=this;this.scheme=[];if(routing.mobile)var t=parseInt(u(document).width())-30;else var t=500;var n="/vendor/plugins/iedit2/index.html?vh="+t+"&vw=500&sx=0&sy=0&sz=100&t=Profile%20Picture&edit=";this.image_e!=""&&(n+="&edit="+this.image_e),this.image_o!=""&&(n+="&o="+this.image_o);var r={};return r.width="100%",r.height="100%",r.title="Change your Athletez Photo",r.html='<iframe src="'+n+'" id="cropper_iframe" style="width:100%;height:100%;margin:0;"></iframe>',r.id="change-userpic-modal",r.addClass=["noBorder"],routing.trigger("common-popup-open",r),u("#"+r.id+" .close").bind("click",function(){e.notifyUpdate()}),this.layout},notifyUpdate:function(){f("userpic-changed").publish()}}),n}),define("profilesetting/views/basic_info",["require","text!profilesetting/templates/basic_info_header.html","text!profilesetting/templates/basic_info_header_edit.html","text!profilesetting/templates/basic_info_header_completed.html","profilesetting/models/basic_info","facade","views","utils","vendor","usercontrol/imagecropper/imagecropper","component/forms"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=e("profilesetting/models/basic_info"),a=o.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=s.$,d=e("usercontrol/imagecropper/imagecropper"),v=e("component/forms");return i=a.extend({id:"basic_info",template:t,events:{"click .btn-prof-setting-h":"initialize","click #edit_profile_info":"editProfile","click #change_user_pic":"changeUserpic","click #save_user_data":"saveProfileBasics"},initialize:function(e){e.name&&a.prototype.initialize.call(this,e),this.initBasicView()},render:function(){a.prototype.render.call(this)},generateForm:function(){var e=this,t=new v({name:{form_values:{post_to_server:!0,serverKey:"name",serverDbField:"name",value:e.basicInfoModel.get("payload").name},type:"Text",attr:{placeholder:"Name","class":""},label:"Name"},Height:{form_values:{post_to_server:!0,serverKey:"height_in",serverDbField:"height",value:e.basicInfoModel.get("payload").height_in},type:"Text",attr:{placeholder:"Height","class":""},label:"Height (in)"},Weight:{form_values:{post_to_server:!0,serverKey:"weight_lb",serverDbField:"weight",value:e.basicInfoModel.get("payload").weight_lb},type:"Text",attr:{placeholder:"Weight","class":""},label:"Weight (lbs)"},Password:{form_values:{post_to_server:!0,serverKey:"password",serverDbField:"password"},type:"Password",attr:{placeholder:"New Passord","class":""},label:"New"},Again:{form_values:{post_to_server:!0,serverKey:"re_password",serverDbField:"re_password"},type:"Password",attr:{placeholder:"New Password Again"},label:"Again"},submit:{type:"Submit",fieldClass:"button-field",form_values:{post_to_server:!1},attr:{value:"Save","class":"resume_button"},showLable:!1,onSubmit:function(t){var r=n.commit();if(r)for(var i in r);else{if(e.formValues)var s=e.formValues.getFormValues();else var s=n.getValue();var s=e.formValues.getFormValues();e.saveProfileBasics(s)}}}},p("#user_profile_data")),n=t.form;this.formValues=t.formValues},initBasicView:function(){var e=this;this.basicInfoModel=new u,this.basicInfoModel.fetch(),p.when(this.basicInfoModel.request).done(function(){e.basicInfoModel.set("id",e.basicInfoModel.get("payload").id),e.setupBasicView(),e.generateForm()})},setupBasicView:function(){console.log("called");var e=this,t=h.to_html(e.template,this.basicInfoModel.toJSON());p("#section-basics-prof-setting").html(t),p("#change_user_pic").bind("click",function(){e.changeUserpic()}),p("#edit_profile_info").bind("click",function(){e.editProfile()}),p("#save_user_data").bind("click",function(){e.saveProfileBasics()})},setOptions:function(e){if(!this.model)throw new Error("HeaderView expects option with model property.")},editProfile:function(){p("#user_profile_data").html(""),this.generateForm()},saveProfileBasics:function(e){var t=this,n={};e?n=e:p("div#user_profile_data").find("input").each(function(){n[p(this).attr("model-property")]=p(this).val()}),this.basicInfoModel.save(n,{success:function(){var e=h.to_html(r,t.basicInfoModel.toJSON());p("div#user_profile_data").html(e),p("#edit_profile_info").bind("click",function(){t.editProfile()})},error:function(e,n){var r=JSON.parse(n.responseText),i=r.exec_data.error_array;t.formValues.showServersErrors(i)}})},changeUserpic:function(){var e=this.basicInfoModel.get("payload");l("userpic-changed").subscribe(function(){t.initBasicView()});var t=this,n=new d({image_o:e.user_picture_obj.pre_crop_url,image_e:e.user_picture_obj.image_path})}}),i}),define("text!profilesetting/templates/highschool.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading">School Teams</span>\r\n</div>\r\n<div id="btn-Add-School" class="clearfix div-add-dotted">\r\n	+ Add a school\r\n</div>\r\n<div id="section-Add-Sports-school" class="displayNone add-org-fields">\r\n	<div>\r\n		<span class="span2">What State?</span>\r\n		<input type="text" id="txt-school-state" placeholder="Just Start Typing"/>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n\r\n	<div>\r\n		<span class="span2">What School?</span>\r\n		<input type="text" id="txt-school-school" placeholder="Just Start Typing" disabled="disabled"/>\r\n		<a class="add-school-h" href="javascript: void(0);">Couldn\'t Find your School?</a>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<div class="div-sports-wrapper displayNone">\r\n		<div id="def-school-sports-section" class="school-sports-section">\r\n\r\n		</div>\r\n		<!--<span class="floatLeft"><a href="javascript:void(0)" class=" well-small btn-add-sports" >Add Sports</a> </span>-->\r\n	</div>\r\n<!-- <span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary btn-finish-addsports" >Finish</a> </span> -->\r\n</div>\r\n<!--SCHOOL LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail">\r\n\r\n</div>\r\n\r\n<!--lIST-->\r\n'}),define("text!profilesetting/templates/club.html",[],function(){return'<div class="row-fluid">\r\n	<span class="green-left-heading"><span>Club Teams and Affiliations</span></span>\r\n</div>\r\n<div id="btn-Add-club" class="div-add-dotted">\r\n	+ Add a Club\r\n</div>\r\n<div id="section-Add-Sports-club" class="displayNone add-org-fields">\r\n<div>\r\n	<span class="span2">What State?</span>\r\n	<input type="text" id="txt-club-state" placeholder="Just Start Typing" tabindex="0"/>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n\r\n<div>\r\n	<span class="span2">Club Name</span>\r\n	<input type="text" id="txt-club-club" placeholder="Just Start Typing" disabled="disabled"/>\r\n	<a class="add-club-h" href="javascript: void(0);">Couldn\'t Find your Club?</a>\r\n	<p class="field-error"></p>\r\n	<p class="field-message"></p>\r\n</div>\r\n<div class="div-sports-wrapper displayNone">\r\n	<div id="def-club-sports-section" class="school-sports-section">\r\n\r\n	</div>\r\n	<!--<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-sports" >Add Sports</a> </span>-->\r\n</div>\r\n<!--<span class="floatRight"><a href="javascript:void(0)" class=" well-small btn-primary" >Save</a> </span> -->\r\n</div>\r\n<!--CLUBs LISTING SECTION HERE-->\r\n<!--lIST-->\r\n<div class="row-fluid section-team-list-detail-club">\r\n\r\n</div>\r\n'}),define("text!profilesetting/templates/sportslevel.html",[],function(){return'<div class="section-sportslevel">\r\n	<div class="select-sports-outer-h">\r\n		<span class="span2">What Sport?</span>\r\n		<!-- class="ddl-school-sports"-->\r\n		<select class="ddl-sports" orgsid="{{orgsId}}" tabindex="0">\r\n			<option value="">Select Sport</option>\r\n			{{#sports}}\r\n			<option value="{{sport_id}}">{{sport_name}}</option>\r\n			{{/sports}}\r\n		</select>\r\n\r\n		<p class="field-error"></p>\r\n\r\n		<p class="field-message"></p>\r\n\r\n		<span><a href="javascript:void(0)" class="btn-Remove-Sport" tabindex="0">Remove</a> </span>\r\n	</div>\r\n\r\n	<div class="clearfix inner-section">\r\n		<div class="sub-section-prof-setting">\r\n			<div>\r\n\r\n				<div class="spn-black-heading spn-sport-name">\r\n				</div>\r\n				<!--class="div-school-sports-level"-->\r\n				<div class="div-sports-level"></div>\r\n\r\n			</div>\r\n			<div class="">\r\n				<!--<span class="floatLeft"><a href="javascript:void(0)" class="btn-add-level" orgsid="{{orgsId}}" tabindex="0">Add Level</a> </span>-->\r\n				<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Cancel</a> </span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/level.html",[],function(){return'<div class="div-levels seasons-records">\r\n	{{#sport}}\r\n		<div class="org-sport-list-header">\r\n			<div class="sport-name"><img src="{{icon}}" />{{sports_name}}</div>\r\n		</div>\r\n	{{/sport}}\r\n	<div class="well-small span12">\r\n		<!-- class="ddl-school-complevel"-->\r\n		<select class="ddl-complevel" orgsid="{{orgsId}}" sportsid="{{sportsId}}">\r\n			<option value="">Select Level</option>\r\n			{{#levels}}\r\n			<option value="{{complevel_id}}">{{complevel_name}}</option>\r\n			{{/levels}}\r\n		</select>\r\n		<p class="field-error"></p>\r\n		<p class="field-message"></p>\r\n	</div>\r\n	<!-- id="div-school-seasons"-->\r\n	<div class="div-seasons complevels-wrapper displayNone">\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow up-arrow-h" title="up">&uarr;</a>\r\n		</div>\r\n		<div class="complevels-container">		\r\n			<div class="complevels-inner">\r\n				{{#Data}}\r\n					<div class="season-array">\r\n						<div class="year-label">{{year}}</div>\r\n						{{#seasons}}\r\n							<span class="single-season">\r\n								<input type="checkbox" class="chkSeasons chkSeasons-{{season_id}}-{{year}}" seasonId = \'{{season_id}}\' year=\'{{year}}\' orgsid="{{orgsId}}" sportsid="{{sportsId}}"/>\r\n								<label>&nbsp;{{season_name}} </label>\r\n								<!--<a href="javascript:void(0)" class="btnOpenPositions displayNone" disabled="disabled" >Positions main</a>-->\r\n							</span>\r\n						{{/seasons}}\r\n					</div>\r\n				{{/Data}}\r\n			</div>\r\n		</div>\r\n		<div class="arrow-container">\r\n			<a href="javascript:void(0)" class="down arrow down-arrow-h" title="down">&darr;</a>\r\n		</div>\r\n\r\n	</div>\r\n	\r\n	<!--	Modal Section to display positions	-->\r\n	<!--modal-school-positions-->\r\n<div class="modal hide fade position-modal modal-positions" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-header">\r\n<button type="button" class="close btn-Close-Positions" data-dismiss="modal" aria-hidden="true">×</button>\r\n<h3 id="myModalLabel">Positions</h3>\r\n</div>\r\n<div class="modal-body modal-position-body">\r\n	\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn btn-Close-Positions" data-dismiss="modal" aria-hidden="true">Finish</button>\r\n<!--<button class="btn btn-primary btn-Save-Positions">Finish</button> -->\r\n</div>\r\n</div>\r\n</div>\r\n'}),define("profilesetting/collections/states",["facade","collections","location/collections/states","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({}),i}),define("profilesetting/collections/schools",["facade","utils","sportorg/collections/orgs","sportorg/models/org"],function(e,t,n,r){var i;return i=n.extend({fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("profilesetting/collections/sports",["facade","sportorg/collections/sports_listall"],function(e,t){var n=t.extend({});return n}),define("text!profilesetting/templates/teamlist.html",[],function(){return'{{#orgs}}\r\n	<div class="div-sports-wrapper"  orgsId="{{org_id}}">\r\n		<div class="school-sports-section"></div>\r\n	</div>\r\n	<div class="org-sport-list">\r\n		<div class="org-sport-list-header">\r\n			<div class="org-name">{{org_name}}, {{city}}, {{state}}</div>\r\n			{{^single_sport_id}}\r\n			<div class="add-sport"><a class="btn-add-sports" href="javascript:void(0)" orgsId="{{org_id}}">Add Sport</a></div>\r\n			{{/single_sport_id}}\r\n		</div>\r\n		{{#sports}}\r\n\r\n			<div class="org-sport-list-header">\r\n				<div class="sport-name"><img src="{{icon}}" />{{sports_name}} - <a href="javascript:void(0)" class="edit-team"  orgsId="{{org_id}}" sportId="{{sports_id}}">Edit</a></div>\r\n			</div>\r\n\r\n			<div>\r\n				{{#complevels}}\r\n					{{#seasons}}\r\n				<a href="/#!team/{{team_id}}"><div class="season-list">\r\n						<span>{{complevel}}</span>\r\n						<span>{{season}} {{year}}</span>\r\n						<span>\r\n							{{#positions}}<span class="position-listing">{{name}}</span>{{/positions}}\r\n							{{^positions}}No Positions&nbsp;{{/positions}}\r\n						</span>\r\n				</div></a>\r\n					{{/seasons}}\r\n\r\n				{{/complevels}}\r\n			</div>\r\n\r\n\r\n		{{/sports}}</div>\r\n{{/orgs}}'}),define("profilesetting/collections/teams",["facade","utils","sportorg/collections/teams","sportorg/models/team"],function(e,t,n,r){var i;return i=n.extend({url:function(){var e=this;return testpath?testpath+" /api/user/orgs/"+e.user_id+"?groupby=complevel "+"&time="+(new Date).getTime():"/api/user/orgs/"+e.user_id+"?groupby=complevel&org_type="+e.org_type+"&time="+(new Date).getTime()},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)},data:{user_id:self.user_id,sports_club:self.sports_club}}),i}),define("profilesetting/views/teams",["require","text!profilesetting/templates/teamlist.html","facade","views","utils","vendor","profilesetting/collections/teams"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("profilesetting/collections/teams"),p=o.extend({template:t,controls:{},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){var t=this;t.setOptions(e),t.render()},setOptions:function(e){var t=this;if(!e.user_id&&!e.destination)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.user_id=e.user_id,this.sports_club=e.sports_club,this.el=e.destination,this.org_type=e.org_type},bindEvents:function(){},GetData:function(){var e=this,t={user_id:e.user_id,sports_club:this.sports_club},n=new h(t);n.user_id=e.user_id,n.sports_club=this.sports_club,n.org_type=this.org_type,e.teamFetchRequest=e.abortRequest(e.teamFetchRequest);var r=n.fetch();e.teamFetchRequest.push(r),c.when(n.request).done(function(){if(n.isError())return;var t=n.toJSON();if(t.length){var r=[];for(var i=0;i<t.length;i++)r.push(t[i].payload);console.error(r),e.Teams=t;var s=l.to_html(e.template,{orgs:r});c(e.el).html(s)}else c(e.el).html(e.messages.dataNotExist)})},render:function(){var e=this;e.GetData()}});return p}),define("profilesetting/models/complevel",["facade","sportorg/models/complevel"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/org/basics/"+this.orgs_id+"?id1="+this.orgs_id)},fetchSuccess:function(e,t){}}),n}),define("text!profilesetting/templates/season-item.html",[],function(){return'<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&uarr;</a>\r\n</div>\r\n{{#Data}}\r\n<div class="span12">\r\n	<span class="span3"><strong>{{year}}</strong></span>\r\n	{{#seasons}}\r\n	<span class="span3">\r\n		<input type="checkbox" class="chkSeasons" year=\'{{year}}\' seasonId = \'{{season_id}}\' />\r\n		<label>&nbsp;{{season_name}} </label>\r\n		<a href="javascript:void(0)" class="btnOpenPositions">Positions</a>\r\n		 </span>\r\n	{{/seasons}}\r\n</div>\r\n{{/Data}}\r\n<div class="span12 well-small">\r\n	<a href="javascript:void(0)" class="down arrow">&darr;</a>\r\n</div>'}),define("profilesetting/views/seasons",["require","text!profilesetting/templates/season-item.html","facade","views","utils","vendor","profilesetting/models/complevel"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,r=o.extend({template:t,events:{},controls:{chkSeasons:".chkSeasons"},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property."},properties:{show_prev_year:2},initialize:function(e){n=this,n.setOptions(e),n.render()},setOptions:function(e){if(!e.orgs_id||!e.user_id||!e.sport_id||!e.complevel_id)throw new Error("Parameters missing for Seasons View");this.destination=e.destination,this.collection=e.collection,this.sport_id=e.sports_id,this.org_id=e.orgs_id,this.user_id=e.user_id,this.complevel_id=e.complevel_id,this.el=e.destination,this.properties.show_prev_year=e.show_prev_year||this.properties.show_prev_year},bindEvents:function(){},GetData:function(e){var t=[],r=(new Date).getFullYear();for(var i=n.properties.show_prev_year;i>=0;i--){var s={year:r,seasons:e};t.push(s),r--}return{Data:t}},render:function(){var e=l.to_html(n.template,n.GetData(this.collection));c(n.destination).html(e)}});return r}),define("text!profilesetting/templates/positions.html",[],function(){return'{{#Data}}\r\n<span id="pos-{{id}}" class="span3 spn-position-title_h" positionId=\'{{id}}\'>{{name}} </span>\r\n{{/Data}}\r\n'}),define("sportorg/models/position",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,sport_name:null,stattab_id:0,stattab_name:null,stattab_classname:null},desc:"Position information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/positions",["facade","collections","sportorg/models/position","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;if(r!=null){for(i=0;i<r.length;i++){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}}),s}),define("profilesetting/collections/positions",["facade","collections","sportorg/collections/positions","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return testpath?testpath+"/api/org/basics/":(this.orgs_id==undefined,"/api/sport/positions/"+this.sport_id+"?id1="+this.sport_id)}}),i}),define("profilesetting/views/positions",["require","text!profilesetting/templates/positions.html","facade","views","utils","vendor","profilesetting/collections/positions"],function(e,t){var n,r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=e("profilesetting/collections/positions"),c=f.Mustache,h=i.$,r=o.extend({template:t,events:{},controls:{spnPositionTitle:".spn-position-title_h",divLevels:".div-levels",btnPositions:".btnOpenPositions",btnClose:".btn-Close-Positions"},messages:{},properties:{},initialize:function(e){n=this,n.setOptions(e),n.BindPositions(),n.bindEvents()},bindEvents:function(){},MarkPosition:function(e){h(e).hasClass("active")?h(e).addClass("active"):h(e).removeClass("active")},setOptions:function(e){if(!e.sport_id)throw new Error("Sport_id is missing for Positions View",e);this.destination=e.destination,this.sport_id=e.sport_id,this.el=e.destination,this.target=e.target},BindPositions:function(){if(n.sport_id){var e=new l;e.sport_id=n.sport_id,e.fetch(),h.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();n.positions=[];if(t!=null&&t.length){n.positions=[];for(var r in t)n.positions.push(t[r].payload)}else n.positions=[];n.render()})}},render:function(){var e=c.to_html(n.template,{Data:n.positions||[]});h(n.destination).html(e),n.positions!=null&&n.positions.length>0?h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeIn():h(n.destination).parents(n.controls.divLevels).find(n.controls.btnPositions).fadeOut()}});return r}),define("profilesetting/models/team",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"team_id",url:function(){this.orgs_id==undefined;if(this.type=="add")return"/api/user/addteam/"+this.user_id;if(this.type=="delete")return"/api/user/team/"+this.user_id}}),n}),define("profilesetting/models/position",["facade","sportorg/models/position"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"position_id",url:function(){return this.orgs_id==undefined,this.type=="save"?"/api/user/position/"+this.user_id+"?time="+(new Date).getTime():(+(new Date).getTime(),this.type=="delete"?"/api/user/position/"+this.user_id+"?user_id="+this.user_id+"?time="+(new Date).getTime():"/api/user/position/"+this.user_id+"?time="+(new Date).getTime())}}),n}),define("profilesetting/views/org",["require","text!profilesetting/templates/highschool.html","text!profilesetting/templates/club.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r,i){var s,o,u=e("facade"),a=e("views"),f=a.SectionView,l=e("utils"),c=l.lib.Channel,h=e("vendor"),p=h.Mustache,d=u.$,v=e("profilesetting/collections/states"),m=e("profilesetting/collections/schools"),g=e("profilesetting/collections/sports"),y=e("profilesetting/models/complevel"),b=e("profilesetting/views/seasons"),w=e("profilesetting/views/positions"),E=e("profilesetting/views/teams"),S=e("profilesetting/models/team"),x=e("profilesetting/models/position");return o=f.extend({events:{"keyup #txt-school-state":"keyupState","blur #txt-school-state":"changeState","keyup #txt-school-school":"keyupSchool","blur #txt-school-school":"changeSchool","keyup #txt-club-state":"keyupState","blur #txt-club-state":"changeState","keyup #txt-club-club":"keyupSchool","blur #txt-club-club":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-School":"SetUpAddSchool","click #btn-Add-club":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-school-h":"openAddHighSchoolPopup","click .add-club-h":"openAddClubPopup","click .up-arrow-h":"levelUpArrow","click .down-arrow-h":"levelDownArrow"},messages:{dataNotExist:"You don't have any teams registered yet.  Why not do that now?",optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert School",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:30},states:[],schools:[],initialize:function(e){e.type&&e.type=="school"?(this.type="school",this.controls={txtStates:"#txt-school-state",txtSchools:"#txt-school-school",content:"#content-school-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-school-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail",divAddSportSection:"#section-Add-Sports-school",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},this.template=t):(this.type="club",this.controls={txtStates:"#txt-club-state",txtSchools:"#txt-club-club",content:"#content-club-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-club-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail-club",divAddSportSection:"#section-Add-Sports-club",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},this.template=n),f.prototype.initialize.call(this,e),_self=this,_self.setOptions(e),this.init()},openAddHighSchoolPopup:function(){var e=this;routing.trigger("add-school-init","","","school",e,function(t){console.log(t),e.$el.find(e.controls.txtSchools).val(t.name),e.$el.find(e.controls.txtStates).val(t.locationState.name),e.states_id="",e.orgs_id="",e.states_id=t.locationState.id,e.$(e.controls.txtSchools).removeAttr("disabled"),e.orgs_id=t.org_id,e.$el.find(e.controls.divMainSportsSection).find(e.controls.ddlSports).length<1&&e.fillSports(e.orgs_id,e.controls.divMainSportsSection),e.$el.find(".add-school-h").hide()})},init:function(){var e=this;e.setupView(),e.SetUpTeamsView()},render:function(){var e=this;f.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=this,n=d(e.target).val(),r=[],i=t.isValidAutoCompleteKey(e);if(n!="")if(i==1){t.$(e.target).parents(t.controls.divAddSportSection).find(t.controls.txtSchools).attr("disabled","disabled").val(""),t.RemoveSportsSection();var s=new v;s.state_name=n,console.log("State Request Abort Request Function AddGame/Main.js"),t.stateFetchRequest=t.stateFetchRequest||[],t.stateFetchRequest.push(t.cityFetchRequest||[]),t.stateFetchRequest.push(t.schoolFetchRequest||[]),t.stateFetchRequest=t.abortRequest(t.stateFetchRequest),d(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();t.stateFetchRequest.push(o),d.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?t.$el.find(t.controls.txtStates).parent().find(t.controls.fieldMessage).html(t.messages.dataNotExist).stop().fadeIn():t.$el.find(t.controls.txtStates).parent().find(t.controls.fieldMessage).html("").fadeOut(),t.states=[];for(var n in e)t.states.push(e[n].payload);t.states.forEach(function(e,t){r.push(e.name+" ("+e.abbr+")")});try{t.$el.find(t.controls.txtStates).autocomplete("destroy")}catch(i){}t.$el.find(t.controls.txtStates).autocomplete({source:r}),t.$el.find(t.controls.txtStates).trigger("keydown")})}else t.changeState(e)},changeState:function(e){var t=this,n=d(e.target).val(),r=!1;t.states_id="",t.states.forEach(function(e,i){e["name"]+" ("+e["abbr"]+")"==n&&(r=!0,t.states_id=e.id,t.$(t.controls.txtSchools).removeAttr("disabled"))}),r||(t.states_id=0,t.$(t.controls.txtSchools).attr("disabled","disabled"))},keyupSchool:function(e){var t=this,n=d(e.target).val(),r=[],i=t.isValidAutoCompleteKey(e);if(n!=""&&i==1){t.RemoveSportsSection();var s=new m;s.sports_club=t.type=="school"?0:1,s.states_id=t.states_id,s.org_name=n,console.log("School Request Abort Request Function"),t.schoolFetchRequest=t.abortRequest(t.schoolFetchRequest),d(e.target).addClass("ui-autocomplete-loading"),d(e.target).removeAttr("data-id");var o=s.fetch();t.schoolFetchRequest.push(o),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();n==null||n.length<1?t.$el.find(t.controls.txtSchools).parent().find(t.controls.fieldMessage).html(t.messages.dataNotExist).stop().fadeIn():t.$el.find(t.controls.txtSchools).parent().find(t.controls.fieldMessage).html("").stop().fadeOut(),t.schools=[];for(var i in n)t.schools.push(n[i].payload);t.schools.forEach(function(e,t){r.push({id:e.id,value:e.org_name,city:e.city})});try{t.$el.find(t.controls.txtSchools).autocomplete("destroy")}catch(o){}d(e.target).autocomplete({source:r,select:function(t,n){console.error(t),setTimeout(function(){d(e.target).val(n.item.value),d(e.target).attr("data-id",n.item.id),d(e.target).trigger("blur")},100)}}).data("ui-autocomplete")._renderItem=function(e,t){return d("<li>").append("<a>"+t.value+"<br><span class='sub-label'>"+t.city+"</span></a>").appendTo(e)},d(e.target).trigger("keydown")})}else t.RemoveSportsSection(),t.changeSchool(e)},changeSchool:function(e){var t=this,n,r=t.schools.length,i=t.$(e.target).attr("data-id");t.orgs_id=0;for(n=0;n<r;n++)if(t.schools[n]["id"]==i){t.orgs_id=t.schools[n].org_id;var s=t.schools[n].single_sport_id;t.$el.find(t.controls.divMainSportsSection).find(t.controls.ddlSports).length<1&&t.fillSports(t.orgs_id,t.controls.divMainSportsSection,s);break}},openAddClubPopup:function(e){var t=d(e.target).parent().find("input#txt-club-club").val(),n=this;routing.trigger("add-school-init","","","club",n,function(e){console.log("RESULT",e),n.$el.find(n.controls.txtSchools).val(e.name),n.$el.find(n.controls.txtSchools).attr("data-id",e.org_id),n.$el.find(n.controls.txtStates).val(e.locationState.name),n.$el.find(n.controls.divSportsWrapper).css({"background-color":"rgb(255, 223, 223)"}),n.states_id="",n.orgs_id="",n.states_id=e.locationState.id,n.$(n.controls.txtSchools).removeAttr("disabled"),n.orgs_id=e.org_id,n.$el.find(n.controls.divMainSportsSection).find(n.controls.ddlSports).length<1&&n.fillSports(n.orgs_id,n.controls.divMainSportsSection,e.single_sport_id);var t=n.$el.parents().find(d("#btn-Add-club")),r=t.position();t.parents(document).animate({scrollTop:r.top},"1000"),n.$el.find(".add-club-h").hide()},t)},RemoveSportsSection:function(){var e=this;e.$el.find(e.controls.divMainSportsSection).html("")},fillSports:function(e,t,n){var r=this;if(r.sports&&r.sports.length>0)r.SetupSportsView(e,t,n);else{var i=new g;i.sport_type=this.type=="club"?0:1,i.sport_type_id=i.sport_type,i.male=1,i.female=0,r.gender=="male"?i.male=1:r.gender=="famale"&&(i.female=0),i.fetch(),d.when(i.request).done(function(){if(i.isError())return;var s=i.toJSON();(s==null||s.length<1)&&r.$el.find(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var o in s)r.sports.push(s[o].payload);r.sort(r.sports,"sport_name",!1),r.SetupSportsView(e,t,n)})}},changeSports:function(e){var t=this;console.log("SPORTS",t.sports);var n=d(e.target).val(),r=d(e.target).attr("orgsid");console.log("Event Target Sports List",d(e.target),n,r);if(n!=0&&n!=null&&n!=""&&r&&r!=0&&r!=null&&r!=""){t.sport_id=n;var i=t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.divLevels);console.log("CALLED",i),i.html(""),t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.btnAddLevel).attr("sportid",n),t.fillCompLevel(r,i,n)}else t.sport_id=0},SetupSportsView:function(e,t,n){var i=this,s=p.to_html(r,{sports:i.sports,orgsId:e});i.$(t).append(s),n&&i.$(t).find(".section-sportslevel .select-sports-outer-h").hide(),d(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),n&&i.$(t).find(".ddl-sports").val(n).trigger("change"),d(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){var t=this;if(!(t.sports&&t.sports.length<1))return 0;for(var n=0;n<t.sports.length;n++)if(t.sports[n].id==e)return t.sports[n]},fillCompLevel:function(e,t,n){var r=this;r.compLevel_id=undefined;if(e&&e>0){var i=new y;i.orgs_id=e,r.compFetchRequest=r.abortRequest(r.compFetchRequest);var s=i.fetch();r.compFetchRequest.push(s),d.when(i.request).done(function(){if(i.isError())return;var s=i.toJSON();r.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){r.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)r.compLevel.push(s.payload.complevels[o]);var u=r.findSportById(n);u||(u=n),r.SetUpCompLevelView(e,t,u)}})}else d(t).html("")},changeCompLevel:function(e){var t=this,n=d(e.target).val();t.compLevel_id=0;for(var r in t.compLevel)if(t.compLevel[r].complevel_id==n){t.compLevel_id=n,t.$(e.target).attr("disabled","disabled"),t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.divSeasons).fadeIn();return}t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var r=this,s=n.sports_id;s||(s=n);var o=r.GetSeasonsData(r.seasons,e,s);console.log(o);var u=p.to_html(i,{levels:r.compLevel,Data:o,sport:n});r.$(t).append(u);var a=r.$(t).find(r.controls.modalPositionBody);r.fillPositions(s,a)},levelUpArrow:function(e){var t=this,n=d(e.currentTarget).parents(".complevels-wrapper"),r=n.find(".complevels-container").scrollTop(),i=n.find(".complevels-container").height();if(r>i)var s=r-i;else var s=0;n.find(".complevels-container").animate({scrollTop:s})},levelDownArrow:function(e){var t=this,n=d(e.currentTarget).parents(".complevels-wrapper"),r=n.find(".complevels-container").scrollTop(),i=r+n.find(".complevels-container").height();n.find(".complevels-container").animate({scrollTop:i})},GetSeasonsData:function(e,t,n){var r=this,i=[],s=(new Date).getFullYear();for(var o=r.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};i.push(u),s--}return i},fillPositions:function(e,t){var n=this;console.log("fillpositions",e,t),e?(console.log("sport_id",e,"destination",t),this.positionView=new w({name:"settings-high-school-positions",destination:t,sport_id:e}),n.$el.find(n.controls.ddlSports).parent().find(n.controls.fieldError).html("").fadeOut()):n.$el.find(n.controls.ddlSports).parent().find(n.controls.fieldError).html(n.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){var t=this;t.clickedPositionTarget=d(e.target);if(d(e.target).parent().find(t.controls.chkSeasons).is(":checked")){var n=d(e.target).attr("teamid");console.log(d(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle));if(d(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle).length>0){t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPositionsTitle).attr("teamid",n).removeClass("active");var r=d(e.target).attr("positions");console.log("ids",r);if(r){var i=r.split(",");d.each(i,function(n,r){t.$(e.target).parents(t.controls.divSubLevels).find("#pos-"+r).addClass("active")})}t.$(e.target).parents(t.controls.divSubLevels).find(t.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport")}else alert("Select Season")},MarkPosition:function(e){var t=this,n=t.$(e.target),r=d(e.target).attr("teamid"),i=d(e.target).attr("positionId"),s={id1:t.user_id,user_id:t.user_id,positions_id:i,teams_id:r};if(n.hasClass("active")){s.position_id=i;var o=new x(s);o.user_id=t.user_id,o.type="delete",o.destroy({data:s}),d.when(o.request).done(function(){n.removeClass("active"),t.updatePositionButtonNumber(r,!1)})}else{var o=new x(s);o.user_id=t.user_id,o.type="save",o.save(),d.when(o.request).done(function(){n.addClass("active"),t.updatePositionButtonNumber(r,!0)})}},AddLevel:function(e){var t=this,n=t.$(e.target).parents(t.controls.divsportsLevel).find(t.controls.divLevels),r=d(e.target).attr("orgsid"),i=d(e.target).attr("sportid");r&&r!=0&&r!=null&&r!=""?(console.log("destination add level function",n),t.fillCompLevel(r,n,i)):console.error("Orgs Id is ",r)},AddSports:function(e){var t=this,n=t.$(e.target).attr("orgsid"),r=d(t.controls.divSportsWrapper+'[orgsId="'+n+'"] '+t.controls.divSchoolSportsSection);n&&n!=0&&n!=null&&n!=""&&(t.fillSports(n,r),d(r).parents(t.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){var t=this;t.$(e.target).parents(t.controls.divsportsLevel).remove()},SetUpTeamsView:function(){var e=this;console.log("Highschool teams view Set Up Teams View",e.type),this.teamsView=new E({user_id:e.user_id,destination:e.controls.divTeamListDetail,sports_club:e.type=="school"?0:1,org_type:e.type})},SetUpAddSchool:function(){var e=this;e.$el.find(e.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){var t=this;t.$el.find(t.controls.btnFinishSports).html("Finish");if(d(e.target).is(":checked")&&d(e.target).attr("seasonid")&&d(e.target).attr("year")){var n=d(e.target).attr("orgsid"),r=d(e.target).parents(t.controls.divSubLevels).find(t.controls.ddlComplevel).val();if(n&&n!=0&&n!=null&&n!=""&&r&&r!=0&&r!=null&&r!=""){var i={orgs_id:n,teams_id:0,id1:t.user_id,user_id:t.user_id,sports_id:d(e.target).attr("sportsid"),complevels_id:r,seasons_id:d(e.target).attr("seasonid"),year:d(e.target).attr("year")},s=new S(i);s.type="add",s.user_id=t.user_id,s.save(),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();if(n!=null&&n.payload!=null||n.payload.id!=null)d(e.target).attr("teamid",n.payload.id),console.log(n.payload.seasons_obj),t.insertPositionsButton(d(e.target),n.payload.seasons_obj,n.payload.year,n.payload.id)})}else{var o=d(e.target).parents(t.controls.divLevels).find(t.controls.ddlComplevel);d(o).parent().find(t.controls.fieldError).html(t.messages.SelectLevel).stop().fadeIn(),d(e.target).parent().find(t.controls.btnOpenPositions).attr("disabled","disabled")}}else!d(e.target).is(":checked")&&d(e.target).attr("teamid")&&t.DeleteTeam(e)},DeleteTeam:function(e){var t=this,n=d(e.target).attr("teamid");if(n){var r={};r.user_id=t.user_id,r.team_id=n;var i=new S(r);i.user_id=t.user_id,i.team_id=n,i.type="delete",i.destroy({data:{user_id:t.user_id,teams_id:n},processData:!0,success:function(){d(e.target).removeAttr("teamid"),d(e.target).parent().find(t.controls.btnOpenPositions).attr("disabled","disabled")}})}},FinishSports:function(){console.log("Current state of view",this);var e=this;e.ClearAddNewForm(),e.init()},ClearAddNewForm:function(){var e=this;e.RemoveSportsSection(),e.$(e.controls.txtStates).val(""),e.states_id=undefined,e.$(e.controls.txtSchools).attr("disabled","disabled").val(""),e.orgs_id=undefined,e.type=="club"?e.$el.find(".add-club-h").show():e.$el.find(".add-school-h").show(),e.$el.find(e.controls.divAddSportSection).fadeOut()},EditTeam:function(e){var t=this;console.log("Event",e.target);var n=d(e.target).attr("orgsId"),r=d(e.target).attr("sportId"),i=d(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+n+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",d(i).html(s);var o=d(i).find(t.controls.divLevels);d.each(t.teamsView.Teams,function(e,i){n==i.payload.org_id&&d.each(i.payload.sports,function(e,i){if(i.sports_id==r){t.SetUpEditTeamView(n,o,r,i);return}})})},SetUpEditTeamView:function(e,t,n,r){var i=this;i.compLevel_id=undefined;if(e&&e>0){var s=new y;s.orgs_id=e,s.fetch(),console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),d.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);d.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);d(u).val(s.complevels_id).attr("disabled","disabled"),d(o[n]).find(i.controls.divSeasons).fadeIn(),d.each(s.seasons,function(e,t){d(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),i.insertPositionsButton(d(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year),t)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},insertPositionsButton:function(e,t,n,r){console.log(t),t.positions||(t.positions=[]),t.seasons_id||(t.seasons_id=t.season_id),t.year&&(n=t.year),t.team_id&&(r=t.team_id),console.log(_self.controls.btnOpenPositions+'[teamid="'+r+'"]',d(_self.controls.btnOpenPositions+'[teamid="'+r+'"]')),d(e).parent().find(_self.controls.btnOpenPositions+'[teamid="'+r+'"]').length?d(e).parent().find(_self.controls.btnOpenPositions+'[teamid="'+r+'"]').removeAttr("disabled","disabled"):d(e).parent().append('<a href="javascript:void(0)" id="season-positions-'+t.seasons_id+"-"+n+'" class="btnOpenPositions btn" >Positions ('+t.positions.length+")</a>"),d(e).parent().find(_self.controls.btnOpenPositions).attr("teamid",r),d(e).parent().find(_self.controls.btnOpenPositions).attr("data-number-positions",t.positions.length);var i="";t.positions&&d.each(t.positions,function(e,t){t&&(i+=t.id+",")}),d(e).parent().find(_self.controls.btnOpenPositions).attr("positions",i)},updatePositionButtonNumber:function(e,t){var n=d(_self.controls.btnOpenPositions+'[teamid="'+e+'"]'),r=n.data("number-positions"),i=t?r+1:r-1;n.data("number-positions",i).html("Positions ("+i+")")},ClosePositions:function(e){var t=this;if(t.clickedPositionTarget){var n=d(e.target).parents(t.controls.modalPosition).find(t.controls.modalPositionsTitle),r="";n.each(function(){d(this).hasClass("active")&&(r+=d(this).attr("positionid")+",")}),d(t.clickedPositionTarget).attr("positions",r),t.clickedPositionTarget=undefined}}}),o}),define("profilesetting/views/club",["require","text!profilesetting/templates/club.html","text!profilesetting/templates/sportslevel.html","text!profilesetting/templates/level.html","facade","views","utils","vendor","profilesetting/collections/states","profilesetting/collections/schools","profilesetting/collections/sports","profilesetting/views/teams","profilesetting/models/complevel","profilesetting/views/seasons","profilesetting/views/positions","profilesetting/models/team","profilesetting/models/position"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/states"),v=e("profilesetting/collections/schools"),m=e("profilesetting/collections/sports"),g=e("profilesetting/models/complevel"),y=e("profilesetting/views/seasons"),b=e("profilesetting/views/positions"),w=e("profilesetting/views/teams"),E=e("profilesetting/models/team"),S=e("profilesetting/models/position"),s=a.extend({template:t,events:{"keyup #txt-club-state":"keyupState","blur #txt-club-state":"changeState","keyup #txt-club-club":"keyupSchool","blur #txt-club-club":"changeSchool","change .ddl-sports":"changeSports","change .ddl-complevel":"changeCompLevel","change .chkSeasons":"AddSportsItem","click .btn-add-level":"AddLevel","click .spn-position-title_h":"MarkPosition","click .btn-add-sports":"AddSports","click .btn-Remove-Sport":"RemoveSports","click #btn-Add-club":"SetUpAddSchool","click .delete-team":"DeleteTeam","click .btn-Save-Positions":"SavePositions","click .btn-Close-Positions":"ClosePositions","click .btn-Finish-Sports":"FinishSports","click .edit-team":"EditTeam","click .btnOpenPositions":"displayPositionPopup","click .add-club-h":"openAddClubPopup","click .up-arrow-h":"levelUpArrow","click .down-arrow-h":"levelDownArrow"},controls:{txtStates:"#txt-club-state",txtSchools:"#txt-club-club",content:"#content-club-prof-setting",fieldMessage:".field-message",fieldError:".field-error",ddlSports:".ddl-sports",ddlComplevel:".ddl-complevel",modalPosition:".modal-positions",modalPositionBody:".modal-position-body",modalPositionsTitle:".spn-position-title_h",divSportsNameHeading:".spn-sport-name",divMainSportsSection:"#def-club-sports-section",divLevels:".div-sports-level",divSeasons:".div-seasons",divsportsLevel:".section-sportslevel",divSubLevels:".div-levels",divSchoolSportsSection:".school-sports-section",divSportsWrapper:".div-sports-wrapper",btnRemoveSports:".btn-Remove-Sport",divTeamListDetail:".section-team-list-detail-club",divAddSportSection:"#section-Add-Sports-club",btnAddSports:".btn-add-sports",btnClosePositions:".btn-Close-Positions",btnFinishSports:".btn-Finish-Sports",btnOpenPositions:".btnOpenPositions",chkSeasons:".chkSeasons",btnAddLevel:".btn-add-level"},messages:{dataNotExist:'No teams set up yet.  Click "Add a Club" to link up with your club teams.',optionsMissing:"HeaderView expects option with model property.",selectSport:"Please select sport",selectState:"Please insert state",selectSchool:"Please insert Club",SelectLevel:"Plesae Select Comp Level"},properties:{show_prev_year:30},states:[],schools:[],initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},levelUpArrow:function(e){var t=p(e.currentTarget).parents(".complevels-wrapper"),n=t.find(".complevels-container").scrollTop(),r=t.find(".complevels-container").height();if(n>r)var i=n-r;else var i=0;t.find(".complevels-container").animate({scrollTop:i})},levelDownArrow:function(e){var t=p(e.currentTarget).parents(".complevels-wrapper"),n=t.find(".complevels-container").scrollTop(),r=n+t.find(".complevels-container").height();t.find(".complevels-container").animate({scrollTop:r})},openAddClubPopup:function(){var e=this;routing.trigger("add-school-init","","","club",e,function(t){e.$el.find(e.controls.txtSchools).val(t.name),e.$el.find(e.controls.txtStates).val(t.locationState.name),e.states_id="",e.orgs_id="",e.states_id=t.locationState.id,e.$(i.controls.txtSchools).removeAttr("disabled"),e.orgs_id=t.org_id,e.$el.find(e.controls.divMainSportsSection).find(e.controls.ddlSports).length<1&&i.fillSports(e.orgs_id,e.controls.divMainSportsSection),e.$el.find(".add-club-h").hide()})},init:function(){i.setupView(),i.SetUpTeamsView()},render:function(){var e=this;a.prototype.render.call(this)},setupView:function(){},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender},keyupState:function(e){var t=p(i.controls.txtStates).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!="")if(r==1){i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.RemoveSportsSection();var s=new d;s.state_name=t,console.log("State Request Abort Request Function AddGame/Main.js"),i.stateFetchRequest=i.stateFetchRequest||[],i.stateFetchRequest.push(i.cityFetchRequest||[]),i.stateFetchRequest.push(i.schoolFetchRequest||[]),i.stateFetchRequest=i.abortRequest(i.stateFetchRequest),p(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();i.stateFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var e=s.toJSON();e==null||e.length<1?i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtStates).parent().find(i.controls.fieldMessage).html("").fadeOut(),i.states=[];for(var t in e)i.states.push(e[t].payload);i.states.forEach(function(e,t){n.push(e.name)});try{i.$el.find(i.controls.txtStates).autocomplete("destroy")}catch(r){}i.$el.find(i.controls.txtStates).autocomplete({source:n}),i.$el.find(i.controls.txtStates).trigger("keydown")})}else i.changeState(e)},changeState:function(e){var t=p(e.target).val(),n=!1;i.states_id="",i.states.forEach(function(e,r){e["name"]==t&&(n=!0,i.states_id=e.id,i.$el.find(i.controls.txtSchools).removeAttr("disabled"))}),n||(i.states_id=0,i.$el.find(i.controls.txtSchools).attr("disabled","disabled").val(""))},keyupSchool:function(e){var t=p(e.target).val(),n=[],r=i.isValidAutoCompleteKey(e);if(t!=""&&r==1){i.RemoveSportsSection();var s=new v;s.sports_club=1,s.states_id=i.states_id,s.org_name=t,console.log("School Request Abort Request Function"),i.schoolFetchRequest=i.abortRequest(i.schoolFetchRequest),p(e.target).addClass("ui-autocomplete-loading");var o=s.fetch();i.schoolFetchRequest.push(o),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn():i.$el.find(i.controls.txtSchools).parent().find(i.controls.fieldMessage).html("").stop().fadeOut(),i.schools=[];for(var r in t)i.schools.push(t[r].payload);i.schools.forEach(function(e,t){n.push(e.org_name)});try{i.$el.find(i.controls.txtSchools).autocomplete("destroy")}catch(o){}p(e.target).autocomplete({source:n}),i.$el.find(i.controls.txtSchools).trigger("keydown")})}else i.RemoveSportsSection(),i.changeSchool(e)},changeSchool:function(e){var t=this.$(e.target).val();i.orgs_id=0,i.schools.forEach(function(e,n){e["org_name"]==t&&(i.orgs_id=e.org_id,i.$el.find(i.controls.divMainSportsSection).find(i.controls.ddlSports).length<1&&i.fillSports(i.orgs_id,i.controls.divMainSportsSection))})},RemoveSportsSection:function(){i.$el.find(i.controls.divMainSportsSection).html("")},fillSports:function(e,t){if(i.sports&&i.sports.length>0)i.SetupSportsView(e,t);else{var n=new m;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,i.gender=="male"?n.male=1:i.gender=="famale"&&(n.female=0),n.fetch(),p.when(n.request).done(function(){if(n.isError())return;var r=n.toJSON();(r==null||r.length<1)&&i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldMessage).html(i.messages.dataNotExist).stop().fadeIn(),i.sports=[];for(var s in r)i.sports.push(r[s].payload);i.sort(i.sports,"sport_name",!1),i.SetupSportsView(e,t)})}},changeSports:function(e){console.log("SPORTS",i.sports);var t=p(e.target).val(),n=p(e.target).attr("orgsid");console.log("Event Target Sports List",p(e.target),t,n);if(t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){i.sport_id=t;var r=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels);console.log("CALLED",r),r.html(""),i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",t),i.fillCompLevel(n,r,t)}else i.sport_id=0},SetupSportsView:function(e,t){var r=h.to_html(n,{sports:i.sports,orgsId:e});i.$(t).append(r),p(t).parents(i.controls.divSportsWrapper).find(i.controls.btnAddSports).attr("orgsid",e),p(t).parents(i.controls.divSportsWrapper).fadeIn()},findSportById:function(e){if(i.sports.length<1)return 0;for(var t=0;t<i.sports.length;t++)if(i.sports[t].id==e)return i.sports[t]},fillCompLevel:function(e,t,n){i.compLevel_id=undefined;if(e&&e>0){var r=new g;r.orgs_id=e,console.log("Complevels Request Abort Request Function"),i.compFetchRequest=i.abortRequest(i.compFetchRequest);var s=r.fetch();i.compFetchRequest.push(s),p.when(r.request).done(function(){if(r.isError())return;var s=r.toJSON();i.compLevel=[];if(s!=null&&s.payload!=null||s.payload.complevels!=null&&s.payload.complevels.length){i.seasons=s.payload.seasons||[];for(var o in s.payload.complevels)i.compLevel.push(s.payload.complevels[o]);var u=i.findSportById(n);i.SetUpCompLevelView(e,t,u)}})}else p(t).html("")},changeCompLevel:function(e){var t=p(e.target).val();i.compLevel_id=0;for(var n in i.compLevel)if(i.compLevel[n].complevel_id==t){i.compLevel_id=t,i.$(e.target).attr("disabled","disabled"),i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeIn();return}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.divSeasons).fadeOut()},SetUpCompLevelView:function(e,t,n){var s=n.sports_id,o=i.GetSeasonsData(i.seasons,e,s),u=h.to_html(r,{levels:i.compLevel,Data:o,sport:n});i.$(t).append(u);var a=i.$(t).find(i.controls.modalPositionBody);i.fillPositions(s,a)},GetSeasonsData:function(e,t,n){var r=[],s=(new Date).getFullYear();for(var o=i.properties.show_prev_year;o>=0;o--){var u={year:s,seasons:e,orgsId:t,sportsId:n};r.push(u),s--}return r},fillPositions:function(e,t){e?(this.positionView=new b({name:"settings-club-positions",destination:t,sport_id:e}),i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html("").fadeOut()):i.$el.find(i.controls.ddlSports).parent().find(i.controls.fieldError).html(i.messages.selectSport).stop().fadeIn()},displayPositionPopup:function(e){alert("test"),i.clickedPositionTarget=p(e.target);var t=p(e.target).attr("teamid");if(p(e.target).parent().find(i.controls.chkSeasons).is(":checked"))if(p(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).length>0){i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPositionsTitle).attr("teamid",t).removeClass("active");var n=p(e.target).attr("positions");if(n){var r=n.split(",");p.each(r,function(t,n){i.$(e.target).parents(i.controls.divSubLevels).find("#pos-"+n).addClass("active")})}i.$(e.target).parents(i.controls.divSubLevels).find(i.controls.modalPosition).modal("show")}else alert("No Positions exists for the sport");else alert("Select Season")},MarkPosition:function(e){var t=i.$(e.target),n=p(e.target).attr("teamid"),r=p(e.target).attr("positionId"),s={id1:i.user_id,user_id:i.user_id,positions_id:r,teams_id:n};if(t.hasClass("active")){s.position_id=r;var o=new S(s);o.user_id=i.user_id,o.type="delete",o.destroy({data:s}),p.when(o.request).done(function(){t.removeClass("active")})}else{var o=new S(s);o.user_id=i.user_id,t.addClass("active"),o.type="save",o.save()}},AddLevel:function(e){var t=i.$(e.target).parents(i.controls.divsportsLevel).find(i.controls.divLevels),n=p(e.target).attr("orgsid"),r=p(e.target).attr("sportid");n&&n!=0&&n!=null&&n!=""?i.fillCompLevel(n,t,r):console.error("Orgs Id is ",n)},AddSports:function(e){var t=i.$(e.target).attr("orgsid"),n=p(i.controls.divSportsWrapper+'[orgsId="'+t+'"] '+i.controls.divSchoolSportsSection);t&&t!=0&&t!=null&&t!=""&&(i.fillSports(t,n),p(n).parents(i.controls.divSportsWrapper).fadeIn())},RemoveSports:function(e){i.$(e.target).parents(i.controls.divsportsLevel).remove()},SetUpTeamsView:function(){this.teamsView=new w({user_id:i.user_id,destination:i.controls.divTeamListDetail,sports_club:1,org_type:"club"})},SetUpAddSchool:function(){i.$el.find(i.controls.divAddSportSection).fadeIn()},AddSportsItem:function(e){if(p(e.target).is(":checked")&&p(e.target).attr("seasonid")&&p(e.target).attr("year")){var t=p(e.target).attr("orgsid"),n=p(e.target).parents(i.controls.divSubLevels).find(i.controls.ddlComplevel).val();if(t&&t!=0&&t!=null&&t!=""&&n&&n!=0&&n!=null&&n!=""){var r={orgs_id:t,teams_id:0,id1:i.user_id,user_id:i.user_id,sports_id:p(e.target).attr("sportsid"),complevels_id:n,seasons_id:p(e.target).attr("seasonid"),year:p(e.target).attr("year")},s=new E(r);s.type="add",s.user_id=i.user_id,s.save(),p.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();if(t!=null&&t.payload!=null||t.payload.id!=null)p(e.target).attr("teamid",t.payload.team_id),p(e.target).parent().find(i.controls.btnOpenPositions).attr("teamid",t.payload.id).removeAttr("disabled")})}else{console.error("OrgsId & ComplevelIds are",t,n);var o=p(e.target).parents(i.controls.divLevels).find(i.controls.ddlComplevel);p(o).parent().find(i.controls.fieldError).html(i.messages.SelectLevel).stop().fadeIn(),p(e.target).parent().find(i.controls.btnOpenPositions).attr("disabled","disabled")}}else!p(e.target).is(":checked")&&p(e.target).attr("teamid")&&i.DeleteTeam(e)},DeleteTeam:function(e){var t=p(e.target).attr("teamid");if(t){var n={};n.user_id=i.user_id,n.team_id=t;var r=new E(n);r.user_id=i.user_id,r.team_id=t,r.type="delete",r.destroy({data:{user_id:i.user_id,teams_id:t},processData:!0,success:function(){p(e.target).removeAttr("teamid"),p(e.target).parent().find(i.controls.btnOpenPositions).removeAttr("teamid").removeAttr("positions").attr("disabled","disabled")}})}},FinishSports:function(){i.ClearAddNewForm(),i.init()},ClearAddNewForm:function(){i.RemoveSportsSection(),i.$(i.controls.txtStates).val(""),i.states_id=undefined,i.$(i.controls.txtSchools).attr("disabled","disabled").val(""),i.orgs_id=undefined,i.$el.find(i.controls.divAddSportSection).fadeOut(),i.$el.find(".add-club-h").show()},EditTeam:function(e){console.log("self.teamsView.Teams",i.teamsView.Teams);var t=p(e.target).attr("orgsId"),n=p(e.target).attr("sportId"),r=p(e.target).parent(),s='<div class="section-sportslevel"><div class="div-sports-level"></div>';s+='<a tabindex="0" orgsid="'+t+'" class="btn-add-level" href="javascript:void(0)">Add Level</a>',s+='<span class="floatRight"><a href="javascript:void(0)" class="common-btn common-btn-direction btn-Finish-Sports" tabindex="0">Finish</a> </span>',s+="</div>",p(r).html(s);var o=p(r).find(i.controls.divLevels);p.each(i.teamsView.Teams,function(e,s){console.log("team",s),t==s.payload.org_id&&p.each(s.payload.sports,function(e,s){console.log("sport",s);if(s.sports_id==n){i.SetUpEditTeamView(t,r,n,s);return}})})},SetUpEditTeamView:function(e,t,n,r){i.compLevel_id=undefined;if(e&&e>0){var s=new g;s.orgs_id=e,console.log("Complevel Model Request Abort Request Function"),i.compLevelFetchRequest=i.abortRequest(i.compLevelFetchRequest),i.compLevelFetchRequest=s.fetch(),p.when(s.request).done(function(){if(s.isError())return;var n=s.toJSON();i.compLevel=[];if(n!=null&&n.payload!=null||n.payload.complevels!=null&&n.payload.complevels.length){i.seasons=n.payload.seasons||[];for(var o in n.payload.complevels)i.compLevel.push(n.payload.complevels[o]);p.each(r.complevels,function(n,s){i.SetUpCompLevelView(e,t,r);var o=i.$(t).find(i.controls.divSubLevels);if(o[n]){var u=i.$(o[n]).find(i.controls.ddlComplevel);p(u).val(s.complevels_id).attr("disabled","disabled"),p(o[n]).find(i.controls.divSeasons).fadeIn(),p.each(s.seasons,function(e,t){p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).attr("checked","checked").attr("teamid",t.team_id),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("teamid",t.team_id);var r="";t.positions&&p.each(t.positions,function(e,t){t&&(r+=t.id+",")}),p(o[n]).find(".chkSeasons-"+t.seasons_id+"-"+t.year).parent().find(i.controls.btnOpenPositions).attr("positions",r)})}})}}),i.$(t).parents(i.controls.divsportsLevel).find(i.controls.btnAddLevel).attr("sportid",n)}},ClosePositions:function(e){if(i.clickedPositionTarget){var t=p(e.target).parents(i.controls.modalPosition).find(i.controls.modalPositionsTitle),n="";t.each(function(){p(this).hasClass("active")&&(n+=p(this).attr("positionid")+",")}),p(i.clickedPositionTarget).attr("positions",n),i.clickedPositionTarget=undefined}}});return s}),define("profilesetting/models/high_school",["user/models/basics"],function(e){var t;return t=e.extend({fetchSuccess:function(t,n){e.prototype.fetchSuccess.call(this,t,n);var r=new Date(t.get("payload").dob),i=new Date,s=i.getFullYear()-r.getFullYear();s>18?t.set("show_highschool",!1):t.set("show_highschool",!0)}}),t}),define("text!profilesetting/templates/individualsports.html",[],function(){return'<div class="sub-section-prof-setting">\r\n\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Individual Sports</span>\r\n	</div>\r\n	<span style="padding:10px 50px 10px 50px; font-weight: bold; font-size:.9em; display: block;">Individual sports are sports that you participate in without a team.&nbsp;&nbsp;An easy way to understand it is when you go to a Meet / Event and dominate, did YOU win, or did your TEAM win?  If you won, chances are you want to choose your sport below.\r\n		Another question you can ask, is "Can you compete in an event for this sport without a team?".<br/><br/>\r\n		There are gray areas like boxing gyms or MMA gyms where you belong to and compete for a gym, but it\'s you that wins the fight and it\'s two people competing, not two teams.&nbsp;&nbsp;We\'re working on building support for that, but now, use the individual sport section to add the sport to your profile.<br/><br/>\r\n	If you are dealing with a team sport, go to the sections above to select your team.&nbsp;&nbsp;There is a section for school-based teams and one for club-based teams.&nbsp;&nbsp;If you can\'t find it in the auto-complete search, you can add a new one.&nbsp;&nbsp;If you find this confusing, please don\'t hesitate to send an email to weare@athletez.com</span>\r\n	<div class="section-individual-sports">\r\n		<div class="org-sport-list">\r\n			<div class="org-sport-list-header">\r\n				<div class="org-name">Select The Sports you Participate in</div>\r\n			</div>\r\n			<div class="sports-list-individial-sports"></div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!profilesetting/templates/sportscheckbox.html",[],function(){return'{{#sports}}\r\n<div>\r\n	<div class="org-sport-list-header">\r\n		<div class="sport-name">\r\n			<input type="checkbox" id="chk-ind-{{sport_id}}" class="chk-single" sportid="{{sport_id}}" />\r\n			<img src="{{icon}}" alt="{{sports_name}}" />\r\n			{{sports_name}}\r\n			<span class="alert alert-danger displayNone error_h"></span>\r\n			<span class="alert alert-success displayNone success_h"></span>\r\n		</div>\r\n	</div>\r\n</div>\r\n{{/sports}}'}),define("text!profilesetting/templates/sportitem.html",[],function(){return'<div class="span12">\r\n	Users Sports\r\n</div>\r\n{{#sports}}\r\n<div class="span12">\r\n<span class="span3">\r\n			<label>{{sport_name}}</label></span>\r\n			<span class="span3">\r\n				\r\n				<a href="javascript:void(0)" class="delete-individualsport" sportid="{{sport_id}}">Delete</a>\r\n				</span>\r\n</div>\r\n{{/sports}}'}),define("profilesetting/collections/individualsports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){if(testpath)return testpath+"/api/user/sports";if(this.type=="get")return"/api/user/sports/"+this.user_id+"?team_type=individual"},data:{sports_id:this.sports_id}}),i}),define("profilesetting/models/sport",["facade","sportorg/models/sport"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"user_id",url:function(){this.orgs_id==undefined;if(this.type=="save")return"/api/user/addsport/"+this.user_id;if(this.type=="delete")return"/api/user/sport/"+this.user_id}}),n}),define("profilesetting/views/individuals",["require","text!profilesetting/templates/individualsports.html","text!profilesetting/templates/sportscheckbox.html","text!profilesetting/templates/sportitem.html","facade","views","utils","vendor","profilesetting/collections/individualsports","sportorg/collections/sports_listall","profilesetting/models/sport"],function(e,t,n,r){var i,s,o=e("facade"),u=e("views"),a=u.SectionView,f=e("utils"),l=f.lib.Channel,c=e("vendor"),h=c.Mustache,p=o.$,d=e("profilesetting/collections/individualsports"),v=e("profilesetting/models/sport"),m=e("sportorg/collections/sports_listall"),s=a.extend({template:t,events:{"change .select-all":"CheckAll","change .chk-single":"CheckSingle","click .delete-individualsport":"DeleteSport"},controls:{content:"#section-individual-prof-setting",sportslist:".sports-list-individial-sports",btnSave:".btn-Save-Individual-Sports",chkAll:".select-all",chkSingle:".chk-single",userSportsList:".sports-list-user-individual-sports"},messages:{dataNotExist:"Couldn't find any matches",optionsMissing:"HeaderView expects option with model property."},initialize:function(e){a.prototype.initialize.call(this,e),i=this,i.setOptions(e),this.init()},init:function(){i.setupSportsView()},render:function(){a.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id,this.gender=e.gender,this.destination=e.destination},setUpUsersSports:function(){console.log("setUpSportsView Individual View");var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(r,{sports:i.sports});console.log("Users Own Sports",i.sports),i.$(i.controls.userSportsList).html(s)})},setUpUsersSportsCheck:function(){var e=new d;e.user_id=i.user_id,e.male=1,e.female=0,e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var n in t)t[n].payload.team_type=="individual"&&i.sports.push(t[n].payload);i.sort(i.sports,"sport_name",!1),p.each(i.sports,function(e,t){i.$el.find("#chk-ind-"+t.sport_id).attr("checked","checked")})})},setupSportsView:function(){console.log("setUpSportsView Individual View");var e=new m;console.log(e),e.user_id=i.user_id,e.sport_type_id=2,i.gender=="male"?e.male=1:i.gender=="famale"&&(e.female=0),e.type="get",e.fetch(),p.when(e.request).done(function(){if(e.isError())return;var t=e.toJSON();if(t==null||t.length<1)return;i.sports=[];for(var r in t)i.sports.push(t[r].payload);i.sort(i.sports,"sport_name",!1);var s=h.to_html(n,{sports:i.sports});i.$(i.controls.sportslist).html(s),i.setUpUsersSportsCheck()})},SaveSport:function(e){console.log("Save Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n=new v;n.user_id=i.user_id,n.sports_id=t,n.type="save",console.log("Save Model Request Abort Request Function"),i.sportsModelFetchRequest=i.abortRequest(i.sportsModelFetchRequest),i.compLevelFetchRequest=n.save({sports_id:t}),p.when(n.request).done(function(){var t=p(e.currentTarget).parent().find(".success_h");t.removeClass("displayNone").html("Sport Added Successfully."),setTimeout(function(){t.addClass("displayNone").html("")},3e3),i.setUpUsersSportsCheck()})}},DeleteSport:function(e){console.log("Delete Sport");var t=p(e.target).attr("sportid");console.log(t);if(t){var n={user_id:i.user_id,sports_id:t},r=new v(n);r.user_id=i.user_id,r.type="delete",r.destroy({data:n,processData:!0,success:function(){var t=p(e.currentTarget).parent().find(".success_h");t.removeClass("displayNone").html("Sport Removed Successfully."),setTimeout(function(){t.addClass("displayNone").html("")},3e3),i.setUpUsersSportsCheck()}})}},CheckAll:function(e){p(e.target).is(":checked")?i.$(i.controls.chkSingle).attr("checked","checked"):i.$(i.controls.chkSingle).removeAttr("checked","checked")},CheckSingle:function(e){p(e.target).is(":checked")?i.SaveSport(e):i.DeleteSport(e)}});return s}),define("profilesetting",["require","text!profilesetting/templates/layout.html","facade","controller","models","views","utils","profilesetting/models/basic_info","profilesetting/views/basic_info","profilesetting/views/org","profilesetting/views/club","profilesetting/models/high_school","profilesetting/views/individuals"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("profilesetting/models/basic_info"),d=e("profilesetting/views/basic_info"),v=e("profilesetting/views/org"),m=e("profilesetting/views/club"),g=e("profilesetting/views/individuals"),y=e("profilesetting/models/high_school"),b=e("profilesetting/collections/individualsports");return n=i.extend({cssArr:[base_url+"pages/profilesetting/profilesettings.css"],initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),this.scheme=[],e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;return this.layout?this.layout:(e=new h({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"}),this.layout=e,this.layout)},setupView:function(){var e=this;this.basicInfoModel=new p,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),a.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.addHighSchool(),e.SetUpClubView(),e.setUpIndividualView()})},setUpBasicView:function(){this.basicView=new d({id:self.id})},addHighSchool:function(){var e=this,t=new y;t.set("type","School"),this.schoolView=new v({model:t,name:"settings-high-school",destination:"#content-school-prof-setting",user_id:e.id,type:"school",gender:e.gender}),this.scheme.push(this.schoolView),this.layout.render()},setUpIndividualView:function(){var e=this;this.individualSportsView=new g({model:new b({user_id:e.id}),name:"settings-individual-sports",destination:"#section-individual-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.individualSportsView),this.layout.render()},SetUpClubView:function(){var e=this,t=new y;t.set("type","Club"),this.clubView=new v({model:t,name:"settings-club",type:"club",destination:"#content-club-prof-setting",user_id:e.id,gender:e.gender}),this.scheme.push(this.clubView),this.layout.render()}}),n}),define("text!userresume/templates/layout.html",[],function(){return'<div class="main-container" style="margin : auto">\r\n	<!-- Basic Info Section Starts-->\r\n	<div id="section-basics-prof-setting" style=""></div>\r\n	<!-- Basic Info Section Ends-->\r\n\r\n<!-- Sent Resume Section Starts\r\n	<div id="section-sent-resume">\r\n\r\n	</div>-->\r\n<!-- Sent Resume Section Ends -->\r\n\r\n<!-- Rd Tree Section Starts -->\r\n	<div id="section-RD-Tree">\r\n		\r\n	</div>\r\n<!-- Rd Tree Section Ends -->\r\n\r\n<!-- Academic Gpa Section Starts\r\n	<div id="section-academic">\r\n		\r\n	</div>\r\n<!-- Academic Gpa Section Ends -->\r\n\r\n<!-- User Awards Section Starts\r\n	<div id="section-awards">\r\n		\r\n	</div>\r\n<!-- User Awards Section Ends -->\r\n\r\n<!-- User References Section Starts\r\n	<div id="section-references">\r\n		\r\n	</div>\r\n<!-- User Reference Section Ends -->\r\n\r\n<!-- User Contacts Section Starts\r\n	<div id="section-contacts">\r\n		\r\n	</div>\r\n<!-- User Contacts Section Ends -->\r\n\r\n\r\n	<div id="main-footer-prof-setting">\r\n	</div>\r\n</div>\r\n'}),define("text!userresume/templates/sentresume.html",[],function(){return'<div class="row-fluid sub-section-prof-setting well well-large">\r\n<div class="row-fluid">\r\n	<span class="spn-black-heading  well-small">Sent Resumes</span>\r\n</div>\r\n<div id="btn-Add-Resume" class="clearfix div-add-dotted well-small">\r\n	+ Send Resume\r\n</div>\r\n<table class="row-fluid">\r\n	<tr>\r\n		<th>Id</th>\r\n		<th>Sports Id</th>\r\n		<th>Users Id</th>\r\n		<th>College Coach Id</th>\r\n	</tr>\r\n	{{#resumes}}\r\n	<tr>\r\n		<td>{{id}}</td>\r\n		<td>{{sports_id}}</td>\r\n		<td>{{users_id}}</td>\r\n		<td>{{college_coach_id}}</td>\r\n	</tr>\r\n	{{/resumes}}\r\n</table>\r\n</div>'}),define("text!userresume/templates/basic_info_header.html",[],function(){return'{{#payload}}\r\n<div class="span3">\r\n	<img id="img-profile-prof-setting" src="{{user_picture}}" />\r\n</div>\r\n<div class="span6">\r\n	<h2>{{name}}</h2>\r\n	<p>\r\n		{{user_height}} INCHES\r\n	</p>\r\n	<p>\r\n		{{user_weight}} LBS\r\n	</p>\r\n</div>\r\n{{/payload}}'}),define("text!userresume/templates/rdtree.html",[],function(){return'<div class="sub-section-prof-setting">\r\n<div class="row-fluid">\r\n	<span class="green-left-heading">Personal Bests</span>\r\n</div>\r\n<div id="container-rdtree" class="row-fluid inset-data-entry">\r\n	{{#rdtrees}}\r\n	<div class="section-rdtree-items_h">\r\n		<div><span class="standard-subsection-header" style="margin-top:15px;">{{title}}</span></div>\r\n		{{#data}}\r\n			<div class="rd-entry">\r\n				<span>{{#icon}}<img src="{{icon}}" />{{/icon}}{{name}}</span>\r\n				<span>\r\n					<input type="text" class="txtRdTrees_h" treeId="{{id}}" value="{{val}}" resumeDataId="{{resumeDataId}}"/>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					\r\n				</span>\r\n			</div>\r\n		{{/data}}\r\n		<!--<a href="javascript:void(0)" class="resume_button btn-Finish-RdTree_h displayNone">FINISH</a>-->\r\n	</div>\r\n	{{/rdtrees}}\r\n</div>\r\n</div>'}),define("text!userresume/templates/academic.html",[],function(){return'<div class="sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Academic</span>\r\n	</div>\r\n	<div class="inset-data-entry">\r\n		<div id="container-academic-gpa"></div>\r\n		<div id="container-StandardizedTest"></div>\r\n		<div id="container-ApTest"></div>\r\n	</div>\r\n</div>'}),define("text!userresume/templates/awards.html",[],function(){return'<div class="row-fluid sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">Awards</span>\r\n	</div>\r\n\r\n	<div class="inset-data-entry section-new-award">\r\n		<div class="div-add-dotted well-small btn-Add-award_h" testids="{{TestIds}}">\r\n			+ Add an Award\r\n		</div>\r\n		<div class="section-new-controls displayNone">\r\n			<div class="clearfix row-fluid">\r\n				<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span>\r\n					<select class="ddl-sports-awards_h"></select>\r\n				</span>\r\n				<span>\r\n					<input type="text" class="txtAwards_h txt_name_h" placeholder="Award Name" value="{{name}}"/>\r\n				</span>\r\n				<span>\r\n					<input type="text" class="txtAwards_h txt_year_h" placeholder="Year Awarded" value="{{year}}"/>\r\n				</span>\r\n				</div>\r\n				<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span>\r\n					<textarea class="txtAwards_h txt_description_h" placeholder="Description">{{description}}</textarea>\r\n				</span>\r\n				</div>\r\n			</div>\r\n			<div style="width: 100%; padding:5px; margin: 0;">\r\n				<span class=""><a href="javascript:void(0)" class="resume_button btn-Save_award_h" >Save</a> <a href="javascript:void(0)" class="resume_button btn-Cancel-New">Cancel</a> <span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n			</div>\r\n		</div>\r\n		<br/>\r\n	</div>\r\n	<div id="section-list-awards" class="row-fluid">\r\n\r\n	</div>\r\n</div>'}),define("text!userresume/templates/contact.html",[],function(){return"<div>Contact</div>"}),define("text!userresume/templates/references.html",[],function(){return'<div class="row-fluid sub-section-prof-setting">\r\n	<div class="row-fluid">\r\n		<span class="green-left-heading">References</span>\r\n	</div>\r\n\r\n	<div class="inset-data-entry section-new-reference">\r\n		<div class="div-add-dotted well-small btn-Add-reference_h" testids="{{TestIds}}">\r\n			+ Add an Reference\r\n		</div>\r\n		<div class="well section-new-controls displayNone">\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Sport:</span>\r\n				<span class=""> <select class="ddl-sports-references_h"></select> </span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Name:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_name_h" value="{{name}}"/>\r\n				</span>\r\n			</div>\r\n\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Description:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_description_h" value="{{description}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Email:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_email_h" value="{{year}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Relationship:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_relation_h" value="{{year}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="reference-labels">Phone:</span>\r\n				<span class="">\r\n					<input type="text" class="txtReferences_h txt_phone_h" value="{{description}}"/>\r\n				</span>\r\n			</div>\r\n			<div class="clearfix row-fluid">\r\n				<span class="span12"> <a href="javascript:void(0)" class="resume_button btn-Save_reference_h" >Save</a> <a href="javascript:void(0)" class="resume_button btn-Cancel-New">Cancel</a> <span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n			</div>\r\n		</div>\r\n		<br/>\r\n	</div>\r\n	<div id="section-list-references" class="row-fluid">\r\n\r\n	</div>\r\n</div>'}),define("user/models/resume",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/resume",["facade","user/models/resume"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/rdtree",["facade","user/models/rdtree"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,resume_data_id:this.resume_data_id,user_value:this.user_value},processData:!0,url:function(){return this.action=="save"?"api/resumedataval/add/"+this.treeId+"?id1="+this.treeId:this.action=="update"?"api/resumedataval/basics/"+this.treeId+"?id1="+this.treeId:this.action=="delete"?"api/user/gpa/"+this.user_id+"?id1="+this.user_id:"api/user/addgpa/"+this.user_id+"?id1="+this.user_id},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){console.log("Show Error Message Rdtree.js Model",e),$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/models/gpa",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="delete"?"api/user/gpa/"+this.user_id+"?id1="+this.user_id:"api/user/addgpa/"+this.user_id+"?id1="+this.user_id},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/models/award",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="update"?"api/awards/basics/"+this.award_id+"?id1="+this.award_id:this.action=="save"?"api/awards/add/":(this.action=="delete","api/awards/base/"+this.award_id+"?id1="+this.award_id)},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/models/contact",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("userresume/models/reference",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"id1",processData:!0,url:function(){return this.action=="update"?"api/references/basics/"+this.reference_id+"?id1="+this.reference_id:this.action=="save"?"api/references/add/":(this.action=="delete","api/references/base/"+this.reference_id+"?id1="+this.reference_id)},showSuccessMessage:function(e){$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("user/collections/resumes",["facade","collections","user/models/resume","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/sentresumes",["facade","collections","user/collections/resumes","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/sent_resume/"+this.user_id:(this.user_id==undefined,"api/user/sent_resumes/"+this.user_id+"?id1="+this.user_id)}});return i}),define("userresume/views/sentresumeview",["require","text!userresume/templates/sentresume.html","facade","views","utils","vendor","userresume/collections/sentresumes"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/sentresumes"),h=s.extend({template:t,events:{},controls:{},messages:{dataNotExist:"Data Not Exists For Resumes."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},render:function(){var e=this;s.prototype.render.call(this)},setupView:function(){var e=this,t={user_id:e.user_id},n=new c(t);n.user_id=e.user_id,n.fetch(),l.when(n.request).done(function(){if(n.isError())return;var t=n.toJSON();if(t.length){var r=[];l.each(t,function(e,t){r.push(t.payload)}),e.Resumes=t;var i=f.to_html(e.template,{resumes:r});l(e.el).html(i)}else l(e.el).html(e.messages.dataNotExist)})}});return h}),define("user/collections/rdtree",["facade","collections","user/models/rdtree","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/rdtree",["facade","collections","user/collections/rdtree","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/rdtree/"+this.user_id:(this.user_id==undefined,"api/user/rdtree/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){var r={title:t.payload.name},i=[];for(var s in t.payload.data){var o=t.payload.data[s],u={name:o.name,id:o.id,type:o.type,val:o.val||"",resumeDataId:o.resume_data_id,icon:o.icon||null};i.push(u)}r.data=i,n.push(r)}),n}});return i}),define("userresume/views/rdtree",["require","text!userresume/templates/rdtree.html","facade","views","utils","vendor","userresume/collections/rdtree","userresume/models/rdtree"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/rdtree"),h=e("userresume/models/rdtree"),p=s.extend({template:t,events:{"click .btn-edit-rdtree_h":"MarkEdit","click .txtRdTrees_h":"MakeEdit","click .btn-Finish-RdTree_h":"FinishEdit","blur .txtRdTrees_h":"SaveResumeData"},controls:{btnEditRdTree:".btn-edit-rdtree_h",btnFinishRdTree:".btn-Finish-RdTree_h",sectionRdTreeItems:".section-rdtree-items_h",txtRdTree:".txtRdTrees_h"},messages:{dataNotExist:"Data Not Exists For RD Trees."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},setupView:function(){var e=this,t={user_id:e.user_id},n=new c(t);n.user_id=e.user_id,n.fetch(),l.when(n.request).done(function(){if(n.isError())return;e.Tree=n.parseAsRequired(),console.log("d",e.Tree);var t=f.to_html(e.template,{rdtrees:e.Tree});l(e.el).html(t)})},MarkEdit:function(e){console.log(e),l(e.target).fadeOut(),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.txtRdTree).removeAttr("disabled"),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.btnFinishRdTree).fadeIn()},MarkEdit:function(e){console.log(e),l(e.target).fadeOut(),l(e.target).removeAttr("disabled"),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.btnFinishRdTree).fadeIn()},FinishEdit:function(e){l(e.target).fadeOut(),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.txtRdTree).attr("disabled","disabled"),l(e.target).parents(n.controls.sectionRdTreeItems).find(n.controls.btnEditRdTree).fadeIn()},SaveResumeData:function(e){var t=l(e.target).attr("treeId"),r=l(e.target).attr("resumeDataId"),i=l(e.target).val(),s={treeId:t,user_id:n.user_id,resume_data_id:r,user_value:i},o=new h(s);o.treeId=t,o.user_id=n.user_id,o.target=l(e.target),t>0?(o.action="update",o.save({id1:t})):(o.action="save",o.save()),l.when(o.request).done(function(t){var n=l(e.currentTarget).parents(".rd-entry").find(".success_h");n.removeClass("displayNone").html("Updated Successfully."),console.log("response",t),t.payload!=null&&t.payload.id>0&&(console.log(t.payload),l(e.target).attr("treeId",t.payload.id)),l('.txtRdTrees_h[resumedataid="'+t.payload.resume_data_id+'"]').val(t.payload.user_value),l(e.target).parent().find(".error_h").html("").fadeOut(),setTimeout(function(){n.addClass("displayNone").html("")},3e3)})}});return p}),define("text!userresume/templates/gpa.html",[],function(){return'<span class="standard-subsection-header">GPA</span>\r\n<div class="div-add-dotted well-small btn-Add-gpa" testids="{{TestIds}}">\r\n	+ Add a Gpa\r\n</div>\r\n<div class="section-Add-Gpa displayNone">\r\n	<div class="alert alert-danger displayNone error_h"></div>\r\n	<span class="span5">Year : \r\n		<select class="txtGpaYear_h">\r\n			<option value="">Select</option>\r\n			<option value="Senior">Senior</option>\r\n			<option value="Junior">Junior</option>\r\n			<option value="">Sophomore</option>\r\n			<option value="Freshman">Freshman</option>\r\n		</select>\r\n		</span>\r\n	<span class="span5">Score : <input type="text" class="txtGpaScore_h"/></span>\r\n	<p ><button class="resume_button btn-Save-Gpa">Save</button></p>\r\n</div>\r\n<a href="javascript:void(0)" id="edit-gpa-btn" class="edit edit-gpa displayNone"></a>\r\n{{#data}}\r\n			<div class="row-fluid">\r\n				<span class="span3">{{year}}</span>\r\n				<span class="span9">\r\n					<input type="text" class="txtGpa_h" year="{{year}}" gpaId="{{id}}" value="{{gpa}}" disabled="disabled"/>\r\n					<a href="javascript:void(0)" class="remove btn-delete-gpa" year="{{year}}"></a>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					</span>\r\n					\r\n			</div>\r\n		{{/data}}\r\n		<button class="resume_button btn-finish-gpa_h displayNone">Finish</button>'}),define("text!userresume/templates/test.html",[],function(){return'<span class="standard-subsection-header">{{Test_Type}} Tests</span>\r\n<div class="clearfix ">\r\n<div class="div-add-dotted well-small btn-Add-test" testids="{{TestIds}}">\r\n	+ Add a Test\r\n</div>\r\n<div class="section-modal-academic-tests_h"> </div>\r\n</div>\r\n\r\n<div class="section-test-topics_h">\r\n	\r\n</div>'}),define("text!userresume/templates/testtopics.html",[],function(){return'\r\n{{#data}}\r\n			<div class="row-fluid item-test-topic_h item-test-{{id}}">\r\n				<div>\r\n				<span class="span3"><h4>{{testname}} :</h4></span> <span class="span3"><a href="javascript:void(0)" class="edit edit-test"></a></span>\r\n				<span class="span9">\r\n					{{#topics}}\r\n					<div class="row-fluid">\r\n						<span class="span3">{{name}}</span>\r\n						<span class="span9"><input type="text" class="txtTestScore_h" testId="{{id}}" topicId="{{topicid}}" initial="{{score}}" value="{{score}}" disabled="disabled"/>\r\n<a href="javascript:void(0)" class="remove btn-delete-test_h" testId="{{id}}" topicId="{{topicid}}"></a>\r\n							<span class="alert alert-danger displayNone error_h"></span> <span class="alert alert-success displayNone success_h"></span>\r\n						</span>\r\n					</div>\r\n					 {{/topics}}\r\n				</span>\r\n				</div>\r\n				<div>\r\n					</div>\r\n					<a href="javascript:void(0)" class="btn btn-primary btn-finish-test-topic_h displayNone" >Finish</a>\r\n				</div>\r\n			</div>\r\n		 {{/data}}'}),define("text!userresume/templates/testlist.html",[],function(){return'<div class="modal hide fade tests-modal_h" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-header">\r\n<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\r\n<h3 id="myModalLabel">Add a Test ({{Test_Type}})</h3>\r\n</div>\r\n<div class="modal-body  well">\r\n	{{#data}}\r\n	<div class="row-fluid">\r\n		<span class="span3">\r\n		<input type="checkbox" class="chk-test-{{type}}_h chk-{{id}}" testid="{{id}}" /> </span> &nbsp;\r\n		<span class="span3"> {{testname}} </span>\r\n	</div>\r\n		{{/data}}\r\n</div>\r\n<div class="modal-footer">\r\n<button class="btn" data-dismiss="modal" aria-hidden="true">Finish</button>\r\n<!--<button class="btn btn-primary btn-Save-Positions">Finish</button> -->\r\n</div>\r\n</div>'}),define("user/collections/gpa",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/gpa",["facade","collections","user/collections/gpa","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/gpa/"+this.user_id:(this.user_id==undefined,"api/user/gpa/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload;n.push({gpa:r.gpa,year:r.year})}}),n}});return i}),define("user/collections/tests",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("userresume/collections/tests",["facade","collections","user/collections/tests","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/tests/"+this.user_id:(this.user_id==undefined,"api/user/tests/"+this.user_id+"?id1="+this.user_id+"&standardized="+(this.includeStandard||0)+"&ap="+(this.includeAp||0))},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:r.id,testname:r.name,type:r.test_type,topics:[]};for(var s in r.topics)i.topics.push({topicid:s,name:r.topics[s].name,score:r.topics[s].score==0?"":r.topics[s].score});n.push(i)}}),n}});return i}),define("userresume/collections/academictests",["facade","collections","user/collections/tests","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/academictest/listall/"+this.user_id:(this.user_id==undefined,"api/academictest/listall/0?id1="+this.user_id+"&standardized="+(this.includeStandard||0)+"&ap="+(this.includeAp||0))},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:r.id,testname:r.name,type:r.test_type,topics:[]};if(r.topics!=null)for(var s in r.topics)i.topics.push({topicid:s,name:r.topics[s].name,score:r.topics[s].score||""});n.push(i)}}),n}});return i}),define("userresume/models/test",["facade","user/models/common"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"academics_tests_topics_id",data:{user_id:this.user_id,year:this.year},processData:!0,url:function(){return this.action=="update"?"api/user/testscore/"+this.users_id+"?id1="+this.users_id:this.action=="save"?"api/user/addtestscore/"+this.users_id+"?id1="+this.users_id:this.action=="delete"?"api/user/testscore/"+this.users_id+"?id1="+this.users_id:"api/user/addtestscore/"},showSuccessMessage:function(e){console.log("showSuccessMessage test"),$(this.target).parent().find(".success_h").html(e).fadeIn(),$(this.target).parent().find(".error_h").html("").fadeOut()},showErrorMessage:function(e){$(this.target).parent().find(".success_h").html("").fadeOut(),$(this.target).parent().find(".error_h").html(e).fadeIn()}}),n}),define("userresume/views/academic",["require","text!userresume/templates/academic.html","text!userresume/templates/gpa.html","text!userresume/templates/test.html","text!userresume/templates/testtopics.html","text!userresume/templates/testlist.html","facade","views","utils","vendor","userresume/collections/gpa","userresume/collections/tests","userresume/collections/academictests","userresume/models/gpa","userresume/models/test"],function(e,t,n,r,i,s){var o,u=e("facade"),a=e("views"),f=a.SectionView,l=e("utils"),c=l.lib.Channel,h=e("vendor"),p=h.Mustache,d=u.$,v=e("userresume/collections/gpa"),m=e("userresume/collections/tests"),g=e("userresume/collections/academictests"),y=e("userresume/models/gpa"),b=e("userresume/models/test"),w=f.extend({events:{"click .edit-gpa":"EditGpa","click .edit-test":"EditTest","click .btn-Add-test":"OpenTestPopUp","change .chk-test-Standardized_h":"AddStandardTest","change .chk-test-AP_h":"AddAPTest","click .btn-finish-test-topic_h":"FinishTest","click .btn-finish-gpa_h":"FinishGpa","blur .txtGpa_h":"SaveGpa","click .btn-delete-gpa":"DeleteGpa","click .btn-Add-gpa":"AddGpa","click .btn-Save-Gpa":"SaveNewGpa","blur .txtTestScore_h":"SaveTestScore","click .btn-delete-test_h":"DeleteTestScore"},controls:{BtnFinishTestTopics:".btn-finish-test-topic_h",BtnEditTest:".edit-test",BtnFinishGpa:".btn-finish-gpa_h",BtnEditGpa:".edit-gpa",BtnSaveGpa:".btn-Save-Gpa",ContainerGpa:"#container-academic-gpa",ContainerStandard:"#container-StandardizedTest",ContainerAP:"#container-ApTest",SectionModalTests:".section-modal-academic-tests_h",SectionTestTopics:".section-test-topics_h",ItemTestTopic:".item-test-topic_h",SectionAddGpa:".section-Add-Gpa",TxtScore:".txtTestScore_h",ModalBox:".tests-modal_h",TxtGpa:".txtGpa_h",TxtGpaYear:".txtGpaYear_h",TxtGpaScore:".txtGpaScore_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistGPA:"No GPAs entered yet.",dataNotExistTests:"No Tests entered yet.",YearScoreIsRequired:"Year And Score Are Required.",MandatoryFieldsTest:"Please enter a score."},initialize:function(e){f.prototype.initialize.call(this,e),o=this,o.setOptions(e),this.init()},render:function(){f.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){o.setupView()},setupView:function(){o.setUpMainView(),o.setUpGpaView(),o.setUpStandardTestView(),o.setUpAPTestView()},setUpMainView:function(){d(o.el).html(o.template)},setUpGpaView:function(){var e={user_id:o.user_id},t=new v(e);t.user_id=o.user_id,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.gpa=t.parseAsRequired();var e=p.to_html(n,{data:o.gpa}),r=d(o.el).find(o.controls.ContainerGpa);r.html(e),parseInt(t.models.length)>0?r.find("a#edit-gpa-btn").css("visibility","visible"):r.find("a#edit-gpa-btn").css("visibility","hidden")})},EditGpa:function(e){d(e.target).parent().find(o.controls.TxtGpa).removeAttr("disabled"),d(e.target).parent().find(o.controls.BtnFinishGpa).fadeIn(),d(e.target).fadeOut()},SaveGpa:function(e){var t=d(e.target).attr("year"),n=d(e.target).val(),r={user_id:o.user_id,gpa:n,year:t},i=new y(r);i.user_id=o.user_id,i.target=d(e.target),i.save()},DeleteGpa:function(e){var t=d(e.target).attr("year"),n={user_id:o.user_id,year:t,id1:1},r=new y(n);r.user_id=o.user_id,r.id1=1,r.action="delete",r.target=d(e.target),r.idAttribute="year",r.destroy({data:{user_id:o.user_id,year:t},success:function(){o.setUpGpaView()}}),d.when(r.request).done(function(){d(e.target).parent().find(o.controls.TxtGpa).val("")})},FinishGpa:function(e){d(e.target).parent().find(o.controls.TxtGpa).attr("disabled","disabled"),d(e.target).parent().find(o.controls.BtnEditGpa).fadeIn(),d(e.target).fadeOut()},AddGpa:function(e){o.$(o.controls.SectionAddGpa).fadeIn().css("display","inline-block")},SaveNewGpa:function(e){var t=o.$(o.controls.SectionAddGpa).find(o.controls.TxtGpaYear).val(),n=o.$(o.controls.SectionAddGpa).find(o.controls.TxtGpaScore).val();if(t==""||n=="")o.$(o.controls.SectionAddGpa).find(o.controls.lblError).html(o.messages.YearScoreIsRequired).fadeIn();else{o.$(o.controls.SectionAddGpa).find(o.controls.lblError).html("").fadeOut();var r={user_id:o.user_id,gpa:n,year:t},i=new y(r);i.user_id=o.user_id,i.target=d(e.target).parent(),i.save(),d.when(i.request).done(function(){o.setUpGpaView()})}},setUpStandardTestView:function(){var e={user_id:o.user_id},t=new m(e);t.user_id=o.user_id,t.includeStandard=1,t.includeAp=0,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.standardTests=t.parseAsRequired();var e="";d.each(o.standardTests,function(t,n){e+=n.id+","});var n=p.to_html(r,{Test_Type:"Standardized",TestIds:e});d(o.el).find(o.controls.ContainerStandard).html(n);var s=p.to_html(i,{Test_Type:"Standardized",data:o.standardTests});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionTestTopics).html(s),o.setUpStandardTestListAllView()})},setUpStandardTestListAllView:function(){var e={user_id:o.user_id},t=new g(e);t.user_id=o.user_id,t.includeStandard=1,t.includeAp=0,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.standardTestsListAll=t.parseAsRequired();if(o.standardTestsListAll.length>0){var e=p.to_html(s,{Test_Type:"Standardized",data:o.standardTestsListAll});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionModalTests).html(e)}else o.$el(o.controls.ContainerStandard).find(o.controls.SectionModalTests).html(o.messages.dataNotExistTests)})},AddStandardTest:function(e){var t=d(e.target).attr("testid");if(d(e.target).is(":checked")){var n=[];d.each(o.standardTestsListAll,function(e,r){r.id==t&&n.push(r)});var r=p.to_html(i,{Test_Type:"Standardized",data:n});d(o.el).find(o.controls.ContainerStandard).find(o.controls.SectionTestTopics).append(r)}else d(o.el).find(o.controls.ContainerStandard).find(".item-test-"+t).remove()},setUpAPTestView:function(){var e={user_id:o.user_id},t=new m(e);t.user_id=o.user_id,t.includeStandard=0,t.includeAp=1,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.apTests=t.parseAsRequired();var e="";d.each(o.apTests,function(t,n){e+=n.id+","});var n=p.to_html(r,{Test_Type:"AP",TestIds:e});d(o.el).find(o.controls.ContainerAP).html(n);var s=p.to_html(i,{Test_Type:"AP",data:o.apTests});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionTestTopics).html(s),o.setUpAPTestListAllView()})},setUpAPTestListAllView:function(){var e={user_id:o.user_id},t=new g(e);t.user_id=o.user_id,t.includeStandard=0,t.includeAp=1,t.fetch(),d.when(t.request).done(function(){if(t.isError())return;o.apTestsListAll=t.parseAsRequired();if(o.apTestsListAll.length>0){var e=p.to_html(s,{Test_Type:"AP",data:o.apTestsListAll});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionModalTests).html(e)}else d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionModalTests).html(o.messages.dataNotExistTests)})},AddAPTest:function(e){var t=d(e.target).attr("testid");if(d(e.target).is(":checked")){var n=[];d.each(o.apTestsListAll,function(e,r){r.id==t&&n.push(r)});var r=p.to_html(i,{Test_Type:"Standardized",data:n});d(o.el).find(o.controls.ContainerAP).find(o.controls.SectionTestTopics).append(r)}else d(o.el).find(o.controls.ContainerAP).find(".item-test-"+t).remove()},EditTest:function(e){d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.TxtScore).removeAttr("disabled"),d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.BtnFinishTestTopics).fadeIn(),d(e.target).fadeOut()},FinishTest:function(e){d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.TxtScore).attr("disabled","disabled"),d(e.target).parents(o.controls.ItemTestTopic).find(o.controls.BtnEditTest).fadeIn(),d(e.target).fadeOut()},OpenTestPopUp:function(e){var t=d(e.target).attr("testids"),n=t.split(",");d.each(n,function(t,n){o.$(e.target).parent().find(o.controls.ModalBox).find(".chk-"+n).attr("checked","checked")}),o.$(e.target).parent().find(o.controls.ModalBox).modal("show")},SaveTestScore:function(e){var t=d(e.target).attr("topicId"),n=d(e.target).val(),r=d(e.target).attr("initial"),i="save";if(d.trim(n)==""){d(e.target).parent().find(o.controls.lblError).html(o.messages.MandatoryFieldsTest).fadeIn();return}d(e.target).parent().find(o.controls.lblError).html("").fadeOut();var s={id1:o.user_id,academics_topics_id:t,score:n,users_id:o.user_id};r!=""&&(i="update",s.academics_tests_topics_id=t);var u=d(e.target).attr("testscoreid"),a=new b(s);a.users_id=o.user_id,a.action=i,a.target=d(e.target),a.save({success:function(){}}),d.when(a.request).done(function(){d(e.target).attr("initial",n)})},DeleteTestScore:function(e){var t=d(e.target).attr("topicid"),n={users_id:o.user_id,id1:1,academics_tests_topics_id:t},r=new b(n);r.users_id=o.user_id,r.id1=o.user_id,r.academics_tests_topics_id=t,r.action="delete",r.target=d(e.target),r.destroy({data:{users_id:o.user_id,academics_tests_topics_id:t},success:function(){d(e.target).val("").attr("initial","")}}),d.when(r.request).done(function(){d(e.target).parent().find(o.controls.TxtScore).val("")})}});return w}),define("text!userresume/templates/listAwards.html",[],function(){return'{{#data}}\r\n	<div class="section-rdtree-items_h inset-data-entry">\r\n		<div class="row-fluid awards-sports-header"><span class="standard-subsection-header">{{#icon}}<img src="{{icon}}" />{{/icon}}{{sports_name}}</span></div>\r\n		{{#awards}}\r\n		<div class="section-new-award" style="background-color: #eeeeee; border-bottom: 1px solid #ccc;">\r\n			<div class="row-fluid section-new-controls">\r\n				<span class=""><span class="award-labels">Award Name:</span> <input type="text" class="txtAwards_h txt_name_h" value="{{name}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Year Awarded:</span> <input type="text" class="year txtAwards_h txt_year_h" value="{{year}}" disabled="disabled"/></span>\r\n				<span>\r\n					<a href="javascript:void(0)" class="edit edit_award_h"></a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Update_award_h displayNone" sportid="{{sports_id}}" awardid="{{id}}">Save</a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Cancel-Existing_award_h displayNone">Cancel</a>\r\n					<a href="javascript:void(0)" class="remove btn-remove_award_h" awardid="{{id}}"></a>\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n\r\n				</span>\r\n\r\n				<span><textarea style="width:90%;" type="text" class="txtAwards_h txt_description_h" disabled="disabled">{{description}}</textarea></span>\r\n\r\n			</div>\r\n		</div>	\r\n		{{/awards}}\r\n	</div>\r\n	{{/data}}'}),define("user/collections/awards",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("userresume/collections/awards",["facade","collections","user/collections/awards","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/awards/"+this.user_id:(this.user_id==undefined,"api/user/awards/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={sports_id:r.id,sports_name:r.name,icon:r.icon,awards:[]};$.each(r.awards,function(e,t){i.awards.push({id:t.id,name:t.name,description:t.description,year:t.year})}),n.push(i)}}),n}});return i}),define("userresume/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({sport_type:1,male:1,female:0,url:function(){return testpath?testpath+"/api/sport/listall":(this.gender==undefined,"/api/sport/listall/?sport_type="+this.sport_type+"&male="+this.male+"&female="+this.female+"&sport_type_id="+this.sport_type_id)}}),i}),define("userresume/views/awards",["require","text!userresume/templates/awards.html","text!userresume/templates/listAwards.html","facade","views","utils","vendor","userresume/collections/awards","userresume/collections/sports","userresume/models/award"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("userresume/collections/awards"),p=e("userresume/collections/sports"),d=e("userresume/models/award"),v=o.extend({template:t,events:{"click .btn-Add-award_h":"AddNewAward","click .btn-Save_award_h":"SaveNewAward","click .btn-Update_award_h":"UpdateAward","click .btn-Cancel-New":"CancelNew","click .btn-Cancel-Existing_award_h":"CancelExisting","click .btn-remove_award_h":"RemoveAward","click .edit_award_h":"EditAward"},controls:{listContainer:"#section-list-awards",newAwardContainer:".section-new-award",newAwardControls:".section-new-controls",btnAddAwardsExisting:".btn-Add-Existing",btnAddNew:".btn-Add",btnCancelExisting:".btn-Cancel-Existing_award_h",btnRemoveExisting:".btn-remove_award_h",btnUpdateAwardExisting:".btn-Update_award_h",btnEditAward:".edit_award_h",ddlSports:".ddl-sports-awards_h",newControls:".txtAwards_h",txtName:".txt_name_h",txtDescription:".txt_description_h",txtYear:".txt_year_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistAwards:"No Awards Entered Yet.",MandatoryFields:"All fields are mandatory."},initialize:function(e){o.prototype.initialize.call(this,e),r=this,r.setOptions(e),this.init()},render:function(){o.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){r.setupView()},setupView:function(){r.setUpMainView(),r.setUpListView()},setUpMainView:function(){var e=l.to_html(r.template,{});c(r.el).html(e)},setUpListView:function(){var e={user_id:r.user_id},t=new h(e);t.user_id=r.user_id,t.fetch(),c.when(t.request).done(function(){if(t.isError())return;r.awards=t.parseAsRequired();if(r.awards.length>0){var e=l.to_html(n,{data:r.awards});c(r.el).find(r.controls.listContainer).html(e)}else c(r.el).find(r.controls.listContainer).html(r.messages.dataNotExistAwards)})},ClearControls:function(e){console.log(c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls)),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newControls).val(""),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls).fadeOut()},AddNewAward:function(e){r.ClearControls(e);var t=c(e.target).parents(r.controls.newAwardContainer).find(r.controls.ddlSports);c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls).fadeIn();if(r.sports&&r.sports.length>0){r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport");return}var n=new p;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,r.gender=="male"?n.male=1:r.gender=="famale"&&(n.female=0),n.fetch(),c.when(n.request).done(function(){if(n.isError())return;var e=n.toJSON();(e==null||e.length<1)&&r.$(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var i in e)r.sports.push(e[i].payload);r.sort(r.sports,"sport_name",!1),r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport")})},AddExistingAward:function(){console.log("Add Existing")},SaveAward:function(e,t){var n=c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newAwardControls),i=c(e.target).attr("sportid")||n.find(r.controls.ddlSports).val(),s=n.find(r.controls.txtName).val(),o=n.find(r.controls.txtYear).val(),u=n.find(r.controls.txtDescription).val();if(i==""||i<1||c.trim(s)==""||c.trim(u)==""||c.trim(o)==""){n.find(r.controls.lblError).html(r.messages.MandatoryFields).fadeIn();return}n.find(r.controls.lblError).html("").fadeOut();var a={description:u,name:s,sports_id:i,year:o,users_id:r.user_id},f=0;t=="update"&&(f=c(e.target).attr("awardid"),a.id1=c(e.target).attr("awardid"));var l=new d(a);l.users_id=r.user_id,l.award_id=f,l.action=t,l.target=c(e.target),l.save(),c.when(l.request).done(function(){r.ClearControls(e),r.setUpListView()})},SaveNewAward:function(e){r.SaveAward(e,"save")},EditAward:function(e){c(e.target).parents(r.controls.newAwardContainer).find(r.controls.newControls).removeAttr("disabled"),c(e.target).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnUpdateAwardExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnCancelExisting).fadeIn()},UpdateAward:function(e){r.SaveAward(e,"update")},CancelNew:function(e){r.ClearControls(e)},CancelExisting:function(e){c(e.target).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnUpdateAwardExisting).fadeOut(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnEditAward).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find("textarea, input").attr("disabled","disabled")},RemoveAward:function(e){var t=c(e.target).attr("awardid"),n={id1:t,award_id:t,users_id:r.user_id},i=new d(n);i.id1=t,i.users_id=r.user_id,i.award_id=t,i.action="delete",i.target=c(e.target),i.destroy({success:function(){r.setUpListView()}})}});return v}),define("user/collections/contacts",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=new n;s.id=Math.ceil(Math.random()*1e5),s.set("payload",r[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}});return i}),define("userresume/collections/contacts",["facade","collections","user/collections/contacts","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/contact/"+this.user_id:(this.user_id==undefined,"api/user/contact/"+this.user_id+"?id1="+this.user_id)},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload;n.push({gpa:r.gpa,year:r.year})}}),n}});return i}),define("userresume/views/contacts",["require","text!userresume/templates/contact.html","facade","views","utils","vendor","userresume/collections/contacts"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("userresume/collections/contacts"),h=s.extend({template:t,events:{},controls:{},messages:{dataNotExistContacts:"No Contacts."},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){n.setupView()},setupView:function(){n.setUpMainView(),n.setUpListView()},setUpMainView:function(){},setUpListView:function(){var e=this,n={user_id:e.user_id},r=new c(n);r.user_id=e.user_id,r.fetch(),l.when(r.request).done(function(){if(r.isError())return;e.contacts=r.parseAsRequired();if(e.contacts.length>0){var n=f.to_html(t,{data:e.contacts});l(e.el).find(e.el).html(n)}else l(e.el).find(e.controls.ContainerGpa).html(e.messages.dataNotExistContacts)})}});return h}),define("text!userresume/templates/listReferences.html",[],function(){return'\r\n{{#data}}\r\n<div class="section-rdtree-items_h inset-data-entry">\r\n	<div class="row-fluid awards-sports-header"><span class="standard-subsection-header">{{#icon}}<img src="{{icon}}" />{{/icon}}{{sports_name}}</span></div>\r\n\r\n		{{#references}}\r\n		<div class="section-new-reference"  style="background-color: #eeeeee; border-bottom: 1px solid #ccc; padding-bottom: 10px;">\r\n			<div class="row-fluid section-new-controls">\r\n\r\n				<span class=""><span class="award-labels">Reference Name:</span> <input type="text" class="txtReferences_h txt_name_h" value="{{name}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Relationship:</span> <input type="text" class="txtReferences_h txt_relation_h" value="{{relation}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Phone:</span> <input type="text" class="txtReferences_h txt_phone_h" value="{{phone}}" disabled="disabled"/></span>\r\n				<span class=""><span class="award-labels">Email:</span> <input type="text" class="txtReferences_h txt_email_h" value="{{email}}" disabled="disabled"/></span>\r\n				<span><textarea style="width:90%;" type="text" class="txtReferences_h txt_description_h" disabled="disabled">{{description}}</textarea></span>\r\n				<br />\r\n				<span class="">\r\n					<a href="javascript:void(0)" class="edit edit_reference_h"></a><a href="javascript:void(0)" class="remove btn-remove_reference_h" referenceid="{{id}}"></a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Update_reference_h displayNone" sportid="{{sports_id}}" referenceid="{{id}}">Save</a>\r\n					<a href="javascript:void(0)" class="resume_button btn-Cancel-Existing_reference_h displayNone">Cancel</a>\r\n\r\n					<span class="alert alert-danger displayNone error_h"></span>\r\n					<span class="alert alert-success displayNone success_h"></span>\r\n					\r\n				</span>\r\n				</div>\r\n		</div>	\r\n		{{/references}}\r\n	</div>\r\n	{{/data}}'}),define("user/collections/references",["facade","collections","user/models/common","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=s.extend({model:n,fetchSuccess:function(e,t){e.reset();var r=t.payload;for(var i in r){var s=r[i];s.sports_id=i;var o=new n;o.id=Math.ceil(Math.random()*1e5),o.set("payload",s),o.set("desc",t.desc),o.set("exec_data",t.exec_data),e.push(o)}e.deferred.resolve(t)}});return i}),define("userresume/collections/references",["facade","collections","user/collections/references","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel,i=n.extend({url:function(){return testpath?testpath+"/api/user/references/"+this.user_id:"api/user/references/"+this.user_id+"?id1="+this.user_id},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return console.log("models References",t),t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={sports_id:r.id,sports_name:r.name,icon:r.icon,references:[]};$.each(r.references,function(e,t){i.references.push({id:t.id,name:t.name,description:t.long_description,relation:t.relation,email:t.email,phone:t.phone})}),n.push(i)}}),console.log("del",n),n}});return i}),define("userresume/views/references",["require","text!userresume/templates/references.html","text!userresume/templates/listReferences.html","facade","views","utils","vendor","userresume/collections/references","userresume/collections/sports","userresume/models/reference"],function(e,t,n){var r,i=e("facade"),s=e("views"),o=s.SectionView,u=e("utils"),a=u.lib.Channel,f=e("vendor"),l=f.Mustache,c=i.$,h=e("userresume/collections/references"),p=e("userresume/collections/sports"),d=e("userresume/models/reference"),v=o.extend({template:t,events:{"click .btn-Add-reference_h":"AddNewReference","click .btn-Save_reference_h":"SaveNewReference","click .btn-Update_reference_h":"UpdateReference","click .btn-Cancel-New":"CancelNew","click .btn-Cancel-Existing_reference_h":"CancelExisting","click .btn-remove_reference_h":"RemoveReference","click .edit_reference_h":"EditReference"},controls:{listContainer:"#section-list-references",newReferenceContainer:".section-new-reference",newReferenceControls:".section-new-controls",btnAddReferencesExisting:".btn-Add-Existing",btnAddNew:".btn-Add",btnCancelExisting:".btn-Cancel-Existing_reference_h",btnRemoveExisting:".btn-remove_reference_h",btnUpdateReferenceExisting:".btn-Update_reference_h",btnEditReference:".edit_reference_h",ddlSports:".ddl-sports-references_h",newControls:".txtReferences_h",txtName:".txt_name_h",txtDescription:".txt_description_h",txtYear:".txt_year_h",txtEmail:".txt_email_h",txtPhone:".txt_phone_h",txtRelation:".txt_relation_h",lblError:".error_h",lblSuccess:".success_h"},messages:{dataNotExistReferences:"No References entered yet.",MandatoryFields:"All Fields are Mandatory."},initialize:function(e){o.prototype.initialize.call(this,e),r=this,r.setOptions(e),this.init()},render:function(){o.prototype.render.call(this)},setOptions:function(e){this.user_id=e.user_id},init:function(){r.setupView()},setupView:function(){r.setUpMainView(),r.setUpListView()},setUpMainView:function(){var e=l.to_html(r.template,{});c(r.el).html(e)},setUpListView:function(){var e={user_id:r.user_id},t=new h(e);t.user_id=r.user_id,t.fetch(),c.when(t.request).done(function(){if(t.isError())return;r.references=t.parseAsRequired();if(r.references.length>0){var e=l.to_html(n,{data:r.references});c(r.el).find(r.controls.listContainer).html(e)}else c(r.el).find(r.controls.listContainer).html(r.messages.dataNotExistReferences)})},ClearControls:function(e){c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newControls).val(""),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls).fadeOut()},AddNewReference:function(e){r.ClearControls(e);var t=c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.ddlSports);c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls).fadeIn();if(r.sports&&r.sports.length>0){r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport");return}var n=new p;n.sport_type=1,n.sport_type_id=1,n.male=1,n.female=0,r.gender=="male"?n.male=1:r.gender=="famale"&&(n.female=0),n.fetch(),c.when(n.request).done(function(){if(n.isError())return;var e=n.toJSON();(e==null||e.length<1)&&r.$(r.controls.ddlSports).parent().find(r.controls.fieldMessage).html(r.messages.dataNotExist).stop().fadeIn(),r.sports=[];for(var i in e)r.sports.push(e[i].payload);r.sort(r.sports,"sport_name",!1),r.setDropdownOptions(r.sports,"sport_name","sport_id",t,"Select Sport")})},AddExistingReference:function(){console.log("Add Existing")},SaveReference:function(e,t){var n=c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newReferenceControls),i=c(e.target).attr("sportid")||n.find(r.controls.ddlSports).val(),s=n.find(r.controls.txtName).val(),o=n.find(r.controls.txtDescription).val(),u=n.find(r.controls.txtRelation).val(),a=n.find(r.controls.txtEmail).val(),f=n.find(r.controls.txtPhone).val();if(i==""||i<1||c.trim(s)==""||c.trim(f)==""){n.find(r.controls.lblError).html(r.messages.MandatoryFields).fadeIn();return}n.find(r.controls.lblError).html("").fadeOut();var l={users_id:r.user_id,sports_id:i,name:s,relation:u,email:a,phone:f,long_description:o},h=0;t=="update"&&(h=c(e.target).attr("referenceid"),l.id1=c(e.target).attr("referenceid"));var p=new d(l);p.users_id=r.user_id,p.reference_id=h,p.action=t,p.target=c(e.target),p.save(),c.when(p.request).done(function(){r.ClearControls(e),r.setUpListView()})},SaveNewReference:function(e){r.SaveReference(e,"save")},EditReference:function(e){c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.newControls).removeAttr("disabled"),c(e.target).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnUpdateReferenceExisting).fadeIn(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnCancelExisting).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeOut()},UpdateReference:function(e){r.SaveReference(e,"update")},CancelNew:function(e){r.ClearControls(e)},CancelExisting:function(e){c(e.target).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnUpdateReferenceExisting).fadeOut(),c(e.target).parents(r.controls.newReferenceContainer).find(r.controls.btnEditReference).fadeIn(),c(e.target).parents(r.controls.newAwardContainer).find(r.controls.btnRemoveExisting).fadeIn()},RemoveReference:function(e){var t=c(e.target).attr("referenceid"),n={id1:t,reference_id:t,users_id:r.user_id},i=new d(n);i.id1=t,i.users_id=r.user_id,i.reference_id=t,i.action="delete",i.target=c(e.target),i.destroy({success:function(){r.setUpListView()}})}});return v}),define("userresume",["require","text!userresume/templates/layout.html","text!userresume/templates/sentresume.html","text!userresume/templates/basic_info_header.html","text!userresume/templates/rdtree.html","text!userresume/templates/academic.html","text!userresume/templates/awards.html","text!userresume/templates/contact.html","text!userresume/templates/references.html","facade","controller","models","views","utils","profilesetting/models/basic_info","userresume/models/resume","userresume/models/rdtree","userresume/models/gpa","userresume/models/award","userresume/models/contact","userresume/models/reference","profilesetting/views/basic_info","userresume/views/sentresumeview","userresume/views/rdtree","userresume/views/academic","userresume/views/awards","userresume/views/contacts","userresume/views/references"],function(e,t,n,r,i,s,o,u,a){var f,l=e("facade"),c=e("controller"),h=e("models"),p=e("views"),d=e("utils"),v=l.$,m=l._,g=d.debug,y=d.lib.Channel,b=p.LayoutView,w=e("profilesetting/models/basic_info"),E=e("userresume/models/resume"),S=e("userresume/models/rdtree"),x=e("userresume/models/gpa"),T=e("userresume/models/award"),N=e("userresume/models/contact"),C=e("userresume/models/reference"),k=e("profilesetting/views/basic_info"),L=e("userresume/views/sentresumeview"),A=e("userresume/views/rdtree"),O=e("userresume/views/academic"),M=e("userresume/views/awards"),_=e("userresume/views/contacts"),D=e("userresume/views/references"),f=c.extend({cssArr:[base_url+"pages/profilesetting/profilesettings.css"],events:{},initialize:function(e){return y("load:css").publish(this.cssArr),m.bindAll(this),this.scheme=[],e.id&&(this.id=e.id,this.init()),this},init:function(){this.setupLayout().render(),this.setupView(),this.handleDeferreds()},setupLayout:function(){var e;if(this.layout)return this.layout;var e=new b({scheme:this.scheme,destination:"#main",template:t,displayWhen:"ready"});return this.layout=e,this.layout},setupView:function(){var e=this;this.basicInfoModel=new w,this.basicInfoModel.id=e.id,this.basicInfoModel.fetch(),v.when(this.basicInfoModel.request).done(function(){var t=e.basicInfoModel.toJSON();e.gender=t.payload.gender,e.setUpBasicView(),e.setUpSentResumeView(),e.setUpRdTreeView()})},setUpBasicView:function(){var e=this;this.basicView=new k({model:new w,template:r,name:"basic-info",destination:"#section-basics-prof-setting",user_id:e.id,id:e.id}),this.scheme.push(this.basicView)},setUpSentResumeView:function(){var e=this;this.sentResumeView=new L({model:new E,template:n,name:"sent-resume",destination:"#section-sent-resume",user_id:e.id,id:e.id}),this.scheme.push(this.sentResumeView),this.layout.render()},setUpRdTreeView:function(){var e=this;this.rdTreeView=new A({model:new S,template:i,name:"rd-tree",destination:"#section-RD-Tree",user_id:e.id}),this.scheme.push(this.rdTreeView),this.layout.render()},setUpAcademicView:function(){var e=this;this.academicView=new O({model:new x,template:s,name:"resume-academic",destination:"#section-academic",user_id:e.id}),this.scheme.push(this.academicView),this.layout.render()},setUpAwardsView:function(){var e=this;this.awardsView=new M({model:new T,template:o,name:"resume-awards",destination:"#section-awards",user_id:e.id}),this.scheme.push(this.awardsView),this.layout.render()},setUpContactsView:function(){var e=this;this.contactsView=new _({model:new N,template:u,name:"resume-contacts",destination:"#section-contacts",user_id:e.id}),this.scheme.push(this.contactsView),this.layout.render()},setUpReferenceView:function(){var e=this;this.referenceView=new D({model:new C,template:a,name:"resume-references",destination:"#section-references",user_id:e.id}),this.scheme.push(this.referenceView),this.layout.render()}});return f}),define("usercontrol/tag/collections/sports",["facade","collections","sportorg/collections/sports","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/sport/listall/"}}),i}),define("usercontrol/tag/tag",["require","text!usercontrol/tag/templates/layout.html","facade","controller","models","views","usercontrol/tag/models/basic_info","usercontrol/tag/collections/sports","usercontrol/tag/views/main"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("usercontrol/tag/models/basic_info"),d=e("usercontrol/tag/views/main"),n=i.extend({cssArr:[base_url+"usercontrols/tag/tag.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.gender&&(this.gender=e.gender),this.init(),this},init:function(){this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},setupLayout:function(){console.log("Set Up Layout Tag");if(this.layout)return this.layout;var e=new h({scheme:this.scheme,destination:"#main",template:"",displayWhen:"ready"});return this.layout=e,this.layout},setUpMainView:function(){console.log("Set Up Main View Tag"),c("tag-team-success").subscribe(this.tagFunction);var e=this;this.tagView=new d({model:new p,template:t,name:"tag-main",destination:"#main",user_id:e.id,channel:"tag-team-success"}),this.scheme.push(this.tagView),this.layout.render()},tagFunction:function(e){alert(JSON.stringify(e))}});return n}),define("text!usercontrol/addgame/templates/layout.html",[],function(){return'<div class="add-game-container-h"></div>\r\n<!--div class="add-game-container-h"></div>\r\n	<div class="well-large container_add_game">\r\n<div class="clear"></div>\r\n	<div class="section-Add-Sports_h">\r\n		<div class="section-game-date_h floatLeft">\r\n			<input type="text" class="txt-game-date_h txtDate" placeholder="Enter Date" readonly="readonly" />\r\n			<input type="text" class="txt-game-time_h hasDatepicker txtTime"  placeholder="Time" placeholder="Time" maxlength="5" />\r\n			\r\n			<span class="spn-ddl-time-period_h"></span>		\r\n			<div class="clear"></div>\r\n			<span class="displayNone field-message field-message_h"></span>\r\n		</div>\r\n		<div class="clear"></div>\r\n	<div class="clear"></div>\r\n		<div class="row-fluid section-game-sports_h">\r\n<span class="span-ddl-sports_h">\r\n				</span>\r\n			<div class="clear"></div>	\r\n			<span class="displayNone field-message field-message_h"></span>\r\n		</div>\r\n<div class="clear"></div>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-game-teams_h team-one_h displayNone">\r\n		<div class="clear"></div>\r\n		Select Team 1 :\r\n			<div class="clear"></div>\r\n			<span class="span_ddl_team_h span_ddl_team_one_h"></span>\r\n		<a href="javascript:void(0)" class="btn-new-team-game_h">Team not listed ?</a>\r\n		<div class="section-new-team_h">\r\n			<input type="text"class="txt txt-game-team_h displayNone" placeholder="Enter Team" />\r\n			<span class="indicator_h"></span>\r\n		</div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n		<div class="clear"></div>\r\n		<div class="section-score_h">\r\n			Score : \r\n			<input type="text" class="txt-score-team_h" />\r\n		</div>\r\n		<div class="section-game-radio_h">			\r\n			Home &nbsp;<input type="radio" name="rdo-team1_h" value="home" class="rdo-game-location_h rdo-game-location-one-home_h" team="one"> &nbsp;&nbsp;\r\n			Away &nbsp;<input type="radio" name="rdo-team1_h" value="away" class="rdo-game-location_h" team="one">\r\n		</div>\r\n	</div>\r\n<div class="clear"></div>\r\n	<div class="section-individual-game_h displayNone">\r\n		<input type="text"class="txt-individual-game_h" placeholder="Enter Game" />\r\n		<span class="indicator_h"></span>\r\n		<div class="clear"></div>\r\n		<input type="text"class="txt-individual-location_h displayNone" placeholder="Enter Location Id"  />\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n			<div class="clear"></div>\r\n\r\n	</div>\r\n\r\n	<div class="section-game-teams_h team-two_h displayNone">\r\n		<div class="clear"></div>\r\n		Select Team 2 :\r\n			<div class="clear"></div>\r\n		<div class="section-new-team_h">\r\n			<input type="text"class="txt-game-team_h" placeholder="Enter Team" />\r\n			<span class="indicator_h"></span>\r\n		</div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n		<div class="clear"></div>\r\n		<div class="section-score_h">\r\n			Score :\r\n			<input type="text" class="txt-score-team_h"/>\r\n		</div>\r\n		<div class="section-game-radio_h">\r\n			Home &nbsp;<input type="radio" name="rdo-team2_h" value="home" class="rdo-game-location_h rdo-game-location-two-home_h"  team="two"> &nbsp;&nbsp;\r\n			Away  &nbsp;<input type="radio" name="rdo-team2_h" value="away" class="rdo-game-location_h"   team="two">			\r\n		</div>\r\n	</div>\r\n<div class="clear"></div>\r\n	<div class="section-main-location_h displayNone">\r\n		<div class="location-view-h">&nbsp;</div>\r\n		<input type="hidden" class="txt-game-location-id_h displayNone"/>\r\n		<div class="div-game-location_h"></div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div>\r\n\r\n	</div>\r\n	<div class="clear"></div>\r\n\r\n</div-->\r\n'}),define("user/models/basic_info",["facade","user/models/basics"],function(e,t){var n,r=e._;return n=t.extend({}),n}),define("usercontrol/addgame/collections/teams",["facade","collections","sportorg/collections/teams","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.team_name&&(e+="&searchtext="+encodeURIComponent(this.team_name)),this.states_id&&(e+="&states_id="+this.states_id),this.cities_id&&(e+="&cities_id="+this.cities_id),this.sports_id&&(e+="&sports_id="+this.sports_id),this.seasons_id&&(e+="&seasons_id="+this.seasons_id),this.year&&(e+="&year="+this.year),this.complevels_id&&(e+="&complevels_id="+this.complevels_id),"/api/team/search?limit=5"+e}}),i}),define("usercontrol/addgame/collections/teams_user",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){return"/api/user/teams/"+this.user_id+"?sport_id="+this.sports_id},parseAsRequired:function(){var e=this,t=e.toJSON(),n=[];return t.length&&$.each(t,function(e,t){if(t!=null&&t.payload!=null){var r=t.payload,i={id:null,fulladdress:""};r&&r.org_sport_link_obj&&r.org_sport_link_obj.org&&r.org_sport_link_obj.org.locations&&(i=r.org_sport_link_obj.org.locations);var s={team_id:r.id,team_name:r.team_name,location_id:i.id,location_name:i.full_address};n.push(s)}}),n},AppendItem:function(e){var t=this,n=t.toJSON(),r={payload:e};return n.push(r),n}}),i}),define("usercontrol/addgame/collections/games_search",["facade","collections","sportorg/collections/games","utils"],function(e,t,n,r){var i,s=t.BaseCollection,o=e._,u=r.lib.Channel;return i=n.extend({url:function(){var e="";return this.game_name&&(e+="searchtext="+this.game_name),this.sports_id&&(e+="&sports_id="+this.sports_id),"/api/game/search?"+e}}),i}),define("usercontrol/addgame/collections/orgs",["facade","collections","sportorg/collections/orgs","utils"],function(e,t,n){var r;return r=n.extend({}),r}),define("usercontrol/addgame/models/team",["facade","sportorg/models/team"],function(e,t){var n,r=e._,i=e.Backbone;return n=t.extend({parseAsRequired:function(e){var t=this,n={};if(e!=null&&e.payload!=null){var r=e.payload,i={id:null,fulladdress:""},s={id:null,sport_name:""};r&&r.org_sport_link_obj&&(r.org_sport_link_obj.org&&r.org_sport_link_obj.org.locations&&(i=r.org_sport_link_obj.org.locations),r.org_sport_link_obj.sport&&(s=r.org_sport_link_obj.sport)),console.log(r),n={team_id:r.id,team_name:r.team_name,location_id:i.id,location_name:i.full_address,sports_name:s.sport_name,sports_id:s.id,complevels_id:r.complevels_id,seasons_id:r.seasons_id,year:r.year,states_id:r.org_sport_link_obj.org.states_id,sports_club:r.org_sport_link_obj.org.sports_club,single_sport_id:r.org_sport_link_obj.org.single_sport_id}}return n}}),n}),define("usercontrol/addgame/models/team_add",["facade","sportorg/models/team"],function(e,t){var n,r=e._;return n=t.extend({url:function(){var e="";return this.games_id&&(e+="?games_id="+this.games_id),"/api/team/game/"+this.teams_id+e}}),n}),define("usercontrol/addgame/models/game",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"game_id",url:function(){return"/api/game/add/"+this.game_id}}),n}),define("usercontrol/addgame/models/uslgamelink",["facade","sportorg/models/game"],function(e,t){var n,r=e._;return n=t.extend({idAttribute:"game_id",url:function(){return"/api/uslgamelink/add/"}}),n}),define("text!usercontrol/addgame/templates/orgchoose.html",[],function(){return'<div class="org-list-title">No Teams Matched, but we did find the following organizations.  Click one of these organzations to add a(n)\r\n	<%=seasoninfo.complevel %> <%=seasoninfo.season %> <%= seasoninfo.year %> team.</div>\r\n<ul id="choose-org">\r\n	<% _.each(data,function(val,index){ %>\r\n		<li class="add-team-to-org-h" data-id="<%= val.id %>" data-club-name="<%= val.name %>">\r\n			<span class="org-name"><%= val.name %></span>\r\n			<span class="org-location"><%= val.locations.full_address %></span>\r\n		</li>\r\n	<% }); %>\r\n	<li class="add-team-to-new-org-h">\r\n		<span class="org-name">Nope, none of these match</span>\r\n		<span class="org-location">Click here to create <%= user_text %> <%=seasoninfo.complevel %> <%=seasoninfo.season %> <%= seasoninfo.year %></span>\r\n	</li>\r\n</ul>'}),define("usercontrol/addgame/models/org_addteam",["require","facade","usercontrol/addgame/models/team"],function(e){var t,n=e("facade"),r=n._,i=e("usercontrol/addgame/models/team");return t=i.extend({url:function(){return"/api/team/add"}}),t}),define("usercontrol/addgame/views/orgchoose",["require","text!usercontrol/addgame/templates/orgchoose.html","usercontrol/addgame/models/org_addteam","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=e("usercontrol/addgame/models/org_addteam"),c=r.$,h=i.BaseView,p=r.Backbone,d;return p.View.extend({template:t,events:{"click li.add-team-to-org-h":"addTeamToOrg","click li.add-team-to-new-org-h":"addTeamToNewOrg"},initialize:function(e){d=this,console.log("ORG CHOOSE VIEW",e),d.setOptions(e),d.render()},addTeamToNewOrg:function(e){e.stopPropagation(),e.preventDefault(),this.parentView.addTeamToNewOrg&&_.isFunction(this.parentView.addTeamToNewOrg)&&this.parentView.addTeamToNewOrg(e)&&this.destroy_view()},addTeamToOrg:function(e){e.stopPropagation(),e.preventDefault(),c(e.currentTarget).off("click").addClass("region-loader"),console.log(this.seasoninfo);var t=c(e.currentTarget).data("id"),n=this,r=new l({orgs_id:t,complevels_id:this.seasoninfo.complevels_id,seasons_id:this.seasoninfo.seasons_id,year:this.seasoninfo.year,sports_id:this.seasoninfo.sports_id});r.save(),c.when(r.request).done(function(e){n.parentView.setTeamTwoToNewTeam&&_.isFunction(n.parentView.setTeamTwoToNewTeam)&&n.parentView.setTeamTwoToNewTeam(r)&&n.destroy_view()})},render:function(){var e=_.template(this.template,{data:this.data,seasoninfo:this.seasoninfo,user_text:this.user_text});this.$el.html(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},destroy_view:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),p.View.prototype.remove.call(this)}})}),define("text!usercontrol/location/templates/get-view-location.html",[],function(){return'<textarea placeholder="Address" class="location-h address-h" rows="3" cols="25"></textarea>\r\n<span class="address-error hide address-error-status-h"></span>\r\n<a href="javascript: void(0);" class="verify-address-h">Verify Address</a>\r\n <div id="map-canvas-h" style="width: 90%; height: 300px; margin-top: 40px; display: none;"></div>\r\n'}),define("usercontrol/location/views/get-view-location",["require","text!usercontrol/location/templates/get-view-location.html","facade","views","utils","vendor","usercontrol/location/models/verify-adress"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=e("usercontrol/location/models/verify-adress"),l=a.Mustache,c=r.$,h=i.BaseView,p=r.Backbone,d;return p.View.extend({template:t,events:{"click .verify-address-h":"verifyAddress","blur .address-h":"verifyAddress"},initialize:function(e){d=this,d.location={},e.callback&&(this.callback=e.callback),d.location.latitude=!_.isUndefined(e)&&!_.isUndefined(e.latitude)?e.latitude:undefined,d.location.longitude=!_.isUndefined(e)&&!_.isUndefined(e.longitude)?e.longitude:undefined,d.setOptions(e),d.render()},intializeMap:function(){},verifyAddress:function(){var e=this,t=e.$el.find(".address-h").val();e.adressModel=new f,e.adressModel.address=t,e.adressModel.url(),e.adressModel.set({address:t}),e.adressModel.showError=function(t,n){try{e.$el.find(".set-address-h").addClass("link-disabled"),e.$el.find(".address-error-status-h").removeClass("hide").html(n.responseJSON.exec_data.error_array[0].error)}catch(r){}e.$el.find(".address-h").addClass("address-field-error").removeClass("address-verified")},e.adressModel.save({dataType:"json"}),e.$el.find(".address-h").removeClass("address-verified"),e.callback(""),c.when(e.adressModel.request).done(function(){console.log(e.adressModel.toJSON()),e.locationId=e.adressModel.get("payload").id;if(e.locationId){e.$el.find(".address-error-status-h").addClass("hide"),e.$el.find(".address-h").removeClass("address-field-error").addClass("address-verified"),e.location.latitude=e.adressModel.get("payload").lat,e.location.latitude=e.adressModel.get("payload").lon,e.$el.find(".set-address-h").removeClass("link-disabled"),e.callback(e.locationId);if(e.map){var t=new google.maps.LatLng(e.adressModel.get("payload").lat,e.adressModel.get("payload").lon);e.marker.setPosition(t),e.map.panTo(t)}else e.createMap()}})},createMap:function(){var e=this,t=new google.maps.LatLng(e.location.latitude,e.location.latitude),n={zoom:13,center:t,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.$el.find("#map-canvas-h").show(),this.map=new google.maps.Map(document.getElementById("map-canvas-h"),n),this.marker=new google.maps.Marker({position:t,map:this.map}),this.marker.setMap(this.map)},render:function(){var e=this,t=l.to_html(e.template,{location:e.locaion});return c(e.el).html(t),setTimeout(function(){e.intializeMap()},1e3),this},setOptions:function(e){for(var t in e)this[t]=e[t]}})}),define("usercontrol/addgame/models/opponent",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{name:""}),url:function(){return"/api/team/addopponent/"+this.id}}),n}),define("text!usercontrol/addgame/templates/neworg.html",[],function(){return'The <b>"<%= search_text %>"</b> team isn\'t in our database.  Want to <a id="add_team_2-h">add it?</a>'}),define("usercontrol/addgame/views/neworg",["require","text!usercontrol/addgame/templates/neworg.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p;return h.View.extend({template:t,events:{"click #add_team_2-h":"createNewOrg"},initialize:function(e){p=this,console.log(this.$el),p.setOptions(e),p.render()},createNewOrg:function(e){e.stopPropagation(),e.preventDefault(),this.parentView.addTeamToNewOrg(e)},render:function(){var e=_.template(this.template,{search_text:this.search_text});console.log(e),this.$el.html(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},destroy_view:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),h.View.prototype.remove.call(this)}})}),define("usercontrol/addgame/views/noteamfound",["require","facade","views","utils","vendor","usercontrol/addgame/collections/orgs","usercontrol/addgame/views/neworg","usercontrol/addgame/views/orgchoose","usercontrol/addgame/models/opponent","vendor/plugins/spin.min","component/forms"],function(e){var t,n=e("facade"),r=e("views"),i=r.SectionView,s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=u.Mustache,f=n.$,l=e("vendor/plugins/spin.min"),c=e("usercontrol/addgame/collections/orgs"),h=e("usercontrol/addgame/views/neworg"),p=e("usercontrol/addgame/views/orgchoose"),d=e("usercontrol/addgame/models/opponent"),v=e("component/forms"),m=r.BaseView,g=n.Backbone,y;return g.View.extend({template:"",events:{"click #add_team_2-h":"addTeamToNewOrg"},initialize:function(e){y=this,y.setOptions(e);var t=new c;t.org_name=y.search_text,t.states_id=y.states_id,t.sports_club=y.sports_club,t.single_sport_id=y.teamOneModel.get("payload").org_sport_link_obj.org.single_sport_id,t.fetch(),f.when(t.request).done(function(e){e.payload&&e.payload.length?(y.destination.find("div#dynamic_add_org").length||y.destination.append('<div id="dynamic_add_org"></div>'),y.destination.find("div#dynamic_add_team_2").remove(),y.orgChoose=new p({el:f("div#dynamic_add_org"),user_text:y.search_text,data:e.payload,seasoninfo:{complevel:y.teamOneModel.get("payload").complevels_obj.complevel_name,complevels_id:y.teamOneModel.get("payload").complevels_id,seasons_id:y.teamOneModel.get("payload").seasons_id,season:y.teamOneModel.get("payload").seasons_obj.season_name,year:y.teamOneModel.get("payload").year,sports_id:y.sports_id},parentView:y})):(y.destination.find("div#dynamic_add_org").remove(),y.destination.find("div#dynamic_add_team_2").length||y.destination.append('<div id="dynamic_add_team_2"></div>'),y.newOrgView=new h({el:y.destination.find("#dynamic_add_team_2"),search_text:y.search_text,parentView:y}))})},render:function(){var e=_.template(this.template,{});this.$el.html(e)},setOptions:function(e){for(var t in e)this[t]=e[t];console.log(this.teamOneModel)},destroy_view:function(){this.undelegateEvents(),this.$el.removeData().unbind(),_.isUndefined(this.newOrgView)||this.newOrgView.destroy_view(),_.isUndefined(this.orgChoose)||this.orgChoose.destroy_view(),this.remove(),g.View.prototype.remove.call(this)},setTeamTwoToNewTeam:function(e){y.destination.find("div#dynamic_add_team_2").remove(),y.destination.find("div#dynamic_add_org").remove(),y.destination.find("span.indicator-h").removeClass("invalid").addClass("valid"),f('input[name="Select_Team_2"]').val(e.get("payload").team_name),f('input[name="Select_Team_2"]').attr("data-id",e.get("payload").id),this.formval_this.callback(e.get("payload").id),this.formval_this.afterSetValue("show")},setupOrgLocationForm:function(e){var t=this,n=f(e).parent().html('<div id="neworg-location-form"></div>'),r=new v({Location:{tooltip:"Enter the location of the opponent organization.  You can enter an address, or, if you don't know it, just a city or state.",form_values:{serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},type:"Location",label:'Enter the location of "'+this.search_text+'"',validators:[{type:"required",message:"Please select location."}]},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Add New Club"},showLable:!1,onSubmit:function(e){var n=i.commit();if(n)for(var r in n){var s=f("*[name="+r+"]"),o=s.position();s.parents(".common-modal #modalBody").animate({scrollTop:o.top},"500",function(){s.addClass("focus-error-animation"),setTimeout(function(){s.removeClass("focus-error-animation")},2e3)});break}else{var u={lines:15,length:5,width:2,radius:3,corners:1,rotate:0,direction:1,color:"#000",speed:.6,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9},a=(new l(u)).spin();f(e.currentTarget).append(a.el);if(!confirm("This will add "+t.search_text+" "+t.teamOneModel.get("payload").complevels_obj.complevel_name+" "+t.teamOneModel.get("payload").org_sport_link_obj.sport.sport_name+" "+t.teamOneModel.get("payload").seasons_obj.season_name+" "+t.teamOneModel.get("payload").year+".  Continue?"))return a.stop(),f(e.currentTarget).removeClass("region-loader").on("click",addTeamToNewOrg),!1;var c=t.formValues.getFormValues(),h=t.teamOneModel.get("payload").id,p=new d({id:h,name:t.search_text,locations_id:c.locations_id});p.save(),f.when(p.request).done(function(e){return t.setTeamTwoToNewTeam(p),!0})}}}},n.find("#neworg-location-form")),i=r.form;this.formValues=r.formValues},addTeamToNewOrg:function(e){var t=this,n=f(e.currentTarget).html();f(e.currentTarget).addClass("region-loader").off("click"),console.error(e),this.setupOrgLocationForm(e.currentTarget)}})}),define("usercontrol/addgame/views/main",["require","text!usercontrol/addgame/templates/layout.html","facade","views","utils","vendor","sportorg/collections/sports_listall","location/collections/states","usercontrol/addgame/collections/teams","location/collections/cities","usercontrol/addgame/collections/teams_user","usercontrol/addgame/collections/teams","usercontrol/addgame/collections/games_search","usercontrol/addgame/collections/orgs","usercontrol/addgame/models/team","usercontrol/addgame/models/team_add","usercontrol/addgame/models/game","usercontrol/addgame/models/uslgamelink","usercontrol/addgame/views/orgchoose","usercontrol/dropdown/view/dropdown","usercontrol/location/views/get-view-location","usercontrol/addgame/models/opponent","usercontrol/addgame/views/noteamfound","component/forms"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrol/tag/models/basic_info"),h=e("sportorg/collections/sports_listall"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrol/addgame/collections/teams_user"),m=e("usercontrol/addgame/collections/teams"),g=e("usercontrol/addgame/models/team"),y=e("usercontrol/addgame/models/team_add"),b=e("usercontrol/addgame/models/game"),w=e("usercontrol/addgame/collections/games_search"),E=e("usercontrol/dropdown/view/dropdown"),S=e("usercontrol/location/views/get-view-location"),x=e("component/forms"),T=e("usercontrol/addgame/models/opponent"),N=e("usercontrol/addgame/collections/orgs"),C=e("usercontrol/addgame/views/orgchoose"),k=e("usercontrol/addgame/views/noteamfound"),L=e("usercontrol/addgame/models/uslgamelink"),A=s.extend({template:t,gameData:{},teams:[],events:{"change .ddl-game-sports_h":"changeSport","keyup .txt-game-state_h":"keyupState","blur .txt-game-state_h":"changeState","keyup .txt-game-city_h":"keyupCity","blur .txt-game-city_h":"changeCity","keyup .txt-game-team_h":"keyupTeam","blur .txt-game-team_h":"changeTeam","keyup .txt-individual-game_h":"keyupIndividualGame","blur .txt-individual-game_h":"changeindividualGame","change .ddl-game-userteams_h":"changeUserTeam","click .btn-new-team-game_h":"showAddTeam","click .btn-ddl-team-game_h":"showDdlTeam","click .rdo-game-location_h":"showLocation","click .btn-game-Finish_h":"finishGame","change .txt-game-date_h":"CheckTeamControlsVisibility","click .btn-game-individual-Create_h":"createIndividualEvent","click .btn-game-individual-Finish_h":"goThereIndividualGame"},controls:{sectionAddSports:".section-Add-Sports_h",sectionDate:".section-game-date_h",txtGameDate:".txt-game-date_h",txtGameTime:".txt-game-time_h",spnTimePeriod:".spn-ddl-time-period_h",ddlTimePeriod:".ddl-time-period_h",spnSports:".span-ddl-sports_h",ddlSports:".ddl-game-sports_h",sectionTeams:".section-game-teams_h",ddlUserTeams:".ddl-game-userteams_h",spanddlteam:".span_ddl_team_h",spanddlteamtwo:".span_ddl_team_two_h",spanddlteamone:".span_ddl_team_one_h",btnNewTeam:".btn-new-team-game_h",btnDdlTem:".btn-ddl-team-game_h",sectionNewTeam:".section-new-team_h",txtState:".txt-game-state_h",txtCity:".txt-game-city_h",txtTeam:".txt-game-team_h",txtScore:".txt-score-team_h",btnFinish:".btn-game-Finish_h",sectionTeamOne:".team-one_h",sectionTeamTwo:".team-two_h",sectionScore:".section-score_h",sectionRadio:".section-game-radio_h",rdoTeamOne:".rdo-game-location-one-home_h",rdoTeamTwo:".rdo-game-location-two-home_h",rdoLocation:".rdo-game-location_h",sectionMainLocation:".section-main-location_h",sectionLocation:".div-game-location_h",txtLocationId:".txt-game-location-id_h",sectionIndividual:".section-individual-game_h",txtIndividualGame:".txt-individual-game_h",btnIndividualFinish:".btn-game-individual-Finish_h",txtIndividualLocation:".txt-individual-location_h",btnIndividualGameCreate:".btn-game-individual-Create_h",fieldMessage:".field-message_h",secSports:".section-game-sports_h",hdnSportsIdData:"hdn_sport_id",hdnSportsId:"#hdn_sport_id",hdnTimePeriodData:"hdn_time-period_h",hdnTimePeriod:"#hdn_time-period_h",indicator:".indicator_h"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid",sportId:"sportid",locationId:"locationid",gameId:"gameid"},inlineTemplates:{},messages:{dataNotExist:"Data does not exist . ",selectDateAndTime:"Please select date and time",selectTeam:"Please select team",selectScore:"Please enter score",selectLocation:"Please select location",selectLocationType:"Please select location type",gameFound:"Sweet ! This Event Already Exists ! ",enterEventName:"Please enter event name",selectSport:"Please select sport",selectValidTime:"Please enter valid time in format hh:mm (12 hours)"},tags:{individual:"individual",team:"team",rgxTime:/^(0?[1-9]|1[012])(:[0-5]\d)$/,rgxTimeWhole:/^(0?[1-9]|1[012])$/},initialize:function(e){s.prototype.initialize.call(this,e),n=this,this.teams_id=e.teams_id,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this);var e=this,t,r=new x({date:{tooltip:"Select the game's date.  If the game is in the past, you will be prompted to enter an optional score.",form_values:{post_to_server:!1,serverKey:"game_date",serverDbField:"gameDay",objectValuesToUpdate:["game_datetime"],getValue:function(){return this.$el.val()}},fieldClass:"date-picker-field",type:"Text",attr:{placeholder:"Enter Date","class":"txt-game-date_h txtDate"},showLable:!1,label:"Date",bindDatePicker:!0,changeEvent:function(){var e=new Date(this.getValue()),t=new Date;e!=null&&t>=e?l(".txt-score-team-h").removeClass("hidden"):l(".txt-score-team-h").addClass("hidden").val("")}},time:{tooltip:'e.g. "4" or "4:15"',form_values:{post_to_server:!1,serverDbField:"gameTime",serverKey:"game_time",objectValuesToUpdate:["game_datetime"]},type:"Text",fieldClass:"time-picker-field",attr:{placeholder:"Time","class":"txt-game-time_h hasDatepicker txtTime"},showLable:!1,label:"Time",validators:[{type:"required",message:"Please enter a time"},/^(0?[1-9]|1[012])(:[0-5]\d)?$/]},Day_light:{type:"DropDown",fieldClass:"ampm-field",form_values:{post_to_server:!1,serverKey:"game_ampm",objectValuesToUpdate:["game_datetime"],data:{records:[{payload:{name:"AM",value:"AM"}},{payload:{name:"PM",value:"PM"}}],recordId:"name",recordValue:"value",selectedValue:"PM"},elementId:e.controls.hdnTimePeriodData,callback:function(e){}},showLable:!1,label:""},game_datetime:{type:"Hidden",form_values:{serverDbField:"game_datetime",valueBindings:["date","time","Day_light"],serverKey:"game_datetime",post_to_server:!0}},Select_Team_1:{type:"AutoComplete",label:"Select Team 1",tooltip:"Select the first team competing in this event.",form_values:{keyNameInPayload:"team_name",showElements:["team_1"],serverKey:"teamOneId",serverDbField:"teams_id",defaultValue:"",field_width:"80%",request_fields:[{key:"states_id",value:e.states_id},{key:"sports_id",value:function(){return e.sports_id}},{key:"team_name",value:function(e){return e.$el.val()}}],source_collection:m,request_finished:function(){},automaticFetch:!0,automaticFetchFn:function(t){var r=new g;r.id=e.team_id,r.fetchSuccess=function(e,i){var s=r.parseAsRequired(i);n.complevels_id=s.complevels_id,n.states_id=s.states_id,n.sports_club=s.sports_club,n.seasons_id=s.seasons_id,n.year=s.year,n.teamOneModel=r,t.setValue(s.team_id,s.team_name),l(n.destination).find("input[name=team_1]").attr("teamId",s.team_id)},r.fetch()},callback:function(e,t){l("input[name=team_1]").attr("teamId",e),n.complevels_id=t.full_return.complevels_id,n.seasons_id=t.full_return.seasons_id,n.year=t.full_return.year,l(n.destination).find("input[name=team_1]").attr("teamId",e)},afterSetValue:function(e){e=="show"?l("input[name=team_1]").parents(".field-row").removeClass("hide"):l("input[name=team_1]").parents(".field-row").addClass("hide")}},validators:[{type:"required",message:"Please select Team 2."}]},score_1:{form_values:{serverKey:"",field_width:"70px"},type:"Text",attr:{placeholder:"Score","class":"txt-score-team-h hidden"},showLable:!1,label:"Score 1"},team_1:{tooltip:'Is this team the "Home" team or "Away" team?  Selecting this team as the Home team will automatically fill in the game\'s location.',form_values:{serverKey:"teamOne"},type:"Radio",options:["Home","Away"],attr:{team:"one"},hideElement:!0,showLable:!1,label:"Team 1",onClickFn:function(t){var r=t?l(t.target).val():"away",i=0;if(r=="Home")i=l(t.target).attr(n.attributes.teamId),console.log(l(n.destination).find('input[name="team_2"][value="Away"]')),l(n.destination).find('input[name="team_2"][value="Home"]').removeAttr("checked"),l(n.destination).find('input[name="team_2"][value="Away"]').attr("checked","checked").prop("checked",!0);else{i=!1;var s=l(n.destination).find("input[name=team_2]:checked");console.log(s),s.each(function(){r=l(this).val(),r==="Home"&&!i&&(i=l(this).attr(n.attributes.teamId))})}if(i){var o=new g;o.id=i,o.fetchSuccess=function(n,r){var i=o.parseAsRequired(r);e.location_id=i.location_id||0;var s=l(t.target).parents("form");s.find(".address-h").val(i.location_name).trigger("blur"),s.find(".verify-address-h").val(i.location_name).trigger("click")},o.fetch()}else l(t.target).parents("form").find(".address-h").html("").val("").trigger("blur")}},Select_Team_2:{tooltip:"Just start typing to find the opponent team.  If the team doesn't exist, you will be able to create it.",type:"AutoComplete",label:"Select Team 2",form_values:{keyNameInPayload:"team_name",serverKey:"teamTwoId",showElements:["team_2"],serverDbField:"teams_id",field_width:"80%",request_fields:[{key:"states_id",value:e.states_id},{key:"sports_id",value:function(){return e.sports_id}},{key:"complevels_id",value:function(){return e.complevels_id>0?e.complevels_id:!1}},{key:"seasons_id",value:function(){return e.seasons_id>0?e.seasons_id:!1}},{key:"year",value:function(){return e.year>0?e.year:!1}},{key:"team_name",value:function(e){return e.$el.val()}}],source_collection:m,request_finished:function(){},noResultsCallback:function(n){var r=this;_.isUndefined(t)||t.destroy_view(),t=new k({teamOneModel:e.teamOneModel,search_text:n,states_id:e.states_id,sports_club:e.sports_club,sports_id:e.sports_id,formval_this:r,destination:l('input[name="Select_Team_2"]').parent()})},callback:function(e){l("input[name=team_2]").attr("teamId",e)},afterSetValue:function(e){console.error(e),e=="show"?(l("input[name=team_2]").parents(".field-row").removeClass("hide"),l("input[name=score_2]").parents(".field-row").removeClass("hide")):(l("input[name=team_2]").parents(".field-row").addClass("hide"),l("input[name=score_2]").parents(".field-row").addClass("hide"))}},validators:[{type:"required",message:"Please select Team 2."}]},score_2:{form_values:{serverKey:"",field_width:"70px"},type:"Text",attr:{placeholder:"Score","class":"txt-score-team-h hidden"},showLable:!1,hideElement:!0,label:"Score 2"},team_2:{tooltip:'Is this team the "Home" team or "Away" team?  Selecting this team as the Home team will automatically fill in the game\'s location.',form_values:{serverKey:""},type:"Radio",options:["Home","Away"],showLable:!1,hideElement:!0,label:"Team 2",onClickFn:function(t){var r=t?l(t.target).val():"away",i=0;if(r=="Home")i=l(t.target).attr(n.attributes.teamId),l(n.destination).find('input[name="team_1"][value="Home"]').removeAttr("checked"),l(n.destination).find('input[name="team_1"][value="Away"]').attr("checked","checked").prop("checked",!0);else{var s=l(n.destination).find("input[name=team_1]:checked");s.each(function(){r=l(this).val(),r=="Home"&&(i=l(this).attr("teamId"))})}if(i){var o=new g;o.id=i,o.fetchSuccess=function(n,r){var i=o.parseAsRequired(r);e.location_id=i.location_id||0;var s=l(t.target).parents("form");s.find(".address-h").val(i.location_name).trigger("blur"),s.find(".verify-address-h").val(i.location_name).trigger("click")},o.fetch()}else l(t.target).parents("form").find(".address-h").html("").val("").trigger("blur")}},Location:{tooltip:"Enter the game location.  This can be an address, a city, or a state.",form_values:{serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},type:"Location",label:"Game Location",validators:[{type:"required",message:"Please select location."}]},users_id:{form_values:{serverKey:e.users_id,post_to_server:!0,value:e.user_id},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Create"},showLable:!1,onSubmit:function(t){var n=i.commit();if(n)for(var r in n){var s=l("*[name="+r+"]"),o=s.position();s.parents(".common-modal #modalBody").animate({scrollTop:o.top},"500",function(){s.addClass("focus-error-animation"),setTimeout(function(){s.removeClass("focus-error-animation")},2e3)});break}else{if(e.formValues)var u=e.formValues.getFormValues();else var u=i.getValue();var u=e.formValues.getFormValues(),a=e,f={game_datetime:u.game_datetime,game_location:u.locations_id,teamOneId:u.teamOneId,teamTwoId:u.teamTwoId,sports_id:u.sports_id,users_id:a.user_id},c=new b(f);c.save({}),l.when(c.request).fail(function(t){var n=JSON.parse(t.responseText),r=n.exec_data.error_array;e.formValues.showServersErrors(r)}),l.when(c.request).done(function(e){if(e!=null&&e.payload!=null){a.game_id=e.payload.id;var t=l(a.destination).find("input[value=Home]").is(":checked"),n={game_datetime:u.game_datetime,games_id:a.game_id,home_team:t||!1,locations_id:u.locations_id,score:u.score_1,users_id:a.user_id},r=new y(n),i=!1,s=!1;r.teams_id=u.teamOneId,r.save();var o=function(){i&&s&&routing.trigger(a.channel,e)};l.when(r.request).done(function(){i=!0,o()});var f={game_datetime:u.game_datetime,games_id:a.game_id,home_team:t||!1,locations_id:u.locations_id,score:u.score_2,users_id:a.user_id};t=l(a.destination).find(a.controls.rdoTeamTwo).is(":checked");var c=new y(f);c.teams_id=u.teamTwoId,c.save(),a.gameData={type:a.tags.team,game_datetime:u.game_datetime,team_id_one:u.teamOneId,team_id_two:u.teamTwoId,sports_id:u.sports_id,games_id:a.game_id,users_id:a.user_id},l.when(c.request).done(function(){s=!0,o()})}})}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},this.$el.find(".add-game-container-h")),i=r.form;this.formValues=r.formValues},afterRender:function(){var e=this,t=new S({callback:function(t){var n=t!=""?!0:!1;e.$el.find(".btn-game-Finish_h").attr("disable",n),e.$el.find(".txt-game-location-id_h").val(t)}});this.$el.find(".location-view-h").html(t.el)},setOptions:function(e){this.user_id=e.user_id;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel,this.sports_id=e.sports_id||null,this.team_id=e.teams_id||null},init:function(){n.setupView()},setupView:function(){n.setUpMainView();if(n.team_id){var e=new g;e.id=n.team_id,e.fetchSuccess=function(t,r){var i=e.parseAsRequired(r);n.team=i,n.sports_id=i.sports_id||null,n.fillSports()},e.fetch()}else n.fillSports()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e)},fillSports:function(){var e=new h;e.processResult=function(t){var r=e.ParseForDropdown();n.SetupSportsView(r)},e.fetch()},SetupSportsView:function(e){n.sports=e;var t={};t.records=n.sports,t.recordId="id",t.recordValue="custom_name";var r=new E({data:t,title:"Select Sport",elementId:n.controls.hdnSportsIdData,destination:n.controls.spnSports,targetView:n,selectedValue:n.sports_id||null,callback:function(e){n.changeSport(e)}})},changeSport:function(e){if(e&&e!=0){l(n.destination).find(n.controls.sectionTeams).show(),l(n.destination).find(n.controls.btnFinish).fadeIn(),l(n.destination).find("input").attr(n.attributes.sportId,e);var t=n.getTeamType(e);t&&n.fillTeams(e)}else l(n.destination).find(n.controls.btnFinish).fadeOut(),l(n.destination).find(n.controls.sectionTeams).fadeOut(),l(n.destination).find("input").removeAttr(n.attributes.stateId);n.CheckTeamControlsVisibility()},setFirstTeam:function(e){console.log("setFirstTeam");var t=!1;if(n.team_id){for(var r in n.teams)n.teams[r].payload.id==n.team_id&&(t=!0);if(!t)if(n.team)n.setSelectedTeam(n.team);else{var i=new g;i.id=n.team_id,i.fetchSuccess=function(e,t){var r=i.parseAsRequired(t);n.team=r,n.setSelectedTeam(r)},i.fetch()}n.CheckTeamControlsVisibility()}},setSelectedTeam:function(e){console.log("setSelectedTeam");if(e){console.log("data",e);var t=e.team_name,r=e.team_id;l(n.destination).find(n.controls.sectionTeamOne).find("input").attr(n.attributes.teamId,r),l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.spanddlteamone).hide(),l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.btnNewTeam).hide(),l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtTeam).val(t).show(),l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.indicator).addClass("valid").removeClass("invalid").show()}},fillTeams:function(e){var t=new v;t.user_id=n.user_id,t.sports_id=e,t.processResult=function(e){var r={team_name:"Team Not Found",id:-1},i=t.AppendItem(r);n.setUpUserTeams(i)};var r=t.fetch()},setUpUserTeams:function(e){n.teams=e||[],n.setFirstTeam(n.team_id);var t={};t.records=n.teams,t.recordId="id",t.recordValue="team_name";var r=new E({data:t,elementId:"hdn_team_id",targetView:n,destination:n.controls.spanddlteamone,selectedValue:n.team_id||null,callback:function(e){n.changeUserTeamOne(e)}})},changeUserTeamOne:function(e){console.log("result1",e),e=="-1"?l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.btnNewTeam).trigger("click"):(l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.btnNewTeam).show(),l(n.destination).find(n.controls.sectionTeamOne).find("input").attr(n.attributes.teamId,e),l(n.destination).find(n.controls.sectionTeamOne).find("input:checked").removeAttr("checked"),n.showLocation())},changeUserTeamTwo:function(e){console.log("result",e),e=="-1"?l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.btnNewTeam).trigger("click"):(l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.btnNewTeam).show(),l(n.destination).find(n.controls.sectionTeamTwo).find("input").attr(n.attributes.teamId,e),l(n.destination).find(n.controls.sectionTeamTwo).find("input:checked").removeAttr("checked"),n.showLocation())},showAddTeam:function(e){l(e.target).hide(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.spanddlteam).hide(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).show(),l(e.target).parents(n.controls.sectionTeams).find("input").removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find("input:checked").removeAttr("checked"),n.showLocation()},showDdlTeam:function(e){l(e.target).hide(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).val("").hide(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).hide(),l(e.target).parents(n.controls.sectionTeams).find("input").removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find(n.controls.ddlUserTeams).val("").show(),l(e.target).parents(n.controls.sectionTeams).find("input:checked").removeAttr("checked"),n.showLocation()},keyupState:function(e){var t=l(e.target).val(),r=[];if(t!="")if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.stateId),n.CheckTeamControlsVisibility();var i=new p;i.state_name=l(e.target).val(),console.log("State Request Abort Request Function AddGame/Main.js"),n.stateFetchRequest=n.stateFetchRequest||[],n.stateFetchRequest.push(n.cityFetchRequest||[]),n.stateFetchRequest.push(n.teamFetchRequest||[]),l(e.target).addClass("ui-autocomplete-loading"),n.stateFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.stateFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.states=[];for(var s in t)n.states.push(t[s].payload);n.states.forEach(function(e,t){r.push(e.name)});try{l(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else n.changeState(e)},changeState:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.stateId);var r=!1;n.states_id="",n.states&&n.states.forEach(function(i,s){i["name"]==t&&(r=!0,n.states_id=i.id,l(e.target).attr(n.attributes.stateId,n.states_id),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtCity).attr(n.attributes.stateId,n.states_id).fadeIn(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).attr(n.attributes.stateId,n.states_id).fadeOut(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).hide())}),r||(n.states_id=0,l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtTeam).removeAttr(n.attributes.stateId).fadeOut(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).hide(),l(e.target).parents(n.controls.sectionTeams).find(n.controls.txtCity).removeAttr(n.attributes.stateId).fadeOut()),n.CheckTeamControlsVisibility()},keyupCity:function(e){var t=l(e.target).val(),r=[];if(t.length>2)if(n.isValidAutoCompleteKey(e)==1){l(e.target).removeAttr(n.attributes.cityId),n.CheckTeamControlsVisibility();var i=new d;i.states_id=n.states_id,i.city_name=l(e.target).val(),n.cityFetchRequest=n.cityFetchRequest||[],n.cityFetchRequest.push(n.teamFetchRequest||[]),l(e.target).addClass("ui-autocomplete-loading"),n.cityFetchRequest=n.abortRequest(n.stateFetchRequest);var s=i.fetch();n.cityFetchRequest.push(s),l.when(i.request).done(function(){if(i.isError())return;var t=i.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut(),n.cities=[];for(var s in t)n.cities.push(t[s]);n.cities.forEach(function(e,t){r.push(e.city)});try{n.$(e.target).autocomplete("destroy")}catch(o){}n.$(e.target).autocomplete({source:r}),n.$(e.target).trigger("keydown")})}else n.changeCity(e)},changeCity:function(e){var t=l(e.target).val();l(e.target).removeAttr(n.attributes.cityId);var r=!1;n.city_id="",n.cities&&n.cities.forEach(function(i,s){i["city"]==t&&(r=!0,n.city_id=i.id,l(e.target).attr(n.attributes.cityId,n.city_id))}),r||(n.city_id=0),n.CheckTeamControlsVisibility()},keyupTeam:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){l(e.target).removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).addClass("invalid").removeClass("valid").show(),n.CheckTeamControlsVisibility();var s=new m;s.states_id=l(e.target).attr(n.attributes.stateId),s.city_id=l(e.target).attr(n.attributes.cityId),s.sports_id=l(e.target).attr(n.attributes.sportId),s.team_name=t,l(e.target).addClass("ui-autocomplete-loading"),n.TeamFetchRequest=n.abortRequest(n.TeamFetchRequest);var o=s.fetch();n.TeamFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.$(e.target).parent().find(n.controls.fieldMessage).html(n.messages.dataNotExist).stop().fadeIn():n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.teams=[];for(var i in t)n.teams.push(t[i].payload);n.teams.forEach(function(e,t){r.push(e.team_name)});try{n.$(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).addClass("invalid").removeClass("valid").show(),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeTeam(e)},changeTeam:function(e){var t=l(e.target).val(),r=!1;n.team_id=0,n.teams&&n.teams.forEach(function(i,s){var o=i.team_name;o==t&&(r=!0,n.team_id=i.id,l(e.target).parents(n.controls.sectionTeams).find("input").attr(n.attributes.teamId,n.team_id),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).removeClass("invalid").addClass("valid").show())});if(n.team){var i=n.team.team_name,s=n.team.team_id;i==t&&(r=!0,n.team_id=s,l(e.target).parents(n.controls.sectionTeams).find("input").attr(n.attributes.teamId,n.team_id),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).removeClass("invalid").addClass("valid").show())}r||(l(e.target).parents(n.controls.sectionTeams).find("input").removeAttr(n.attributes.teamId),l(e.target).parents(n.controls.sectionTeams).find(n.controls.indicator).addClass("invalid").removeClass("valid").show()),n.CheckTeamControlsVisibility()},keyupIndividualGame:function(e){var t=l(e.target).val(),r=[],i=n.isValidAutoCompleteKey(e);if(t!=""&&i==1&&t.length>2){l(e.target).removeAttr(n.attributes.gameId),n.CheckTeamControlsVisibility();var s=new w;s.game_name=t,l(e.target).addClass("ui-autocomplete-loading"),n.individualGameFetchRequest=n.abortRequest(n.individualGameFetchRequest);var o=s.fetch();n.individualGameFetchRequest.push(o),l.when(s.request).done(function(){if(s.isError())return;var t=s.toJSON();t==null||t.length<1?n.eventNotFound(e):n.$(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),n.individualGames=[];for(var i in t)n.individualGames.push(t[i].payload);n.individualGames.forEach(function(e,t){var n=e.event_name+" "+e.game_name;r.push(n)});try{n.$(e.target).autocomplete("destroy")}catch(o){}l(e.target).autocomplete({source:r}),l(e.target).trigger("keydown")})}else l(e.target).removeAttr(n.attributes.gameId),n.CheckTeamControlsVisibility(),n.isEnterKey(e)&&n.changeIndividualGame(e)},changeIndividualGame:function(e,t){var r=l(e.target).val(),i=!1;n.individual_game_id=0,n.individualGames&&n.individualGames.forEach(function(t,s){var o=t.event_name+" "+t.game_name;o==r&&(i=!0,n.individual_game_id=t.id,l(e.target).attr(n.attributes.gameId,n.individual_game_id))}),i?n.eventFound(e):n.eventNotFound(e),n.CheckTeamControlsVisibility()},eventNotFound:function(e){l(n.destination).find(n.controls.btnIndividualGameCreate).show(),l(n.destination).find(n.controls.btnIndividualFinish).hide(),l(e.target).parent().find(n.controls.fieldMessage).html("").stop().fadeOut(),l(e.target).removeAttr(n.attributes.gameId)},eventFound:function(e){l(n.destination).find(n.controls.btnIndividualGameCreate).hide(),l(n.destination).find(n.controls.btnIndividualFinish).show(),l(e.target).parent().find(n.controls.fieldMessage).html(n.messages.gameFound).fadeIn()},createIndividualEvent:function(e){var t=!0,r="",i=l(n.destination).find(n.controls.txtGameDate).datepicker("getDate"),s=l(n.destination).find(n.controls.txtGameTime).val(),o=l(n.destination).find(n.controls.hdnTimePeriod).val(),u=n.location_id||l(n.controls.txtLocationId).val()||0,a=l(n.destination).find(n.controls.txtIndividualGame).val(),f=l(n.destination).find(n.controls.hdnSportsId).val();f||(l(n.destination).find(n.controls.secSports).find(n.controls.fieldMessage).html(n.messages.selectSport).fadeIn(),t=!1);if(!i||!s)l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectDateAndTime).fadeIn(),this.focusOnErrorField(".section-Add-Sports_h"),t=!1;else{var c=s.match(n.tags.rgxTime)||s.match(n.tags.rgxTimeWhole);console.log("orginal date",i),console.log("orginal time",s),console.log("timeZone",o);if(!c)l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectValidTime).fadeIn(),t=!1;else{l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html("").fadeOut();try{var h=s.split(":");h&&(console.log(h),o!="PM"&&h[0]!="12"&&i.setHours(h[0]),h.length>1&&i.setMinutes(h[1]),o=="PM"&&i.addHours(12))}catch(p){}}console.log("new date",i)}u||(r+=n.messages.selectLocation,t=!1),l.trim(a)==""&&(r+="<br/>"+n.messages.enterEventName,t=!1);if(t){var d=i;l(e.target).parent().find(n.controls.fieldMessage).html("").fadeOut();var v={game_datetime:d,locations_id:u,event_name:a,sports_id:f,users_id:n.user_id},m=new b(v);m.save({}),l.when(m.request).done(function(e){n.game_id=e.payload.id,n.gameData={game_datetime:d,games_id:n.game_id,event_name:a,locations_id:u,sports_id:f,users_id:n.user_id},routing.trigger(n.channel,n.gameData)})}else l(e.target).parent().find(n.controls.fieldMessage).html(r).fadeIn()},goThereIndividualGame:function(e){var t=l(n.destination).find(n.controls.hdnSportsId).val(),r={users_id:n.user_id,sports_id:t,games_id:n.individual_game_id},i=new L(r);i.save(),l.when(i.request).done(function(e){n.goThereSuccess(e)})},goThereSuccess:function(e){if(e&&e.payload!=null){var t=e.payload.game;t&&(n.gameData={type:n.tags.individual,game_datetime:t.gameDay,event_name:t.event_name,game_location:t.game_location,games_id:t.id,sports_id:e.payload.usl?e.payload.usl.sports_id:null,users_id:n.user_id},routing.trigger(n.channel,e))}},CheckTeamControlsVisibility:function(){var e=l(n.destination).find(n.controls.hdnSportsId).val();if(e&&e!=""&&e!=0){var t=n.getTeamType(e);if(!t)l(n.destination).find(n.controls.sectionTeams).hide(),l(n.destination).find(n.controls.sectionScore).hide(),l(n.destination).find(n.controls.btnFinish).hide(),l(n.destination).find(n.controls.sectionIndividual).show();else{var r=l(n.destination).find(n.controls.txtGameDate).datepicker("getDate"),i=new Date;r!=null&&i>=r?l(n.destination).find(n.controls.sectionScore).show():(l(n.destination).find(n.controls.sectionScore).hide(),l(n.destination).find(n.controls.txtScore).val("")),l(n.destination).find(n.controls.sectionIndividual).hide(),l(n.destination).find(n.controlsbtnIndividualFinish).hide(),l(n.destination).find(n.controls.sectionTeams).show(),l(n.destination).find(n.controls.btnFinish).show(),l(n.destination).find(n.controls.sectionMainLocation).show()}}else l(n.destination).find(n.controls.sectionIndividual).hide(),l(n.destination).find(n.controls.btnIndividualFinish).hide(),l(n.destination).find(n.controls.sectionTeams).hide(),l(n.destination).find(n.controls.btnFinish).hide(),l(n.destination).find(n.controls.sectionMainLocation).hide();e=l(n.destination).find(n.controls.txtTeam).attr(n.attributes.teamId),e&&e!=""&&e!=0?l(n.destination).find(n.controls.btnTeamDone).show():l(n.destination).find(n.controls.btnTeamDone).hide()},getTeamType:function(e){if(e&&e!=""&&e!=0){var t=!0;console.log("getteamtype",e);for(var r in n.sports)n.sports[r].payload.id==e&&(console.log("payload",n.sports[r].payload),n.sports[r].payload.team_type=="Individual"&&(t=!1));return t}return!1},showLocation:function(e){l(n.destination).find(n.controls.sectionMainLocation).show();var t=0,r=e?l(e.target).val():"away";if(r=="home")t=l(e.target).attr(n.attributes.teamId);else{var i=l(n.destination).find(n.controls.rdoLocation+":checked");i.each(function(){r=l(this).val(),r=="home"&&(t=l(this).attr(n.attributes.teamId))})}if(t){var s=new g;s.id=t,s.fetchSuccess=function(e,t){var r=s.parseAsRequired(t);n.setLocation(r)},s.fetch()}else l(n.destination).find(n.controls.txtLocationId).val("").fadeIn(),n.clearLocation()},setLocation:function(e){e.location_id?(n.location_id=e.location_id||0,l(n.destination).find(n.controls.txtLocationId).val("").fadeOut(),l(".address-h").val(e.location_name),l(".txt-game-location-id_h").val(e.location_id),l(".verify-address-h").trigger("click")):l(n.destination).find(n.controls.txtLocationId).val("").fadeIn()},clearLocation:function(){l(".address-h").val(""),l(".txt-game-location-id_h").val("")},formatDate:function(e,t,n){var r=l.datepicker.formatDate("yy-mm-dd",e);try{var i=t.split(":");return console.log(i),i.length==1&&(t+=":00"),t+=" "+n,r+=" "+t,r}catch(s){return!1}},finishGame:function(){l(n.destination).find(n.controls.fieldMessage).html("").hide();var e=!0,t=l(n.destination).find(n.controls.txtGameDate).datepicker("getDate"),r=l(n.destination).find(n.controls.txtGameTime).val(),i=l(n.destination).find(n.controls.hdnTimePeriod).val(),s=l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtTeam).attr(n.attributes.teamId),o=l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.txtScore).val(),u=l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.txtTeam).attr(n.attributes.teamId),a=l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.txtScore).val(),f=l(n.destination).find(n.controls.hdnSportsId).val(),c=n.location_id||l(n.controls.txtLocationId).val()||0;f||(l(n.destination).find(n.controls.secSports).find(n.controls.fieldMessage).html(n.messages.selectSport).fadeIn(),e=!1);if(!t||!r)l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectDateAndTime).fadeIn(),e=!1;else{var h=r.match(n.tags.rgxTime)||r.match(n.tags.rgxTimeWhole);console.log("orginal date",t),console.log("orginal time",r),console.log("ampm",i),h?(l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html("").fadeOut(),t=this.formatDate(t,r,i),t||(e=!1)):(console.log("NOT VALID"),l(n.destination).find(n.controls.sectionDate).find(n.controls.fieldMessage).html(n.messages.selectValidTime).fadeIn(),e=!1)}console.log("new date",t),c||(l(n.destination).find(n.controls.sectionMainLocation).find(n.controls.fieldMessage).html(n.messages.selectLocation).fadeIn(),e=!1),s>0||(l(n.destination).find(n.controls.sectionTeamOne).find(n.controls.fieldMessage).html(n.messages.selectTeam).fadeIn(),e=!1),u>0||(l(n.destination).find(n.controls.sectionTeamTwo).find(n.controls.fieldMessage).html(n.messages.selectTeam).fadeIn(),e=!1);if(e){var p=t,d={game_datetime:p,locations_id:c,teamOneId:s,teamTwoId:u,sports_id:f,users_id:n.user_id},v=new b(d);v.save({}),l.when(v.request).done(function(e){console.log(e);if(e!=null&&e.payload!=null){n.game_id=e.payload.id;var t=l(n.destination).find(n.controls.rdoTeamOne).is(":checked"),r={game_datetime:p,games_id:n.game_id,home_team:t||!1,locations_id:n.location_id,score:o,users_id:n.user_id},i=new y(r);i.teams_id=s,i.save();var c={game_datetime:p,games_id:n.game_id,home_team:t||!1,locations_id:n.location_id,score:a,users_id:n.user_id};t=l(n.destination).find(n.controls.rdoTeamTwo).is(":checked");var h=new y(c);h.teams_id=u,h.save(),n.gameData={type:n.tags.team,game_datetime:p,games_id:n.game_id,team_id_one:s,team_id_two:u,sports_id:f,users_id:n.user_id},routing.trigger(n.channel,e)}})}}});return A}),define("usercontrol/addgame/addgame",["require","text!usercontrol/addgame/templates/layout.html","facade","controller","models","views","user/models/basic_info","usercontrol/addgame/views/main","jquery.slimscroll"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("user/models/basic_info"),d=e("usercontrol/addgame/views/main"),n=i.extend({cssArr:[base_url+"usercontrols/addgame/addgame.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.sports_id&&(this.sports_id=e.sports_id),e.teams_id&&(this.teams_id=e.teams_id),e.user_id&&(this.user_id=e.user_id),this.callback=e.callback,e.popup&&(this.popup=!0,this.modelHTML='<div id="addGamePopup"></div>'),e.gender&&(this.gender=e.gender),this.init(),this},init:function(){this.popup?this.setupPopupLayout().render():this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},setupLayout:function(){if(this.layout)return this.layout;var e=new h({scheme:this.scheme,destination:"#main",template:"",displayWhen:"ready"});return this.layout=e,this.layout},setupPopupLayout:function(){var e;this.scheme=[];var e=new h({scheme:this.scheme,destination:"#modalBody",template:"",displayWhen:"ready"});this.layout=e,this.modelBoxId="modal-popup-"+Math.floor(Math.random()*Math.random()*50*Math.random()*50);var t={};return t.height="500px",t.width="500px",t.title="Add Game",t.id=this.modelBoxId,routing.trigger("common-popup-open",t),this.layout},setUpMainView:function(){var e=this;routing.off("add-game-success"),routing.on("add-game-success",function(t){e.addGameFunction(t)});var n=this,r="#"+this.modelBoxId+" #modalBody";this.addGameView=new d({model:new p,template:t,name:"add-game-main",destination:r,user_id:n.user_id,channel:"add-game-success",sports_id:this.sports_id,teams_id:this.teams_id}),this.scheme.push(this.addGameView),this.layout.render()},addGameFunction:function(e){this.callback&&this.callback(e)}});return n}),define("text!usercontrol/photo-player/templates/comments.html",[],function(){return'\r\n\r\n{{#payload}}\r\n<div class="photo-player-coment"> \r\n	<div class="user-photo">\r\n		<img src="{{base_url}}{{poster_picture}}" alt="{{poster}}" />\r\n	</div> \r\n    <div class="content">\r\n    	<!--span class="comment-date">{{poster}} {{comment_date}}</span-->\r\n    	<span class="user-comment">{{user.first_name}} </span>\r\n    	<p class="comment-text">{{{comment}}}</p>\r\n    </div>\r\n</div>\r\n{{/payload}}\r\n\r\n\r\n\r\n'}),define("usercontrol/photo-player/collections/comments",["facade","site/collections/comments","utils"],function(e,t,n){var r;return r=t.extend({url:function(){return testpath?testpath+"/media/comments/"+this.id:"/api/media/comments/"+this.id}}),r}),define("text!usercontrol/photo-player/templates/player.html",[],function(){return'<div class="image-bg">\r\n	<div class="image-controls">\r\n		<ul class="image-actions">\r\n			<li><a href="javascript: void(0);" class="photo-player-tag-photo-h" title="tag photo">Tag Photo</a></li>\r\n			<li><a href="javascript: void(0);" class="photo-player-tag-myself-h" title="tag my self">Tag Myself</a></li>\r\n			<li><a href="javascript: void(0);" class="photo-player-vote-h" title="vote">Vote <span class="votes-num-h"></span></a></li>\r\n			<li class="icon-parent"><a href="javascript: void(0);" class="player-share share-on-h" data-share="facebook" title="share on facebook"></a></li>\r\n			<li class="icon-parent"><a href="javascript: void(0);" class="player-share share-on-h" data-share="twitter" title="share on twitter"></a></li>\r\n			<li class="icon-parent"><a href="javascript: void(0);" class="player-share share-on-h" data-share="gplus" title="share on google plus"></a></li>\r\n			<li class="icon-parent"><a href="javascript: void(0);" class="player-share share-on-h" data-share="tumbler" title="share on tumbler"></a></li>\r\n		</ul>\r\n		\r\n		<div class="closer">\r\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\r\n		</div>\r\n\r\n	</div>\r\n	<div id="video_container" class="hidden"><span>Loading Video...</span></div>\r\n	<div class="loading_image"><img src="" class="photo-player-main-image large-image-h" /></div>\r\n\r\n	<div class="thumbs-outer">\r\n		<div class="thumbs-header">\r\n			<span class="pull-left">All photos (<span class="total-image-count-h">102</span>)</span>\r\n			<a href="javascript:void(0)" class="toggle-thumbs-h pull-right" title="close">X</a>\r\n		</div>\r\n		<div class="thumbs-inner">\r\n			<ul class="images-list thumb-image-list-h"></ul>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="bottom-line-container">\r\n		<span class="image-message-h image-message"></span>\r\n		<a href="javascript: void(0)" class="photo-player-arrow photo-player-icons left-arrow-photoplayer back-arrow-h"></a>\r\n		<a href="javascript: void(0);" class="show-thumbs photo-player-icons toggle-thumbs-h"></a>\r\n		<a href="javascript: void(0)" class="photo-player-icons photo-player-arrow right-arrow-photoplayer next-arrow-h"></a>\r\n		<span class="count-of-images"><span class="current-image-number-count-h">17</span> of <span class="total-image-count-h">102</span></span>\r\n	</div>\r\n	\r\n</div>\r\n'}),define("text!usercontrol/photo-player/templates/image-thumbs.html",[],function(){return'{{#data}}\r\n<li>\r\n	<a href="javascript: void(0);" class="thumb-link-h" data-index="{{_index}}" title="thumb">\r\n			<img style="{{#styles}}{{property}} : {{value}}; {{/styles}}" src="{{_thumbnail}}" alt="{{_thumbnail}}"/>\r\n	</a>\r\n</li>{{/data}}'}),typeof jwplayer=="undefined"&&(jwplayer=function(e){if(jwplayer.api)return jwplayer.api.selectPlayer(e)},jwplayer.version="6.0.2813",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function a(e){if(!u.exists(e))return;var t=e.indexOf("://"),n=e.indexOf("?");return t>0&&(n<0||n>t)}function l(e){return function(){return f(e)}}var t=document,n=window,r=navigator,i="undefined",s="string",o="object",u=e.utils=function(){};u.exists=function(e){switch(typeof e){case s:return e.length>0;case o:return e!==null;case i:return!1}return!0},u.styleDimension=function(e){return e+(e.toString().indexOf("%")>0?"":"px")},u.getAbsolutePath=function(e,n){u.exists(n)||(n=t.location.href);if(!u.exists(e))return undefined;if(a(e))return e;var r=n.substring(0,n.indexOf("://")+3),i=n.substring(r.length,n.indexOf("/",r.length+1)),s;if(e.indexOf("/")===0)s=e.split("/");else{var o=n.split("?")[0];o=o.substring(r.length+i.length+1,o.lastIndexOf("/")),s=o.split("/").concat(e.split("/"))}var f=[];for(var l=0;l<s.length;l++){if(!s[l]||!u.exists(s[l])||s[l]==".")continue;s[l]==".."?f.pop():f.push(s[l])}return r+i+"/"+f.join("/")},u.extend=function(){var e=u.extend.arguments;if(e.length>1){for(var t=1;t<e.length;t++)for(var n in e[t])try{u.exists(e[t][n])&&(e[0][n]=e[t][n])}catch(r){}return e[0]}return null},u.log=function(e,t){typeof console!=i&&typeof console.log!=i&&(t?console.log(e,t):console.log(e))};var f=u.userAgentMatch=function(e){var t=r.userAgent.toLowerCase();return t.match(e)!==null};u.isIE=l(/msie/i),u.isFF=l(/firefox/i),u.isIOS=l(/iP(hone|ad|od)/i),u.isIPod=l(/iP(hone|od)/i),u.isIPad=l(/iPad/i),u.isAndroid=function(e){return e?f(new RegExp("android.*"+e,"i")):f(/android/i)},u.isMobile=function(){return u.isIOS()||u.isAndroid()},u.saveCookie=function(e,n){t.cookie="jwplayer."+e+"="+n+"; path=/"},u.getCookies=function(){var e={},n=t.cookie.split("; ");for(var r=0;r<n.length;r++){var i=n[r].split("=");i[0].indexOf("jwplayer.")==0&&(e[i[0].substring(9,i[0].length)]=i[1])}return e},u.typeOf=function(e){var t=typeof e;return t==="object"?e?e instanceof Array?"array":t:"null":t},u.translateEventResponse=function(t,n){var r=u.extend({},n);t==e.events.JWPLAYER_FULLSCREEN&&!r.fullscreen?(r.fullscreen=r.message=="true"?!0:!1,delete r.message):typeof r.data==o?(r=u.extend(r,r.data),delete r.data):typeof r.metadata==o&&u.deepReplaceKeyName(r.metadata,["__dot__","__spc__","__dsh__"],["."," ","-"]);var i=["position","duration","offset"];for(var s in i)r[i[s]]&&(r[i[s]]=Math.round(r[i[s]]*1e3)/1e3);return r},u.flashVersion=function(){if(u.isAndroid())return 0;var e=r.plugins,t;if(e!=i){t=e["Shockwave Flash"];if(t)return parseInt(t.description.replace(/\D+(\d+)\..*/,"$1"))}if(typeof n.ActiveXObject!=i)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)return parseInt(t.GetVariable("$version").split(" ")[1].split(",")[0])}catch(s){}return 0},u.getScriptPath=function(e){var n=t.getElementsByTagName("script");for(var r=0;r<n.length;r++){var i=n[r].src;if(i&&i.indexOf(e)>=0)return i.substr(0,i.indexOf(e))}return""},u.deepReplaceKeyName=function(t,n,r){switch(e.utils.typeOf(t)){case"array":for(var i=0;i<t.length;i++)t[i]=e.utils.deepReplaceKeyName(t[i],n,r);break;case o:for(var s in t){var u,a;if(n instanceof Array&&r instanceof Array){if(n.length!=r.length)continue;u=n,a=r}else u=[n],a=[r];var f=s;for(var i=0;i<u.length;i++)f=f.replace(new RegExp(n[i],"g"),r[i]);t[f]=e.utils.deepReplaceKeyName(t[s],n,r),s!=f&&delete t[s]}}return t};var c=u.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};u.getPluginPathType=function(e){if(typeof e!=s)return;e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return c.ABSOLUTE;var n=e.indexOf("/"),r=u.extension(e);return t<0&&n<0&&(!r||!isNaN(r))?c.CDN:c.RELATIVE},u.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},u.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},u.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},u.isRtmp=function(e,t){return e.indexOf("rtmp")==0||t=="rtmp"},u.foreach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n)},u.isHTTPS=function(){return n.location.href.indexOf("https")==0}}(jwplayer),function(e){var t="video/",n="audio/",r="image",i="mp4",s="webm",o="ogg",u="aac",a="mp3",f="vorbis",l={mp4:t+i,vorbis:n+o,ogg:t+o,webm:t+s,aac:n+i,mp3:n+a,hls:"application/vnd.apple.mpegurl"},c={mp4:l[i],f4v:l[i],m4v:l[i],mov:l[i],m4a:l[u],f4a:l[u],aac:l[u],mp3:l[a],ogv:l[o],ogg:l[f],oga:l[f],webm:l[s],m3u8:l.hls},t="video",h={flv:t,f4v:t,mov:t,m4a:t,m4v:t,mp4:t,aac:t,mp3:"sound",smil:"rtmp",m3u8:"hls"},p=e.extensionmap={};for(var d in c)p[d]={html5:c[d]};for(d in h)p[d]||(p[d]={}),p[d].flash=h[d];p.types=l,p.mimeType=function(e){for(var t in l)if(l[t]==e)return t},p.extType=function(e){return p.mimeType(c[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},n=document;e.scriptloader=function(r){function u(e){i=t.ERROR,o.sendEvent(s.ERROR)}function f(e){i=t.COMPLETE,o.sendEvent(s.COMPLETE)}var i=t.NEW,s=jwplayer.events,o=new s.eventdispatcher;e.extend(this,o),this.load=function(){var o=e.scriptloader.loaders[r];if(!(!o||o.getStatus()!=t.NEW&&o.getStatus()!=t.LOADING)){o.addEventListener(s.ERROR,u),o.addEventListener(s.COMPLETE,f);return}e.scriptloader.loaders[r]=this;if(i==t.NEW){i=t.LOADING;var l=n.createElement("script");l.addEventListener?(l.onload=f,l.onerror=u):l.readyState&&(l.onreadystatechange=function(){(l.readyState=="loaded"||l.readyState=="complete")&&f()}),n.getElementsByTagName("head")[0].appendChild(l),l.src=r}},this.getStatus=function(){return i}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},e.pad=function(e,t,n){n||(n="0");while(e.length<t)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return e.attributes[n].value.toString();return""},e.jsonToString=function(t){var n=n||{};if(n&&n.stringify)return n.stringify(t);var r=typeof t;if(r=="object"&&t!==null){var i=[],s=t&&t.constructor==Array;for(var o in t){var u=t[o];switch(typeof u){case"string":u='"'+u.replace(/"/g,'\\"')+'"';break;case"object":e.exists(u)&&(u=e.jsonToString(u))}s?typeof u!="function"&&i.push(String(u)):typeof u!="function"&&i.push('"'+o+'":'+String(u))}return s?"["+String(i)+"]":"{"+String(i)+"}"}if(r!="string")return String(t);t='"'+t.replace(/"/g,'\\"')+'"'},e.extension=function(e){if(!e||e.substr(0,4)=="rtmp")return"";e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0];if(e.lastIndexOf(".")>-1)return e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase()},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),e.length==3&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="invalid",n="36QXq4W@GSBV^teR";e.key=function(r){function u(n){e.exists(n)||(n="");try{n=f(n);var r=n.split("/");i=r[0],i?e.key.valid.indexOf(i)<0&&(i=t):i="free",s=r[1],r[2]&&parseInt(r[2])>0&&(o=new Date,o.setTime(String(r[2])))}catch(u){i=t}}function f(t){return e.tea.decrypt(t,n)}var i,s,o;this.edition=function(){return o&&o.getTime()<(new Date).getTime()?t:i},this.token=function(){return s},u(r)},e.key.valid=["free","pro"]}(jwplayer.utils),function(e){e.key.valid=["premium","ads"]}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,i){if(e.length==0)return"";var s=t.strToLongs(r.encode(e));s.length<=1&&(s[1]=0);var o=t.strToLongs(r.encode(i).slice(0,16)),u=s.length,f=s[u-1],l=s[0],h=2654435769,p,v,m=Math.floor(6+52/u),g=0;while(m-->0){g+=h,v=g>>>2&3;for(var y=0;y<u;y++)l=s[(y+1)%u],p=(f>>>5^l<<2)+(l>>>3^f<<4)^(g^l)+(o[y&3^v]^f),f=s[y]+=p}var b=t.longsToStr(s);return n.encode(b)},t.decrypt=function(e,i){if(e.length==0)return"";var s=t.strToLongs(n.decode(e)),o=t.strToLongs(r.encode(i).slice(0,16)),u=s.length,f=s[u-1],l=s[0],h=2654435769,p,v,m=Math.floor(6+52/u),g=m*h;while(g!=0){v=g>>>2&3;for(var y=u-1;y>=0;y--)f=s[y>0?y-1:u-1],p=(f>>>5^l<<2)+(l>>>3^f<<4)^(g^l)+(o[y&3^v]^f),l=s[y]-=p;g-=h}var b=t.longsToStr(s);return b=b.replace(/\0+$/,""),r.decode(b)},t.strToLongs=function(e){var t=new Array(Math.ceil(e.length/4));for(var n=0;n<t.length;n++)t[n]=e.charCodeAt(n*4)+(e.charCodeAt(n*4+1)<<8)+(e.charCodeAt(n*4+2)<<16)+(e.charCodeAt(n*4+3)<<24);return t},t.longsToStr=function(e){var t=new Array(e.length);for(var n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]&255,e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={};n.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode=function(e,t){t=typeof t=="undefined"?!1:t;var i,s,o,u,f,l,c,h,p=[],v="",m,g,y,b=n.code;g=t?r.encode(e):e,m=g.length%3;if(m>0)while(m++<3)v+="=",g+="\0";for(m=0;m<g.length;m+=3)i=g.charCodeAt(m),s=g.charCodeAt(m+1),o=g.charCodeAt(m+2),u=i<<16|s<<8|o,f=u>>18&63,l=u>>12&63,c=u>>6&63,h=u&63,p[m/3]=b.charAt(f)+b.charAt(l)+b.charAt(c)+b.charAt(h);return y=p.join(""),y=y.slice(0,y.length-v.length)+v,y},n.decode=function(e,t){t=typeof t=="undefined"?!1:t;var i,s,o,u,f,l,c,h,p=[],v,m,g=n.code;m=t?r.decode(e):e;for(var y=0;y<m.length;y+=4)u=g.indexOf(m.charAt(y)),f=g.indexOf(m.charAt(y+1)),l=g.indexOf(m.charAt(y+2)),c=g.indexOf(m.charAt(y+3)),h=u<<18|f<<12|l<<6|c,i=h>>>16&255,s=h>>>8&255,o=h&255,p[y/4]=String.fromCharCode(i,s,o),c==64&&(p[y/4]=String.fromCharCode(i,s)),l==64&&(p[y/4]=String.fromCharCode(i));return v=p.join(""),t?r.decode(v):v};var r={};r.encode=function(e){var t=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|t&63)});return t=t.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|t&63)}),t},r.decode=function(e){var t=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&15)<<12|(e.charCodeAt(1)&63)<<6|e.charCodeAt(2)&63;return String.fromCharCode(t)});return t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(e.charCodeAt(0)&31)<<6|e.charCodeAt(1)&63;return String.fromCharCode(t)}),t}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed"}}(jwplayer),function(e){var t=jwplayer.utils;e.eventdispatcher=function(e,n){var r=e,i=n,s,o;this.resetEventListeners=function(){s={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,r){try{t.exists(s[e])||(s[e]=[]),t.typeOf(n)=="string"&&(n=(new Function("return "+n))()),s[e].push({listener:n,count:r})}catch(i){t.log("error",i)}return!1},this.removeEventListener=function(e,n){if(!s[e])return;try{for(var r=0;r<s[e].length;r++)if(s[e][r].listener.toString()==n.toString()){s[e].splice(r,1);break}}catch(i){t.log("error",i)}return!1},this.addGlobalListener=function(e,n){try{t.typeOf(e)=="string"&&(e=(new Function("return "+e))()),o.push({listener:e,count:n})}catch(r){t.log("error",r)}return!1},this.removeGlobalListener=function(e){if(!e)return;try{for(var n=0;n<o.length;n++)if(o[n].listener.toString()==e.toString()){o.splice(n,1);break}}catch(r){t.log("error",r)}return!1},this.sendEvent=function(e,n){t.exists(n)||(n={}),t.extend(n,{id:r,version:jwplayer.version,type:e}),i&&t.log(e,n);if(t.typeOf(s[e])!="undefined")for(var u=0;u<s[e].length;u++){try{s[e][u].listener(n)}catch(a){t.log("There was an error while handling a listener: "+a.toString(),s[e][u].listener)}s[e][u]&&(s[e][u].count===1?delete s[e][u]:s[e][u].count>0&&(s[e][u].count=s[e][u].count-1))}var l;for(l=0;l<o.length;l++){try{o[l].listener(n)}catch(a){t.log("There was an error while handling a listener: "+a.toString(),o[l].listener)}o[l]&&(o[l].count===1?delete o[l]:o[l].count>0&&(o[l].count=o[l].count-1))}}}}(jwplayer.events),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(r,i){return n[r]=new e.plugins.pluginloader(new e.plugins.model(t),i),n[r]},e.plugins.registerPlugin=function(n,r,i,s){var o=e.utils.getPluginName(n);t[o]||(t[o]=new e.plugins.plugin(n)),t[o].registerPlugin(n,r,i,s)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var r=e.utils.getPluginName(n);return t[r]||(t[r]=new e.plugins.plugin(n)),t[r]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events,r="undefined";e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function p(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function v(e){l=setTimeout(function(){s=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)},1e3)}function m(e){s=t.loaderstatus.ERROR,h.sendEvent(n.ERROR)}var s=t.loaderstatus.NEW,o,u,f,l,h=new n.eventdispatcher;t.extend(this,h),this.load=function(){if(s==t.loaderstatus.NEW){if(i.lastIndexOf(".swf")>0){o=i,s=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);return}if(t.getPluginPathType(i)==t.pluginPathType.CDN){s=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);return}s=t.loaderstatus.LOADING;var e=new t.scriptloader(p());e.addEventListener(n.COMPLETE,v),e.addEventListener(n.ERROR,m),e.load()}},this.registerPlugin=function(e,r,i,p){l&&(clearTimeout(l),l=undefined),f=r,i&&p?(o=p,u=i):typeof i=="string"?o=i:typeof i=="function"?u=i:!i&&!p&&(o=e),s=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)},this.getStatus=function(){return s},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(o)switch(t.getPluginPathType(o)){case t.pluginPathType.ABSOLUTE:return o;case t.pluginPathType.RELATIVE:if(i.lastIndexOf(".swf")>0)return t.getAbsolutePath(o,window.location.href);return t.getAbsolutePath(o,p())}return null},this.getJS=function(){return u},this.getTarget=function(){return f},this.getPluginmode=function(){if(typeof o!=r&&typeof u!=r)return e.pluginmodes.HYBRID;if(typeof o!=r)return e.pluginmodes.FLASH;if(typeof u!=r)return e.pluginmodes.JAVASCRIPT},this.getNewInstance=function(e,t,n){return new u(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events;e.plugins.pluginloader=function(r,i){function d(){f?p.sendEvent(n.ERROR,{message:l}):u||(u=!0,s=t.loaderstatus.COMPLETE,p.sendEvent(n.COMPLETE))}function v(){h||d();if(!u&&!f){var n=0,i=r.getPlugins();for(var s in h){var o=t.getPluginName(s),c=i[o],p=c.getJS(),v=c.getTarget(),m=c.getStatus();m==t.loaderstatus.LOADING||m==t.loaderstatus.NEW?n++:p&&(!v||parseFloat(v)>parseFloat(e.version))&&(f=!0,l="Incompatible player version",d())}n==0&&d()}}var s=t.loaderstatus.NEW,o=!1,u=!1,f=!1,l,h=i,p=new n.eventdispatcher;t.extend(this,p),this.setupPlugins=function(e,n,i){var s={length:0,plugins:{}},o={length:0,plugins:{}},u=r.getPlugins();for(var f in n.plugins){var l=t.getPluginName(f),c=u[l],h=c.getFlashPath(),p=c.getJS(),d=c.getURL();h&&(s.plugins[h]=t.extend({},n.plugins[f]),s.plugins[h].pluginmode=c.getPluginmode(),s.length++);if(p&&n.plugins&&n.plugins[d]){var v=document.createElement("div");v.id=e.id+"_"+l,v.style.position="absolute",v.style.top=0,v.style.zIndex=o.length+10,o.plugins[l]=c.getNewInstance(e,t.extend({},n.plugins[d]),v),o.length++,e.onReady(i(o.plugins[l],v,!0)),e.onResize(i(o.plugins[l],v))}}return e.plugins=o.plugins,s},this.load=function(){if(t.exists(i)&&t.typeOf(i)!="object"){v();return}s=t.loaderstatus.LOADING,o=!0;for(var e in i)if(t.exists(e)){var u=r.addPlugin(e);u.addEventListener(n.COMPLETE,v),u.addEventListener(n.ERROR,m)}var f=r.getPlugins();for(e in f)f[e].load();o=!1,v()};var m=this.pluginFailed=function(e){f||(f=!0,l="File not found",d())};this.getStatus=function(){return s}}}(jwplayer),function(e){e.playlist=function(t){var n=[];if(e.utils.typeOf(t)=="array")for(var r=0;r<t.length;r++)n.push(new e.playlist.item(t[r]));else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){var r=jwplayer.utils.extend({},t.defaults,n);r.sources.length==0&&(r.sources=[new e.source(r)]);for(var i=0;i<r.sources.length;i++)r.sources[i]=new e.source(r.sources[i]);return r};t.defaults={description:"",image:"",mediaid:"",title:"",tags:"",duration:-1,sources:[]}}(jwplayer.playlist),function(e){var t=undefined,n=jwplayer.utils,r={file:t,label:t,bitrate:t,width:t,height:t,type:t};e.source=function(e){var t=n.extend({},r);for(var i in r)n.exists(e[i])&&(t[i]=e[i],delete e[i]);return t.type&&t.type.indexOf("/")>0&&(t.type=n.extensionmap.mimeType(t.type)),t}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,r=document,i=e.embed=function(s){function m(e,t){for(var n in t)typeof e[n]=="function"&&e[n].call(e,t[n])}function g(){if(t.typeOf(o.playlist)=="array"&&o.playlist.length<2)if(o.playlist.length==0||!o.playlist[0].sources||o.playlist[0].sources.length==0){S();return}if(v.getStatus()==t.loaderstatus.COMPLETE){for(var e=0;e<o.modes.length;e++)if(o.modes[e].type&&i[o.modes[e].type]){var r=o.modes[e].config,f=t.extend({},r?i.config.addConfig(o,r):o),l=new i[o.modes[e].type](u,o.modes[e],f,v,s);if(l.supportsConfig())return l.addEventListener(n.ERROR,w),l.embed(),m(s,f.events),s}o.fallback?(t.log("No suitable players found and fallback enabled"),new i.download(u,o,S)):(t.log("No suitable players found and fallback disabled"),y())}}function y(){u.parentNode.replaceChild(f,u)}function w(e){x(u,p+e.message)}function E(e){x(u,"Could not load plugins: "+e.message)}function S(){x(u,p+"No playable sources found")}function x(e,n){if(!o.fallback)return;var r=e.style;r.backgroundColor="#000",r.color="#FFF",r.width=t.styleDimension(o.width),r.height=t.styleDimension(o.height),r.display="table",r.opacity=1;var i=document.createElement("p"),s=i.style;s.verticalAlign="middle",s.textAlign="center",s.display="table-cell",s.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=n.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}var o=new i.config(s.config),u,f,l=o.width,h=o.height,p="Error loading player: ",v=e.plugins.loadPlugins(s.id,o.plugins);return o.id=s.id,f=r.getElementById(s.id),u=r.createElement("div"),u.id=f.id,u.style.width=l.toString().indexOf("%")>0?l:l+"px",u.style.height=h.toString().indexOf("%")>0?h:h+"px",f.parentNode.replaceChild(u,f),e.embed.errorScreen=x,v.addEventListener(n.COMPLETE,g),v.addEventListener(n.ERROR,E),v.load(),s}}(jwplayer),function(e){function o(e){if(!e.playlist){var t={};for(var n in r.defaults)u(e,t,n);if(!t.sources)if(e.levels)t.sources=e.levels,delete e.levels;else{var i={};u(e,i,"file"),u(e,i,"type"),t.sources=i.file?[i]:[]}e.playlist=[t]}else for(var s=0;s<e.playlist.length;s++)e.playlist[s]=new r(e.playlist[s])}function u(e,n,r){t.exists(e[r])&&(n[r]=e[r],delete e[r])}var t=e.utils,n=e.embed,r=e.playlist.item,i=undefined,s=n.config=function(e){function n(e,t,n){for(var r=0;r<e.length;r++){var i=e[r].type;e[r].src||(e[r].src=n[i]?n[i]:t+"jwplayer."+i+(i=="flash"?".swf":".js"))}}var r={fallback:!0,height:270,primary:"html5",width:480,base:i},s={html5:{type:"html5"},flash:{type:"flash"}},u=t.extend(r,e);return u.base||(u.base=t.getScriptPath("jwplayer.js")),u.modes||(u.modes=u.primary=="flash"?[s.flash,s.html5]:[s.html5,s.flash]),u.listbar&&(u.playlistsize=u.listbar.size,u.playlistposition=u.listbar.position),n(u.modes,u.base,{html5:u.html5player,flash:u.flashplayer}),o(u),u};s.addConfig=function(e,n){return o(n),t.extend(e,n)}}(jwplayer),function(e){var t=e.embed,n=e.utils,r=document,i="pointer",s="none",o="block",u="100%",a="relative",f="absolute";t.download=function(t,i,l){function E(){var t,r,i,s,o=h.playlist,u,a,s,f=["mp4","aac","mp3"];if(!o||!o.length)return;u=o[0],a=u.sources;for(s=0;s<a.length;s++){var c=a[s],p=c.type?c.type:n.extensionmap.extType(n.extension(c.file));if(c.file){for(s in f)p==f[s]?(t=c.file,r=u.image):n.isYouTube(c.file)&&(i=c.file);if(t||i)continue}}t?(g=t,y=r,w.prefix&&(n.isHTTPS()&&(w.prefix=w.prefix.replace("http://","https://ssl.")),w.prefix+=e.version.split(/\W/).splice(0,2).join("/")),S(),T()):i?C(i):l()}function S(){t&&(p=N("a","display",t),N("div","icon",p),N("div","logo",p),g&&p.setAttribute("href",n.getAbsolutePath(g)))}function x(e,t){var n=r.querySelectorAll(e);for(var i=0;i<n.length;i++)for(var s in t)n[i].style[s]=t[s]}function T(){var e="#"+t.id+" .jwdownload";t.style.width="",t.style.height="",x(e+"display",{width:n.styleDimension(Math.max(320,v)),height:n.styleDimension(Math.max(180,m)),background:"black center no-repeat "+(y?"url("+y+")":""),backgroundSize:"contain",position:a,border:s,display:o}),x(e+"display div",{position:f,width:u,height:u}),x(e+"logo",{top:w.margin+"px",right:w.margin+"px",background:"top right no-repeat url("+w.prefix+w.file+")"}),x(e+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})}function N(e,t,n){var i=r.createElement(e);return t&&(i.className="jwdownload"+t),n&&n.appendChild(i),i}function C(e){var n=N("embed","",t);n.src="http://www.youtube.com/v/"+/v[=\/](\w*)|\/(\w+)$|^(\w+)$/i.exec(e).slice(1).join(""),n.type="application/x-shockwave-flash",n.width=v,n.height=m}var h=n.extend({},i),p,v=h.width?h.width:480,m=h.height?h.height:320,g,y,w=i.logo?i.logo:{prefix:"http://p.jwpcdn.com/",file:"logo.png",margin:10};E()}}(jwplayer),function(e){var t=e.utils,n=e.events,r={},i=e.embed.flash=function(i,s,o,u,f){function p(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function v(e,t,n){return function(r){try{n&&document.getElementById(f.id+"_wrapper").appendChild(t);var i=document.getElementById(f.id).getPluginConfig("display");typeof e.resize=="function"&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(s){}}}function m(e){if(!e)return{};var t={};for(var n in e){var r=e[n];for(var i in r)t[n+"."+i]=r[i]}return t}function g(e){if(!e)return{};var n={},r=[];for(var i in e){var s=t.getPluginName(i),o=e[i];r.push(i);for(var u in o)n[s+"."+u]=o[u]}return n.plugins=r.join(","),n}function y(e){var n={};for(var r in e)typeof e[r]=="object"?n[r]="[[JSON]]"+t.jsonToString(e[r]):n[r]=e[r];return n}function w(e,n){if(t.isYouTube(e))return!0;if(t.isRtmp(e,n))return!0;if(n=="hls")return!0;var r=t.extensionmap[n?n:t.extension(e)];return r?!!r.flash:!1}var l=new e.events.eventdispatcher,h=t.flashVersion();t.extend(this,l),this.embed=function(){o.id=f.id;if(h<10)return l.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,c=t.extend({},o);i.id+"_wrapper"==i.parentNode.id?e=document.getElementById(i.id+"_wrapper"):(e=document.createElement("div"),e.id=i.id+"_wrapper",e.style.position="relative",e.style.width=t.styleDimension(c.width),e.style.height=t.styleDimension(c.height),i.parentNode.replaceChild(e,i),e.appendChild(i));var m=u.setupPlugins(f,c,v);m.length>0?t.extend(c,g(m.plugins)):delete c.plugins,typeof c["dock.position"]!="undefined"&&c["dock.position"].toString().toLowerCase()=="false"&&(c.dock=c["dock.position"],delete c["dock.position"]);var w=t.getCookies();for(var E in w)typeof c[E]=="undefined"&&(c[E]=w[E]);var S="#000000",x,T=c.wmode?c.wmode:c.height&&c.height<=40?"transparent":"opaque",N=["height","width","modes","events","primary","base","fallback"];for(var C=0;C<N.length;C++)delete c[N[C]];var L=window.location.pathname.split("/");L.splice(L.length-1,1),L=L.join("/"),c.base=L+"/",r[i.id]=y(c);if(t.isIE()){var A='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%" id="'+i.id+'" name="'+i.id+'" tabindex=0"">';A+='<param name="movie" value="'+s.src+'">',A+='<param name="allowfullscreen" value="true">',A+='<param name="allowscriptaccess" value="always">',A+='<param name="seamlesstabbing" value="true">',A+='<param name="wmode" value="'+T+'">',A+='<param name="bgcolor" value="'+S+'">',A+="</object>",i.outerHTML=A,x=document.getElementById(i.id)}else{var O=document.createElement("object");O.setAttribute("type","application/x-shockwave-flash"),O.setAttribute("data",s.src),O.setAttribute("width","100%"),O.setAttribute("height","100%"),O.setAttribute("bgcolor",S),O.setAttribute("id",i.id),O.setAttribute("name",i.id),O.setAttribute("tabindex",0),p(O,"allowfullscreen","true"),p(O,"allowscriptaccess","always"),p(O,"seamlesstabbing","true"),p(O,"wmode",T),i.parentNode.replaceChild(O,i),x=O}f.container=x,f.setPlayer(x,"flash")},this.supportsConfig=function(){if(h){if(!o)return!0;try{var e=o.playlist[0],t=e.sources;if(typeof t=="undefined")return!0;for(var n=0;n<t.length;n++)if(t[n].file&&w(t[n].file,t[n].type))return!0}catch(r){return!1}}return!1}};i.getVars=function(e){return r[e]}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,r=e.events;e.embed.html5=function(i,s,o,u,f){function p(e,t,n){return function(r){try{var s=document.querySelector("#"+i.id+" .jwmain");n&&s.appendChild(t),typeof e.resize=="function"&&(e.resize(s.clientWidth,s.clientHeight),setTimeout(function(){e.resize(s.clientWidth,s.clientHeight)},400)),t.left=s.style.left,t.top=s.style.top}catch(o){}}}function v(e){l.sendEvent(e.type,{message:"HTML5 player not found"})}function m(e,r){if(navigator.userAgent.match(/BlackBerry/i)!==null)return!1;if(t.isRtmp(e,r))return!1;var i=n[r?r:t.extension(e)];return i?i.flash&&!i.html5?!1:g(i.html5):!1}function g(t){var n=e.vid;if(!t)return!0;try{return n.canPlayType(t)?!0:!1}catch(r){return!1}}var l=this,h=new r.eventdispatcher;t.extend(l,h),l.embed=function(){if(e.html5){u.setupPlugins(f,o,p),i.innerHTML="";var n=e.utils.extend({},o),h=new e.html5.player(n);f.container=document.getElementById(f.id),f.setPlayer(h,"html5")}else{var m=new t.scriptloader(s.src);m.addEventListener(r.ERROR,v),m.addEventListener(r.COMPLETE,l.embed),m.load()}},l.supportsConfig=function(){if(!!e.vid.canPlayType)try{if(t.typeOf(o.playlist)=="string")return!0;var n=o.playlist[0].sources;for(var r=0;r<n.length;r++){var i=n[r].file,s=n[r].type;if(m(i,s))return!0}}catch(u){return!1}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,r=n.extend(function(r){var i=r.config,s=i.plugins,o=i.analytics,u=(n.isHTTPS()?"https://ssl.":"http://")+"p.jwpcdn.com/"+e.version.replace(/(\d+)\.(\d+).*/,"$1/$2")+"/jwpsrv.js";return delete i.key,e.key&&(i.key=e.key),delete i.analytics,s=s?s:{},s[u]=o?o:{},i.plugins=s,new t(r)},t);e.embed=r}(jwplayer),function(e){var t=e.embed,n=e.utils.extend(function(e){var n=e.config,r=n.plugins?n.plugins:{};return delete r.sharing,delete r.related,n.sharing&&(r.sharing=n.sharing),n.related&&(r.related=n.related),n.ga&&(r.ga=n.ga),n.plugins=r,new t(e)},t);e.embed=n}(jwplayer),function(e){var t=[],n=e.utils,r=e.events,i=r.state,s=document,o=e.api=function(t){function N(e,t){return function(n){return t(e,n)}}function C(e){y=[],o.destroyPlayer(e.id)}function k(e,t){return c[e]||(c[e]=[],_(r.JWPLAYER_PLAYER_STATE,L(e))),c[e].push(t),u}function L(e){return function(t){var n=t.newstate,r=t.oldstate;if(n==e){var i=c[n];if(i)for(var s=0;s<i.length;s++)typeof i[s]=="function"&&i[s].call(this,{oldstate:r,newstate:n})}}}function A(e,t,n){return h[e]||(h[e]={}),h[e][t]||(h[e][t]=[],_(t,O(e,t))),h[e][t].push(n),u}function O(e,t){return function(n){if(e==n.component){var r=h[e][t];if(r)for(var i=0;i<r.length;i++)typeof r[i]=="function"&&r[i].call(this,n)}}}function M(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+u.id+'").dispatchEvent("'+t+'", dat); }')}catch(r){n.log("Could not add internal listener")}}function _(e,t){return l[e]||(l[e]=[],v&&m&&M(v,e)),l[e].push(t),u}function D(){if(m){var e=arguments[0],t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);if(typeof v!="undefined"&&typeof v[e]=="function")switch(t.length){case 4:return v[e](t[0],t[1],t[2],t[3]);case 3:return v[e](t[0],t[1],t[2]);case 2:return v[e](t[0],t[1]);case 1:return v[e](t[0]);default:return v[e]()}return null}y.push(arguments)}function P(e,t,n){var r=[];t||(t=0),n||(n=e.length-1);for(var i=t;i<=n;i++)r.push(e[i]);return r}var u=this,l={},c={},h={},p=[],v=undefined,m=!1,y=[],w=undefined,E={},S={};u.container=t,u.id=t.id,u.getBuffer=function(){return D("jwGetBuffer")},u.getContainer=function(){return u.container},u.addButton=function(e,t,r,i){try{S[i]=r;var s="jwplayer('"+u.id+"').callback('"+i+"')";D("jwDockAddButton",e,t,s,i)}catch(o){n.log("Could not add dock button"+o.message)}},u.removeButton=function(e){D("jwDockRemoveButton",e)},u.callback=function(e){S[e]&&S[e]()},u.getDuration=function(){return D("jwGetDuration")},u.getFullscreen=function(){return D("jwGetFullscreen")},u.getStretching=function(){return D("jwGetStretching")},u.getHeight=function(){return D("jwGetHeight")},u.getLockState=function(){return D("jwGetLockState")},u.getMeta=function(){return u.getItemMeta()},u.getMute=function(){return D("jwGetMute")},u.getPlaylist=function(){var e=D("jwGetPlaylist");u.renderingMode=="flash"&&n.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__"],["."," ","-"]);for(var t=0;t<e.length;t++)n.exists(e[t].index)||(e[t].index=t);return e},u.getPlaylistItem=function(e){return n.exists(e)||(e=u.getCurrentItem()),u.getPlaylist()[e]},u.getPosition=function(){return D("jwGetPosition")},u.getRenderingMode=function(){return u.renderingMode},u.getState=function(){return D("jwGetState")},u.getVolume=function(){return D("jwGetVolume")},u.getWidth=function(){return D("jwGetWidth")},u.setFullscreen=function(e){return n.exists(e)?D("jwSetFullscreen",e):D("jwSetFullscreen",!D("jwGetFullscreen")),u},u.setStretching=function(e){return D("jwSetStretching",e),u},u.setMute=function(e){return n.exists(e)?D("jwSetMute",e):D("jwSetMute",!D("jwGetMute")),u},u.lock=function(){return u},u.unlock=function(){return u},u.load=function(e){return D("jwLoad",e),u},u.playlistItem=function(e){return D("jwPlaylistItem",parseInt(e)),u},u.playlistPrev=function(){return D("jwPlaylistPrev"),u},u.playlistNext=function(){return D("jwPlaylistNext"),u},u.resize=function(e,t){if(u.renderingMode=="html5")v.jwResize(e,t);else{var r=s.getElementById(u.id+"_wrapper");r&&(r.style.width=n.styleDimension(e),r.style.height=n.styleDimension(t))}return u},u.play=function(e){return typeof e=="undefined"?(e=u.getState(),e==i.PLAYING||e==i.BUFFERING?D("jwPause"):D("jwPlay")):D("jwPlay",e),u},u.pause=function(e){return typeof e=="undefined"?(e=u.getState(),e==i.PLAYING||e==i.BUFFERING?D("jwPause"):D("jwPlay")):D("jwPause",e),u},u.stop=function(){return D("jwStop"),u},u.seek=function(e){return D("jwSeek",e),u},u.setVolume=function(e){return D("jwSetVolume",e),u},u.loadInstream=function(e,t){return w=new o.instream(this,v,e,t),w},u.getQualityLevels=function(){return D("jwGetQualityLevels")},u.getCurrentQuality=function(){return D("jwGetCurrentQuality")},u.setCurrentQuality=function(e){D("jwSetCurrentQuality",e)},u.getCaptionsList=function(){return D("jwGetCaptionsList")},u.getCurrentCaptions=function(){return D("jwGetCurrentCaptions")},u.setCurrentCaptions=function(e){D("jwSetCurrentCaptions",e)},u.getControls=function(){return D("jwGetControls")},u.getSafeRegion=function(){return D("jwGetSafeRegion")},u.setControls=function(e){D("jwSetControls",e)};var x={onBufferChange:r.JWPLAYER_MEDIA_BUFFER,onBufferFull:r.JWPLAYER_MEDIA_BUFFER_FULL,onError:r.JWPLAYER_ERROR,onFullscreen:r.JWPLAYER_FULLSCREEN,onMeta:r.JWPLAYER_MEDIA_META,onMute:r.JWPLAYER_MEDIA_MUTE,onPlaylist:r.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:r.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:r.JWPLAYER_PLAYLIST_COMPLETE,onReady:r.API_READY,onResize:r.JWPLAYER_RESIZE,onComplete:r.JWPLAYER_MEDIA_COMPLETE,onSeek:r.JWPLAYER_MEDIA_SEEK,onTime:r.JWPLAYER_MEDIA_TIME,onVolume:r.JWPLAYER_MEDIA_VOLUME,onBeforePlay:r.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:r.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:r.JWPLAYER_DISPLAY_CLICK,onControls:r.JWPLAYER_CONTROLS,onQualityLevels:r.JWPLAYER_MEDIA_LEVELS,onQualityChange:r.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:r.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:r.JWPLAYER_CAPTIONS_CHANGED};n.foreach(x,function(e){u[e]=N(x[e],_)});var T={onBuffer:i.BUFFERING,onPause:i.PAUSED,onPlay:i.PLAYING,onIdle:i.IDLE};return n.foreach(T,function(e){u[e]=N(T[e],k)}),u.remove=function(){if(!m)throw"Cannot call remove() before player is ready";C(this)},u.setup=function(t){if(e.embed){C(u);var n=e(u.id);return n.config=t,new e.embed(n)}return u},u.registerPlugin=function(t,n,r,i){e.plugins.registerPlugin(t,n,r,i)},u.setPlayer=function(e,t){v=e,u.renderingMode=t},u.detachMedia=function(){if(u.renderingMode=="html5")return D("jwDetachMedia")},u.attachMedia=function(){if(u.renderingMode=="html5")return D("jwAttachMedia")},u.dispatchEvent=function(e){if(l[e]){var t=n.translateEventResponse(e,arguments[1]);for(var r=0;r<l[e].length;r++)typeof l[e][r]=="function"&&l[e][r].call(this,t)}},u.dispatchInstreamEvent=function(e){w&&w.dispatchEvent(e,arguments)},u.playerReady=function(e){m=!0,v||u.setPlayer(s.getElementById(e.id)),u.container=s.getElementById(u.id),n.foreach(l,function(e){M(v,e)}),_(r.JWPLAYER_PLAYLIST_ITEM,function(e){E={}}),_(r.JWPLAYER_MEDIA_META,function(e){n.extend(E,e.metadata)}),u.dispatchEvent(r.API_READY);while(y.length>0)D.apply(this,y.shift())},u.getItemMeta=function(){return E},u.getCurrentItem=function(){return D("jwGetPlaylistIndex")},u};o.selectPlayer=function(e){var r;n.exists(e)||(e=0),e.nodeType?r=e:typeof e=="string"&&(r=s.getElementById(e));if(r){var i=o.playerById(r.id);return i?i:o.addPlayer(new o(r))}return typeof e=="number"?t[e]:null},o.playerById=function(e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},o.addPlayer=function(e){for(var n=0;n<t.length;n++)if(t[n]==e)return e;return t.push(e),e},o.destroyPlayer=function(e){var r=-1,i;for(var o=0;o<t.length;o++)if(t[o].id==e){r=o,i=t[o];continue}if(r>=0){var u=i.id,f=s.getElementById(u+(i.renderingMode=="flash"?"_wrapper":""));n.clearCss&&n.clearCss("#"+u);if(f){var l=s.createElement("div");l.id=u,f.parentNode.replaceChild(l,f)}t.splice(r,1)}return null},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(jwplayer),function(e){var t=e.events,n=t.state;e.api.instream=function(e,r,i,s){function d(){o.callInternal("jwLoadInstream",i,s)}function v(e,t){u.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+o.id+'").dispatchInstreamEvent("'+t+'", dat); }')}function m(e,t){return h[e]||(h[e]=[],v(u,e)),h[e].push(t),this}function g(e,n){return p[e]||(p[e]=[],m(t.JWPLAYER_PLAYER_STATE,y(e))),p[e].push(n),this}function y(e){return function(t){var n=t.newstate,r=t.oldstate;if(n==e){var i=p[n];if(i)for(var s=0;s<i.length;s++)typeof i[s]=="function"&&i[s].call(this,{oldstate:r,newstate:n,type:t.type})}}}var o=e,u=r,f=i,l=s,h={},p={};this.dispatchEvent=function(e,t){if(h[e]){var n=_utils.translateEventResponse(e,t[1]);for(var r=0;r<h[e].length;r++)typeof h[e][r]=="function"&&h[e][r].call(this,n)}},this.onError=function(e){return m(t.JWPLAYER_ERROR,e)},this.onFullscreen=function(e){return m(t.JWPLAYER_FULLSCREEN,e)},this.onMeta=function(e){return m(t.JWPLAYER_MEDIA_META,e)},this.onMute=function(e){return m(t.JWPLAYER_MEDIA_MUTE,e)},this.onComplete=function(e){return m(t.JWPLAYER_MEDIA_COMPLETE,e)},this.onSeek=function(e){return m(t.JWPLAYER_MEDIA_SEEK,e)},this.onTime=function(e){return m(t.JWPLAYER_MEDIA_TIME,e)},this.onVolume=function(e){return m(t.JWPLAYER_MEDIA_VOLUME,e)},this.onBuffer=function(e){return g(n.BUFFERING,e)},this.onPause=function(e){return g(n.PAUSED,e)},this.onPlay=function(e){return g(n.PLAYING,e)},this.onIdle=function(e){return g(n.IDLE,e)},this.onInstreamClick=function(e){return m(t.JWPLAYER_INSTREAM_CLICK,e)},this.onInstreamDestroyed=function(e){return m(t.JWPLAYER_INSTREAM_DESTROYED,e)},this.play=function(e){u.jwInstreamPlay(e)},this.pause=function(e){u.jwInstreamPause(e)},this.seek=function(e){u.jwInstreamSeek(e)},this.destroy=function(){u.jwInstreamDestroy()},this.getState=function(){return u.jwInstreamGetState()},this.getDuration=function(){return u.jwInstreamGetDuration()},this.getPosition=function(){return u.jwInstreamGetPosition()},d()}}(jwplayer)),function(e){var t=e;e=function(e){var n=t(e);return n?n:{registerPlugin:function(e,n,r,i){t.plugins.registerPlugin(e,n,r)}}},t.utils.extend(e,t),function(e){var t="ga",n=function(n,r,i){function u(){return typeof o.trackingobject=="string"?window[o.trackingobject]:o.trackingobject}function a(e,t){if(e==undefined)return"";if(t!=undefined&&e[t]!=undefined&&e[t].length>0)return t=="file"?h(e[t]):e[t];if(e.file==undefined){if(e.sources)return f(e.sources);if(e.levels)return f(e.levels)}return e.file!=undefined?e.file:""}function f(e){var t=[],n;for(n=e.length-1;n>=0;n--)e[n].file&&t.push(e[n].file);return t.sort(),h(t[0])}function l(e){var t=e.indexOf("://"),n=e.indexOf("?");return t>0&&(n<0||n>t)}function h(e,t){if(l(e))return e;t||(t=document.location.href);var n=t.substring(0,t.indexOf("://")+3),r=t.substring(n.length,t.indexOf("/",n.length+1)),i;if(e.indexOf("/")===0)i=e.split("/");else{var s=t.split("?")[0];s=s.substring(n.length+r.length+1,s.lastIndexOf("/")),i=s.split("/").concat(e.split("/"))}var o=[];for(var u=0;u<i.length;u++)!!i[u]&&i[u]!="."&&(i[u]==".."?o.pop():o.push(i[u]));return n+r+"/"+o.join("/")}function p(){var e=!1,t="",r=!1,i;n.onPlaylistItem(function(s){e=!0,o.pageURL=window.top==window?window.location.href:document.referrer,o.currentItem={},i=n.getPlaylistItem(s.index),o.currentItem.mediaID=t,t=a(i,o.idstring),o.currentItem.hidden=r,i["ova.hidden"]?r=!0:r=!1}),n.onIdle(function(t){e=!0}),n.onPlay(function(n){e&&(e=!1,o.currentItem.mediaID=t,o.currentItem.hidden=r,d("JW Player Video Plays"))}),n.onComplete(function(e){d("JW Player Video Completes")})}function d(e){var t="Not tracked";o.currentItem.hidden?o.currentItem.hidden&&(t+=" - current item is hidden"):typeof u()._trackEvent!="undefined"?(t="Tracked Synchronously",m(e,o.currentItem.mediaID,o.pageURL)):typeof u().push!="undefined"&&(t="Tracked Asynchronously",v(e,o.currentItem.mediaID,o.pageURL)),g(t,{Category:e,Action:o.currentItem.mediaID,Label:o.pageURL})}function v(e,t,n){u().push(["_trackEvent",e,t,n])}function m(e,t,n){u()._trackEvent(e,t,n)}function g(n,r){o.debug&&e.utils.log(t+": "+n,r)}var s={trackingobject:"_gaq",idstring:"file"},o=e.utils.extend({},s,r);g("Initializing");if(typeof o.trackingobject=="string"&&typeof window[o.trackingobject]=="undefined"){g("Could not setup because trackingobject is not defined.");return}p()};e().registerPlugin(t,"6.0",n)}(e),function(e){var t=function(t,n,r){function y(e){n.onclick=="play"?(t.load(e),t.play()):window.top.location=e.link}function b(e){n.oncomplete!==!1&&setTimeout(w,50)}function w(e){t.getState()=="IDLE"&&g()}function E(e){e==u?console.log("RELATED: Failed to load "+e):console.log("RELATED: "+e),f.innerHTML="",a.innerHTML="No related videos found",o[4]=200,o[5]=0,O(o[2],o[3])}function S(e){setTimeout(x,200),r.style.opacity=0,t.setControls(!0)}function x(){r.style.visibility="hidden"}function T(e){l=!1,u=undefined,h=[],f.innerHTML="",S();var r=t.getPlaylist()[e.index];n.file&&(n.file.indexOf("MEDIAID")>0&&r.mediaid?u=n.file.replace("MEDIAID",r.mediaid):n.file.indexOf("MEDIAID")==-1&&(u=n.file)),t.addButton(m,"Related Videos",g,"related")}function N(){l=!0,u?e.utils.ajax(u,C,E):E("No related videos file found")}function C(e){var t=[];try{t=window.jwplayer.html5.parsers.rssparser.parse(e.responseXML.firstChild)}catch(r){console.log(r),E("This feed is not valid XML and/or RSS.");return}for(var i=0;i<t.length;i++)t[i].image&&t[i].title&&(n.onclick=="play"&&t[i].sources[0].file||n.onclick!="play"&&t[i].link)&&h.push(t[i]);k()}function k(){f.innerHTML="";if(h!==undefined&&h.length){var t=0,n=0;o[4]=0,o[5]=0;for(var r=0;r<h.length;r++){var i=e.related.thumb(o[0],o[1],h[r],y);f.appendChild(i),M(i,{left:(o[0]+10)*t+"px",top:(o[1]+10)*n+"px"}),o[4]=Math.max(o[4],o[0]*(t+1)+10*t),o[5]=Math.max(o[5],o[1]*(n+1)+10*n);if((o[0]+10)*(t+2)>o[2]){if((o[1]+10)*(n+2)>o[3]-80)break;n++,t=0}else t++}A("Related Videos"),O(o[2],o[3])}else E("RSS feed has 0 entries that contain title,link and image.")}function L(){if(t.getRenderingMode()=="flash")return;t.onPlaylistItem(T),t.onComplete(b),M(r,d),r.onclick=S,s=document.createElement("div"),M(s,p),M(s,{background:"transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAItJREFUeNp8kUEOABEMRXUysXQnJ5k5GidxAmcxsbQxmiAlLUlD/df6UDnn1KK2eJQwUOtMAlwQ7TXG+B1ukxv5hRDRHT1ph5EFSRgN9tPh0E2drO6Xo7E8xk2TGKPSWi9NSilLPi2FEI6WrLV+FjAwe2ksAg4e3TgNCyoHS1bx4z4JxtH3hsXvF2AAnU9uUtSy19QAAAAASUVORK5CYII=)"}),s.onclick=S,r.appendChild(s),a=document.createElement("div"),A("Related Videos"),M(a,v),r.appendChild(a),f=document.createElement("div"),r.appendChild(f),M(f,{position:"absolute"})}function A(e){n.heading?a.innerHTML=n.heading:a.innerHTML=e}function O(e,t){M(r,{height:t+"px",width:e+"px"}),M(s,{left:e-32+"px"}),M(f,{left:Math.round(e/2-o[4]/2)+"px",top:Math.round(t/2-o[5]/2)+"px"}),M(a,{left:Math.round(e/2-o[4]/2)+"px",width:o[4]+"px",top:Math.round(t/2-o[5]/2-30)+"px"})}function M(e,t){for(var n in t)e.style[n]=t[n]}var i,s,o,u,a,f,l,h,p={cursor:"pointer",position:"absolute",left:"120px",top:"20px",margin:"0px",padding:"0px",display:"block",width:"12px",height:"12px"},d={backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEdJREFUeNpilpSUvMHEwMDwn+k/EEBY+LkwFgMuCWINwDCPVB30cBoDaTpgBMMoQU2CkYkRCCAsNC6pEgyUGoBHYvA6DSDAAOnHjLU15EHNAAAAAElFTkSuQmCC)",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",opacity:0,webkitTransition:"opacity 150ms linear",MozTransition:"opacity 150ms linear",msTransition:"opacity 150ms linear",transition:"opacity 150ms linear",cursor:"pointer",visibility:"hidden"},v={position:"absolute",border:"none",color:"#FFF",display:"block",font:"15px Arial",overflow:"hidden",width:"240px",margin:"0 0 0 0",textAlign:"center",textTransform:"none",padding:"0 0 0 0"},m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALVJREFUeNqsVMERhCAMzNmAJVgaJWAHlGIJluB1YAnYASXEwOVmctzCR3YmOia7a4IgkQEzO4nI/zg0amSuoxqSnCVOiSTh87Op7cZgrzReNafVkL79N/nJB9BVaDRz2DETMFu4jQWYpjK+rkMAy7B1DDfAz9NEUsIMCLFjGBvfgV/lIgAEpg5amuGG07ddoLk6fhcaOd8nLa5A9O4YotpavIZvm+Eb++HRc/DoPfw5eOtxCzAABeIMZWrWSG0AAAAASUVORK5CYII=",g=function(){t.pause(!0),r.style.visibility="visible",r.style.opacity=1,t.setControls(!1),l==0&&N()};t.onReady(L),t.onPlay(S),this.resize=function(e,n){if(t.getRenderingMode()=="flash")return;o=[140,90,e,n,200,0],M(s,{left:e-32+"px"}),k()}};e().registerPlugin("related","6.0",t)}(e),function(e){if(e.related)return;e.related={},e.related.thumb=function(e,t,n,r){function l(e){d(i,{webkitBoxShadow:"0 0 4px #FFF",MozBoxShadow:"0 0 4px #FFF",msBoxShadow:"0 0 4px #FFF",boxShadow:"0 0 4px #FFF"}),d(a,{color:"#FFF"})}function c(e){d(i,{webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000"}),d(a,{color:"#CCC"})}function h(e){r(n)}function p(){i=document.createElement("div"),i.onclick=h,i.onmouseout=c,i.onmouseover=l,d(i,s),d(i,{backgroundImage:"url("+n.image+")",width:e-2+"px",height:t-2+"px"}),o=document.createElement("img"),o.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABGCAYAAABL0p+yAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACF9JREFUeNrsXYtO20gUtccWILoIFgS0IKDQAoUusEBBS///c6IQqwIJoqAdT/z2PO487NjJvZIJNxBnYE7u48yxx/9+9PWCEOL5vs+O+HuhH3+fPOcnzyl9Ep8nPwfhPU/i1xV+XvOn75s9L/Tzx3zs0/eR+tnY8/FwfXZ+kT89Vzqe9G+c/r2A8ZD0/arjkYxPOp7qXObnIjwf9Cg6d35o2Ds9BmHxRKXJVvnFx3QCMj8HoxwMKbBVk0+4wK5NttQHgrEABp8UPjAp0AsTkE1izSecD15hElW+8P0lj+n7p/9P3vikwK7Mla/y87nSBN4fegzpOV5jJwyCoBKZ9MAommzloyjqEc5kC31RlFX5kKjrK8AgGZ8QjNXIIwcjOMpVo3Ap6laBzQ8SNaAD5jA2IPgmCfAG9HXj4g/CIrCqqbYc5UQD9hVgsABjEfhKMGpEIgswlic5PxfJokHFTya/6kujnBYYFFEZEnU1wagR9eI0+0yPEX3tB+8X4ClYI+U2DsZq/ecIjOk/O32/ul+s88RgFEZhk5TrHIwAcBIxGIFR74UeEX1tpPpFsxTMmfz8ky9qYAp1HdfnROEC+KQ+AUSiki+rpzh1FNfXTLktglEUdUt+YW7LPil/8IhWkzFK6rs3aEEoTcFyMHD+AE0wQrpZcdQV+LXuWu7Lu1lRlJOkYOnkE/4HURp1+d2s0NfoZqH1oAJ4cX03TCLe2NO0kNAIqAQfB4zcbtaku4V0r6UOzITa4Ly/KCprp1wVGCDg1AMjr6Fx0c1qUivvSVMReRYWBoRoDhhIrTQCRnueTZpypSlY3M3CqQ07Dq/a3WY+mEN0Qq2UaBRbYxFQRCA7o1a0GwhFai0V+SKS1STlWgK9RTDqNRBAqoU+7/ncJkNIo9gDENLdzrqbhRLKgkhgRigbdLNgDtFVNytb3ZCDERj1lDSKNQADKRjUYAR1t8putgFCGdxNmoARSiibjEcMRtNu1oBQBtMoTlKwiGqpURc6dV4J0C5TriWhbA1GCfWiAUZ5nQdvaGxSLifqadMobiKgDqGsmmSnS21mYJR2sxqEMoxaEVAtEGpFVedJga6XciWEshWN4qQG9B1EOSNC2WppSxV1Ad2sorsV11mVyfZFvizqVsdnSygTALBLUc8JjeIuBTtMudarG5pg7LM8SkUoy31IPZjPTQI8pzSK4y7YjVYPRijry6Oa1eoZ8my6qxuWWj1DQnlCj0ZoFDcAtNLqFf2OaPVMRAkgrR4w5XZHq/dOj0ZpFPsmhCdGcCKPklAXHdTqma8mmKRgt/IoTnf7Qo+Izm3kddzqcqwOyaOqEzSf8ijoeABg9PwR/TIMw/DN64nJ5VgtglHd0MC0ei6A3h2tHohqieu7YRzxKPDGXs8sLAKp+1o929UNS60emNBuXquX1HeDpaWlyOux5SkYrBJpSKunSyg71+qZy6NU4zG58kyyhvsnjnjLy8uv3hzYNAXPUB4F5xRno9XTJ5Rt5FrCBofRKPS5AQXe2Jsjq6dg68sidVc39LR6XZVHyTlE1bXUAjDSNEu/PFN/tLKy8uHNoRVSsIFWz3hpC6rVK/ouo24HtXp+6XUv9Hej1dXVyJtzy1JwtZt1Tij3UaunkEeZavVEKZc+jugzw09/fXrzFsRCEhCFPKrhi7+dyKNIZ7R6BvIoRqPQ5yIKvLG3YBYWU9zMtXpObosh4Bgbl0fppdy4voubirW1tchbYAsDElho9YBpsUmtnsllkaArz3QJZZhWz0tolPX19VcPbZqCXcujzC/+7opWzzmhPKF+DLwBBd4YYVeNgBqrG+CLv53Lo4DdrEN5lK1Wj61WEP85bi42NjY+EG4cAJY+qb3T6jm+E4GCWtGQRzE1yt+bmxFCTEnDkI5q9aAp10yrJ5JHcX0ooe2TUVzfbW5tviG0wF1wYKEaMetmtQnlLmn1KgCP6zv6OqZG2drawvrOJAI2qdXrvzxKGHWZGmV7exvTrPVaMHCtVny9rwt5lOXqRktavaSbHe7s7CCN4i4Fq7V67d6JQMIxNnhbDKEihqVZxt8NdnZ3Mc26T8GOL/5uVKtnurqh0OrxtXvsop6YRtn9/BlplHZSsGOtnpDQVmv13F/8Db4SjdEoX/a+YH032xQsoC56Jo/S0OoxGmVvbw9plFZTsPVGLS2B0dlGLaUaMruoZ39/H+u7WURAkYq43Y1a2tHqFYAdq40HBwcHmGZnXQM2K48y36hFBUbDjVoYjXJweIg0SjdScOBUq9dNeVScZj1GoxweHWGa7WQEnKFWr8HVjYxGOfp6hDRKJwEYEMuNWhTCgdls1MJolOPjY6zv+hIB3Wj12pNH8XwvoVFOTk6QRulNDZjwgO52DWpIqyfeNSijUU6+fcP6rn8pOKhr9WxSLkCrZyqPqvhMjfL99BTTbP9TcF+0en52b5TTszOkUeZmJaT78qhJArzB2fkZptn5ioBBl3cNSm4x64/Of5wjjTK/EbD9jVoUYGQ0yo+LC6zvFqEG7MpGLaka5eLyEmmUxUvBwO7WvVYvo1Euf/7E+m5Rm5AZyKNofecN/rm6wjS76BGwTa1eem+Uq+srpFHQch7QhTxKckPxCT0Do1Gubq4xzaIpeEAAGIEpN1OjXN/cII2CJucBHSpSGI3y7+0t1ndolilYA4wpjXJ7d4c0CppuCjau/ybx9lBxxLu7v8f6Ds00BWvLo5ga5f7hF6ZZNNsICN81iIkCPH/46/EBaRQ0ewD6NUU0t5vN1CgPj4+YZtEcRsA0BUs2PI536qHAQxoFrYEaMCC8bpbRKP89PWF9h9Z8BCxcB8w2PH76/RtpFLS2uuDk3ijEjyjwsL5Da9X+F2AAdhpbcs9KP5oAAAAASUVORK5CYII="),d(o,u),d(o,{width:e-2+"px",height:t-20+"px"}),i.appendChild(o),a=document.createElement("div"),a.innerHTML=n.title,d(a,f);var r=Math.ceil(n.title.length*6/e);return d(a,{width:e-10+"px",top:t-8-r*16+"px"}),i.appendChild(a),i}function d(e,t){for(var n in t)e.style[n]=t[n]}var i,s={webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000",backgroundColor:"#000",backgroundSize:"cover",position:"absolute",textDecoration:"none",display:"block",margin:"0 0 0 0",padding:"0 0 0 0",overflow:"hidden"},o,u={psition:"absolute",left:"0px",top:"0px",border:"none",margin:"0 0 0 0",padding:"0 0 0 0"},a,f={backgroundColor:"rgba(0,0,0,0.8)",left:"0px",position:"absolute",border:"none",color:"#CCC",display:"block",font:"11px Arial",margin:"0 0 0 0",textAlign:"center",textDecoration:"none",textTransform:"none",padding:"5px"};return p()}}(e),function(e){var t=function(t,n,r){function g(e){var t=a+encodeURIComponent(h);return window.open(t,"_blank"),window.focus(),!1}function y(e){e.target==r&&(setTimeout(b,200),r.style.opacity=0,t.setControls(!0))}function b(){r.style.visibility="hidden"}function w(e){setTimeout(b,200),r.style.opacity=0,t.setControls(!0);var o=t.getPlaylist()[e.index];i=undefined,n.code&&(n.code.indexOf("MEDIAID")>0&&o.mediaid?i=n.code.replace("MEDIAID",o.mediaid):n.code.indexOf("MEDIAID")==-1&&(i=n.code)),i&&i.substr(0,3)=="%3C"&&(i=decodeURIComponent(i)),h=window.location.toString(),window.top!=window&&(h=document.referrer),n.link&&(n.link.indexOf("MEDIAID")>0&&o.mediaid?h=n.link.replace("MEDIAID",o.mediaid):n.link.indexOf("MEDIAID")==-1&&(h=n.link)),f&&(s.setText(i),p.setText(h),i?(N(s.getDiv(),{left:"0px",top:"30px",display:"block"}),N(p.getDiv(),{left:"0px",top:"72px"}),N(u,{left:"80px",top:"114px"}),N(d,{left:"120px",top:"114px"}),N(m,{left:"160px",top:"114px"})):(N(s.getDiv(),{display:"none"}),N(p.getDiv(),{left:"0px",top:"30px"}),N(u,{left:"80px",top:"72px"}),N(d,{left:"120px",top:"72px"}),N(m,{left:"160px",top:"72px"})),E())}function E(){N(r,{width:o[0]+"px",height:o[1]+"px",backgroundPosition:o[0]-32+"px 18px,center center"}),s.resize(o[0]),p.resize(o[0]);var e=Math.round(o[0]/2-s.getWidth()/2),t=Math.round(o[1]/2-50);i&&(t-=20),N(f,{left:e+"px",top:t+"px"})}function S(){if(t.getRenderingMode()=="flash")return;t.onPlaylistItem(w),t.addButton("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMxJREFUeNpiYCAR/P//nx+I1/9HgP0gMQYyDKr/jwn2k2PQfSwG/WchwQB/IBUAxAp4FQHxfCDuB2J9JHF9qNj7//jBe5DieCwSIM3nsYiDAjkfi8HxjGDTGBgE8PjqAhAvAGFGRsaPUJfKA6kEqPwGoPhFBjzORfEmIcCERw4UqB9Iic75BAJyPtQrILX20HSUj5EIoSkVZth7qJfssaSX9egxBbOAGNfG40qAMNdSI1ugZA0mIs3awEAtgMOL8eQYpI9mWD+yPECAAQD6jshl3zhTjgAAAABJRU5ErkJggg==","Share Video",function(){T()},"share"),r.style.visibility="hidden",r.onclick=y,x()}function x(){N(r,{backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAItJREFUeNp8kUEOABEMRXUysXQnJ5k5GidxAmcxsbQxmiAlLUlD/df6UDnn1KK2eJQwUOtMAlwQ7TXG+B1ukxv5hRDRHT1ph5EFSRgN9tPh0E2drO6Xo7E8xk2TGKPSWi9NSilLPi2FEI6WrLV+FjAwe2ksAg4e3TgNCyoHS1bx4z4JxtH3hsXvF2AAnU9uUtSy19QAAAAASUVORK5CYII=),url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEdJREFUeNpilpSUvMHEwMDwn+k/EEBY+LkwFgMuCWINwDCPVB30cBoDaTpgBMMoQU2CkYkRCCAsNC6pEgyUGoBHYvA6DSDAAOnHjLU15EHNAAAAAElFTkSuQmCC)",backgroundPosition:"right top,center center",backgroundRepeat:"no-repeat,no-repeat",backgroundSize:"auto auto,100% 100%",opacity:0,webkitTransition:"opacity 150ms linear",mozTransition:"opacity 150ms linear",msTransition:"opacity 150ms linear",oTransition:"opacity 150ms linear",transition:"opacity 150ms linear",cursor:"pointer"}),f=document.createElement("div"),r.appendChild(f),N(f,{cursor:"default",position:"absolute",border:"none",width:"320px"}),l=document.createElement("div"),typeof n.heading=="string"?l.innerHTML=n.heading:l.innerHTML="Share Video",N(l,{position:"absolute",border:"none",color:"#FFF",display:"block",font:"15px Arial",overflow:"hidden",width:"230px",height:"20px",left:"80px",margin:"0 0 0 0",textTransform:"none",textShadow:"#000 1px 1px 0",padding:"0 0 0 0"}),f.appendChild(l),s=new e.sharing.row("Embed code"),f.appendChild(s.getDiv()),p=new e.sharing.row("Video link"),f.appendChild(p.getDiv()),u=e.sharing.shortcut("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARlJREFUeNpiTKzdzEAbwPL/PwPtjP4/FF3NQDOj/5Hl7O9fv3//9v3d63fIgipaKqiu/key0UATFSW5jSzVUyIskcWjKzZS5GqgY4Nc1VMjrDCl0Iwi2WhVWX6s5mIxmtTEpyYrgEvqP7qrSQzrZKTw/fP336odV24+/HD17musKYS0OGRiZERoZma68fDDlTuvqZn44ODS7VeUZvQndx5gFX98+z6cLaOiQE5Yn91SSlDcN28VNQOEmumaBKMpKVSBZsETzJJtVzDTNVGmuGUuhzB2TY9ETohwceonPjzaaWk0GYUqSrnxb0Bc/ePrV0qMxqOdRUVVmhKj8Whn+fXjFyVG49HORLMKfYgazUKqhtCytUSqBAgwAPLTpnqcD79pAAAAAElFTkSuQmCC","Facebook",g),f.appendChild(u),d=e.sharing.shortcut("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcpJREFUeNpiXPX1OwNtABMDzQDL/380M/ofAw2N/j8UwxqHoy9cuN3Ttpzh2w8GLo6M3AAbWz2Sjf6LI0D6J25hEJJhEGZi+P9v9oJ9lra6pIc1Dlf/5RFjYGSEslnZb995rqwsSaqrcQAODmSeID/XX9LTNY7kx8aGzBMR4f/17x91XM3Izo7MjU+fgUURF2tOqpuOhjRpYc3AiuJqRkVNLGr+/5+x9MSkpmASswyqq3GBv2xSuEzAndFRwxoX4GHHaQLLX1x5hpWdGHPbfRR//yfV1eworj6WiSU3/vn/78b37z///MNhNC6z2VBcfeTDZzJKvn/EpJDTt18bqwqTmK5xJT52lNy49szj/4yMXOysQLacGCcnGwsFGZ2NFZn3T1xh9ZknDH//gDi/fjL8Belj52bxsZAzUODHVahid7akAOfL76hScmpoan79/rnx8kt9eT7SUkiEEsvE24wE6hE2tv9c3P8YfpCWrlWEfrvJ8Ox6RcB0MXaGv/+/kxbWT379jpb/oSvIufgZw6ufOM2tVv7z7DfpjYWrX77LcP6Zo8PBwYjd7T/+/7/45SsuE4CuxlcKP/n5E4gGX43+j1bNEFq6GiDAAP9eqmJ8yUAWAAAAAElFTkSuQmCC","Twitter",C),f.appendChild(d),m=e.sharing.shortcut("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9pJREFUeNqslllLa0EMxzvTqnVfaF9cUBRFBDf02e/pt3F/EtxAEEEUxA0fxF1Pa/2d82/jOL334cINeJqZJP9JMknG3Orq6t3dXbVa/fpPBBSAwLrb29uBgYFKRrmA8vm8GFT5eu8xy/0mdCQNTWq1Wltb2/39vQPx4+PDOYdSpGrGti9j439ELpf3PzqgtbS0eJxvbW2VR1I10PAk7UtNxhLJxNWcmcAUCgVgfblcXltbIwTD4kv4BhSmhWDFi7EgfN4jU6LBBbBUKnkWy8vLLAjBHJFTOqCx8ysbtm+eUgboF4vF9fV1ADnGg4LLQkdgqmEesMHL6MaijCkPgAAFA6x7fX1lN0mS9/f3w8PDlZWVz8/P3F8oKhvMLTJEGxsb8/PzOEoC5FAqY4HLU1NTiGFCg/B+olsl49rBHMPp6emOjg4lFpGn+Ezc19c3OTlJUNRMmJYwCc1BYIgJhp2dnVY5KbQcrGZEjvr7+ycmJnSrVjCqFrtkta54QhQuhvBA60ivHnMZwaghu7q6RkdHMdBtcA0Cko51M1/SitrY2Bh5AM6kSUY+aZBrENlob2/HgDIyAx2gr6mhgFoxI4lE8p2qSolF9vslvqenB4/wfWtri2OkQ0zKIF/ShQgF1EgxIu0bk0IrzFrWS0lSMe+6u7tJyMjIyObmJkBhNoSLiJhQUxAWuqXBRx5BOpkvSYcBYnt7m/ClCcOSTQ4GN6u/2FaO168xHLg6WSnq7e0ltKGhoZ2dHQInOTDDw8OIwFUVhKM+dN9dX19nnQN6LRrB8PQnjfD4+AjW1dUVm4ODg1jRAcfHx3Nzc2FziqxF06cgGjfGHB0dMRCY5syAl5cXNQKW+Kvu3d3dnZmZCdvHJnha2mElKjNiwF1aWnp+fmYHPSpX1Q1TKOQ54+3tbXFxEd/DlMJUKvVCcApT53xlgxH+5ORkYWEB4+bnJsoA2d/f38f38BmqD3HOt6JhzRdcBhhJkC/6UgZqd8UnHhGJinxX+frGhKtZ0ZyenuIvBio1lVHWAuncsY7QbJMCY5n7xFAVrFJOX4/Ly0s45fHs7Ax/wbU3UEnQ7UUvskj1p8s4ODgYHx+3BKZeCxpcDufetPxXwhBzQLRMT1Vo5+fns7OziKM8WKMaNaZNXU1PaJaBCuaAAFWfIfxdXFxwxQ8PD1aCclzXJSwrTU2bsNp0b/Qkxzw9PQEFYPofBD/UP/3W/KyEbflHHn/tDsJ9xgMPrKcb9b6EvaNCtNFMsFFtaWnRhC8GUAQNbGFvb895Vy6VaVzVo3mtZfO/egKVyL6mj083NzfAfgswACBs40J0KAZ5AAAAAElFTkSuQmCC","Email",k),f.appendChild(m)}function T(){t.getState()=="PLAYING"&&t.pause(),r.style.visibility="visible",r.style.opacity=1,t.setControls(!1)}function N(e,t){for(var n in t)e.style[n]=t[n]}function C(e){var t=v+encodeURIComponent(h);return window.open(t,"_blank"),window.focus(),!1}function k(e){var t="mailto:?body="+encodeURIComponent(h);return window.open(t,"_blank"),window.focus(),!1}var i,s,o,u,a="http://www.facebook.com/sharer/sharer.php?u=",f,l,h,p,d,v="http://twitter.com/intent/tweet?url=",m;this.resize=function(e,n){if(t.getRenderingMode()=="flash"||!f)return;o=[e,n],E()},t.onReady(S)};e().registerPlugin("sharing","6.0",t),e.sharing={}}(e),function(e){e.sharing.row=function(e){function c(){t=document.createElement("div"),v(t,n),s=document.createElement("label"),s.innerHTML=e,t.appendChild(s),v(s,o),r=document.createElement("input"),r.setAttribute("type","text");try{document.createEvent("TouchEvent")}catch(f){r.setAttribute("readonly","readonly")}v(r,i),t.appendChild(r),u=document.createElement("button"),u.innerHTML="Select",u.onclick=d,u.onmouseover=h,u.onmouseout=p,v(u,a),t.appendChild(u)}function h(){v(r,f),v(u,f)}function p(){v(r,l),v(u,l)}function d(){r.select()}function v(e,t){for(var n in t)e.style[n]=t[n]}var t,n={border:"none",position:"absolute",left:"0px",width:"312px",height:"30px",margin:"0 0 0 0",padding:"0 0 0 0"},r,i={position:"absolute",left:"80px",top:"0px",font:"11px Arial",webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",oBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000",padding:"0px 5px",background:"#FFF",width:"190px",height:"28px",margin:"0 0 0 0",border:"none"},s,o={border:"none",color:"#FFF",display:"block",font:"12px Arial",overflow:"hidden",width:"74px",position:"absolute",top:"10px",left:"0px",textAlign:"right",textTransform:"none",padding:"0 0 0 0"},u,a={position:"absolute",left:"275px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAcCAIAAAAvP0KbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5JREFUeNpisre3Z/r37x8c////H4VPjjgeMYAAAwBV/1FjCd0OtgAAAABJRU5ErkJggg==)",backgroundSize:"100% 100%",color:"#FFF",font:"11px Arial",width:"50px",height:"28px",margin:"0 0 0 0",textAlign:"center",webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",oBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000",padding:"0px 5px",border:"none",cursor:"pointer"},f={webkitBoxShadow:"0 0 4px #FFFFFF",MozBoxShadow:"0 0 4px #FFFFFF",msBoxShadow:"0 0 4px #FFFFFF",oBoxShadow:"0 0 4px #FFFFFF",boxShadow:"0 0 4px #FFFFFF"},l={webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",oBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000"};this.getDiv=function(){return t},this.setText=function(e){r.setAttribute("value",e)},this.getWidth=function(){return parseInt(u.style.left)+50},this.resize=function(e){var t=e-230;t<100?t=100:t>400&&(t=400);var n=89+t;v(r,{width:t+"px"}),v(u,{left:n+"px"})},c()}}(e),function(e){e.sharing.shortcut=function(e,t,n){function u(e){l(s,{webkitBoxShadow:"0 0 4px #FFF",MozBoxShadow:"0 0 4px #FFF",msBoxShadow:"0 0 4px #FFF",oBoxShadow:"0 0 4px #FFF",boxShadow:"0 0 4px #FFF"})}function a(e){l(s,{webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",oBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000"})}function f(){return r=document.createElement("div"),r.onclick=n,r.onmouseout=a,r.onmouseover=u,l(r,i),s=document.createElement("img"),s.setAttribute("src",e),l(s,o),r.appendChild(s),r}function l(e,t){for(var n in t)e.style[n]=t[n]}var r,i={cursor:"pointer",position:"absolute",border:"none",color:"#FFF",display:"block",font:"11px/18px Arial,sans-serif",margin:"0 0 0 0",textAlign:"left",textDecoration:"none",textTransform:"none",padding:"0 0 0 10px",width:"30px",height:"30px"},s,o={webkitBoxShadow:"0 0 4px #000",MozBoxShadow:"0 0 4px #000",msBoxShadow:"0 0 4px #000",oBoxShadow:"0 0 4px #000",boxShadow:"0 0 4px #000",position:"absolute",left:"0px",top:"0px",width:"30px",height:"30px",margin:"0 0 0 0",padding:"0 0 0 0"};return f()}}(e)}(jwplayer),define("jwplayer",["jquery"],function(){}),function(e){jQuery.fn.extend({slimScrollHorizontal:function(t){var n={wheelStep:20,height:"auto",width:"250px",size:"7px",color:"#000",position:"bottom",distance:"1px",start:"left",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:"0.2",railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,scroll:0,touchScrollStep:200,barZ:99,wrapperPos:"relative",wrapperBottom:"0px"},r=e.extend(n,t);return this.each(function(){function w(e,t,n){var i=e;g.css("left")=="auto"&&g.css("left","0px");if(t){i=parseInt(g.css("left"))+e*parseInt(r.wheelStep)/100*g.outerWidth();var s=d.outerWidth()-g.outerWidth();i=Math.min(Math.max(i,0),s),g.css({left:i+"px"})}f=parseInt(g.css("left"))/(d.outerWidth()-g.outerWidth()),i=f*(d[0].scrollWidth-d.outerWidth());if(n){i=e;var u=i/d[0].scrollWidth*d.outerWidth();g.css({left:u+"px"})}d.scrollLeft(i),x(),T()}function S(){a=Math.max(d.outerWidth()/d[0].scrollWidth*d.outerWidth(),h),g.css({width:a+"px"})}function x(){S(),clearTimeout(s);if(f==~~f){p=r.allowPageScroll;if(l!=f){var e=~~f==0?"left":"right";d.trigger("slimscroll",e)}}l=f;if(a>=d.outerWidth()){p=!0;return}g.stop(!0,!0).fadeIn("fast"),r.railVisible&&m.stop(!0,!0).fadeIn("fast")}function T(){r.alwaysVisible||(s=setTimeout(function(){(!r.disableFadeOut||!t)&&!n&&!i&&(g.fadeOut("slow"),m.fadeOut("slow"))},1e3))}var t,n,i,s,u,a,f,l,c="<div></div>",h=30,p=!1,d=e(this);if(d.parent().hasClass("slimScrollDiv")){scroll&&(g=d.parent().find(".slimScrollBar"),m=d.parent().find(".slimScrollRail"),w(d.scrollLeft()+parseInt(scroll),!1,!0));return}var v=e(c).addClass(r.wrapperClass).css({position:r.wrapperPos,bottom:r.wrapperBottom,overflow:"hidden",width:r.width,height:r.height});d.css({overflow:"hidden",width:r.width,height:r.height});var m=e(c).addClass(r.railClass).css({width:"100%",height:r.size,position:"absolute",bottom:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.size,background:r.railColor,opacity:r.railOpacity,zIndex:90}),g=e(c).addClass(r.barClass).css({background:r.color,height:r.size,position:"absolute",bottom:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.size,BorderRadius:r.size,MozBorderRadius:r.size,WebkitBorderRadius:r.size,zIndex:r.barZ}),y=r.position=="top"?{top:r.distance}:{bottom:r.distance};m.css(y),g.css(y),d.wrap(v),d.parent().append(g),d.parent().append(m),g.draggable({axis:"x",containment:"parent",start:function(){i=!0},stop:function(){i=!1,T()},drag:function(t){w(0,e(this).position().left,!1)}}),m.hover(function(){x()},function(){T()}),g.hover(function(){n=!0},function(){n=!1}),d.hover(function(){t=!0,x(),T()},function(){t=!1,T()}),d.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(u=e.originalEvent.touches[0].pageX)}),d.bind("touchmove",function(e){e.originalEvent.preventDefault();if(e.originalEvent.touches.length){var t=(u-e.originalEvent.touches[0].pageX)/r.touchScrollStep;w(t,!0)}});var b=function(e){if(!t)return;var e=e||window.event,n=0;e.wheelDelta&&(n=-e.wheelDelta/120),e.detail&&(n=e.detail/3),w(n,!0),e.preventDefault&&!p&&e.preventDefault(),p||(e.returnValue=!1)},E=function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",b,!1),this.addEventListener("mousewheel",b,!1)):document.attachEvent("onmousewheel",b)};E(),S(),r.start=="right"?(g.css({left:d.outerWidth()-g.outerWidth()}),w(0,!0)):typeof r.start=="object"&&(w(e(r.start).position().left,null,!0),r.alwaysVisible||g.hide())}),this}}),jQuery.fn.extend({slimscrollHorizontal:jQuery.fn.slimScrollHorizontal})}(jQuery),define("jquery.slimscroll.hor",function(){}),define("media/models/tag",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"/api/ent/addtag/"}}),n}),define("usercontrol/photo-player/models/tag-myself",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"/api/ent/addtag/"+this.user_id}}),n}),!function(e,t){function n(){i.READY||(i.event.determineEventTypes(),i.utils.each(i.gestures,function(e){i.detection.register(e)}),i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0)}function r(e,n){e.event.bindDom=function(e,r,i){n(e).on(r,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),i.call(this,n)})},e.Instance.prototype.on=function(e,t){return n(this.element).on(e,t)},e.Instance.prototype.off=function(e,t){return n(this.element).off(e,t)},e.Instance.prototype.trigger=function(e,t){var r=n(this.element);return r.has(t.target).length&&(r=n(t.target)),r.trigger({type:e,gesture:t})},n.fn.hammer=function(t){return this.each(function(){var r=n(this),i=r.data("hammer");i?i&&t&&e.utils.extend(i.options,t):r.data("hammer",new e(this,t||{}))})}}var i=function(e,t){return new i.Instance(e,t||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in e,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.UPDATE_VELOCITY_INTERVAL=16,i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=e.document,i.plugins=i.plugins||{},i.gestures=i.gestures||{},i.READY=!1,i.utils={extend:function(e,n,r){for(var i in n)e[i]!==t&&r||(e[i]=n[i]);return e},each:function(e,n,r){var i,s;if("forEach"in e)e.forEach(n,r);else if(e.length!==t){for(i=-1;s=e[++i];)if(n.call(r,s,i,e)===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[];return i.utils.each(e,function(e){t.push("undefined"!=typeof e.clientX?e.clientX:e.pageX),n.push("undefined"!=typeof e.clientY?e.clientY:e.pageY)}),{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),r=Math.abs(e.pageY-t.pageY);return n>=r?e.pageX-t.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:e.pageY-t.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==i.DIRECTION_UP||e==i.DIRECTION_DOWN},toggleDefaultBehavior:function(e,t,n){t&&e&&e.style&&(i.utils.each(["webkit","moz","Moz","ms","o",""],function(r){i.utils.each(t,function(t,i){r&&(i=r+i.substring(0,1).toUpperCase()+i.substring(1)),i in e.style&&(e.style[i]=!n&&t)})}),"none"==t.userSelect&&(e.onselectstart=!n&&function(){return!1}),"none"==t.userDrag&&(e.ondragstart=!n&&function(){return!1}))}},i.Instance=function(e,t){var r=this;return n(),this.element=e,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),t||{}),this.options.stop_browser_behavior&&i.utils.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!1),this.eventStartHandler=i.event.onTouch(e,i.EVENT_START,function(e){r.enabled&&i.detection.startDetect(r,e)}),this.eventHandlers=[],this},i.Instance.prototype={on:function(e,t){var n=e.split(" ");return i.utils.each(n,function(e){this.element.addEventListener(e,t,!1),this.eventHandlers.push({gesture:e,handler:t})},this),this},off:function(e,t){var n,r,s=e.split(" ");return i.utils.each(s,function(e){for(this.element.removeEventListener(e,t,!1),n=-1;r=this.eventHandlers[++n];)r.gesture===e&&r.handler===t&&this.eventHandlers.splice(n,1)},this),this},trigger:function(e,t){t||(t={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var r=this.element;return i.utils.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(this.options.stop_browser_behavior&&i.utils.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!0),e=-1;t=this.eventHandlers[++e];)this.element.removeEventListener(t.gesture,t.handler,!1);return this.eventHandlers=[],i.event.unbindDom(this.element,i.EVENT_TYPES[i.EVENT_START],this.eventStartHandler),null}};var s=null,o=!1,u=!1;i.event={bindDom:function(e,t,n){var r=t.split(" ");i.utils.each(r,function(t){e.addEventListener(t,n,!1)})},unbindDom:function(e,t,n){var r=t.split(" ");i.utils.each(r,function(t){e.removeEventListener(t,n,!1)})},onTouch:function(e,t,n){var r=this,a=function(a){var l=a.type.toLowerCase();if(!l.match(/mouse/)||!u){l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===a.which?o=!0:l.match(/mouse/)&&!a.which&&(o=!1),l.match(/touch|pointer/)&&(u=!0);var p=0;o&&(i.HAS_POINTEREVENTS&&t!=i.EVENT_END?p=i.PointerEvent.updatePointer(t,a):l.match(/touch/)?p=a.touches.length:u||(p=l.match(/up/)?0:1),p>0&&t==i.EVENT_END?t=i.EVENT_MOVE:p||(t=i.EVENT_END),(p||null===s)&&(s=a),n.call(i.detection,r.collectEventData(e,t,r.getTouchList(s,t),a)),i.HAS_POINTEREVENTS&&t==i.EVENT_END&&(p=i.PointerEvent.updatePointer(t,a))),p||(s=null,o=!1,u=!1,i.PointerEvent.reset())}};return this.bindDom(e,i.EVENT_TYPES[t],a),a},determineEventTypes:function(){var e;e=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=e[0],i.EVENT_TYPES[i.EVENT_MOVE]=e[1],i.EVENT_TYPES[i.EVENT_END]=e[2]},getTouchList:function(e){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():e.touches?e.touches:(e.identifier=1,[e])},collectEventData:function(e,t,n,r){var s=i.POINTER_TOUCH;return(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r))&&(s=i.POINTER_MOUSE),{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:t,pointerType:s,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return i.utils.each(e.pointers,function(e){t.push(e)}),t},updatePointer:function(e,t){return e==i.EVENT_END?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,r={};return r[i.POINTER_MOUSE]=n===t.MSPOINTER_TYPE_MOUSE||n===i.POINTER_MOUSE,r[i.POINTER_TOUCH]=n===t.MSPOINTER_TYPE_TOUCH||n===i.POINTER_TOUCH,r[i.POINTER_PEN]=n===t.MSPOINTER_TYPE_PEN||n===i.POINTER_PEN,r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:i.utils.extend({},t),lastEvent:!1,lastVEvent:!1,velocity:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst.options;return i.utils.each(this.gestures,function(n){return this.stopped||t[n.name]===!1||n.handler.call(n,e,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=e),e.eventType==i.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent,n=this.current.lastVEvent;!t||e.touches.length==t.touches.length&&e.touches!==t.touches||(t.touches=[],i.utils.each(e.touches,function(e){t.touches.push(i.utils.extend({},e))}));var r,s,o=e.timeStamp-t.timeStamp,u=e.center.pageX-t.center.pageX,a=e.center.pageY-t.center.pageY,f=this.current.velocity;return n!==!1&&e.timeStamp-n.timeStamp>i.UPDATE_VELOCITY_INTERVAL?(f=i.utils.getVelocity(e.timeStamp-n.timeStamp,e.center.pageX-n.center.pageX,e.center.pageY-n.center.pageY),this.current.lastVEvent=e,f.x>0&&f.y>0&&(this.current.velocity=f)):this.current.velocity===!1&&(f=i.utils.getVelocity(o,u,a),this.current.velocity=f,this.current.lastVEvent=e),e.eventType==i.EVENT_END?(r=this.current.lastEvent&&this.current.lastEvent.interimAngle,s=this.current.lastEvent&&this.current.lastEvent.interimDirection):(r=this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,e.center),s=this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,e.center)),i.utils.extend(e,{deltaTime:o,deltaX:u,deltaY:a,velocityX:f.x,velocityY:f.y,distance:i.utils.getDistance(t.center,e.center),angle:i.utils.getAngle(t.center,e.center),interimAngle:r,direction:i.utils.getDirection(t.center,e.center),interimDirection:s,scale:i.utils.getScale(t.touches,e.touches),rotation:i.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),i.utils.extend(i.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,t){if(i.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void (this.triggered=!1);if(!(t.options.drag_max_touches>0&&e.touches.length>t.options.drag_max_touches))switch(e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(e.distance<t.options.drag_min_distance&&i.detection.current.name!=this.name)return;if(i.detection.current.name!=this.name&&(i.detection.current.name=this.name,t.options.correct_for_drag_min_distance&&e.distance>0)){var n=Math.abs(t.options.drag_min_distance/e.distance);i.detection.current.startEvent.center.pageX+=e.deltaX*n,i.detection.current.startEvent.center.pageY+=e.deltaY*n,e=i.detection.extendEventData(e)}(i.detection.current.lastEvent.drag_locked_to_axis||t.options.drag_lock_to_axis&&t.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;e.drag_locked_to_axis&&r!==e.direction&&(e.direction=i.utils.isVertical(r)?e.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:e.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),t.trigger(this.name+e.direction,e);var s=i.utils.isVertical(e.direction);(t.options.drag_block_vertical&&s||t.options.drag_block_horizontal&&!s)&&e.preventDefault();break;case i.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case i.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==i.EVENT_END&&t.trigger(this.name,e)}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==i.EVENT_END){if(e.touches.length<t.options.swipe_min_touches||e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},has_moved:!1,handler:function(e,t){var n,r,s;e.eventType==i.EVENT_START?this.has_moved=!1:e.eventType!=i.EVENT_MOVE||this.moved?e.eventType==i.EVENT_END&&"touchcancel"!=e.srcEvent.type&&e.deltaTime<t.options.tap_max_touchtime&&!this.has_moved&&(n=i.detection.previous,r=n&&e.timeStamp-n.lastEvent.timeStamp,s=!1,n&&"tap"==n.name&&r&&r<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),s=!0),(!s||t.options.tap_always)&&(i.detection.current.name="tap",t.trigger(i.detection.current.name,e))):this.has_moved=e.distance>t.options.tap_max_distance}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,t){return t.options.prevent_mouseevents&&e.pointerType==i.POINTER_MOUSE?void e.stopDetect():(t.options.prevent_default&&e.preventDefault(),void (e.eventType==i.EVENT_START&&t.trigger(this.name,e)))}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1,transform_within_instance:!1},triggered:!1,handler:function(e,t){if(i.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void (this.triggered=!1);if(!(e.touches.length<2)){if(t.options.transform_always_block&&e.preventDefault(),t.options.transform_within_instance)for(var n=-1;e.touches[++n];)if(!i.utils.hasParent(e.touches[n].target,t.element))return;switch(e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-e.scale),s=Math.abs(e.rotation);if(r<t.options.transform_min_scale&&s<t.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),s>t.options.transform_min_rotation&&t.trigger("rotate",e),r>t.options.transform_min_scale&&(t.trigger("pinch",e),t.trigger("pinch"+(e.scale<1?"in":"out"),e));break;case i.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}}},e.Hammer=i,"object"==typeof module&&module.exports&&(module.exports=i),"function"==typeof define&&define.amd?define("jQueryHammer",["jquery"],function(t){return r(e.Hammer,t)}):r(e.Hammer,e.jQuery||e.Zepto)}(window),define("component/share",["require","facade","views","utils","vendor"],function(e){var t={gplus:"https://plus.google.com/share",twitter:"http://twitter.com/home",tumbler:"http://www.tumblr.com/share/photo/"},n={gplus:"Gplud_share",twitter:"Twitter_share",tumbler:"Tumblr_share"};return function(e){var r=this,i=function(){e&&s()},s=function(){var t=o();t&&window.open(t,n[e.type],"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},o=function(){var n=t&&e.type&&t[e.type]?t[e.type]:undefined;switch(e.type){case"twitter":n=n+"?status="+u();break;case"gplus":n=n+"?url="+u();break;case"tumbler":n=n+"?caption="+e.caption+"&source="+encodeURIComponent(e.image)+"&click_through="+u()}return n},u=function(){return encodeURIComponent(window.location.protocol+"//"+window.location.host+"/"+e.link+"/")};i()}}),define("usercontrol/photo-player/views/main",["require","text!usercontrol/photo-player/templates/player.html","text!usercontrol/photo-player/templates/image-thumbs.html","text!usercontrol/tag/templates/layout.html","facade","views","utils","vendor","votes/models/vote","jwplayer","jqueryui","jquery.slimscroll.hor","usercontrol/tag/models/basic_info","usercontrol/tag/views/main","media/models/tag","usercontrol/photo-player/models/tag-myself","component/fb","jQueryHammer","component/share"],function(e,t,n,r){var i,s=e("facade"),o=e("views"),u=o.SectionView,a=e("utils"),f=a.lib.Channel,l=e("vendor"),c=e("usercontrol/tag/views/main"),h=e("usercontrol/tag/models/basic_info"),p=e("jQueryHammer"),d=l.Mustache,v=s.$,m=e("votes/models/vote"),g=e("media/models/tag"),y=e("usercontrol/photo-player/models/tag-myself"),b=e("component/fb"),w=e("component/share");jwplayer.key="yXOw2TpDcCoCnbWyVSCoEYA4tepkpjiVEtLEfSBIfZQ=";var E=u.extend({template:t,thumbTemplate:n,events:{"click .back-arrow-h":"backButton","click .next-arrow-h":"nextButton","click .thumb-link-h":"changeImage","click .photo-player-vote-h":"vote","click .share-on-h":"shareOn","click .photo-player-tag-photo-h":"setUpTagPhotoView","click .photo-player-tag-myself-h":"TagMyself","click .toggle-thumbs-h":"toggleThumbsSection"},initialize:function(e){var t=this;this.collection=e.collection,this.setOptions(e),this.id=e.id,this.pageId=e.pageId,this.pageName=e.pageName,this.user_id=e.user_id,this.index=e.index,this.mediaId=e.mediaId,this.json=this.model.toJSON();var n=this.json.payload;for(var r in n)if(n[r].media_id==this.mediaId){this.index=r;break}this.index||(this.index=0),u.prototype.initialize.call(this,e),this.setUpMainView(),this.render(),this.initThumbsSection(),this.loadImage(!0),this.updateAllImagesCount(),f("tag-image-success-photo").empty(),f("tag-image-success-photo").subscribe(this.tagFunction),v(document).hammer().off("swiperight",".image-bg, #video_container, .image-controls"),v(document).hammer().on("swiperight",".image-bg, #video_container, .image-controls",function(e){t.click_left(e)}),v(document).hammer().off("swipeleft",".image-bg, #video_container, .image-controls"),v(document).hammer().on("swipeleft",".image-bg, #video_container, .image-controls",function(e){t.click_right(e)})},toggleThumbsSection:function(e){this.$el.find(".thumbs-outer").css("display")=="none"?(v(".loading_image, .photo-player-right-area, .bottom-line-container").addClass("minimizeOpacity"),this.$el.find(".thumbs-outer").slideDown()):(this.$el.find(".thumbs-outer").slideUp(),v(".loading_image, .photo-player-right-area, .bottom-line-container").removeClass("minimizeOpacity"))},updateAllImagesCount:function(){this.$el.find(".total-image-count-h").text(this.json.payload.length)},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},vote:function(e){var t=this,n=function(){var n=new m;if(v(e.currentTarget).hasClass("voted"))return;n.userId=t.json.payload[t.index].id,n.entity_id=t.json.payload[t.index].enttypes_id,n.set({subject_type_id:n.entity_id,subject_id:n.userId}),n.save(),v.when(n.request).done(function(){t.$el.find(".photo-player-vote-h").addClass("voted");var e=t.$el.find(".votes-num-h"),n=e.text();n==""?e.html("(1)").show():e.html("("+(n+1)+")").show(),e.parents("li").addClass("link-disabled")})};t.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},shareOn:function(e){var t=v(e.currentTarget).data("share");t&&_.isFunction(this[t])&&this[t]()},getLink:function(e){var t;return this.pageName=="profile"?t="#!"+this.pageName+e.userId+e.sportId+e.mediaId:t="#!"+this.pageName+e.pageId+e.mediaId,console.log(t),t},twitter:function(){var e=this,t=this.getShareData(),n=function(){var n={link:e.getLink(t),name:t.User.name+" - "+t.Sport.sport_name,caption:"Athletez.com",image:t.record.image_path,description:"",title:"",type:"twitter"};new w(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},gplus:function(){var e=this,t=this.getShareData(),n=function(){var n={link:e.getLink(t),name:t.User.name+" - "+t.Sport.sport_name,caption:"Athletez.com",image:t.record.image_path,description:"",title:"",type:"gplus"};new w(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},tumbler:function(){var e=this,t=this.getShareData(),n=function(){var n={link:e.getLink(t),name:t.User.name+" - "+t.Sport.sport_name,caption:"Athletez.com",image:t.record.image_path,description:"",title:"",type:"tumbler"};new w(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},getShareData:function(){var e=this.json.payload[this.index];return{record:e,userId:this.user_id?"/"+this.user_id:"",pageId:this.pageId?"/"+this.pageId:"",User:this.getUserForMedia(),Sport:this.getSportForMedia(),sportId:e.media_obj.sports_id?"/sport/"+e.media_obj.sports_id:"",mediaId:e.media_id?"/media/"+e.media_id:""}},facebook:function(){var e=this,t=this.getShareData(),n=this.getLink(t),r=t.User.name+" - "+t.Sport.sport_name,i="Athletez.com",s=t.record.image_path,o="",u=function(){var e=new b;e.shareOnFacebook({method:"feed",name:r,link:n,picture:s,caption:i,description:o,success:function(){alert("Shared successfully.")},error:function(){alert("Not Shared successfully.")}})};e.checkForUser()?u():routing.trigger("showSignup",function(e){u()})},getUserForMedia:function(){return this.json.payload[this.index].media_obj.users_obj},getSportForMedia:function(){return this.json.payload[this.index].media_obj.sports_obj},changeImage:function(e){var t=v(e.currentTarget);this.index=t.attr("data-index"),this.loadImage()},backButton:function(e){this.index>0&&(this.index--,this.loadImage())},nextButton:function(e){this.index<this.json.payload.length&&(this.index++,this.loadImage())},click_left:function(){this.backButton()},click_right:function(){this.nextButton()},changeThumbPosition:function(){var e=this.$el.find(".thumb-image-list-h"),t=this.$el.find(".selected-photo-thumb"),n=t.position(),r=e.position(),i=e.width(),s=0,o=this.$el.find(".thumbs-outer"),u=o.width();if(n.left<0)s=n.left+r.left;else if(n.left+t.width()>u)s=n.left-u,s+=r.left<0?-r.left:-r.left,s+=t.width()+20;else{var a=r.left<0?-r.left:r.left;s=+a-t.width()}s&&this.$el.find(".thumbs-outer").animate({scrollLeft:s+"px"},400)},initThumbsSection:function(){var e=this,t=this.json.payload.length,n={},r=null;n.data=[];for(var i=0;i<t;i++){var s=this.json.payload[i],o={_enttypes_id:s.enttypes_id,_id:s.id,_index:i};switch(s.enttypes_id){case"23":typeof s.standard_thumb=="object"?(r=s.standard_thumb,o._thumbnail=r.url):o._thumbnail=s.thumbs,o._label=s.media.name,o._link="javascript: void(0);",s.media.hasOwnProperty("is_owner")&&(show_edit=s.media.is_owner);break;case"21":o._label=s.media_obj.name,o._link="javascript: void(0);",typeof s.types=="object"&&(typeof s.types.standard_thumb=="object"?(r=s.types.standard_thumb,o._thumbnail=r.url):typeof s.types.small_thumb=="object"?(r=s.types.large_thumb,o._thumbnail=r.url):typeof s.types.large_thumb=="object"?(r=s.types.large_thumb,o._thumbnail=r.url):typeof s.types.original=="object"&&(r=s.types.original,o._thumbnail=r.url)),s.media_obj.hasOwnProperty("is_owner")&&(show_edit=s.media_obj.is_owner);break;case"1":typeof s.user_picture_obj=="object"&&typeof s.user_picture_obj.types=="object"&&(typeof s.user_picture_obj.types.standard_thumb=="object"?(r=s.user_picture_obj.types.standard_thumb,o._thumbnail=r.url):typeof s.user_picture_obj.types.large_thumb=="object"?(r=s.user_picture_obj.types.large_thumb,o._thumbnail=r.url):typeof s.user_picture_obj.types.original=="object"&&(r=s.user_picture_obj.types.original,o._thumbnail=r.url)),o._label=s.label,o._sublabel="Coming Soon",o._link="/#!profile/"+s.id,s.hasOwnProperty("is_owner")&&(show_edit=s.is_owner);break;case"8":o._detailclass="game",o._thumbnail=s.game_picture!==null?s.game_picture.types.small_thumb.url:"http://lorempixel.com/output/sports-q-c-440-440-4.jpg",r=s.game_picture!==null?s.game_picture.types.small_thumb:{height:440,width:440,url:"http://cdn.athletez.com/resources/icons/game/square_game.png"},o._label=s.game_day,o._link="/#!game/"+s.id;var u="",a=s.teams.length,f=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var i=0;i<a;i++)u+="<span>",u+=f(s.teams[i].team_name),u+="</span>",i+1<s.teams.length&&(u+=" VS. ");s.hasOwnProperty("is_owner")&&(show_edit=s.is_owner),o._sublabel=u}if(r!="undefined"&&r!=null){var l=r.width/110,c=r.height/110;r.width=parseInt(r.width),r.height=parseInt(r.height);var h=r.width>r.height?-(r.width/c-110)/2:-(r.height/l-110)/2;h>0&&(h=0),o.styles={},r.width>r.height?o.styles=[{property:"min-width",value:r.width/c+"px"},{property:"left",value:h+"px"}]:o.styles=[{property:"min-height",value:r.height/l+"px"},{property:"top",value:h+"px"}]}n.data.push(o)}this.id=o?o._id:undefined;var p=d.to_html(this.thumbTemplate,n);this.$el.find(".thumb-image-list-h").html(p)},thumbScroll:function(){},loadImage:function(e){var t=v("div#video_container"),n=v("div.loading_image");t.hasClass("hidden")||t.addClass("hidden"),n.hasClass("hidden")&&n.removeClass("hidden");var r=this,i=this.json.payload[r.index],s={_enttypes_id:i.enttypes_id,_id:i.id,_media_id:i.media_id,_currentIndex:r.index};i.has_voted?this.$el.find(".photo-player-vote-h").parent().addClass("link-disabled"):this.$el.find(".photo-player-vote-h").parent().removeClass("link-disabled"),i.num_votes?this.$el.find(".votes-num-h").html("("+i.num_votes+")").show():this.$el.find(".votes-num-h").hide(),console.error(i),r.$el.find(".current-image-number-count-h").text(parseInt(r.index)+1),r.index>=this.json.payload.length-1?this.$el.find(".next-arrow-h").addClass("disable-arrow-link"):this.$el.find(".next-arrow-h").removeClass("disable-arrow-link"),r.index==0?this.$el.find(".back-arrow-h").addClass("disable-arrow-link"):this.$el.find(".back-arrow-h").removeClass("disable-arrow-link");var o;switch(i.enttypes_id){case"23":this.setupVideo(i),s._thumbnail=i.thumbs,s._label=i.media.name,s._link="javascript: void(0);";break;case"21":typeof i.types=="object"&&i.types.large_format&&(o=i.types.large_format),s._label=i.media_obj.name,s._link="javascript: void(0);";break;case"1":typeof i.user_picture_obj=="object"&&(s._thumbnail=i.user_picture_obj.types.large_thumb.url),s._label=i.label,s._sublabel="Coming Soon",s._link="/#!profile/"+i.id,i.hasOwnProperty("is_owner")&&(show_edit=i.is_owner);break;case"8":s._detailclass="game",s._thumbnail=i.game_picture!==null?i.game_picture.types.large_thumb.url:"http://lorempixel.com/output/sports-q-c-440-440-4.jpg",s._label=i.game_day,s._link="/#!game/"+i.id;var u="",a=i.teams.length,f=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};for(var l=0;l<a;l++)u+="<span>",u+=f(i.teams[l].team_name),u+="</span>",l+1<i.teams.length&&(u+=" VS. ");i.hasOwnProperty("is_owner")&&(show_edit=i.is_owner),s._sublabel=u}s&&s._label&&r.$el.find(".image-message-h").text(s._label);if(o!="undefined"&&o!=null){var c=this,h=this.$el.find("div.loading_image");h.css("opacity","0");function p(e){var t=e.data.self,n=e.data.image_object,r=parseInt(t.$el.height())*.8,i=parseInt(n.height)>=380?parseInt(n.height):380;if(n.width>n.height||n.width==n.height){var s=r<i?60:(r-i)/2;e.data.el.css({"max-width":"100%",top:s+"px"})}else if(r>i){var s=(r-i)/2;e.data.el.css({"max-height":r+"px",top:s+"px"})}else e.data.el.css({"max-height":r+"px",top:"0px"});e.data.el.css("opacity","100"),e.data.el.find(".large-image-h").off("load")}h.find(".large-image-h").attr("data-id",s._media_id),h.find(".large-image-h").attr("src",o.url).on("load",{el:h,self:this,image_object:o},p)}this.$el.find(".thumb-image-list-h li").removeClass("selected-photo-thumb"),this.$el.find(".thumb-link-h[data-index="+this.index+"]").parents("li").addClass("selected-photo-thumb");var d=i.media_obj&&i.media_obj.users_id?i.media_obj.users_id:undefined;routing.trigger("photo-player-section-reload",s._enttypes_id,s._media_id,d);if(this.loadFirstTime){var m=window.location.hash;m.match(/\/media\/(.*)[0-9]\//i)?m=m.replace(/\/media\/(.*)[0-9]\//i,"/media/"+s._media_id+"/"):m.match(/\/media\/(.*)[0-9]/i)?m=m.replace(/\/media\/(.*)[0-9]/i,"/media/"+s._media_id):m=m+"/media/"+s._media_id,routing.navigate(m,{trigger:!1})}else this.loadFirstTime=!0},setupVideo:function(e){function n(){var n=jwplayer(t.playerId),r=t.$el,i={},s=[];for(var o=0;o<e.video_type.length;o++){console.log(e.video_type[o]);var u;u={file:e.video_type[o].meta_details.url},s.push(u)}i.playlist=[{image:e.thumbs,mediaid:e.media.name,sources:s}],i.title=e.media.name,i.primary="html5",i.duration=e.video_type[0].meta_details.duration_in_ms*1e3,i.modes=[{type:"html5",src:"http://s3.amazonaws.com/mikewbucket/jw/jwplayer.html5.js"},{type:"flash",src:"http://s3.amazonaws.com/mikewbucket/jw/jwplayer.flash.swf"}],i.skin="http://s3.amazonaws.com/mikewbucket/jw/skins/glow.xml",i.height=r.height()*.8,i.width=r.width(),n.setup(i)}var t=this,r=setInterval(function(){var e=v("#jw_container");e.length||(v("div.image-bg div.loading_image").addClass("hidden"),v("div#video_container").removeClass("hidden")),t.playerId&&v("#"+t.playerId).remove(),t.playerId="jw-container-"+Math.floor(Math.random()*90+10);var i=v("<div></div>").attr("id",t.playerId);v("div#video_container").append(i).removeClass("hidden"),v("#"+t.playerId).css("z-index","9999"),console.log("Set CSS",v("#"+t.playerId).css("z-index","9999")),clearInterval(r),n()},500)},showImage:function(e){e.find("div.loading_image").css("opacity","100")},setOptions:function(e){this.userId=e.user_id||null,this.sportsId=e.sports_id||null,this.scheme=e.scheme,this.layout=e.layout},setUpMainView:function(){var e=this,t=d.to_html(e.template,{});v(e.$el).html(t)},setUpTagPhotoView:function(){var e=this,t=this.json.payload[this.index],n=null,i=null,s=null;t&&t.media_obj&&(i=t.media_obj.sports_id||null,s=t.media_obj.users_id||null,n=t.media_obj.is_owner||null);var o=function(){e.tagViewPhoto=new c({model:new h,template:r,name:"tag-image "+(new Date).toString(),destination:"#image-tagging-photo",user_id:s,sports_id:i,is_owner:n,channel:"tag-image-success-photo"}),e.scheme.push(e.tagViewPhoto),e.layout.render()};e.checkForUser()?o():routing.trigger("showSignup",function(e){o()})},tagFunction:function(e){var t=this,n=e||{},r={media_id:this.json.payload[this.index].media_id,tag_array:JSON.stringify(n)},i=new g(r);i.save(),v.when(i.request).done(function(){t.setUpTagViewSection()})},setUpTagViewSection:function(){var e=this,t=this.json.payload[e.index],n={_enttypes_id:t.enttypes_id,_id:t.id,_media_id:t.media_id,_currentIndex:e.index,_uploader:t.media_obj.user_obj};routing.trigger("tags-fetch-new-form-data",n._enttypes_id,n._media_id,t)},TagMyself:function(e){var t=this,n={1:[this.getUserId()]},r={media_id:this.json.payload[this.index].media_id,tag_array:JSON.stringify(n)},i=function(){var n=new y(r);n.user_id=t.getUserId(),n.save(),v.when(n.request).done(function(){t.setUpTagViewSection(),v(e.target).parents("li").addClass("link-disabled")})};t.checkForUser()?i():routing.trigger("showSignup",function(e){i()})},getUserId:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?routing.loggedInUserId:null}});return E}),define("text!usercontrol/photo-player/templates/comment-form.html",[],function(){return'<a href="javascript: void(0);" class="add-comment-h">Comment</a>\r\n{{#payload}}\r\n<form class="add-comment-form-h" method="post" action="#">\r\n<div class="row-fluid">\r\n    <div class="field-message submit-result"></div>\r\n    <textarea id="new-comment" class="photoplayer-comment-box" class="" placeholder="Add a comment" ></textarea>\r\n    <!-- <br/> -->\r\n    <!-- <input type="button" id="comment-submit" value="Submit"/> -->\r\n</div>\r\n</form>\r\n{{/payload}}\r\n'}),define("usercontrol/photo-player/models/commentonform",["facade","site/models/comment","utils"],function(e,t,n){var r,i=e._,s=n.lib.Channel;return r=t.extend({url:function(){return testpath?testpath+"/user/commentonform/"+this.id:"/api/user/basics/"+this.id},initialize:function(e,n){t.prototype.initialize.call(e,n)},afterFetch:function(e,n){t.prototype.fetchSuccess.call(this,e,n),routing.trigger("profilecommentonform:fetch",e)}}),r}),define("usercontrol/photo-player/views/comment-form",["require","text!usercontrol/photo-player/templates/comment-form.html","usercontrol/photo-player/models/commentonform","site/views/comment-form","models/base","views","chrome/views/header"],function(e,t,n,r,i){var s,o=e("views"),u=e("chrome/views/header"),a=o.BaseView;return s=a.extend({initialize:function(e){console.error(e),_.bindAll(this),this.setOptions(),a.prototype.initialize.call(this,e)},el:".comment-input-outer-h",template:t,events:{"click #comment-submit":"submitHandler","click .add-comment-h":"showCommentBox","keypress .photoplayer-comment-box":"addComment"},setOptions:function(e){if(!this.collection)throw new Error("comment form view expected options.collection.");this.model||(console.log("this.collection.id =",this.collection.id),this.model=new n({id:this.collection.id}),console.log(this.model.toJSON()),this.model.fetch())},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},getCaret:function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(t==null)return 0;var n=e.createTextRange(),r=n.duplicate();return n.moveToBookmark(t.getBookmark()),r.setEndPoint("EndToStart",n),r.text.length}return 0},addComment:function(e){console.error(e);if(e.keyCode==13&&e.shiftKey){var t=$(e.currentTarget).val(),n=this.getCaret(e);t=t.substring(0,n)+"\n"+t.substring(n,t.length),e.stopPropagation()}else e.which===13&&!e.shiftKey&&(e.preventDefault(),this.submitHandler(e))},submitHandler:function(e){e.preventDefault();if(!this.checkForUser()){routing.trigger("showSignup");return}this.createOnEnter(e)},showCommentBox:function(){var e=this.$el.find(".add-comment-form-h");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")},refreshComments:function(e){this.$("#new-comment").val("")},createOnEnter:function(e){var t=this.$el.find("#new-comment").val(),n=this;n.$(".submit-result").stop().fadeOut();if(t!=""){date=new Date;var r=new Array;r.comment=t,r.comment_date=date.toDateString(),r.subject_type_id=this.collection.subject_entity_type,r.subject_id=$(".large-image-h").attr("data-id");var s=new i(r);s.url=function(){return debug.log(n),_.isUndefined(n.collection.savePath)?testpath?testpath+"/user/comment/add":"/api/media/addcomment/"+r.subject_id+"?comment="+r.comment:"api"+n.collection.savePath},s.saveSuccess=function(e,t){i.prototype.saveSuccess.call(this,e,t);var r=e.get("exec_data"),s=e.get("payload"),o=e.get("desc");r.exec_error?$(".global-alert").addClass("alert-error").html(o).stop().fadeIn():$(".global-alert").addClass("alert-info").html(o).stop().fadeIn(),s.poster=s.name,s.poster_picture=s.user_picture,s.poster_email=s.email,console.log("thisresponse = ",t),n.collection.push(e),console.log("latest collectionsx",n.collection),n.refreshComments(),routing.on("profilecommentonlist:refresh",n.collection)},s.save()}},render:function(){return a.prototype.render.call(this),this.input=this.$("#new-comment"),console.log("run here now",this.el),this}}),s}),define("usercontrol/photo-player/views/comments",["facade","utils","site/views/comment-list","usercontrol/photo-player/views/comment-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),console.error(e),this.userId=e.userId?e.userId:undefined,this.options.collection=this.collection,this.name=e.name,this._template=e.template,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function s(e){console.log("Comments callback",e.user_pic_small),n.model=e,n.render()}function o(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}this.collection.id=this.userId;var e=this,t=this,n=new r({collection:this.collection}),i=this.addChildView(n);this.callbacks.add(function(){i()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){s(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){o(e)})}}),s}),define("usercontrol/photo-player/models/tags",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({url:function(){return"/api/user/basics/"+this.id}}),n}),define("usercontrol/photo-player/collections/tags",["facade","collections","utils","usercontrol/photo-player/models/tags"],function(e,t,n,r){var i,s=t.BaseCollection;return i=s.extend({model:r,url:function(){return testpath?testpath+"/media/tags/"+this.id:"/api/media/tags/"+this.id},fetchSuccess:function(e,t){e.reset();var n=t.payload;for(var i in n){var s=new r;s.id=Math.ceil(Math.random()*1e5),s.set("payload",n[i]),s.set("desc",t.desc),s.set("exec_data",t.exec_data),e.push(s)}e.deferred.resolve(t)}}),i}),define("text!usercontrol/photo-player/templates/tags.html",[],function(){return'<div class="prof-name-area"></div>\r\n<div class="tags-outer-h">\r\n	<div class="photo-detail photo-detail-h ">\r\n		<span>Tags</span>\r\n		<a href="javascript: void(0);" class="photo-player-detail-icons photo-player-detail-arrow photo-player-detail-arrow-h up-arrow-photoplayer"></a>\r\n	</div>\r\n	<ul id="tags-list"></ul>\r\n</div>\r\n<div class="clear">\r\n</div>'}),define("text!usercontrol/photo-player/templates/tag-item.html",[],function(){return'<div class="row-fluid">\r\n    <div class="tags-name">\r\n		    <div class="tag-image-container" {{#_color}}style="background-color:{{_color}}"{{/_color}}>\r\n			    {{#_thumbnail}}<img src="{{_thumbnail}}" class="tag-thumb" />{{/_thumbnail}}\r\n			    {{^_thumbnail}}<div class="tile-text">{{_noicon_text}}</div>{{/_thumbnail}}\r\n			</div>\r\n\r\n\r\n		<a href="{{_link}}" style="display: inline-block;"><span class="labelSpan">{{{_label}}}</span></a>\r\n\r\n	    {{#show_edit}}\r\n	    <div class="deleteTag" title="Delete Tag" data-enttypes-id="{{_enttypes_id}}" data-subject-id="{{_id}}">&times;</div>\r\n	    {{/show_edit}}\r\n    </div>\r\n</div>\r\n'}),define("usercontrol/photo-player/views/tags-item",["vendor","views","utils","text!usercontrol/photo-player/templates/tag-item.html","common/models/delete","common/models/entparse"],function(e,t,n,r,i){var s,o=t.BaseView,u=e.Mustache,a=require("common/models/entparse");return s=o.extend({tagName:"li",template:r,className:"tag",events:{"click .deleteTag":"deleteTag"},initialize:function(e){},filterData:function(){var e=this,t=this.model.get("payload"),n={_enttypes_id:t.enttypes_id,_id:t.id},r=!1,i=null;n.Sportsteam=null,routing&&routing.loggedInUserId&&routing.loggedInUserId==t.subject_id&&$(".photo-player-tag-myself-h").parents("li").addClass("link-disabled"),console.error(t);var s=new a({mpay:t.subject,thumb_size:44,display_width:44,display_height:44}),n=s.parsedData;console.log(n,"for testing");switch(t.subject_enttypes_id){case"8":var o="",u=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},f=t.subject.teams?t.subject.teams.length:0;for(var l=0;l<f;l++){if(l%2==1)var c="game-match-name1",h="game-score1";else var c="game-match-name",h="game-score";o+='<div class="'+c+'">',console.log(t.subject.teams[l].team_name+",score="+t.subject.teams[l].points_scored+",i="+l),o+=u(t.subject.teams[l].team_name),o+="</div>",o+='<div class="'+h+'">',o+='<span class="scoreAlign">',o+=t.subject.teams[l].points_scored!=null?t.subject.teams[l].points_scored:"&Oslash;",o+="</span>",o+="</div>"}n._label=o!=""?o:t.subject.event_name,console.log(n._label),t.hasOwnProperty("is_owner")&&(r=t.is_owner);if(!this.Sportsteam&&f){this.Sportsteam=!0;var p=t.subject.shared.season,d=p.split(" "),v='<div class="name"><span class="topalign">'+t.subject.shared.sport+'</span></div>	<div class="game"><span class="topalign">'+t.subject.shared.complevel+'</span></div><div class="season"><span class="topalign">'+d[2]+"</span></div>";$(".headerinfo").html(v)}break;case"5":n._label=t.subject.team_name}return n._enttypes_id=t.enttypes_id,n._id=t.id,console.log(n),n},render:function(){var e=this,t=this.filterData(),n=u.to_html(this.template,t);this.$el.html(n),console.log(this.$el);var r=setInterval(function(){e.$el.find(".tag-image-container").width()>0&&(e.$el.find(".tag-image-container").css({height:"33px"}),console.log(e.$el.find(".tag-image-container").width()),clearInterval(r))},200);return t.imgData.maxwidth&&this.$el.find("img.tag-thumb").css({"max-width":t.imgData.maxwidth,left:t.imgData.left}),t.imgData.maxheight&&this.$el.find("img.tag-thumbl").css({"max-height":t.imgData.maxheight,top:t.imgData.top}),this},deleteTag:function(e){var t=new i;t.subject_id=$(e.target).attr("data-subject-id"),t.enttypes_id=$(e.target).attr("data-enttypes-id"),t.removeNode=$(e.target).parents("li.tags-li"),console.log(t),t.destroyAndRemove()}}),s}),define("usercontrol/photo-player/views/tags",["facade","vendor","utils","views","text!usercontrol/photo-player/templates/tags.html","usercontrol/photo-player/views/tags-item","usercontrol/photo-player/models/tags","jquery.slimscroll"],function(e,t,n,r){var i,s=e._,o=r.CollectionView,u=r.SectionView,a=t.Mustache,f=n.lib.Channel,l=require("text!usercontrol/photo-player/templates/tags.html"),c=require("usercontrol/photo-player/views/tags-item"),h=require("usercontrol/photo-player/models/tags");return CommentListAbstract=o.extend(u.prototype),i=CommentListAbstract.extend({__super__:o.prototype,listView:"#tags-list",_tagName:"li",_className:"tags-li",page:1,page_limit:5,prepend:!1,_view:c,template:l,events:{"click .see-more-h":"seeMore","click .photo-player-detail-arrow":"toggleDetail"},toggleDetail:function(e){$(e.currentTarget).hasClass("down-arrow-photoplayer")?($(e.currentTarget).removeClass("down-arrow-photoplayer"),$(e.currentTarget).addClass("up-arrow-photoplayer"),this.$el.find("#tags-list").slideDown()):($(e.currentTarget).removeClass("up-arrow-photoplayer"),$(e.currentTarget).addClass("down-arrow-photoplayer"),this.$el.find("#tags-list").slideUp())},renderTemplate:function(){var e=a.to_html(this.template);return this.$el.html(e),this},initialize:function(e){this.renderTemplate(),console.log(e);var t=this;this.name=e.name,this.collection=e.collection,this.uploader_id=e.uploader,console.log(this.collection.toJSON()),t.allData=this.collection.toArray(),t.cleardata(),t.getprofile(),$(".photo-player-right-area").slimScroll({height:"100%"}),t.seeMore(),console.log(this.collection.toJSON()),o.prototype.initialize.call(this,e);if(!this.collection)throw new Error("CommentListView expected options.collection.");s.bindAll(this),this.addSubscribers()},seeMore:function(e){var t=this.allData.length,n=t<this.page_limit?t:this.page_limit,r=t-this.page*n,i=r+this.page_limit;r<=0&&this.$el.find(".see-more-h").hide(),this.prepend=!0,e?this.collection.add(this.allData.slice(r,i)):this.collection.reset(this.allData.slice(r,i)),this.page++,this.prepend=!1,e&&(this.addSubscribers&&this.addSubscribers(),this.setupBoardView&&this.setupBoardView(),this.setupAddView&&this.setupAddView())},getprofile:function(){var e="/api/user/basics/"+this.uploader_id;this.model.set("url",e);var t=new h({id:this.uploader_id});t.fetch({success:function(e){var t='<div class="user-photo-profile"><img src='+e.attributes.payload.user_picture_obj.image_path+' alt=""></div><div class="content-prof-sub"><span class="user-comment">Uploaded By&nbsp;</span><span class="user-comment">'+e.attributes.payload.label+"</span></div>";$(".prof-name-area").html(t)}})},cleardata:function(){$(".headerinfo").empty(),$(".teamName-area").empty(),$(".prof-name-area").empty()},childViews:{}}),i}),define("usercontrol/photo-player/photo-player",["require","text!usercontrol/photo-player/templates/comments.html","text!usercontrol/tag/templates/layout.html","facade","controller","models","views","usercontrol/photo-player/collections/comments","usercontrol/photo-player/views/main","usercontrol/photo-player/views/comments","usercontrol/photo-player/collections/tags","usercontrol/photo-player/views/tags","usercontrol/photo-player/models/tags","usercontrol/tag/views/main","usercontrol/tag/models/basic_info"],function(e,t,n){var r,i=e("facade"),s=e("controller"),o=e("models"),u=e("views"),a=e("utils"),f=i.$,l=i._,c=a.debug,h=a.lib.Channel,p=u.LayoutView,d=i.Backbone,v=e("usercontrol/photo-player/collections/comments"),m=e("usercontrol/photo-player/collections/tags"),g=e("usercontrol/photo-player/views/main"),y=e("usercontrol/photo-player/views/comments"),b=e("usercontrol/photo-player/views/tags"),w=e("usercontrol/photo-player/models/tags"),E=e("usercontrol/tag/views/main"),S=e("usercontrol/tag/models/basic_info"),r=s.extend({cssArr:[base_url+"css/components/photoPlayer.css"],events:{},initialize:function(e){var t=this;t.startPlayer(e)},startPlayer:function(e){var t=this;h("load:css").publish(this.cssArr),l.bindAll(this),e.id&&(this.id=e.id),this.index=e.index,e.userId&&(this.userId=e.userId),this.pageId=e.pageId,e.pageName&&(this.pageName=e.pageName),e.array&&(this.collectionArray=!0),this.mediaId=e.mediaId,e._collection&&(this._collection=e._collection),f(document).off("click","#photoPlayerModal .close"),f(document).on("click","#photoPlayerModal .close",function(){var e=window.location.hash;e.match(/\/media\/(.*)/g)&&(e=e.replace(/\/media\/(.*)/g,"")),routing.navigate(e,{trigger:!1})}),this.modelHTML='<div id="photoPlayerModal" class="modal region-loader photo-frame-model hide fade model-popup-h"><div class="modal-body page-content-h"><div class="photo-player-area-h photo-player"></div><div class="photo-player-right-area"><div class="teamName-area"></div><div class="tags-area-h"></div><div class="comment-area coment-area-h"></div><div class="comment-input-outer-h comment-input-outer" class="clearfix"></div><div id="image-tagging-photo"></div></div></div></div>',routing.off("photo-player-section-reload"),routing.on("photo-player-section-reload",function(e,n,r){t.id=n,f("#image-tagging-photo").html(""),t.setUpCommentView(e,n),t.setUpTagView(e,n,r)}),routing.off("comments-fetch-new-form-data"),routing.on("comments-fetch-new-form-data",function(e,n,r){t.setUpCommentView(e,n,r)}),routing.off("tags-fetch-new-form-data"),routing.on("tags-fetch-new-form-data",function(e,n,r){t.setUpTagView(e,n,r)}),this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},handleDeferreds:function(){},setupLayout:function(){this.scheme=[],f(".model-popup-h").remove(),f("body").append(this.modelHTML);var e=new p({scheme:this.scheme,destination:"#modalPopup",template:"",displayWhen:"ready"});return this.layout=e,f("#photoPlayerModal").modal("show"),this.layout},setUpMainView:function(){var e=this;if(e.collectionArray){var t=e._collection.limit,n=e._collection.offset,r=d.Collection.extend(),i=new r;e._collection.limit=undefined,e._collection.offset=0,i.url=e._collection.url,i.fetch({success:function(t){e.setupPhotoPlayerView(t)},error:function(e,t){console.error(e,t)}})}else{var s=e._collection.toJSON(),o={},r=d.Collection.extend(),i=new r;o.payload=[];for(var u in s)o.payload.push(s[u].payload);i.reset(o),e.setupPhotoPlayerView(i),console.error(i,i.toJSON())}},setupPhotoPlayerView:function(e){var t=this;f("#photoPlayerModal").removeClass("region-loader");var n=new g({model:e.models[0],name:"photo player",destination:".photo-player-area-h",index:t.index,pageName:t.pageName,pageId:t.pageId,user_id:t.userId||null,sports_id:t.sports_id||null,scheme:t.scheme,layout:t.layout,mediaId:t.mediaId}),r=f(document).width(),i=r-350;f("#photoPlayerModal .photo-player-area-h").css({width:i+"px"}),t.scheme.push(n),t.layout.render()},setUpTagView:function(e,t,n){var r=this.scheme.length;for(var i=0;i<r;i++)this.scheme[i].name==this.oldTagView&&this.scheme[i].remove();var s=this;s.oldTagView="tag section"+Math.random(),f(".tags-area-h").unbind().html(""),s.tags=new m,s.tags.id=t,s.tags.targetElement=".tags-area-h",s.tags.fetch(),console.log("Looking for media obj",n),f.when(s.tags.request).done(function(){var t=new w,r=new b({collection:s.tags,userId:s.userId,name:s.oldTagView,model:t,uploader:n,entity_type_id:e,destination:".tags-area-h"});s.scheme.push(r),s.layout.render()})},setUpCommentView:function(e,n){var r=this.scheme.length;for(var i=0;i<r;i++)this.scheme[i].name==this.oldView&&this.scheme[i].remove();var s=this,o;s.oldView="comment section"+Math.random(),f(".coment-area-h, .comment-input-outer-h").unbind().html(""),s.commentson=new v,s.commentson.subject_entity_type=e,s.commentson.id=n,s.commentson.fetch(),f.when(s.commentson.request).done(function(){console.error(s.commentson),o=new y({collection:s.commentson,userId:s.userId,name:s.oldView,_template:t,destination:".coment-area-h"}),s.scheme.push(o),s.layout.render()})},setUpOthersView:function(){},setUpTagPhotoView:function(e,t){var r=this;this.tagViewPhoto=new E({model:new S,template:n,name:"tag-image "+(new Date).toString(),destination:"#image-tagging-photo",user_id:r.userId||null,sports_id:r.sports_id,channel:"tag-image-success-photo"}),r.scheme.push(this.tagViewPhoto),r.layout.render()},tagFunction:function(e){var t=this;alert(JSON.stringify(e))}});return r}),define("text!usercontrol/add-club/templates/layout.html",[],function(){return'<div class="add-club-school-outer"></div>'}),define("sportorg/models/complevel_profile",["facade","models/base"],function(e,t){var n,r=e._,i=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null,min_age:0,max_age:0},desc:"Complevel Profile information",exec_data:{exec_time:0,exec_error:!1}}),url:function(){return"/api/complevelprofile/basics/"+this.id},fetchSuccess:function(e,t){}});return i}),define("sportorg/collections/complevel_profiles",["facade","collections","utils","sportorg/models/complevel_profile"],function(e,t,n,r){var i,s=t.BaseCollection;return i=s.extend({model:r,url:function(){return console.log("called",this.model),"/api/complevelprofile/search/"},fetchSuccess:function(e,t){console.log(this.model),e.reset();var n=t.payload;for(var r in n){var i=new this.model;i.id=Math.ceil(Math.random()*1e5),i.set("payload",n[r]),i.set("desc",t.desc),i.set("exec_data",t.exec_data),e.push(i)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){},ParseForDropdown:function(){var e=this,t=e.toJSON(),n={};console.log(t),n=[];for(var r in t){var i=[];for(var s in t[r].payload.levels)i.push(t[r].payload.levels[s].name);n.push({payload:{id:t[r].payload.id,name:i.join(", ")}})}return console.log("data",n),n}}),i}),define("usercontrol/add-club/collections/complevel",["facade","sportorg/collections/complevel_profiles","utils"],function(e,t){return t.extend({})}),define("sportorg/models/season_profile",["facade","models/base"],function(e,t){var n,r=e._;return n=t.extend({defaults:r.extend({},(new t).attributes,{payload:{id:0,name:null},desc:"Season Profile information",exec_data:{exec_time:0,exec_error:!1}})}),n}),define("sportorg/collections/season_profiles",["facade","collections","utils","sportorg/models/season_profile"],function(e,t,n,r){var i=t.BaseCollection;return i.extend({model:r,url:function(){return"/api/seasonprofile/search/"},fetchSuccess:function(e,t){console.log(this.model),e.reset();var n=t.payload;for(var r in n){var i=new this.model;i.id=Math.ceil(Math.random()*1e5),i.set("payload",n[r]),i.set("desc",t.desc),i.set("exec_data",t.exec_data),e.push(i)}e.deferred.resolve(t),e.processResult(e)},processResult:function(e){},returnProcessedData:function(e){},ParseForDropdown:function(){return this.toJSON()}})}),define("usercontrol/add-club/collections/profile",["facade","sportorg/collections/season_profiles","utils"],function(e,t,n,r){return t.extend({ParseForDropdown:function(){return this.toJSON()}})}),define("usercontrol/add-club/collections/sports",["facade","sportorg/collections/sports_listall"],function(e,t){var n=t.extend({ParseForDropdown:function(){var e=t.prototype.ParseForDropdown.call(this);return e.unshift({payload:{id:null,custom_name:"Don't use a single sport"}}),e}});return n}),define("usercontrol/add-club/views/main",["require","text!usercontrol/add-club/templates/layout.html","facade","views","utils","vendor","usercontrol/add-club/collections/complevel","usercontrol/add-club/collections/profile","sportorg/models/org","usercontrol/add-club/collections/sports","sportorg/collections/seasons","component/forms"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("sportorg/models/org"),h=e("usercontrol/add-club/collections/sports"),p=e("usercontrol/add-club/collections/complevel"),d=e("usercontrol/add-club/collections/profile"),v=e("component/forms"),m=s.extend({template:t,stateData:{},initialize:function(e){this.model=e.model,this.id=e.id,this.addType=e.addType,this.callback=e.callback,this.viewObj=e.viewObj,this.addressValid=!1,e.orgNameSoFar&&(this.orgNameSoFar=e.orgNameSoFar),s.prototype.initialize.call(this,e),this.setUpMainView(),this.render()},setUpMainView:function(){var e=this,t={};t.type=e.addType;var n=f.to_html(e.template,t);l(e.$el).html(n)},afterRender:function(){this.$el.css("height","95%"),this.showAddClubForm()},showAddClubForm:function(){var e=this,t=new v({org_name:{form_values:{post_to_server:!0,serverDbField:"org_name",serverKey:"org_name",objectValuesToUpdate:[],defaultValue:e.orgNameSoFar},type:"Text",attr:{placeholder:"Organization Name","class":""},showLable:!1,label:"Organization Name",validators:[{type:"required",message:"Please enter an organization name."}]},season_profile:{type:"DropDown",showLable:!0,label:"We Compete:",form_values:{serverKey:"season_profiles_id",serverDbField:"season_profiles_id",post_to_server:!0,objectValuesToUpdate:[],source_collection:d,request_finished:function(){},data:{records:undefined,recordId:"id",recordValue:"name",selectedValue:e.sports_id},callback:function(e){}}},complevel_profile:{type:"Hidden",form_values:{serverKey:"complevel_profiles_id",post_to_server:!0,defaultValue:e.addType=="school"?1:2,request_finished:function(){},callback:function(e){}}},Sports:{type:e.addType=="school"?"Hidden":"DropDown",showLable:!0,label:"What Sport?",form_values:{serverKey:"single_sport_id",post_to_server:!0,objectValuesToUpdate:[],source_collection:h,request_finished:function(){},data:{records:undefined,recordId:"id",recordValue:"custom_name",selectedValue:e.sports_id},callback:function(e){}}},Location:{form_values:{serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},type:"Location",label:'Location (e.g. "UCLA" or "Santa Monica" or a full address)',validators:[{type:"required",message:"Please select location."}]},users_id:{form_values:{serverKey:e.users_id,post_to_server:!0,value:e.user_id},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Create"},showLable:!1,onSubmit:function(t){var r=n.commit();if(r)for(var i in r){var s=l("*[name="+i+"]"),o=s.position();s.parents(".common-modal #modalBody").animate({scrollTop:o.top},"500",function(){s.addClass("focus-error-animation"),setTimeout(function(){s.removeClass("focus-error-animation")},2e3)});break}else{var u=e.formValues.getFormValues(),a={complevel_profiles_id:u.complevel_profiles_id,name:u.org_name,location_id:u.locations_id,season_profiles_id:u.season_profiles_id,single_sport_id:u.single_sport_id,sports_club:e.addType=="school"?"0":"1"};console.log(a);var f=new c(a);f.save({}),l.when(f.request).done(function(){console.log(f.get("payload"));var t=f.get("payload");a.locationState=e.stateData,a.org_id=t.id,e.callback&&e.callback(a),alert("Your "+e.addType+" has been added to our database successfully.  Please continue the process by adding yourself to a specific season."),routing.trigger("common-popup-close")})}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},this.$el.find(".add-club-school-outer")),n=t.form;this.formValues=t.formValues}});return m}),define("usercontrol/add-club/add-club",["require","facade","controller","models","views","user/models/basic_info","usercontrol/add-club/views/main"],function(e){var t=e("facade"),n=e("controller"),r=e("models"),i=e("views"),s=e("utils"),o=t.$,u=t._,a=s.debug,f=s.lib.Channel,l=i.LayoutView,c=t.Backbone,h=e("user/models/basic_info"),p=e("usercontrol/add-club/views/main");return n.extend({cssArr:[base_url+"usercontrols/add-club/add-club.css"],events:{},initialize:function(e){var t=this;f("load:css").publish(this.cssArr),u.bindAll(this),e.id&&(this.id=e.id),e.index&&(this.index=e.index),e.userId&&(this.userId=e.userId),e.type&&(this.type=e.type),e.orgNameSoFar&&(this.orgNameSoFar=e.orgNameSoFar),this.viewObj=e.viewObj,this.callback=e.callback,e._collection&&(this._collection=e._collection),this.modelHTML='<div class="add-club-area-h photo-player"></div>',this.setupLayout().render(),this.setUpMainView()},setupLayout:function(){this.scheme=[];var e=new l({scheme:this.scheme,destination:"#modalBody",template:"",displayWhen:"ready"});this.layout=e;var t={};return t.height="500px",t.width="500px",t.title=this.type=="school"?"Add School":"Add Club",routing.trigger("common-popup-open",t),this.layout},setUpMainView:function(){var e=this,t=new p({model:new h,name:"add club",destination:"#modalBody",addType:e.type,callback:e.callback,viewObj:e.viewObj,orgNameSoFar:e.orgNameSoFar});e.scheme.push(t),e.layout.render()}})}),define("text!usercontrol/location/templates/view-location.html",[],function(){return'<div id="map-canvas" style="width: 90%; height: 300px; margin-top: 40px;"></div>\r\n'}),define("usercontrol/location/views/view-location",["require","text!usercontrol/location/templates/view-location.html","facade","views","utils","vendor"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=i.BaseView,h=r.Backbone,p;return h.View.extend({template:t,events:{},initialize:function(e){p=this,p.game_id=e.game_id,p.location=e,p.selectedOptions=[],p.setOptions(e),p.render()},intializeMap:function(){console.log(p.location);var e=new google.maps.LatLng(p.location.latitude,p.location.longitude),t={zoom:13,center:e,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.$el.find("#map-canvas")[0],t),this.marker=new google.maps.Marker({position:e,map:this.map}),this.marker.setMap(this.map)},render:function(){var e=this,t=f.to_html(e.template,{location:e.locaion});return l(e.el).html(t),setTimeout(function(){e.intializeMap()},1e3),this},setOptions:function(e){for(var t in e)this[t]=e[t]}})}),define("text!usercontrol/addevent/templates/layout.html",[],function(){return'<div class="well-large container_add_game">\r\n	<!-- <h4>Add Game</h4> -->\r\n	<!-- <div class="green-left-heading ">DATE</div> -->\r\n<div class="clear"></div>\r\n	<div class="section-individual-game_h displayNone">\r\n		<input type="text"class="txt-individual-game_h" placeholder="Enter Event" />\r\n		<span class="indicator_h"></span>\r\n		<div class="clear"></div>\r\n		<input type="text"class="txt-individual-location_h displayNone" placeholder="Enter Location Id"  />\r\n			<div class="clear"></div>\r\n	</div>\r\n	<div class="section-Add-Sports_h">\r\n		<div class="section-game-date_h floatLeft">\r\n			<input type="text" class="txt-game-date_h txtDate" placeholder="Enter Date" readonly="readonly" />\r\n			<input type="text" class="txt-game-time_h hasDatepicker txtTime"  placeholder="Time" placeholder="Time" maxlength="5" />\r\n			\r\n			<span class="spn-ddl-time-period_h"></span>\r\n			<!-- <select class="ddl-time-period_h ddlTime">\r\n			<option value="AM">AM</option>\r\n			<option value="PM">PM</option>\r\n			</select> -->\r\n		\r\n			<div class="clear"></div>\r\n			<span class="displayNone field-message field-message_h"></span>\r\n		</div>\r\n		<div class="clear"></div>\r\n		<!-- <div class="row-fluid">\r\n			Select Sport:\r\n		</div> -->\r\n	<!-- <div class="green-left-heading">SPORT</div> -->\r\n	<div class="clear"></div>\r\n		<div class="row-fluid section-game-sports_h">\r\n<span class="span-ddl-sports_h">\r\n			<!-- <select class="ddl-game-sports_h"></select> -->\r\n				</span>\r\n			<div class="clear"></div>	\r\n			<span class="displayNone field-message field-message_h"></span>\r\n		</div>\r\n<div class="clear"></div>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<div class="section-game-teams_h team-one_h displayNone">\r\n		<!-- <div class="green-left-heading">TEAM 1</div> -->\r\n		<div class="clear"></div>\r\n		Select Team 1 :\r\n			<div class="clear"></div>\r\n			<span class="span_ddl_team_h span_ddl_team_one_h"></span>\r\n		<!-- <select class="ddl-game-userteams_h"></select> -->\r\n		<a href="javascript:void(0)" class="btn-new-team-game_h">Team not listed ?</a>\r\n		<div class="section-new-team_h">\r\n			<!-- <input type="text" class="txt-game-state_h" placeholder="Enter State" />\r\n			<input type="text" class="txt-game-city_h displayNone" placeholder="Enter City" /> -->\r\n			<input type="text"class="txt txt-game-team_h displayNone" placeholder="Enter Team" />\r\n			<span class="indicator_h"></span>\r\n			<!-- <a href="javascript:void(0)" class="btn-ddl-team-game_h">Choose from select ?</a> -->\r\n		</div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n		<div class="clear"></div>\r\n		<div class="section-score_h">\r\n			Score : \r\n			<input type="text" class="txt-score-team_h" />\r\n		</div>\r\n		<div class="section-game-radio_h">			\r\n			Home &nbsp;<input type="radio" name="rdo-team1_h" value="home" class="rdo-game-location_h rdo-game-location-one-home_h" team="one"> &nbsp;&nbsp;\r\n			Away &nbsp;<input type="radio" name="rdo-team1_h" value="away" class="rdo-game-location_h" team="one">\r\n		</div>\r\n	</div>\r\n<div class="clear"></div>\r\n\r\n\r\n	<div class="section-game-teams_h team-two_h displayNone">\r\n		<!-- <div class="green-left-heading">TEAM 2</div> -->\r\n		<div class="clear"></div>\r\n		Select Team 2 :\r\n			<div class="clear"></div>\r\n			<!-- <span class="span_ddl_team_h span_ddl_team_two_h"></span> -->\r\n		<!-- <select class="ddl-game-userteams_h"></select> -->\r\n		<!-- <a href="javascript:void(0)" class="btn-new-team-game_h">Team not listed ?</a> -->\r\n		<div class="section-new-team_h">\r\n			<!-- <input type="text" class="txt-game-state_h" placeholder="Enter State" />\r\n			<input type="text" class="txt-game-city_h displayNone" placeholder="Enter City" /> -->\r\n			<input type="text"class="txt-game-team_h" placeholder="Enter Team" />\r\n			<span class="indicator_h"></span>\r\n		</div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n		<div class="clear"></div>\r\n		<div class="section-score_h">\r\n			Score :\r\n			<input type="text" class="txt-score-team_h"/>\r\n		</div>\r\n		<div class="section-game-radio_h">\r\n			Home &nbsp;<input type="radio" name="rdo-team2_h" value="home" class="rdo-game-location_h rdo-game-location-two-home_h"  team="two"> &nbsp;&nbsp;\r\n			Away  &nbsp;<input type="radio" name="rdo-team2_h" value="away" class="rdo-game-location_h"   team="two">			\r\n		</div>\r\n	</div>\r\n<div class="clear"></div>\r\n<br/>\r\n<br/>\r\n	<div class="section-main-location_h displayNone">\r\n		<!-- <div class="green-left-heading">LOCATION</div> -->\r\n		<!--div class="clear"></div>\r\n		<strong>Location : </strong>		\r\n<div class="clear"></div>\r\n		<input type="text" class="txt-game-location-id_h displayNone"-->\r\n		<div class="location-view-h">&nbsp;</div>\r\n		<input type="hidden" class="txt-game-location-id_h displayNone"/>\r\n		<div class="div-game-location_h"></div>\r\n			<div class="clear"></div>\r\n		<span class="displayNone field-message field-message_h"></span>\r\n	</div>\r\n	<div class="clear"></div>\r\n	<span class="displayNone field-message field-message_h"></span>\r\n\r\n	<div class="clear"></div>\r\n	<br/>\r\n	\r\n	<div>\r\n	<button class="btn btn-primary btn-game-Finish_h floatRight displayNone">\r\n		Create ! \r\n	</button>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>\r\n<div class="m_top_20 floatRight popup-action-button">\r\n	<button class="btn btn-primary btn-game-individual-Finish_h displayNone">\r\n			Go There !\r\n		</button>\r\n		<button class="btn btn-primary btn-game-individual-Create_h displayNone">\r\n			Create !\r\n		</button>\r\n	</div>'}),define("usercontrol/addevent/views/main",["require","text!usercontrol/addevent/templates/layout.html","facade","views","utils","vendor","sportorg/collections/sports_listall","location/collections/states","usercontrol/addgame/collections/teams","location/collections/cities","usercontrol/addgame/collections/teams_user","usercontrol/addgame/collections/teams","usercontrol/addgame/collections/games_search","usercontrol/addgame/models/team","usercontrol/addgame/models/team_add","usercontrol/addgame/models/game","usercontrol/addgame/models/uslgamelink","sportorg/models/game","usercontrol/dropdown/view/dropdown","usercontrol/location/views/get-view-location","component/forms","vendor/plugins/dateformat"],function(e,t){var n,r=e("facade"),i=e("views"),s=i.SectionView,o=e("utils"),u=o.lib.Channel,a=e("vendor"),f=a.Mustache,l=r.$,c=e("usercontrol/tag/models/basic_info"),h=e("sportorg/collections/sports_listall"),p=e("location/collections/states"),d=e("location/collections/cities"),v=e("usercontrol/addgame/collections/teams_user"),m=e("usercontrol/addgame/collections/teams"),g=e("usercontrol/addgame/models/team"),y=e("usercontrol/addgame/models/team_add"),b=e("usercontrol/addgame/models/game"),w=e("usercontrol/addgame/collections/games_search"),E=e("sportorg/models/game"),S=e("usercontrol/dropdown/view/dropdown"),x=e("vendor/plugins/dateformat"),T=e("component/forms"),N=e("usercontrol/addgame/models/uslgamelink");return s.extend({template:'<div class="add-event-container-h"></div>',gameData:{},teams:[],events:{"change .ddl-game-sports_h":"changeSport","keyup .txt-game-state_h":"keyupState","blur .txt-game-state_h":"changeState","keyup .txt-game-city_h":"keyupCity","blur .txt-game-city_h":"changeCity","keyup .txt-game-team_h":"keyupTeam","blur .txt-game-team_h":"changeTeam","keyup .txt-individual-game_h":"keyupIndividualGame","blur .txt-individual-game_h":"changeindividualGame","change .ddl-game-userteams_h":"changeUserTeam","click .btn-new-team-game_h":"showAddTeam","click .btn-ddl-team-game_h":"showDdlTeam","click .rdo-game-location_h":"showLocation","click .btn-game-Finish_h":"finishGame","change .txt-game-date_h":"CheckTeamControlsVisibility","click .btn-game-individual-Create_h":"createIndividualEvent","click .btn-game-individual-Finish_h":"goThereIndividualGame"},controls:{sectionAddSports:".section-Add-Sports_h",sectionDate:".section-game-date_h",txtGameDate:".txt-game-date_h",txtGameTime:".txt-game-time_h",spnTimePeriod:".spn-ddl-time-period_h",ddlTimePeriod:".ddl-time-period_h",spnSports:".span-ddl-sports_h",ddlSports:".ddl-game-sports_h",sectionTeams:".section-game-teams_h",ddlUserTeams:".ddl-game-userteams_h",spanddlteam:".span_ddl_team_h",spanddlteamtwo:".span_ddl_team_two_h",spanddlteamone:".span_ddl_team_one_h",btnNewTeam:".btn-new-team-game_h",btnDdlTem:".btn-ddl-team-game_h",sectionNewTeam:".section-new-team_h",txtState:".txt-game-state_h",txtCity:".txt-game-city_h",txtTeam:".txt-game-team_h",txtScore:".txt-score-team_h",btnFinish:".btn-game-Finish_h",sectionTeamOne:".team-one_h",sectionTeamTwo:".team-two_h",sectionScore:".section-score_h",sectionRadio:".section-game-radio_h",rdoTeamOne:".rdo-game-location-one-home_h",rdoTeamTwo:".rdo-game-location-two-home_h",rdoLocation:".rdo-game-location_h",sectionMainLocation:".section-main-location_h",sectionLocation:".div-game-location_h",txtLocationId:".txt-game-location-id_h",sectionIndividual:".section-individual-game_h",txtIndividualGame:".txt-individual-game_h",btnIndividualFinish:".btn-game-individual-Finish_h",txtIndividualLocation:".txt-individual-location_h",btnIndividualGameCreate:".btn-game-individual-Create_h",fieldMessage:".field-message_h",secSports:".section-game-sports_h",hdnSportsIdData:"hdn_sport_id",hdnSportsId:"#hdn_sport_id",hdnTimePeriodData:"hdn_time-period_h",hdnTimePeriod:"#hdn_time-period_h",indicator:".indicator_h"},attributes:{stateId:"stateid",schoolId:"schoolid",teamId:"teamid",playersId:"playerid",cityId:"cityid",sportId:"sportid",locationId:"locationid",gameId:"gameid"},inlineTemplates:{},messages:{dataNotExist:"Data does not exist . ",selectDateAndTime:"Please select date and time",selectTeam:"Please select team",selectScore:"Please enter score",selectLocation:"Please select location",selectLocationType:"Please select location type",gameFound:"Sweet ! This Event Already Exists ! ",enterEventName:"Please enter event name",selectSport:"Please select sport",selectValidTime:"Please enter valid time in format hh:mm (12 hours)"},tags:{individual:"individual",team:"team",rgxTime:/^(0?[1-9]|1[012])(:[0-5]\d)$/,rgxTimeWhole:/^(0?[1-9]|1[012])$/},initialize:function(e){s.prototype.initialize.call(this,e),n=this,n.setOptions(e),this.init()},render:function(){s.prototype.render.call(this),this.setupForm()},setupForm:function(){var e=this,t=new T({game_search:{type:"AutoComplete",label:"Event Name",form_values:{post_to_server:!0,keyNameInPayload:"event_name",subLabelInPayload:"full_date",serverKey:"event_name",serverDbField:"event_name",defaultValue:"",field_width:"80%",request_fields:[{key:"sports_id",value:function(){return e.sports_id}},{key:"game_name",value:function(e){return e.$el.val()}}],source_collection:w,request_finished:function(){console.log("request finished")},automaticFetch:!0,automaticFetchFn:function(e){console.log("auto fetch called",e)},callback:function(t,n){var r=e.$el.find(".add-event-container-h form");if(t>0){var i=new E({id:t});i.fetch(),l.when(i.request).done(function(){var e=i.get("payload").time_as_int,t=new Date(e);r.find('input[type="submit"]').val("Add Me to This Event"),r.find('input[name="games_id"]').val(i.get("payload").id),r.find('input[name="date_chooser"]').val(x(t,"mmm d, yyyy")).attr("disabled","disabled"),r.find('input[name="time_chooser"]').val(x(t,"h:MM")).attr("disabled","disabled"),r.find("textarea.location-h").html(i.get("payload").game_location).trigger("blur").attr("disabled","disabled"),r.find(".verify-address-h").trigger("click")})}else r.find('input[type="submit"]').val("Create Event"),r.find('input[name="games_id"]').val("0"),r.find('input[name="game_name"]').val(l('input[name="game_search"]').val()),r.find('input[name="date_chooser"]').removeAttr("disabled").val(""),r.find('input[name="time_chooser"]').removeAttr("disabled").val(""),r.find("textarea.location-h").removeAttr("disabled").html("")},afterSetValue:function(e){console.log("After set value called",e)}},validators:[]},date_chooser:{form_values:{post_to_server:!1,serverKey:"game_date",serverDbField:"gameDay",objectValuesToUpdate:["game_datetime"],getValue:function(){return this.$el.val()}},fieldClass:"date-picker-field",type:"Text",attr:{placeholder:"Enter Date","class":"txt-game-date_h txtDate"},showLable:!1,label:"Date",bindDatePicker:!0,changeEvent:function(){var e=new Date(this.getValue()),t=new Date;e!=null&&t>=e?l(".txt-score-team-h").removeClass("hidden"):l(".txt-score-team-h").addClass("hidden").val("")}},time_chooser:{form_values:{post_to_server:!1,serverDbField:"gameTime",serverKey:"game_time",objectValuesToUpdate:["game_datetime"]},type:"Text",fieldClass:"time-picker-field",attr:{placeholder:"Time","class":"txt-game-time_h hasDatepicker txtTime"},showLable:!1,label:"Time",validators:[{type:"required",message:"Please enter a time"},/^(0?[1-9]|1[012])(:[0-5]\d)?$/]},Day_light:{type:"DropDown",fieldClass:"ampm-field",form_values:{post_to_server:!1,serverKey:"game_ampm",objectValuesToUpdate:["game_datetime"],data:{records:[{payload:{name:"AM",value:"AM"}},{payload:{name:"PM",value:"PM"}}],recordId:"name",recordValue:"value",selectedValue:"PM"},elementId:e.controls.hdnTimePeriodData,callback:function(e){}},showLable:!1,label:""},game_datetime:{type:"Hidden",form_values:{serverDbField:"game_datetime",valueBindings:["date_chooser","time_chooser","Day_light"],serverKey:"game_datetime",post_to_server:!0}},event_location:{form_values:{serverKey:"locations_id",post_to_server:!0,serverDbField:"locations_id"},type:"Location",label:"Location",fieldClass:"location-chooser",validators:[{type:"required",message:"Please select location."}]},users_id:{form_values:{serverKey:"users_id",post_to_server:!0,value:e.user_id},type:"Hidden"},games_id:{form_values:{serverKey:"games_id",post_to_server:!0,value:0},type:"Hidden"},game_name:{form_values:{serverKey:"game_name",post_to_server:!0,value:0},type:"Hidden"},submit:{type:"Submit",fieldClass:"button-field",attr:{value:"Create Event"},showLable:!1,onSubmit:function(t){var r=n.commit();if(r)for(var i in r){var s=l("*[name="+i+"]"),o=s.position();s.parents(".common-modal #modalBody").animate({scrollTop:o.top},"500",function(){s.addClass("focus-error-animation"),setTimeout(function(){s.removeClass("focus-error-animation")},2e3)});break}else{var u=e.formValues.getFormValues(),a=e;console.log(u,a.$el.find('input[name="game_search"]'));if(u.game_name===""||u.game_name===0||u.game_name==="0")u.game_name=a.$el.find('input[name="game_search"]').val();if(u.games_id>0){c={games_id:u.games_id,sports_id:a.sports_id,users_id:a.user_id};var f=new N(c);f.save(),l.when(f.request).fail(function(t){var n=JSON.parse(t.responseText),r=n.exec_data.error_array;e.formValues.showServersErrors(r)}),l.when(f.request).done(function(e){routing.trigger(a.channel,e)})}else{var c={game_datetime:u.game_datetime,game_location:u.locations_id,games_id:u.games_id,sports_id:a.sports_id,event_name:u.game_name,users_id:a.user_id},h=new b(c);h.game_id=u.games_id,h.save({}),l.when(h.request).fail(function(t){var n=JSON.parse(t.responseText),r=n.exec_data.error_array;e.formValues.showServersErrors(r)}),l.when(h.request).done(function(e){var t=new N;t.save({games_id:e.payload.id,sports_id:a.sports_id,users_id:a.user_id},{success:function(t,n){console.log(a.channel),routing.trigger(a.channel,e)},error:function(e,t){alert("fail"),console.log(t)}})})}}}},button:{type:"Button",fieldClass:"button-field",attr:{value:"Cancel","class":"cancel-btn"},onClick:function(){routing.trigger("common-popup-close")},showLable:!1}},this.$el.find(".add-event-container-h")),n=t.form;this.formValues=t.formValues},afterRender:function(){},setOptions:function(e){this.user_id=e.user_id;if(!e.channel)throw new Error("call back channel is must for this");this.channel=e.channel,this.sports_id=e.sports_id||null},init:function(){n.setUpMainView()},setUpMainView:function(){var e=f.to_html(n.template,{});l(n.el).html(e)}})}),define("usercontrol/addevent/addevent",["require","text!usercontrol/addevent/templates/layout.html","facade","controller","models","views","user/models/basic_info","usercontrol/addevent/views/main"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=r.$,f=r._,l=u.debug,c=u.lib.Channel,h=o.LayoutView,p=e("user/models/basic_info"),d=e("usercontrol/addevent/views/main"),v=i.extend({cssArr:[base_url+"usercontrols/addevent/addevent.css"],events:{},initialize:function(e){return c("load:css").publish(this.cssArr),f.bindAll(this),e.id&&(this.id=e.id),e.sports_id&&(this.sports_id=e.sports_id),e.users_id&&(this.users_id=e.users_id),this.callback=e.callback,e.popup&&(this.popup=!0),this.init(),this},init:function(){this.popup?this.setupPopupLayout().render():this.setupLayout().render(),this.setUpMainView(),this.handleDeferreds()},setupLayout:function(){if(this.layout)return this.layout;var e=new h({scheme:this.scheme,destination:"#main",template:"",displayWhen:"ready"});return this.layout=e,this.layout},setupPopupLayout:function(){var e;this.scheme=[];var e=new h({scheme:this.scheme,destination:"#modalBody",template:"",displayWhen:"ready"});this.layout=e,this.modelBoxId="modal-popup-"+Math.floor(Math.random()*Math.random()*50*Math.random()*50);var t={};return t.height="500px",t.width="500px",t.title="Add Event",t.id=this.modelBoxId,routing.trigger("common-popup-open",t),this.layout},setUpMainView:function(){var e=this;routing.off("add-event-success"),routing.on("add-event-success",function(t){e.addTeamFunction(t)});var n=this;this.addGameView=new d({model:new p,template:t,name:"add-event-main",destination:this.popup?"#"+this.modelBoxId+" #modalBody":"#main",user_id:n.users_id,channel:"add-event-success",sports_id:this.sports_id,teams_id:this.teams_id}),this.scheme.push(this.addGameView),this.layout.render()},addTeamFunction:function(e){this.callback&&(routing.trigger("common-popup-close"),this.callback(e))}});return v}),define("text!usercontrol/detection/templates/browser.html",[],function(){return'{{#old_ie}}\r\n	<div class="curr-browser"><img src="http://cdn.athletez.com/resources/img/ie.png" /></div>\r\n	<div class="notify-text">It appears you\'re using an old version of IE ({{current_version}}).  Unfortunately our site is still in beta and we are not yet supporting versions older than IE 10.<br/><br/>If you\'re on Windows XP and are unable to upgrade to this version, please consider using Google Chrome, which is an outstanding browser that I recommend not just for this website, but for all websites.</div>\r\n	<div id="recommendations">\r\n		<span class="largeText">Here are the browsers we recommend (in order of preference)</span>\r\n		<div class="r-item"><a href="https://www.google.com/intl/en/chrome/browser/" target="_blank"><img src="http://cdn.athletez.com/resources/img/chrome.png" /><br/>Chrome 30+</a></div>\r\n		<div class="r-item"><a href="http://support.apple.com/downloads/#safari" target="_blank"><img src="http://cdn.athletez.com/resources/img/safari.png" /><br/>Safari 5+</a> </div>\r\n		<div><a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank"><img src="http://cdn.athletez.com/resources/img/ff.png" /><br/>Firefox 25+</a></div>\r\n	</div>\r\n{{/old_ie}}\r\n{{#old_ff}}\r\n	<div class="curr-browser"><img src="http://cdn.athletez.com/resources/img/ff.png" /></div>\r\n	<div class="notify-text">It appears you\'re using an old version of Firefox ({{current_version}}).  Unfortunately our site is still in beta and we are not yet supporting versions older than Firefox 25.  Please consider using Google Chrome, which is an outstanding browser that I recommend not just for this website, but for all websites.<br/><br/>You can disregard this message and try to use the site, but annoying stuff is going to happen and it will make you angry and us embarrassed.</div>\r\n	<div id="recommendations">\r\n		<span class="largeText">Here are the browsers we recommend (in order of preference)</span>\r\n		<div class="r-item"><a href="https://www.google.com/intl/en/chrome/browser/" target="_blank"><img src="http://cdn.athletez.com/resources/img/chrome.png" /><br/>Chrome 30+</a></div>\r\n		<div class="r-item"><a href="http://support.apple.com/downloads/#safari" target="_blank"><img src="http://cdn.athletez.com/resources/img/safari.png" /><br/>Safari 5+</a> </div>\r\n		<div><a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank"><img src="http://cdn.athletez.com/resources/img/ff.png" /><br/>Firefox 25+</a></div>\r\n	</div>\r\n{{/old_ff}}\r\n{{#mobile}}\r\n	<div class="curr-browser"><img src="http://cdn.athletez.com/resources/img/mobile.png" /></div>\r\n	<div>Looks like you\'re on a mobile browser.  Though it\'s high up on our priority list, Athletez is still in beta and we don\'t yet have support for mobile devices.  So trying to navigate on your phone will drive you insane.  If you don\'t want to go insane, maybe hold off on trying out Athletez until you get home.</div>\r\n{{/mobile}}\r\n\r\n<div style="float: left; margin: 10px;">Sorry for the inconvenience,<br/>Mike &amp; Max</div>'}),define("text!usercontrol/detection/browser.css",[],function(){return".curr-browser{\r\n    float:left;\r\n    width: 15%;\r\n}\r\n.curr-browser img{\r\n    width:100%;\r\n}\r\n.notify-text{\r\n    float: right;\r\n    width: 75%;\r\n    height: 120px;\r\n    padding: 10px;\r\n}\r\n#recommendations{\r\n    text-align: center;\r\n    display: block;\r\n    width: 100%;\r\n    float: left;\r\n    margin-top: 35px;\r\n}\r\n#recommendations span{\r\n    display: block;\r\n    font-size: 1.2em;\r\n    font-weight: bold;\r\n}\r\n#recommendations div{\r\n    display: inline-block;\r\n    width: 100px;\r\n    margin:9px;\r\n}\r\n#recommendations div img{\r\n}"}),define("browserpop/views/browser",["require","text!usercontrol/detection/templates/browser.html","text!usercontrol/detection/browser.css","facade","views","utils","vendor","browser"],function(e){var t,n=e("facade"),r=e("views"),i=r.SectionView,s=e("utils"),o=s.lib.Channel,u=e("vendor"),a=u.Mustache,f=n.$,l=r.BaseView,c=n.Backbone,h,p=e("text!usercontrol/detection/templates/browser.html");return c.View.extend({template:p,events:{"click .close":"closePopup"},cssArr:[base_url+"usercontrols/detection/browser.css"],initialize:function(e){o("load:css").publish(this.cssArr),h=this,h.data={},h.selectedOptions=[],h.setOptions(e),h.populateData()},populateData:function(){var e=this,t=setInterval(function(){try{f.browser.android,clearInterval(t);if(f.browser.ipad||f.browser.iphone||f.browser.android)e.data.mobile=!0;f.browser.msie&&(e.data.old_ie=!0),f.browser.mozilla&&(e.data.old_ff=!0),e.data.current_version=f.browser.version,e.render()}catch(n){}},500)},render:function(){var e=this,t=a.to_html(e.template,e.data),n={};return n.width="90%",n.height="500px",n.title="Your Browser Might be an Issue",n.html=t,n.id="Browser-detect",console.error(n),routing.trigger("common-popup-open",n),this},setOptions:function(e){for(var t in e)this[t]=e[t]},closePopup:function(){}})}),define("text!usercontrol/landing/templates/landing.html",[],function(){return'<div class="landing-spacer"></div><div id="landing-info">\r\n	<div id="landing-header">{{headline}}</div>\r\n	<div id="site-info">\r\n		{{text}}\r\n	</div>\r\n</div>\r\n<div id="reg-landing"></div>\r\n\r\n<div id="alternative-actions" style="height:100px;">\r\n	<a href="javascript:void(0);" id="browse">Browse Athletez.com</a>\r\n</div>'}),define("text!compcss/landing.css",[],function(){return".curr-browser{\r\n    float:left;\r\n    width: 15%;\r\n}\r\n.curr-browser img{\r\n    width:100%;\r\n}\r\n.notify-text{\r\n    float: right;\r\n    width: 75%;\r\n    height: 120px;\r\n    padding: 10px;\r\n}\r\n#recommendations{\r\n    text-align: center;\r\n    display: block;\r\n    width: 100%;\r\n    float: left;\r\n    margin-top: 35px;\r\n}\r\n#recommendations span{\r\n    display: block;\r\n    font-size: 1.2em;\r\n    font-weight: bold;\r\n}\r\n#recommendations div{\r\n    display: inline-block;\r\n    width: 100px;\r\n    margin:9px;\r\n}\r\n#recommendations div img{\r\n}\r\n#landing-info{\r\n    margin-top:50px;\r\n    width: 100%;\r\n    margin: auto;\r\n    padding:10px 40px;\r\n    text-align: center;\r\n    background-color: rgba(0,0,0,.5);\r\n}\r\n#alternative-actions{\r\n    text-align: center;\r\n    margin: auto;\r\n    margin-top: 40px;\r\n    width: 700px;\r\n}\r\na#browse{\r\n    color: white;\r\n    width: 350px;\r\n}\r\n#landing-info li, #landing-info div{\r\n    color: #EFEFEF;\r\n    text-shadow: 4px 1px 1px rgba(0, 0, 0, 0.70);\r\n}\r\n#landing-info #landing-header{\r\n    line-height: 60px;\r\n    width: 100%;\r\n    font-size: 5em;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    text-shadow: 4px 3px 3px rgba(0, 0, 0, 0.70);\r\n    padding: 20px 0px 0px 0px;\r\n    margin:auto;\r\n}\r\n#landing-header:empty{\r\n    background-image:url('../images/logo_large.png');\r\n    background-repeat: no-repeat;\r\n    height: 150px;\r\n    max-width: 800px;\r\n}\r\n#landing-info #site-summary{\r\n    list-style-type: circle;\r\n    font-size: 1.6em;\r\n}\r\n#landing-info #site-summary li{\r\n   line-height: 30px;\r\n    margin-top:10px;\r\n}\r\n#site-info{\r\n    font-size: 2.0em;\r\n    font-weight: bold;\r\n    line-height: 38px;\r\n    position: relative;\r\n    width: 90%;\r\n    margin: auto;\r\n    text-shadow: 2px 2px 2px rgba(255, 255, 255, 0.80);\r\n}\r\n#landing-info hr{\r\n    border:0;\r\n    height: 1px;\r\n    margin: 20px auto;\r\n    background-color: white;\r\n    width: 75%;\r\n    opacity: .5;\r\n}\r\n#reg-landing{\r\n    width: 280px;\r\n    margin:15px auto;\r\n}\r\n#reg-landing #mainreg{\r\n    background: none;\r\n}\r\n#reg-landing #regcontainer{\r\n    width: 100%;\r\n}\r\n#reg-landing #mainreg{\r\n    width:100%;\r\n}\r\n#reg-landing .regor {\r\n    color: white;\r\n    margin: 15px 0 0 0;\r\n    font-size: 1.2em;\r\n    font-weight: bolder;\r\n}\r\n#reg-landing #fbpane {\r\n    width: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n    cursor: pointer;\r\n    border-style: none;\r\n    height: 45px;\r\n    position: relative;\r\n    background: #68659c url(../images/facebook-f.png) 94% no-repeat;\r\n}\r\n#reg-landing #fbpane #label{\r\n    margin: 0;\r\n    position: absolute;\r\n    background-color: #6b74b7;\r\n    font-size: 1em;\r\n    padding: 12px;\r\n    width: 75%;\r\n    float: left;\r\n    height: 20px;\r\n}\r\n#reg-landing #regpanemain {\r\n    width: 100%;\r\n}\r\n#reg-landing #firstregbase {\r\n    padding:0;\r\n    float: none;\r\n    width: 100%;\r\n}\r\n#reg-landing #firstregbase input{\r\n    width: 90%;\r\n    margin: 20px 0 0 0;\r\n    padding: 8px 5%;\r\n    position: relative;\r\n}\r\n#reg-landing .signupsubmit{\r\n    margin-top:0;\r\n    padding-top: 10px;\r\n}\r\n#reg-landing .signupsubmit input{\r\n    width: 48% !important;\r\n    color: white;\r\n    font-size: 20px;\r\n    border-style: none;\r\n    height: 40px;\r\n}\r\n#reg-landing .signupsubmit input:first-child{\r\n    float: left;\r\n    background-color: #9DCA3C;\r\n}\r\n#reg-landing .signupsubmit input:last-child{\r\n    float: right;\r\n    background-color: #1AA0AE;\r\n}\r\n.landing-spacer{\r\n    margin: auto; text-align: center; height: 30px;\r\n}\r\n@media only screen and (min-width: 320px) and (max-width: 767px) {\r\n    #alternative-actions{\r\n        text-align: center;\r\n        margin: auto;\r\n        margin-top: 40px;\r\n        width: 50%;\r\n    }\r\n    #site-info {\r\n        font-size: 1.0em;\r\n        font-weight: bold;\r\n        line-height: 18px;\r\n        position: relative;\r\n        width: 90%;\r\n        margin: auto;\r\n        text-shadow: 2px 2px 2px rgba(255, 255, 255, 0.80);\r\n    }\r\n    #landing-header:empty{\r\n        background-image:url('../images/logo_small.png');\r\n        height: 80px;\r\n        max-width: 300px;\r\n    }\r\n    #landing-info #landing-header{\r\n        font-size:2em;\r\n        padding: 0;\r\n    }\r\n    #landing-info hr{\r\n        display: none;\r\n    }\r\n    #landing-info{\r\n        width:100%;\r\n        padding:10px 0 10px 0;\r\n        font-size:.8em;\r\n        background-color: rgba(0,0,0,.5);\r\n    }\r\n    \r\n    .landing-spacer{\r\n        height: 10px;\r\n    }\r\n    .register-wrapper-h {\r\n        min-height: 600px;\r\n    }\r\n}"}),define("usercontrol/landing/models/fb-user",["models","facade"],function(e,t){var n=e.BaseModel,r=t.$,i=t._;return n.extend({fbUserId:undefined,url:function(){return"/api/fbinvite/basics?fbid="+this.fbUserId}})}),define("text!packages/invite/templates/invite.html",[],function(){return'<button id="acceptInvite" class="invite_buttons accept">Accept</button>\r\n<button id="declineInvite" class="invite_buttons decline">No Thanks</button>'}),define("packages/invite/views/invite",["require","text!packages/invite/templates/invite.html","facade","views","utils","common/models/entparse","packages/invite/models/invite","vendor"],function(e){var t=e("facade"),n=t._,r=e("views"),i=r.SectionView,s=e("utils"),o=s.lib.Channel,u=e("common/models/entparse"),a=e("packages/invite/models/invite"),f=e("vendor"),l=r.BaseView,c=t.Backbone,h,p=e("text!packages/invite/templates/invite.html");return l.extend({template:p,events:{"click #acceptInvite":"acceptInvite","click #declineInvite":"declineInvite"},cssArr:["packages/invite/invite.css"],initialize:function(e){o("load:css").publish(this.cssArr),this.data=e,console.log("ACCEPT INVITE MODEL",this.model),this.render()},acceptInvite:function(e){var t=this;$(e.target).html("Accepting"),this.model.save({},{success:function(e,n){e.loadInvitePage(),t.$el.parents(".register-wrapper-h").slideUp("slow")}})},declineInvite:function(e){var t=this;t.$el.parents(".register-wrapper-h").slideUp("slow")},render:function(){console.log(this.el),this.$el.html(n.template(p,this.data)),routing.trigger("center-landing-image",{})}})}),define("usercontrol/landing/views/landing",["require","text!usercontrol/landing/templates/landing.html","text!compcss/landing.css","signup/models/registerbasic","signup/views/registerbasic","facade","views","utils","usercontrol/landing/models/fb-user","common/models/entparse","vendor","packages/invite/views/invite"],function(e){var t=e("facade"),n=e("views"),r=n.SectionView,i=e("utils"),s=e("signup/models/registerbasic"),o=e("signup/views/registerbasic"),u=e("usercontrol/landing/models/fb-user"),a=e("common/models/entparse"),f=e("packages/invite/views/invite"),l=i.lib.Channel,c=e("vendor"),h=c.Mustache,p=t.$,d=t._,v=n.BaseView,m=t.Backbone,g,y=e("text!usercontrol/landing/templates/landing.html");return v.extend({template:y,events:{"click #browse":"closePopup","click #sign-in":"signIn","click #browse":"scrollToContent"},cssArr:[base_url+"css/components/landing.css"],initialize:function(e){console.log("LANDING PAGE",e),l("load:css").publish(this.cssArr);var t=this;t.data={},t.selectedOptions=[],t.setOptions(e),t.setDefaults();try{typeof e=="object"&&!d.isUndefined(e.invite_model)?(this.invite_model=e.invite_model,console.log(this.invite_model),t.getUserData(this.invite_model)):t.render()}catch(n){console.error(n)}},checkForUser:function(){return d.isUndefined(this.invite_model)?!d.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1:(console.log("INVITE MODEL",this.invite_model,this.invite_model.get("payload").force_login),!d.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn||this.invite_model.get("payload").force_login==="true"||this.invite_model.get("payload").force_login===!0?!0:!1)},setDefaults:function(){this.data={headline:"",text:"And we mean all athletes.  It's simple: create a profile, connect with your team, share your games, post your highlights, get discovered."}},getUserData:function(e){var t=this;console.log(e);var n=e.get("payload");console.log(n);var r=new a({mpay:n.invite_to_obj,display_width:1920,display_height:1024}),i=r.parsedData;!d.isUndefined(n.fb_user_data)&&!d.isUndefined(n.fb_user_data.first_name)&&(this.data.headline="Hey "+n.fb_user_data.first_name,this.data.email=n.invite_email?n.invite_email:null),t.data.text=n.users_obj.name+" invited you to "+n.invite_type+" "+i._label+".  ",this.checkForUser()||(t.data.text+="Sign up now to get started!");var s={};typeof (i.imgData=="object")&&(s.background_image=i.imgData.url),console.log(i),t.render(s)},render:function(e){var t=this,n=h.to_html(t.template,t.data);this.$el=p(".register-wrapper-h"),console.log(n),this.$el.length||(p("body header").after('<div class="register-wrapper-h"></div>'),this.$el=p(".register-wrapper-h"),console.log(this.$el)),routing.off("hide-landing"),routing.on("hide-landing",t.hideLanding);var e=e||{};return e.width="100%",e.height="100%",e.title="&nbsp;",e.html=n,e.id="landing",e.fullPage=!0,e.addClass=["noBorder"],e.background_image==undefined&&(e.background_image=routing.isNative?base_url+"css/images/7.jpg":"http://athletez.s3.amazonaws.com/resources/img/landing/7.jpg"),t.background_pic=new Image,t.background_pic.src=e.background_image,t.background_pic.onload=function(){console.log("IMAGE DATA",this,t.background_pic.height,t.background_pic.width),t.$el.html(n),t.$el.css({background:"url("+e.background_image+") no-repeat","background-size":"cover","background-position-y":"20%"}),routing.mobile&&t.$el.css({"background-position":"74% 0"}),routing.off("center-landing-image"),routing.on("center-landing-image",function(){t.centerBackgroundVertically()}),t.checkForUser()?t.showInvite():t.showReg()},this},centerBackgroundVertically:function(){var e=this;setTimeout(function(){var t=e.$el.height(),n=e.$el.width(),r=e.background_pic.height,i=e.background_pic.width,s=n/i,o=s*r,u=o-t;if(u>0){var a=u/2;e.$el.css({"background-position-y":"-"+a+"px"})}console.log(t,n,r,i,s,o,u)},0)},scrollToContent:function(e){p("html, body").animate({scrollTop:p("#main").offset().top},700)},setOptions:function(e){for(var t in e)this[t]=e[t]},showReg:function(){var e=this;this.regModel=new s,this.regView=new o({model:this.regModel,name:"Select Registration Type",destination:"#reg-landing",openAsaPage:!0,data:this.data,invite_hash:this.invite_model&&d.isObject(this.invite_model)?this.invite_model.get("payload").sechash:!1,showOnLanding:!0,fb_invite:this.userId!==undefined?this.userId:!1})},hideLanding:function(){p("div.register-wrapper-h").slideUp("slow")},showInvite:function(){var e=new f({model:this.invite_model,el:p("#reg-landing")})},signIn:function(e){this.regView.showLogin(e)},closePopup:function(){console.log("close popup"),routing.trigger("common-popup-close")}})}),define("text!fbinvite/templates/layout.html",[],function(){return'\r\n		<div id="image-wrap-h" class="search-result-outer">\r\n		</div>\r\n'}),define("text!packages/fbinvite/templates/image-item.html",[],function(){return'<a href="javascript: void(0);" data-index="{{index}}" data-id="{{id}}" class="image-outer-h">\r\n	<div class="image-item-container">\r\n		<img itemprop="image" class="list-thumbnail" src="{{large}}" alt="{{name}}"/>\r\n\r\n		{{#invited}}\r\n		<div class="action-section">\r\n			<div class="action-block left-block vote link-disabled"><span>Already Invited</span></div>\r\n		</div>\r\n		{{/invited}}\r\n		{{^invited}}\r\n		<div class="action-section">\r\n			<div class="action-block left-block follow invite-h" data-id="{{id}}" ><span>Invite</span></div>\r\n		</div>\r\n		{{/invited}}\r\n\r\n		<div class="detail-view {{#_detailclass}}{{_detailclass}}{{/_detailclass}}">\r\n			<h6>{{name}}</h6>\r\n		</div>\r\n	</div>\r\n</a>'}),define("packages/fbinvite/models/invite",["models","facade"],function(e,t){var n=e.BaseModel,r=t.$,i=t._;return n.extend({idAttribute:"id",url:function(){return"/api/fbinvite/invite/"}})});var CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;e=e.sigBytes,this.clamp();if(r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),u=n.enc={},a=u.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},f=u.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return new o.init(n,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},c=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,u=i/(4*s),u=t?e.ceil(u):e.max((u|0)-this._minBufferSize,0);t=u*s,i=e.min(4*t,i);if(t){for(var a=0;a<t;a+=s)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return new o.init(a,i)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}});var h=n.algo={};return n}(Math);(function(e){for(var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,n=t.algo,s=[],o=[],u=function(e){return 4294967296*(e-(e|0))|0},a=2,f=0;64>f;){var l;e:{l=a;for(var c=e.sqrt(l),h=2;h<=c;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(8>f&&(s[f]=u(e.pow(a,.5))),o[f]=u(e.pow(a,1/3)),f++),a++}var p=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],u=n[3],a=n[4],f=n[5],l=n[6],c=n[7],h=0;64>h;h++){if(16>h)p[h]=e[t+h]|0;else{var d=p[h-15],v=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+p[h-16]}d=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&f^~a&l)+o[h]+p[h],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),c=l,l=f,f=a,a=u+d|0,u=s,s=i,i=r,r=d+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+u|0,n[4]=n[4]+a|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+c|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)})(Math),define("vendor/plugins/sha256",function(){}),define("packages/fbinvite/views/image-item",["vendor","views","utils","text!packages/fbinvite/templates/image-item.html","packages/fbinvite/models/invite","utils/storage","chrome/views/header","component/fb","vendor/plugins/sha256"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache,a=require("votes/models/vote"),f=require("utils/storage"),l=require("packages/fbinvite/models/invite"),c=require("chrome/views/header"),h=require("component/fb"),p=require("common/models/entparse");return i=o.extend({tagName:"li",className:"image",events:{},initialize:function(e){console.log(e),this.template=r,this.FBoptions=e.FBoptions||{};if(e.length)for(var t in e)this[t]=e[t];if(this.FBoptions.invite_type===undefined||this.FBoptions.invite_type===null)this.FBoptions.invite_type="join";this.FBComponent=new h},checkForUser:function(){return!_.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},render:function(){var e=this,t=this.model.get("payload"),n=u.to_html(this.template,t);this.$el.html(n);var r="120px",i="92px";return this.$el.find(".image-item-container").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+i}),s(this).find(".detail-view.game").css({bottom:"-"+r})}),$nopic_words_div=this.$el.find(".game-tile"),$nopic_words_div.length&&($num_words=$nopic_words_div.text().length,console.log($num_words),$num_words<3?$nopic_words_div.css({"font-size":"5em",top:"90px",left:"60px"}):$num_words<5?$nopic_words_div.css({"font-size":"4em",top:"90px",left:"40px"}):$num_words<25?$nopic_words_div.css("font-size","2em"):$num_words<30?$nopic_words_div.css({"font-size":"1.7em",top:"65px"}):$num_words<40?$nopic_words_div.css({"font-size":"1.5em",top:"50px"}):$nopic_words_div.css("font-size","1em")),this.$el.find(".image-item-container").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this.$el.find(".circle").mouseover(function(){s(this).parent().find(".detail-view").css({bottom:"0px"}),s(this).parent().find(".action-block").css({opacity:90})}),this.$el.find(".invite-h").click(function(t){e.invite(t)}),this},postMessage:function(e){this.invitehash=CryptoJS.SHA256((new Date).getTime()+"_"+this.model.get("payload").id);var t=this,n={};n.link="#acceptfbinvite/"+this.invitehash,n.name="Come join Me on Atheletez",n.picture="http://cdn.athletez.com/resources/img/athletez_logo_small.png",n.description="You have been invited to sign up for http://athletez.com",n.success=function(){t.callModel(e)},n.error=function(){alert("Some Error Occured. Please try again.")},n.to=this.model.get("payload").id,this.FBComponent.sendInvite(n)},callModel:function(e){var t=new l;t.set({fbid:this.model.get("payload").id}),console.log(this.FBoptions),this.FBoptions&&t.set({invite_type:this.FBoptions.invite_type,sechash:this.invitehash.toString(CryptoJS.enc.Base64),invite_to:{subject_id:this.FBoptions.subject_id,enttype_id:this.FBoptions.enttypes_id}}),t.save(),s.when(t.request).done(function(){s(e.target).addClass("link-disabled")})},invite:function(e){e.preventDefault(),e.stopPropagation();if(!this.checkForUser()){routing.trigger("showSignup");return}this.postMessage(e)}}),i}),define("text!packages/fbinvite/templates/image-list.html",[],function(){return'<ul class="image-list">\r\n</ul>\r\n<div class="clear"><a href="javascript: void(0);" class="see-more-h">More</a></div>\r\n'}),define("packages/fbinvite/views/image-list",["facade","views","utils","packages/fbinvite/views/image-item","text!packages/fbinvite/templates/image-list.html","votes/models/follow"],function(e,t,n,r,i){var s,o,u=e.$,a=e._,f=require("vendor"),l=require("votes/models/follow"),c=n.lib.Channel,h=t.CollectionView,p=t.SectionView,d=f.Mustache;return o=h.extend(p.prototype),s=o.extend({__super__:h.prototype,template:i,_tagName:"li",_className:"image",page:0,FBoptions:{},page_limit:20,listView:".image-list",_view:r,events:{"click .see-more-h":"seeMore"},renderTemplate:function(){var e=d.to_html(this.template,{target:this.target_id});return this.$el.html(e),this},checkForUser:function(){return!a.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},initialize:function(e){e.name?this.name=e.name:this.name="image list",this.renderTemplate(),this.FBoptions=e.FBOptions,this.pageName=e.pageName?e.pageName:"profile",e.collecton&&(this.collection=e.collection),this.data=e.data,this.controllerObject=e.controllerObject;var t=this;t.allData=this.collection.toArray();var n=t.allData.length;t.start=0,t.end=t.page_limit,t.page_limit=8,t.seeMore(),h.prototype.initialize.call(this,e);if(!this.collection)throw new Error("ImageListView expected options.collection.");a.bindAll(this),this.addSubscribers()},seeMore:function(e){var t=this.allData.length;e&&(this.start=this.end,this.end=this.end+this.page_limit),t<=this.end&&this.$el.find(".see-more-h").hide(),e?this.collection.add(this.allData.slice(this.start,this.end)):this.collection.reset(this.allData.slice(this.start,this.end)),this.page++,e&&this.addSubscribers&&this.addSubscribers()},childViews:{}}),s}),define("fbinvite/views/image-list",["facade","utils","packages/fbinvite/views/image-list"],function(e,t,n){var r;return r=n.extend({imagetype:"large_thumb",name:"Image List",setupAddView:function(){},afterRender:function(){}}),r}),define("fbinvite/collections/fbinvite",["facade","media/collections/images","utils","signup/views/facebooksignup"],function(e,t,n,r){return t.extend({url:function(){return testpath?testpath+"user/fbfriends":"/api/user/fbfriends"},fetchError:function(e,t){console.log(e,t),ga("send","event","popup","open","FB Auth Token Renew");if(!confirm("Your Facebook Authentication has timed out.  Want to try and renew it?"))return;var n=new r;n.signupFacebook("linkWithFB")}})}),define("text!pages/fbinvite/templates/invitetypes.html",[],function(){return'<div class="inviteTypes">\r\n	<ul class="large-menu">\r\n		<li>\r\n			<a class="email-invite-h">\r\n				<div class="icon email-invite"></div>\r\n				<span class="option-title">Email Invites</span>\r\n				<span class="option-desc">Send invites to an entire email list</span>\r\n			</a>\r\n		</li>\r\n		<li>\r\n			<a class="facebook-message-invite-h">\r\n				<div class="icon facebook-invite"></div>\r\n				<span class="option-title">Facebook Friends</span>\r\n				<span class="option-desc">Send invitations to specific facebook friends.</span>\r\n			</a>\r\n		</li>\r\n		<li>\r\n			<a class="facebook-timeline-invite-h">\r\n				<div class="icon social-post-invite"></div>\r\n				<span class="option-title">Open Invites</span>\r\n				<span class="option-desc">Post an open invitation that anybody can click on over facebook, twitter, google+, or tumblr.</span>\r\n			</a>\r\n	</ul>\r\n\r\n\r\n\r\n</div>'}),define("text!pages/fbinvite/templates/invitetypesmenu.html",[],function(){return'<div id="inviteTypesMenu" class="">\r\n	<a id="inviteMainMenu">Back to Main Menu</a>\r\n</div>'}),define("fbinvite/views/invitetypes",["vendor","views","utils","facade","text!pages/fbinvite/templates/invitetypes.html","text!pages/fbinvite/templates/invitetypesmenu.html"],function(e,t,n,r,i,s){var o=r.$,u=r._,a=t.BaseView,f=r.Backbone;return a.extend({template:i,model:f.Model.extend(),events:{"click .facebook-message-invite-h":"fbMessageInvite","click .email-invite-h":"emailInvite","click .facebook-timeline-invite-h":"fbTimelineInvite"},initialize:function(e){this.setOptions(e),this.data=e,this.controller=e.controller,console.log(this.template,this.model,this.$el),this.render()},render:function(){this.$el.html(u.template(this.template,this.data))},fbMessageInvite:function(e){this.controller.execRenderFriends()},emailInvite:function(e){this.controller.setupEmailInvite()},fbTimelineInvite:function(e){this.controller.setupSocialShareInvite()}})}),define("text!fbinvite/templates/invitetypesmenu.html",[],function(){return'<div id="inviteTypesMenu" class="">\r\n	<a id="inviteMainMenu">Back to Main Menu</a>\r\n</div>'}),define("fbinvite/views/invitetypesmenu",["fbinvite/views/invitetypes","text!fbinvite/templates/invitetypesmenu.html"],function(e,t){return e.extend({template:t,events:{"click #inviteMainMenu":"showMainMenu"},showMainMenu:function(e){this.controller.setupInviteTypesView()}})}),define("text!pages/fbinvite/templates/emailinvite.html",[],function(){return'	<div class="label">\r\n		<span class="main">Email Addresses:</span><br/>\r\n		<span class="sublabel">You can enter a single email address or many comma separated email addresses.</span>\r\n	</div>\r\n	<textarea class="emaillist" placeholder="person1@email.com, person2@email.com, ..."></textarea>\r\n\r\n	<div id="emailAddresses">\r\n\r\n	</div>\r\n	<button class="send-email-invite-h">Send Invites</button>'}),define("text!pages/fbinvite/templates/emaillist.html",[],function(){return'<% if(data.length){ %>\r\n<ul class="recipient_list">\r\n	<% for(var i=0;i < data.length;i++){ %><li data-address="<%=data[i] %>">\r\n		<%= data[i] %>\r\n	</li><% } %>\r\n</ul><% } %>'}),define("fbinvite/models/emailinvite",["models","facade"],function(e,t){var n=e.BaseModel,r=t.$,i=t._;return n.extend({url:function(){return"/api/invite/emailinvite/"}})}),define("fbinvite/views/emailinvite",["vendor","views","utils","facade","text!pages/fbinvite/templates/emailinvite.html","text!pages/fbinvite/templates/emaillist.html","fbinvite/models/emailinvite"],function(e,t,n,r,i,s,o){var u=r.$,a=r._,f=t.BaseView,l=r.Backbone;return f.extend({template:i,model:new o,events:{"keyup textarea":"parseEmailList","click .send-email-invite-h":"sendInvites"},initialize:function(e){this.setOptions(e),this.data=e,this.controller=e.controller,console.log(e),e.FBOptions&&this.model.set({invite_type:e.FBOptions.invite_type,invite_to:{subject_id:e.FBOptions.subject_id,enttype_id:e.FBOptions.enttypes_id}}),this.render()},render:function(){this.$el.html(a.template(this.template,this.data))},GetEmailsFromString:function(e){var t=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi;return e.match(t)},concatUnique:function(e){var t=e.concat();for(var n=0;n<t.length;++n)if(t[n]==0||t[n]==undefined||t[n]==null)t.splice(n,1);else for(var r=n+1;r<t.length;++r)(t[n]===t[r]||t[n]==0||t[n]==undefined||t[n]==null)&&t.splice(r--,1);return t},parseEmailList:function(e){var t=u(e.target).val(),n=t.split(","),r=[];for(var i=0;i<n.length;i++)r=this.concatUnique(r.concat(this.GetEmailsFromString(n[i])));this.model.set({emailList:r}),this.drawEmailList()},drawEmailList:function(e){this.$el.find("div#emailAddresses").html(a.template(s,{data:this.model.get("emailList")})),this.$el.find("button.send-email-invite-h").html("Send "+this.model.get("emailList").length+" Invites").removeAttr("disabled")},sendInvites:function(e){var t=this;u(e.target).html("Sending...").attr("disabled","disabled"),this.model.save({},{success:function(n,r){u(e.target).html("Sent"),t.$el.find("textarea").val(""),a.each(n.get("payload"),function(e){console.log(e.invite_email,t.$el.find('#emailAdresses li[data-address="'+e.invite_email+'"]')),t.$el.find('li[data-address="'+e.invite_email+'"]').addClass("sent")})},error:function(e){}})}})}),define("text!pages/fbinvite/templates/socialshare.html",[],function(){return'<ul class="large-menu">\r\n	<li class="share-on-h " data-share="facebook">\r\n		<a href="javascript: void(0);">\r\n			<div class="icon facebook-invite"></div>\r\n			<span class="option-title">Facebook</span>\r\n			<span class="option-desc">Post an open invitation on your facebook timeline</span>\r\n		</a>\r\n	</li>\r\n	<li class="share-on-h " data-share="twitter">\r\n		<a href="javascript: void(0);">\r\n			<div class="icon social-twitter"></div>\r\n			<span class="option-title">Twitter</span>\r\n			<span class="option-desc">Tweet an open invitation</span>\r\n		</a>\r\n	</li>\r\n	<li class="share-on-h" data-share="gplus">\r\n		<a href="javascript: void(0);" >\r\n			<div class="icon social-gplus"></div>\r\n			<span class="option-title">Gooogle +</span>\r\n			<span class="option-desc">Post an open invitation on google+.  Then post on facebook.</span>\r\n		</a>\r\n	</li>\r\n	<li class="share-on-h" data-share="tumbler">\r\n		<a href="javascript: void(0);">\r\n			<div class="icon social-tumbler"></div>\r\n			<span class="option-title">Tumblr</span>\r\n			<span class="option-desc">Create a tumbr blog post with an image and open invitation</span>\r\n		</a>\r\n	</li>\r\n</ul>'}),define("fbinvite/models/openinvite",["models","facade"],function(e,t){var n=e.BaseModel,r=t.$,i=t._;return n.extend({url:function(){return"/api/invite/openinvite/"}})}),define("fbinvite/views/socialshare",["vendor","views","utils","facade","text!pages/fbinvite/templates/socialshare.html","component/fb","component/share","fbinvite/models/openinvite","common/models/entparse"],function(e,t,n,r,i,s,o,u,a){var f=r.$,l=r._,c=t.BaseView,h=r.Backbone;return c.extend({template:i,events:{"click .share-on-h":"shareOn"},athletezDesc:"Athletez.com is a social network of athletez from all different sports, ages and skill levels.  Athletez is a free and easy way to build a personal athletic profile, upload media from events, games, or training sessions, and connect with teammates or training partners.  Be more involved in your athletic life with Athletez.com",initialize:function(e){this.setOptions(e),this.data=e,this.controller=e.controller,this.model=new u,e.FBOptions&&this.model.set({invite_type:e.FBOptions.invite_type,invite_to:{subject_id:e.FBOptions.subject_id,enttype_id:e.FBOptions.enttypes_id}}),console.log(this.template,this.model,this.$el),this.render()},render:function(){this.$el.html(l.template(this.template,this.data))},shareOn:function(e){e.stopPropagation();var t=f(e.currentTarget).data("share"),n=this;this.model.isNew()?this.model.save({},{success:function(e,r){n.model.id=e.get("payload").id,n.setData(e),t&&l.isFunction(n[t])&&n[t]()}}):(l.isUndefined(this.share)&&this.setData(this.model),t&&l.isFunction(n[t])&&n[t]())},setData:function(e){var t=new a({mpay:e.get("payload").invite_to_obj});this.share={caption:"Come "+e.get("payload").invite_type+' "'+t.parsedData._label+'" on Athletez.com',name:t.parsedData._label,image_path:t.parsedData.imgData.url,invite_type:e.get("payload").invite_type}},getLink:function(e){var t="#acceptfbinvite/"+this.model.get("payload").sechash;return console.log(t),t},twitter:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"twitter"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},gplus:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"gplus"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},tumbler:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"tumbler"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},facebook:function(){var e=this,t=this.share,n=this.getLink(t),r=t.name,i=t.caption,o=t.image_path,u=this.athletezDesc,a=function(){var e=new s;e.shareOnFacebook({method:"feed",name:r,link:n,picture:o,caption:i,description:u,success:function(){alert("Shared successfully.")},error:function(){alert("Not Shared successfully.")}})};e.checkForUser()?a():routing.trigger("showSignup",function(e){a()})},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},destroy_view:function(){delete this.model,this.model={},this.undelegateEvents(),this.$el.removeData().unbind()}})}),define("pages/fbinvite",["require","text!fbinvite/templates/layout.html","facade","controller","models","views","utils","fbinvite/views/image-list","fbinvite/collections/fbinvite","media/models/image","signup/views/facebooksignup","fbinvite/views/invitetypes","fbinvite/views/invitetypesmenu","fbinvite/views/emailinvite","fbinvite/views/socialshare"],function(e,t){var n,r=e("facade"),i=e("controller"),s=e("models"),o=e("views"),u=e("utils"),a=o.LayoutView,f=r.$,l=r._,c=u.debug,h=u.lib.Channel,p=[base_url+"pages/registration/registration.css",base_url+"pages/signup/css/signupstyle.css",base_url+"css/style.jrac.css",base_url+"pages/fbinvite/fbinvite.css"],d=e("fbinvite/views/image-list"),v=e("media/models/image"),m=e("fbinvite/collections/fbinvite"),g=e("signup/views/facebooksignup"),y=e("fbinvite/views/invitetypes"),b=e("fbinvite/views/invitetypesmenu"),w=e("fbinvite/views/socialshare"),E=e("fbinvite/views/emailinvite");return i.extend({initialize:function(e){return this.popup=e.popup?!0:!1,this.options=e.options,h("load:css").publish(p),l.bindAll(this),this.ajaxCalls=[],this.handleOptions(e),this.init(),this},init:function(){ga("send","event","FB Invite","Header","Loading reg header"),this.modelHTML='<div id="fbInvite" class="modal hide fade model-popup-h"><div class="closer"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">	&times;</button></div>&nbsp;<div id="search-area" class=""></div><div id="invite-types-menu" class=""></div><div id="modalBody" class="modal-body page-content-h"></div></div>',this.setupLayout().render(),this.setupInviteTypesView()},execRenderFriends:function(){this.refreshPage(),this.createData(),f("#search-area").html('<input type="search" class="search-friends-h" placeholder="Search your friends" />'),this.handleDeferreds()},createData:function(){var e=this;this.images=new m,this.images.targetElement="#image-wrap-h",this.ajaxCalls.push(this.images.fetch({error:function(t,n){ga("send","event","popup","open","FB Auth Token Renew");if(confirm("Your Facebook Authentication has timed out.  Want to try and renew it?")){var r=new g;r.signupFacebook("linkWithFB",e.execRenderFriends)}else f("#fbInvite .close").trigger("click")}}))},handleDeferreds:function(){var e=this;f.when(this.images.request).done(function(){e.images.allRecords=e.images.toJSON(),e.setupFriendsList(),f(".search-friends-h").keyup(function(){var t=f(this).val(),n,r=new RegExp(t,"i"),i=e.images.allRecords.length,s=[];for(var n=0;n<i;n++)r.test(e.images.allRecords[n].payload.name)&&s.push(e.images.allRecords[n]),e.images.models[n]&&e.images.models[n].destroy();s.length&&(e.images.reset(s),e.setupFriendsList())})})},refreshPage:function(){var e;this.selectOrgView&&(f(this.selectOrgView.destination).html(""),e=f.inArray(this.selectOrgView,this.scheme),~e&&this.scheme.splice(e,1))},setupFriendsList:function(){var e=this,t;this.imageListView&&(f(this.imageListView.destination).html(""),t=f.inArray(this.imageListView,this.scheme),~t&&this.scheme.splice(t,1)),this.setupInviteTypesMenuView(),this.imageListView=new d({collection:this.images,destination:"#image-wrap-h",target_id:this.id,user_id:this.id,FBOptions:this.options,name:"images View 2"}),this.scheme.push(this.imageListView),this.layout.render()},setupLayout:function(){this.scheme=[],f("#fbInvite").modal("hide"),f(".model-popup-h").remove(),f("body").append(this.modelHTML);var e=new a({scheme:this.scheme,destination:"#modalBody",template:t,displayWhen:"ready"});return this.layout=e,f("#fbInvite").modal("show"),this.layout},setupEmailInvite:function(){var e=this;this.setupInviteTypesMenuView();var t=new E({el:"#image-wrap-h",controller:e,FBOptions:this.options})},setupSocialShareInvite:function(){var e=this;this.setupInviteTypesMenuView(),this.socialShareView=new w({el:"#image-wrap-h",controller:e,FBOptions:this.options})},setupInviteTypesMenuView:function(){var e=this,t=new b({el:"#invite-types-menu",controller:e,FBOptions:this.options})},setupInviteTypesView:function(){var e=this;f("#search-area").html(""),f("#invite-types-menu").html(""),this.socialShareView&&(this.socialShareView.destroy_view(),this.layout.render());var t=new y({el:"#image-wrap-h",controller:e,FBOptions:this.options})}})}),define("text!packages/common/templates/popup.html",[],function(){return'<div id="<%= popup.id %>" class="modal common-modal hide fade model-popup-h in">\r\n	<div class="modal-header">\r\n		<a href="javascript: void(0);" title="close" data-id="<%= popup.id %>" class="close uk-close uk-close-alt"></a>\r\n		<h3 class="modal-header-h">Header</h3>\r\n	</div>\r\n	<div class="modal-body page-content-h" id="modalBody"><%= popup.popup_content %></div>\r\n</div>'}),function(e,t,n){function s(e,n){this.wrapper=typeof e=="string"?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var r in n)this.options[r]=n[r];this.translateZ=this.options.HWCompositing&&i.hasPerspective?" translateZ(0)":"",this.options.useTransition=i.hasTransition&&this.options.useTransition,this.options.useTransform=i.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?i.ease[this.options.bounceEasing]||i.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.shrinkScrollbars=="scale"&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(e,n,r){var i=t.createElement("div"),s=t.createElement("div");return r===!0&&(i.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator",e=="h"?(r===!0&&(i.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),i.className="iScrollHorizontalScrollbar"):(r===!0&&(i.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),i.className="iScrollVerticalScrollbar"),i.style.cssText+=";overflow:hidden",n||(i.style.pointerEvents="none"),i.appendChild(s),i}function u(n,r){this.wrapper=typeof r.el=="string"?t.querySelector(r.el):r.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in r)this.options[s]=r[s];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(i.addEvent(this.indicator,"touchstart",this),i.addEvent(e,"touchend",this)),this.options.disablePointer||(i.addEvent(this.indicator,"MSPointerDown",this),i.addEvent(e,"MSPointerUp",this)),this.options.disableMouse||(i.addEvent(this.indicator,"mousedown",this),i.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[i.style.transform]=this.scroller.translateZ,this.wrapperStyle[i.style.transitionDuration]=i.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},i=function(){function o(e){return s===!1?!1:s===""?e:s+e.charAt(0).toUpperCase()+e.substr(1)}var r={},i=t.createElement("div").style,s=function(){var e=["t","webkitT","MozT","msT","OT"],t,n=0,r=e.length;for(;n<r;n++){t=e[n]+"ransform";if(t in i)return e[n].substr(0,e[n].length-1)}return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(e,t){for(var n in t)e[n]=t[n]},r.addEvent=function(e,t,n,r){e.addEventListener(t,n,!!r)},r.removeEvent=function(e,t,n,r){e.removeEventListener(t,n,!!r)},r.momentum=function(e,t,r,i,s,o){var u=e-t,a=n.abs(u)/r,f,l;return o=o===undefined?6e-4:o,f=e+a*a/(2*o)*(u<0?-1:1),l=a/o,f<i?(f=s?i-s/2.5*(a/8):i,u=n.abs(f-e),l=u/a):f>0&&(f=s?s/2.5*(a/8):0,u=n.abs(e)+f,l=u/a),{destination:n.round(f),duration:l}};var u=o("transform");return r.extend(r,{hasTransform:u!==!1,hasPerspective:o("perspective")in i,hasTouch:"ontouchstart"in e,hasPointer:navigator.msPointerEnabled,hasTransition:o("transition")in i}),r.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),r.extend(r.style={},{transform:u,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")}),r.hasClass=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return n.test(e.className)},r.addClass=function(e,t){if(r.hasClass(e,t))return;var n=e.className.split(" ");n.push(t),e.className=n.join(" ")},r.removeClass=function(e,t){if(!r.hasClass(e,t))return;var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ")},r.offset=function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},r.preventDefaultException=function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return n.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,r=.4;return e===0?0:e==1?1:r*n.pow(2,-10*e)*n.sin((e-t/4)*2*n.PI/t)+1}}}),r.tap=function(e,n){var r=t.createEvent("Event");r.initEvent(n,!0,!0),r.pageX=e.pageX,r.pageY=e.pageY,e.target.dispatchEvent(r)},r.click=function(e){var n=e.target,r;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),r._constructed=!0,n.dispatchEvent(r))},r}();s.prototype={version:"5.1.1",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){if(e.target!=this.scroller||!this.isInTransition)return;this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd"))},_start:function(e){if(i.eventType[e.type]!=1&&e.button!==0)return;if(!this.enabled||this.initiated&&i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&!i.isBadAndroid&&!i.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t=e.touches?e.touches[0]:e,r;this.initiated=i.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=i.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,r=this.getComputedPosition(),this._translate(n.round(r.x),n.round(r.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=t.pageX,this.pointY=t.pageY,this._execEvent("beforeScrollStart")},_move:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&e.preventDefault();var t=e.touches?e.touches[0]:e,r=t.pageX-this.pointX,s=t.pageY-this.pointY,o=i.getTime(),u,a,f,l;this.pointX=t.pageX,this.pointY=t.pageY,this.distX+=r,this.distY+=s,f=n.abs(this.distX),l=n.abs(this.distY);if(o-this.endTime>300&&f<10&&l<10)return;!this.directionLocked&&!this.options.freeScroll&&(f>l+this.options.directionLockThreshold?this.directionLocked="h":l>=f+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n");if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")e.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}s=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")e.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}r=0}r=this.hasHorizontalScroll?r:0,s=this.hasVerticalScroll?s:0,u=this.x+r,a=this.y+s;if(u>0||u<this.maxScrollX)u=this.options.bounce?this.x+r/3:u>0?0:this.maxScrollX;if(a>0||a<this.maxScrollY)a=this.options.bounce?this.y+s/3:a>0?0:this.maxScrollY;this.directionX=r>0?-1:r<0?1:0,this.directionY=s>0?-1:s<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(u,a),o-this.startTime>300&&(this.startTime=o,this.startX=this.x,this.startY=this.y)},_end:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&!i.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t=e.changedTouches?e.changedTouches[0]:e,r,s,o=i.getTime()-this.startTime,u=n.round(this.x),a=n.round(this.y),f=n.abs(u-this.startX),l=n.abs(a-this.startY),c=0,h="";this.isInTransition=0,this.initiated=0,this.endTime=i.getTime();if(this.resetPosition(this.options.bounceTime))return;this.scrollTo(u,a);if(!this.moved){this.options.tap&&i.tap(e,this.options.tap),this.options.click&&i.click(e),this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&f<100&&l<100){this._execEvent("flick");return}this.options.momentum&&o<300&&(r=this.hasHorizontalScroll?i.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:u,duration:0},s=this.hasVerticalScroll?i.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},u=r.destination,a=s.destination,c=n.max(r.duration,s.duration),this.isInTransition=1);if(this.options.snap){var p=this._nearestSnap(u,a);this.currentPage=p,c=this.options.snapSpeed||n.max(n.max(n.min(n.abs(u-p.x),1e3),n.min(n.abs(a-p.y),1e3)),300),u=p.x,a=p.y,this.directionX=0,this.directionY=0,h=this.options.bounceEasing}if(u!=this.x||a!=this.y){if(u>0||u<this.maxScrollX||a>0||a<this.maxScrollY)h=i.ease.quadratic;this.scrollTo(u,a,c,h);return}this._execEvent("scrollEnd")},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),t==this.x&&n==this.y?!1:(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var e=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=i.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(!this._events[e])return;var n=this._events[e].indexOf(t);n>-1&&this._events[e].splice(n,1)},_execEvent:function(e){if(!this._events[e])return;var t=0,n=this._events[e].length;if(!n)return;for(;t<n;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))},scrollBy:function(e,t,n,r){e=this.x+e,t=this.y+t,n=n||0,this.scrollTo(e,t,n,r)},scrollTo:function(e,t,n,r){r=r||i.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&r.style?(this._transitionTimingFunction(r.style),this._transitionTime(n),this._translate(e,t)):this._animate(e,t,n,r.fn)},scrollToElement:function(e,t,r,s,o){e=e.nodeType?e:this.scroller.querySelector(e);if(!e)return;var u=i.offset(e);u.left-=this.wrapperOffset.left,u.top-=this.wrapperOffset.top,r===!0&&(r=n.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),s===!0&&(s=n.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),u.left-=r||0,u.top-=s||0,u.left=u.left>0?0:u.left<this.maxScrollX?this.maxScrollX:u.left,u.top=u.top>0?0:u.top<this.maxScrollY?this.maxScrollY:u.top,t=t===undefined||t===null||t==="auto"?n.max(n.abs(this.x-u.left),n.abs(this.y-u.top)):t,this.scrollTo(u.left,u.top,t,o)},_transitionTime:function(e){e=e||0,this.scrollerStyle[i.style.transitionDuration]=e+"ms",!e&&i.isBadAndroid&&(this.scrollerStyle[i.style.transitionDuration]="0.001s");if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){this.scrollerStyle[i.style.transitionTimingFunction]=e;if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){this.options.useTransform?this.scrollerStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=n.round(e),t=n.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t;if(this.indicators)for(var r=this.indicators.length;r--;)this.indicators[r].updatePosition()},_initEvents:function(t){var n=t?i.removeEvent:i.addEvent,r=this.options.bindToWrapper?this.wrapper:e;n(e,"orientationchange",this),n(e,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(r,"mousemove",this),n(r,"mousecancel",this),n(r,"mouseup",this)),i.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,"MSPointerDown",this),n(r,"MSPointerMove",this),n(r,"MSPointerCancel",this),n(r,"MSPointerUp",this)),i.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(r,"touchmove",this),n(r,"touchcancel",this),n(r,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=e.getComputedStyle(this.scroller,null),n,r;return this.options.useTransform?(t=t[i.style.transform].split(")")[0].split(", "),n=+(t[12]||t[4]),r=+(t[13]||t[5])):(n=+t.left.replace(/[^-\d.]/g,""),r=+t.top.replace(/[^-\d.]/g,"")),{x:n,y:r}},_initIndicators:function(){function a(e){for(var t=i.indicators.length;t--;)e.call(i.indicators[t])}var e=this.options.interactiveScrollbars,t=typeof this.options.scrollbars!="string",n=[],r,i=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(r={el:o("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(r.el),n.push(r)),this.options.scrollX&&(r={el:o("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(r.el),n.push(r))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var s=n.length;s--;)this.indicators.push(new u(this,n[s]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){i.addEvent(this.wrapper,"wheel",this),i.addEvent(this.wrapper,"mousewheel",this),i.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){i.removeEvent(this.wrapper,"wheel",this),i.removeEvent(this.wrapper,"mousewheel",this),i.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(!this.enabled)return;e.preventDefault(),e.stopPropagation();var t,r,i,s,o=this;this.wheelTimeout===undefined&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd"),o.wheelTimeout=undefined},400);if("deltaX"in e)t=-e.deltaX,r=-e.deltaY;else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,r=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=r=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=r=-e.detail/3*this.options.mouseWheelSpeed}t*=this.options.invertWheelDirection,r*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=r,r=0);if(this.options.snap){i=this.currentPage.pageX,s=this.currentPage.pageY,t>0?i--:t<0&&i++,r>0?s--:r<0&&s++,this.goToPage(i,s);return}i=this.x+n.round(this.hasHorizontalScroll?t:0),s=this.y+n.round(this.hasVerticalScroll?r:0),i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(i,s,0)},_initSnap:function(){this.currentPage={},typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e=0,t,r=0,i,s,o,u=0,a,f=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight,c;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight)return;if(this.options.snap===!0){s=n.round(f/2),o=n.round(l/2);while(u>-this.scrollerWidth){this.pages[e]=[],t=0,a=0;while(a>-this.scrollerHeight)this.pages[e][t]={x:n.max(u,this.maxScrollX),y:n.max(a,this.maxScrollY),width:f,height:l,cx:u-s,cy:a-o},a-=l,t++;u-=f,e++}}else{c=this.options.snap,t=c.length,i=-1;for(;e<t;e++){if(e===0||c[e].offsetLeft<=c[e-1].offsetLeft)r=0,i++;this.pages[r]||(this.pages[r]=[]),u=n.max(-c[e].offsetLeft,this.maxScrollX),a=n.max(-c[e].offsetTop,this.maxScrollY),s=u-n.round(c[e].offsetWidth/2),o=a-n.round(c[e].offsetHeight/2),this.pages[r][i]={x:u,y:a,width:c[e].offsetWidth,height:c[e].offsetHeight,cx:s,cy:o},u>this.maxScrollX&&r++}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}),this.on("flick",function(){var e=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,i=this.pages.length,s=0;if(n.abs(e-this.absStartX)<this.snapThresholdX&&n.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);for(;r<i;r++)if(e>=this.pages[r][0].cx){e=this.pages[r][0].x;break}i=this.pages[r].length;for(;s<i;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,r<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),e=this.pages[r][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:r,pageY:s}},goToPage:function(e,t,r,i){i=i||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var s=this.pages[e][t].x,o=this.pages[e][t].y;r=r===undefined?this.options.snapSpeed||n.max(n.max(n.min(n.abs(s-this.x),1e3),n.min(n.abs(o-this.y),1e3)),300):r,this.currentPage={x:s,y:o,pageX:e,pageY:t},this.scrollTo(s,o,r,i)},next:function(e,t){var n=this.currentPage.pageX,r=this.currentPage.pageY;n++,n>=this.pages.length&&this.hasVerticalScroll&&(n=0,r++),this.goToPage(n,r,e,t)},prev:function(e,t){var n=this.currentPage.pageX,r=this.currentPage.pageY;n--,n<0&&this.hasVerticalScroll&&(n=0,r--),this.goToPage(n,r,e,t)},_initKeys:function(t){var n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},r;if(typeof this.options.keyBindings=="object")for(r in this.options.keyBindings)typeof this.options.keyBindings[r]=="string"&&(this.options.keyBindings[r]=this.options.keyBindings[r].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(r in n)this.options.keyBindings[r]=this.options.keyBindings[r]||n[r];i.addEvent(e,"keydown",this),this.on("destroy",function(){i.removeEvent(e,"keydown",this)})},_key:function(e){if(!this.enabled)return;var t=this.options.snap,r=t?this.currentPage.pageX:this.x,s=t?this.currentPage.pageY:this.y,o=i.getTime(),u=this.keyTime||0,a=.25,f;this.options.useTransition&&this.isInTransition&&(f=this.getComputedPosition(),this._translate(n.round(f.x),n.round(f.y)),this.isInTransition=!1),this.keyAcceleration=o-u<200?n.min(this.keyAcceleration+a,50):0;switch(e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?r+=t?1:this.wrapperWidth:s+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?r-=t?1:this.wrapperWidth:s-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:r=t?this.pages.length-1:this.maxScrollX,s=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0,s=0;break;case this.options.keyBindings.left:r+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:r-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(r,s);return}r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollX&&(r=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(r,s,0),this.keyTime=o},_animate:function(e,t,n,s){function c(){var h=i.getTime(),p,d,v;if(h>=l){o.isAnimating=!1,o._translate(e,t),o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd");return}h=(h-f)/n,v=s(h),p=(e-u)*v+u,d=(t-a)*v+a,o._translate(p,d),o.isAnimating&&r(c)}var o=this,u=this.x,a=this.y,f=i.getTime(),l=f+n;this.isAnimating=!0,c()},handleEvent:function(e){switch(e.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},u.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(i.removeEvent(this.indicator,"touchstart",this),i.removeEvent(this.indicator,"MSPointerDown",this),i.removeEvent(this.indicator,"mousedown",this),i.removeEvent(e,"touchmove",this),i.removeEvent(e,"MSPointerMove",this),i.removeEvent(e,"mousemove",this),i.removeEvent(e,"touchend",this),i.removeEvent(e,"MSPointerUp",this),i.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var n=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=i.getTime(),this.options.disableTouch||i.addEvent(e,"touchmove",this),this.options.disablePointer||i.addEvent(e,"MSPointerMove",this),this.options.disableMouse||i.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t=e.touches?e.touches[0]:e,n,r,s,o,u=i.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,n=t.pageX-this.lastPointX,this.lastPointX=t.pageX,r=t.pageY-this.lastPointY,this.lastPointY=t.pageY,s=this.x+n,o=this.y+r,this._pos(s,o),e.preventDefault(),e.stopPropagation()},_end:function(t){if(!this.initiated)return;this.initiated=!1,t.preventDefault(),t.stopPropagation(),i.removeEvent(e,"touchmove",this),i.removeEvent(e,"MSPointerMove",this),i.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var r=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-r.x),1e3),n.min(n.abs(this.scroller.y-r.y),1e3)),300);if(this.scroller.x!=r.x||this.scroller.y!=r.y)this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=r,this.scroller.scrollTo(r.x,r.y,s,this.scroller.options.bounceEasing)}this.moved&&this.scroller._execEvent("scrollEnd")},transitionTime:function(e){e=e||0,this.indicatorStyle[i.style.transitionDuration]=e+"ms",!e&&i.isBadAndroid&&(this.indicatorStyle[i.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[i.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(i.addClass(this.wrapper,"iScrollBothScrollbars"),i.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(i.removeClass(this.wrapper,"iScrollBothScrollbars"),i.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));var e=this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.options.shrink=="clip"?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.options.shrink=="clip"?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?(this.options.shrink=="scale"&&(this.width=n.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?this.options.shrink=="scale"?(this.width=n.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:this.options.shrink=="scale"&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?(this.options.shrink=="scale"&&(this.height=n.max(this.indicatorHeight+t*3,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?this.options.shrink=="scale"?(this.height=n.max(this.indicatorHeight-(t-this.maxPosY)*3,8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:this.options.shrink=="scale"&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?n.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?n.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(t&&!this.visible)return;clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,r=e?0:300;e=e?"1":"0",this.wrapperStyle[i.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),r)}},s.utils=i,typeof module!="undefined"&&module.exports?module.exports=s:e.IScroll=s}(window,document,Math),define("vendor/plugins/iscroll/iscroll",function(){}),define("packages/common/views/popup",["require","text!packages/common/templates/popup.html","facade","views","vendor/plugins/iscroll/iscroll","utils","vendor"],function(e){var t=e("facade"),n=e("views"),r=n.SectionView,i=e("utils"),s=i.lib.Channel,o=e("vendor"),u=t._,a=t.$,f=n.BaseView,l=t.Backbone,c,h=e("text!packages/common/templates/popup.html");return f.extend({options:{},forceFullScreen:!1,initialize:function(e){this.processOptions(e)},processOptions:function(e){e.id?this.options.id=e.id:this.options.id="modal-popup-"+Math.floor(Math.random()*Math.random()*50*Math.random()*50),this.options.addClass=e.addClass||[],e.fullPage&&this.options.addClass.push("full-page-modal"),this.options.title=e.title||"",this.options.width=e.width||"50%",this.options.height=e.height||"50%",e.html&&e.html instanceof a?this.options.popup_content=e.html.html():e.html?this.options.popup_content=e.html:this.options.popup_content="<div></div>",this.forceFullScreen=document.documentElement.clientWidth<parseInt(this.options.width)?!0:!1,this.forceFullScreen&&(this.options.addClass.push("noBorder"),this.options.width="100%",this.options.height="100%"),this.render();var t=this,n=0,r=setTimeout(function(){n++,a("#"+t.options.id).length?(clearInterval(r),routing.popups===undefined&&(routing.popups=[]),routing.popups.push(a("#"+t.options.id)),routing.mobile||t.processDimensions(),t.processStyle(),t.bindClose()):n>=20&&clearInterval(r)},200);s("popup-finished-launch-"+this.options.id).publish()},bindClose:function(){var e=this;routing.off("common-popup-close"),routing.on("common-popup-close",function(e){if(routing.popups.length){var t=routing.popups.shift();t.modal("hide").remove()}a("body").removeClass("overflow-hidden"),a(".common-modal").length||a(".modal-backdrop").fadeOut().remove()}),a("#"+this.options.id).find(".close").on("click",function(e){routing.trigger("common-popup-close")}),a(".modal-backdrop").off("click"),a(".modal-backdrop").on("click",function(e){routing.trigger("common-popup-close")})},processDimensions:function(){var e=this.options;if(e.width){a("#"+e.id).css({width:this.forceFullScreen?"100%":e.width});var t=parseInt(a("#"+e.id).css("borderLeftWidth"),10)+parseInt(a("#"+e.id).css("borderRightWidth"),10)+parseInt(a("#"+e.id).css("padding-left"),10)+parseInt(a("#"+e.id).css("padding-right"),10),n;if(e.width.indexOf("%")>0){var r=parseInt(e.width,10);n=window.innerWidth*(r/100)+t}else n=parseInt(e.width,10)+t;if(e.width!="100%"){console.log(a(window).width(),n);var i=a(window).width()/2-n/2+"px"}else var i="0%";a("#"+e.id).css({left:i})}if(e.height){a("#"+e.id).css({height:this.forceFullScreen?"100%":e.height});var s=parseInt(a("#"+e.id).css("borderTopWidth"),10)+parseInt(a("#"+e.id).css("borderBottomWidth"),10)+parseInt(a("#"+e.id).css("padding-top"),10)+parseInt(a("#"+e.id).css("padding-bottom"),10),o;if(e.height.indexOf("%")>0){var r=parseInt(e.height,10);o=window.innerHeight*(r/100)+s}else o=parseInt(e.height,10)+s;if(e.height!="100%")var u=(a(window).height()-e.height.replace("px",""))/2-30+"px";else var u="0%";var f=a(window).height();a("#"+e.id).css({top:u,"margin-top":"0%"})}},render:function(){var e=this,t=u.template(h,{popup:this.options});a("body").append(t),setTimeout(function(){routing.mobile&&(e.scroll&&e.scroll.destroy(),a(".iScrollVerticalScrollbar, .iScrollLoneScrollbar").remove(),e.scroll=new IScroll("#modalBody",{scrollbars:!0}),setInterval(function(){e.scroll&&e.scroll.refresh()},500)),a("body").addClass("overflow-hidden")},500)},processStyle:function(){var e=this;this.options.addClass!=undefined&&this.options.addClass.length&&u.each(this.options.addClass,function(t){a("#"+e.options.id).addClass(t)}),this.options.background_image&&(console.log(this.options.background_image),a("#"+this.options.id).css({background:"url("+this.options.background_image+") no-repeat center center fixed #FFF","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"})),a("#"+this.options.id).css({margin:"0px"}),a("#"+this.options.id+" .close").attr("data-id",this.options.id),a("#"+this.options.id).find(".modal-header-h").html(this.options.title),a("#"+this.options.id).find(".modal-header").show(),a("#"+this.options.id).modal("show")}})}),define("application",["facade","utils","collections","chrome","controller","profile","imageup","home","videopreview","game","team","registration","profilesetting","userresume","usercontrol/tag/tag","usercontrol/addgame/addgame","signup","login","usercontrol/photo-player/photo-player","usercontrol/add-club/add-club","utils/storage","usercontrol/location/views/view-location","signup/views/facebooksignup","usercontrol/addevent/addevent","chrome/views/header","browserpop/views/browser","usercontrol/landing/views/landing","pages/fbinvite","packages/common/views/popup","packages/invite/models/invite"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){var N,C=n.ApplicationStates,k=e.$,L=e._,A=e.Backbone,O=t.lib.Channel,M=require("pages/fbinvite"),_=require("browserpop/views/browser"),D=require("packages/invite/models/invite"),P=require("usercontrol/landing/views/landing"),H=t.debug;return N=A.Router.extend({routes:{"":"defaultRoute",fbinvite:"fbinvite","!fbinvite":"fbinvite","fbinvite/":"fbinvite","!fbinvite/":"fbinvite","acceptfbinvite/:id":"aceptInvite","!acceptfbinvite/:id":"aceptInvite","acceptfbinvite/:id/":"aceptInvite","!acceptfbinvite/:id":"aceptInvite",profile:"showProfile","profile/":"showProfile",team:"showTeam","team/":"showTeam","team/:id":"showTeam","!team/:id":"showTeam",game:"showGame","game/":"showGame","game/:id":"showGame","!game/:id":"showGame",home:"showHome","home/":"showHome","!home/":"showHome","!home":"showHome","!home/search":"showHomePage","!home/search/":"showHomePage","!home/search/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","home/search":"showHomePage","home/search/":"showHomePage","home/search/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/":"showHomePage","home/search/:key/:value/:key/:value/:key/:value":"showHomePage","home/search/:key/:value":"showHomePage","home/search/:key/:value/:key/:value":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage","!home/search/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value/:key/:value":"showHomePage",":page/:id/:param/:id/":"showPage",":page/:id/:param/:id/:param/:id/":"showPage",":page/:id/:param/:id":"showPage",":page/:id/:param/:id/:param/:id":"showPage",":page/:param/:id/":"showOwnPage",":page/:param/:id/:param/:id/":"showOwnPage",":page/:param/:id":"showOwnPage",":page/:param/:id/:param/:id":"showOwnPage","profile/:userid":"showProfile","!profile/:userid":"showProfile","!profile/":"showProfile","!profile":"showProfile",usersettings:"showProfileSetting","usersettings/":"showProfileSetting","!usersettings":"showProfileSetting","!usersettings/":"showProfileSetting",resume:"ShowUserResume","resume/":"ShowUserResume","!registration":"showRegistration","registration/":"showRegistration","!registration/:action":"showRegistration","registration/:action":"showRegistration","user/login":"showLogin",addgame:"showAddGame",logout:"callLogout","*splat":"routeNotFound"},showHomePage:function(){var e=[],t=arguments.length;if(arguments&&t)for(var n=0;n<t;n++)n%2==0&&e.push({key:arguments[n],value:arguments[n+1]});this.showHome&&L.isFunction(this.showHome)&&this.showHome(undefined,e)},routeNotFound:function(){routing.navigate("home",{trigger:!0})},showPage:function(e,t,n,r,i,s){if(n=="media"||i=="media")this.mediaPopup=!0;e.indexOf("!")!="-1"&&(e=e.replace("!",""));var o="show"+e.charAt(0).toUpperCase()+e.slice(1),u=[];n&&u.push({key:n+"_id",value:r}),i&&u.push({key:i+"_id",value:s}),this[o]&&L.isFunction(this[o])&&this[o](t,u)},showOwnPage:function(e,t,n,r,i){if(t=="media"||r=="media")this.mediaPopup=!0;e.indexOf("!")!="-1"&&(e=e.replace("!",""));var s="show"+e.charAt(0).toUpperCase()+e.slice(1),o=[];t&&o.push({key:t+"_id",value:n}),r&&o.push({key:r+"_id",value:i}),this[s]&&L.isFunction(this[s])&&this[s](undefined,o)},initialize:function(e){L.bindAll(this),this.addSubscribers(),i.prototype.appStates=new C},detectBrowser:function(){var e=this,t=setInterval(function(){try{k.browser.android,clearInterval(t);var n=showMobileWindow=!1;k.browser.iphone||k.browser.android,!L.isUndefined(k.browser.msie)&&k.browser.msie&&parseInt(k.browser.version)<10&&(n=!0),!L.isUndefined(k.browser.version)&&k.browser.mozilla&&parseInt(k.browser.version)<25&&(n=!0),(n||showMobileWindow)&&e.showBrowserWindow()}catch(r){}},1e3)},showBrowserWindow:function(){var e=new _},showLandingInfo:function(){if(!routing.showLandingPage)return;var e=this;setTimeout(function(){if(!e.checkForUser())var t=new P},500)},aceptInvite:function(e){function n(n){k("body").addClass("fbaccept");var r="Athletez - We Are Athletes",i=new D;i.set("sechash",e),i.fetch({success:function(n,i){var s=new P({invite_model:n});n.loadInvitePage(),t.gaPageView("FB Accept - "+e,r)},error:function(){t.showHomePage(n)}})}routing.showLandingPage=!1;var t=this;this.cancelAjaxRequests(),this.loadStyles(),r(),this.initialiRoutesInit(n)},getUserName:function(e){var t=new w("user","localStorage"),n;if(t.data)for(var r in t.data)if(r==e){n=t.data[r].user_name;break}return n?n:!1},intializeImageAndVideo:function(){this.imageUpListeners(),this.videoPreview(),this.showUsercreate(),this.showHomeRefresh(),this.showLogin(),this.triggerSignup()},cancelAjaxRequests:function(){if(typeof routing!="undefined"&&typeof routing.ajaxRequests!="undefined"&&routing.ajaxRequests.length)for(var e in routing.ajaxRequests)routing.ajaxRequests[e].abort();k(".qtip").remove(),routing.mobile&&k("html").click(function(e){k(e.currentTarget).parents(".qtip")&&k(".qtip").remove()})},initTriggers:function(){routing.off("photo-player-init"),routing.on("photo-player-init",function(e,t,n,r,i,s,o){var u=new y({index:e,userId:n,pageName:i,_collection:t,array:r,pageId:s,mediaId:o})}),routing.off("add-school-init"),routing.on("add-school-init",function(e,t,n,r,i,s){var o=new b({type:n,viewObj:r,callback:i,orgNameSoFar:s})});var e=undefined;routing.off("show_location"),routing.on("show_location",function(t,n,r,i){e=i;var s={latitude:t,longitude:n},o=new E(s);k(r).html(o.$el)}),routing.off("popup-close"),routing.on("popup-close",function(){k("#modalPopup").modal("hide"),k(".model-popup-h").remove(),e&&e()})},initialiRoutesInit:function(e,t){var n=this,r=function(){k(".modal:not(#Browser-detect)").remove(),k(".modal-backdrop").remove(),routing.trigger("common-popup-close")};k("body").removeClass("homePage"),k.UIkit.offcanvas.offcanvas.hide(),routing.off("app-inited"),routing.on("app-inited",function(t){r(),e(t),n.mediaPopup||(n.showLandingInfo(),n.mediaPopup=!1)}),routing.off("fbInvite"),routing.on("fbInvite",function(e,t){console.log(t),n.showFBInviteOnPopup(e,t)}),routing.off("popup-close"),routing.on("popup-close",function(e){console.log(e),e?(k(e.currentTarget).modal("hide"),k(e.currentTarget).unbind().remove(),k(".modal-backdrop").unbind().fadeOut()):(k("#modalPopup").modal("hide"),k("#modalPopup").unbind().remove(),k(".modal-backdrop").unbind().fadeOut())}),routing.off("common-popup-open"),routing.on("common-popup-open",function(e){var t=require("packages/common/views/popup"),n=new t(e)}),k(document).off("hidden.bs.modal","#modalPopup, #photoPlayerModal"),k(document).on("hidden.bs.modal","#modalPopup, #photoPlayerModal",function(e){routing.trigger("popup-close",e)}),routing.off("add-game"),routing.on("add-game",function(e,t,n,r,i){var s=new v({teams_id:t,sports_id:n,user_id:r,id:e,popup:!0,callback:i})}),routing.off("add-event"),routing.on("add-event",function(e,t,n,r){var i=new x({sports_id:t,users_id:n,popup:!0,callback:r})}),routing.off("check-fb-login"),routing.on("check-fb-login",function(){fbregistration=new S,fbregistration.checkFbLogin("linkWithFB")}),routing.off("link-to-facebook"),routing.on("link-to-facebook",function(){ga("send","event","popup","open","FB Reg"),fbregistration=new S,fbregistration.signupFacebook("linkWithFB")}),this.detectBrowser()},checkForUser:function(){return!L.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},defaultRoute:function(){this.initApp()},initApp:function(e){ga("send","event","app","initialized","Browser Reload"),this.showHome(null)},getPhrases:function(){},showFbreg:function(){ga("send","event","popup","open","FB Reg"),fbregistration=new S,fbregistration.signupFacebook("linkWithFB")},gaPageView:function(e,t){ga("send","pageview",{page:e,title:t})},showHome:function(e,t){function i(e){k("body").addClass("homePage");var r="Athletez - We Are Athletes";n.currentController=new u({route:"",title:r,userId:e,params:t}),!e&&k("div.register-wrapper-h").length==0&&k("body header").after('</div><div class="register-wrapper-h"></div>'),n.gaPageView("Home Page",r)}var n=this;this.cancelAjaxRequests(),this.loadStyles(),r(),this.initialiRoutesInit(i)},showFBInviteOnPopup:function(e,t){var n="Athletez - We Are Athletes";self.currentController=new M({route:"",title:n,userId:e,options:t})},fbinvite:function(){function t(t){k("body").addClass("fbinvite");var n="Athletez - We Are Athletes";e.currentController=new M({route:"",title:n,userId:t}),!t&&k("div.register-wrapper-h").length==0&&k("body header").after('<div class="register-wrapper-h"></div>'),e.gaPageView("FB Invite",n)}var e=this;this.cancelAjaxRequests(),this.loadStyles(),r(),this.initialiRoutesInit(t)},removeCurrent:function(){this.currentController&&console.log(this.currentController.layout)},showProfileOurSport:function(e,t){this.showProfile(undefined,e,t)},showProfileOurSportAndPlayer:function(e,t,n,r){this.showProfile(undefined,e,t,n,r)},showUserProfileSport:function(e,t,n){this.showProfile(e,t,n)},showUserProfileSportAndMedia:function(e,t,n,r,i){this.showProfile(e,t,n,r,i)},showProfile:function(e,t){function i(r){O("refresh-profilepage").empty();var i=n.getUserName(r);n.currentController=new s({userId:typeof e!="undefined"?e:r,title:i,params:t}),n.gaPageView("Profile Page",i)}var n=this;this.cancelAjaxRequests(),n.loadStyles(),r(),this.initialiRoutesInit(i)},hideSignup:function(){k("div.register-wrapper-h").remove()},notFound:function(e){alert("Page not found")},showTeam:function(e,t){function i(r){n.currentController=new l({teamId:e,title:"Team Page",userId:r,params:t}),n.gaPageView("Team Page","NA")}var n=this;this.cancelAjaxRequests(),this.loadStyles(),r();if(!e){this.notFound("team");return}n.removeCurrent(),this.initialiRoutesInit(i)},imageUpListeners:function(){function e(e,t,n){var r=new o({route:"",url:e,attr:t,data:n})}this.addImageTrigger(e)},addImageTrigger:function(e){routing.off("add-image"),routing.on("add-image",function(t,n,r){this.checkForUser()?e(t,n,r):routing.trigger("showSignup",function(){e(t,n,r)})})},showProfileSetting:function(e){function n(n){self.currentController=new h({id:e==undefined?n:e,title:"Profile Settings"}),t.gaPageView("Profile Settings","NA")}this.cancelAjaxRequests(),this.loadStyles(),r(),this.removeCurrent();var t=this;this.initialiRoutesInit(n)},ShowUserResume:function(e){function n(n){t.currentController=new p({id:e==undefined?n:e}),t.gaPageView("User Resume Page","NA")}var t=this;this.cancelAjaxRequests(),this.loadStyles(),r(),this.removeCurrent(),this.initialiRoutesInit(n)},imageUp:function(){function e(e){var t=new o({route:"",url:this.posturl,attr:this.attribute})}this.cancelAjaxRequests(),this.loadStyles(),this.initialiRoutesInit(e)},triggerSignup:function(){this.signup=new T,routing.off("showSignup"),routing.on("showSignup",function(e){this.signup.signupUser&&this.signup.signupUser(e)})},videoPreview:function(){function t(t,n){e.checkForUser()?new a({url:t,attr:n}):routing.trigger("showSignup",function(){new a({url:t,attr:n})})}this.cancelAjaxRequests(),this.loadStyles();var e=this;O("add-video").subscribe(t)},showGame:function(e,t){function i(r){self.currentController=new f({route:"",gameId:e,title:"Game Page",userId:r,params:t}),n.gaPageView("Game Page","NA")}this.cancelAjaxRequests(),this.loadStyles(),r();if(!e){this.notFound("team");return}this.removeCurrent();var n=this;this.initialiRoutesInit(i)},showRegistration:function(){ga("send","event","popup","Registration")},showTag:function(e){function t(t){self.currentController=new d({id:e==undefined?t:e})}this.cancelAjaxRequests(),this.loadStyles(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},showAddGame:function(e){function t(t){self.currentController=new v({id:e==undefined?t:e})}ga("send","event","popup","Add Game","",e),this.cancelAjaxRequests(),this.loadStyles(),r(),this.removeCurrent(),this.initialiRoutesInit(t)},RefreshHome:function(){r()},showHomeRefresh:function(){this.addHomeTrigger(this.initApp)},addHomeTrigger:function(e){routing.off("reload-home"),routing.on("reload-home",function(){e()})},showLogin:function(){},showUsercreate:function(){function e(){}this.addUserTrigger(e)},addUserTrigger:function(e){routing.off("add-user"),routing.on("add-user",function(){e()})},loadStyles:function(){O("load:css").publish([base_url+"css/bootstrap.css",base_url+"css/bootstrap-responsive.css",base_url+"css/app.css",base_url+"css/common.css",base_url+"css/jquery-ui-1.10.2.custom.css",base_url+"css/form-fields.css"])},addSubscribers:function(){O("load:css").subscribe(this.loadCss)},removeSubscribers:function(){O("load:css").unsubscribe(this.loadCss)},callLogout:function(){ga("send","event","menu","Log Out","Action-Triggered",routing.userLoggedIn),this.logout=new g,routing.trigger("Logout")},getStoredState:function(e,t){var n,r;return n=this.states.findByNameInStorage(e),L.isString(t)&&n&&n.data&&(r=n.data[t]),r||n},show:function(e){e=e||"body",k(e).removeClass("hide")},hide:function(e){e=e||"body",k(e).addClass("hide")},cssLoaded:[],loadCss:function(e){var n,r;if(!L.isArray(e))throw new Error("App method addCss expects an array");for(n=0;n<e.length;n++)r=e[n],L.isString(r)&&k.inArray(r,this.cssLoaded)<0&&(t.lib.loadCss(r),this.cssLoaded.push(r))}}),N}),define("packages/common/views/spinner",["require","facade","views","utils","vendor/plugins/spin.min","vendor"],function(e){var t=e("facade"),n=e("views"),r=n.SectionView,i=e("utils"),s=i.lib.Channel,o=e("vendor"),u=t._,a=t.$,f=n.BaseView,l=t.Backbone,c,h=e("vendor/plugins/spin.min"),p={lines:15,length:5,width:2,radius:3,corners:1,rotate:0,direction:1,color:"#000",speed:.6,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9};return function(){routing&&(routing.showSpinner=function(e){if(e){var t=(new h(p)).spin();return a(t.el).insertAfter(e),a(e).addClass("link-disabled"),t}},routing.hideSpinner=function(e,t){e&&e.stop(),t&&a(t).removeClass("link-disabled")})}}),require.config({baseUrl:"./",locale:"en-us",config:{text:{useXhr:function(e,t,n,r){return!0}}},paths:{json2:[cdn+"vendor/json2",s3+"vendor/json2","/vendor/json2"],modernizr:[cdn+"vendor/modernizr-2.6.2.min",s3+"vendor/modernizr-2.6.2.min","/vendor/modernizr-2.6.2.min"],html5:[cdn+"vendor/html5",s3+"vendor/html5","/vendor/html5"],zepto:[cdn+"vendor/zepto",s3+"vendor/zepto","/vendor/zepto"],mustache:[cdn+"vendor/mustache",s3+"vendor/mustache","/vendor/mustache"],backbone:[cdn+"vendor/backbone",s3+"vendor/backbone","/vendor/backbone"],underscore:[cdn+"vendor/underscore",s3+"vendor/underscore","/vendor/underscore"],jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min",facebook:window.cordova?"js/facebookConnectPlugin":[cdn+"vendor/all",s3+"vendor/all","/vendor/all"],jQueryHammer:[cdn+"vendor/jquery.hammer",s3+"vendor/jquery.hammer","/vendor/jquery.hammer"],bootstrap:[cdn+"vendor/plugins/bootstrap",s3+"vendor/plugins/bootstrap","/vendor/plugins/bootstrap"],"jquery.pstrength":[cdn+"vendor/plugins/jquery.pstrength-min.1.2",s3+"vendor/plugins/jquery.pstrength-min.1.2","/vendor/plugins/jquery.pstrength-min.1.2"],jqueryui:[cdn+"vendor/plugins/jquery-ui-1.10.2.custom.min",s3+"vendor/plugins/jquery-ui-1.10.2.custom.min","/vendor/plugins/jquery-ui-1.10.2.custom.min"],jquerytimepicker:[cdn+"vendor/plugins/jquery-date-time-picker-1.4",s3+"vendor/plugins/jquery-date-time-picker-1.4","/vendor/plugins/jquery-date-time-picker-1.4"],"jquery.jrac":[cdn+"vendor/plugins/jquery.jrac",s3+"vendor/plugins/jquery.jrac","/vendor/plugins/jquery.jrac"],"iframe-transport":[cdn+"vendor/plugins/jquery.iframe-transport",s3+"vendor/plugins/jquery.iframe-transport","/vendor/plugins/jquery.iframe-transport"],fileupload:[cdn+"vendor/plugins/jquery.fileupload",s3+"vendor/plugins/jquery.fileupload","/vendor/plugins/jquery.fileupload"],browser:[cdn+"vendor/jquery.browser",s3+"vendor/jquery.browser","vendor/jquery.browser"],"jquery.ui.widget":[cdn+"vendor/plugins/jquery.ui.widget",s3+"vendor/plugins/jquery.ui.widget","/vendor/plugins/jquery.ui.widget"],"jquery.slimscroll":[cdn+"vendor/plugins/jquery.slimscroll.min",s3+"vendor/plugins/jquery.slimscroll.min","/vendor/plugins/jquery.slimscroll.min"],"jquery.slimscroll.hor":[cdn+"vendor/plugins/jquery.slimscroll.hor",s3+"vendor/plugins/jquery.slimscroll.hor","/vendor/plugins/jquery.slimscroll.hor"],plupload:[cdn+"plupload/js/plupload.full",s3+"plupload/js/plupload.full","/plupload/js/plupload.full"],jwplayer:[cdn+"vendor/plugins/jwplayer",s3+"vendor/plugins/jwplayer","/vendor/plugins/jwplayer"],imgcenter:[cdn+"vendor/plugins/jq-center-image",s3+"vendor/plugins/jq-center-image","/vendor/plugins/jq-center-image"],custom:[cdn+"vendor/custom",s3+"vendor/custom","/vendor/custom"],domready:[cdn+"vendor/plugins/domReady",s3+"vendor/plugins/domReady","/vendor/plugins/domReady"],text:[cdn+"vendor/plugins/text",s3+"vendor/plugins/text","/vendor/plugins/text"],touch:[cdn+"vendor/plugins/touch",s3+"vendor/plugins/touch","/vendor/plugins/touch"],rotate:[cdn+"vendor/plugins/jQueryRotate",s3+"vendor/plugins/jQueryRotate","/vendor/plugins/jQueryRotate"],async:[cdn+"vendor/plugins/async",s3+"vendor/plugins/async","/vendor/plugins/async"],vendor:[cdn+"vendor",s3+"vendor","/vendor"],facade:[cdn+"facade",s3+"facade","/facade"],utils:[cdn+"utils",s3+"utils","/utils"],syncs:[cdn+"syncs",s3+"syncs","/syncs"],models:[cdn+"models",s3+"models","/models"],views:[cdn+"views",s3+"views","/views"],collections:[cdn+"collections",s3+"collections","/collections"],controller:[cdn+"controller",s3+"controller","/controller"],packages:[cdn+"packages",s3+"packages","/packages"],common:[cdn+"packages/common",s3+"packages/common","/packages/common"],user:[cdn+"packages/user",s3+"packages/user","/packages/user"],media:[cdn+"packages/media",s3+"packages/media","/packages/media"],site:[cdn+"packages/site",s3+"packages/site","/packages/site"],sportorg:[cdn+"packages/sportorg",s3+"packages/sportorg","/packages/sportorg"],location:[cdn+"packages/location",s3+"packages/location","/packages/location"],sport:[cdn+"packages/sport",s3+"packages/sport","/packages/sport"],votes:[cdn+"packages/vote",s3+"packages/vote","/packages/vote"],roster:[cdn+"packages/roster",s3+"packages/roster","/packages/roster"],schedules:[cdn+"packages/game-schedules",s3+"packages/game-schedules","/packages/game-schedules"],pages:[cdn+"pages",s3+"pages","/pages"],chrome:[cdn+"pages/chrome",s3+"pages/chrome","/pages/chrome"],imageup:[cdn+"pages/imageup",s3+"pages/imageup","/pages/imageup"],videopreview:[cdn+"pages/videopreview",s3+"pages/videopreview","/pages/videopreview"],profile:[cdn+"pages/profile",s3+"pages/profile","/pages/profile"],fbAccept:[cdn+"pages/fbaccept",s3+"pages/fbaccept","/pages/fbaccept"],game:[cdn+"pages/game",s3+"pages/game","/pages/game"],fbinvite:[cdn+"pages/fbinvite",s3+"pages/fbinvite","/pages/fbinvite"],team:[cdn+"pages/team",s3+"pages/team","/pages/team"],registration:[cdn+"pages/registration",s3+"pages/registration","/pages/registration"],signup:[cdn+"pages/signup",s3+"pages/signup","/pages/signup"],login:[cdn+"pages/login",s3+"pages/login","/pages/login"],home:[cdn+"pages/home",s3+"pages/home","/pages/home"],profilesetting:[cdn+"pages/profilesetting",s3+"pages/profilesetting","/pages/profilesetting"],userresume:[cdn+"pages/userresume",s3+"pages/userresume","/pages/userresume"],compcss:[cdn+"css/components",s3+"css/components","/css/components"],usercontrol:[cdn+"usercontrols",s3+"usercontrols","/usercontrols"],"add-club":[cdn+"usercontrols/add-club/add-club",s3+"usercontrols/add-club/add-club","/usercontrols/add-club/add-club"],addgame:[cdn+"usercontrols/addgame/addgame",s3+"usercontrols/addgame/addgame","/usercontrols/addgame/addgame"],"photo-player":[cdn+"usercontrols/photo-player/photo-player",s3+"usercontrols/photo-player/photo-player","/usercontrols/photo-player/photo-player"],tag:[cdn+"usercontrols/tag/tag",s3+"usercontrols/tag/tag","/usercontrols/tag/tag"],browserpop:[cdn+"usercontrols/detection",s3+"usercontrols/detection","/usercontrols/detection"],landingpage:[cdn+"usercontrols/landing",s3+"usercontrols/landing","/usercontrols/landing"],application:[cdn+"application",s3+"application","/application"]},shim:{jquery:{exports:"$"},facade:{deps:["jquery"]},jqueryui:{deps:["jquery"]},browser:{deps:["jquery"]},underscore:{exports:"_",deps:["jquery"]},backbone:{deps:["underscore","jquery","json2","html5","jqueryui","custom","jquerytimepicker","browser"],exports:"Backbone"},browserpop:{deps:["jqueryui"]},"jquery.slimscroll":{deps:["jquery","jqueryui"]},bootstrap:{deps:["jquery","jqueryui"]},plupload:{deps:["jquery"]},jwplayer:{deps:["jquery"]},jquerytimepicker:{deps:["jquery","jqueryui"]},facebook:{exports:"FB"},jQueryHammer:{deps:["jquery"]}},priority:["text","modernizr","json2","vendor","utils","facade","syncs","models","views","collections","controller"],jquery:"1.11.1",waitSeconds:60});var routing,App,$;define("main",["require","underscore","backbone","jquery","application","packages/common/views/spinner","utils"],function(e){var t=e("underscore"),n=e("backbone"),r=e("jquery"),i=e("application"),s=e("packages/common/views/spinner"),o=e("utils"),u=o.storage,a=o.docCookies,f=function(e,n){if(t.isUndefined(n))var n="cookieValue";var r=function(e){var r=new u(e,"localStorage"),i=t.isObject(r.find({id:n}))?r.find({id:n}).value:!1;if(i)return a.setItem(e,i),e+"="+i};if(t.isArray(e)){var i=[];return t.each(e,function(e){i.push(r(e))}),i.join(";")}return r(e)};r(function(){n.noConflict(),routing=new i,routing.isNative=function(){var e=window.location.href,n=e.split("://");return n[0]==="file"&&!t.isUndefined(window.cordova)?!0:!1}(),r.support.cors=!0,r.ajaxPrefilter(function(e,n,r){e.crossDomain=!0,r.setRequestHeader("Cookie",f(["authautologin","session"]));var i=function(e,n){var r=new u(e,"localStorage"),i=t.isObject(r.find({id:n}))?r.find({id:n}).value:!1;return t.isObject(i)?JSON.stringify(i):i};r.setRequestHeader("fbaccesstoken",i("FBAuthToken","FBAuthToken")),routing.isNative===!0&&r.setRequestHeader("isNative","TRUE"),console.log("XHR:",r,f(["authautologin","session"])),e.url=e.url.charAt(0)==="/"?e.url:"/"+e.url,e.url=t.isUndefined(window.location.host)||window.location.host===""?"http://www.athletez.com"+e.url:e.url}),r(document).ajaxComplete(function(e,t){}),App={},routing.ajaxRequests=[],routing.intializeImageAndVideo(),routing.initTriggers(),routing.mobile=/iphone|ipod|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase()),routing.isNative=function(){var e=window.location.href,t=e.split("://");return t[0]==="file"?!0:!1}(),routing.showLandingPage=!0,new s,n.history.start({}),App.Settings=new function(){var e=this,t=function(){var t=window.location.host;t.match("localhost")?e.appId="675982322446833":t.match("newsite")||t.match("aup.")?e.appId="239430712864961":e.appId="219148511595084"}();return this.fbId=function(){},this}})});