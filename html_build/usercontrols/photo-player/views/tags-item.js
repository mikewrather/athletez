define(["vendor","views","utils","text!usercontrol/photo-player/templates/tag-item.html","common/models/delete","common/models/entparse"],function(e,t,n,r,i){var s,o=t.BaseView,u=e.Mustache,a=require("common/models/entparse");return s=o.extend({tagName:"li",template:r,className:"tag",events:{"click .deleteTag":"deleteTag"},initialize:function(e){},filterData:function(){var e=this,t=this.model.get("payload"),n={_enttypes_id:t.enttypes_id,_id:t.id},r=!1,i=null;n.Sportsteam=null;var s=new a({mpay:t.subject,thumb_size:44,display_width:44,display_height:44}),n=s.parsedData;switch(t.subject_enttypes_id){case"8":var o="",u=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},f=t.subject.teams?t.subject.teams.length:0;for(var l=0;l<f;l++){if(l%2==1)var c="game-match-name1",h="game-score1";else var c="game-match-name",h="game-score";o+='<div class="'+c+'">',o+=u(t.subject.teams[l].team_name),o+="</div>",o+='<div class="'+h+'">',o+='<span class="scoreAlign">',o+=t.subject.teams[l].points_scored!=null?t.subject.teams[l].points_scored:"&Oslash;",o+="</span>",o+="</div>"}n._label=o!=""?o:t.subject.event_name,t.hasOwnProperty("is_owner")&&(r=t.is_owner);if(!this.Sportsteam&&f){this.Sportsteam=!0;var p=t.subject.shared.season,d=p.split(" "),v='<div class="name"><span class="topalign">'+t.subject.shared.sport+'</span></div>	<div class="game"><span class="topalign">'+t.subject.shared.complevel+'</span></div><div class="season"><span class="topalign">'+d[2]+"</span></div>";$(".headerinfo").html(v)}break;case"5":n._label=t.subject.team_name}return n._enttypes_id=t.enttypes_id,n._id=t.id,n},render:function(){var e=this,t=this.filterData(),n=u.to_html(this.template,t);this.$el.html(n);var r=setInterval(function(){e.$el.find(".tag-image-container").width()>0&&(e.$el.find(".tag-image-container").css({height:e.$el.find(".tag-image-container").width()}),clearInterval(r))},200);return t.imgData.maxwidth&&this.$el.find("img.tag-thumb").css({"max-width":t.imgData.maxwidth,left:t.imgData.left}),t.imgData.maxheight&&this.$el.find("img.tag-thumbl").css({"max-height":t.imgData.maxheight,top:t.imgData.top}),this},deleteTag:function(e){var t=new i;t.subject_id=$(e.target).attr("data-subject-id"),t.enttypes_id=$(e.target).attr("data-enttypes-id"),t.removeNode=$(e.target).parents("li.tags-li"),t.destroyAndRemove()}}),s});