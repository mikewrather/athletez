define(["facade","utils","site/views/comment-list","usercontrols/photo-player/views/comment-form","site/collections/comments"],function(e,t,n,r,i){var s,o=e._,u=t.lib.Channel;return s=n.extend({initialize:function(e){o.bindAll(this),this.options.collection=this.collection,this.name=e.name,this._template=e.template,n.prototype.initialize.call(this,e)},limitResults:function(){var e=this.collection,t=e.last(5),n=new i;o.each(t,function(e,t){n.push(e)}),this.collection.reset(),this.collection=n},setupFormView:function(){function s(e){console.log("Comments callback",e.user_pic_small),n.model=e,n.render()}function o(e){var t=$("#comment-list").height()+$("li.comment").height();$(".comment-outer-h").animate({scrollTop:t}),$("#comment-list li:last-child").addClass("newly-added-comment")}var e=this,t=this,n=new r({collection:this.collection}),i=this.addChildView(n);this.callbacks.add(function(){i()}),routing.off("profilecommentonform:fetch"),routing.on("profilecommentonform:fetch",function(e){s(e)}),routing.off("profilecommentonlist:refresh"),routing.on("profilecommentonlist:refresh",function(e){o(e)})}}),s});