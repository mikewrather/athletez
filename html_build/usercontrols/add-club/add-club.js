define(["require","text!usercontrols/photo-player/templates/comments.html","facade","controller","models","views","user/models/basic_info","usercontrols/add-club/collections/complevel","usercontrols/add-club/collections/profile","usercontrols/add-club/views/main"],function(e,t){var n=e("facade"),r=e("controller"),i=e("models"),s=e("views"),o=e("utils"),u=n.$,a=n._,f=o.debug,l=o.lib.Channel,c=s.LayoutView,h=n.Backbone,p=e("user/models/basic_info"),d=e("usercontrols/add-club/collections/complevel"),v=e("usercontrols/add-club/collections/profile"),m=e("usercontrols/add-club/views/main");return r.extend({cssArr:["/usercontrols/add-club/add-club.css"],events:{},initialize:function(e){var t=this;l("load:css").publish(this.cssArr),a.bindAll(this),e.id&&(this.id=e.id),e.index&&(this.index=e.index),e.userId&&(this.userId=e.userId),e.type&&(this.type=e.type),this.callback=e.callback,e._collection&&(this._collection=e._collection),this.modelHTML='<div class="add-club-area-h photo-player"></div>',this.setupLayout().render(),this.setUpMainView()},setupLayout:function(){this.scheme=[];var e=new c({scheme:this.scheme,destination:"#modalBody",template:"",displayWhen:"ready"});this.layout=e;var t={};return t.height="500px",t.width="90%",t.title=this.type=="school"?"Add School":"Add Club",routing.trigger("common-popup-open",t),this.layout},setUpMainView:function(){var e=this;e.seasonProfile=new v,e.seasonProfile.fetch(),u.when(e.seasonProfile.request).done(function(){var t=new m({model:e.seasonProfile,name:"add club",destination:"#modalBody",addType:e.type,callback:e.callback});e.scheme.push(t),e.layout.render()})}})});