define(["require","text!usercontrols/photo-player/templates/comments.html","facade","controller","models","views","user/models/basic_info","usercontrols/add-club/collections/complevel","usercontrols/add-club/collections/profile","usercontrols/add-club/views/main"],function(e,t){var n=e("facade"),r=e("controller"),i=e("models"),s=e("views"),o=e("utils"),u=n.$,a=n._,f=o.debug,l=o.lib.Channel,c=s.LayoutView,h=n.Backbone,p=e("user/models/basic_info"),d=e("usercontrols/add-club/collections/complevel"),v=e("usercontrols/add-club/collections/profile"),m=e("usercontrols/add-club/views/main");return r.extend({cssArr:["/usercontrols/add-club/add-club.css"],events:{},initialize:function(e){console.log("init");var t=this;l("load:css").publish(this.cssArr),a.bindAll(this),e.id&&(this.id=e.id),e.index&&(this.index=e.index),e.userId&&(this.userId=e.userId),e.type&&(this.type=e.type),this.callback=e.callback,e._collection&&(this._collection=e._collection),this.modelHTML='<div id="modalPopup" class="modal add-club-model hide fade model-popup-h"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body page-content-h"><div class="add-club-area-h photo-player"></div></div></div>',this.setupLayout().render(),this.setUpMainView()},setupLayout:function(){this.scheme=[],u(".model-popup-h").remove(),u("body").append(this.modelHTML);var e=new c({scheme:this.scheme,destination:"#modalPopup",template:"",displayWhen:"ready"});return this.layout=e,u("#modalPopup").modal(),this.layout},setUpMainView:function(){var e=this;e.seasonProfile=new v,e.seasonProfile.fetch(),u.when(e.seasonProfile.request).done(function(){var t=new m({model:e.seasonProfile,name:"add club",destination:".add-club-area-h",addType:e.type,callback:e.callback});e.scheme.push(t),e.layout.render()})}})});