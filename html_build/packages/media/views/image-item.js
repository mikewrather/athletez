define(["vendor","views","utils","text!media/templates/image-item.html"],function(e,t,n,r){var i,s=e.$,o=t.BaseView,u=e.Mustache;return i=o.extend({tagName:"li",className:"image",events:{click:"changeImage","click .vote":"vote","click .image-outer-h":"initPhotoPlayer","click .follow":"follow","click .edit":"edit","click .delete":"delete"},initialize:function(e){this.template=r},render:function(){var e=this,t=this.model.attributes.payload,n={_enttypes_id:t.enttypes_id,_id:t.id},r=!1,i=null;console.log(t);switch(t.enttypes_id){case"23":n._thumbnail=t.thumbs,n._label=t.media.name,n._link="javascript: void(0);",t.media.hasOwnProperty("is_owner")&&(r=t.media.is_owner);break;case"21":typeof t.types=="object"?typeof t.types.standard_thumb=="object"?(i=t.types.standard_thumb,n._thumbnail=i.url):typeof t.types.large_thumb=="object"?(i=t.types.large_thumb,n._thumbnail=i.url):typeof t.types.original=="object"&&(i=t.types.original,n._thumbnail=i.url):n._label=t.media_obj.name,n._link="javascript: void(0);",t.media_obj.hasOwnProperty("is_owner")&&(r=t.media_obj.is_owner);break;case"1":typeof t.user_picture_obj=="object"&&typeof t.user_picture_obj.types=="object"&&(typeof t.user_picture_obj.types.standard_thumb=="object"?(i=t.user_picture_obj.types.standard_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.large_thumb=="object"?(i=t.user_picture_obj.types.large_thumb,n._thumbnail=i.url):typeof t.user_picture_obj.types.original=="object"&&(i=t.user_picture_obj.types.original,n._thumbnail=i.url)),n._label=t.label,n._sublabel="Coming Soon",n._link="/#profile/"+t.id,t.hasOwnProperty("is_owner")&&(r=t.is_owner);break;case"8":n._detailclass="game",i=t.game_picture!==null?t.game_picture.types.standard_thumb:{height:440,width:440,url:"http://cdn.athletez.com/resources/icons/game/square_game.png"},n._thumbnail=i.url,n._label=t.game_day,n._link="/#game/"+t.id;var o="",a=t.teams,f=function(e){return e=e.toLowerCase(),e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})};if(a!=null)var l=a.length;for(var c=0;c<l;c++)o+="<span>",o+=f(t.teams[c].team_name),o+="</span>",c+1<t.teams.length&&(o+=" VS. ");t.hasOwnProperty("is_owner")&&(r=t.is_owner),n._sublabel=o}n.show_edit=r==1?!0:undefined;var h=u.to_html(this.template,n);this.$el.html(h);var p="120px",d="92px";this.$el.find(".image-outer-h").mouseout(function(){s(this).find(".action-block").css({opacity:0}),s(this).find(".detail-view").css({bottom:"-"+d}),s(this).find(".detail-view.game").css({bottom:"-"+p})});if(i!="undefined"&&i!=null){var v=i.width/220,m=i.height/220;i.width=parseInt(i.width),i.height=parseInt(i.height);var g=i.width>i.height?-(i.width/m-220)/2:-(i.height/v-220)/2;g>0&&(g=0),i.width>i.height?this.$el.find("img").css({"max-width":i.width/m,left:g}):this.$el.find("img").css({"max-height":i.height/v,top:g})}return this.$el.find(".image-outer-h").mouseover(function(){s(this).find(".detail-view").css({bottom:"0px"}),s(this).find(".action-block").css({opacity:90})}),this},vote:function(e){e.preventDefault(),console.log(this.model)},follow:function(e){e.preventDefault(),console.log(e.target)},edit:function(e){e.preventDefault()},"delete":function(e){e.preventDefault()}}),i});