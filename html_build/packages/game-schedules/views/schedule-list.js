define(["vendor","facade","views","utils","schedules/views/schedule-item","utils/storage","text!schedules/templates/schedule-list.html","chrome/views/header"],function(e,t,n,r,i,s,o,u,a){var f,l,c=t.$,h=t._,p=r.lib.Channel,d=n.CollectionView,v=e.Mustache,m=n.SectionView;return l=d.extend(m.prototype),f=l.extend({__super__:d.prototype,id:"schedule-list",name:"schedule List",tagName:"ul",_tagName:"li",_className:"org",_view:i,events:{"click .add-game-h":"addGame","click .add-event-h":"addEvent","mouseover .team-info-h":"showinfo","mouseout .team-info-h":"showinfo"},showinfo:function(e){e.preventDefault(),c(e.target).parents(".game-info").length||(c(e.target).find(".game-info").hasClass("hide")?c(e.target).find(".game-info").removeClass("hide"):c(".game-info").addClass("hide"))},checkForUser:function(){return!h.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},getUserId:function(){if(!h.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn)return routing.loggedInUserId},addGame:function(e){var t=this;if(!this.checkForUser()){routing.trigger("showSignup");return}!h.isUndefined(this.teamRecords)&&this.teamRecords?routing.trigger("add-game",0,c("#team-h").val(),c("#sports-h").val(),undefined,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")}):routing.trigger("add-game",0,c(e.currentTarget).data("team-id"),c(e.currentTarget).data("sport-id"),undefined,function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")})},addEvent:function(e){var t=this;if(!this.checkForUser()){c(".signup-email").trigger("click");return}!h.isUndefined(this.teamRecords)&&this.teamRecords?routing.trigger("add-event",0,c("#sports-h").val(),this.getUserId(),function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")}):routing.trigger("add-event",0,c(".selected-sport-h").data("id"),this.getUserId(),function(e){t.controller&&t.controller.getOrgData(),routing.trigger("popup-close")})},initialize:function(e){var t=this;t.eventPage=e.eventPage||!1,t.teamRecords=e.teamRecords,t.controller=e.controller||!1,!h.isUndefined(e.teamRecords)&&e.teamRecords&&(t.renderTemplate(),t.listView=".schedule-list-h",t.singleView=!0),!h.isUndefined(e.eventPage)&&e.eventPage&&(t.renderTemplate(t.eventPage),t.listView=".schedule-list-h",t.eventView=!0),d.prototype.initialize.call(t,e);if(!t.collection)throw new Error("Schedulr expected options.collection.");h.bindAll(t),t.addSubscribers(),console.error(t.collection)},renderTemplate:function(e){var t=v.to_html(o,{data:this.collection.length,eventPage:e});return console.error(t),this.$el.html(t),this}}),f});