define(["vendor","views","utils","text!site/templates/comment-item.html","common/models/delete"],function(e,t,n,r){var i,s=t.BaseView,o=require("common/models/delete"),u=e.Mustache;return i=s.extend({tagName:"li",className:"comment",events:{"click .delete-comment-h":"deleteComments"},initialize:function(e){e.template?this.template=e.template:this.template=r},render:function(){var e=u.to_html(this.template,this.model.toJSON());this.$el.html(e);var t=this.model.get("payload");console.log("profile payload = ",t);var n=this;if(t)try{var r=t.user.user_picture_obj.types.small_thumb.url;n.$(".user-photo img").attr("src",r)}catch(i){console.log(i)}return this},deleteComments:function(e){console.log(this.model),e.stopPropagation(),e.preventDefault();var t=this,n=new o;console.log("payload",this.model.get("payload")),n.subject_id=this.model.get("payload").id,n.enttypes_id=this.model.get("payload").enttypes_id,n.destroy(),$.when(n.request).done(function(){$(e.currentTarget).parents("li.comment").addClass("remove-item")})}}),i});