define(["require","text!location/templates/city.html","views","facade","utils","jqueryui","controller"],function(e,t){var n,r=e("views"),i=e("facade"),s=e("utils"),o=r.SectionView,u=i.$,a=i._,f=s.debug,l=e("controller");return n=o.extend({template:t,className:"ui-front",initialize:function(e){o.prototype.initialize.call(this,e),this.id=e.id||this.id||a.unique("v"),this.addSubscribers()},initPlugin:function(){var e=this,t=this.model.id;u("#city").autocomplete({minLength:2,source:function(e,n){console.log(e),console.log(n);var r=e.term,i=l.prototype.appStates;if(i){var s=i.findByNameInStorage(r);if(s){n(s.data);return}}var o=function(e){var t=l.prototype.appStates;t&&(t.add({name:r,data:e,storage:"localStorage",expires:new Date(Date.now()+3154e5)}),t.save(r)),n(e),console.log(t.findByNameInStorage(r))};Channel("response :"+r).subscribe(o),Channel("changeInput"+t).publish(r)},select:function(t,n){Channel("cityChanged:"+e.id).publish(n.item),f.log(n.item)}})},addSubscribers:function(){var e=this;console.log("Subscriber added"),Channel("layout:ready").subscribe(e.initPlugin)}}),n});