define(["require","facade","views","utils","vendor"],function(e){return function(e){var t=this,n="facebook-jssdk-api",r=function(){if(e)for(var t in e)this.currentTarget=e[t]}(),i=function(){window.fbAsyncInit=function(){FB.init({appId:App.Settings.appId,status:!0,cookie:!0,xfbml:!0,oauth:!0})},loadFacebook()},s=function(e,n){setTimeout(function(){t[e](n)},2e3)};checkIfScriptExists=function(){var e=document.getElementById(n)?!0:!1;return manageLoader(e),e},manageLoader=function(e){this.currentTarget&&(e?$(this.currentTarget).removeClass("blue-loading"):$(this.currentTarget).addClass("blue-loading"))},loadFacebook=function(){if(!checkIfScriptExists()){var e,t=document.getElementsByTagName("script")[0];e=document.createElement("script"),e.async=!0,e.src="//connect.facebook.net/en_US/all.js",t.parentNode.insertBefore(e,t),e.onload=function(){e.id=n}}},this.shareOnFacebook=function(e){if(checkIfScriptExists()&&"undefined"!=typeof FB){if(e.link)var t=window.location.protocol+"//"+window.location.host+"/"+e.link+"/";else var t=undefined;FB.ui({method:e.method||"",name:e.name||"Facebook Dialogs",link:t||"http://localhost/",picture:e.picture||"",caption:e.caption||"",description:e.description||""},function(t){t&&t.post_id?e.success&&_.isFunction(e.success)&&e.success():e.error&&_.isFunction(e.error)&&e.error()})}else new s("shareOnFacebook",e)},this.sendInvite=function(e){if(checkIfScriptExists()&&"undefined"!=typeof FB){if(e.link)var t=window.location.protocol+"//athletez.com/"+e.link+"/";else var t=undefined;FB.ui({method:e.method||"send",to:e.to||"",name:e.name||"Come join Me on Atheletez",link:t||"http://localhost/",picture:e.picture||"",description:e.description||""},function(t){t&&t.success?e.success&&_.isFunction(e.success)&&e.success():e.error&&_.isFunction(e.error)&&e.error()})}else new s("sendInvite",e)},this.getFriends=function(){checkIfScriptExists()&&"undefined"!=typeof FB?FB.api("/me/friends?fields=id,first_name",function(e){console.error(e)}):new s("getFriends",{})},i()}});