define(["facade","syncs/factory","syncs/storage","utils"],function(e,t,n,r){var i={},s=e.$,o=e._,u,a,f,l;return debug=r.debug,u=function(e){var t;return o.isUndefined(this.guid)&&(this.guid=e._guid()),e.data=this.toJSON(),e.save(),this},a=function(e,t){var n,r=this,i;return n=e.getItem(e.name),n||r.id&&r.urlRoot&&r.fetch&&(i=r.fetch({success:function(n){return r.save(t),n||i(e,t)}})),i||n},f=function(e){return e.data=this.toJSON(),e.save(),this},l=function(e){return e.storage.removeItem(e.name),delete e.data,this},implementation=n({create:u,read:a,update:f,destroy:l}),i=t(implementation),i});