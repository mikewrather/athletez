define(["facade","collections","models/common","utils"],function(e,t,n,r){var s,o=t.BaseCollection,u=e._,a=r.lib.Channel;return s=o.extend({model:n,url:function(){if(this.city_name==undefined)return"/api/city/search";var e="?city_name="+this.city_name;return this.states_id&&(e+="&states_id="+this.states_id),"/api/city/search/"+e},fetchSuccess:function(e,t){e.reset();var n=t.payload;if(n!=null)for(i=0;i<(n.length>10?10:n.length);i++){var r={};r.city=n[i].name,r.county=n[i].county.name,r.state=n[i].county.state.name,r.id=n[i].id,e.push(r)}e.deferred.resolve(t)},isError:function(){return!1}}),s});