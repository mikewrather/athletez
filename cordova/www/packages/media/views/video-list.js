define(["facade","views","utils","media/views/video-item","media/views/video-player","media/views/add-video"],function(e,t,n,r,i,s){var o,u,a=e.$,f=e._,l=n.lib.Channel,c=t.CollectionView,h=t.SectionView;return u=c.extend(h.prototype),o=u.extend({__super__:c.prototype,id:"video-list",name:"Video List",tagName:"ul",_tagName:"li",_className:"video",_view:r,initialize:function(e){c.prototype.initialize.call(this,e);if(!this.collection)throw new Error("VideoListView expected options.collection.");f.bindAll(this),this.addSubscribers(),this.setupPlayerView(),this.setupAddView()},childViews:{},setupAddView:function(){function r(n){t.model=n,t.render(),e.$el.append(t.el)}var e=this,t=new s({collection:this.collection}),n=this.addChildView(t);this.childViews.form=t,this.callbacks.add(function(){n()}),l("addvideo:fetch").subscribe(r)},setupPlayerView:function(){function r(e){t.model=e,t.render()}if(this.collection.size()==0)return;var e=this,t=new i({collection:this.collection,model:this.collection.at(0)}),n=this.addChildView(t);this.childViews.player=t,this.callbacks.add(function(){n(),t.render(),e.$el.prepend(t.el)}),l("changevideo"+this.collection.id).subscribe(r)}}),o});