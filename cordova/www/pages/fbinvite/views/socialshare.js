define(["vendor","views","utils","facade","text!pages/fbinvite/templates/socialshare.html","component/fb","component/share","fbinvite/models/openinvite","common/models/entparse"],function(e,t,n,r,i,s,o,u,a){var f=r.$,l=r._,c=t.BaseView,h=r.Backbone;return c.extend({template:i,events:{"click .share-on-h":"shareOn"},athletezDesc:"Athletez.com is a social network of athletez from all different sports, ages and skill levels.  Athletez is a free and easy way to build a personal athletic profile, upload media from events, games, or training sessions, and connect with teammates or training partners.  Be more involved in your athletic life with Athletez.com",initialize:function(e){this.setOptions(e),this.data=e,this.controller=e.controller,this.model=new u,e.FBOptions&&this.model.set({invite_type:e.FBOptions.invite_type,invite_to:{subject_id:e.FBOptions.subject_id,enttype_id:e.FBOptions.enttypes_id}}),console.log(this.template,this.model,this.$el),this.render()},render:function(){this.$el.html(l.template(this.template,this.data))},shareOn:function(e){e.stopPropagation();var t=f(e.currentTarget).data("share"),n=this;this.model.isNew()?this.model.save({},{success:function(e,r){n.model.id=e.get("payload").id,n.setData(e),t&&l.isFunction(n[t])&&n[t]()}}):(l.isUndefined(this.share)&&this.setData(this.model),t&&l.isFunction(n[t])&&n[t]())},setData:function(e){var t=new a({mpay:e.get("payload").invite_to_obj});this.share={caption:"Come "+e.get("payload").invite_type+' "'+t.parsedData._label+'" on Athletez.com',name:t.parsedData._label,image_path:t.parsedData.imgData.url,invite_type:e.get("payload").invite_type}},getLink:function(e){var t="#acceptfbinvite/"+this.model.get("payload").sechash;return console.log(t),t},twitter:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"twitter"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},gplus:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"gplus"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},tumbler:function(){var e=this,t=this.share,n=function(){var n={link:e.getLink(t),name:t.name,caption:t.caption,image:t.image_path,description:"",title:"",type:"tumbler"};new o(n)};e.checkForUser()?n():routing.trigger("showSignup",function(e){n()})},facebook:function(){var e=this,t=this.share,n=this.getLink(t),r=t.name,i=t.caption,o=t.image_path,u=this.athletezDesc,a=function(){var e=new s;e.shareOnFacebook({method:"feed",name:r,link:n,picture:o,caption:i,description:u,success:function(){alert("Shared successfully.")},error:function(){alert("Not Shared successfully.")}})};e.checkForUser()?a():routing.trigger("showSignup",function(e){a()})},checkForUser:function(){return!l.isUndefined(routing.userLoggedIn)&&routing.userLoggedIn?!0:!1},destroy_view:function(){delete this.model,this.model={},this.undelegateEvents(),this.$el.removeData().unbind()}})});